<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>搜索算法 | Zdx-1</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy"}}</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>:root {
 --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
 --light-background: url('/img/bk.jpg');
 --theme-encrypt-confirm: 'confirm'
}</style><script defer src="/js/arknights.js"></script><script defer src="/js/search.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/lib/encrypt/hbe.js"></script><script async src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="Zdx-1" type="application/atom+xml">
</head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>搜索算法</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2024-03-10T08:42:50.000Z" id="date"> 2024-03-10</time></div></span><br><span>Last Update: <div class="control"><time datetime="2024-03-31T12:54:50.000Z" id="updated"> 2024-03-31</time></div></span></div></div><hr><div id="post-content"><h2 id="深度优先搜索"><a href="#深度优先搜索" class="headerlink" title="深度优先搜索"></a>深度优先搜索</h2><p>Depth First Search 即 DFS，意为深度优先搜索，是所有的搜索手段之一。它是从某个状态开始，不断进行状态转移，直到不能转移后，向后回退，一直到遍历完所有的状态。</p>
<p>本章题目难度较大，请大家仔细研读讲解和代码。</p>
<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1.DFS 算法设计原理与实现方法 2.经典题型精讲</p>
<h2 id="深度优先搜索基本概念"><a href="#深度优先搜索基本概念" class="headerlink" title="深度优先搜索基本概念"></a>深度优先搜索基本概念</h2><p>作为搜索算法的一种，DFS 主要是用于解决 <code>NP</code> 完全问题。但是，深度优先搜索算法的时间复杂度较高，深度优先搜索是 $O(n!)$ 的阶乘级算法，它的效率非常低，在数据规模变大时，此算法就难以解决当前的问题了。</p>
<p>所以搜索算法使用于状态节点较小规模的问题。</p>
<h2 id="DFS-的设计步骤"><a href="#DFS-的设计步骤" class="headerlink" title="DFS 的设计步骤"></a>DFS 的设计步骤</h2><p>按照定义设计：</p>
<ol>
<li><p>确定该题目的状态（包括边界）</p>
</li>
<li><p>找到状态转移方式</p>
</li>
<li><p>找到问题的出口，计数或者某个状态</p>
</li>
<li><p>设计搜索</p>
</li>
</ol>
<p>伪代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">check</span><span class="hljs-params">(参数)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(满足条件)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(参数)</span>&#123;<br>    相应操作<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> step)</span><br>&#123;<br>        判断边界pd()<br>        &#123;<br>            不在边界内，即回溯<br>        &#125;<br>        尝试每一种可能<br>        &#123;<br>               满足check条件<br><br>               标记<br><br>               继续下一步dfs(step+<span class="hljs-number">1</span>)<br><br>               恢复初始状态（回溯的时候要用到）<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="DFS-题目讲解"><a href="#DFS-题目讲解" class="headerlink" title="DFS 题目讲解"></a>DFS 题目讲解</h2><h3 id="状态搜索代表：-N-皇后问题"><a href="#状态搜索代表：-N-皇后问题" class="headerlink" title="状态搜索代表： N 皇后问题"></a>状态搜索代表： N 皇后问题</h3><p><a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1508/learning/">题目链接</a></p>
<p>难度: 简单</p>
<p>标签: DFS</p>
<p><strong>题目描述:</strong></p>
<p>在 $N\times N$ 的方格棋盘放置了 $N$ 个皇后，使得它们不相互攻击（即任意 $2$ 个皇后不允许处在同一排，同一列，也不允许处在与棋盘边框成 $45$ 角的斜线上。你的任务是，对于给定的 $N$，求出有多少种合法的放置方法。</p>
<p><strong>输入描述:</strong></p>
<p>输入中有一个正整数 $N≤10$，表示棋盘和皇后的数量</p>
<p><strong>输出描述:</strong></p>
<p>为一个正整数，表示对应输入行的皇后的不同放置数量。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<p><strong>输入:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br></code></pre></td></tr></table></figure>

<p><strong>输出:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">10<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 256M<br></code></pre></td></tr></table></figure>

<p><strong>解题思路:</strong></p>
<p>下面是用递归的深度优先搜索求解 $n$ 皇后问题的算法描述：</p>
<p>这里用一个 $N \times N$ 的矩阵来表示棋盘，但是我们不需要定义这样的数组，只要心中有 $N \times N$ 的期盼即可。</p>
<ol>
<li><p><strong>算法开始：</strong></p>
<p>当前行设为第一行，当前列设为第一列，从第一行第一列开始搜索，即只能让皇后从第一行放到第 $n$ 行。</p>
<p>这样在每次判断是否满足情况时我们不用去判断是否皇后在相同行。</p>
<p>我们只用判断之前的 $1$ 到 $a-1$ 个皇后的位置和当前第 $a$ 个皇后的位置是否属于同一列或者斜线，判断是否同一列。</p>
</li>
<li><p><strong>判断边界：</strong></p>
<p>在当前行，当前列的位置上判断是否满足条件(即保证经过这一点的行,列与斜线上都没有两个皇后)，若不满足，跳到第 $5$ 步，即不符合边界条件。</p>
<p>首先说一下，什么叫不符合边界条件，不只是跳出了搜索范围，剪枝也可以从这里开始，比如这里不满足条件，向下继续搜索也不会再有结果。</p>
<p>这可以理解为超出边界的剪枝，我们的边界只得可能存在解的范围，这里已经超出有解的范围，必然要被踢出。</p>
<p>判断条件：</p>
<p>我们用数组 $x[a]&#x3D;i$ 来表示第 $a$ 个皇后的位置在第 $a$ 行第 $i$ 列，我们不用考虑是否在同一行的问题你，我们只用判断之前的 $1$ 到 $a-1$ 个皇后的位置和当前第 $a$ 个皇后的位置是否属于同一列或者斜线。</p>
<p>判断是否属于同一列： 就判断 $x[a]$ 是否等于 $x[i]$; 判断是否属于同一斜线：等同于判断行之差是否等于列之差也，即 $abs(x[k]-x[i]) \neq abs(k-i)$。</p>
</li>
<li><p><strong>搜索过程：</strong></p>
<p>调用 <code>Check</code> 函数。</p>
<p>如果 边界条件，就继续调用放下一个皇后的位置</p>
</li>
<li><p><strong><code>Check</code> 函数:</strong></p>
<p>如果当搜索到第 $N+1$ 行的时候，即代表前 $N$ 行已经搜索完了，所以这个时候正好求出了一个解，记录加一。</p>
</li>
<li><p>在当前位置上不满足条件的情形，进行回溯。</p>
</li>
</ol>
<p>C++ 语言描述:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> x[<span class="hljs-number">15</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> sum,n;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">PD</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;k; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">abs</span>(k-i)==<span class="hljs-built_in">abs</span>(x[k]-x[i]))<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x[k]==x[i])<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span><br>        <span class="hljs-comment">//所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span><br>        <span class="hljs-comment">//行数不需要判断，因为他们本身的i就代表的是行数</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">if</span>(a&gt;n)<br>        sum++;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">check</span>(a))<br>        <span class="hljs-keyword">return</span> ;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            x[a]=i;<br>                <span class="hljs-comment">//第a个皇后放的列数</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">PD</span>(a))<br>                    <span class="hljs-comment">//判断是否能放这步</span><br>                <span class="hljs-built_in">DFS</span>(a+<span class="hljs-number">1</span>);<br>                    <span class="hljs-comment">//能的话进行下一个皇后的放置</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">continue</span> ;<br>                    <span class="hljs-comment">//不能就下一列</span><br>        &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n;<br>    <span class="hljs-comment">//表示几个皇后</span><br>    <span class="hljs-built_in">DFS</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-comment">//每次都从第一个皇后开始</span><br>    cout&lt;&lt;sum&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs py"> x = [<span class="hljs-number">0</span>] * <span class="hljs-number">15</span><br>n = <span class="hljs-number">0</span><br><span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">k</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(k - i) == <span class="hljs-built_in">abs</span>(x[k] - x[i]):<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">elif</span> x[k] == x[i]:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-comment"># 即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span><br>        <span class="hljs-comment"># 所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span><br>        <span class="hljs-comment"># 行数不需要判断，因为他们本身的i就代表的是行数</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">a</span>):<br>    <span class="hljs-keyword">if</span> a &gt; n:<br>        <span class="hljs-keyword">global</span> <span class="hljs-built_in">sum</span><br>        <span class="hljs-built_in">sum</span> += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">DFS</span>(<span class="hljs-params">a</span>):<br><br>    <span class="hljs-keyword">if</span> check(a):<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            x[a] = i<br>            <span class="hljs-comment"># 第a个皇后放的列数</span><br>            <span class="hljs-keyword">if</span> pd(a):<br>                <span class="hljs-comment"># 判断是否能放这步</span><br>                DFS(a + <span class="hljs-number">1</span>)<br>                <span class="hljs-comment"># 能的话进行下一个皇后的放置</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">continue</span><br>                <span class="hljs-comment">#   不能就下一列</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-comment"># 不能就下一列</span><br>    DFS(<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 每次都从第一个皇后开始</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>)<br></code></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> x[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">15</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> sum, n;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">PD</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; k; i++) &#123;<br>            <span class="hljs-keyword">if</span> (abs(k - i) == abs(x[k] - x[i]))<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x[k] == x[i])<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span><br>            <span class="hljs-comment">//所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span><br>            <span class="hljs-comment">//行数不需要判断，因为他们本身的i就代表的是行数</span><br><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br><br>        <span class="hljs-keyword">if</span> (a &gt; n)<br>            sum++;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">DFS</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>        <span class="hljs-keyword">if</span> (check(a))<br>            <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                x[a] = i;<br>                <span class="hljs-comment">//第a个皇后放的列数</span><br>                <span class="hljs-keyword">if</span> (PD(a))<br>                    <span class="hljs-comment">//判断是否能放这步</span><br>                    DFS(a + <span class="hljs-number">1</span>);<br>                    <span class="hljs-comment">//能的话进行下一个皇后的放置</span><br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">continue</span>;<br>                <span class="hljs-comment">//不能就下一列</span><br>            &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        <span class="hljs-comment">//表示几个皇后</span><br>        DFS(<span class="hljs-number">1</span>);<br>        <span class="hljs-comment">//每次都从第一个皇后开始</span><br>        System.out.println(sum);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="图的路径搜索代表-路径之谜"><a href="#图的路径搜索代表-路径之谜" class="headerlink" title="图的路径搜索代表-路径之谜"></a>图的路径搜索代表-路径之谜</h3><p><a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/89/learning/">题目链接</a></p>
<p>难度: 中等</p>
<p>标签: DFS, 2016, 国赛</p>
<p><strong>题目描述:</strong></p>
<p>小明冒充 $X$ 星球的骑士，进入了一个奇怪的城堡。</p>
<p>城堡里边什么都没有，只有方形石头铺成的地面。</p>
<p>假设城堡地面是 $n \times n$ 个方格。如下图所示。</p>
<p class='item-img' data-src='/./../images/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/uid1580206-20210202-1612248935564.png'><img src="/./../images/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/uid1580206-20210202-1612248935564.png" alt="地图"></p>
<p>按习俗，骑士要从西北角走到东南角。可以横向或纵向移动，但不能斜着走，也不能跳跃。每走到一个新方格，就要向正北方和正西方各射一箭。（城堡的西墙和北墙内各有 $n$ 个靶子）同一个方格只允许经过一次。但不必走完所有的方格。如果只给出靶子上箭的数目，你能推断出骑士的行走路线吗？有时是可以的，比如上图中的例子。</p>
<p>本题的要求就是已知箭靶数字，求骑士的行走路径（测试数据保证路径唯一）</p>
<p><strong>输入:</strong></p>
<p>第一行一个整数 $N$ ($0  \leq  N  \leq  20$)，表示地面有 $N \times N$ 个方格。</p>
<p>第二行 $N$ 个整数，空格分开，表示北边的箭靶上的数字（自西向东）</p>
<p>第三行 $N$ 个整数，空格分开，表示西边的箭靶上的数字（自北向南）</p>
<p><strong>输出：</strong></p>
<p>输出一行若干个整数，表示骑士路径。</p>
<p>为了方便表示，我们约定每个小格子用一个数字代表，从西北角开始编号: 0,1,2,3 $\cdots$</p>
<p><strong>输入输出样例：</strong></p>
<p>输入</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br>2 4 3 4<br>4 3 3 3<br></code></pre></td></tr></table></figure>

<p>比如，上图中的方块编号为：</p>
<table>
<thead>
<tr>
<th>箭靶</th>
<th>2</th>
<th>4</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>4</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
<tr>
<td>3</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
</tr>
<tr>
<td>3</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
</tbody></table>
<p>输出</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">0 4 5 1 2 3 7 11 10 9 13 14 15<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 128M<br></code></pre></td></tr></table></figure>

<p><strong>解题思路:</strong></p>
<p>这里用一个 $N \times N$ 的矩阵来表示城堡的位置，横向、纵向标号 $1-N$。</p>
<p>我们采用逆推法，既然原题目是走到哪里射一支箭，那我们就走到那里之后拔一支箭，如果最后得到所有的靶子上都没有箭了，由于题目的路径唯一，那就证明我们找到了题目所要求的路径。</p>
<ol>
<li><p>算法开始：</p>
<p>当前行设为第一行，当前列设为第一列，从第一行第一列开始搜索。</p>
<p>然后从左上角初始位置，按照题目意思进行寻路。</p>
</li>
<li><p>判断边界：</p>
<p>在当前行，当前列的位置上判断是否满足条件，若不满足，跳到第 $5$ 步，即不符合边界条件。 判断条件如下：</p>
<ul>
<li>$flag[x][y]$=&#x3D;1 标记数组已经被标记,已被走过，不能再走，超出边界</li>
<li>$x&lt;1$ 从左侧走出方格。</li>
<li>$x&gt;n$ 从右侧走出方格。</li>
<li>$y&lt;1$ 从上侧走出方格。</li>
<li>$y&gt;n$ 从下侧走出方格。</li>
<li>$col[x]&lt;&#x3D;0$ 没走到右下角，箭用完了。</li>
<li>$rol[y]&lt;&#x3D;0$ 没走到右下角，箭用完了</li>
</ul>
</li>
<li><p>搜索过程：</p>
<p>调用 <code>Check</code> 函数。 如果边界条件满足，就继续调用搜索，找到下一步的位置</p>
</li>
<li><p>check(参数):</p>
<p>如果当搜索到 $x&#x3D;n,y&#x3D;n$ 时，且靶子上的箭都没了，按就找到了答案。</p>
<p>按照题目输出即可。</p>
</li>
<li><p>在当前位置上不满足条件的情形，进行回溯，并还原现场</p>
</li>
</ol>
<p>C++ 语言描述:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PII</span><br>&#123;<br>    <span class="hljs-type">int</span> first;<br>    <span class="hljs-type">int</span> second;<br>&#125;;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">30</span>;<br><span class="hljs-type">int</span> rol[N];<br><span class="hljs-type">int</span> col[N];<br><span class="hljs-type">int</span> n;<span class="hljs-comment">//格子数 长宽从1到n</span><br><span class="hljs-type">bool</span> flag[N][N]; <span class="hljs-comment">//用来标记是否走过</span><br>vector&lt;PII&gt; res;<br><br><br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;;<br><br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br><span class="hljs-comment">//--------------------------------------------</span><br><br><span class="hljs-function"><span class="hljs-type">bool</span>  <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> <span class="hljs-comment">//判断走过的路径的箭靶数是否与目标相同</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(x==n &amp;&amp; y==n)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(col[i]!=<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(rol[i]!=<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;res.<span class="hljs-built_in">size</span>(); i++)<br>        &#123;<br>            <span class="hljs-type">int</span> x=res[i].first;<br>            <span class="hljs-comment">//x 轴坐标</span><br>            <span class="hljs-type">int</span> y=res[i].second;<br>            <span class="hljs-comment">//y 轴坐标</span><br>            <span class="hljs-type">int</span> sum=n*(x<span class="hljs-number">-1</span>)+y<span class="hljs-number">-1</span> ;<br>            <span class="hljs-comment">// 通过计算的到为题目要求的坐标系</span><br>            cout &lt;&lt;sum&lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-comment">// 成功终止</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">//继续搜索</span><br>    <span class="hljs-comment">//关于终止还是继续我们交给判定即可</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x2,<span class="hljs-type">int</span> y2)</span> <span class="hljs-comment">//边界判断</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(flag[x2][y2]==<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//已被走过，不能再走，超出边界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从左侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从右侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从上侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从下侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(col[x2]&lt;=<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(rol[y2]&lt;=<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">//符合边界条件，可以继续执行搜索</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">check</span>(x,y))<br>    &#123;<br>        <span class="hljs-keyword">return</span> ;<br>        <span class="hljs-comment">//包含不符合规则的地方，回溯，用于剪枝</span><br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> xt=dx[i]+x;<br>            <span class="hljs-type">int</span> yt=dy[i]+y;<br>            <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">pd</span>(xt,yt))<br>            &#123;<br>                <span class="hljs-keyword">continue</span> ;<br>                <span class="hljs-comment">//不符合要求继续换方向搜索</span><br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-comment">//因为要进行位置转移，我们给它起个名字，叫作案现场</span><br>                <span class="hljs-comment">//比如向下移动</span><br>                flag[xt][yt]=<span class="hljs-literal">true</span>;<br>                col[xt]--;<br>                rol[yt]--;<br>                res.<span class="hljs-built_in">push_back</span>(&#123;xt,yt&#125;);<br>                <span class="hljs-built_in">dfs</span>(xt,yt);<br>                <span class="hljs-comment">//搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span><br>                res.<span class="hljs-built_in">pop_back</span>();<br>                flag[xt][yt]=<span class="hljs-literal">false</span>;<br>                col[xt]++;<br>                rol[yt]++;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        cin &gt;&gt; rol[i];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        cin &gt;&gt; col[i];<br>    flag[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-literal">true</span>;<br>    col[<span class="hljs-number">1</span>]--;<br>    rol[<span class="hljs-number">1</span>]--;<br>    res.<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;);<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>n = <span class="hljs-number">0</span><br>flag = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">26</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">27</span>)]<br>resX = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]<br>resY = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]<br>resCount = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># ---------图的路径搜索常用方向移动表示-------</span><br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">#      1------------------&gt; x</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      ↓</span><br><span class="hljs-comment">#      y</span><br><br><span class="hljs-comment"># dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment"># dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><span class="hljs-comment"># --------------------------------------------</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">global</span> n<br>    <span class="hljs-keyword">if</span> x == n &amp; y == n:<br>        <span class="hljs-comment"># print(&quot;check point1&quot;)</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> (col[i] != <span class="hljs-number">0</span>):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>                <span class="hljs-comment"># 如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> (rol[i] != <span class="hljs-number">0</span>):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, resCount):<br>            x2 = resX[i]<br>            <span class="hljs-comment"># x 轴坐标</span><br>            y2 = resY[i]<br>            <span class="hljs-comment"># y 轴坐标</span><br>            <span class="hljs-built_in">sum</span> = n * (x2 - <span class="hljs-number">1</span>) + y2 - <span class="hljs-number">1</span><br>            <span class="hljs-comment"># 通过计算的到为题目要求的坐标系</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>, end=<span class="hljs-string">&quot; &quot;</span>)<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-comment"># 成功终止</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>  <span class="hljs-comment"># 继续搜索</span><br>        <span class="hljs-comment"># 关于终止还是继续我们交给判定即可</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x2, y2</span>):<br>    <span class="hljs-keyword">global</span> n<br>    <span class="hljs-comment"># print(&quot;x2 :&quot;, x2,&quot;y2 :&quot;, y2, &quot; n &quot;, n)</span><br>    <span class="hljs-keyword">if</span> flag[x2][y2] == <span class="hljs-number">1</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint3&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-comment"># 已被走过，不能再走，超出边界</span><br>    <span class="hljs-keyword">elif</span> x2 &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint5&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从左侧走出方格</span><br>    <span class="hljs-keyword">elif</span> x2 &gt; n:<br>        <span class="hljs-comment"># print(&quot;checkPoint6&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从右侧走出方格</span><br>    <span class="hljs-keyword">elif</span> col[x2] &lt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint8&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">elif</span> y2 &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint7&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从上侧走出方格</span><br>    <span class="hljs-keyword">elif</span> y2 &gt; n:<br>        <span class="hljs-comment"># print(&quot;y2 :&quot;,y2,&quot; n &quot;,n)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从下侧走出方格</span><br>    <span class="hljs-keyword">elif</span> rol[y2] &lt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint9&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><span class="hljs-comment"># 符合边界条件，可以继续执行搜索</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> check(x, y):<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-comment"># 包含不符合规则的地方，回溯，用于剪枝</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>):<br>            xt = dx[i] + x<br>            yt = dy[i] + y<br>            <span class="hljs-comment"># print(xt, yt)</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pd(xt, yt):<br>                <span class="hljs-comment"># print(&quot;CheckPoint&quot;, xt, yt)</span><br>                <span class="hljs-keyword">continue</span><br>                <span class="hljs-comment"># 不符合要求继续换方向搜索</span><br><br>            <span class="hljs-keyword">else</span>:<br><br>                <span class="hljs-comment"># 因为要进行位置转移，我们给它起个名字，叫作案现场</span><br>                <span class="hljs-comment"># 比如向下移动</span><br>                col[xt] -= <span class="hljs-number">1</span><br>                rol[yt] -= <span class="hljs-number">1</span><br>                flag[xt][yt] = <span class="hljs-number">1</span><br>                <span class="hljs-keyword">global</span> resCount<br>                resX[resCount] = xt<br>                resY[resCount] = yt<br>                resCount += <span class="hljs-number">1</span><br>                <span class="hljs-comment"># print(&quot;---------123-------&quot;)</span><br>                <span class="hljs-comment"># print(flag)</span><br>                <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>                dfs(xt, yt)<br><br>                <span class="hljs-comment"># 搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span><br><br>                resCount -= <span class="hljs-number">1</span><br>                flag[xt][yt] = <span class="hljs-number">0</span><br>                <span class="hljs-comment"># print(&quot;--------321--------&quot;)</span><br>                <span class="hljs-comment"># print(flag)</span><br>                <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>                col[xt] += <span class="hljs-number">1</span><br>                rol[yt] += <span class="hljs-number">1</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    <span class="hljs-comment"># print(flag)</span><br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    rol = <span class="hljs-built_in">input</span>().split()<br>    rol = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, rol))<br>    rol = [<span class="hljs-number">0</span>] + rol<br>    col = <span class="hljs-built_in">input</span>().split()<br>    col = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, col))<br>    col = [<span class="hljs-number">0</span>] + col<br>    flag[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    <span class="hljs-comment"># print(flag)</span><br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    col[<span class="hljs-number">1</span>] -= <span class="hljs-number">1</span><br>    rol[<span class="hljs-number">1</span>] -= <span class="hljs-number">1</span><br>    resX[resCount] = <span class="hljs-number">1</span><br>    resY[resCount] = <span class="hljs-number">1</span><br>    resCount += <span class="hljs-number">1</span><br>    dfs(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br><br></code></pre></td></tr></table></figure>

<p>然而需要注意的是上面代码会超时，我们要对其进行优化，因为同样的计算 Python 运行时间相比 C++ 要长很多，这里给 C++ 和 Python 相同的时间，确实是难为 Python 了。 因为上面是为了给大家系统的将一个框架，而这道题目的时间复杂度相对较高，Python 的运行时间是 C++ 10 倍甚至几十倍，这个题目，同样的复杂度，Python 给的时间是不好通过这个题目的，我优化了十几遍，确实通过不了。</p>
<p>Java 语言描述:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> rol[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> col[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<span class="hljs-comment">//格子数 长宽从1到n</span><br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">boolean</span> flag[][]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N][N]; <span class="hljs-comment">//用来标记是否走过</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> resX[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">1000</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> resY[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">1000</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> resCount=<span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dx[]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> dy[]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>&#125;;<br><br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br><span class="hljs-comment">//--------------------------------------------</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>  <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> <span class="hljs-comment">//判断走过的路径的箭靶数是否与目标相同</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(x==n &amp;&amp; y==n)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>            &#123;<br><br>                <span class="hljs-keyword">if</span>(col[i]!=<span class="hljs-number">0</span>)<br>                &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>                <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>            &#125;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(rol[i]!=<span class="hljs-number">0</span>)<br>                &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>                <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>            &#125;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;resCount; i++)<br>            &#123;<br>                <span class="hljs-type">int</span> x2= resX[i];<br>                <span class="hljs-comment">//x 轴坐标</span><br>                <span class="hljs-type">int</span> y2=resY[i];<br>                <span class="hljs-comment">//y 轴坐标</span><br>                <span class="hljs-type">int</span> sum=n*(x2-<span class="hljs-number">1</span>)+y2-<span class="hljs-number">1</span> ;<br>                <span class="hljs-comment">// 通过计算的到为题目要求的坐标系</span><br>                System.out.print(sum+<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            System.out.println();<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">// 成功终止</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">//继续搜索</span><br>        <span class="hljs-comment">//关于终止还是继续我们交给判定即可</span><br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x2,<span class="hljs-type">int</span> y2)</span> <span class="hljs-comment">//边界判断</span><br>    &#123;<br><br>        <span class="hljs-keyword">if</span>(flag[x2][y2] )<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//已被走过，不能再走，超出边界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从左侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&gt;n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从右侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从上侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&gt;n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从下侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(col[x2]&lt;=<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//没走到右下角，箭用完了</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(rol[y2]&lt;=<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//没走到右下角，箭用完了</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">//符合边界条件，可以继续执行搜索</span><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><br>    &#123;<br><br>        <span class="hljs-keyword">if</span>(!check(x,y))<br>        &#123;<br>            <span class="hljs-keyword">return</span> ;<br>            <span class="hljs-comment">//包含不符合规则的地方，回溯，用于剪枝</span><br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>            &#123;<br>                <span class="hljs-type">int</span> xt=dx[i]+x;<br>                <span class="hljs-type">int</span> yt=dy[i]+y;<br><br>                <span class="hljs-keyword">if</span>(!pd(xt,yt))<br>                &#123;<br>                    <span class="hljs-keyword">continue</span> ;<br>                    <span class="hljs-comment">//不符合要求继续换方向搜索</span><br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    <span class="hljs-comment">//因为要进行位置转移，我们给它起个名字，叫作案现场</span><br>                    <span class="hljs-comment">//比如向下移动</span><br>                    flag[xt][yt]=<span class="hljs-literal">true</span>;<br>                    col[xt]--;<br>                    rol[yt]--;<br>                    resX[resCount]=xt;<br>                    resY[resCount++]=yt;<br>                    dfs(xt,yt);<br>                    <span class="hljs-comment">//搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span><br>                    resCount--;<br>                    flag[xt][yt]=<span class="hljs-literal">false</span>;<br>                    col[xt]++;<br>                    rol[yt]++;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>            rol[i]=in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>             col[i]=in.nextInt();<br>        flag[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-literal">true</span>;<br>        col[<span class="hljs-number">1</span>]--;<br>        rol[<span class="hljs-number">1</span>]--;<br>        resX[resCount]=<span class="hljs-number">1</span>;<br>        resY[resCount++]=<span class="hljs-number">1</span>;<br>        dfs(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="最大数字"><a href="#最大数字" class="headerlink" title="最大数字"></a>最大数字</h3><p>给定一个正整数 $N$ 。你可以对 $N$ 的任意一位数字执行任意次以下 $2$ 种操 作：</p>
<ol>
<li><p>将该位数字加 $1$ 。如果该位数字已经是 $9$ , 加 $1$ 之后变成 $0$ 。</p>
</li>
<li><p>将该位数字减 $1$ 。如果该位数字已经是 $0$ , 减 $1$ 之后变成 $9$ 。</p>
</li>
</ol>
<p>你现在总共可以执行 $1$ 号操作不超过 $A$ 次, $2$ 号操作不超过 $B$ 次。 请问你最大可以将 $N$ 变成多少?</p>
<p><strong>解题思路:</strong></p>
<p>看上去 $N$ 的范围貌似很大，达到了 <code>1e17</code> 的范围，但其实我们最多只需要考虑这最多 <code>17</code> 位数，所以可以想到爆搜得到答案。</p>
<p>一个数的大小是从左到右依次判断，所以我们从最左边开始枚举，我们无需关注后面的数，要利用自己的 <code>1</code> 号操作和 <code>2</code> 号操作 <strong>保证当前这个数位的数一定要尽可能最大</strong></p>
<p>然后分别考虑两种操作，首先两种操作不可能混用，因为它们是抵消的效果，所以要么对这个数全使用 <code>1</code> 操作，要么 <code>2</code> 操作。假设某个数位的值为 <code>x</code>,首先考虑 <code>1</code> 号操作，使用后可以让该数位变大，出于<strong>贪心</strong>考虑，我们想让它变成 <code>9</code>，那么需要进行 <code>9-x</code> 次 <code>1</code> 号操作，当然可能此时 <code>1</code> 号操作并不足以让我们将 <code>x</code> 变成 <code>9</code>，但我们还是使用剩余的全部的次数将其变大，所以每次考虑 <code>1</code> 号操作应该使用的操作数 <code>t</code> 应该为 <code>t=min(n,9-x)</code>,此时 <code>x</code> 将变为 <code>x+t</code>，然后进行下一位的判断。</p>
<p>其次我们考虑 <code>2</code> 号操作，这个的判断比较简单，它是让某个值减小，唯一能让某个数变大的机会就是将其减到 <code>0</code> 后再减就会变成 <code>9</code>。那么这样操作需要的次数就是 <code>x+1</code>，如果操作次数不够，那我们宁愿不使用，因为这只会让这个数位变得更小。</p>
<p>在深搜 <code>dfs</code> 的过程中，参数记录遍历到第几个数位以及此时累计的和，当搜索完所有数位后，将此时的和与答案进行一个取 <code>max</code>，最后的值则为答案。</p>
<p>C++ 语言描述：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><br><span class="hljs-type">char</span> c[<span class="hljs-number">20</span>];<br>LL ans=<span class="hljs-number">0</span>;<br><span class="hljs-comment">//n:1号操作剩余次数  m:2号操作剩余次数</span><br><span class="hljs-type">int</span> n,m;<br><span class="hljs-type">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> i,LL v)</span>&#123;<br>    <span class="hljs-type">int</span> x=c[i]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">if</span>(c[i])&#123;<br>        <span class="hljs-comment">//应该使用的操作次数</span><br>        <span class="hljs-type">int</span> t=min(n,<span class="hljs-number">9</span>-x);<br>        n-=t;<br>        dfs(i+<span class="hljs-number">1</span>,v*<span class="hljs-number">10</span>+x+t);<br>        <span class="hljs-comment">//回溯</span><br>        n+=t;<br>        <span class="hljs-comment">//考虑操作2是否能够使用</span><br>        <span class="hljs-keyword">if</span>(m&gt;x)&#123;<br>            m-=x+<span class="hljs-number">1</span>;<br>            dfs(i+<span class="hljs-number">1</span>,v*<span class="hljs-number">10</span>+<span class="hljs-number">9</span>);<br>            <span class="hljs-comment">//回溯</span><br>            m+=x+<span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-comment">//答案取max</span><br>        ans=max(ans,v);<br>    &#125;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s%d%d&quot;</span>,c,&amp;n,&amp;m);<br>    dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(System.out));<br>    <span class="hljs-keyword">static</span> String t;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> a, b, m;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// i 表示考虑到第i位  v表示当前的值是多少</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">long</span> v)</span> &#123;<br>        <span class="hljs-keyword">if</span> (i == m) &#123;<br>            ans = Math.max(ans, v);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> t.charAt(i) - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-comment">//考虑第一种使用</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">g</span> <span class="hljs-operator">=</span> Math.min(a, <span class="hljs-number">9</span> - c);<br>        a -= g;<br>        dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + c + g);<br>        <span class="hljs-comment">//回溯</span><br>        a += g;<br>        <span class="hljs-comment">//考虑第二种使用   我一定要减到9  只有b&gt;c 才能减到9</span><br>        <span class="hljs-keyword">if</span> (b &gt; c) &#123;<br>            b -= c + <span class="hljs-number">1</span>;<br>            dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + <span class="hljs-number">9</span>);<br>            <span class="hljs-comment">//回溯</span><br>            b += c + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        String[] s = br.readLine().trim().split(<span class="hljs-string">&quot; &quot;</span>);<br>        t = s[<span class="hljs-number">0</span>];<br>        m = t.length();<br>        a = Integer.parseInt(s[<span class="hljs-number">1</span>]);<br>        b = Integer.parseInt(s[<span class="hljs-number">2</span>]);<br>        dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>        out.println(ans);<br>        out.flush();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br>t = <span class="hljs-string">&quot;&quot;</span><br>a = <span class="hljs-number">0</span><br>b = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>ans = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">i, v</span>):<br>    <span class="hljs-keyword">global</span> ans, a, b, t<br>    <span class="hljs-keyword">if</span> i == m:<br>        ans = <span class="hljs-built_in">max</span>(ans, v)<br>        <span class="hljs-keyword">return</span><br>    c = <span class="hljs-built_in">int</span>(t[i])<br>    <span class="hljs-comment"># 考虑第一种使用</span><br>    g = <span class="hljs-built_in">min</span>(a, <span class="hljs-number">9</span> - c)<br>    a -= g<br>    dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + c + g)<br>    <span class="hljs-comment"># 回溯</span><br>    a += g<br>    <span class="hljs-comment"># 考虑第二种使用   我一定要减到9  只有b&gt;c 才能减到9</span><br>    <span class="hljs-keyword">if</span> b &gt; c:<br>        b -= c + <span class="hljs-number">1</span><br>        dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + <span class="hljs-number">9</span>)<br>        <span class="hljs-comment"># 回溯</span><br>        b += c + <span class="hljs-number">1</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">global</span> ans, a, b, t, m<br>    line = sys.stdin.readline().strip()<br>    s = line.split()<br>    t = s[<span class="hljs-number">0</span>]<br>    m = <span class="hljs-built_in">len</span>(t)<br>    a = <span class="hljs-built_in">int</span>(s[<span class="hljs-number">1</span>])<br>    b = <span class="hljs-built_in">int</span>(s[<span class="hljs-number">2</span>])<br>    dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>    <span class="hljs-built_in">print</span>(ans)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>DFS 是一种非常重要的回溯算法，它是通过递归设计转移状态，再加上边界判断，与结果检查，构成的基本搜索框架。</p>
<p>DFS 最重要的就是设计回溯，所谓回溯就是还原现场，保证在执行另一分支的时候能够确保所有的改变只受当前状态的影响，所以在一条路走不通时就要修改。特殊的修改可以达到特殊的回溯效果，回溯时剪枝，回溯时调整路线，都是可以的。</p>
<p>DFS 是算法学习的基础工具，很重要，必须要学会。</p>
<hr>
<p>show: step version: 1.0 enable_checker: true</p>
<hr>
<h2 id="广度优先搜索"><a href="#广度优先搜索" class="headerlink" title="广度优先搜索"></a>广度优先搜索</h2><p>BFS，其英文全称是 Breadth First Search，意为广度优先搜索，是所有的搜索手段之一。它是从某个状态开始，将所有节点加入一个先进先出的队列，然后一层一层进行状态转移，并且展开节点。</p>
<p>本章题目难度较大，请大家仔细研读讲解和代码。</p>
<h2 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h2><p>1.BFS 算法设计原理与实现方法 2.经典题型精讲</p>
<h2 id="广度优先搜索基本概念"><a href="#广度优先搜索基本概念" class="headerlink" title="广度优先搜索基本概念"></a>广度优先搜索基本概念</h2><p>作为搜索算法的一种，BFS 相较于 DFS 而言，BFS 是一层一层展开的，那么对于有多个终态时，最先找到的一定是最短的。</p>
<h2 id="广度优先搜索算法的设计步骤"><a href="#广度优先搜索算法的设计步骤" class="headerlink" title="广度优先搜索算法的设计步骤"></a>广度优先搜索算法的设计步骤</h2><p>按照定义设计：</p>
<ol>
<li><p>确定该题目的状态（包括边界）</p>
</li>
<li><p>找到状态转移方式</p>
</li>
<li><p>找到问题的出口，计数或者某个状态</p>
</li>
<li><p>设计搜索</p>
</li>
</ol>
<p>会发现我们前期要找到的参数基本一致，所以在一般情况下 BFS 和 DFS 可以相互转换。</p>
<p>伪代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">check</span><span class="hljs-params">(参数)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(满足条件)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(参数)</span>&#123;<br>    相应操作<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">bfs</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-number">1.</span> 把根节点放入队列尾端<br>    <span class="hljs-number">2.</span> 每次从队列中取出一个节点<br>    <span class="hljs-number">3.</span> Check 判断是不是答案，如果是结束算法 <span class="hljs-keyword">return</span>;<br>    <span class="hljs-number">4.</span> 把当前取出的节点扩展，如果扩展后的节点经Pd()后符合要求，就放入队列，不符合就不放。<br>    <span class="hljs-number">5.</span> 转到步骤<span class="hljs-number">2</span>，循环执行<br>&#125;<br><br>如果所有节点被扩展完了，没有找到答案就无解。<br></code></pre></td></tr></table></figure>

<h3 id="长草"><a href="#长草" class="headerlink" title="长草"></a>长草</h3><p><a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/149/learning/">题目链接</a></p>
<p>难度: 简单</p>
<p>标签: 模拟, BFS, 2020, 省模拟赛</p>
<p><strong>题目描述:</strong></p>
<p>小明有一块空地，他将这块空地划分为 $n$ 行 $m$ 列的小块，每行和每列的长度都为 1。</p>
<p>小明选了其中的一些小块空地，种上了草，其他小块仍然保持是空地。</p>
<p>这些草长得很快，每个月，草都会向外长出一些，如果一个小块种了草，则它将向自己的上、下、左、右四小块空地扩展，</p>
<p>这四小块空地都将变为有草的小块。请告诉小明，$k$ 个月后空地上哪些地方有草。</p>
<p><strong>输入描述:</strong></p>
<p>输入的第一行包含两个整数 $n, m$。</p>
<p>接下来 $n$ 行，每行包含 $m$ 个字母，表示初始的空地状态，字母之间没有空格。如果为小数点，表示为空地，如果字母为 $g$，表示种了草。</p>
<p>接下来包含一个整数 $k$。 其中，$2   \leq   n, m   \leq   1000，1   \leq   k   \leq   1000$。</p>
<p><strong>输出描述:</strong></p>
<p>输出 $n$ 行，每行包含 $m$ 个字母，表示 $k$ 个月后空地的状态。如果为小数点，表示为空地，如果字母为 $g$，表示长了草。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<p><strong>输入:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>4 5<br>.g...<br>.....<br>..g..<br>.....<br>2<br></code></pre></td></tr></table></figure>

<p><strong>输出:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>gggg.<br>gggg.<br>ggggg<br>.ggg.<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 256M<br></code></pre></td></tr></table></figure>

<p><strong>解题思路:</strong></p>
<p>这个题目简直就是为了广度优先搜索设置模板题，由于这个题目时输出广度优先搜索 <code>K</code> 次扩展后的终态，那我们就不用设置 <code>Check</code> 函数。</p>
<p>这里用一个 $N\times M$ 的矩阵来表示草地。</p>
<ol>
<li><p>算法开始：</p>
<p>将字母为 <code>g</code> 的草地的位置加入队列，然后向下执行</p>
</li>
<li><p>判断边界：</p>
<p>判断是否已经长了草，判断是否超出边界范围</p>
</li>
<li><p>搜索过程：</p>
<p>不断从队列取出一个节点，进行上下左右的扩展，执行 <code>2</code> 判断边界，符合就放入队列，不符合就跳过。</p>
<p>执行 K 次扩展，输出草地状态。</p>
</li>
<li><p>check(参数)：</p>
<p>这里不需要进行 <code>Check</code></p>
</li>
</ol>
<p>C++ 语言描述:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M = <span class="hljs-number">1005</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PII</span><br>&#123;<br>    <span class="hljs-type">int</span> first;<br>    <span class="hljs-type">int</span> second;<br>&#125;;<br><span class="hljs-comment">// C++ 有个数据类型叫 pair 上面的就可以定义为 pair&lt;int,int&gt; 用起来比较方便。</span><br>PII tempPair;<span class="hljs-comment">//临时结点</span><br><span class="hljs-type">char</span> Map[M][M];<br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;;<br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br><span class="hljs-type">int</span> n;<span class="hljs-comment">// n 行</span><br><span class="hljs-type">int</span> m;<span class="hljs-comment">// m 列</span><br><span class="hljs-type">int</span> k;<span class="hljs-comment">// k 次</span><br><br>queue&lt;PII &gt; q; <span class="hljs-comment">//广度优先搜索所用的队列</span><br><br><span class="hljs-type">int</span> len;<span class="hljs-comment">//记录节点数量方便后续k的计算</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(x&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// /x 轴坐标 左侧越界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//x 轴坐标 右侧越界</span><br>    <span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span>(y&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//y 轴坐标 上侧越界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&gt;m)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//y 轴坐标 下侧越界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(Map[x][y]==<span class="hljs-string">&#x27;g&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//已经长草了</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 在范围内，且没长草</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BFS</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//BFS</span><br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>()&amp;&amp;k&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        tempPair = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-comment">//这两步是取出队首的节点</span><br><br>        <span class="hljs-type">int</span> x = tempPair.first;<span class="hljs-comment">//横坐标</span><br>        <span class="hljs-type">int</span> y = tempPair.second;<span class="hljs-comment">//纵坐标</span><br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> nowx = x+dx[i]; <span class="hljs-comment">//扩展后的横坐标</span><br>            <span class="hljs-type">int</span> nowy = y+dy[i]; <span class="hljs-comment">//扩展后的纵坐标</span><br><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">pd</span>(nowx,nowy))<br>            &#123;<br>                q.<span class="hljs-built_in">push</span>(&#123;nowx,nowy&#125;);<br>                Map[nowx][nowy]=<span class="hljs-string">&#x27;g&#x27;</span>;<br>            &#125;<br>            <span class="hljs-comment">//符合要求执行扩展，不符合要求，忽略即可。</span><br>        &#125;<br><br>        len--; <span class="hljs-comment">//没取出一个节点len  -1</span><br>        <span class="hljs-keyword">if</span>(len==<span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-comment">//当len =0 时，代表当前层扩展完了，那么就代表第一个月扩展完了</span><br>            k--; <span class="hljs-comment">// 所以k--</span><br>            len = q.<span class="hljs-built_in">size</span>(); <span class="hljs-comment">// 当前层扩展完了，那就该扩展下一层了，所以len又被赋值为下一层的节点数目的值</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>        &#123;<br>            cin&gt;&gt;Map[i][j];<br>            <span class="hljs-keyword">if</span>(Map[i][j]==<span class="hljs-string">&#x27;g&#x27;</span>)<br>            &#123;<br>                tempPair.first=i;<br>                tempPair.second=j;<br>               <span class="hljs-comment">// cout&lt;&lt;i&lt;&lt;&quot;&quot;&lt;&lt;j&lt;&lt;endl;</span><br>                q.<span class="hljs-built_in">push</span>(tempPair);<span class="hljs-comment">//将初始有树的结点加入队列</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    len = q.<span class="hljs-built_in">size</span>();<span class="hljs-comment">//记录第一层的节点数量方便后续k的计算</span><br>    cin&gt;&gt;k;<br>    <span class="hljs-built_in">BFS</span>();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>        &#123;<br>            cout&lt;&lt;Map[i][j];<br>        &#125;<br><br>        cout&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">#      1------------------&gt; x</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      ↓</span><br><span class="hljs-comment">#      y</span><br><br><span class="hljs-comment"># dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment"># dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br>Map = []<br><br>q = Queue()<br><br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>k = <span class="hljs-number">0</span><br><br>length = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">global</span> n, m, Map<br>    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标左侧越界</span><br>    <span class="hljs-keyword">elif</span> x &gt;= n:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标右侧越界</span><br>    <span class="hljs-keyword">elif</span> y &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y轴坐标上侧越界</span><br>    <span class="hljs-keyword">elif</span> y &gt;= m:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y 轴坐标下侧越界</span><br>    <span class="hljs-keyword">elif</span> Map[x][y] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 已经长草了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># 在范围内，且没长草</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>():<br><br>    <span class="hljs-keyword">global</span> k, q, n, m, Map, length<br>    <span class="hljs-keyword">while</span> k &gt; <span class="hljs-number">0</span> &amp; (<span class="hljs-keyword">not</span> q.empty()):<br>        tempPair = q.get()<br>        x = tempPair[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 横坐标</span><br>        y = tempPair[<span class="hljs-number">1</span>]  <span class="hljs-comment"># 纵坐标</span><br>        nowx=x+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(nowx, y)):<br>            q.put((nowx, y))<br>            Map[nowx][y] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        nowx=x-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(nowx, y)):<br>            q.put((nowx, y))<br>            Map[nowx][y] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        nowy=y+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(x, nowy)):<br>            q.put((nowx, nowy))<br>            Map[x][nowy] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        nowy=y-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(x, nowy)):<br>            q.put((nowx, nowy))<br>            Map[x][nowy] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        length -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> length == <span class="hljs-number">0</span>:<br>            k -= <span class="hljs-number">1</span><br>            length = q.qsize()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        input_ = <span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            Map[i][j] = input_[j]<br>            <span class="hljs-keyword">if</span> Map[i][j] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>                q.put((i, j))<br><br>    k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    length = q.qsize()<br>    BFS()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        str_temp = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            str_temp += Map[i][j]<br>        <span class="hljs-built_in">print</span>(str_temp)<br></code></pre></td></tr></table></figure>

<p><strong>重点:</strong></p>
<p>Python 的 Queue 非常耗费时间，强烈建议大家使用 list 进行模拟</p>
<p>下面是用 List 模拟，使用 Queue 耗时 3000 ms , 使用 list 模拟仅消耗 54 ms 所以大家使用 Python 编写代码的时候还是使用 List 尽量避免 Queue 的使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">#      1------------------&gt; x</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      ↓</span><br><span class="hljs-comment">#      y</span><br><br><span class="hljs-comment"># dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment"># dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br>Map = []<br><br>q = []<br>qfront = <span class="hljs-number">0</span><br>qend = <span class="hljs-number">0</span><br><br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>k = <span class="hljs-number">0</span><br><br>length = <span class="hljs-number">0</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标左侧越界</span><br>    <span class="hljs-keyword">elif</span> x &gt;= n:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标右侧越界</span><br>    <span class="hljs-keyword">elif</span> y &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y轴坐标上侧越界</span><br>    <span class="hljs-keyword">elif</span> y &gt;= m:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y 轴坐标下侧越界</span><br>    <span class="hljs-keyword">elif</span> Map[x][y] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 已经长草了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># 在范围内，且没长草</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>():<br>    <span class="hljs-keyword">global</span> k, q, n, m, Map, length, qend, qfront<br>    <span class="hljs-comment"># print(&quot;K Length&quot;, k, length)</span><br>    <span class="hljs-keyword">while</span> k &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> length &gt; <span class="hljs-number">0</span>:<br>        tempPair = q[qfront]<br>        qfront += <span class="hljs-number">1</span><br>        x = tempPair[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 横坐标</span><br>        y = tempPair[<span class="hljs-number">1</span>]  <span class="hljs-comment"># 纵坐标</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br><br>            nowx = x + dx[i]  <span class="hljs-comment"># 扩展后的横坐标</span><br>            nowy = y + dy[i]  <span class="hljs-comment"># 扩展后的纵坐标</span><br><br>            <span class="hljs-keyword">if</span> (pd(nowx, nowy)):<br>                q.append((nowx,nowy))<br>                qend += <span class="hljs-number">1</span><br>                Map[nowx][nowy] = <span class="hljs-string">&#x27;g&#x27;</span><br>        length -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> length == <span class="hljs-number">0</span>:<br>            k -= <span class="hljs-number">1</span><br>            length = qend - qfront<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        input_ = <span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            Map[i][j] = input_[j]<br>            <span class="hljs-keyword">if</span> Map[i][j] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>                q.append((i,j))<br>                qend += <span class="hljs-number">1</span><br><br>    k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    length = qend - qfront<br>    BFS()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        str_temp = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            str_temp += Map[i][j]<br>        <span class="hljs-built_in">print</span>(str_temp)<br></code></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.concurrent.LinkedBlockingQueue;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">M</span> <span class="hljs-operator">=</span> <span class="hljs-number">1005</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PII</span><br>    &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> first;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> second;<br>    &#125;;<br><br>    <span class="hljs-keyword">static</span> String Map[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[M];<br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dx[]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> dy[]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>&#125;;<br><br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<span class="hljs-comment">// n 行</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> m;<span class="hljs-comment">// m 列</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> k;<span class="hljs-comment">// k 次</span><br><br>    <span class="hljs-keyword">static</span> Queue&lt;PII &gt; q= <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;();<br>    <span class="hljs-comment">//广度优先搜索所用的队列</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> len;<span class="hljs-comment">//记录节点数量方便后续k的计算</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span><br>    &#123;<br><br>        <span class="hljs-keyword">if</span>(x&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">// /x 轴坐标 左侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x&gt;n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//x 轴坐标 右侧越界</span><br>        <span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span>(y&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 上侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&gt;m)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 下侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(Map[x].charAt(y)==<span class="hljs-string">&#x27;g&#x27;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//已经长草了</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">// 在范围内，且没长草</span><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">BFS</span><span class="hljs-params">()</span><br>    &#123;<br>        <span class="hljs-comment">//BFS</span><br>        <span class="hljs-keyword">while</span>(q.size()!=<span class="hljs-number">0</span>&amp;&amp;k&gt;<span class="hljs-number">0</span>)<br>        &#123;<br>            PII tempPair= q.peek();<br>            q.poll();<br>            <span class="hljs-comment">//这两步是取出队首的节点</span><br><span class="hljs-comment">//            System.out.println(q.size());</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> tempPair.first;<span class="hljs-comment">//横坐标</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> tempPair.second;<span class="hljs-comment">//纵坐标</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>            &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">nowx</span> <span class="hljs-operator">=</span> x+dx[i]; <span class="hljs-comment">//扩展后的横坐标</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">nowy</span> <span class="hljs-operator">=</span> y+dy[i]; <span class="hljs-comment">//扩展后的纵坐标</span><br>                <span class="hljs-keyword">if</span>(pd(nowx,nowy))<br>                &#123;<br>                    PII tempPair2=<span class="hljs-keyword">new</span> <span class="hljs-title class_">PII</span>();<span class="hljs-comment">//临时结点</span><br>                    tempPair2.first=nowx;<br>                    tempPair2.second=nowy;<br>                    q.add(tempPair2);<br>                    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">strBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(Map[nowx]);<br>                    strBuilder.setCharAt(nowy, <span class="hljs-string">&#x27;g&#x27;</span>);<br>                    Map[nowx]=strBuilder.toString();<br>                &#125;<br>                <span class="hljs-comment">//符合要求执行扩展，不符合要求，忽略即可。</span><br>            &#125;<br>            len--; <span class="hljs-comment">//没取出一个节点len  -1</span><br>            <span class="hljs-keyword">if</span>(len==<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-comment">//当len =0 时，代表当前层扩展完了，那么就代表第一个月扩展完了</span><br>                k--; <span class="hljs-comment">// 所以k--</span><br>                len = q.size(); <span class="hljs-comment">// 当前层扩展完了，那就该扩展下一层了，所以len又被赋值为下一层的节点数目的值</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        m = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            Map[i]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot; &quot;</span> +in.next());<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>            &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">temChar</span> <span class="hljs-operator">=</span> Map[i].charAt(j);<br>                <span class="hljs-keyword">if</span>(temChar==<span class="hljs-string">&#x27;g&#x27;</span>)<br>                &#123;<br>                    PII tempPair=<span class="hljs-keyword">new</span> <span class="hljs-title class_">PII</span>();<span class="hljs-comment">//临时结点</span><br>                    tempPair.first=i;<br>                    tempPair.second=j;<br>                    q.offer(tempPair);<span class="hljs-comment">//将初始有草的结点加入队列</span><br>                &#125;<br>            &#125;<br>        &#125;<br><br>        len = q.size();<span class="hljs-comment">//记录第一层的节点数量方便后续k的计算</span><br>        k= in.nextInt();<br>        BFS();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            System.out.println(Map[i]);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="走迷宫"><a href="#走迷宫" class="headerlink" title="走迷宫"></a>走迷宫</h3><p><a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1216/learning/">题目链接</a></p>
<p>难度: 简单</p>
<p>标签: BFS</p>
<p><strong>题目描述:</strong></p>
<p>给定一个 $N\times M$ 的网格迷宫 $G$。$G$ 的每个格子要么是道路，要么是障碍物（道路用 $1$ 表示，障碍物用 $0$ 表示）。</p>
<p>已知迷宫的入口位置为 $(x_1,y_1)$，出口位置为 $(x_2 , y_2)$。问从入口走到出口，最少要走多少个格子。</p>
<p><strong>输入:</strong></p>
<p>输入第 $1$ 行包含两个正整数 $N,M$，分别表示迷宫的大小。</p>
<p>接下来输入一个 $N\times M$ 的矩阵。若 $G_{i,j}&#x3D;1$ 表示其为道路，否则表示其为障碍物。</p>
<p>最后一行输入四个整数 $x_1,y_1,x_2,y_2$，表示入口的位置和出口的位置。</p>
<p>$1\leq N,M\leq10^2$，$0\leq G_{i,j}\leq 1$，$1\leq x_1,x_2\leq N$，$1\leq y_1,y_2\leq M$。</p>
<p><strong>输出：</strong></p>
<p>输出仅一行，包含一个整数表示答案。</p>
<p>若无法从入口到出口，则输出 $-1$。</p>
<p><strong>输入输出样例：</strong></p>
<p>输入</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 5<br>1 0 1 1 0<br>1 1 0 1 1<br>0 1 0 1 1<br>1 1 1 1 1<br>1 0 0 0 1<br>1 1 5 5<br></code></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">8<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 128M<br></code></pre></td></tr></table></figure>

<p><strong>解题思路:</strong></p>
<ol>
<li><p><strong>算法开始：</strong></p>
<p>我们以起点开始做 BFS ，将入口压入栈开始执行 BFS 算法</p>
</li>
<li><p><strong>判断边界：</strong></p>
<p>在当前行，当前列的位置上判断是否满足条件，若不满足，跳到第 5 步，即不符合边界条件。 判断条件如下：</p>
<ol>
<li><p>$vis[x][y]$ &gt;&#x3D; 1 标记数组已经被标记，已被走过，不能再走，超出边界</p>
</li>
<li><p>$x &lt; 1$ 从左侧走出方格</p>
</li>
<li><p>$x &gt; n$ 从右侧走出方格</p>
</li>
<li><p>$y &lt; 1$ 从上侧走出方格</p>
</li>
<li><p>$y &gt; n$ 从下侧走出方格</p>
</li>
<li><p>$map[x][y]$ !&#x3D; 1 没有路不能走</p>
</li>
</ol>
</li>
<li><p><strong>搜索过程：</strong></p>
<p>调用 Check 函数。</p>
<p>如果边界条件满足，就继续调用搜索，找到下一步的位置</p>
<p>每次找到下一个位置的时候，令其 $Vis[nextx][nexty]$ &#x3D; 当前 $Vis + 1$</p>
<p>这样既能用 $vis$ 数组标记又能使用 $vis$ 数组存步数，从 $1$ 开始，即开始节点是 $1$ ，所以最后要减去 $1$ 。</p>
</li>
<li><p><strong>check(参数)：</strong></p>
<p>如果当搜索到 $x &#x3D; 终点 x$, $y &#x3D; 终点 y$ 时，就找到了终点，此时他的 $Vis$ 数组就存储了他的步数，但是是从 $1$ 开始的。</p>
</li>
</ol>
<p>C++ 语言描述:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> vis[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>]; <span class="hljs-comment">//用于存储是否访问过，并且存储长度</span><br><br><span class="hljs-type">char</span> G[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>]; <span class="hljs-comment">//用于存储题目给出的地图</span><br><br><span class="hljs-type">int</span> n,m,ans=<span class="hljs-number">0</span>;<br><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">1</span>&#125;;<br><br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-comment">//上下左右移动，不会的看前面的代码</span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> x;<br>    <span class="hljs-type">int</span> y;<br>&#125;;<br><br>node Start,End;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br><br><br>    <span class="hljs-keyword">if</span>(x&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从左侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从右侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从上侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&gt;m)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从下侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( vis[x][y]!=<span class="hljs-number">0</span>)<br>        <span class="hljs-comment">//已经访问了</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(G[x][y]!=<span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//不是路不能走</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span>  <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">if</span>(x == End.x&amp;&amp; y == End.y)   <span class="hljs-comment">//找到终点，把距离给他</span><br>    &#123;<br>        ans  =  vis[x][ y];<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">else</span>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;node&gt;q;<br><br>    node now,next;<br><br>    q.<span class="hljs-built_in">push</span>(Start);     <span class="hljs-comment">//将起点压人队列中</span><br><br>    vis[Start.x][Start.y] = <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        now = q.<span class="hljs-built_in">front</span>();<br><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">check</span>(now.x,now.y))<br>            <span class="hljs-keyword">return</span> ;<br><br>        q.<span class="hljs-built_in">pop</span>();     <span class="hljs-comment">//将队列最前面的弹出。</span><br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)  <span class="hljs-comment">//四个方向</span><br>        &#123;<br><br>            <span class="hljs-type">int</span> nextx = now.x + dx[i];<br>            <span class="hljs-type">int</span> nexty = now.y + dy[i];<br><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">pd</span>(nextx,nexty))  <span class="hljs-comment">//判断是否符合条件</span><br>            &#123;<br><br>                next.x=nextx;<br>                next.y=nexty;<br><br>                q.<span class="hljs-built_in">push</span>(next);<br><br>                vis[nextx][nexty] = vis[now.x][now.y]+<span class="hljs-number">1</span>; <span class="hljs-comment">//步数+1</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-comment">//memset(vis,0,sizeof(vis));</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>        &#123;<br>            cin&gt;&gt;G[i][j];<br>        &#125;<br>    &#125;<br><br>    cin&gt;&gt;Start.x&gt;&gt;Start.y&gt;&gt;End.x&gt;&gt;End.y;<br><br>    ans = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-built_in">bfs</span>();<br>    cout&lt;&lt;ans<span class="hljs-number">-1</span>&lt;&lt;endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br><br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br>G = []<br><br>Vis = []<br><br><span class="hljs-comment"># --------队列模拟-----------</span><br>q = []                   <span class="hljs-comment"># |</span><br>                         <span class="hljs-comment"># |</span><br>qfront = <span class="hljs-number">0</span>               <span class="hljs-comment"># |</span><br>                         <span class="hljs-comment"># |</span><br>qend = <span class="hljs-number">0</span>                 <span class="hljs-comment"># |</span><br><span class="hljs-comment"># --------队列模拟-----------</span><br><br><br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>ans = <span class="hljs-number">0</span><br><br>startX=<span class="hljs-number">0</span><br>startY=<span class="hljs-number">0</span><br><br>endX=<span class="hljs-number">0</span><br>endY=<span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-comment"># x 轴坐标左侧越界</span><br><br>    <span class="hljs-keyword">elif</span> x &gt; n:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标右侧越界</span><br><br>    <span class="hljs-keyword">elif</span> y &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y轴坐标上侧越界</span><br><br>    <span class="hljs-keyword">elif</span> y &gt; m:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y 轴坐标下侧越界</span><br><br>    <span class="hljs-keyword">elif</span> Vis[x][y]!=<span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment">#已经访问了</span><br>    <span class="hljs-keyword">elif</span> G[x][y] != <span class="hljs-string">&#x27;1&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 已经访问了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    <span class="hljs-comment"># 在范围内，且没长草</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params"> x,  y</span>):<br><br>    <span class="hljs-keyword">global</span> ans<br>    <span class="hljs-keyword">if</span> x == endX <span class="hljs-keyword">and</span> y == endY :  <span class="hljs-comment">#找到终点，把距离给他</span><br><br>        ans  =  Vis[x][y];<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>;<br><br>    <span class="hljs-keyword">else</span>   :<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>():<br><br><br>    <span class="hljs-keyword">global</span> qend ,qfront<br><br>    q.append((startX,startY))<br><br>    qend+=<span class="hljs-number">1</span><br><br>    Vis[startX][startY]=<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">while</span> qend-qfront!=<span class="hljs-number">0</span>:<br><br>        tempPair = q[qfront]<br>        qfront+=<span class="hljs-number">1</span><br><br>        x = tempPair[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 横坐标</span><br><br>        y = tempPair[<span class="hljs-number">1</span>]  <span class="hljs-comment"># 纵坐标</span><br>        <span class="hljs-keyword">if</span> check(x,y):<br>            <span class="hljs-keyword">return</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br><br>            nowx = x + dx[i]  <span class="hljs-comment"># 扩展后的横坐标</span><br><br>            nowy = y + dy[i]  <span class="hljs-comment"># 扩展后的纵坐标</span><br><br>            <span class="hljs-keyword">if</span> (pd(nowx, nowy)):<br><br>                q.append((nowx,nowy))<br>                qend+=<span class="hljs-number">1</span><br><br>                Vis[nowx][nowy] = Vis[x][ y] + <span class="hljs-number">1</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    G = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m+<span class="hljs-number">10</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">10</span>)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br><br>    Vis = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m+<span class="hljs-number">10</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">10</span>)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        input_ = <span class="hljs-built_in">input</span>().split()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            G[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>] = input_[j]<br><br>    startX ,startY , endX ,endY = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    BFS()<br><br>    <span class="hljs-built_in">print</span>(ans-<span class="hljs-number">1</span>)<br><br><br></code></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.concurrent.LinkedBlockingQueue;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">M</span> <span class="hljs-operator">=</span> <span class="hljs-number">1005</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">node</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> x;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> y;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">node</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>            <span class="hljs-built_in">this</span>.x = x;<br>            <span class="hljs-built_in">this</span>.y = y;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m, ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> vis[][] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>]; <span class="hljs-comment">//用于存储是否访问过，并且存储长度</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> G[][] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>];  <span class="hljs-comment">//用于存储题目给出的地图</span><br>    <span class="hljs-keyword">static</span> node Start, End;<br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dx[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dy[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>&#125;;<br>    <span class="hljs-keyword">static</span> Queue&lt;node&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;();<br>    <span class="hljs-comment">//广度优先搜索所用的队列</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br><br>        <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">// /x 轴坐标 左侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x &gt; n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//x 轴坐标 右侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y &lt; <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 上侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y &gt; m)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 下侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (vis[x][y] != <span class="hljs-number">0</span>)<br>            <span class="hljs-comment">//已经访问了</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (G[x][y] != <span class="hljs-number">1</span>)<br>            <span class="hljs-comment">//不能走</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">// 在范围内，且没长草</span><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">if</span> (x == End.x &amp;&amp; y == End.y)   <span class="hljs-comment">//找到终点，把距离给他</span><br>        &#123;<br>            ans = vis[x][y];<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">BFS</span><span class="hljs-params">()</span> &#123;<br>        q.add(Start);<br>        vis[Start.x][Start.y] = <span class="hljs-number">1</span>;<br>        node now, next;<br>        <span class="hljs-keyword">while</span> (q.size() != <span class="hljs-number">0</span>) &#123;<br>            now = q.peek();<br>            <span class="hljs-keyword">if</span> (check(now.x, now.y))<br>                <span class="hljs-keyword">return</span>;<br>            q.poll();<br>            <span class="hljs-comment">//这两步是取出队首的节点</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++)  <span class="hljs-comment">//四个方向</span><br>            &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">nextx</span> <span class="hljs-operator">=</span> now.x + dx[i];<br>                <span class="hljs-type">int</span> <span class="hljs-variable">nexty</span> <span class="hljs-operator">=</span> now.y + dy[i];<br>                <span class="hljs-keyword">if</span> (pd(nextx, nexty))  <span class="hljs-comment">//判断是否符合条件</span><br>                &#123;<br>                    next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">node</span>(nextx, nexty);<br>                    q.add(next);<br>                    vis[nextx][nexty] = vis[now.x][now.y] + <span class="hljs-number">1</span>; <span class="hljs-comment">//步数+1</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n = in.nextInt();<br>        m = in.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                G[i][j] = in.nextInt();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">startX</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">startY</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">endX</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">endY</span> <span class="hljs-operator">=</span> in.nextInt();<br><br>        Start=<span class="hljs-keyword">new</span> <span class="hljs-title class_">node</span>(startX,startY);<br>        End=<span class="hljs-keyword">new</span> <span class="hljs-title class_">node</span>(endX,endY);<br>        BFS();<br><br>        System.out.println(ans-<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="迷宫"><a href="#迷宫" class="headerlink" title="迷宫"></a>迷宫</h3><p>下图给出了一个迷宫的平面图，其中标记为 $1$ 的为障碍，标记为 $0$ 的为可以通行的地方。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">010000<br>000100<br>001001<br>110000<br></code></pre></td></tr></table></figure>

<p>迷宫的入口为左上角，出口为右下角，在迷宫中，只能从一个位置走到这个它的上、下、左、右四个方向之一。</p>
<p>对于上面的迷宫，从入口开始，可以按 <code>DRRURRDDDR</code> 的顺序通过迷宫， 一共 $10$ 步。其中 $D、U、L、R$ 分别表示向下、向上、向左、向右走。 对于下面这个更复杂的迷宫（$30$ 行 $50$ 列），请找出一种通过迷宫的方式，其使用的步数最少，在步数最少的前提下，请找出字典序最小的一个作为答案。</p>
<p>请注意在字典序中 $D&lt;L&lt;R&lt;U$。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs txt">01010101001011001001010110010110100100001000101010<br>00001000100000101010010000100000001001100110100101<br>01111011010010001000001101001011100011000000010000<br>01000000001010100011010000101000001010101011001011<br>00011111000000101000010010100010100000101100000000<br>11001000110101000010101100011010011010101011110111<br>00011011010101001001001010000001000101001110000000<br>10100000101000100110101010111110011000010000111010<br>00111000001010100001100010000001000101001100001001<br>11000110100001110010001001010101010101010001101000<br>00010000100100000101001010101110100010101010000101<br>11100100101001001000010000010101010100100100010100<br>00000010000000101011001111010001100000101010100011<br>10101010011100001000011000010110011110110100001000<br>10101010100001101010100101000010100000111011101001<br>10000000101100010000101100101101001011100000000100<br>10101001000000010100100001000100000100011110101001<br>00101001010101101001010100011010101101110000110101<br>11001010000100001100000010100101000001000111000010<br>00001000110000110101101000000100101001001000011101<br>10100101000101000000001110110010110101101010100001<br>00101000010000110101010000100010001001000100010101<br>10100001000110010001000010101001010101011111010010<br>00000100101000000110010100101001000001000000000010<br>11010000001001110111001001000011101001011011101000<br>00000110100010001000100000001000011101000000110011<br>10101000101000100010001111100010101001010000001000<br>10000010100101001010110000000100101010001011101000<br>00111100001000010000000110111000000001000000001011<br>10000001100111010111010001000110111010101101111000<br></code></pre></td></tr></table></figure>

<p><strong>解题思路:</strong></p>
<p>本题是一道简单的搜索题，需要注意的是要按照题目给定的字典序进行搜索，最后输出路径。</p>
<p>我们使用 $BFS$ 搜索记录路径，用 $DFS$ 打印路径。</p>
<p>C++ 语言描述：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> maxn 2000</span><br><br><span class="hljs-built_in">string</span> maze[maxn]= &#123;<br>                  <span class="hljs-string">&quot;01010101001011001001010110010110100100001000101010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000100000101010010000100000001001100110100101&quot;</span>,<br>                  <span class="hljs-string">&quot;01111011010010001000001101001011100011000000010000&quot;</span>,<br>                  <span class="hljs-string">&quot;01000000001010100011010000101000001010101011001011&quot;</span>,<br>                  <span class="hljs-string">&quot;00011111000000101000010010100010100000101100000000&quot;</span>,<br>                  <span class="hljs-string">&quot;11001000110101000010101100011010011010101011110111&quot;</span>,<br>                  <span class="hljs-string">&quot;00011011010101001001001010000001000101001110000000&quot;</span>,<br>                  <span class="hljs-string">&quot;10100000101000100110101010111110011000010000111010&quot;</span>,<br>                  <span class="hljs-string">&quot;00111000001010100001100010000001000101001100001001&quot;</span>,<br>                  <span class="hljs-string">&quot;11000110100001110010001001010101010101010001101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00010000100100000101001010101110100010101010000101&quot;</span>,<br>                  <span class="hljs-string">&quot;11100100101001001000010000010101010100100100010100&quot;</span>,<br>                  <span class="hljs-string">&quot;00000010000000101011001111010001100000101010100011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010011100001000011000010110011110110100001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010100001101010100101000010100000111011101001&quot;</span>,<br>                  <span class="hljs-string">&quot;10000000101100010000101100101101001011100000000100&quot;</span>,<br>                  <span class="hljs-string">&quot;10101001000000010100100001000100000100011110101001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101001010101101001010100011010101101110000110101&quot;</span>,<br>                  <span class="hljs-string">&quot;11001010000100001100000010100101000001000111000010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000110000110101101000000100101001001000011101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100101000101000000001110110010110101101010100001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101000010000110101010000100010001001000100010101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100001000110010001000010101001010101011111010010&quot;</span>,<br>                  <span class="hljs-string">&quot;00000100101000000110010100101001000001000000000010&quot;</span>,<br>                  <span class="hljs-string">&quot;11010000001001110111001001000011101001011011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00000110100010001000100000001000011101000000110011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101000101000100010001111100010101001010000001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10000010100101001010110000000100101010001011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00111100001000010000000110111000000001000000001011&quot;</span>,<br>                  <span class="hljs-string">&quot;10000001100111010111010001000110111010101101111000&quot;</span>&#125;;<br><span class="hljs-type">bool</span> vis[maxn][maxn];<span class="hljs-comment">//标记</span><br><span class="hljs-type">int</span> dir[<span class="hljs-number">4</span>][<span class="hljs-number">2</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;&#125;;<span class="hljs-comment">//D L R U</span><br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">in</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> x&lt;<span class="hljs-number">30</span>&amp;&amp;x&gt;=<span class="hljs-number">0</span>&amp;&amp;y&gt;=<span class="hljs-number">0</span>&amp;&amp;y&lt;<span class="hljs-number">50</span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">int</span> x,y,d;<br>    <span class="hljs-type">char</span> pos;<span class="hljs-comment">//存储D L R U</span><br>&#125;;<br><br>node father[maxn][maxn];<span class="hljs-comment">//当前节点的父节点</span><br>node now,nex;<span class="hljs-comment">//指向当前和下一个位置</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><span class="hljs-comment">//递归打印</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(x==<span class="hljs-number">0</span>&amp;&amp;y==<span class="hljs-number">0</span>)<span class="hljs-comment">//找到起点开始正向打印路径</span><br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">else</span><br>        dfs(father[x][y].x,father[x][y].y);<br><br>    <span class="hljs-built_in">cout</span>&lt;&lt;father[x][y].pos;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">bfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><br>&#123;<br>    <span class="hljs-built_in">queue</span>&lt;node&gt; q;<br><br>    now.x=x;<br>    now.y=y;<br>    now.d=<span class="hljs-number">0</span>;<br>    q.push(now);<br><br>    vis[x][y]=<span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">while</span>(!q.empty())<br>    &#123;<br>        now=q.front();<br>        q.pop();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)<span class="hljs-comment">//走下左右上按字典序的四个方向</span><br>        &#123;<br>            <span class="hljs-type">int</span> tx=now.x+dir[i][<span class="hljs-number">0</span>];<br>            <span class="hljs-type">int</span> ty=now.y+dir[i][<span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">if</span>(in(tx,ty)&amp;&amp;!vis[tx][ty]&amp;&amp;maze[tx][ty]!=<span class="hljs-string">&#x27;1&#x27;</span>)<span class="hljs-comment">//判断是否超出范围，是否用过，是否为1</span><br>            &#123;<br>                vis[tx][ty]=<span class="hljs-literal">true</span>;<span class="hljs-comment">//标记为用过</span><br><br>                nex.x=tx;<br>                nex.y=ty;<br>                nex.d=now.d+<span class="hljs-number">1</span>;<br>                q.push(nex);<span class="hljs-comment">//压入队列</span><br><br>                father[tx][ty].x=now.x;<span class="hljs-comment">//存储父节点坐标</span><br>                father[tx][ty].y=now.y;<br>                <span class="hljs-keyword">if</span>(i==<span class="hljs-number">0</span>)<span class="hljs-comment">//存储路径</span><br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;D&#x27;</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i==<span class="hljs-number">1</span>)<br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;L&#x27;</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i==<span class="hljs-number">2</span>)<br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;R&#x27;</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i==<span class="hljs-number">3</span>)<br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;U&#x27;</span>;<br><br><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><br>    bfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>    dfs(<span class="hljs-number">29</span>,<span class="hljs-number">49</span>);<span class="hljs-comment">//打印路径</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String[] nn= &#123;<br>                  <span class="hljs-string">&quot;01010101001011001001010110010110100100001000101010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000100000101010010000100000001001100110100101&quot;</span>,<br>                  <span class="hljs-string">&quot;01111011010010001000001101001011100011000000010000&quot;</span>,<br>                  <span class="hljs-string">&quot;01000000001010100011010000101000001010101011001011&quot;</span>,<br>                  <span class="hljs-string">&quot;00011111000000101000010010100010100000101100000000&quot;</span>,<br>                  <span class="hljs-string">&quot;11001000110101000010101100011010011010101011110111&quot;</span>,<br>                  <span class="hljs-string">&quot;00011011010101001001001010000001000101001110000000&quot;</span>,<br>                  <span class="hljs-string">&quot;10100000101000100110101010111110011000010000111010&quot;</span>,<br>                  <span class="hljs-string">&quot;00111000001010100001100010000001000101001100001001&quot;</span>,<br>                  <span class="hljs-string">&quot;11000110100001110010001001010101010101010001101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00010000100100000101001010101110100010101010000101&quot;</span>,<br>                  <span class="hljs-string">&quot;11100100101001001000010000010101010100100100010100&quot;</span>,<br>                  <span class="hljs-string">&quot;00000010000000101011001111010001100000101010100011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010011100001000011000010110011110110100001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010100001101010100101000010100000111011101001&quot;</span>,<br>                  <span class="hljs-string">&quot;10000000101100010000101100101101001011100000000100&quot;</span>,<br>                  <span class="hljs-string">&quot;10101001000000010100100001000100000100011110101001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101001010101101001010100011010101101110000110101&quot;</span>,<br>                  <span class="hljs-string">&quot;11001010000100001100000010100101000001000111000010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000110000110101101000000100101001001000011101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100101000101000000001110110010110101101010100001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101000010000110101010000100010001001000100010101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100001000110010001000010101001010101011111010010&quot;</span>,<br>                  <span class="hljs-string">&quot;00000100101000000110010100101001000001000000000010&quot;</span>,<br>                  <span class="hljs-string">&quot;11010000001001110111001001000011101001011011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00000110100010001000100000001000011101000000110011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101000101000100010001111100010101001010000001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10000010100101001010110000000100101010001011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00111100001000010000000110111000000001000000001011&quot;</span>,<br>                  <span class="hljs-string">&quot;10000001100111010111010001000110111010101101111000&quot;</span>&#125;;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">char</span>[][] tu=<span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">30</span>][<span class="hljs-number">50</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] dis=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">30</span>][<span class="hljs-number">50</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] step= &#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;&#125;;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">char</span>[] direction= &#123;<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;L&#x27;</span>,<span class="hljs-string">&#x27;R&#x27;</span>,<span class="hljs-string">&#x27;U&#x27;</span>&#125;;<br><span class="hljs-comment">//    保存经过的每一个点位置信息，采用(x)*m+y的公式表示(x,y);x,y从0开始，位置也是从来开始。m:大于最长边的随便一个数</span><br><span class="hljs-comment">//    起点:0;终点:29*50-49</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Queue&lt;Integer&gt; location=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;Integer&gt;();<br><span class="hljs-comment">//    广度优先遍历求每一个位置到终点的距离，并存放在dis中</span><br><span class="hljs-comment">//    广度优先遍历寻找所有从终点到起点的路线</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bfs</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//x,y当前位置;</span><br>        <span class="hljs-type">int</span> x,y;<span class="hljs-comment">//当前位置坐标</span><br>        <span class="hljs-comment">//不为空，继续循环</span><br>        <span class="hljs-keyword">while</span>(!location.isEmpty()) &#123;<br>            <span class="hljs-type">int</span> l=location.poll();<span class="hljs-comment">//获取当前位置的坐标</span><br>            x=l/<span class="hljs-number">50</span>;<span class="hljs-comment">//获取当前位置x</span><br>            y=l%<span class="hljs-number">50</span>;<span class="hljs-comment">//获取当前位置y</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++) &#123;<span class="hljs-comment">//探索四个方向</span><br>                <span class="hljs-type">int</span> xx=x+step[i][<span class="hljs-number">0</span>];<br>                <span class="hljs-type">int</span> yy=y+step[i][<span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span>(xx&gt;=<span class="hljs-number">0</span>&amp;&amp;xx&lt;<span class="hljs-number">30</span>&amp;&amp;yy&gt;=<span class="hljs-number">0</span>&amp;&amp;yy&lt;<span class="hljs-number">50</span>&amp;&amp;tu[xx][yy]==<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;dis[xx][yy]==<span class="hljs-number">0</span>) &#123;<br>                    dis[xx][yy]=dis[x][y]+<span class="hljs-number">1</span>;<span class="hljs-comment">//当前位置的距离+1等于本次探索位置的距离</span><br>                    location.add(xx*<span class="hljs-number">50</span>+yy);<br>                    <span class="hljs-keyword">if</span>(xx==<span class="hljs-number">0</span>&amp;&amp;yy==<span class="hljs-number">0</span>) &#123;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br><br>        &#125;<br>    &#125;<br><span class="hljs-comment">//    深度优先遍历，从起点到终点</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">dfs</span><span class="hljs-params">()</span> &#123;<br>        dis[<span class="hljs-number">29</span>][<span class="hljs-number">49</span>]=<span class="hljs-number">0</span>;<br><span class="hljs-comment">//        起点</span><br>        <span class="hljs-type">int</span> x=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> y=<span class="hljs-number">0</span>;<br>        String route=<span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span>(x!=<span class="hljs-number">29</span>||y!=<span class="hljs-number">49</span>) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++) &#123;<br>                <span class="hljs-type">int</span> xx=x+step[i][<span class="hljs-number">0</span>];<br>                <span class="hljs-type">int</span> yy=y+step[i][<span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span>(xx&gt;=<span class="hljs-number">0</span>&amp;&amp;xx&lt;<span class="hljs-number">30</span>&amp;&amp;yy&gt;=<span class="hljs-number">0</span>&amp;&amp;yy&lt;<span class="hljs-number">50</span>&amp;&amp;tu[xx][yy]==<span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>                    <span class="hljs-keyword">if</span>(dis[x][y]==dis[xx][yy]+<span class="hljs-number">1</span>) &#123;<br>                        x=xx;<br>                        y=yy;<br>                        route+=direction[i];<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> route;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">long</span> num=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">30</span>;i++) &#123;<br>            tu[i]=nn[i].toCharArray();<br>        &#125;<br>        location.add(<span class="hljs-number">29</span>*<span class="hljs-number">50</span>+<span class="hljs-number">49</span>);<br>        bfs();<br>        String route=dfs();<br>        System.out.println(route);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>n,m=<span class="hljs-number">30</span>,<span class="hljs-number">50</span><br>M=[[<span class="hljs-built_in">int</span>(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>()]<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>vis=[[<span class="hljs-number">0</span>]*m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>go=[[<span class="hljs-string">&#x27;&#x27;</span>]*m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>q=deque([(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)])<br>vis[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> q:<br>    x,y=q.popleft()<br>    <span class="hljs-keyword">if</span> x==n-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y==m-<span class="hljs-number">1</span>:<br>        <span class="hljs-built_in">print</span>(go[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">for</span> i,j,k <span class="hljs-keyword">in</span> [[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&#x27;D&#x27;</span>],[<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;L&#x27;</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;R&#x27;</span>],[-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&#x27;U&#x27;</span>]]:<br>        a,b=x+i,y+j<br>        <span class="hljs-keyword">if</span> <span class="hljs-number">0</span>&lt;=a&lt;n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span>&lt;=b&lt;m <span class="hljs-keyword">and</span> M[a][b]==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> vis[a][b]==<span class="hljs-number">0</span>:<br>            vis[a][b]=<span class="hljs-number">1</span><br>            q.append((a,b))<br>            go[a][b]=go[x][y]+k<br></code></pre></td></tr></table></figure>

<h2 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h2><p>BFS 是广度优先搜索，是将某节点所有的“枝蔓”加入搜索队列，然后去除队列的首部的节点，重复进行该动作，这样就能由开始状态“一圈一圈的查找”。 BFS 拥有一个性质，那么就是先找到的节点，所经过的步骤一定最短。它一般用于寻找在近的状态，也是一个非常基础的算法，希望大家认真学习。</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2024/03/11/%E6%9E%9A%E4%B8%BE%E6%B3%95%E4%B8%8E%E5%B0%BA%E5%8F%96%E6%B3%95/">← Next 枚举法与尺取法</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2024/03/10/%E9%80%92%E6%8E%A8%E6%B3%95%E4%B8%8E%E9%80%92%E5%BD%92%E6%B3%95/">递推法与递归法 Prev →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="To Catalog">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">zdx</a></h1><div id="description"><p>learn</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/zdx-1"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" href="mailto:19546328912@163.com"><i class="fa fa-envelope" alt="E-Mail"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/353147531"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2"><span class="toc-number">1.</span> <span class="toc-text">深度优先搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text">知识点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.</span> <span class="toc-text">深度优先搜索基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DFS-%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%AD%A5%E9%AA%A4"><span class="toc-number">4.</span> <span class="toc-text">DFS 的设计步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DFS-%E9%A2%98%E7%9B%AE%E8%AE%B2%E8%A7%A3"><span class="toc-number">5.</span> <span class="toc-text">DFS 题目讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%90%9C%E7%B4%A2%E4%BB%A3%E8%A1%A8%EF%BC%9A-N-%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98"><span class="toc-number">5.1.</span> <span class="toc-text">状态搜索代表： N 皇后问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%9A%84%E8%B7%AF%E5%BE%84%E6%90%9C%E7%B4%A2%E4%BB%A3%E8%A1%A8-%E8%B7%AF%E5%BE%84%E4%B9%8B%E8%B0%9C"><span class="toc-number">5.2.</span> <span class="toc-text">图的路径搜索代表-路径之谜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7%E6%95%B0%E5%AD%97"><span class="toc-number">5.3.</span> <span class="toc-text">最大数字</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">实验总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2"><span class="toc-number">7.</span> <span class="toc-text">广度优先搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-1"><span class="toc-number">8.</span> <span class="toc-text">知识点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">9.</span> <span class="toc-text">广度优先搜索基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%AD%A5%E9%AA%A4"><span class="toc-number">10.</span> <span class="toc-text">广度优先搜索算法的设计步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%BF%E8%8D%89"><span class="toc-number">10.1.</span> <span class="toc-text">长草</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%B0%E8%BF%B7%E5%AE%AB"><span class="toc-number">10.2.</span> <span class="toc-text">走迷宫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%B7%E5%AE%AB"><span class="toc-number">10.3.</span> <span class="toc-text">迷宫</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-1"><span class="toc-number">11.</span> <span class="toc-text">实验总结</span></a></li></ol></div></div><footer><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas></body></html>