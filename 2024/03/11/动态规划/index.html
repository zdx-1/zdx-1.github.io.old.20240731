<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>动态规划 | Zdx-1</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy"}}</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>:root {
 --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
 --light-background: url('/img/bk.jpg');
 --theme-encrypt-confirm: 'confirm'
}</style><script defer src="/js/arknights.js"></script><script defer src="/js/search.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/lib/encrypt/hbe.js"></script><script async src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="Zdx-1" type="application/atom+xml">
</head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>动态规划</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2024-03-11T12:24:21.000Z" id="date"> 2024-03-11</time></div></span><br><span>Last Update: <div class="control"><time datetime="2024-05-21T16:40:20.000Z" id="updated"> 2024-05-22</time></div></span></div></div><hr><div id="post-content"><h2 id="动态规划（Dynamic-Programming）"><a href="#动态规划（Dynamic-Programming）" class="headerlink" title="动态规划（Dynamic Programming）"></a>动态规划（Dynamic Programming）</h2><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本节课我们进入动态规划课程的学习，动态规划是一种多阶段的决策过程最优化的问题。</p>
<p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 $3$ 个章节进行动态规划问题的讲解。</p>
<p>今天的课程是动态规划系列的第一个章节。</p>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>动态规划的基本思想</li>
<li>动态规划问题的基本套路与步骤</li>
</ul>
<h2 id="为什么使用动态规划算法"><a href="#为什么使用动态规划算法" class="headerlink" title="为什么使用动态规划算法"></a>为什么使用动态规划算法</h2><p>我们先回忆一下贪心问题。</p>
<p>贪心又称贪婪算法。是一种在每一步选择中都采取在当前状态下最好或最优（即最有利）的选择，从而使得问题得到全局最优解。</p>
<p><strong>它的特点：</strong></p>
<p>贪心选择性质是指所求问题的整体最优解可以通过一系列局部最优的选择，即贪心选择来达到。</p>
<p>这是贪心算法可行的第一个基本要素，也是贪心算法与动态规划算法的主要区别。</p>
<p>贪心选择性质就是，该问题的每一步选择都在选择最优的情况下能够导致最终问题的答案也是最优。</p>
<p>其实贪心和动态规划的区别，你可以理解为一个是正推，一眼就能看出来最优子结构，依次按照最优子结构选择每个过程最优选择即可。</p>
<p>而动态规划是没办法按照题目的意思直接得到最有优子结构，如下文所述:</p>
<h4 id="多阶段决策过程最优化问题"><a href="#多阶段决策过程最优化问题" class="headerlink" title="多阶段决策过程最优化问题"></a>多阶段决策过程最优化问题</h4><p>动态规划问题，是运筹学的一个分支，动态规划主要用于求解以时间划分阶段的动态过程的优化问题。</p>
<p>在实际生活中，动态规划问题与贪心问题相似，都是完成某一事件的过程可以划分成多个阶段。</p>
<p>但是与贪心不同的是动态规划的每个状态之间都会相互影响和相互干涉，也就是说在某一阶段做出的决策会影响整个事件的最终结果。</p>
<p>因为阶段是有先后的，所以某一阶段的选取受之前阶段的影响，他也会影响后面的阶段。</p>
<p><strong>多阶段决策问题：</strong></p>
<p>多阶段决策过程问题，就是一类在每一阶段都需要做出选择，且某一阶段的决策受前面所有阶段决策后的状态影响，他的决策又会影响后续的决策。</p>
<p>这样一类问题就是多阶段决策问题。</p>
<p><strong>多阶段决策过程最优化问题：</strong></p>
<p>在多阶段决策问题中，各个阶段采取的决策，通常与时间相关，但有时又与其他的线性的变量相关。</p>
<p>我们前面说到，某个阶段的决策是在前面做完了的决策引发的某一个状态开始进行决策的。</p>
<p>而现在做的决策又会使得状态进行转移，那么又影响了下次进行决策的状态。</p>
<p>所以说作决策时的状态是动态的，规划是解决最优化问题的方式，所以解决这种多阶段决策过程最优化的方法叫做动态规划。</p>
<h4 id="动态规划中的术语解释"><a href="#动态规划中的术语解释" class="headerlink" title="动态规划中的术语解释"></a>动态规划中的术语解释</h4><ul>
<li><p>阶段： 把所给求解问题的过程恰当地分成若干个相互联系的阶段，以便于求解，过程不同，阶段数就可能不同</p>
</li>
<li><p>状态： 述事物的性质，不同事物有不同的性质，因而用不同的状态来刻画。对问题的求解状态的描述是分阶段的</p>
</li>
<li><p>决策： 根据题意要求，对每个阶段所做出的某种选择性操作</p>
</li>
<li><p>策略： 由每个阶段的决策组成的序列称为策略</p>
</li>
<li><p>状态转移方程： 用数学公式描述与阶段相关的状态间的演变规律</p>
</li>
</ul>
<h4 id="能采用动态规划求解的问题的性质"><a href="#能采用动态规划求解的问题的性质" class="headerlink" title="能采用动态规划求解的问题的性质"></a>能采用动态规划求解的问题的性质</h4><ul>
<li><p>最优化原理：</p>
<p>如果问题的最优解所包含的子问题的解也是最优的，就称该问题具有最优子结构，即满足最优化原理。</p>
</li>
<li><p>无后效性：</p>
<p>即某阶段状态一旦确定，就不受这个状态以后决策的影响。也就是说，某状态以后的过程不会影响以前的状态，只与当前状态有关。</p>
</li>
<li><p>有重叠子问题：</p>
<p>即子问题之间是不独立的，一个子问题在下一阶段决策中可能被多次使用到。（该性质并不是动态规划适用的必要条件，但是如果没有这条性质，动态规划算法同其他算法相比就不具备优势）</p>
</li>
</ul>
<h4 id="解题步骤"><a href="#解题步骤" class="headerlink" title="解题步骤"></a>解题步骤</h4><ul>
<li>拆分问题</li>
<li>定义状态(并找出初状态)</li>
<li>找到状态转移</li>
<li>逆推找最优子结构</li>
<li>写出 DP 状态转移方程。</li>
</ul>
<h4 id="一般的模型方法"><a href="#一般的模型方法" class="headerlink" title="一般的模型方法"></a>一般的模型方法</h4><ul>
<li>递归搜索法</li>
<li>记忆化搜索(记忆化暴力)</li>
<li>递推式法</li>
</ul>
<h4 id="经典例题数塔问题"><a href="#经典例题数塔问题" class="headerlink" title="经典例题数塔问题"></a>经典例题数塔问题</h4><p>我们先来回顾一下我们之前讲过的数塔问题：</p>
<p><strong>题目描述:</strong></p>
<p class='item-img' data-src='/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/06b8663e2aceb6c87e0913d2fe0710f2-0.png'><img src="/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/06b8663e2aceb6c87e0913d2fe0710f2-0.png" alt="图片描述"></p>
<p>如图数字三角形。如下所示为一个数字三角形。请编一个程序计算从顶到底的某处的一条路径，使该路径所经过的数字总和最大。只要求输出总和。</p>
<ol>
<li>一步可沿左斜线向下或右斜线向下走；</li>
<li>三角形行数小于等于 $100$；</li>
<li>三角形中的数字为 $0，1，…，99$；</li>
</ol>
<p>测试数据通过键盘逐行输入。</p>
<p>如上例数据应以样例所示格式输入：</p>
<p><strong>样例:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>5<br>7<br>3 8<br>8 1 0<br>2 7 4 4<br>4 5 2 6 5<br></code></pre></td></tr></table></figure>

<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出：<br><br>30<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure>

<p><strong>题目分析:</strong></p>
<ol>
<li><p>定义状态 假设 <code>dp[i][j]</code> 为处理 <code>a[i][j]</code> 后能达到的最大值。</p>
</li>
<li><p>找出状态转移</p>
<p><code>dp[i][j]</code>怎么转移呢？按照题意他有两条路径可以转移</p>
<p><code>dp[i+1][j]=dp[i][j]+a[i+1][j]</code> 向下走</p>
<p><code>dp[i+1][j+1]=dp[i][j]+a[i+1][j+1]</code> 向右下走</p>
<p>我们有办法知道这两条路径哪条更优吗？</p>
<p>不能！因为通向了两个不同的决策过程。为什么贪心可以知道，因为贪心处理完之后通向的是同一个决策过程，这里<code>dp[i+1][j]和dp[i+1][j+1]</code>明显他们两个所能达到的状态是完全不同的，这就是动态规划和贪心的不同之处。</p>
<p>那我们怎样处理呢，我们要做的就是达到同一个状态我们才能够判断那个是最优的，这就是最优子结构。</p>
</li>
<li><p>逆推找最优子结构</p>
<p>虽然我们进行了逆推，但是实际上不是因为我们逆推做了什么，只是因为我们找最优子结构的过程中恰好做了逆推的过程。</p>
<p>我们要找最优子结构，我们刚才说了，要找到达同一状态的转移才能比较。那我们就考虑什么状态能够转移得到<code>dp[i][j]</code>，这时候我们直接看也能看出来是这两条路径<code>dp[i+1][j]+a[i][j],dp[i+1][j+1]+a[i][j]</code>。</p>
</li>
<li><p>写出状态转移方程</p>
</li>
</ol>
<p>$dp[i][j] &#x3D; max{dp[i+1][j]+a[i][j],dp[i+1][j+1]+a[i][j]}$</p>
<p>空间优化，已知 <code>dp[i][j]</code> 的值只会被覆盖前使用一次，所以可以合并 <code>dp[i][j]</code> 和 <code>a[i][j]</code> 那么就变成了。</p>
<p>$a[i][j] &#x3D; max{a[i][j]+a[i+1][j],a[i][j]+a[i+1][j+1]}$</p>
<p>则 逆推到出发点 <code>a[1][1]</code> 为题目所求答案，即第一层到第 <code>N</code> 层的最大值。</p>
<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//n层</span><br>    <span class="hljs-type">int</span> a[<span class="hljs-number">101</span>][<span class="hljs-number">101</span>]; <span class="hljs-comment">//路径矩阵</span><br>    cin&gt;&gt;n;<br><br>    <span class="hljs-comment">//输入数字三角形的值</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>        &#123;<br><br>        cin&gt;&gt;a[i][j]; <span class="hljs-comment">//输入原始数据</span><br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//递推开始</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>; i&gt;=<span class="hljs-number">1</span>; i--)<span class="hljs-comment">//从最后一层逆推</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>        &#123;<br><br>            <span class="hljs-keyword">if</span> (a[i+<span class="hljs-number">1</span>][j]&gt;=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>])<br>                a[i][j]+=a[i+<span class="hljs-number">1</span>][j];     <span class="hljs-comment">//路径选择</span><br><br>            <span class="hljs-keyword">else</span><br>                a[i][j]+=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br><br>    cout&lt;&lt;a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [[<span class="hljs-number">0</span>] * <span class="hljs-number">101</span>] * <span class="hljs-number">101</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>  n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>  <span class="hljs-comment"># 输入数字三角形的值</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>      a[i] = <span class="hljs-built_in">input</span>().split()<br>      a[i] = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, a[i]))  <span class="hljs-comment"># split 分割后都是 字符 这里是转化成数字</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># for i in range(1, n + 1):</span><br>  <span class="hljs-comment">#     print(a[i])</span><br><br> <span class="hljs-comment"># a = list(map(int, a)) # split 分割后都是 字符 这里是转化成数字</span><br><br>  <span class="hljs-comment"># 递推开始</span><br><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>      <span class="hljs-comment"># 最后一层逆推</span><br>      <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, i):<br><br>          <span class="hljs-comment"># 路径选择</span><br>          <span class="hljs-keyword">if</span> a[i + <span class="hljs-number">1</span>][j] &gt;= a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]:<br>              a[i][j] += a[i + <span class="hljs-number">1</span>][j]<br><br>          <span class="hljs-keyword">else</span>:<br>              a[i][j] += a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]<br><br>  <span class="hljs-comment"># for i in range(1, n + 1):</span><br>  <span class="hljs-comment">#     print(a[i])</span><br><br>  <span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> [][]a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">101</span>][<span class="hljs-number">101</span>];<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">int</span> n;<br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n = in.nextInt();<br><br>      <span class="hljs-comment">//输入数字三角形的值</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>      &#123;<br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>          &#123;<br>              a[i][j]=in.nextInt(); <span class="hljs-comment">//输入原始数据</span><br>          &#125;<br>      &#125;<br><br>      <span class="hljs-comment">//递推开始</span><br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=n-<span class="hljs-number">1</span>; i&gt;=<span class="hljs-number">1</span>; i--)<span class="hljs-comment">//从最后一层逆推</span><br>      &#123;<br><br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>          &#123;<br>              <span class="hljs-keyword">if</span> (a[i+<span class="hljs-number">1</span>][j]&gt;=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>])<br>                  a[i][j]+=a[i+<span class="hljs-number">1</span>][j];     <span class="hljs-comment">//路径选择</span><br><br>              <span class="hljs-keyword">else</span>  a[i][j]+=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>];<br>          &#125;<br>      &#125;<br>      System.out.println(a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>其实我们在讲这道题目中所用到的思想就是动态规划。</p>
<p>我们换种方式在理解一遍。</p>
<p>在用动态规划考虑数塔问题时可以自顶向下的分析，自底向上的计算。</p>
<p>从顶点出发时到底向左走还是向右走应取决于是从左走能取到最大值还是从右走能取到最大值，只要左右两道路径上的最大值求出来了才能作出决策。</p>
<p>同样的道理下一层的走向又要取决于再下一层上的最大值是否已经求出才能决策。</p>
<p>这样一层一层推下去，直到倒数第二层时就非常明了。</p>
<p>所以第一步对第五层的 $8$ 个数据，做如下四次决策：</p>
<ul>
<li><p>如果经过第四层 $2$，则在第五层的 $4$ 和 $5$ 中，决策选择的肯定是 $19$</p>
</li>
<li><p>如果经过第四层 $7$，则在第五层的 $5$ 和 $2$ 中，决策选择的肯定是 $10$</p>
</li>
<li><p>如果经过第四层第一个 $4$，则在第五层的 $2$ 和 $6$ 中，决策选择的肯定是 $6$</p>
</li>
<li><p>如果经过第四层第二个 $4$，则在第五层的 $6$ 和 $5$ 中肯定是 $6$</p>
</li>
</ul>
<p>经过一次决策，问题降了一阶。$5$ 层数塔问题转换成 $4$ 层数塔问题，经过如此的决策，就将原来问题转换为一阶数塔问题。</p>
<p>于是我们可以用我们上面的递推求解。</p>
<p>这就是递推式法模型。</p>
<p>我们通过这道简单的例题，大家首先要去找感觉，去分解问题的状态，去找决策，去找状态转移，而笔者认为动态规划问题，感觉是最重要的。</p>
<p>有的人 $10$ 道题就能找到感觉，有的人 $100$ 道题也找不到感觉。</p>
<h4 id="游戏中的学问"><a href="#游戏中的学问" class="headerlink" title="游戏中的学问"></a>游戏中的学问</h4><p>难度: 简单 标签: DP, JSOI, 2013</p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1436/learning/">https://www.lanqiao.cn/problems/1436/learning/</a></p>
<p><strong>题目描述：</strong></p>
<p>大家应该都见过很多人手拉手围着篝火跳舞的场景吧？</p>
<p>一般情况下，大家手拉手跳舞总是会围成一个大圈，每个人的左手拉着旁边朋友的右手，右手拉着另一侧朋友的左手。</p>
<p>不过，如果每一个人都随机的拉住两个不同人的手，然后再慢慢散开，事情就变得有趣多了——此时大家依旧会形成圈，不过却可能会形成多个独立的圈。</p>
<p>当然这里我们依然要求一个人的右手只能拉另一个人的左手，反之亦然。</p>
<p>班里一共有 $N$ 个同学，由 $1$ 到 $N$ 编号。Will 想知道，究竟有多少种本质不同的拉手方案，使得最终大家散开后恰好形成 $k$ 个圈呢？</p>
<p>给定两种方案，若存在一个人和他的一只手，满足在这两种方案中，拉着这只手的人的编号不同，则这两种方案本质不同。</p>
<p><strong>输入描述：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><br>输入一行包含三个正整数 N k P<br><br><span class="hljs-number">3</span>&lt;=<span class="hljs-number">3</span>k&lt;=N&lt;=<span class="hljs-number">3000</span>，<span class="hljs-number">10</span>^<span class="hljs-number">4</span>&lt;=p&lt;=<span class="hljs-number">2</span>×<span class="hljs-number">10</span>^<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure>

<p><strong>输出描述：</strong></p>
<p>输出一行一个整数，表示本质不同的方案数对 p 的余数。保证 p 一定是一个质数。</p>
<p><strong>输入输出样例：</strong></p>
<ul>
<li><p>样例 1： Input：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>3 1 1000000009<br></code></pre></td></tr></table></figure>

<p>output：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>答案解析：</strong></p>
<p>题目是说随即的拉住右手，共计 N 个人形成 k 个独立环的可能的情况有多少种。</p>
<p>我们举个例子，A B C 三个人：</p>
<p class='item-img' data-src='/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/4e9534885e67b5c512405e7d1d5c182b-0.png'><img src="/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/4e9534885e67b5c512405e7d1d5c182b-0.png" alt="图片描述"></p>
<p>A 的左手是 C A 的右手是 B B 的左手是 A B 的右手是 C C 的左手是 B C 的右手是 A</p>
<p class='item-img' data-src='/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/a0502745d207f9d9d3dfdb4bc2ad841d-0.png'><img src="/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/a0502745d207f9d9d3dfdb4bc2ad841d-0.png" alt="图片描述"></p>
<p>A 的左手是 B A 的右手是 C B 的左手是 C B 的右手是 A C 的左手是 A C 的右手是 B</p>
<p>这两种是不同的。</p>
<p>最后对 P 取模。</p>
<p>这道题目可以说是记忆化搜索，也可以说是递推法模型。</p>
<p><strong>定义状态：</strong></p>
<p>我们设 dp{i,j} 是 i 个人组成 j 个圈有多少种情况的状态</p>
<p><strong>找初始状态：</strong></p>
<p>由于最少是三个人围成 1 个圈</p>
<p>所以 dp{3,1}&#x3D;2</p>
<p><strong>找状态转移：</strong></p>
<p>我们考虑 <code>dp&#123;4,1&#125;</code> 的时候： 由于一开始三个人之间共计 3 个空位置，它可以见缝插针，所以就有 $3 \times$ dp {$3,1$}，dp{$4,1$} &#x3D; $3 \times$ dp{$3,1$}</p>
<p>接着考虑 <code>dp&#123;x+1,y&#125;</code> 和 <code>dp&#123;x,y&#125;</code> 的关系：</p>
<p>假设 <code>X</code> 个人分成了 <code>y</code> 个环后每个环得人数是 <code>X1 X2 ... Xy</code></p>
<p>对于第一个环 <code>X1</code> 来说共有 <code>X1</code> 个空</p>
<p>对于第二个环 <code>X2</code> 来说共有 <code>X2</code> 个空</p>
<p>共计 <code>X1+X2+...+Xy=X</code></p>
<p>所以共有 <code>X</code> 个空，那么第 <code>X+1</code> 个人就用 <code>X</code> 种选择可以做。</p>
<p>所以 dp{$x+1,y$} &#x3D; $x \times$ dp{$x,y$}，即 dp{$i,j$}&#x3D;$(i-1) \times$ dp{$i-1,j$}</p>
<p>考虑 dp{$6,1$} 和 dp{$6,2$} ：</p>
<p>大家考虑以下我们划分阶段得方式是什么，是圈数吗？</p>
<p>如果是圈数，我们发现好像{$6,1$} 和 {$6,2$} 两个状态之间没有什么关系？</p>
<p>单纯的圈数不存在关系。</p>
<p>我们思考一下，至少需要 <code>3</code> 个人才能组成一个圈。</p>
<p>所以第 <code>i</code> 个人加入时，要在前 <code>i-1</code> 个人中抽出两个人才能组成一个新圈。</p>
<p>所以原本的 dp{$i-1,j$} 的状态就变成了，dp{$i-3,j$}了。</p>
<p>由于是从 <code>i-1</code> 个人中抽出 <code>2</code> 个人所以，共计$C_{i-1}^{2}$的抽取方式，<code>3</code> 个人我们已知能组成两种方案。</p>
<p>根据组合数求方案数的方式</p>
<p>$2\times C_{i-1}^{2}&#x3D;2\times \frac{(i-1)!}{(i-3)!\times2}$</p>
<p>$2\times C_{i-1}^{2}&#x3D;(i-1)!&#x2F;(i-3)!&#x3D;(i-1)*(i-2)$</p>
<p>所以 <code>dp&#123;i,j+1&#125;=dp&#123;i-3,j&#125;×(i-1)×(i-2)</code></p>
<p>即 <code>dp&#123;i,j&#125;=dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></p>
<p>就此我们得到状态转移方程</p>
<ul>
<li><code>dp&#123;i,j&#125;=dp&#123;i-1,j&#125;×(i-1)</code></li>
<li><code>dp&#123;i,j&#125;=dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></li>
</ul>
<p>除此之外，我们还有要考虑的情况，即建不建立新圈都是 <code>dp&#123;i,j&#125;</code>的情况，所以这里不是等于，而是求和:</p>
<p><code>dp&#123;i,j&#125;=dp&#123;i-1,j&#125;×(i-1)</code></p>
<p><code>dp&#123;i,j&#125;=dp&#123;i,j&#125;+dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></p>
<p>比如：</p>
<p><code>dp&#123;7,2&#125;</code>可以由 <code>dp&#123;6,2&#125;</code>转移而来</p>
<p><code>dp&#123;7,2&#125;</code>也可以由 <code>dp&#123;4,1&#125;</code>转移而来</p>
<p>为什么这两种情况没有重叠，而是绝对异构的：</p>
<p><code>dp&#123;6,2&#125;</code>由 <code>dp&#123;3,1&#125;</code>转移而来</p>
<p><code>dp&#123;4,1&#125;</code>由 <code>dp&#123;3,1&#125;</code>转移而来</p>
<p><code>dp&#123;4,1&#125;</code>中 <code>1-4</code> 号是在同一个圈内的。</p>
<p><code>dp&#123;6,2&#125;</code>中 两个圈中的任意 <code>3</code> 个在一个圈内</p>
<p>不可能出现 <code>1-4</code> 在一个圈里的这种情况。</p>
<p>所以推导 <code>dp&#123;i,j&#125;</code></p>
<p><code>dp&#123;i,j&#125;</code>由 <code>dp&#123;i-i,j&#125;</code>转移而来 <code>dp&#123;i,j&#125;</code>也可以由 <code>dp&#123;i-3,j-1&#125;</code> 转移而来</p>
<p><code>dp&#123;i-i,j&#125;</code>可以由 <code>dp&#123;i-2,j&#125;</code>或者 <code>dp&#123;i-4,j-1&#125;</code> <code>dp&#123;i-3,j-1&#125;</code>可以由 <code>dp&#123;i-4,j-1&#125;</code>或者 <code>dp&#123;i-6,j-2&#125;</code></p>
<p>最终还是会到 <code>3,1</code>。</p>
<p>所以通过 <code>3</code>，通过两种方式走向了完全不同的方向。</p>
<p>至此我们轻松写出代码。</p>
<p>C++ 描述：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br>LL DP[<span class="hljs-number">3100</span>][<span class="hljs-number">3100</span>],mod;<br><span class="hljs-type">int</span> n,k;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n&gt;&gt;k&gt;&gt;mod;<br>    DP[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">4</span>;i&lt;=n;i++)<br>    &#123;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;<span class="hljs-number">3</span>*j&lt;=i&amp;&amp;j&lt;=k;j++)<br>        &#123;<br>            DP[i][j]=DP[i<span class="hljs-number">-1</span>][j]*(i<span class="hljs-number">-1</span>)%mod;<br><br>            DP[i][j]=(DP[i][j]+DP[i<span class="hljs-number">-3</span>][j<span class="hljs-number">-1</span>]*(i<span class="hljs-number">-1</span>)*(i<span class="hljs-number">-2</span>))%mod;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;DP[n][k];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>n, k, mod = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>DP=[[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">3100</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">3100</span>) ]<br><br>DP[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">2</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>,n+<span class="hljs-number">1</span>):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>):<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-number">3</span>*j&gt;i:<br>            <span class="hljs-keyword">break</span><br><br>        DP[i][j]=DP[i-<span class="hljs-number">1</span>][j]*(i-<span class="hljs-number">1</span>)%mod<br><br>        DP[i][j]=(DP[i][j]+DP[i-<span class="hljs-number">3</span>][j-<span class="hljs-number">1</span>]*(i-<span class="hljs-number">1</span>)*(i-<span class="hljs-number">2</span>))%mod<br><br><br><span class="hljs-built_in">print</span>(DP[n][k])<br></code></pre></td></tr></table></figure>

<p>java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-comment">// 1:无需package</span><br><span class="hljs-comment">// 2: 类名必须Main, 不可修改</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> DP[][]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span> [<span class="hljs-number">3100</span>][<span class="hljs-number">3100</span>];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n,k;<br><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> java.lang.Exception<br> &#123;<br>     <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>     n=in.nextInt();<br><br>     k=in.nextInt();<br><br>    <span class="hljs-type">long</span> mod=in.nextLong();<br><br>     DP[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">4</span>;i&lt;=n;i++)<br>        &#123;<br><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;<span class="hljs-number">3</span>*j&lt;=i&amp;&amp;j&lt;=k;j++)<br>            &#123;<br>                DP[i][j]=DP[i-<span class="hljs-number">1</span>][j]*(i-<span class="hljs-number">1</span>)%mod;<br><br>                DP[i][j]=(DP[i][j]+DP[i-<span class="hljs-number">3</span>][j-<span class="hljs-number">1</span>]*(i-<span class="hljs-number">1</span>)*(i-<span class="hljs-number">2</span>))%mod;<br>            &#125;<br>        &#125;<br>  System.out.println(DP[n][k]);<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="跳跃"><a href="#跳跃" class="headerlink" title="跳跃"></a>跳跃</h4><p>难度: 简单 标签: 动态规划, 搜索, 2021, 模拟赛</p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/553/learning/">https://www.lanqiao.cn/problems/553/learning/</a></p>
<p><strong>题目描述：</strong> 开始时，小蓝站在方格图的左上角，即第 $1$ 行第 $1$ 列。</p>
<p>小蓝可以在方格图上走动，走动时，如果当前在第 $r$ 行第 $c$ 列，他不能走到行号比 $r$ 小的行，也不能走到列号比 $c$ 小的列。</p>
<p>同时，他一步走的直线距离不超过 $3$。</p>
<p>例如，如果当前小蓝在第 $3$ 行第 $5$ 列，他下一步可以走到</p>
<p>第 $3$ 行第 $6$ 列 第 $3$ 行第 $7$ 列 第 $3$ 行第 $8$ 列 第 $4$ 行第 $5$ 列 第 $4$ 行第 $6$ 列 第 $4$ 行第 $7$ 列 第 $5$ 行第 $5$ 列 第 $5$ 行第 $6$ 列 第 $6$ 行第 $5$ 列 小蓝最终要走到第 $n$ 行第 $m$ 列。</p>
<p>在图中，有的位置有奖励，走上去即可获得，有的位置有惩罚，走上去就要接受惩罚。奖励和惩罚最终抽象成一个权值，奖励为正，惩罚为负。</p>
<p>小蓝希望，从第 $1$ 行第 $1$ 列走到第 $n$ 行第 $m$ 列后，总的权值和最大。请问最大是多少？</p>
<p><strong>输入描述：</strong></p>
<p>输入的第一行包含两个整数 $n, m$，表示图的大小。</p>
<p>接下来 $n$ 行，每行 $m$ 个整数，表示方格图中每个点的权值。</p>
<p>其中，$1\leq n\leq 100$，$-10^4\leq$权值$\leq 10^4$。</p>
<p><strong>输出描述：</strong></p>
<p>输出一个整数，表示最大权值和。</p>
<p><strong>输入输出样例：</strong></p>
<ul>
<li><p>样例 1： Input：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>3 5<br>-4 -5 -10 -3 1<br>7 5 -9 3 -10<br>10 -2 6 -10 -4<br></code></pre></td></tr></table></figure>

<p>output：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>15<br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>运行限制:</strong></p>
<ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 128M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>由于这道题目数据较弱，大家可以使用搜索把所有情况都搜索到，每次到终点就保存最大值，知道遍历完所有的情况，然后输出最大值。</p>
<p>大家一定要写一遍 <code>DFS</code> 然后在看后边的 <code>DP</code> ,有时动态规划要从状态出发，有时动态规划又可以看成暴力搜索的剪枝。</p>
<p>我们先看一下搜索的解法：</p>
<p>因为只能向右下方移动，不存再走回头路的情况，所以不需要设置 <code>Vis</code> 数组。</p>
<p>C++ 语言描述：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 105</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n, m, sum = <span class="hljs-number">-0x3f3f3f3f</span>;<br><span class="hljs-type">int</span> map[MAX][MAX];<br><span class="hljs-type">int</span> nextt[<span class="hljs-number">9</span>][<span class="hljs-number">2</span>] = &#123; &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">3</span>&#125;,&#123;<span class="hljs-number">3</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&#125; &#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y,<span class="hljs-type">int</span> value)</span></span><br><span class="hljs-function"></span>&#123;<br>    value += map[x][y];<br>    <span class="hljs-keyword">if</span> (x == n &amp;&amp; y == m)<br>    &#123;<br>        sum=<span class="hljs-built_in">max</span>(sum,value);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> tx = x + nextt[i][<span class="hljs-number">0</span>];<br>        <span class="hljs-type">int</span> ty = y + nextt[i][<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">if</span> (tx &lt;= n &amp;&amp; ty &lt;= m)<br>            <span class="hljs-built_in">dfs</span>(tx, ty, value);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>            cin &gt;&gt; map[i][j];<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    cout &lt;&lt; sum;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().strip().split())<br><br>mapTable = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().strip().split())) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>nextt = [[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]] <span class="hljs-comment">#9种走的方式</span><br><br>Sum=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;-inf&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x,y,value</span>):<br><br>    <span class="hljs-keyword">global</span> Sum<br><br>    value+=mapTable[x][y]<br>    <span class="hljs-keyword">if</span> x==n-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y==m-<span class="hljs-number">1</span> :<br>        Sum=<span class="hljs-built_in">max</span>(Sum,value)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">9</span>):<br>        tx = x+nextt[i][<span class="hljs-number">0</span>]<br>        ty = y+nextt[i][<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span>  tx&lt;n <span class="hljs-keyword">and</span>  ty&lt;m :<br><br>            dfs(tx,ty,value)<br>dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(Sum)<br></code></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br># 请在此输入您的代码<br>n,m = map(<span class="hljs-type">int</span>,input().strip().split())<br><br>mapTable = [list(map(<span class="hljs-type">int</span>,input().strip().split())) <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(n)</span>]<br><br>nextt = [[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]] #<span class="hljs-number">9</span>种走的方式<br><br>Sum=<span class="hljs-type">float</span>(<span class="hljs-string">&#x27;-inf&#x27;</span>)<br><br>def <span class="hljs-title function_">dfs</span><span class="hljs-params">(x,y,value)</span>:<br><br>    global Sum<br><br>    value+=mapTable[x][y]<br>    <span class="hljs-keyword">if</span> x==n-<span class="hljs-number">1</span> and y==m-<span class="hljs-number">1</span> :<br>        Sum=max(Sum,value)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(<span class="hljs-number">9</span>)</span>:<br>        tx = x+nextt[i][<span class="hljs-number">0</span>]<br>        ty = y+nextt[i][<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span>  tx&lt;n and  ty&lt;m :<br><br>            dfs(tx,ty,value)<br>dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>print(Sum)<br></code></pre></td></tr></table></figure>

<p>我们再来看一下 DP 怎么解这个问题。</p>
<p><strong>定义状态：</strong></p>
<p>我们设 dp{$i,j$} 当走到第 $i$ 行第 $j$ 列的值。</p>
<p><strong>找初始状态：</strong></p>
<p>dp{$1,1$}</p>
<p><strong>找状态转移：</strong></p>
<p>对于dp{$i,j$} 会有 $9$ 种不同的状态转移，我们很难知道当前的选择去怎样影响后续的值，这就是上边的搜索问题，我们难以找到一种 DP 思路去求解这个问题，但是我们反向考虑，既然dp{$i,j$} 会有 $9$ 种转移方式，那么当这 $9$ 种状态的值为从这九种状态到达终点的最优解（最大值）时，那么我们就能轻易得到dp{$i,j$} 的最大值为这九种最优解的最大值。</p>
<p>继续消解子问题，那么我们得到这 $9$ 种最优子状态，继续根据同样的原理得到这 $9$ 种最优的子状态的最优子状态。</p>
<p>持续消解，发现只有到了 dp{$n,m$} 采用终止，这就是一个递归的过程。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><br>value[n+<span class="hljs-number">5</span>][m+<span class="hljs-number">5</span>]<br><br>dp(x,y)<br>&#123;<br>    <span class="hljs-keyword">if</span>(x==n&amp;&amp;y==m)<br>        <span class="hljs-keyword">return</span> value[n][m]<br><br>    <span class="hljs-keyword">if</span>(越界)<br>        <span class="hljs-keyword">return</span> 负无穷<br><br>    value[x][y]=value[x][y]+max(dp(x+<span class="hljs-number">1</span>,y)......,dp(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">return</span> dp(x,y)<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>这个过程是正推，根据递归写出递推来就变成了逆推，其实并不是根据动态规划写出来的逆推式，而是用正推递归变递推变来的，当然有的同学一眼看出来，那是非常优秀的。</p>
<p>这个题目数据量较小，用递归写不会爆，大家可以根据我的伪代码写写试试。</p>
<p>正推也是可以写出递推式，大家有兴趣可以尝试下。</p>
<p>C++ 语言描述：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 105</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n, m, sum = <span class="hljs-number">-0x3f3f3f3f</span>;<br><span class="hljs-type">int</span> map[MAX][MAX];<br><span class="hljs-type">int</span> nextt[<span class="hljs-number">9</span>][<span class="hljs-number">2</span>] = &#123; &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">3</span>&#125;,&#123;<span class="hljs-number">3</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&#125; &#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>            cin &gt;&gt; map[i][j];<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n;i&gt;=<span class="hljs-number">1</span>;i--)<br>    &#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=m;j&gt;=<span class="hljs-number">1</span>;j--)<br>      &#123;<br>        <span class="hljs-keyword">if</span>(i==n&amp;&amp;j==m) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-type">int</span> maxTemp=<span class="hljs-number">-0x3f3f3f3f</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">9</span>; k++)<br>        &#123;<br>          <span class="hljs-type">int</span> tx = i + nextt[k][<span class="hljs-number">0</span>];<br>          <span class="hljs-type">int</span> ty = j + nextt[k][<span class="hljs-number">1</span>];<br>          <span class="hljs-keyword">if</span> (tx &gt; n || ty &gt; m) <span class="hljs-keyword">continue</span>;<br>          maxTemp=<span class="hljs-built_in">max</span>(maxTemp,map[tx][ty]);<br>        &#125;<br>        map[i][j]+=maxTemp;<br>      &#125;<br>    &#125;<br>        <span class="hljs-comment">// for (int i = 1; i &lt;= n; i++)&#123;</span><br>        <span class="hljs-comment">//   for (int j = 1; j &lt;= m; j++)</span><br>        <span class="hljs-comment">//   cout &lt;&lt; map[i][j]&lt;&lt;&quot; &quot;;</span><br><br>        <span class="hljs-comment">//   cout&lt;&lt;endl;</span><br>        <span class="hljs-comment">// &#125;</span><br>          cout &lt;&lt; map[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">nextt = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">1</span>]]  <span class="hljs-comment"># 9种走的方式</span><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>DP = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> i == n - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> j == m - <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">continue</span><br><br>        maxTemp = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;-inf&#x27;</span>)<br><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">9</span>):<br>            tx = i + nextt[k][<span class="hljs-number">0</span>]<br>            ty = j + nextt[k][<span class="hljs-number">1</span>]<br><br>            <span class="hljs-keyword">if</span> tx &gt;= n <span class="hljs-keyword">or</span> ty &gt;= m:<br>                <span class="hljs-keyword">continue</span><br><br>            maxTemp = <span class="hljs-built_in">max</span>(maxTemp, DP[tx][ty])<br><br>        DP[i][j] += maxTemp<br><br><span class="hljs-built_in">print</span>(DP[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure>

<p>java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span><br>&#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m, Sum = -<span class="hljs-number">0x3f3f3f3f</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> [][] mapTable=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">105</span>][<span class="hljs-number">105</span>];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> nextt[][] =&#123; &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">3</span>&#125;,&#123;<span class="hljs-number">3</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&#125; &#125;;<br><br><br><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> java.lang.Exception<br> &#123;<br><br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n=in.nextInt();<br>      m=in.nextInt();<br>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++)<br>                    mapTable[i][j]=in.nextInt();<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n;i&gt;=<span class="hljs-number">1</span>;i--)<br>    &#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=m;j&gt;=<span class="hljs-number">1</span>;j--)<br>      &#123;<br>        <span class="hljs-keyword">if</span>(i==n&amp;&amp;j==m) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-type">int</span> maxTemp=-<span class="hljs-number">0x3f3f3f3f</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">9</span>; k++)<br>        &#123;<br>          <span class="hljs-type">int</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> i + nextt[k][<span class="hljs-number">0</span>];<br>          <span class="hljs-type">int</span> <span class="hljs-variable">ty</span> <span class="hljs-operator">=</span> j + nextt[k][<span class="hljs-number">1</span>];<br>          <span class="hljs-keyword">if</span> (tx &gt; n || ty &gt; m) <span class="hljs-keyword">continue</span>;<br>          maxTemp=Math.max(maxTemp,mapTable[tx][ty]);<br>        &#125;<br>        mapTable[i][j]+=maxTemp;<br>      &#125;<br>    &#125;<br><br>  System.out.println(mapTable[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="动态规划背包问题"><a href="#动态规划背包问题" class="headerlink" title="动态规划背包问题"></a>动态规划背包问题</h2><h2 id="实验介绍-1"><a href="#实验介绍-1" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本节课我们进入动态规划课程的学习，动态规划是一种多阶段的决策过程最优化的问题。</p>
<p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 $3$ 个章节进行动态规划问题的讲解。</p>
<p>今天的课程是动态规划系列的第二个章节。</p>
<h3 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>0-1 背包</li>
<li>完全背包</li>
<li>多重背包问题</li>
</ul>
<h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h2><p>我们上一章课程讲解了动态规划算法的基本原理，包括动态规划的“为什么使用动态规划算法”、“多阶段决策过程最优化问题”、“动态规划中的术语解释”，“可解动态鬼规划的性质”等知识点。</p>
<p>今天我们来讲一下，动态规划中的背包问题，背包问题，是比赛中常考的问题，也是动态规划入门的问题，其实动态规划并没有套路，只是这类问题有着明确的特点，如果你做的题足够多的话，你会发现很多问题都会有模板。</p>
<p>背包问题基本都是不可拆分背包，因为可拆分背包是贪心去求解的问题。我们今天讲三种背包的基本模型：1.0-1 背包、2.完全背包、3.多重背包问题。</p>
<h4 id="0-1-背包问题"><a href="#0-1-背包问题" class="headerlink" title="0-1 背包问题"></a>0-1 背包问题</h4><p>0-1 背包是背包问题的入门的问题。但是背包问题的模板也是最简单的。</p>
<p><strong>0-1 背包的问题是什么呢？</strong></p>
<p>其问题的简单表述为，有 N 件物品，每件物品只有一件。每个物品都有一个价值$w_i$，每件物品都有一个占一个部分空间$c_i$,已知你的背包共计可承重 C(Contains),现在让你求你的背包最多装得下多少$w_{Max}$，即求你背包中物品的最大价值$w_{Max}$。</p>
<p><strong>对于这个问题我们有以下模板:</strong></p>
<p>1.定义变量并输入</p>
<p>C++ 语言描述：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// 定义V,W用于保存价值和质量</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><span class="hljs-type">int</span> c[Maxn],w[Maxn];<br><br><span class="hljs-type">int</span> C;<br><br><span class="hljs-comment">// 输入</span><br><br><span class="hljs-type">int</span> n;<br><br><span class="hljs-built_in">cin</span>&gt;&gt; n;<br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>&#123;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;c[i]&gt;&gt;w[i];<br>&#125;<br><br><span class="hljs-built_in">cin</span>&gt;&gt;C;<br><br><span class="hljs-comment">//创建动态规划数组</span><br><br><span class="hljs-type">int</span> dp[Maxn];<br></code></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>c = []<br>w = []<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>        tempC, tempW = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>        c.append(tempC)<br><br>        w.append(tempW)<br></code></pre></td></tr></table></figure>

<p>java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br><br>   <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> C;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n=in.nextInt();<br><br>       C=in.nextInt();<br><br>       c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br><br>       w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br><br>       dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>             c[i]=in.nextInt();<br>             w[i]=in.nextInt();;<br>        &#125;<br><br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>2.执行算法</p>
<p>我们先去找到状态转移方程</p>
<p><code>dp[i][j]=max(dp[i][j],dp[i−1]j−c[i]]+w[i])</code></p>
<p>含义，选到第 i 件物品，且背包现在重量为 j。</p>
<p>那么考虑这个状态会由什么状态转移而来，肯定是选到第 i-1 件的时候。</p>
<p>如果选了第 i 件，那么就是由 <code>dp[i−1]j−c[i]]</code>转移而来。</p>
<p>如果不选第 i 件，那么就是由 <code>dp[i][j]</code>转移而来。</p>
<p>那么已知 <code>dp[i−1]j−c[i]]和 dp[i][j]</code>都为各自最优的状态，那我们直接取最优状态即可。</p>
<p>C++ 描述：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])<br>            dp[i][j]=max(dp[i][j],dp[i<span class="hljs-number">-1</span>][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(C+<span class="hljs-number">1</span>):<br><br>        dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-c[i]]+w[i])<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])<br>            dp[i][j]=max(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br><br><br>        System.out.println(dp[C]);<br></code></pre></td></tr></table></figure>

<p>空间优化：</p>
<p>因为状态转移每次只与上一层有关，所以用一个一维数组就可以。</p>
<p>为什么从大到小遍历， 看 $dp[j]&#x3D;dp[j-c[i]]+w[i]$ 这一状态转移，是根据小的改大的，如果先把小的改了，那小的还会被用到，数据就不对了，所以从小到大。</p>
<p>C++ 描述；</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) <span class="hljs-comment">//遍历每一件物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=C;j&gt;=c[i];j--)<br>    <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j]=max(dp[j-c[i]]+w[i],dp[j]);<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>        dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>&#123;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> C; j &gt;= c[i]; j--)<br>        <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>&#125;<br><br><br>System.out.println(dp[C]);<br></code></pre></td></tr></table></figure>

<p>初始化细节：</p>
<ul>
<li>装满 $dp[0]&#x3D;0$，其余赋值 $-INF$；</li>
<li>不装满全初始化为 $0$；</li>
</ul>
<p>C++ 语言描述：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-comment">//装满</span><br><span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(dp));<br><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//不装满</span><br><br><span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">-0x3f</span>, <span class="hljs-keyword">sizeof</span>(dp));<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 装满</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br><br>    dp.append(-<span class="hljs-number">0x3f3f3f3f</span>)<br><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span><br><br><span class="hljs-comment"># 不装满</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br><br>    dp.append(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-comment">//装满</span><br>Arrays.fill(dp, -<span class="hljs-number">0x3f3f3f3f</span>);<br><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//不装满</span><br><br>memset(dp, -<span class="hljs-number">0x3f</span>, sizeof(dp));<br></code></pre></td></tr></table></figure>

<p><strong>题目描述:</strong></p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1174/learning/">https://www.lanqiao.cn/problems/1174/learning/</a></p>
<p>小明有一个容量为 $V$ 的背包。</p>
<p>这天他去商场购物，商场一共有 $N$ 件物品，第 $i$ 件物品的体积为 $w$ ，价值为 $v$，每种物品都只有一个。</p>
<p>小明想知道在购买的物品总体积不超过 $V$ 的情况下所能获得的最大价值为多少，请你帮他算算。</p>
<p><strong>输入描述:</strong></p>
<p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p>
<p>第 $2∼N+1$ 行包含 $2$ 个正整数 $w,v$，表示物品的体积和价值。</p>
<p><strong>样例:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>5 20<br>1 6<br>2 5<br>3 8<br>5 15<br>3 3<br></code></pre></td></tr></table></figure>

<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出： 37<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure>

<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><br><span class="hljs-type">int</span> c[Maxn], w[Maxn];<br><span class="hljs-type">int</span> dp[Maxn];<br><span class="hljs-type">int</span> C;<br><br><span class="hljs-comment">// 输入</span><br><br><span class="hljs-type">int</span> n;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>    cin &gt;&gt; n;<br><br>    cin &gt;&gt; C;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>        cin &gt;&gt; c[i] &gt;&gt; w[i];<br>    &#125;<br><br><br>    <span class="hljs-type">int</span> dp[Maxn];<br><br>    <span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(dp)); <span class="hljs-comment">//不装满</span><br><br>    <span class="hljs-comment">//创建动态规划数组</span><br><br><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>    &#123;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = C; j &gt;= c[i]; j--)<br>            <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br>    &#125;<br><br>    cout &lt;&lt; dp[C] &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>c = []<br>w = []<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        tempC, tempW = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>        c.append(tempC)<br>        w.append(tempW)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br>        dp.append(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br><br>    <span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> C;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n=in.nextInt();<br>        C=in.nextInt();<br>        c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>             c[i]=in.nextInt();<br>             w[i]=in.nextInt();;<br>        &#125;<br><br>        Arrays.fill(dp, <span class="hljs-number">0</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>        &#123;<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> C; j &gt;= c[i]; j--)<br>                <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>                dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>        &#125;<br>        System.out.println(dp[C]);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="完全背包问题"><a href="#完全背包问题" class="headerlink" title="完全背包问题"></a>完全背包问题</h4><p>完全背包是背包问题的入门的问题。</p>
<p>根据 <code>0-1</code> 背包写出模板也是很简单的。</p>
<p><strong>完全背包的问题是什么呢？</strong></p>
<p>其问题的简单表述为，有 $N$ 件物品，每件物品有无数件。每个物品都有一个价值$w_i$，每件物品都有一个占一个部分空间$c_i$,已知你的背包共计可承重 $C(Contains)$,现在让你求你的背包最多装得下多少$w_{Max}$，即求你背包中物品的最大价值$w_{Max}$。</p>
<p><strong>对于这个问题我们有以下模板:</strong></p>
<p>1.定义变量并输入</p>
<p>参考 0-1 背包。</p>
<p>2.执行算法</p>
<p>我们先去找到状态转移方程</p>
<p><code>dp[i][j]=max(dp[i][j],dp[i]j−c[i]]+w[i])</code></p>
<p>含义，选到第 $i$ 件物品，且背包现在重量为 $j$。</p>
<p>那么考虑这个状态会由什么状态转移而来，肯定是选到第 $i-1$ 件的时候,或者选了若干次第 $i$ 件。</p>
<p>如果不选第 $i$ 种，那么就是由 <code>dp[i-1][j]</code>转移而来。</p>
<p>如果选了第 $i$ 件，那么就是由 <code>dp[i−1]j−c[i]]</code>转移而来。</p>
<p>或者在某一刻，不在选第 $i$ 件了，那么就是有 <code>dp[i][j]</code>转移而来。</p>
<p>那么已知 <code>dp[i]j−c[i]]</code>和 <code>dp[i][j]</code>都为各自最优的状态，那我们直接取最优状态即可。</p>
<p>C++ 描述：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)&#123;<br>        dp[i][j]=dp[i<span class="hljs-number">-1</span>][j];<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])  dp[i][j]=max(dp[i][j],dp[i][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br><span class="hljs-built_in">cout</span>&lt;&lt;dp[n][C]&lt;&lt;<span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C+<span class="hljs-number">1</span>):<br>        dp[i][j]=dp[i-<span class="hljs-number">1</span>][j];<br>        dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i][j-c[i]]+w[i])<br><span class="hljs-built_in">print</span>(dp[n][C])<br></code></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)&#123;<br>        dp[i][j]=dp[i-<span class="hljs-number">1</span>][j];<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])dp[i][j]=max(dp[i][j],dp[i][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br> System.out.println(dp[n][C]);<br></code></pre></td></tr></table></figure>

<p>空间优化：</p>
<p>因为状态转移每次只与上一层有关，所以用一个一维数组就可以。</p>
<p>为什么从小到大遍历， 看 $dp[j]&#x3D;dp[j-c[i]]+w[i]$ 这一状态转移，是根据小的改大的，而此时的含义为选了 <code>x</code> 件后的容量与质量，跟 <code>01</code> 背包类似，但含义不同，处理方式上也有本质区别，处理完一件后在处理下件。</p>
<p>C++ 描述；</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) <span class="hljs-comment">//遍历每一件物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>    <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j]=max(dp[j-c[i]]+w[i],dp[j]);<br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>):<br>        dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>        <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>&#125;<br><br><br>System.out.println(dp[C]);<br></code></pre></td></tr></table></figure>

<p>初始化细节：</p>
<p>与 <code>0 - 1</code>背包相同。</p>
<ul>
<li>装满 $dp[0]&#x3D;0$，其余赋值$-INF$；</li>
<li>不装满全初始化为 $0$；</li>
</ul>
<p><strong>题目描述:</strong></p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1175/learning/">https://www.lanqiao.cn/problems/1175/learning/</a></p>
<p>小明有一个容量为 $V$ 的背包。</p>
<p>这天他去商场购物，商场一共有 $N$ 件物品，第 $i$ 件物品的体积为 $w$ ，价值为 $v$，每种物品都有无限多个。</p>
<p>xxxxxxxxxx68 1import java.io.*;2​3public class Main {4    static int N&#x3D;110;5    static long[][] g&#x3D;new long[N][N],m&#x3D;new long[N][N],f&#x3D;new long[N][N];6    static long n,q;7    static BufferedReader br&#x3D;new BufferedReader(new InputStreamReader(System.in));8    static PrintWriter  out&#x3D;new PrintWriter(new OutputStreamWriter(System.out));9    public static void main(String[] args) throws IOException {10        String[] s&#x3D;br.readLine().split(“ “);11        n&#x3D;Long.parseLong(s[0]);12        q&#x3D;Long.parseLong(s[1]);13        for(int i&#x3D;1;i&lt;&#x3D;n;++i){14            s&#x3D;br.readLine().split(“ “);15            for(int j&#x3D;1;j&lt;&#x3D;n;++j){16                g[i][j]&#x3D;Long.parseLong(s[j-1]);17            }18        }19        for(int i&#x3D;1;i&lt;&#x3D;n;++i){20            s&#x3D;br.readLine().split(“ “);21            for(int j&#x3D;1;j&lt;&#x3D;n;++j){22                m[i][j]&#x3D;Long.parseLong(s[j-1]);23                f[i][j]&#x3D;m[i][j];24            }25        }26        if(floyd()&gt;q){27            out.println(-1);28            out.flush();29            return;30        }31        long l&#x3D;0,r&#x3D;1000000000;32        while(l&lt;r){33            long mid&#x3D;l+r&gt;&gt;1;34            if(check(mid)) r&#x3D;mid;35            else l&#x3D;mid+1;36        }37        out.println(r);38        out.flush();39    }40    static long floyd(){41        long a&#x3D;0;42        for (int k &#x3D; 1; k &lt;&#x3D; n; k ++ )43            for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )44                for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )45                    f[i][j] &#x3D;Math.min(f[i][j], f[i][k] + f[k][j]);46​47        for(int i&#x3D;1;i&lt;&#x3D;n;++i)48            for(int j&#x3D;1;j&lt;&#x3D;n;++j)49                a+&#x3D;f[i][j];50        return a;51    }52    static boolean check(long x){53        for(int i&#x3D;1;i&lt;&#x3D;n;++i){54            for(int j&#x3D;1;j&lt;&#x3D;n;++j) f[i][j]&#x3D;g[i][j];55        }56        long h&#x3D;x&#x2F;n;57        long s&#x3D;x%n;58        for(int i&#x3D;1;i&lt;&#x3D;n;++i){59            for(int j&#x3D;1;j&lt;&#x3D;n;++j){60                if(i&#x3D;&#x3D;j) continue;61                if(i&lt;&#x3D;s) f[i][j]&#x3D;Math.max(m[i][j],f[i][j]-h-1);62                else f[i][j]&#x3D;Math.max(m[i][j],f[i][j]-h);63                f[j][i]&#x3D;f[i][j];64            }65        }66        return floyd()&lt;&#x3D;q;67    }68}java</p>
<p><strong>输入描述:</strong></p>
<p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p>
<p>第 $2∼N+1$ 行包含 $2$ 个正整数 $w,v$，表示物品的体积和价值。</p>
<p><strong>样例:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>5 20<br>1 6<br>2 5<br>3 8<br>5 15<br>3 3<br></code></pre></td></tr></table></figure>

<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出： 120<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure>

<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><span class="hljs-type">int</span> c[Maxn], w[Maxn];<br><span class="hljs-type">int</span> dp[Maxn];<br><span class="hljs-type">int</span> C;<br><span class="hljs-comment">// 输入</span><br><br><span class="hljs-type">int</span> n;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>    cin &gt;&gt; n;<br>    cin &gt;&gt; C;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>        cin &gt;&gt; c[i] &gt;&gt; w[i];<br>    &#125;<br><br>    <span class="hljs-type">int</span> dp[Maxn];<br><br>    <span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(dp)); <span class="hljs-comment">//不装满</span><br>    <span class="hljs-comment">//创建动态规划数组</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>            <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br>    &#125;<br>    cout &lt;&lt; dp[C] &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>c = []<br>w = []<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        tempC, tempW = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>        c.append(tempC)<br>        w.append(tempW)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br>        dp.append(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>):<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j])<br><br>    <span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> C;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n=in.nextInt();<br>        C=in.nextInt();<br>        c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>             c[i]=in.nextInt();<br>             w[i]=in.nextInt();;<br>        &#125;<br>        Arrays.fill(dp, <span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>        &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>                <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>                dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>        &#125;<br>        System.out.println(dp[C])<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h4><p>多重背包是背包问题的入门的问题。 根据 0-1 背包写出模板也是很简单的。</p>
<p><strong>多重背包的问题是什么呢？</strong></p>
<p>其问题的简单表述为，有 N 件物品，每件物品有$s_i$件。每个物品都有一个价值$w_i$，每件物品都有一个占一个部分空间$c_i$,已知你的背包共计可承重 C(Contains),现在让你求你的背包最多装得下多少$w_{Max}$，即求你背包中物品的最大价值$w_{Max}$。</p>
<p><strong>对于这个问题我们有以下模板:</strong></p>
<p>1.定义变量并输入</p>
<p>参考 <code>0-1</code> 背包。</p>
<p>2.执行算法</p>
<p>这次我们直接空间优化，不再讲解二维做法：</p>
<p>多重背包是可以不选，也可以选 <code>1</code> 个，可以选多个，而 <code>0-1</code> 背包只能选 <code>0</code> 个或者 <code>1</code>个。</p>
<p>那就直接把种物品分开，即可比如：</p>
<p>每个盘子 <code>3</code> 块钱，我有 <code>2</code> 个。每双筷子 <code>1</code> 块钱，我有 <code>10</code> 双，每对刀叉 <code>3</code> 块钱，我有 <code>3</code> 个。</p>
<p>那么我就可以拆成，有 <code>2</code> 个三块的盘子，每个可以选也可以不选，就变成了 <code>0-1</code> 背包。</p>
<p>也就是说，对于每种是可以选多个，那就直接拆分成独立的个体就可以了。</p>
<p>C++ 描述；</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=s[i];j++)<br>    <span class="hljs-comment">//遍历物品的数量</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=C;k&gt;=c[i];k--)<br>        <span class="hljs-comment">//当做01背包来处理</span><br>        &#123;<br>            <span class="hljs-comment">//取01背包情况的dp[k]和dp[k-c[i]]+w[i]的最大值</span><br>            dp[k]=max( dp[k],dp[k-c[i]]+w[i] );<br>        &#125;<br><br></code></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>            dp[k]=<span class="hljs-built_in">max</span>( dp[k],dp[k-c[i]]+w[i] )<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=s[i];j++)<br>    <span class="hljs-comment">//遍历物品的数量</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=C;k&gt;=c[i];k--)<br>        <span class="hljs-comment">//当做01背包来处理</span><br>        &#123;<br>            <span class="hljs-comment">//取01背包情况的dp[k]和dp[k-c[i]]+w[i]的最大值</span><br>            dp[k]=max( dp[k],dp[k-c[i]]+w[i] );<br>        &#125;<br><br><br>System.out.println(dp[C]);<br></code></pre></td></tr></table></figure>

<p>不顾这样做大概率会超时，我们换一种理解方式：</p>
<p>在这两种问题中，我们需要考虑每个物品选择取或不取的情况，通过动态规划来求解最优解。</p>
<p>$01$背包问题中，对于每个物品$i$，我们有两个选择：选取或不选取。状态转移方程为： $dp[j] &#x3D; \max(dp[j], dp[j - v[i]] + w[i])$</p>
<p>多重背包问题中，对于每个物品i，我们可以选择取$0$个、$1$个、$2$个…直到$s[i]$个。状态转移方程为： $dp[j] &#x3D; \max(dp[j], dp[j - v[i] \cdot k] + w[i] \cdot k)$ 其中，k 的取值范围是$0, 1, 2, …, s[i]$。</p>
<p>这两个问题的解决思路相似，都是通过填充一个二维的动态规划数组$dp$，其中$dp[j]$表示背包容量为j时的最优解。在状态转移时，我们考虑了每个物品的选择情况，求解最终的最优解。</p>
<p>初始化细节：</p>
<p>与 $0 - 1$ 背包相同。</p>
<ul>
<li>装满 $dp[0]&#x3D;0$，其余赋值$-INF$；</li>
<li>不装满全初始化为 $0$；</li>
</ul>
<p><strong>题目描述:</strong></p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1176/learning/">https://www.lanqiao.cn/problems/1176/learning/</a></p>
<p>小明有一个容量为 $V$的背包。</p>
<p>这天他去商场购物，商场一共有 $N$ 件物品，第 $i$ 件物品的体积为 $w$，价值为 $v$，每种物品都有$s$个。</p>
<p>小明想知道在购买的物品总体积不超过 $V$ 的情况下所能获得的最大价值为多少，请你帮他算算。</p>
<p><strong>输入描述:</strong></p>
<p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p>
<p>第 $2∼N+1$ 行包含 $3$ 个正整数 $w,vs$,表示物品的体积、价值和数量。</p>
<p><strong>样例:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>3 30<br>1 2 3<br>4 5 6<br>7 8 9<br><br></code></pre></td></tr></table></figure>

<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出： 39<br></code></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure>

<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><span class="hljs-type">int</span> c[Maxn], w[Maxn], s[Maxn];<br><span class="hljs-type">int</span> dp[Maxn];<br><span class="hljs-type">int</span> C;<br><br><span class="hljs-comment">// 输入</span><br><span class="hljs-type">int</span> n;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>    cin &gt;&gt; n;<br>    cin &gt;&gt; C;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        cin &gt;&gt; c[i] &gt;&gt; w[i] &gt;&gt; s[i];<br>    &#125;<br><br><br>    <span class="hljs-type">int</span> dp[Maxn];<br>    <span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(dp)); <span class="hljs-comment">//不装满</span><br><br>    <span class="hljs-comment">//创建动态规划数组</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=C;j&gt;=c[i];j--)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>;k&lt;=s[i] &amp;&amp; j&gt;=k*c[i];k++)<br>                <span class="hljs-comment">//遍历物品的数量</span><br>                dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-k*c[i]]+w[i]*k);<br>        &#125;<br>    &#125;<br><br>    cout &lt;&lt; dp[C] &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python">c = []<br>w = []<br>s=[]<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>        tempC, tempW ,tempS= <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>        c.append(tempC)<br>        w.append(tempW)<br>        s.append(tempS)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br>        dp.append(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>            <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]+<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">if</span> j&lt;k*c[i]:<br>                    <span class="hljs-keyword">break</span>;<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - k * c[i]] + w[i] * k)<br><br>    <span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []s;<br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>        &#123;<br>            <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>            <span class="hljs-type">int</span> n=in.nextInt();<br>            <span class="hljs-type">int</span> C=in.nextInt();<br>            c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>            w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>            s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>            dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>                c[i]=in.nextInt();<br>                w[i]=in.nextInt();<br>                s[i]=in.nextInt();<br>            &#125;<br><br>            Arrays.fill(dp, <span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=C;j&gt;=c[i];j--)<br>                &#123;<br>                    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>;k&lt;=s[i] &amp;&amp; j&gt;=k*c[i];k++)<br>                        <span class="hljs-comment">//遍历物品的数量</span><br>                        dp[j]=max(dp[j],dp[j-k*c[i]]+w[i]*k);<br>                &#125;<br>            &#125;<br><br>            System.out.println(dp[C]);<br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="动态规划线性-DP"><a href="#动态规划线性-DP" class="headerlink" title="动态规划线性 DP"></a>动态规划线性 DP</h2><h2 id="实验介绍-2"><a href="#实验介绍-2" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 $3$ 个章节进行动态规划问题的讲解。</p>
<p>今天的课程是动态规划系列的第 $3$ 个章节。</p>
<h3 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>讲解很多经典的动态规划问题，对动态规划初步掌握。</li>
</ul>
<h2 id="普通线性-DP"><a href="#普通线性-DP" class="headerlink" title="普通线性 DP"></a>普通线性 DP</h2><p>线性 <code>DP</code> 是动态规划问题中的一类问题，指状态之间有线性关系的动态规划问题。</p>
<p>这类问题不像是我们讲的背包等问题有固定的模板。</p>
<p>少数常见的线性 <code>DP</code> 问题也有模板，比如我们讲的 $LIS$ 和 $LCS$ 问题。</p>
<p>大部分还是需要根据题目进行推导，基本没有什么规律可循。</p>
<p>大部分线性规划的问题，都需要自己首先定义状态，找到决策，推导状态转移方程。</p>
<p>我们再讲解几个题目，让大家找找做最普遍 <code>DP</code> 问题的感觉。</p>
<h4 id="蓝肽子序列"><a href="#蓝肽子序列" class="headerlink" title="蓝肽子序列"></a>蓝肽子序列</h4><p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1030/learning/">蓝肽子序列</a></p>
<p><strong>题目描述:</strong></p>
<p>L 星球上的生物由蛋蓝质组成，每一种蛋蓝质由一类称为蓝肽的物资首尾连接成一条长链后折叠而成。</p>
<p>生物学家小乔正在研究 L 星球上的蛋蓝质。她拿到两个蛋蓝质的蓝肽序列，想通过这两条蓝肽序列的共同特点来分析两种蛋蓝质的相似性。</p>
<p>具体的，一个蓝肽可以使用 $1$ 至 $5$ 个英文字母表示，其中第一个字母大写，后面的字母小写。一个蛋蓝质的蓝肽序列可以用蓝肽的表示顺序拼接而成。</p>
<p>在一条蓝肽序列中，如果选取其中的一些位置，把这些位置的蓝肽取出，并按照它们在原序列中的位置摆放，则称为这条蓝肽的一个子序列。蓝肽的子序列不一定在原序列中是连续的，中间可能间隔着一些未被取出的蓝肽。</p>
<p>如果第一条蓝肽序列可以取出一个子序列与第二条蓝肽序列中取出的某个子序列相等，则称为一个公共蓝肽子序列。</p>
<p>给定两条蓝肽序列，找出他们最长的那个公共蓝肽子序列的长度。</p>
<p><strong>输入描述:</strong></p>
<p>输入两行，每行包含一个字符串，表示一个蓝肽序列。字符串中间没有空格等分隔字符。</p>
<p>其中有 ，两个字符串的长度均不超过 $1000$。</p>
<p><strong>输出描述:</strong></p>
<p>输出一个整数，表示最长的那个公共蓝肽子序列的长度。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<blockquote>
<p>输入</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">LanQiaoBei LanTaiXiaoQiao<br></code></pre></td></tr></table></figure>

<blockquote>
<p>输出</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure>

<h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 128M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>该题目是 $LCS$ 的变形，由原来的一个字符或者一个数字的匹配变成了，一个单词的匹配。</p>
<p>这个题目为先划分字符串变成基本的比较单位。</p>
<p>然后再套用 $LCS$ 模板</p>
<p>即可完成这道题目。</p>
<p><strong>C++ 解题代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1005</span>][<span class="hljs-number">1005</span>];<br>string s1, s2;<br>string a[<span class="hljs-number">1005</span>], b[<span class="hljs-number">1005</span>];<br><span class="hljs-type">int</span> n=<span class="hljs-number">0</span>, m=<span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; s1 &gt;&gt; s2;<br>    <span class="hljs-type">int</span> d1 = s1.<span class="hljs-built_in">length</span>(), d2 = s2.<span class="hljs-built_in">length</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; d1;)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (s1[i] &gt;= <span class="hljs-string">&#x27;A&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>)<br>        &#123;<br>            a[n] += s1[i++];<br>            <span class="hljs-keyword">while</span> (s1[i] &gt;= <span class="hljs-string">&#x27;a&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="hljs-string">&#x27;z&#x27;</span>)<br>            &#123;<br>                a[n] += s1[i++];<br>            &#125;<br>        &#125;<br>        n++;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; d2;)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (s2[i] &gt;= <span class="hljs-string">&#x27;A&#x27;</span> &amp;&amp; s2[i] &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>)<br>        &#123;<br>            b[m] += s2[i++];<br>            <span class="hljs-keyword">while</span> (s2[i] &gt;= <span class="hljs-string">&#x27;a&#x27;</span> &amp;&amp; s2[i] &lt;= <span class="hljs-string">&#x27;z&#x27;</span>)<br>            &#123;<br>                b[m] += s2[i++];<br>            &#125;<br><br>        &#125;<br>        m++;<br>    &#125;<br>     dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++)<br>        &#123;<br><br>            <span class="hljs-keyword">if</span> (a[i] == b[j])<br>            &#123;<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j] + <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]=<span class="hljs-built_in">max</span>(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>]);<br>            &#125;<br>        &#125;<br>    cout &lt;&lt; dp[n][m] &lt;&lt; endl;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python">Maxn = <span class="hljs-number">1005</span><br>dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Maxn)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Maxn)]<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    s1 = <span class="hljs-built_in">input</span>()<br>    s2 = <span class="hljs-built_in">input</span>()<br>    a = []<br>    b = []<br>    temp = <span class="hljs-string">&#x27;&#x27;</span><br><br>    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> s1:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;A&#x27;</span> &lt;= word &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>:<br>            <span class="hljs-keyword">if</span> temp != <span class="hljs-string">&#x27;&#x27;</span>:<br>                a.append(temp)<br>            temp = <span class="hljs-string">&#x27;&#x27;</span><br>        temp += word<br>    a.append(temp)<br><br>    temp = <span class="hljs-string">&#x27; &#x27;</span><br><br>    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> s2:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;A&#x27;</span> &lt;= word &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>:<br>            <span class="hljs-keyword">if</span> temp != <span class="hljs-string">&#x27;&#x27;</span>:<br>                b.append(temp)<br>            temp = <span class="hljs-string">&#x27;&#x27;</span><br>        temp += word<br>    b.append(temp)<br><br>    n = <span class="hljs-built_in">len</span>(a)<br>    m = <span class="hljs-built_in">len</span>(b)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(a)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(b)):<br>            <span class="hljs-keyword">if</span> a[i] == b[j]:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j] + <span class="hljs-number">1</span><br><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">if</span> dp[i + <span class="hljs-number">1</span>][j] &gt; dp[i][j + <span class="hljs-number">1</span>]:<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i + <span class="hljs-number">1</span>][j]<br><br>                <span class="hljs-keyword">else</span>:<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>])<br><br>    <span class="hljs-built_in">print</span>(dp[n][m])<br><br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] dp;<br>    <span class="hljs-keyword">static</span> String s1;<br>    <span class="hljs-keyword">static</span> String s2;<br>    <span class="hljs-keyword">static</span> String []a;<br>    <span class="hljs-keyword">static</span> String []b;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">int</span> n=<span class="hljs-number">0</span>,m=<span class="hljs-number">0</span>;<br><br>        s1=in.next();<br>        s2=in.next();<br><br>        a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">1005</span>];<br>        b=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">1005</span>];<br><br>        <span class="hljs-type">int</span> d1=s1.length();<br>        <span class="hljs-type">int</span> d2=s2.length();<br><br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1005</span>][<span class="hljs-number">1005</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; d1;n++)<br>        &#123;<br><br><br>            <span class="hljs-keyword">if</span> (s1.charAt(i) - <span class="hljs-string">&#x27;A&#x27;</span>&gt;=<span class="hljs-number">0</span> &amp;&amp; s1.charAt(i) - <span class="hljs-string">&#x27;Z&#x27;</span>&lt;=<span class="hljs-number">0</span>)<br>            &#123;<br>                a[n] += s1.charAt(i++);<br>                <span class="hljs-keyword">while</span> (i &lt; d1&amp;&amp;s1.charAt(i) -<span class="hljs-string">&#x27;a&#x27;</span>&gt;=<span class="hljs-number">0</span> &amp;&amp; s1.charAt(i)-<span class="hljs-string">&#x27;z&#x27;</span> &lt;=<span class="hljs-number">0</span>)<br>                &#123;<br>                    a[n] += s1.charAt(i++);<br>                &#125;<br><br>            &#125;<br><br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; d2;m++)<br>        &#123;<br><br>            <span class="hljs-keyword">if</span> (s2.charAt(i) - <span class="hljs-string">&#x27;A&#x27;</span>&gt;=<span class="hljs-number">0</span> &amp;&amp; s2.charAt(i) - <span class="hljs-string">&#x27;Z&#x27;</span>&lt;=<span class="hljs-number">0</span>)<br>            &#123;<br>                b[m] += s2.charAt(i++);<br>                <span class="hljs-keyword">while</span> (i &lt; d2&amp;&amp;s2.charAt(i) -<span class="hljs-string">&#x27;a&#x27;</span>&gt;=<span class="hljs-number">0</span>&amp;&amp; s2.charAt(i)-<span class="hljs-string">&#x27;z&#x27;</span> &lt;= <span class="hljs-number">0</span>)<br>                &#123;<br>                    b[m] += s2.charAt(i++);<br>                &#125;<br><br>            &#125;<br><br>        &#125;<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-type">int</span> Maxn=Math.max(n,m)+<span class="hljs-number">50</span>;<br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[Maxn][Maxn];<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m; j++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (a[i].equals( b[j]))<br>                &#123;<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j] + <span class="hljs-number">1</span>;<br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]=Math.max(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>]);<br>                &#125;<br>            &#125;<br>        System.out.println(dp[n][m]);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="合唱队形"><a href="#合唱队形" class="headerlink" title="合唱队形"></a>合唱队形</h4><p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/742/learning/">https://www.lanqiao.cn/problems/742/learning/</a></p>
<p><strong>题目描述:</strong></p>
<p>$N$ 位同学站成一排，音乐老师要请其中的 $(N-K)$ 位同学出列，使得剩下的 $K$ 位同学排成合唱队形。</p>
<p>合唱队形是指这样的一种队形：设 $K$ 位同学从左到右依次编号为 $1，2，\cdots K$，他们的身高分别为 $T_1，T_2，\cdots，T_K$， 则他们的身高满足 $T_1&lt; \cdots &lt; T_i&gt; T_{i+1}&gt; \cdots &gt;T_K(1 \leq i \leq K)$。</p>
<p>你的任务是，已知所有 $N$ 位同学的身高，计算最少需要几位同学出列，可以使得剩下的同学排成合唱队形。</p>
<p><strong>输入描述:</strong></p>
<p>输入两行。</p>
<p>第一行是一个整数 $N\ (2 \leq N \leq 100)$，表示同学的总数。</p>
<p>第二行有 $n$ 个整数，用空格分隔，第 $i$ 个整数 $T_i(130 \leq T_i \leq 230)$ 是第 $i$ 位同学的身高(厘米)。</p>
<p><strong>输出描述:</strong></p>
<p>输出一个整数，就是最少需要几位同学出列。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong> 1</p>
<blockquote>
<p>输入</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">8 186 186 150 200 160 130 197 220<br></code></pre></td></tr></table></figure>

<blockquote>
<p>输出</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br></code></pre></td></tr></table></figure>

<h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 128M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>要使得出列最少，那么就要留下最多的，我们想到了 $LIS$ ，但是 $LIS$ 只能处理单调序列最长，所以并不能直接用。</p>
<p>我们看到，这里是两头低，中间高的一种情况。</p>
<p>在这种情况下，最多的话那么就是最高的那个人的左侧加上右侧最高。</p>
<p>到这，我们发现。</p>
<p>在中间那个人左侧，从左到右做了一遍 $LIS$ 。</p>
<p>在那个人的右侧，从右到左的做了一遍 $LIS$ 。</p>
<p>至此，我们好像找了策略。</p>
<p>通过枚举中间那个人，然后看他左侧的 $LIS$ 和他右侧的$LIS$ 的值之和的大小，就能将这道题目解出。</p>
<p><strong>C++ 解题代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> dp1[<span class="hljs-number">105</span>],dp2[<span class="hljs-number">105</span>],a[<span class="hljs-number">105</span>],s[<span class="hljs-number">105</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        cin&gt;&gt;a[i];<br>        dp2[i]=<span class="hljs-number">1</span>;<br>        dp1[i]=<span class="hljs-number">1</span>;<br>    &#125;<span class="hljs-comment">//输入并赋初值</span><br><br>    <span class="hljs-comment">//预处理，从右往左LIS</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">1</span>;i--)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>;j&lt;=n;j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(a[i]&gt;a[j]&amp;&amp;dp2[i]&lt;=dp2[j]+<span class="hljs-number">1</span>)<br>            &#123;<br>                dp2[i]=dp2[j]+<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//预处理，从左往右LIS</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;i;j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(a[i]&gt;a[j]&amp;&amp;dp1[i]&lt;=dp1[j]+<span class="hljs-number">1</span>)<br>            &#123;<br>                dp1[i]=dp1[j]+<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">int</span> maxx=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        s[i]=dp2[i]+dp1[i]<span class="hljs-number">-1</span>;<br>        <span class="hljs-comment">//自己算了两次，所以-1</span><br><br><br>        <span class="hljs-keyword">if</span>(s[i]&gt;maxx)<br>        &#123;<br>            maxx=s[i];<br>        &#125;<br>    &#125;<br><br>    cout&lt;&lt;n-maxx;<span class="hljs-comment">//是求出列的人数</span><br><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br><br>    <span class="hljs-comment"># 输入并赋初值</span><br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>().strip())<br><br>    t = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br>    dp1 = [<span class="hljs-number">1</span>] * n<br>    dp2 = [<span class="hljs-number">1</span>] * n<br><br>    <span class="hljs-comment"># 预处理，从左往右LIS</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i):<br>            <span class="hljs-keyword">if</span> t[i] &gt; t[j]:<br>                dp1[i] = <span class="hljs-built_in">max</span>(dp1[i], dp1[j] + <span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment"># 预处理，从右往左LIS</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, i, -<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> t[i] &gt; t[j]:<br>                dp2[i] = <span class="hljs-built_in">max</span>(dp2[i], dp2[j] + <span class="hljs-number">1</span>)<br><br><br>    maxx = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        maxx = <span class="hljs-built_in">max</span>(maxx, dp1[i] + dp2[i] - <span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># 自己算了两次，所以-1</span><br><br>    <span class="hljs-built_in">print</span>(n - maxx)<br><br><br><br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br><br>        <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span>[] dp1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span>[] dp2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            a[i] = in.nextInt();<br>            dp2[i]=<span class="hljs-number">1</span>;<br>            dp1[i]=<span class="hljs-number">1</span>;<br>        &#125;<span class="hljs-comment">//输入并赋初值</span><br><br><br>        <span class="hljs-comment">//预处理，从左往右LIS</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; i; j++) &#123;<br>                <span class="hljs-keyword">if</span> (a[i] &gt; a[j] &amp;&amp; dp1[j] + <span class="hljs-number">1</span> &gt; dp1[i]) &#123;<br>                    dp1[i] = dp1[j] + <span class="hljs-number">1</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//预处理，从右往左LIS</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>; j &gt; i; j--) &#123;<br>                <span class="hljs-keyword">if</span> (a[i] &gt; a[j] &amp;&amp; dp2[j] + <span class="hljs-number">1</span> &gt; dp2[i]) &#123;<br>                    dp2[i] = dp2[j] + <span class="hljs-number">1</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            maxx = Math.max(maxx, dp1[i] + dp2[i]-<span class="hljs-number">1</span>);<br>            <span class="hljs-comment">//自己算了两次，所以-1</span><br>        &#125;<br><br>        <span class="hljs-comment">// 是求出列的人数</span><br>        System.out.println(n - maxx );<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="最优包含"><a href="#最优包含" class="headerlink" title="最优包含"></a>最优包含</h4><p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/239/learning/">https://www.lanqiao.cn/problems/239/learning/</a></p>
<p><strong>题目描述:</strong> 我们称一个字符串 $S$ 包含字符串 $T$ 是指 $T$ 是 $S$ 的一个子序列，即可以从字符串 $S$ 中抽出若干个字符，它们按原来的顺序组合成一个新的字符串与 $T$ 完全一样。</p>
<p>给定两个字符串 $S$ 和 $T$，请问最少修改 $S$ 中的多少个字符，能使 $S$ 包含 $T$ ？</p>
<p>其中，$1 \leq |T| \leq |S| \leq 1000$。</p>
<p><strong>输入描述:</strong></p>
<p>输入两行，每行一个字符串。</p>
<p>第一行的字符串为 $S$，第二行的字符串为 $T$。</p>
<p>两个字符串均非空而且只包含大写英文字母。</p>
<p><strong>输出描述:</strong></p>
<p>输出一个整数，表示答案。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<blockquote>
<p>输入</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">ABCDEABCD XAABZ<br></code></pre></td></tr></table></figure>

<blockquote>
<p>输出</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure>

<p><strong>运行限制</strong></p>
<ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 256M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>个题目是线性 <code>DP</code> 中比较经典的题目。</p>
<p>这个类型就做编辑距离，可以通过 <code>DFS</code> 解决，也可以通过 <code>DP</code> 解决。</p>
<p><code>DP</code> 的时间复杂度低。</p>
<p>我们先来讲一下，编辑距离。</p>
<p>编辑距离为两个字符串，$a$ 和 $b$ 通过多少次变换，使得 $a$ 变成 $b$。</p>
<p>我们可以做出 $3$ 种操作。</p>
<p>$1.$ 删除操作，将 $a[i]$ 从 $a$ 中移除 $2.$ 插入操作，在 $a[i]$ 后加上 $b[j]$ $3.$ 替换操作，将 $a[i]$ 修改为 $b[j]$</p>
<p>编辑距离的状态转移类似 LCS ，但有有很大的差别。</p>
<p>初始状态，$i&#x3D;j&#x3D;0$，都在字符串的开头。</p>
<p>然后开始判断 $a[i]&#x3D;?b[j]$</p>
<ul>
<li><p>如果相同，那么就不需要修改，所以$dp[i+1][j+1]&#x3D;dp[i][j]$</p>
<p>所以在$a[i-1]$等于$b[j-1]$时，$dp[i][j]$这个状态由$dp[i-1][j-1]$转移而来。</p>
<p>$dp[i][j]&#x3D;dp[i-1][j-1]$</p>
</li>
<li><p>如果不同，那就需要进行三种可能的操作</p>
</li>
</ul>
<ol>
<li><p>修改操作：</p>
<p>$a[i]$ 修改为 $b[j]$， 因为编辑了一次，所以$+1$</p>
<p>$dp[i+1][j+1]&#x3D;dp[i][j]+1$</p>
<p>所以在$a[i-1]$不等于$b[j-1]$时，$dp[i][j]$这个状态由$dp[i-1][j-1]$转移而来。</p>
<p>$dp[i][j]&#x3D;dp[i-1][j-1]$</p>
</li>
<li><p>删除操作，直接把 $a[i]$ 删除，此时转移到 $dp[i][j+1]$ ，因为 $a[i]$ 被删除，但是下一个字符到了 $a[i]$ 的位置，而对应比较的位置到了$b[j+1]$。</p>
<p>所以此时状态转移到了$dp[i][j+1]$</p>
<p>$dp[i][j+1]&#x3D;dp[i][j]+1$</p>
<p>因为编辑了一次，所以$+1$</p>
<p>所以在$a[i-1]$不等于$b[j-1]$时，$dp[i][j]$就有可能通过$dp[i-1][j]$转移而来。</p>
</li>
<li><p>插入操作，在$a[i]$后添加一个$b[j]$，那么此时$a[i+1]$和$b[j]$对应，因为加了一个字符就变成了$a[i+1]$,而且跟$b[j]$对应，那么下一个状态转移到了$dp[i+1][j]$</p>
<p>$dp[i+1][j]&#x3D;dp[i][j]+1$</p>
<p>此时状态转移到了 $dp[i+1][j]&#x3D;dp[i][j]+1$</p>
<p>因为编辑了一次，所以$+1$</p>
<p>所以在$a[i-1]$不等于$b[j-1]$时，$dp[i][j]$就有可能通过$dp[i][j-1]$转移而来。</p>
</li>
</ol>
<p>那么不同时，我们选择他们的最小值即可。</p>
<p>由此我们可以写出模板：</p>
<p><strong>C++ 解题代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF 99999999</span><br>string s, t;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1010</span>][<span class="hljs-number">1010</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) dp[<span class="hljs-number">0</span>][j] = INF;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; s &gt;&gt; t;<br><br>    <span class="hljs-built_in">init</span>();<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) &#123;<br>            <span class="hljs-keyword">if</span> (s[i - <span class="hljs-number">1</span>] == t[j - <span class="hljs-number">1</span>]) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">else</span><br>                dp[i][j] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>],<span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>])) + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; dp[s.<span class="hljs-built_in">size</span>()][t.<span class="hljs-built_in">size</span>()];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">s,t</span>):<br><br>    dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>):<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>):<br>        dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">999999</span><br><br>    <span class="hljs-keyword">return</span> dp<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    s = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br>    t = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br><br>    dp=init(s,t)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t)):<br>            <span class="hljs-keyword">if</span> s[i] == t[j]:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j]<br>            <span class="hljs-keyword">else</span>:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(dp[i][j] + <span class="hljs-number">1</span>, dp[i][j + <span class="hljs-number">1</span>])<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>( dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] ,dp[j+<span class="hljs-number">1</span>][i]+<span class="hljs-number">1</span>)<br><br>    <span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br><br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>   <span class="hljs-type">int</span> dp[][];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n,<span class="hljs-type">int</span> m)</span>&#123;<br><br>        dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>][m+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">99999</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> in.nextLine();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> in.nextLine();<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> t.length();<br><br>        init(n,m);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                <span class="hljs-keyword">if</span> (s.charAt(i - <span class="hljs-number">1</span>) == t.charAt(j - <span class="hljs-number">1</span>)) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">else</span>  dp[i][j] = min(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>],min(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>])) + <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br><br>        System.out.println(dp[n][m]);<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>这道题目也比较简单，由于是包含关系，并不是相等关系，所以当 <code>S</code> 多余 <code>T</code> 是，不需要进行删除操作。</p>
<p>所以这个题目不考虑删除的那个状态转移即可。</p>
<p><strong>C++ 解题代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF 99999999</span><br>string s, t;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1010</span>][<span class="hljs-number">1010</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) dp[<span class="hljs-number">0</span>][j] = INF;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; s &gt;&gt; t;<br><br>    <span class="hljs-built_in">init</span>();<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) &#123;<br>            <span class="hljs-keyword">if</span> (s[i - <span class="hljs-number">1</span>] == t[j - <span class="hljs-number">1</span>]) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">else</span> dp[i][j] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>, dp[i - <span class="hljs-number">1</span>][j]);<br><br>        &#125;<br>    &#125;<br>    cout &lt;&lt; dp[s.<span class="hljs-built_in">size</span>()][t.<span class="hljs-built_in">size</span>()];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">s,t</span>):<br><br>    dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>):<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>):<br>        dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">999999</span><br><br>    <span class="hljs-keyword">return</span> dp<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    s = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br>    t = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br><br>    dp=init(s,t)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t)):<br>            <span class="hljs-keyword">if</span> s[i] == t[j]:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j]<br>            <span class="hljs-keyword">else</span>:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(dp[i][j] + <span class="hljs-number">1</span>, dp[i][j + <span class="hljs-number">1</span>])<br><br>    <span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br><br></code></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>   <span class="hljs-type">int</span> dp[][];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n,<span class="hljs-type">int</span> m)</span>&#123;<br><br>        dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>][m+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">99999</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> in.nextLine();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> in.nextLine();<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> t.length();<br><br>        init(n,m);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                <span class="hljs-keyword">if</span> (s.charAt(i - <span class="hljs-number">1</span>) == t.charAt(j - <span class="hljs-number">1</span>)) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">else</span> dp[i][j] = Math.min(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>, dp[i - <span class="hljs-number">1</span>][j]);<br><br>            &#125;<br>        &#125;<br><br>        System.out.println(dp[n][m]);<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>动态规划的学习是痛苦的，也是快乐，而且是非常重要的。</p>
<p>希望大家努力克服，动态规划都学会了还有什么学不会呢。</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2024/03/11/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/">← Next 图论入门</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2024/03/11/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/">贪心算法 Prev →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="To Catalog">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">zdx</a></h1><div id="description"><p>learn</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/zdx-1"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" href="mailto:19546328912@163.com"><i class="fa fa-envelope" alt="E-Mail"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/353147531"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%EF%BC%88Dynamic-Programming%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">动态规划（Dynamic Programming）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">2.1.</span> <span class="toc-text">知识点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">为什么使用动态规划算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%98%B6%E6%AE%B5%E5%86%B3%E7%AD%96%E8%BF%87%E7%A8%8B%E6%9C%80%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98"><span class="toc-number">3.0.1.</span> <span class="toc-text">多阶段决策过程最优化问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B8%AD%E7%9A%84%E6%9C%AF%E8%AF%AD%E8%A7%A3%E9%87%8A"><span class="toc-number">3.0.2.</span> <span class="toc-text">动态规划中的术语解释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%83%BD%E9%87%87%E7%94%A8%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%B1%82%E8%A7%A3%E7%9A%84%E9%97%AE%E9%A2%98%E7%9A%84%E6%80%A7%E8%B4%A8"><span class="toc-number">3.0.3.</span> <span class="toc-text">能采用动态规划求解的问题的性质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E9%A2%98%E6%AD%A5%E9%AA%A4"><span class="toc-number">3.0.4.</span> <span class="toc-text">解题步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E7%9A%84%E6%A8%A1%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-number">3.0.5.</span> <span class="toc-text">一般的模型方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E4%BE%8B%E9%A2%98%E6%95%B0%E5%A1%94%E9%97%AE%E9%A2%98"><span class="toc-number">3.0.6.</span> <span class="toc-text">经典例题数塔问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B8%E6%88%8F%E4%B8%AD%E7%9A%84%E5%AD%A6%E9%97%AE"><span class="toc-number">3.0.7.</span> <span class="toc-text">游戏中的学问</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%B3%E8%B7%83"><span class="toc-number">3.0.8.</span> <span class="toc-text">跳跃</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">动态规划背包问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">5.</span> <span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-1"><span class="toc-number">5.1.</span> <span class="toc-text">知识点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">背包问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#0-1-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98"><span class="toc-number">6.0.1.</span> <span class="toc-text">0-1 背包问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98"><span class="toc-number">6.0.2.</span> <span class="toc-text">完全背包问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85"><span class="toc-number">6.0.3.</span> <span class="toc-text">多重背包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%BA%BF%E6%80%A7-DP"><span class="toc-number">7.</span> <span class="toc-text">动态规划线性 DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-2"><span class="toc-number">8.</span> <span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-2"><span class="toc-number">8.1.</span> <span class="toc-text">知识点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E7%BA%BF%E6%80%A7-DP"><span class="toc-number">9.</span> <span class="toc-text">普通线性 DP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%93%9D%E8%82%BD%E5%AD%90%E5%BA%8F%E5%88%97"><span class="toc-number">9.0.1.</span> <span class="toc-text">蓝肽子序列</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%99%90%E5%88%B6"><span class="toc-number">9.1.</span> <span class="toc-text">运行限制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%88%E5%94%B1%E9%98%9F%E5%BD%A2"><span class="toc-number">9.1.1.</span> <span class="toc-text">合唱队形</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%99%90%E5%88%B6-1"><span class="toc-number">9.2.</span> <span class="toc-text">运行限制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E4%BC%98%E5%8C%85%E5%90%AB"><span class="toc-number">9.2.1.</span> <span class="toc-text">最优包含</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93"><span class="toc-number">10.</span> <span class="toc-text">实验总结</span></a></li></ol></div></div><footer><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas></body></html>