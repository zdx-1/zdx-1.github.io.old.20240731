<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>PyQt应用开发</title>
    <link href="/2024/07/17/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/"/>
    <url>/2024/07/17/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h1 id="1、GUI开发框架简介"><a href="#1、GUI开发框架简介" class="headerlink" title="1、GUI开发框架简介"></a>1、GUI开发框架简介</h1><h2 id="1-1-通用开发框架"><a href="#1-1-通用开发框架" class="headerlink" title="1.1 通用开发框架"></a>1.1 通用开发框架</h2><ul><li><input checked="" disabled="" type="checkbox"> winform：基于C#语言，用于开发桌面应用程序，可以使用NanUI之类的UI库，开发选择多，运行占用内存大</li><li><input checked="" disabled="" type="checkbox"> javafx：基于java，主要用于跨平台桌面程序开发</li><li><input disabled="" type="checkbox"> electorn：基于node-js，跨平台，开发成本低，运行效率低</li><li><input disabled="" type="checkbox"> qt：基于C++，跨平台，效率高，开发成本高</li><li><input disabled="" type="checkbox"> flutter：基于dart语言，谷歌开源移动UI框架，可以快速在iOS和Android上构建高质量的原生用户界面</li></ul><h2 id="1-2-Python方案"><a href="#1-2-Python方案" class="headerlink" title="1.2 Python方案"></a>1.2 Python方案</h2><ul><li>PyQT：PyQt5是Qt v5的Python版本，功能强大复杂，提供QT Designer设计UI （GPL V3协议，开源，商用收费）</li><li>Pyside: PySide2是来自QT for Python项目的官方Python模块 （LGPL协议，闭源商用）</li><li>Tkinter：Python标准库，Tk GUI 工具包的接口 ，布局通过代码实现，简单易用，但开发效率低</li><li>WxPython：开源免费，提供wxFormbuilder，压缩版PyQT</li></ul><p>本文主要详细介绍下PyQt5完整入门教程，包含环境配置，使用Qt Designer设计UI，最终完成一个天气预报的GUI实例开发。</p><p>参考文献：<a href="https://www.cnblogs.com/lovesoo/p/12491361.html">PyQt完整入门教程</a></p><h1 id="2-PyQt环境配置"><a href="#2-PyQt环境配置" class="headerlink" title="2.PyQt环境配置"></a>2.PyQt环境配置</h1><h2 id="2-1-PyQt5-及-pyqt5-tools-安装"><a href="#2-1-PyQt5-及-pyqt5-tools-安装" class="headerlink" title="2.1 PyQt5 及 pyqt5-tools 安装"></a>2.1 PyQt5 及 pyqt5-tools 安装</h2><p>直接pip安装即可：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">pip <span class="hljs-keyword">install </span>PyQt5<br>pip <span class="hljs-keyword">install </span>pyqt5-tools<br></code></pre></td></tr></table></figure><p>建议使用国内源，进行快速安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pyqt5<br>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pyqt5-tools<br></code></pre></td></tr></table></figure><h2 id="2-2-PyCharm配置环境"><a href="#2-2-PyCharm配置环境" class="headerlink" title="2.2 PyCharm配置环境"></a>2.2 PyCharm配置环境</h2><p>启动PyCharm后，新建一个PyQt5空项目后，需要配置Qt Designer、pyuic、pyrcc工具，相关配置方法如下：</p><h3 id="2-2-1-Qt-Designer"><a href="#2-2-1-Qt-Designer" class="headerlink" title="2.2.1 Qt Designer"></a>2.2.1 Qt Designer</h3><p>Qt Designer 是通过拖拽的方式放置控件，并实时查看控件效果进行快速UI设计。</p><p>最终生成.ui文件（实质上是XML格式的文件），可以通过pyuic5工具转换成.py文件。</p><p>在Pycharm中，依次打开 File - Settings - Tools - External Tools，点击 + Create Tool，配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">QtDisigner</span><br><span class="hljs-attr">Program :</span> <span class="hljs-string">E:\pyqy\venv\Lib\site-packages\qt5_applications\Qt\bin\designer.exe</span> <span class="hljs-comment"># 当前designer目录，请根据实际修改</span><br><span class="hljs-attr">Working directory:</span> <span class="hljs-string">$FileDir$</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002351613.png" alt="image-20240717002351613"></p><h3 id="2-2-2-Qt-Designer-汉化"><a href="#2-2-2-Qt-Designer-汉化" class="headerlink" title="2.2.2 Qt Designer 汉化"></a><span alt="delete">2.2.2 Qt Designer 汉化</span></h3><p><font title="red">在这里说明一下，新版本的QT Designer不需要汉化，打开默认是中文版本</font></p><p><span alt="delete">默认Qt Designer是英文版的，可以使用翻译文件进行汉化，下载地址：<a href="https://pan.baidu.com/s/1tJ3P2UQEv7OF5ArfKCOsjA">百度网盘</a>，提取码：kxvx</span></p><p><span alt="delete">下载文件 designer_zh_CN.qm后， 拷贝至本地pyqt5_tools的translations文件夹下即可，示例目录：</span></span></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">E:</span>\pyqy\venv\<span class="hljs-keyword">Lib</span>\site-packages\qt5_applications\Qt\bin\translations<br></code></pre></td></tr></table></figure><p>在PyCharm主界面，依次点击 Tools - External Tools - QtDisigner，即可启动中文界面的Qt Disigner</p><p><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002330263.png" alt="image-20240717002330263"></p><h3 id="2-2-3-PyUIC配置"><a href="#2-2-3-PyUIC配置" class="headerlink" title="2.2.3 PyUIC配置"></a>2.2.3 PyUIC配置</h3><p>PyUIC主要是把Qt Designer生成的.ui文件换成.py文件。</p><p>在Pycharm中，依次打开 File - Settings - Tools - External Tools，点击 + Create Tool，配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">PyUIC</span><br><span class="hljs-attr">Program :</span> <span class="hljs-string">C:\Python38\python.exe</span> <span class="hljs-comment"># 当前Python目录，请根据实际修改</span><br><span class="hljs-attr">Arguments:</span> <span class="hljs-string">-m</span> <span class="hljs-string">PyQt5.uic.pyuic</span> <span class="hljs-string">$FileName$</span> <span class="hljs-string">-o</span> <span class="hljs-string">$FileNameWithoutExtension$.py</span><br><span class="hljs-attr">Working directory:</span> <span class="hljs-string">$FileDir$</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002706346.png" alt="image-20240717002706346"></p><h3 id="2-2-4-PyRCC配置"><a href="#2-2-4-PyRCC配置" class="headerlink" title="2.2.4 PyRCC配置"></a>2.2.4 PyRCC配置</h3><p>PyRCC主要是把编写的.qrc资源文件换成.py文件。</p><p>在Pycharm中，依次打开 File - Settings - Tools - External Tools，点击 + Create Tool，配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">PyRCC</span><br><span class="hljs-attr">Program :</span> <span class="hljs-string">C:\Python38\Scripts\pyrcc5.exe</span> <span class="hljs-comment"># 当前rcc工具目录，请根据实际修改</span><br><span class="hljs-attr">Arguments:</span> <span class="hljs-string">$FileName$</span> <span class="hljs-string">-o</span> <span class="hljs-string">$FileNameWithoutExtension$_rc.py</span><br><span class="hljs-attr">Working directory:</span> <span class="hljs-string">$FileDir$</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002938184.png" alt="image-20240717002938184"></p><h1 id="3、实例开发"><a href="#3、实例开发" class="headerlink" title="3、实例开发"></a>3、实例开发</h1><p>下面我们以一个简单的城市天气预报为例，演示使用PyQt5开发一个GUI程序的基本流程。</p><h2 id="3-1-获取天气数据"><a href="#3-1-获取天气数据" class="headerlink" title="3.1 获取天气数据"></a>3.1 获取天气数据</h2><p>主要逻辑是通过Http接口调用免费的API接口获取相关城市天气数据，详见<a href="https://www.sojson.com/api/weather.html">天气API说明</a></p><p>如测试一下请求天津的天气，链接为：<a href="http://t.weather.sojson.com/api/weather/city/101030100">http://t.weather.sojson.com/api/weather/city/101030100</a></p><p>返回成功状态（status）为：200 ，失败为非200，返回数据为json数据，直接解析获取即可。</p><h2 id="3-1-设计界面UI"><a href="#3-1-设计界面UI" class="headerlink" title="3.1 设计界面UI"></a>3.1 设计界面UI</h2><p>打开Qt Designer，可参考下图设计Weather.ui:</p><h3 id="3-1-获取天气数据-1"><a href="#3-1-获取天气数据-1" class="headerlink" title="3.1 获取天气数据"></a>3.1 获取天气数据</h3><p>主要逻辑是通过Http接口调用免费的API接口获取相关城市天气数据，详见<a href="https://www.sojson.com/api/weather.html">天气API说明</a></p><p>如测试一下请求天津的天气，链接为：<a href="http://t.weather.sojson.com/api/weather/city/101030100">http://t.weather.sojson.com/api/weather/city/101030100</a></p><p>返回成功状态（status）为：200 ，失败为非200，返回数据为json数据，直接解析获取即可。</p><h3 id="3-1-设计界面UI-1"><a href="#3-1-设计界面UI-1" class="headerlink" title="3.1 设计界面UI"></a>3.1 设计界面UI</h3><p>打开Qt Designer，可参考下图设计Weather.ui:</p><p><img src="https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115431903-1503834053.jpg" alt="img"></p><p>我们主要用到的控件有Button, GroupBox, Label,ComboBox,TextEdit，同时定义了两个按钮queryBtn及clearBtn，分别用来查询及清空天气数据。我们需要绑定槽函数，方法如下：</p><ol><li>在Qt Designer右下角选择 信号&#x2F;槽编辑器，点击+号新增</li><li>分别选择queryBtn及clearBtn，选择信号 clicked(), 接收者 Dialog 及槽 accept() （我没找到绑定自定义槽函数的方法…）</li></ol><p><img src="https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115403954-1640742746.jpg" alt="img"></p><p>最后选择保存为 Weather.ui文件。</p><h3 id="3-2-转换-ui文件为-py文件"><a href="#3-2-转换-ui文件为-py文件" class="headerlink" title="3.2 转换.ui文件为.py文件"></a>3.2 转换.ui文件为.py文件</h3><p>在PyCharm中选中Weather.ui文件后，右键选择 External Tools - PyUIC，即可生成Weather.py，实际运行命令如下：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">C:\Python38\python.exe -m PyQt5.uic.pyuic Weather.ui -o Weather.py</span><br></code></pre></td></tr></table></figure><p>其中，我们需要把两个按钮绑定的槽函数：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">self</span>.queryBtn.clicked.connect(Dialog.accept)<br><span class="hljs-built_in">self</span>.clearBtn.clicked.connect(Dialog.accept)<br></code></pre></td></tr></table></figure><p>修改为自定义函数：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">self</span>.queryBtn.clicked.connect(Dialog.queryWeather)<br><span class="hljs-built_in">self</span>.clearBtn.clicked.connect(Dialog.clearText)<br></code></pre></td></tr></table></figure><h3 id="3-3-调用MainDialog"><a href="#3-3-调用MainDialog" class="headerlink" title="3.3 调用MainDialog"></a>3.3 调用MainDialog</h3><p>在MainDialog中调用界面类Ui_Dialog，然后在其中中添加查询天气的业务逻辑代码，这样就做到了界面显示和业务逻辑的分离。</p><p>新增demo.py文件， 在MainDialog类中定义了两个槽函数queryWeather()和clearText(),以便在界面文件Weather.ui中定义的两个按钮(queryBtn 和clearBtn) 触发clicked 信号与这两个槽函数进行绑定。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># coding:utf-8</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> Weather<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QApplication, QDialog<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainDialog</span>(<span class="hljs-title class_ inherited__">QDialog</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, parent=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-built_in">super</span>(QDialog, self).__init__(parent)<br>        self.ui = Weather.Ui_Dialog()<br>        self.ui.setupUi(self)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">queryWeather</span>(<span class="hljs-params">self</span>):<br>        cityName = self.ui.comboBox.currentText()<br>        cityCode = self.getCode(cityName)<br>        <br>        r = requests.get(<span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(cityCode))<br>        <br>        <span class="hljs-built_in">print</span>(r.json())<br>        <br>        <span class="hljs-keyword">if</span> r.json().get(<span class="hljs-string">&#x27;status&#x27;</span>) == <span class="hljs-number">200</span>:<br>            weatherMsg = <span class="hljs-string">&#x27;城市：&#123;&#125;\n日期：&#123;&#125;\n天气：&#123;&#125;\nPM 2.5：&#123;&#125; &#123;&#125;\n温度：&#123;&#125;\n湿度：&#123;&#125;\n风力：&#123;&#125;\n\n&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>                r.json()[<span class="hljs-string">&#x27;cityInfo&#x27;</span>][<span class="hljs-string">&#x27;city&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;ymd&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;type&#x27;</span>],<br>                <span class="hljs-built_in">int</span>(r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;pm25&#x27;</span>]),<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;quality&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;wendu&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;shidu&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;fl&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;notice&#x27;</span>],<br>            )<br>        <span class="hljs-keyword">else</span>:<br>            weatherMsg = <span class="hljs-string">&#x27;天气查询失败，请稍后再试！&#x27;</span><br>        <br>        self.ui.textEdit.setText(weatherMsg)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">getCode</span>(<span class="hljs-params">self, cityName</span>):<br>        cityDict = &#123;<span class="hljs-string">&quot;北京&quot;</span>: <span class="hljs-string">&quot;101010100&quot;</span>,<br>                    <span class="hljs-string">&quot;上海&quot;</span>: <span class="hljs-string">&quot;101020100&quot;</span>,<br>                    <span class="hljs-string">&quot;天津&quot;</span>: <span class="hljs-string">&quot;101030100&quot;</span>&#125;<br>        <br>        <span class="hljs-keyword">return</span> cityDict.get(cityName, <span class="hljs-string">&#x27;101010100&#x27;</span>)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">clearText</span>(<span class="hljs-params">self</span>):<br>        self.ui.textEdit.clear()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    myapp = QApplication(sys.argv)<br>    myDlg = MainDialog()<br>    myDlg.show()<br>    sys.exit(myapp.exec_())<br><br></code></pre></td></tr></table></figure><p>最终运行显示效果如下：</p><p><img src="https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115449906-304390105.jpg" alt="img"></p>]]></content>
    
    
    <categories>
      
      <category>python PyQT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python PyQT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flask开发入门</title>
    <link href="/2024/07/16/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/"/>
    <url>/2024/07/16/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>对于springboot+vue、asp.net还是其他一些技术，我们实现网页都需要较长的学习时间，因此，为了快速开发，满足需求，我参考Python的Flask编写了这篇文章。</p><p>我使用的是flask+mysql的web网页集成开发。</p><p>参考文献如下：</p><p> Flask<a href="https://flask.palletsprojects.com/en/3.0.x/">官方文档</a></p><p><a href="https://tutorial.helloflask.com/">Flask 入门教程</a></p><p><kbd>既然介绍说完了，那就开始吧。</kbd></p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><blockquote alt="danger"><p>    在学习Flask之前，你需要具备Python和Html的基本知识，如果没有这方面的知识，可以先去学习一下再回到本文章    </p></blockquote><blockquote alt='info'>    <p>        Python的本地环境建议3.9.0以上版本，对于IDE工具，你可以使用PyCharm、VsCode、VisualStudio    </p></blockquote><h3 id="安装Flask"><a href="#安装Flask" class="headerlink" title="安装Flask"></a>安装Flask</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install flask<br></code></pre></td></tr></table></figure><p><font>安装成功后就可以正式写代码了</font></p><h1 id="一、你的第一个Flask应用"><a href="#一、你的第一个Flask应用" class="headerlink" title="一、你的第一个Flask应用"></a>一、你的第一个Flask应用</h1><h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><p><font>我使用的是PyCharm，当然你也可以选择其他IDE工具</font></p><blockquote><p>新建一个项目，然后创建一个基于本地python解释器的虚拟环境（防止污染本地环境）</p></blockquote><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716190809782.png" alt="配置完成的结构"></p><h2 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h2><p><font title="green">在main.py中编写以下代码，这样你就成功拥有了第一个Flask应用</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Welcome to My Watchlist!&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716195136906.png" alt="运行截图"></p><h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2><p>如上面所见，我们成功初始化了一个flask项目，那么我们都做了什么呢？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br>app = Flask(__name__)<br></code></pre></td></tr></table></figure><blockquote alt='info'>    <p>        我们导入了flask库，实例化了这个类    </p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Welcome !!!&#x27;</span><br></code></pre></td></tr></table></figure><blockquote alt='info'>    <p>        我们创建了一个函数，在这个函数前面，我们使用了@app.route('/')装饰器，它将我们导向了对应的url        我们可以在这里做一些数据的处理，然后你就可以启动服务后访问到它        对于函数名，我们可以自由定义    </p></blockquote><p><font title="red">此处函数的return值可以被html解析成html，也可以是其他数据。</font></p><h3 id="装饰器的一些使用原则"><a href="#装饰器的一些使用原则" class="headerlink" title="装饰器的一些使用原则"></a>装饰器的一些使用原则</h3><blockquote><p>  关于@app.route(‘&#x2F;‘)<span alt="blink">URL规则</span></p></blockquote><h3 id="1-route内部的url都可以运行在部署的端口上，其编写规则是以斜线-作为开头。"><a href="#1-route内部的url都可以运行在部署的端口上，其编写规则是以斜线-作为开头。" class="headerlink" title="1.route内部的url都可以运行在部署的端口上，其编写规则是以斜线 &#x2F;作为开头。"></a>1.route内部的url都可以运行在部署的端口上，其<font title="red">编写规则是以斜线 &#x2F;作为开头</font>。</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Welcome !!!&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="2-对于一个函数，可以附加多个装饰器-app-route-‘-‘-。"><a href="#2-对于一个函数，可以附加多个装饰器-app-route-‘-‘-。" class="headerlink" title="2.对于一个函数，可以附加多个装饰器@app.route(‘&#x2F;‘)。"></a>2.对于一个函数，可以附加多个装饰器@app.route(‘&#x2F;‘)。</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span></span>)</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/admin&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">open</span>(html_path+<span class="hljs-string">&quot;login.html&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>).read()<br></code></pre></td></tr></table></figure><h3 id="3-对于-app-route-‘-‘-，我们还可以定义变量。"><a href="#3-对于-app-route-‘-‘-，我们还可以定义变量。" class="headerlink" title="3.对于@app.route(‘&#x2F;‘)，我们还可以定义变量。"></a>3.对于@app.route(‘&#x2F;‘)，我们还可以定义变量。</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_page</span>(<span class="hljs-params">username</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;欢迎你&#x27;</span> + username<br></code></pre></td></tr></table></figure><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716203426816.png" alt="运行截图"></p><blockquote><p>用户输入的数据会包含恶意代码，所以不能直接作为响应返回，需要使用 MarkupSafe（Flask 的依赖之一）提供的 <code>escape()</code> 函数对 <code>name</code> 变量进行转义处理，比如把 <code>&lt;</code> 转换成 <code>&lt;</code>。这样在返回响应时浏览器就不会把它们当做代码执行。</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> markupsafe <span class="hljs-keyword">import</span> escape<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_page</span>(<span class="hljs-params">username</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;User: <span class="hljs-subst">&#123;escape(username)&#125;</span>&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716204946382.png" alt="运行截图"></p><h3 id="视图函数的一些技巧"><a href="#视图函数的一些技巧" class="headerlink" title="视图函数的一些技巧"></a>视图函数的一些技巧</h3><p><kbd>我们可以通过url查看使用哪个函数</kbd></p><p>作为代表某个路由的端点（endpoint），同时用来生成视图函数对应的 URL。</p><p>对于程序内的 URL,Flask 提供了一个 <code>url_for</code> 函数来生成 URL，它接受的第一个参数就是端点值，默认为视图函数的名称</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> url_for<br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/test&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_url_for</span>():<br>    <span class="hljs-comment"># 下面是一些调用示例（请访问 http://localhost:5000/test 后在命令行窗口查看输出的 URL）：</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;login&#x27;</span>))  <span class="hljs-comment"># 生成 login 视图函数对应的 URL，将会输出：/admin</span><br>    <span class="hljs-comment"># 注意下面两个调用是如何生成包含 URL 变量的 URL 的</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;user_page&#x27;</span>, username=<span class="hljs-string">&#x27;greyli&#x27;</span>))  <span class="hljs-comment"># 输出：/user/greyli</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;user_page&#x27;</span>, username=<span class="hljs-string">&#x27;peter&#x27;</span>))  <span class="hljs-comment"># 输出：/user/peter</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;test_url_for&#x27;</span>))  <span class="hljs-comment"># 输出：/test</span><br>    <span class="hljs-comment"># 下面这个调用传入了多余的关键字参数，它们会被作为查询字符串附加到 URL 后面。</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;test_url_for&#x27;</span>, num=<span class="hljs-number">2</span>))  <span class="hljs-comment"># 输出：/test?num=2</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Test page&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716205528576.png" alt="运行截图"></p><h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><p>我导入一个html文件，然后返回这个html页面</p><blockquote><p>main.py</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os.path<br><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br>html_path = os.path.dirname(__file__) + <span class="hljs-string">&quot;\\views\\&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">open</span>(html_path+<span class="hljs-string">&quot;login.html&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>).read()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><blockquote><p>login.html</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- https://codepen.io/danielkvist/pen/LYNVyPL --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-pseudo">:root</span> &#123;</span><br><span class="language-css">      <span class="hljs-comment">/* COLORS */</span></span><br><span class="language-css">      <span class="hljs-attr">--white</span>: <span class="hljs-number">#e9e9e9</span>;</span><br><span class="language-css">      <span class="hljs-attr">--gray</span>: <span class="hljs-number">#333</span>;</span><br><span class="language-css">      <span class="hljs-attr">--blue</span>: <span class="hljs-number">#0367a6</span>;</span><br><span class="language-css">      <span class="hljs-attr">--lightblue</span>: <span class="hljs-number">#008997</span>;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-comment">/* RADII */</span></span><br><span class="language-css">      <span class="hljs-attr">--button-radius</span>: <span class="hljs-number">0.7rem</span>;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-comment">/* SIZES */</span></span><br><span class="language-css">      <span class="hljs-attr">--max-width</span>: <span class="hljs-number">758px</span>;</span><br><span class="language-css">      <span class="hljs-attr">--max-height</span>: <span class="hljs-number">420px</span>;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&quot;Segoe UI&quot;</span>, Roboto, Oxygen,</span><br><span class="language-css">        Ubuntu, Cantarell, <span class="hljs-string">&quot;Open Sans&quot;</span>, <span class="hljs-string">&quot;Helvetica Neue&quot;</span>, sans-serif;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        <span class="hljs-comment">/* 决定背景图像的位置是在视口内固定，或者随着包含它的区块滚动。 */</span></span><br><span class="language-css">      <span class="hljs-comment">/* https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-attachment */</span></span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--white) <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;https://res.cloudinary.com/dbhnlktrv/image/upload/v1599997626/background_oeuhe7.jpg&quot;</span>) no-repeat fixed center;</span><br><span class="language-css">        <span class="hljs-attribute">background-size</span>: cover;</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: grid;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span><br><span class="language-css">      place-items: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.form__title</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">300</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1.25rem</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.link</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--gray);</span><br><span class="language-css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">1.5rem</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">text-decoration</span>: none;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--white);</span><br><span class="language-css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--button-radius);</span><br><span class="language-css">      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.9rem</span> <span class="hljs-number">1.7rem</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.25</span>),</span><br><span class="language-css">        <span class="hljs-number">0</span> <span class="hljs-number">0.7rem</span> <span class="hljs-number">0.7rem</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.22</span>);</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--max-height);</span><br><span class="language-css">      <span class="hljs-attribute">max-width</span>: <span class="hljs-built_in">var</span>(--max-width);</span><br><span class="language-css">      <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container__form</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container--signin</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.container--signin</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container--signup</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.container--signup</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">animation</span>: show <span class="hljs-number">0.6s</span>;</span><br><span class="language-css">      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100%</span>);</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">5</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container__overlay</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.container__overlay</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">100%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--lightblue) <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;https://cdn.pixabay.com/photo/2018/08/14/13/23/ocean-3605547_1280.jpg&quot;</span>) no-repeat fixed center;</span><br><span class="language-css">        <span class="hljs-attribute">background-size</span>: cover;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: -<span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">200%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.overlay</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">50%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay__panel</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">flex-direction</span>: column;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">      <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay--left</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">20%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.overlay--left</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay--right</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.overlay--right</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">20%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--blue);</span><br><span class="language-css">      <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-built_in">var</span>(--blue) <span class="hljs-number">0%</span>, <span class="hljs-built_in">var</span>(--lightblue) <span class="hljs-number">74%</span>);</span><br><span class="language-css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--blue);</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--white);</span><br><span class="language-css">      <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">font-weight</span>: bold;</span><br><span class="language-css">      <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.1rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.9rem</span> <span class="hljs-number">4rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">text-transform</span>: uppercase;</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">80ms</span> ease-in;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.form</span>&gt;<span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1.5rem</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:active</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.95</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">outline</span>: none;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.form</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--white);</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">flex-direction</span>: column;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">3rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.input</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">      <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.9rem</span> <span class="hljs-number">0.9rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0.5rem</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-keyword">@keyframes</span> show &#123;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-number">0%</span>,</span><br><span class="language-css">      <span class="hljs-number">49.99%</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-number">50%</span>,</span><br><span class="language-css">      <span class="hljs-number">100%</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">5</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container right-panel-active&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Sign Up --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container__form container--signup&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;form1&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form__title&quot;</span>&gt;</span>Sign Up<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Email&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Sign Up<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- Sign In --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container__form container--signin&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;form2&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form__title&quot;</span>&gt;</span>Sign In<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Email&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;link&quot;</span>&gt;</span>Forgot your password?<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Sign In<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- Overlay --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container__overlay&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;overlay&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;overlay__panel overlay--left&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;signIn&quot;</span>&gt;</span>Sign In<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;overlay__panel overlay--right&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;signUp&quot;</span>&gt;</span>Sign Up<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> signInBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;signIn&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> signUpBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;signUp&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> fistForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;form1&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> secondForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;form2&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.container&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    signInBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      container.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">&quot;right-panel-active&quot;</span>);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    signUpBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      container.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;right-panel-active&quot;</span>);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    fistForm.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;submit&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-title function_">preventDefault</span>());</span><br><span class="language-javascript">    secondForm.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;submit&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-title function_">preventDefault</span>());</span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>运行截图</p></blockquote><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716210315287.png" alt="初始化的登录页面"></p><h1 id="二、HTML模板"><a href="#二、HTML模板" class="headerlink" title="二、HTML模板"></a>二、HTML模板</h1><p>在一般的 Web 程序里，访问一个地址通常会返回一个包含各类信息的 HTML 页面。</p><p>因为我们的程序是动态的，页面中的某些信息需要根据不同的情况来进行调整，比如对登录和未登录用户显示不同的信息，所以页面需要在用户访问时根据程序逻辑动态生成。</p><p>我们把包含变量和运算逻辑的 HTML 或其他格式的文本叫做<strong>模板</strong>，执行这些变量替换和逻辑计算工作的过程被称为<strong>渲染</strong>，这个工作我们使用模板渲染引擎——Jinja2 来完成。</p><p>通常来讲，会新建一个templates目录来存放模板，static目录存放静态文件。</p><h2 id="模板基本语法"><a href="#模板基本语法" class="headerlink" title="模板基本语法"></a>模板基本语法</h2><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; username &#125;&#125;</span><span class="language-xml">的个人主页<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> bio %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; bio &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>  </span><span class="hljs-comment">&#123;# 这里的缩进只是为了可读性，不是必须的 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">else</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>自我介绍为空。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml">  </span><span class="hljs-comment">&#123;# 大部分 Jinja 语句都需要声明关闭 #&#125;</span><br></code></pre></td></tr></table></figure><p>Jinja2 的语法和 Python 大致相同，你在后面会陆续接触到一些常见的用法。在模板里，你需要添加特定的定界符将 Jinja2 语句和变量标记出来，下面是三种常用的定界符：</p><ul><li><code>&#123;&#123; ... &#125;&#125;</code> 用来标记变量。</li><li><code>&#123;% ... %&#125;</code> 用来标记语句，比如 if 语句，for 语句等。</li><li>&#96;&#96; 用来写注释。</li></ul><h2 id="编写主页模板"><a href="#编写主页模板" class="headerlink" title="编写主页模板"></a>编写主页模板</h2><p>我们先在 templates 目录下创建一个 index.html 文件，作为主页模板。主页需要显示电影条目列表和个人信息，代码如下所示：</p><p><em>templates&#x2F;index.html：主页模板</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>&#123;&#123; name &#125;&#125;&#x27;s Watchlist<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123; name &#125;&#125;&#x27;s Watchlist<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    &#123;# 使用 length 过滤器获取 movies 变量的长度 #&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; movies|length &#125;&#125; Titles<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>        &#123;% for movie in movies %&#125;  &#123;# 迭代 movies 变量 #&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>&#123;&#123; movie.title &#125;&#125; - &#123;&#123; movie.year &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>  &#123;# 等同于 movie[&#x27;title&#x27;] #&#125;<br>        &#123;% endfor %&#125;  &#123;# 使用 endfor 标签结束 for 语句 #&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span><span class="hljs-symbol">&amp;copy;</span> 2018 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://helloflask.com/book/3&quot;</span>&gt;</span>HelloFlask<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>为了方便对变量进行处理，Jinja2 提供了一些过滤器，语法形式如下：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">变量</span>|过滤器 &#125;&#125;</span><br></code></pre></td></tr></table></figure><p>左侧是变量，右侧是过滤器名。比如，上面的模板里使用 <code>length</code> 过滤器来获取 <code>movies</code> 的长度，类似 Python 里的 <code>len()</code> 函数。</p><blockquote><p><strong>提示</strong> 访问 <a href="https://jinja.palletsprojects.com/en/3.0.x/templates/#builtin-filters">https://jinja.palletsprojects.com/en/3.0.x/templates/#builtin-filters</a> 查看所有可用的过滤器。</p></blockquote><h2 id="准备虚拟数据"><a href="#准备虚拟数据" class="headerlink" title="准备虚拟数据"></a>准备虚拟数据</h2><p>为了模拟页面渲染，我们需要先创建一些虚拟数据，用来填充页面内容：</p><p><em>app.py：定义虚拟数据</em></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py">name = <span class="hljs-string">&#x27;Grey Li&#x27;</span><br>movies = [<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;My Neighbor Totoro&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1988&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Dead Poets Society&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1989&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;A Perfect World&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1993&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Leon&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1994&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Mahjong&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1996&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Swallowtail Butterfly&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1996&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;King of Comedy&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1999&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Devils on the Doorstep&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1999&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;WALL-E&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;2008&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;The Pork of Music&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;2012&#x27;</span>&#125;,<br>]<br></code></pre></td></tr></table></figure><h2 id="渲染主页模板"><a href="#渲染主页模板" class="headerlink" title="渲染主页模板"></a>渲染主页模板</h2><p>使用 <code>render_template()</code> 函数可以把模板渲染出来，必须传入的参数为模板文件名（相对于 templates 根目录的文件路径），这里即 <code>&#39;index.html&#39;</code>。为了让模板正确渲染，我们还要把模板内部使用的变量通过关键字参数传入这个函数，如下所示：</p><p><em>app.py：返回渲染好的模板作为响应</em></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><br><span class="hljs-comment"># ...</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>, name=name, movies=movies)<br></code></pre></td></tr></table></figure><p>为了更好的表示这个视图函数的作用，我们把原来的函数名 <code>login</code> 改为 <code>index</code>，意思是“索引”，即主页。</p><p>在传入 <code>render_template()</code> 函数的关键字参数中，左边的 <code>movies</code> 是模板中使用的变量名称，右边的 <code>movies</code> 则是该变量指向的实际对象。这里传入模板的 <code>name</code> 是字符串，<code>movies</code> 是列表，但能够在模板里使用的不只这两种 Python 数据结构，你也可以传入元组、字典、函数等。</p><p><code>render_template()</code> 函数在调用时会识别并执行 index.html 里所有的 Jinja2 语句，返回渲染好的模板内容。在返回的页面中，变量会被替换为实际的值（包括定界符），语句（及定界符）则会在执行后被移除（注释也会一并移除）。</p><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716214913074.png" alt="运行截图"></p><h1 id="三、静态文件"><a href="#三、静态文件" class="headerlink" title="三、静态文件"></a>三、静态文件</h1><p>静态文件（static files）和我们的模板概念相反，指的是内容不需要动态生成的文件。比如图片、CSS 文件和 JavaScript 脚本等。</p><p>在 Flask 中，我们需要创建一个 static 文件夹来保存静态文件，它应该和程序模块、templates 文件夹在同一目录层级。</p><h2 id="生成静态文件-URL"><a href="#生成静态文件-URL" class="headerlink" title="生成静态文件 URL"></a>生成静态文件 URL</h2><p>在 HTML 文件里，引入这些静态文件需要给出资源所在的 URL。为了更加灵活，这些文件的 URL 可以通过 Flask 提供的 <code>url_for()</code> 函数来生成。</p><p>举例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;foo.jpg&#x27;) &#125;&#125;&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p><font title="yellow">在 Python 脚本里，<code>url_for()</code> 函数需要从 <code>flask</code> 包中导入，而在模板中则可以直接使用，因为 Flask 把一些常用的函数和对象添加到了模板上下文（环境）里。</font></p><h2 id="添加-Favicon"><a href="#添加-Favicon" class="headerlink" title="添加 Favicon"></a>添加 Favicon</h2><p>Favicon（favourite icon） 是显示在标签页和书签栏的网站头像。你需要准备一个 ICO、PNG 或 GIF 格式的图片，大小一般为 16×16、32×32、48×48 或 64×64 像素。把这个图片放到 static 目录下，然后像下面这样在 HTML 模板里引入它：</p><p><em>templates&#x2F;index.html：引入 Favicon</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;favicon.ico&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>保存后刷新页面，即可在浏览器标签页上看到这个图片。</p><h2 id="添加图片"><a href="#添加图片" class="headerlink" title="添加图片"></a>添加图片</h2><p>为了让页面不那么单调，我们来添加两个图片：一个是显示在页面标题旁边的头像，另一个是显示在页面底部的龙猫动图。我们在 static 目录下面创建一个子文件夹 images，把这两个图片都放到这个文件夹里：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">cd</span> <span class="hljs-keyword">static</span><br><span class="hljs-variable">$</span> mkdir images<br></code></pre></td></tr></table></figure><p>创建子文件夹并不是必须的，这里只是为了更好的组织同类文件。同样的，如果你有多个 CSS 文件，也可以创建一个 css 文件夹来组织他们。下面我们在页面模板中添加这两个图片，注意填写正确的文件路径：</p><p><em>templates&#x2F;index.html：添加图片</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/avatar.png&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">name</span> &#125;&#125;</span><span class="language-xml">&#x27;s Watchlist</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Walking Totoro&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/totoro.gif&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p><strong>提示</strong> 这两张图片你可以自己替换为任意的图片（注意更新文件名），也可以在示例程序的 <a href="https://github.com/helloflask/watchlist/tree/master/watchlist/static/images">GitHub 仓库</a>下载。</p></blockquote><h2 id="添加-CSS"><a href="#添加-CSS" class="headerlink" title="添加 CSS"></a>添加 CSS</h2><p>虽然添加了图片，但页面还是非常简陋，因为我们还没有添加 CSS 定义。下面在 static 目录下创建一个 CSS 文件 style.css，内容如下：</p><p><em>static&#x2F;style.css：定义页面样式</em></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 页面整体 */</span><br><span class="hljs-selector-tag">body</span> &#123;<br>    <span class="hljs-attribute">margin</span>: auto;<br>    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">580px</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>    <span class="hljs-attribute">font-family</span>: Helvetica, Arial, sans-serif;<br>&#125;<br><br><span class="hljs-comment">/* 页脚 */</span><br><span class="hljs-selector-tag">footer</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#888</span>;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">15px</span>;<br>    <span class="hljs-attribute">text-align</span>: center;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><br><span class="hljs-comment">/* 头像 */</span><br><span class="hljs-selector-class">.avatar</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;<br>&#125;<br><br><span class="hljs-comment">/* 电影列表 */</span><br><span class="hljs-selector-class">.movie-list</span> &#123;<br>    <span class="hljs-attribute">list-style-type</span>: none;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">5px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.16</span>), <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.12</span>);<br>&#125;<br><br><span class="hljs-selector-class">.movie-list</span> <span class="hljs-selector-tag">li</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">24px</span>;<br>    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<br>&#125;<br><br><span class="hljs-selector-class">.movie-list</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:last-child</span> &#123;<br>    <span class="hljs-attribute">border-bottom</span>:none;<br>&#125;<br><br><span class="hljs-selector-class">.movie-list</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;<br>&#125;<br><br><span class="hljs-comment">/* 龙猫图片 */</span><br><span class="hljs-selector-class">.totoro</span> &#123;<br>    <span class="hljs-attribute">display</span>: block;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>接着在页面的 <code>&lt;head&gt;</code> 标签内引入这个 CSS 文件：</p><p><em>templates&#x2F;index.html：引入 CSS 文件</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;style.css&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p><strong>提示</strong> 当你把 CSS 写到单独的文件后，浏览器获取到这个文件后会对其进行缓存（其他静态文件同理，比如 JavaScript 文件）。Flask 从 2.0 版本开始支持自动重载静态文件的变化，如果你使用的仍然是旧版本的 Flask，那么每当你对 CSS 文件的内容进行更新后，都需要使用下面的快捷键清除缓存：</p><ul><li>Google Chrome（Mac）：Command + Shift + R</li><li>Google Chrome（Windows &amp; Linux）：Ctrl + F5</li><li>Firefox（Mac）：Command + Shift + R</li><li>Firefox（Windows &amp; Linux）：Ctrl + F5</li><li>Safari：Command + Option + R</li></ul></blockquote><p>最后要为对应的元素设置 <code>class</code> 属性值，以便和对应的 CSS 定义关联起来：</p><p><em>templates&#x2F;index.html：添加 class 属性</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Avatar&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/avatar.png&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">name</span> &#125;&#125;</span><span class="language-xml">&#x27;s Watchlist</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;movie-list&quot;</span>&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Walking Totoro&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;totoro&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/totoro.gif&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716222523545.png" alt="运行截图"></p><table><thead><tr><th><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/totoro.gif" alt="totoro"></th><th><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/avatar.png" alt="avatar"></th></tr></thead></table><h1 id="四、数据库"><a href="#四、数据库" class="headerlink" title="四、数据库"></a>四、数据库</h1><h2 id="使用-SQLAlchemy-操作数据库"><a href="#使用-SQLAlchemy-操作数据库" class="headerlink" title="使用 SQLAlchemy 操作数据库"></a>使用 SQLAlchemy 操作数据库</h2><p>为了简化数据库操作，我们将使用 <a href="https://www.sqlalchemy.org/">SQLAlchemy</a>——一个 Python 数据库工具（ORM，即对象关系映射）。借助 SQLAlchemy，你可以通过定义 Python 类来表示数据库里的一张表（类属性表示表中的字段 &#x2F; 列），通过对这个类进行各种操作来代替写 SQL 语句。这个类我们称之为<strong>模型类</strong>，类中的属性我们将称之为<strong>字段</strong>。</p><p>Flask 有大量的第三方扩展，这些扩展可以简化和第三方库的集成工作。我们下面将使用一个叫做 <a href="https://flask-sqlalchemy.palletsprojects.com/en/2.x">Flask-SQLAlchemy</a> 的扩展来集成 SQLAlchemy。</p><p>但是我的开发更喜欢用MySQL数据库或者SqlServer，这里不对这个数据库进行过多介绍。</p><h2 id="使用MySQL数据库"><a href="#使用MySQL数据库" class="headerlink" title="使用MySQL数据库"></a>使用MySQL数据库</h2><p><kbd>在python中，可以使用pymysql库进行数据库操作</kbd></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 安装pymysql</span><br>pip install pymysql<br></code></pre></td></tr></table></figure><p>在mysql数据库中新建</p><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716235643515.png" alt="image-20240716235643515"></p><p>编写一个mysql配置类</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> pymysql<br><span class="hljs-keyword">from</span> pymysql <span class="hljs-keyword">import</span> cursors<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DbConfig</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.conn = pymysql.connect(<br>            host=<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,  <span class="hljs-comment"># 主机名（或IP地址）</span><br>            port=<span class="hljs-number">3306</span>,  <span class="hljs-comment"># 端口号，默认为3306</span><br>            user=<span class="hljs-string">&#x27;root&#x27;</span>,  <span class="hljs-comment"># 用户名</span><br>            password=<span class="hljs-string">&#x27;123456&#x27;</span>,  <span class="hljs-comment"># 密码</span><br>            charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>,  <span class="hljs-comment"># 设置字符编码</span><br>            autocommit=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># 自动提交更改</span><br>            database=<span class="hljs-string">&#x27;flask_study&#x27;</span>,  <span class="hljs-comment"># 数据库名称</span><br>            cursorclass=cursors.DictCursor  <span class="hljs-comment"># 转换成字典格式输出</span><br>        )<br>        self.cursor = self.conn.cursor()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findUser</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from user where id=1&#x27;</span>)<br>        users = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> users<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findMovies</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from movies&#x27;</span>)<br>        movies = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> movies<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__del__</span>(<span class="hljs-params">self</span>):<br>        self.cursor.close()<br>        self.conn.close()<br></code></pre></td></tr></table></figure><p>在使用数据的时候可以像下面这样写</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">name = DbConfig().findUser()[<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;username&#x27;</span>]<br>movies = DbConfig().findMovies()<br></code></pre></td></tr></table></figure><p>完整的代码：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> pymysql<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><span class="hljs-keyword">from</span> pymysql <span class="hljs-keyword">import</span> cursors<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DbConfig</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.conn = pymysql.connect(<br>            host=<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,  <span class="hljs-comment"># 主机名（或IP地址）</span><br>            port=<span class="hljs-number">3306</span>,  <span class="hljs-comment"># 端口号，默认为3306</span><br>            user=<span class="hljs-string">&#x27;root&#x27;</span>,  <span class="hljs-comment"># 用户名</span><br>            password=<span class="hljs-string">&#x27;123456&#x27;</span>,  <span class="hljs-comment"># 密码</span><br>            charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>,  <span class="hljs-comment"># 设置字符编码</span><br>            autocommit=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># 自动提交更改</span><br>            database=<span class="hljs-string">&#x27;flask_study&#x27;</span>,  <span class="hljs-comment"># 数据库名称</span><br>            cursorclass=cursors.DictCursor  <span class="hljs-comment"># 转换成字典格式输出</span><br>        )<br>        self.cursor = self.conn.cursor()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findUser</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from user where id=1&#x27;</span>)<br>        users = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> users<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findMovies</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from movies&#x27;</span>)<br>        movies = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> movies<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__del__</span>(<span class="hljs-params">self</span>):<br>        self.cursor.close()<br>        self.conn.close()<br><br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    name = DbConfig().findUser()[<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;username&#x27;</span>]<br>    movies = DbConfig().findMovies()<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>, name=name, movies=movies)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br><br></code></pre></td></tr></table></figure><p><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716235252644.png" alt="运行截图"></p><p>大体上就是这个样子了</p><p>这种开发满足了基本需求，开发周期短，但是想要好看的页面，可以使用json数据做一个前后端分离或者整合的项目。</p>]]></content>
    
    
    <categories>
      
      <category>python Flask</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python Flask</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python网络爬虫</title>
    <link href="/2024/07/16/python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"/>
    <url>/2024/07/16/python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="第1章-爬虫介绍"><a href="#第1章-爬虫介绍" class="headerlink" title="第1章 爬虫介绍"></a>第1章 爬虫介绍</h1><h2 id="爬虫用途"><a href="#爬虫用途" class="headerlink" title="爬虫用途"></a>爬虫用途</h2><p><img src="/./../images/python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/image-20240716154602815.png" alt="image-20240716154602815"></p><h2 id="爬虫分类"><a href="#爬虫分类" class="headerlink" title="爬虫分类"></a>爬虫分类</h2><h3 id="按照使用场景："><a href="#按照使用场景：" class="headerlink" title="按照使用场景："></a>按照使用场景：</h3><h4 id="通用爬虫"><a href="#通用爬虫" class="headerlink" title="通用爬虫"></a>通用爬虫</h4><h5 id="全网爬虫"><a href="#全网爬虫" class="headerlink" title="全网爬虫"></a>全网爬虫</h5><p>从一些种子url扩展到整个WEB爬虫，是搜索引擎的重要组成部分</p><h5 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h5><ul><li>爬取范围广</li><li>对硬件要求高（CPU,存储空间）</li><li>更新频率低</li></ul><h4 id="聚焦爬虫"><a href="#聚焦爬虫" class="headerlink" title="聚焦爬虫"></a>聚焦爬虫</h4><h5 id="主题爬虫"><a href="#主题爬虫" class="headerlink" title="主题爬虫"></a>主题爬虫</h5><p>只爬取相关主题页面</p><h5 id="特点：-1"><a href="#特点：-1" class="headerlink" title="特点："></a>特点：</h5><ul><li>爬虫范围窄</li><li>对硬件要求低</li><li>更新频率快</li></ul><h3 id="按爬取方式："><a href="#按爬取方式：" class="headerlink" title="按爬取方式："></a>按爬取方式：</h3><h4 id="累积式爬虫"><a href="#累积式爬虫" class="headerlink" title="累积式爬虫"></a>累积式爬虫</h4><p>从某个时间开始，遍历所有的能够爬取的URL，爬取相关数据，只要硬件和时间允许就可以累计大量数据</p><p>特点</p><ul><li>爬取页面比较多</li><li>对硬件要求高</li><li>数据更新慢</li></ul><h4 id="增量式爬虫"><a href="#增量式爬虫" class="headerlink" title="增量式爬虫"></a>增量式爬虫</h4><p>在有客观数据基础上，只能爬取没有的数据或者更新的数据，而对于没有变化的数据就不在爬取了</p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul><li>爬取页面比较少</li><li>对硬件要求不高</li><li>数据更新比较快</li></ul><h3 id="按爬取页面存在的方式："><a href="#按爬取页面存在的方式：" class="headerlink" title="按爬取页面存在的方式："></a>按爬取页面存在的方式：</h3><h4 id="表层网络爬虫"><a href="#表层网络爬虫" class="headerlink" title="表层网络爬虫"></a>表层网络爬虫</h4><h5 id="表层页面"><a href="#表层页面" class="headerlink" title="表层页面"></a>表层页面</h5><ul><li>通过url就能直接获取的HTML页面</li></ul><h5 id="爬取表层页面的爬虫"><a href="#爬取表层页面的爬虫" class="headerlink" title="爬取表层页面的爬虫"></a>爬取表层页面的爬虫</h5><h4 id="深层网络爬虫"><a href="#深层网络爬虫" class="headerlink" title="深层网络爬虫"></a>深层网络爬虫</h4><h5 id="深层网页"><a href="#深层网页" class="headerlink" title="深层网页"></a>深层网页</h5><ul><li>通过AJAX请求才能获取数据，动态生成的数据</li><li>登录之后才能访问的数据</li></ul><h5 id="爬取深层网页的爬虫"><a href="#爬取深层网页的爬虫" class="headerlink" title="爬取深层网页的爬虫"></a>爬取深层网页的爬虫</h5><h1 id="第2章-爬虫的实现原理和技术"><a href="#第2章-爬虫的实现原理和技术" class="headerlink" title="第2章 爬虫的实现原理和技术"></a>第2章 爬虫的实现原理和技术</h1><h1 id="第3章-网页请求原理"><a href="#第3章-网页请求原理" class="headerlink" title="第3章 网页请求原理"></a>第3章 网页请求原理</h1><h1 id="第4章-抓取网页数据"><a href="#第4章-抓取网页数据" class="headerlink" title="第4章 抓取网页数据"></a>第4章 抓取网页数据</h1><h1 id="第5章-数据解析"><a href="#第5章-数据解析" class="headerlink" title="第5章 数据解析"></a>第5章 数据解析</h1><h1 id="第6章-并发下载"><a href="#第6章-并发下载" class="headerlink" title="第6章 并发下载"></a>第6章 并发下载</h1><h1 id="第7章-抓取动态内容"><a href="#第7章-抓取动态内容" class="headerlink" title="第7章 抓取动态内容"></a>第7章 抓取动态内容</h1><h1 id="第8章-图像识别与文字处理"><a href="#第8章-图像识别与文字处理" class="headerlink" title="第8章 图像识别与文字处理"></a>第8章 图像识别与文字处理</h1><h1 id="第9章-存储爬虫数据"><a href="#第9章-存储爬虫数据" class="headerlink" title="第9章 存储爬虫数据"></a>第9章 存储爬虫数据</h1><h1 id="第10章-初识爬虫框架Scrapy"><a href="#第10章-初识爬虫框架Scrapy" class="headerlink" title="第10章 初识爬虫框架Scrapy"></a>第10章 初识爬虫框架Scrapy</h1><h1 id="第11章-Scrapy终端与核心组件"><a href="#第11章-Scrapy终端与核心组件" class="headerlink" title="第11章 Scrapy终端与核心组件"></a>第11章 Scrapy终端与核心组件</h1><h1 id="第12章-自动抓取网页的爬虫CrawlSpider"><a href="#第12章-自动抓取网页的爬虫CrawlSpider" class="headerlink" title="第12章 自动抓取网页的爬虫CrawlSpider"></a>第12章 自动抓取网页的爬虫CrawlSpider</h1><h1 id="第13章-Scrapy-Redis分布式爬虫"><a href="#第13章-Scrapy-Redis分布式爬虫" class="headerlink" title="第13章 Scrapy-Redis分布式爬虫"></a>第13章 Scrapy-Redis分布式爬虫</h1>]]></content>
    
    
    <categories>
      
      <category>python爬虫</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python爬虫</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NanUI使用文档</title>
    <link href="/2024/07/11/NanUI%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/"/>
    <url>/2024/07/11/NanUI%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="NanUI简介"><a href="#NanUI简介" class="headerlink" title="NanUI简介"></a>NanUI简介</h1><p>NanUI是WinForm UI库的一种，它可以让应用程序里面内嵌html+css写的页面，可以样式更加多样化。</p><p>项目库地址：<a href="https://gitee.com/dotnetchina/NanUI.git">https://gitee.com/dotnetchina/NanUI.git</a></p><h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><ul><li><a href="https://gitee.com/dotnetchina/NanUI/blob/master/examples/MinimalWinFormiumApp">Minimal WinFormium App</a> - 介绍 WinFormium 的基本用法。</li></ul><h2 id="🔗-第三方库引用和工具集"><a href="#🔗-第三方库引用和工具集" class="headerlink" title="🔗 第三方库引用和工具集"></a>🔗 第三方库引用和工具集</h2><ul><li>CEF - <a href="https://gitee.com/dotnetchina/NanUI">https://bitbucket.org/chromiumembedded/cef</a></li><li>Xilium.CefGlue - <a href="https://gitee.com/dotnetchina/NanUI">https://gitlab.com/xiliumhq/chromiumembedded/cefglue</a></li><li>Vanara.Library - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/dahall/Vanara/</a></li><li>Vortice.Windows - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/amerkoleci/Vortice.Windows</a></li><li>SkiaSharp - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/mono/SkiaSharp</a></li><li>React - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/facebook/react</a></li><li>React-Router - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/remix-run/react-router</a></li><li>Vite - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/vitejs/vite</a></li></ul><h2 id="🖥️-环境要求"><a href="#🖥️-环境要求" class="headerlink" title="🖥️ 环境要求"></a>🖥️ 环境要求</h2><p><strong>开发环境</strong></p><ul><li>.NET Framework 4.6.2 或更高版本 &#x2F; .NET 6.0 或更高版本</li><li>Visual Studio 2019 或更高版本（强烈建议使用 VS2022）</li></ul><p><strong>部署环境</strong></p><ul><li>Microsoft Windows 7 Service Pack 1 或更高版本</li><li>.Net Framework 4.6.2 或更高版本</li><li>.NET 6.0 需要 Windows 7 Service Pack 1 或更高版本</li><li>.NET 7.0&#x2F;8.0 需要 Windows 10 或 Windows 11</li></ul><p>这是一个 <strong>仅限 Windows</strong> 的框架，所以它目前不能在 Linux 或者 MacOS 环境运行。</p><p>支持的最低 Windows 版本是 Windows 7 Service Pack 1，并且 Windows 7 不支持某些功能（例如 DirectComposition 离屏渲染）。</p><h2 id="🧰-入门"><a href="#🧰-入门" class="headerlink" title="🧰 入门"></a>🧰 入门</h2><p>按照以下步骤即可创建一个简单的 WinFormium 应用程序：</p><p><strong>1. 通过默认模板创建一个 WinForm 应用程序。</strong></p><p><strong>2. 安装 WinFormium NuGet 包</strong></p><p>打开 NuGet 包管理器来安装或使用 NuGet 包管理器控制台，然后运行以下命令来安装 WinFormium nuget 包：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">PM&gt; Install-<span class="hljs-keyword">Package</span> <span class="hljs-title">NetDimension.NanUI</span><br></code></pre></td></tr></table></figure><p>安装 WinFormium 所依赖的 Chromium Embedded Framework 依赖项：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">PM&gt; Install-<span class="hljs-keyword">Package</span> <span class="hljs-title">NetDimension.NanUI.Runtime</span><br></code></pre></td></tr></table></figure><p>CEF 运行库巨大，再加上众所周知的原因，中国内地玩家请自行设置 NuGet 使用国内镜像。</p><ul><li><strong>Azure CDN</strong> - <a href="https://gitee.com/link?target=https://nuget.cdn.azure.cn/v3/index.json">https://nuget.cdn.azure.cn/v3/index.json</a></li><li><strong>华为云</strong> - <a href="https://gitee.com/link?target=https://repo.huaweicloud.com/repository/nuget/v3/index.json">https://repo.huaweicloud.com/repository/nuget/v3/index.json</a></li></ul><p><strong>3. 一个基本的 WinFormium 应用程序需要以下代码：</strong></p><p>按如下示例修改 <strong>Program.cs</strong> 文件中的代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> WinFormium;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    [<span class="hljs-meta">STAThread</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> builder = WinFormiumApp.CreateBuilder();<br><br>        builder.UseWinFormiumApp&lt;MyApp&gt;();<br><br>        <span class="hljs-keyword">var</span> app = builder.Build();<br><br>        app.Run();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>创建一个类继承 <strong>WinFormiumStartup</strong> 来配置应用程序：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> WinFormium;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title">MyAPP</span> : <span class="hljs-title">WinFormiumStartup</span><br>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> MainWindowCreationAction? UseMainWindow(MainWindowOptions opts)<br>    &#123;<br>        <span class="hljs-comment">// 设置应用程序的主窗体</span><br>        <span class="hljs-keyword">return</span> opts.UseMainFormium&lt;MyWindow&gt;();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WinFormiumMain</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// Main函数中的代码应该在这里，该函数只在主进程中运行。这样可以防止子进程运行一些不正确的初始化代码。</span><br>        ApplicationConfiguration.Initialize();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigurationChromiumEmbedded</span>(<span class="hljs-params">ChromiumEnvironmentBuiler cef</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// 在此处配置 Chromium Embedded Framwork</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// 在这里配置该应用程序的服务</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>创建一个类实现 <strong>Formium</strong>，用于配置应用程序的主窗口：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> WinFormium;<br><span class="hljs-keyword">using</span> WinFormium.Forms;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title">MyWindow</span> : <span class="hljs-title">Formium</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyWindow</span>()</span><br>    &#123;<br>        Url = <span class="hljs-string">&quot;https://www.google.com&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> FormStyle <span class="hljs-title">ConfigureWindowStyle</span>(<span class="hljs-params">WindowStyleBuilder builder</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// 此处配置窗口的样式和属性，或留空以使用默认样式</span><br><br>        <span class="hljs-keyword">var</span> style = builder.UseSystemForm();<br><br>        style.TitleBar = <span class="hljs-literal">false</span>;<br><br>        style.DefaultAppTitle = <span class="hljs-string">&quot;My first WinFomrim app&quot;</span>;<br><br>        <span class="hljs-keyword">return</span> style;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. 生成并运行你的第一个 WinFormium 应用程序</strong></p>]]></content>
    
    
    <categories>
      
      <category>WinForm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WinForm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Kivy中文说明文档v1.0</title>
    <link href="/2024/07/09/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/"/>
    <url>/2024/07/09/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/</url>
    
    <content type="html"><![CDATA[<h1 id="Kivy简介"><a href="#Kivy简介" class="headerlink" title="Kivy简介"></a>Kivy简介</h1><p>Kivy是Python的Gui的一种。</p><p>网上关于使用python进行ui设计的文档很少，因此为了自己方便，也为了这个领域的发展，于是编写初稿。</p><p><strong>注</strong>：本版本是在windows环境下使用的，后期其他系统可能会添加。</p><p><a href="https://cycleuser.gitbooks.io/kivy-guide-chinese/content/00-Kivy-CN.html">参考文献</a></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><strong>官网原文档链接</strong></p><p><a href="https://kivy.org/docs/installation/installation-windows.html">Installation on Windows</a></p><p><a href="https://kivy.org/docs/installation/installation-linux.html">Installation on Linux</a></p><p><a href="https://kivy.org/docs/installation/installation-osx.html">Installation on Mac OS</a></p><h2 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h2><p>首先你得有一个合适的python环境</p><p>官方文档里面提及的是3.9的版本</p><p>国内安装比较慢，可以采用国内的开源镜像站</p><p><a href="https://mirrors.aliyun.com/python-release/">阿里云开源镜像站</a></p><p>之后最好设置下载镜像源为国内的，国外的比较慢</p><h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><p>安装了Python之后，打开命令行工具cmd，然后按照下面的命令来进行Kivy的安装。</p><ol><li>首先要保证已经安装了最新的pip和wheel：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">python -m pip install --upgrade pip wheel setuptools<br></code></pre></td></tr></table></figure><ol start="2"><li>然后安装必要的依赖包(其中gstreamer大小接近139MB，如果不需要用，就可以跳过不安装这个包:</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python">python -m pip install docutils pygments pypiwin32 kivy.deps.sdl2 kivy.deps.glew<br>python -m pip install kivy.deps.gstreamer --extra-index-url https://kivy.org/downloads/packages/simple/<br></code></pre></td></tr></table></figure><ol start="3"><li>如果上一步都成功了没什么报错，就可以安装Kivy了:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">python -m pip install kivy<br></code></pre></td></tr></table></figure><ol start="4"><li>在环境变量中添加一些路径到PATH来避免遇到<a href="https://github.com/kivy/kivy/issues/3957">各种issues</a> (在你的python.exe所在的路径下运行下面的命令):</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-built_in">set</span> PATH=%PATH%;%<span class="hljs-built_in">cd</span>%\share\sdl2\bin;%<span class="hljs-built_in">cd</span>%\share\glew\bin<br></code></pre></td></tr></table></figure><h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><p><a href="https://kivy.org/docs/guide/basic.html">原文地址</a></p><h2 id="Kivy环境安装搭建"><a href="#Kivy环境安装搭建" class="headerlink" title="Kivy环境安装搭建"></a>Kivy环境安装搭建</h2><p>Kivy要依赖很多Python包，比如 pygame, gstreamer, PIL, Cairo 等等还有好多。这些包并非都是必需的，要根据你的运行平台来看具体情况，有时候缺那么一两个包就可能导致安装失败，或者运行过程中出错等等，这就挺痛苦的。所以Kivy官方针对Windows和MacOS X提供了集成好关键部件的压缩包，解压缩之后直接就能用。具体的安装过程可以参考下面链接中的中文安装指南：</p><ul><li><a href="http://blog.cycleuser.org/kivy-installment-tutorial.html">Kivy中文安装指南</a></li></ul><p>如果你非要自己从零开始安装，那最起码要确保安装有<a href="http://cython.org/">Cython</a>和<a href="http://pygame.org/">Pygame</a>。这两个包可以通过pip来安装，如下所示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Bash">pip install cython<br>pip install pygame<br>pip install kivy<br></code></pre></td></tr></table></figure><p><a href="https://github.com/kivy/kivy">Kivy的开发版本</a>也可以通过git来安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Bash">git <span class="hljs-built_in">clone</span> https://github.com/kivy/kivy<br>make<br></code></pre></td></tr></table></figure><h2 id="创建一个应用"><a href="#创建一个应用" class="headerlink" title="创建一个应用"></a>创建一个应用</h2><p>创建一个Kivy应用大概步骤如下：</p><ul><li>基于App类创建一个子类；</li><li>把build()方法实现为返回一个控件实例(这个控件的实例也就是你整个应用的根控件)。</li><li>创建一个这个类的实例，然后调用run()方法。</li></ul><p>下面的代码就是上述思路的最小化实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> kivy<br>kivy.require(<span class="hljs-string">&#x27;1.0.6&#x27;</span>) <span class="hljs-comment"># 注意要把这个版本号改变成你现有的Kivy版本号!</span><br><br><span class="hljs-keyword">from</span> kivy.app <span class="hljs-keyword">import</span> App <span class="hljs-comment"># 译者注：这里就是从kivy.app包里面导入App类</span><br><span class="hljs-keyword">from</span> kivy.uix.label <span class="hljs-keyword">import</span> Label <span class="hljs-comment"># 译者注：这里是从kivy.uix.label包中导入Label控件，这里都注意开头字母要大写</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span>(<span class="hljs-title class_ inherited__">App</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self</span>): <span class="hljs-comment"># 译者注：这里是实现build()方法</span><br>        <span class="hljs-keyword">return</span> Label(text=<span class="hljs-string">&#x27;Hello world&#x27;</span>) <span class="hljs-comment"># 译者注：在这个方法里面使用了Label控件</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    MyApp().run() <span class="hljs-comment"># 译者注：这里就是运行了。</span><br></code></pre></td></tr></table></figure><p>把上面的代码以文本形式复制到一个文本文件中，保存成py文件，例如main.py，然后运行，就行了。</p><p><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/image-20240709221042996.png" alt="运行截图"></p><h2 id="Kivy应用的生命周期"><a href="#Kivy应用的生命周期" class="headerlink" title="Kivy应用的生命周期"></a>Kivy应用的生命周期</h2><p>如上图所示，不论什么用途和目的，咱们应用的入口都是这个run()方法，在本文的样例代码中，就是“MyApp().run()”。</p><p>下面就一行一行开始详细解释了：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.app <span class="hljs-keyword">import</span> App<br></code></pre></td></tr></table></figure><p>为什么要导入这个App类呢？因为咱们自定义的这个App要继承这个类。这个类的位置在kivy安装目录下的kivy目录下的app.py文件中。</p><p>如果你想要深入挖掘一下，去了解这个Kivy的App类到底是怎么个内容，你可以打开这个app.py文件，亲自来看看。Kivy作者特别鼓励大家去阅读源码。Kivy基于Python，用Sphinx编写的文档，所以每个类的文档都在对应的文件内。</p><p>然后咱们回过头来，继续看本文这次的代码的第二行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.uix.label <span class="hljs-keyword">import</span> Label<br></code></pre></td></tr></table></figure><p>这里一定要特别注意各种包和类的导入。”kivy.uix”这个包的作用是容纳用户界面元素，比如各种输出布局和控件。</p><p>接下来看到这一行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span>(<span class="hljs-title class_ inherited__">App</span>):<br></code></pre></td></tr></table></figure><p>这一行定义了咱们这次的Kivy应用的基类。如果你要做修改的话，把MyApp改成你要设定的应用名字就可以了。</p><p>接着往下看：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self</span>):<br></code></pre></td></tr></table></figure><p>在上面的生命周期图中加粗强调的部分表明，build函数所处的是要进行初始化和返回根控件的位置。根控件返回的操作在下面这一行中实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">return</span> Label(text=<span class="hljs-string">&#x27;Hello world&#x27;</span>)<br></code></pre></td></tr></table></figure><p>这里我们用文本‘Hello World’对Label这一控件进行了初始化，并且返回了其实例。这个Label就是咱们这个应用的根控件了。</p><p>Python是用缩进来区别代码块的，所以一定要注意上面代码的缩进和层次，尤其是函数定义那部分。</p><p>然后咱们继续，到了真正让应用开始运行的这部分了：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    MyApp().run()<br></code></pre></td></tr></table></figure><p>这里对MyApp这个类进行了初始化，然后调用了这个类的run()方法。这样就初始化并启动了我们的Kivy应用了。</p><h2 id="运行应用"><a href="#运行应用" class="headerlink" title="运行应用"></a>运行应用</h2><p>接下来就是要在不同操作系统平台上来运行咱们刚刚写好的应用了：</p><p>To run the application, follow the instructions for your operating system:</p><ul><li>Windows 可以在CMD中以如下方式运行：</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs CMD">$ python main.py #用系统Python运行<br><span class="hljs-function">C:\<span class="hljs-title">appdir</span>&gt;<span class="hljs-title">kivy.bat</span> <span class="hljs-title">main.py</span> #用<span class="hljs-title">kivy.bat</span>来运行，注意这里要设定好正确的路径</span><br></code></pre></td></tr></table></figure><ul><li>Android 下面要运行还需要一些复杂的文件，所以等以后深入了之后再给讲解这部分了。</li></ul><p>这个应用运行之后的具体效果就是下面图片所示这样，会打开一个窗口，然后展示出一个Label，上面写着文本‘Hello World’，这个Label会覆盖该窗口的全部区域。就这样了。</p><p><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/quickstart.png" alt="img"></p><h2 id="修改定制这个应用"><a href="#修改定制这个应用" class="headerlink" title="修改定制这个应用"></a>修改定制这个应用</h2><p>增加一个用户名&#x2F;密码输入的页面</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.app <span class="hljs-keyword">import</span> App<br><span class="hljs-keyword">from</span> kivy.uix.gridlayout <span class="hljs-keyword">import</span> GridLayout<br><span class="hljs-keyword">from</span> kivy.uix.label <span class="hljs-keyword">import</span> Label<br><span class="hljs-keyword">from</span> kivy.uix.textinput <span class="hljs-keyword">import</span> TextInput<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginScreen</span>(<span class="hljs-title class_ inherited__">GridLayout</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(LoginScreen, self).__init__(**kwargs)<br>        self.cols = <span class="hljs-number">2</span><br>        self.add_widget(Label(text=<span class="hljs-string">&#x27;User Name&#x27;</span>))<br>        self.username = TextInput(multiline=<span class="hljs-literal">False</span>)<br>        self.add_widget(self.username)<br>        self.add_widget(Label(text=<span class="hljs-string">&#x27;password&#x27;</span>))<br>        self.password = TextInput(password=<span class="hljs-literal">True</span>, multiline=<span class="hljs-literal">False</span>)<br>        self.add_widget(self.password)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span>(<span class="hljs-title class_ inherited__">App</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> LoginScreen()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    MyApp().run()<br></code></pre></td></tr></table></figure><p><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/image-20240709221537055.png" alt="运行截图"></p><p>在下面这行代码中，我们导入了一种名为Gridlayout的布局：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.uix.gridlayout <span class="hljs-keyword">import</span> GridLayout<br></code></pre></td></tr></table></figure><p>这个类被我们用作基类来制作根控件LoginScreen，在如下代码中进行了定义：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginScreen</span>(<span class="hljs-title class_ inherited__">GridLayout</span>):<br></code></pre></td></tr></table></figure><p>如下代码中，我们在LoginScreen类中重新定义了初始化方法<strong>init</strong>()，这样来增加一些控件，并且定义了这些控件的行为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>    <span class="hljs-built_in">super</span>(LoginScreen, self).__init__(**kwargs)<br></code></pre></td></tr></table></figure><p>一定要注意这里要加super，才能把现有的新初始化方法覆盖掉继承来的旧初始化方法。另外也要注意，这里调用super的时候没有省略掉**kwargs，这是一种好习惯。</p><p>然后继续往下看：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Python">self.cols = <span class="hljs-number">2</span><br>self.add_widget(Label(text=<span class="hljs-string">&#x27;User Name&#x27;</span>))<br>self.username = TextInput(multiline=<span class="hljs-literal">False</span>)<br>self.add_widget(self.username)<br>self.add_widget(Label(text=<span class="hljs-string">&#x27;password&#x27;</span>))<br>self.password = TextInput(password=<span class="hljs-literal">True</span>, multiline=<span class="hljs-literal">False</span>)<br>self.add_widget(self.password)<br></code></pre></td></tr></table></figure><p>上面的代码中，我们让GridLayout来管理子控件，把子控件设置为两栏，然后加上用户名和密码的Label字符显示控件和TextInput字符输入控件。</p><p>运行上面的代码，得到的窗口效果大概如下图：</p><p><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/guide_customize_step1.png" alt="img"></p><p>尝试着重新缩放一下窗口大小，你会发现上面的控件会相对整个窗口的尺寸而自行调整大小，并不需要人为去操作了。这是因为这些控件都使用了默认的尺寸。</p><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p><a href="https://kivy.org/docs/guide/environment.html">英文原文</a></p><p>Kivy的初始化和很多行为都可以通过各种环境变量来控制。</p><p>例如，若要严格设定用PIL进行文本渲染，可以通过如下方式来实现：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">$ KIVY_TEXT=pil python main.py<br></code></pre></td></tr></table></figure><p>(译者注：PIL，Python Imaging Library, Python 下常用的绘图库)</p><p>所有的这些环境变量的修改设定都需要在导入Kivy之前进行，具体如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br>os.environ[<span class="hljs-string">&#x27;KIVY_TEXT&#x27;</span>] = <span class="hljs-string">&#x27;pil&#x27;</span><br><span class="hljs-keyword">import</span> kivy<br></code></pre></td></tr></table></figure><h2 id="路径控制"><a href="#路径控制" class="headerlink" title="路径控制"></a>路径控制</h2><ul><li>从Kivy1.0.7版本开始提供</li></ul><p>You can control the default directories where config files, modules and kivy data are located.</p><p>Kivy的配置文件、模块以及数据存储的默认目录，都可手动设定所在位置。</p><blockquote><p>KIVY_DATA_DIR</p></blockquote><p>这个是Kivy的数据目录，默认值为&#x2F;data 。</p><blockquote><p>KIVY_MODULES_DIR</p></blockquote><p>这个是Kivy的模块目录，默认值为&#x2F;modules 。</p><blockquote><p>KIVY_HOME</p></blockquote><p>这个是Kivy的HOME目录，该目录是用来存放本地配置文件的，必须是一个可以写入的位置。对应不同系统也有不同位置：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">* </span>Desktop: /.kivy<br><span class="hljs-bullet">* </span>Android: /.kivy<br><span class="hljs-bullet">* </span>iOS: /Documents/.kivy<br></code></pre></td></tr></table></figure><ul><li>从Kivy1.9.0版本开始提供</li></ul><blockquote><p>KIVY_SDL2_PATH</p></blockquote><p>这个变量若设定了，编译Kivy的时候就会使用该位置的SDL2库文件，而不再使用系统的库文件。在环境变量PATH的开头部位就要设定好这个变量，这样在运行一个Kivy应用的时候才能也使用相同的SDL2库文件。</p><ul><li>从Kivy1.9.0版本开始提供</li></ul><h4 id="特别注意"><a href="#特别注意" class="headerlink" title="特别注意"></a>特别注意</h4><p>刚刚这个SDL2路径是用来编译Kivy的。运行程序的话就用不着了。</p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><blockquote><p>KIVY_USE_DEFAULTCONFIG</p></blockquote><p>若设定了此环境变量，Kivy会读取制定的配置文件。</p><blockquote><p>KIVY_NO_CONFIG</p></blockquote><p>若设定了此环境变量，Kivy将不会读取也不会写入任何配置文件。也适用于用户配置文件夹的位置。（译者注：这句话我还没弄明白，因为没有这样尝试。）</p><blockquote><p>KIVY_NO_FILELOG</p></blockquote><p>若设定了此环境变量，日志将不再输出到文件内。</p><blockquote><p>KIVY_NO_CONSOLELOG</p></blockquote><p>若设定了此环境变量，日志将不再输出到控制台。</p><blockquote><p>KIVY_NO_ARGS</p></blockquote><p>若设定了此环境变量，命令行传递的参数将不会被Kivy解析和使用。也就是说，可以不用 – 定义符，就能随便创建一个使用自己参数的脚本或者应用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br>os.environ[<span class="hljs-string">&quot;KIVY_NO_ARGS&quot;</span>] = <span class="hljs-string">&quot;1&quot;</span><br><span class="hljs-keyword">import</span> kivy<br></code></pre></td></tr></table></figure><ul><li>从Kivy1.9.0版本开始提供</li></ul><h2 id="限定Kivy-core核心，使用特定版本"><a href="#限定Kivy-core核心，使用特定版本" class="headerlink" title="限定Kivy.core核心，使用特定版本"></a>限定Kivy.core核心，使用特定版本</h2><p>Kivy.core会尝试使用所在平台的最优实现。如果要测试或者定制安装，你可能要把选择器设定为某个特定版本的kivy.core。</p><blockquote><p>KIVY_WINDOW</p></blockquote><p>这一变量是用来设定如何创建窗口，可用值：sdl2, pygame, x11, egl_rpi</p><blockquote><p>KIVY_TEXT</p></blockquote><p>这一变量是用来设定如何渲染文本，可用值：sdl2, pil, pygame, sdlttf</p><blockquote><p>KIVY_VIDEO</p></blockquote><p>这一变量是用来设定如何渲染视频，可用值：pygst, gstplayer, pyglet, ffpyplayer, ffmpeg, gi, null</p><blockquote><p>KIVY_AUDIO</p></blockquote><p>这一变量是用来设定如何播放声音，可用值：sdl2, gstplayer, pygst, ffpyplayer, pygame, gi, avplayer</p><blockquote><p>KIVY_IMAGE</p></blockquote><p>这一变量是用来设定如何读取图像，可用值：sdl2, pil, pygame, imageio, tex, dds, gif</p><blockquote><p>KIVY_CAMERA</p></blockquote><p>这一变量是用来设定如何读取摄像头，可用值：videocapture, avfoundation, pygst, opencv</p><blockquote><p>KIVY_SPELLING</p></blockquote><p>这一变量是用来设定拼写，可用值： enchant, osxappkit</p><blockquote><p>KIVY_CLIPBOARD</p></blockquote><p>这一变量是用来设定剪切板管理组件，可用值：sdl2, pygame, dummy, android</p><h2 id="设置单位"><a href="#设置单位" class="headerlink" title="设置单位"></a>设置单位</h2><blockquote><p>KIVY_DPI</p></blockquote><p>这个是用来设定Metrics.dpi的dpi值的。</p><ul><li>从Kivy1.4.0版本开始提供</li></ul><blockquote><p>KIVY_METRICS_DENSITY</p></blockquote><p>这个是用来设定Metrics.density，像素密度。</p><ul><li>从Kivy1.5.0版本开始提供</li></ul><blockquote><p>KIVY_METRICS_FONTSCALE</p></blockquote><p>这个是用来设定Metrics.fontscale，字体大小。</p><ul><li>从Kivy1.5.0版本开始提供</li></ul><h2 id="图形输出"><a href="#图形输出" class="headerlink" title="图形输出"></a>图形输出</h2><blockquote><p>KIVY_GL_BACKEND</p></blockquote><p>此变量用于设定使用的OpenGL后端，更多细节参考<a href="http://kivy.org/docs/api-kivy.graphics.cgl.html#module-kivy.graphics.cgl">cgl</a>.</p><blockquote><p>KIVY_GL_DEBUG</p></blockquote><p>此变量用于设定是否对OpenGL调用进行日志记录，更多细节参考<a href="http://kivy.org/docs/api-kivy.graphics.cgl.html#module-kivy.graphics.cgl">cgl</a>.</p><blockquote><p>KIVY_GRAPHICS</p></blockquote><p>此变量用于设定是否使用OpenGL ES2，更多细节参考<a href="http://kivy.org/docs/api-kivy.graphics.cgl.html#module-kivy.graphics.cgl">cgl</a>.</p><blockquote><p>KIVY_GLES_LIMITS</p></blockquote><p>此变量用于设定是否强制设定GLES2（默认值为启用，设置为1）。如果设定为false，Kivy将不再兼容GLES2。（译者注：这部分我不懂，就直接生硬翻译了原文，建议大家参考一下原文去理解。）如果设置为true，可能有下表中所示的潜在的不兼容情况：</p><table><thead><tr><th>Mesh indices</th><th align="center">If true, the number of indices in a mesh is limited to 65535</th></tr></thead><tbody><tr><td>Texture blit</td><td align="center">When blitting to a texture, the data (color and buffer) format must be the same format as the one used at the texture creation. On desktop, the conversion of different color is correctly handled by the driver, while on Android, most of devices fail to do it. Ref: <a href="https://github.com/kivy/kivy/issues/1600">https://github.com/kivy/kivy/issues/1600</a></td></tr></tbody></table><ul><li>从Kivy1.8.1版本开始提供</li></ul><blockquote><p>KIVY_BCM_DISPMANX_ID</p></blockquote><p>此变量是针对Raspberry Pi树莓派平台的，用于设定所选择的视频输出端口。默认值为0，下面列表中是在vc_dispmanx_types.h这个头文件中存储的可供选择的变量值：</p><ul><li>0: DISPMANX_ID_MAIN_LCD</li><li>1: DISPMANX_ID_AUX_LCD</li><li>2: DISPMANX_ID_HDMI</li><li>3: DISPMANX_ID_SDTV</li><li>4: DISPMANX_ID_FORCE_LCD</li><li>5: DISPMANX_ID_FORCE_TV</li><li>6: DISPMANX_ID_FORCE_OTHER</li></ul><p>（译者注：上面0-6分别是不同的显示输出端口，相信很容易看懂，大家探索一下吧。）</p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><a href="https://kivy.org/docs/guide/config.html">英文原文</a></p><p>Kivy的配置文件是一个名为config.ini的文本，符合<a href="http://en.wikipedia.org/wiki/INI_file">标准INI格式</a>。</p><h2 id="找到配置文件位置"><a href="#找到配置文件位置" class="headerlink" title="找到配置文件位置"></a>找到配置文件位置</h2><p>Kivy的配置文件存放在环境变量KIVY_HOME所制定的位置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">KIVY_HOME&gt;/config.ini<br></code></pre></td></tr></table></figure><p>在桌面平台上，默认的位置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">HOME_DIRECTORY&gt;/.kivy/config.ini<br></code></pre></td></tr></table></figure><p>所以，假设你的用户名是“tito”，在各个操作系统下的配置文件位置则如下所示：</p><ul><li>Windows: <code>C:\Users\tito\.kivy\config.ini</code></li><li>OS X: <code>/Users/tito/.kivy/config.ini</code></li><li>Linux: <code>/home/tito/.kivy/config.ini</code></li></ul><p>（译者注：这里要注意，tito只是原文的一个示范，相当于张三李四这样，新手可别照着复制找不到，要用自己操作系统中具体的用户名。）</p><p>在Android系统中位置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">ANDROID_APP_PATH&gt;/.kivy/config.ini<br></code></pre></td></tr></table></figure><p>假如你的Kivy应用的包名称为“org.kivy.launcher”,那么该Kivy应用的配置文件位于:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">/data/data/org.kivy.launcher/files/.kivy/config.ini<br></code></pre></td></tr></table></figure><p>在iOS上Kivy的默认配置文件位于：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">HOME_DIRECTORY&gt;/Documents/.kivy/config.ini<br></code></pre></td></tr></table></figure><h2 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h2><p>有时候用户或者开发者可能需要针对特定的应用来修改配置，或者对Kivy的某个组件进行测试，比如输入模块之类的。这时候就可以用如下命令创建一份新的配置文件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.config <span class="hljs-keyword">import</span> Config<br>Config.read(file&gt;)<br><span class="hljs-comment"># set config</span><br>Config.write()<br></code></pre></td></tr></table></figure><p>有时候本地配置只有一个.ini文件还不够用，比如说可能你要单独使用某个garden、Kivy日志或者其他什么模块，这时候就要把KIVY_HOME这个环境变量进行修改了，指定到目标位置就行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br>os.environ[<span class="hljs-string">&#x27;KIVY_HOME&#x27;</span>] = folder&gt;<br></code></pre></td></tr></table></figure><p>还有一种思路，就是在运行Kivy应用之前，在终端中手动修改一下这个环境变量：</p><ol><li>Windows: <code>set KIVY_HOME=folder&gt;</code></li><li>Linux &amp; OSX: <code>export KIVY_HOME=folder&gt;</code></li></ol><p>在设置了KIVY_HOME之后，所指定的这个文件夹就会被当做默认的.kivy文件夹来用。</p><h2 id="详细理解配置项"><a href="#详细理解配置项" class="headerlink" title="详细理解配置项"></a>详细理解配置项</h2><p>在<a href="http://kivy.org/docs/api-kivy.config.html#module-kivy.config">kivy.config</a> 模块中可以看到全部的配置项的解释。</p><h1 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h1><p><a href="https://kivy.org/docs/guide/architecture.html">英文原文</a></p><p>本章我们将从软件工程的角度，来简单介绍一下Kivy的设计。这对于理解各个部分如何配合工作会有帮助。如果你只关注代码，可能有时候会遇到这样一种情况，就是你已经有了一个初步的想法了，但具体怎么去实现可能还是一头雾水，所以本章就针对这种情况，来更深入地讲解一下Kivy的一些基本思想。你也可以先跳过这一章，等以后再翻回来看，不过我们建议开发者还是先看一下这些内容比较好，起码可以快速略读一下有个印象。</p><p>Kivy包含的若干个模块，我们将对这些模块一一进行简要说明。下面这幅图是Kivy整个架构的概括图示：</p><p><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/architecture.png" alt="../_images/architecture.png"></p><h2 id="核心模块和输入模块"><a href="#核心模块和输入模块" class="headerlink" title="核心模块和输入模块"></a>核心模块和输入模块</h2><p>对理解Kivy的设计内涵，模块化和抽象化的思想是至关重要的。我们试图把各种基本的任务进行抽象，比如打开窗口、显示图像和文本、播放音频、从摄像头获取图像、拼写校正等等。我们将这些部分称为<strong>核心</strong>任务。这样也使得API接口用起来比较简单，扩展起来也容易。更重要的是，这种思路可以让Kivy应用在运行的时候，使用各个运行平台所提供的对应功能的API接口。例如，在苹果的MacOS操作系统、Linux操作系统和Windows操作系统中，就都有各自不同的原生API接口提供各种核心功能。所以就有一部分代码，调用这些不同接口中的某一个，一方面与操作系统进行通信，另一方面与Kivy进行交互，起到中间人的角色，我们称之为<strong>核心模块</strong>。针对不同的操作系统平台要使用各自对应的核心模块，这样的好处是达到一种均衡状态，既能够充分利用操作系统提供的功能，又能尽量提高开发效率。（译者注：我的理解是这样大家平时不用针对不同操作系统去学习和使用各自的API，而只要专心使用Kivy的核心模块进行调用就行了。）这也允许用户来自由选择，使用Kivy提供的核心模块，或者直接使用各个操作系统的API接口。此外，由于使用了各个平台所提供的链接库文件，我们大大减小了Kivy发型版本的体积，也使得打包发布更加容易。这有助于将Kivy应用移植到其他平台。比如Android平台上的Kivy应用就体现了这一特性的好处了。</p><p>在输入模块这部分，我们也遵循了同样的思路。<strong>输入模块</strong>，是一段代码，用于针对各种输入设备提供支持，比如苹果公司的Trackpad触摸板，TUIO多点触摸设备，或者是鼠标模拟器等等。如果你需要对某一种新的输入设备添加支持，只需要提供一个新的类，用这个类来读取输入设备的数据，然后传递给Kivy基本事件，就可以了。</p><h2 id="图形接口"><a href="#图形接口" class="headerlink" title="图形接口"></a>图形接口</h2><p>Kivy的图形接口是对OpenGL的抽象。在最底层，Kivy使用OpenGL的命令来进行硬件加速的图形绘制。不过写OpenGL的代码可还是挺复杂的，新手就更难以迅速掌握了。所以我们就提供了一系列的图形接口，利用这些接口可以很简单地进行图形绘制，这些接口中用到了例如画布Canvas、矩形Rectangle等几何概念，比OpenGL里面简单不少。</p><p>Kivy自带的所有控件，都使用了这个图形接口；出于性能的考虑，此图形接口是用C语言来实现的。</p><p>这个图形接口的另一个好处是可以对你代码中的绘图指令进行自动优化。这个很有用，尤其是在你对OpenGL的优化不太熟悉的情况下。这能让你的绘图代码更高效。</p><p>当然了，你也可以坚持使用原生的OpenGL命令。目前Kivy在所有操作系统平台上用的都是是OpenGL 2.0 ES (GLES2)，所以如果你希望保持跨平台的兼容性，我们建议你只是用GLES2兼容的函数。</p><h2 id="核心模块"><a href="#核心模块" class="headerlink" title="核心模块"></a>核心模块</h2><p>核心模块也就是kivy.core，这个包里面提供了常用的各种功能，比如：</p><ul><li><p>Clock</p><p>时钟类，可以用于安排计时器事件。同时支持一次性计时和周期性计时。</p></li><li><p>Cache</p><p>If you need to cache something that you use often, you can use our class for that instead of writing your own.</p><p>缓存类，如果有一些经常用到的数据需要缓存，就可以用这个类，而不用自己写了。</p></li><li><p>Gesture Detection</p><p>手势识别，这个可以用来识别各种划动行为，比如画个圆圈或者方块之类的。可以训练来识别你自己设计的图形。</p></li><li><p>Kivy Language</p><p>Kivy语言，这个是用来简洁高效地描述Kivy应用的用户界面的。</p></li><li><p>Properties</p><p>这里这些属性和Python语言中的属性不同。这里是我们专门写的一些类，通过用户界面描述来连接控件代码。</p></li></ul><h2 id="UIX（控件和布局）"><a href="#UIX（控件和布局）" class="headerlink" title="UIX（控件和布局）"></a>UIX（控件和布局）</h2><p>UIX用户界面模块，包含了常用的各种控件和布局，可以通过复用来快速构建用户界面。</p><ul><li><p>Widgets 控件</p><p>控件是各种用户界面元素，可以添加到程序中来提供各种功能。有的可见，有的不可见。文件浏览器，按钮、滑动页、列表等等，这都属于控件。控件接收动作事件。</p></li><li><p>Layouts 布局</p><p>布局是控件的排列方式。当然，你也可以自己自定义控件的位置，不过从我们提供的预设布局中选择一个来使用，会更方便很多。网格布局、箱式布局等等，都是布局了。你还可以试试复杂的多层网状布局。</p></li></ul><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><p>如果你用某一种现代的网络浏览器，并且通过一些附加组件对其进行定制，那么你应该就理解了我们提供的各种模块类的基本思想了。各种模块可以用来向Kivy程序中添加功能，即便原作者没有提供的功能也可以加进去了。</p><p>例如，有一个模块就能显示当前应用的FPS（Frame Per Second，每秒帧数，即帧率），然后还能统计一段时间的FPS变化。</p><p>你可以自己写各种模块添加到应用中。</p><h2 id="输入事件（Touches）"><a href="#输入事件（Touches）" class="headerlink" title="输入事件（Touches）"></a>输入事件（Touches）</h2><p>Kivy抽象了各种输入类型和输入设备，比如触控，鼠标按键，多点触摸等等。这些输入类型有一个共同点，就是都可以把各种输入事件映射成屏幕上对应的一种2D形态。（当然了，还有的输入设备就没法用2D形态来表示，比如通过加速度传感器来衡量设备倾斜角度等。这种情况就得另外考虑了。下面我们讨论的只是那些能用2D形态表示的输入事件，复杂的类型以后再说。）</p><p>这些输入类型，在Kivy中都用Touch()类的实例来表示。（请注意，这里可不仅仅是针对手指去触摸的那种touch，而是所有可以这样抽象表示的输入事件。这里用<strong>Touch</strong>只是为了方便而这么简称一下。就想象一下，这些<strong>Touches</strong>就是在用户界面或者显示屏上面的那些个<strong>点击行为</strong>。 ）Touch的实例或者对象，有三种状态。当这个Touch进入了其中的某一个状态，你的程序就会被告知此事件的发生。Touch的三种状态如下：</p><ul><li><p>Down 落下</p><p>处于落下状态，只能有一次，就是在发生Touch事件的初始时刻。</p></li><li><p>Move 移动</p><p>这个状态的时间无上限。在一个Touch的生命周期中可以没有这个状态。移动状态只发生在Touch的2D平面位置发生变化的情况下。</p></li><li><p>Up 抬起</p><p>A touch goes up at most once, or never. In practice you will almost always receive an up event because nobody is going to hold a finger on the screen for all eternity, but it is not guaranteed. If you know the input sources your users will be using, you will know whether or not you can rely on this state being entered.</p><p>一个Touch要么只能抬起一次，要么就不发生。而实际应用中你会经常遇到Up时间，因为没有人会一直把手指按到屏幕上，不过也有未必就绝对不会有这种情况。若事先知道用户用的输入设备，就可以确定能否完全依靠用户的输入状态。</p><p>（译者注：以手指触摸屏幕为例，只有开始接触的时候是Down手指落下这个状态，之后移动就是接下来的Move移动状态，手指抬起来的时候就是Up即抬起状态了；如果以鼠标左键点击为例，按下去左键的时候是Down，按住左键不放进行拖动就是Move，松开左键就是Up了。这段我特别解释一下，因为自己翻译的太生硬了。）</p></li></ul><h2 id="控件和事件调度"><a href="#控件和事件调度" class="headerlink" title="控件和事件调度"></a>控件和事件调度</h2><p>在图形化的软件开发语境下，<strong>控件</strong>这个词经常出现，一般是来描述程序中用于和用户进行交互的组件。在Kivy中，控件是用来接收各种输入事件的。所以并不一定非要在屏幕上能看得到。Kivy当中所有控件都以<strong>控件树</strong>的形式来管理，学过计算机科学中数据结构相关知识的话，就会意识到这是一种树形结构：一个控件可以有任意多个子控件，也可以没有子控件。<strong>根控件</strong>就只能有一个，处于树形结构的顶端，根控件不具有父控件，并且所有其他控件都是根控件的直接或者间接子控件（就像树根一样，所以叫根控件）。</p><p>当新的输入数据可用的时候，Kivy会针对每一个Touch发出一个事件。控件树种的根控件首先接收到这个事件。Touch的不同状态，on_touch_down, on_touch_move和on_touch_up （Down落下、Move移动和Up），会作为Touch的参数，提供给根控件，根控件会调用对应的事件Handler来作出反应。</p><p>包括根控件在内，控件树种的每个控件都可以有两种选择，处理该事件，或者将该事件传递下去。如果一个事件的Handler返回True，就意味着这个事件已经被接收并妥善处理。这个事件就也到此为止了。如果不是这样，事件的Handler会跳过此处的空间，调用父类中的对应事件的Handler实现，传递给该控件的子控件。这样的过程可以一路走到最基础的控件类Widget，在它的Touch事件Handler中，只是把Touch传递给子控件，而不进行其他的操作。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># This is analogous for move/up:</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_touch_down</span>(<span class="hljs-params">self, touch</span>):<br>    <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> self.children[:]:<br>        <span class="hljs-keyword">if</span> child.dispatch(<span class="hljs-string">&#x27;on_touch_down&#x27;</span>, touch):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p>说起来挺麻烦，看上去挺复杂，实际上要简单得多。下一章就会讲解如何使用这种特性来快速创建应用了。</p><p>经常有一种情况，就是你可能要让一个控件只在屏幕上某个特定的<strong>区域</strong>来监听Touch事件。这时候就可以使用控件的collide_point()方法来实现此目的。只需要把Touch的位置发给该方法，然后如果此位置位于<strong>监听区域</strong>则返回True，反之返回False。默认情况下，这个方法会监听屏幕上的一个矩形区域，根据控件的中心坐标（x &amp; y坐标系），以及空间尺寸（宽度和高度），不过你也可以用自己的类覆盖掉这一行为。</p><p>Title: Kivy Widgets Date: 2017-02-26 Category: Kivy Tags: Python,Kivy</p><h1 id="控件"><a href="#控件" class="headerlink" title="控件"></a>控件</h1><p><a href="https://kivy.org/docs/guide/widgets.html">英文原文</a></p><h2 id="控件简介"><a href="#控件简介" class="headerlink" title="控件简介"></a>控件简介</h2><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件<code>Widget</code></a>是 Kivy 图形界面中的基本元素。控件提供了一个<a href="https://kivy.org/docs/api-kivy.graphics.html#kivy.graphics.Canvas" title="kivy.graphics.Canvas">画布<code>Canvas</code></a>，这是用来在屏幕上进行绘制的。控件接收事件，并且对事件作出反应。想要对 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件<code>Widget</code></a>进行更深入的了解，可以去看看这个模块的文档。</p><h2 id="操作控件树"><a href="#操作控件树" class="headerlink" title="操作控件树"></a>操作控件树</h2><p>Kivy 以树的形式来组织控件。你的应用程序会有一个根控件，通常会含有若干的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>，这些子控件还可以有自己的子控件。一个控件的子控件会以 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children"><code>children</code></a>属性的形式表述，这个属性是 Kivy 中的一个<a href="https://kivy.org/docs/api-kivy.properties.html#kivy.properties.ListProperty" title="kivy.properties.ListProperty">列表属性 <code>ListProperty</code></a></p><p>可以用一下方法来操作控件树：</p><ul><li><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.add_widget" title="kivy.uix.widget.Widget.add_widget"><code>add_widget()</code></a>: 添加一个控件作为子控件；</li><li><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.remove_widget" title="kivy.uix.widget.Widget.remove_widget"><code>remove_widget()</code></a>: 从子控件列表中去掉一个控件；</li><li><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.clear_widgets" title="kivy.uix.widget.Widget.clear_widgets"><code>clear_widgets()</code></a>: 清空一个控件的所有子控件。</li></ul><p>例如下面的代码，就是在一个盒式布局 BoxLayout 中添加一个按钮：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">layout = <span class="hljs-built_in">BoxLayout</span>(<span class="hljs-attribute">padding</span>=&lt;span&gt;<span class="hljs-number">10</span>&lt;/span&gt;)<br><span class="hljs-selector-tag">button</span> = <span class="hljs-built_in">Button</span>(text=&lt;span&gt;<span class="hljs-string">&#x27;My first button&#x27;</span>&lt;/span&gt;)<br>layout<span class="hljs-selector-class">.add_widget</span>(button)<br></code></pre></td></tr></table></figure><p>这个按钮就添加到布局当中去了：按钮的 parent 属性会被设置为这个布局；这个按钮也会被添加到布局中的子控件列表。要把这个按钮从这个布局中删掉也很简单：</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">layout</span>.remove_widget(<span class="hljs-keyword">button</span>)<br></code></pre></td></tr></table></figure><p>移除了之后，这个按钮的 parent 属性就会被设置为 None，也会被从布局的子控件列表中移除。</p><p>要是想清空一个控件中的所有自科技，那就用 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.clear_widgets" title="kivy.uix.widget.Widget.clear_widgets"><code>clear_widgets()</code></a>方法就可以了：</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">layout.clear_widgets<span class="hljs-comment">()</span><br></code></pre></td></tr></table></figure><h4 id="特别注意-1"><a href="#特别注意-1" class="headerlink" title="特别注意"></a>特别注意</h4><p>千万别自己手动去操作子控件列表，除非你确定自己掌控得非常深入透彻。因为控件树是和绘图树联系在一起的。例如，如果你添加了一个控件到子控件列表，但没有添加这个新子控件的画布到绘图树上，那么就会出现这种情况：这个控件确实成了一个子控件，但是屏幕上不会显示出来。此外，如果你后续使用添加、移除、清空控件这些操作，可能还会遇到问题。</p><h2 id="遍历控件树"><a href="#遍历控件树" class="headerlink" title="遍历控件树"></a>遍历控件树</h2><p>控件类实例的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件<code>children</code></a>列表属性中包含了所有的子控件。所以可以用如下的方式来进行遍历：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">root = BoxLayout()<br><span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># ... add widgets to root ...&lt;/span&gt;</span><br><span class="hljs-variable">&lt;span&gt;</span>for<span class="hljs-variable">&lt;/span&gt;</span> child <span class="hljs-variable">&lt;span&gt;</span>in<span class="hljs-variable">&lt;/span&gt;</span> root.children:<br>    print(child)<br></code></pre></td></tr></table></figure><p>然而，这样的操作可得谨慎使用。如果你要用之前一节中提到的方法来修改这个子控件列表电话，请一定用下面这种方法来做一下备份：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-variable">&lt;span&gt;</span>for<span class="hljs-variable">&lt;/span&gt;</span> child <span class="hljs-variable">&lt;span&gt;</span>in<span class="hljs-variable">&lt;/span&gt;</span> root.children[:]:<br>    <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># manipulate the tree. For example here, remove all widgets that have a&lt;/span&gt;</span><br>    <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># width&lt;/span&gt;</span><br>    <span class="hljs-variable">&lt;span&gt;</span>if<span class="hljs-variable">&lt;/span&gt;</span> child.width  <span class="hljs-variable">&lt;span&gt;</span>100<span class="hljs-variable">&lt;/span&gt;</span>:<br>        root.remove_widget(child)<br></code></pre></td></tr></table></figure><p>默认情况下，控件是不会对子控件的尺寸&#x2F;位置进行改变的。<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置属性 <code>pos</code></a>是屏幕坐标系上的绝对值（除非你使用<a href="https://kivy.org/docs/api-kivy.uix.relativelayout.html#module-kivy.uix.relativelayout" title="kivy.uix.relativelayout">相对布局<code>relativelayout</code></a>，这个以后再说），而<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸属性 <code>size</code></a>就是一个绝对的尺寸大小。</p><h2 id="控件索引Z"><a href="#控件索引Z" class="headerlink" title="控件索引Z"></a>控件索引Z</h2><p>控件绘制的顺序，是基于各个控件在控件树中的位置。<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.add_widget" title="kivy.uix.widget.Widget.add_widget">添加控件方法 <code>add_widget</code></a> 可以接收一个索引参数，这样就能指定该新增控件在控件树中的位置。</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">root.add_widget(widget, <span class="hljs-keyword">index</span>)<br></code></pre></td></tr></table></figure><p>索引值小的控件会被绘制在索引值大的控件之上。一定要记住，默认值是 0 ，所以后添加的控件总会在所有控件的最顶层，除非指定了索引值。</p><h2 id="整理布局"><a href="#整理布局" class="headerlink" title="整理布局"></a>整理布局</h2><p><a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a>是一种特别的控件，它会控制自己子控件的尺寸和位置。有各种不同的布局，这些布局分别为子控件提供拜托你个的自动组织整理。这些布局使用<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint">尺寸推测 <code>size_hint</code></a>和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint">位置推测 <code>pos_hint</code></a>这两个属性来决定<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件<code>children</code></a>的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a> 和 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置<code>pos</code></a>。</p><p><strong>盒式布局 BoxLayout</strong>: 所有控件充满整个空间，以互相挨着的方块的方式来分布，横着或者竖着排列都可以。子控件的 size_hint 属性可以用来改变每个子控件的比例，也可以设置为固定尺寸。</p><p><img src="https://kivy.org/docs/_images/boxlayout1.gif" alt="../_images/boxlayout1.gif"> <img src="https://kivy.org/docs/_images/gridlayout1.gif" alt="../_images/gridlayout1.gif"> <img src="https://kivy.org/docs/_images/stacklayout1.gif" alt="../_images/stacklayout1.gif"> <img src="https://kivy.org/docs/_images/anchorlayout1.gif" alt="../_images/anchorlayout1.gif"><img src="https://kivy.org/docs/_images/floatlayout1.gif" alt="../_images/floatlayout1.gif"></p><p><strong>网格布局 GridLayout</strong>: 以一张网格的方式来安排控件。你必须指定好网格的维度，确定好分成多少格，这样 Kivy 才能计算出每个元素的尺寸并且确定如何安排这些元素的位置。</p><p><strong>栈状布局 StackLayout</strong>: 挨着放一个个控件，彼此邻近，在某一个维度上有固定大小，而使它们填充整个空间。 这适合用来显示相同预定义大小的子控件。</p><p><strong>锚式布局 AnchorLayout</strong>: 一种非常简单的布局，只关注子控件的位置。 将子控件放在布局的边界位置。 不支持size_hint。</p><p><strong>浮动布局 FloatLayout</strong>: 允许放置具任意位置和尺寸的子控件，可以是绝对尺寸，也可以是相对布局的相对尺寸。 默认的 size_hint（1，1）会让每个子控件都与整个布局一样大，所以如果你多个子控件就要修改这个值。可以把 size_hint 设置成 (None, None)，这样就可以使用 size 这个绝对尺寸属性。控件也支持 pos_hint，这个属性是一个 dict 词典，用来设置相对布局的位置。</p><p><strong>相对布局 RelativeLayout</strong>: 和浮动布局 FloatLayout 差不多，不同之处在于子控件的位置是相对于布局空间的，而不是相对于屏幕。</p><p>想要深入理解各种布局的话，可以仔细阅读各种文档。</p><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 和 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>:</p><ul><li><a href="https://kivy.org/docs/api-kivy.uix.floatlayout.html#module-kivy.uix.floatlayout" title="kivy.uix.floatlayout"><code>floatlayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout"><code>boxlayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.gridlayout.html#module-kivy.uix.gridlayout" title="kivy.uix.gridlayout"><code>gridlayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.stacklayout.html#module-kivy.uix.stacklayout" title="kivy.uix.stacklayout"><code>stacklayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.relativelayout.html#module-kivy.uix.relativelayout" title="kivy.uix.relativelayout"><code>relativelayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.anchorlayout.html#module-kivy.uix.anchorlayout" title="kivy.uix.anchorlayout"><code>anchorlayout</code></a></li></ul><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 是一个 <a href="https://kivy.org/docs/api-kivy.properties.html#kivy.properties.ReferenceListProperty" title="kivy.properties.ReferenceListProperty">引用列表属性 <code>ReferenceListProperty</code></a> ，包括 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 两个变量。接收的变量值是从0到1的各种数值，或者 None， 默认值为 (1, 1)。这表示如果控件处在布局之内，布局将会在两个方向分配全部尺寸（相对于布局大小）给该控件。</p><p>举个例子，设置<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 为 (0.5, 0.8)，就会给该<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件<code>Widget</code></a> 分配<a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a> 内50% 宽，80% 高的尺寸。</p><p>例如下面这个例子：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">BoxLayout:<br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span>&#x27;Button 1&#x27;<span class="hljs-variable">&lt;/span&gt;</span><br>        <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># default size_hint is 1, 1, we don&#x27;t need to specify it explicitly&lt;/span&gt;</span><br>        <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># however it&#x27;s provided here to make things clear&lt;/span&gt;</span><br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span><br></code></pre></td></tr></table></figure><p>加载 Kivy 目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">$KIVYDIR</span>/examples/demo/kivycatalog<br>python main.py<br></code></pre></td></tr></table></figure><p>把上面代码中的 $KIVYDIR 替换成你的 Kivy 安装位置。在左边点击标注有 Box Layout 的按钮。 然后将上面的代码粘贴到窗口右侧的编辑器内。</p><p><img src="https://kivy.org/docs/_images/size_hint[B].jpg" alt="../_images/size_hint[B].jpg"></p><p>然后你就可以看到上图这样的界面了，这个按钮 Button 会占据整个布局<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a>的 100%。</p><p>修改<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a>&#x2F;<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 为 .5 这就会把<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a> 调整为<a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a> 的50% <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a>&#x2F;<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.height" title="kivy.uix.widget.Widget.height">高度 <code>height</code></a>。</p><p><img src="https://kivy.org/docs/_images/size_hint[b_].jpg" alt="../_images/size_hint[b_].jpg"></p><p>这时候效果如上图所示，虽然我们已经同时指定了 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 和 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 为 .5，但似乎只有对 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 的修改起作用了。这是因为在<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout">盒式布局 <code>boxlayout</code></a>中，当<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#kivy.uix.boxlayout.BoxLayout.orientation" title="kivy.uix.boxlayout.BoxLayout.orientation"><code>orientation</code></a>被设置为竖直方向（vertical） 的时候，<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 由布局来控制，而如果<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#kivy.uix.boxlayout.BoxLayout.orientation" title="kivy.uix.boxlayout.BoxLayout.orientation"><code>orientation</code></a> 被设置为水平方向（horizontal）的时候， <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 由布局来控制，所以这些情况手动设定就无效了。 这些受控维度的尺寸，是根据<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a> 在 <a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout"><code>盒式布局 boxlayout</code></a>中的总编号来计算的。在上面的例子中，这个子控件的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 是受控的(.5&#x2F;.5 &#x3D; 1)。所以，这里控件就占据了上层布局的整个高度。</p><p>接下来咱们再添加一个<a href="https://kivy.org/docs/api-kivy.uix.button.html#kivy.uix.button.Button" title="kivy.uix.button.Button">按钮 <code>Button</code></a>到这个 <a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a>看看有什么效果。</p><p><img src="https://kivy.org/docs/_images/size_hint[bb].jpg" alt="../_images/size_hint[bb].jpg"></p><p><a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout">盒式布局 <code>boxlayout</code></a> 默认对其所有的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>分配了等大的空间。在咱们这个例子里面，比例是50-50，因为有两个<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>。那么接下来咱们就对其中的一个子控件设置一下 size_hint，然后看看效果怎么样。</p><p><img src="https://kivy.org/docs/_images/size_hint[oB].jpg" alt="../_images/size_hint[oB].jpg"></p><p>从上图可以看出，如果一个子控件有了一个指定的 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a>，这就会决定该<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a>使用<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout">盒式布局 <code>boxlayout</code></a>提供的空间中的多大比例，来作为自己的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a> 。在我们这个例子中，第一个<a href="https://kivy.org/docs/api-kivy.uix.button.html#kivy.uix.button.Button" title="kivy.uix.button.Button">按钮 <code>Button</code></a> 的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a>设置为了 .5。那么这个控件分配到的空间计算方法如下：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">first</span> child&#x27;s size_hint divided <span class="hljs-keyword">by</span><br><span class="hljs-keyword">first</span> child&#x27;s size_hint + <span class="hljs-keyword">second</span> child&#x27;s size_hint + ...n(no <span class="hljs-keyword">of</span> children)<br><br><span class="hljs-number">.5</span>/(<span class="hljs-number">.5</span>+<span class="hljs-number">1</span>) = <span class="hljs-number">.333</span>...<br></code></pre></td></tr></table></figure><p>盒式布局 BoxLayout 的剩余<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a>会分配给另外的一个<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>。在我们这个例子中，这就意味着第二个<a href="https://kivy.org/docs/api-kivy.uix.button.html#kivy.uix.button.Button" title="kivy.uix.button.Button">按钮 <code>Button</code></a> 会占据整个<a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a>的 66.66% <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a> 。</p><p>修改 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 探索一下来多适应一下吧。</p><p>如果你想要控制一个<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a>的绝对<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a> ，可以把<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a>&#x2F;<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a>当中的一个或者两个都设置成 None，这样的话该控件的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a> 和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.height" title="kivy.uix.widget.Widget.height">高度 <code>height</code></a>的属性值就会生效了。</p><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a> 是一个词典 dict，默认值是空。相比于<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a>，布局对<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>的处理方式有些不同，不过大体上你还是可以对<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos"><code>pos</code></a> 的各种属性设定某个值来设定<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a>在<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.parent" title="kivy.uix.widget.Widget.parent">父控件 <code>parent</code></a>中的相对位置（可以设定的属性包括：<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.x" title="kivy.uix.widget.Widget.x"><code>x</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.y" title="kivy.uix.widget.Widget.y"><code>y</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.right" title="kivy.uix.widget.Widget.right"><code>right</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.top" title="kivy.uix.widget.Widget.top"><code>top</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.center_x" title="kivy.uix.widget.Widget.center_x"><code>center_x</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.center_y" title="kivy.uix.widget.Widget.center_y"><code>center_y</code></a>）。</p><p>咱们用下面 kivycatalog 中的代码来可视化地理解一下<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">FloatLayout:<br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-string">&quot;We Will&quot;</span><span class="hljs-variable">&lt;/span&gt;</span><br>        pos: <span class="hljs-variable">&lt;span&gt;</span>100<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>100<span class="hljs-variable">&lt;/span&gt;</span><br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>.2<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>.4<span class="hljs-variable">&lt;/span&gt;</span><br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-string">&quot;Wee Wiill&quot;</span><span class="hljs-variable">&lt;/span&gt;</span><br>        pos: <span class="hljs-variable">&lt;span&gt;</span>200<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>200<span class="hljs-variable">&lt;/span&gt;</span><br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>.4<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>.2<span class="hljs-variable">&lt;/span&gt;</span><br><br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-string">&quot;ROCK YOU!!&quot;</span><span class="hljs-variable">&lt;/span&gt;</span><br>        pos_hint: &#123;<span class="hljs-variable">&lt;span&gt;</span>&#x27;x&#x27;<span class="hljs-variable">&lt;/span&gt;</span>: <span class="hljs-variable">&lt;span&gt;</span>.3<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>&#x27;y&#x27;<span class="hljs-variable">&lt;/span&gt;</span>: <span class="hljs-variable">&lt;span&gt;</span>.6<span class="hljs-variable">&lt;/span&gt;</span>&#125;<br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>.5<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>.2<span class="hljs-variable">&lt;/span&gt;</span><br></code></pre></td></tr></table></figure><p>这份代码的输出效果如下图所示：</p><p><img src="https://kivy.org/docs/_images/pos_hint.jpg" alt="../_images/pos_hint.jpg"></p><p>说了半天<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a>，你不妨自己试试探索一下 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>，来理解一下这个属性对控件位置的效果。</p><h2 id="给布局添加背景"><a href="#给布局添加背景" class="headerlink" title="给布局添加背景"></a>给布局添加背景</h2><p>关于布局，有一个问题经常被问道：</p><p>“怎么给一个布局添加背景图片&#x2F;颜色&#x2F;视频&#x2F;等等……”</p><p>本来默认的各种布局都是没有视觉呈现的：因为布局不像控件，布局是默认不含有绘图指令的。不过呢，还是你可以给一个布局实例添上绘图指令，也就可以添加一个彩色背景了：</p><p>在 Python 中的实现方法：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-variable">&lt;span&gt;</span>from<span class="hljs-variable">&lt;/span&gt;</span> kivy.graphics <span class="hljs-variable">&lt;span&gt;</span>import<span class="hljs-variable">&lt;/span&gt;</span> Color, Rectangle<br><br><span class="hljs-variable">&lt;span&gt;</span>with<span class="hljs-variable">&lt;/span&gt;</span> layout_instance.canvas.before:<br>    Color(<span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>) <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># green; colors range from 0-1 instead of 0-255&lt;/span&gt;</span><br>    self.rect = Rectangle(size=layout_instance.size,<br>                           pos=layout_instance.pos)<br></code></pre></td></tr></table></figure><p>然而很不幸，这样只能在布局的初始化位置以布局的初始尺寸绘制一个矩形。所以还要对布局的尺寸和位置变化进行监听，然后对矩形的尺寸位置进行更新，这样才能保证这个矩形一直绘制在布局的内部。可以用如下方式实现：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>with<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> layout_instance.canvas.before:<br>    Color(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>) <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># green; colors range from 0-1 instead of 0-255<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    self.rect = Rectangle(size=layout_instance.size,<br>                           pos=layout_instance.pos)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>update_rect<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(instance, value)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="hljs-keyword">instance</span>.rect.pos = <span class="hljs-keyword">instance</span>.pos<br>    <span class="hljs-keyword">instance</span>.rect.size = <span class="hljs-keyword">instance</span>.size<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># listen to size and position changes<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>layout_instance.bind(pos=update_rect, size=update_rect)<br></code></pre></td></tr></table></figure><p>在 kv 文件中：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">FloatLayout:<br>    canvas.before:<br>        Color:<br>            rgba: <span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span><br>        Rectangle:<br>            <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># self here refers to the widget i.e BoxLayout&lt;/span&gt;</span><br>            pos: self.pos<br>            size: self.size<br></code></pre></td></tr></table></figure><p>上面的 Kv 文件中的生命，就建立了一个隐含的绑定：上面 Kv 代码中的最后两行保证了矩形的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置 <code>pos</code></a>和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a>会在<a href="https://kivy.org/docs/api-kivy.uix.floatlayout.html#module-kivy.uix.floatlayout" title="kivy.uix.floatlayout">浮动布局 <code>floatlayout</code></a>的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置 <code>pos</code></a>发生变化的时候进行更新。</p><p>接下来咱们把上面的代码片段放进 Kivy 应用里面。</p><p>纯 Python 方法：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.graphics <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Color, Rectangle<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.button <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Button<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>__init__<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, **kwargs)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># make sure we aren&#x27;t overriding any important functionality<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        super(RootWidget, self).__init_<span class="hljs-number">_</span>(**kwargs)<br><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># let&#x27;s add a Widget to this layout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self.add_widget(<br>            Button(<br>                <span class="hljs-type">text</span>=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&quot;Hello World&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>                size_hint=(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>),<br>                pos_hint=&#123;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_x&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_y&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>&#125;))<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self<span class="hljs-built_in">.root</span> =<span class="hljs-built_in"> root</span> = RootWidget()<br>       <span class="hljs-built_in"> root</span>.bind(size=self._update_rect, pos=self._update_rect)<br><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>with<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span>.canvas.before:<br>            Color(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># green; colors range from 0-1 not 0-255<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>            self.rect = Rectangle(size<span class="hljs-built_in">=root</span>.size, pos<span class="hljs-built_in">=root</span>.pos)<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>_update_rect<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, instance, value)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self.rect.pos = <span class="hljs-keyword">instance</span>.pos<br>        self.rect.size = <span class="hljs-keyword">instance</span>.size<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>使用 Kv 语言：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><span class="hljs-built_in"></span><br><span class="hljs-built_in">root</span> = Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml">FloatLayout:</span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        Color:</span><br><span class="language-xml">            rgba: 0, 1, 0, 1</span><br><span class="language-xml">        Rectangle:</span><br><span class="language-xml">            # self here refers to the widget i.e FloatLayout</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml">    Button:</span><br><span class="language-xml">        text: &#x27;Hello World!!&#x27;</span><br><span class="language-xml">        size_hint: .5, .5</span><br><span class="language-xml">        pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>:.<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>上面这两个应用的效果都如下图所示： <img src="https://kivy.org/docs/_images/layout_background.png" alt="../_images/layout_background.png"></p><h3 id="给自定义布局规则-类增加背景色"><a href="#给自定义布局规则-类增加背景色" class="headerlink" title="给自定义布局规则&#x2F;类增加背景色"></a>给<strong>自定义布局规则&#x2F;类</strong>增加背景色</h3><p>上面那一段中咱们对布局实例增加背景的方法，如果用到很多歌布局里面，那就很快变得特别麻烦了。要解决这种需求，就可以基于布局类 Layout 创建一个自定义的布局子类，给自定义的这个类增加一个背景。</p><p>使用 Python：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.graphics <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Color, Rectangle<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.boxlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> BoxLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.image <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> AsyncImage<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(BoxLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>CustomLayout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>__init__<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, **kwargs)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># make sure we aren&#x27;t overriding any important functionality<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        super(CustomLayout, self).__init_<span class="hljs-number">_</span>(**kwargs)<br><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>with<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> self.canvas.before:<br>            Color(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># green; colors range from 0-1 instead of 0-255<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>            self.rect = Rectangle(size=self.size, pos=self.pos)<br><br>        self.bind(size=self._update_rect, pos=self._update_rect)<br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>_update_rect<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, instance, value)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self.rect.pos = <span class="hljs-keyword">instance</span>.pos<br>        self.rect.size = <span class="hljs-keyword">instance</span>.size<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>       <span class="hljs-built_in"> root</span> = RootWidget()<br>        c = CustomLayout()<br>       <span class="hljs-built_in"> root</span>.add_widget(c)<br>        c.add_widget(<br>            AsyncImage(<br>                source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&quot;http://www.everythingzoomer.com/wp-content/uploads/2013/01/Monday-joke-289x277.jpg&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>                size_hint= (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>),<br>                pos_hint=&#123;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_x&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_y&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>&#125;))<br>       <span class="hljs-built_in"> root</span>.add_widget(AsyncImage(source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;http://www.stuffistumbledupon.com/wp-content/uploads/2012/05/Have-you-seen-this-dog-because-its-awesome-meme-puppy-doggy.jpg&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>))<br>        c = CustomLayout()<br>        c.add_widget(<br>            AsyncImage(<br>                source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&quot;http://www.stuffistumbledupon.com/wp-content/uploads/2012/04/Get-a-Girlfriend-Meme-empty-wallet.jpg&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>                size_hint= (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>),<br>                pos_hint=&#123;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_x&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_y&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>&#125;))<br>       <span class="hljs-built_in"> root</span>.add_widget(c)<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>使用 Kv 语言：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.boxlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> BoxLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><br>Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>CustomLayout<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        Color:</span><br><span class="language-xml">            rgba: 0, 1, 0, 1</span><br><span class="language-xml">        Rectangle:</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>RootWidget<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    CustomLayout:</span><br><span class="language-xml">        AsyncImage:</span><br><span class="language-xml">            source: &#x27;http://www.everythingzoomer.com/wp-content/uploads/2013/01/Monday-joke-289x277.jpg&#x27;</span><br><span class="language-xml">            size_hint: 1, .5</span><br><span class="language-xml">            pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>:.<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">    AsyncImage:</span><br><span class="language-xml">        source: &#x27;http://www.stuffistumbledupon.com/wp-content/uploads/2012/05/Have-you-seen-this-dog-because-its-awesome-meme-puppy-doggy.jpg&#x27;</span><br><span class="language-xml">    CustomLayout</span><br><span class="language-xml">        AsyncImage:</span><br><span class="language-xml">            source: &#x27;http://www.stuffistumbledupon.com/wp-content/uploads/2012/04/Get-a-Girlfriend-Meme-empty-wallet.jpg&#x27;</span><br><span class="language-xml">            size_hint: 1, .5</span><br><span class="language-xml">            pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>:.<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(BoxLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>CustomLayout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> RootWidget()<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>上面这两个应用的效果都如下图所示：</p><p><img src="https://kivy.org/docs/_images/custom_layout_background.png" alt="../_images/custom_layout_background.png"></p><p>在自定义布局类中定义了背景之后，就是要确保在自定义布局的各个实例中使用到这个新特性。</p><p>首先，要在<strong>全局上</strong>增加一个图形或者颜色给内置的 Kivy 布局的背景，这就需要将所用布局的默认 Kv 规则进行覆盖。</p><p>就拿网格布局 GridLayout 举例吧：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>GridLayout<span class="hljs-symbol">&amp;gt;</span><br>    canvas.before:<br>        Color:<br>            rgba: <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        BorderImage:<br>            source: <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;../examples/widgets/sequenced_images/data/images/button_white.png&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            pos: self.pos<br>            size: self.size<br></code></pre></td></tr></table></figure><p>接下来把这段代码放到一个 Kivy 应用里面：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><br>Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>GridLayout<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        BorderImage:</span><br><span class="language-xml">            # BorderImage behaves like the CSS BorderImage</span><br><span class="language-xml">            border: 10, 10, 10, 10</span><br><span class="language-xml">            source: &#x27;../examples/widgets/sequenced_images/data/images/button_white.png&#x27;</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>RootWidget<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    GridLayout:</span><br><span class="language-xml">        size_hint: .9, .9</span><br><span class="language-xml">        pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>: .<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">        rows:1</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;I don&#x27;t suffer from insanity, I enjoy every minute of it&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;top&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;When I was born I was so surprised; I didn&#x27;t speak for a year and a half.&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;middle&#x27;</span><br><span class="language-xml">            halign: &#x27;center&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;A consultant is someone who takes a subject you understand and makes it sound confusing&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;bottom&#x27;</span><br><span class="language-xml">            halign: &#x27;justify&#x27;</span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> RootWidget()<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>效果大概如下图所示：</p><p><img src="https://kivy.org/docs/_images/global_background.png" alt="../_images/global_background.png"></p><p>我们已经对网格布局 GridLayout 类的规则进行了覆盖，所以接下来在应用中使用这个类就都会显示那幅图片了。</p><p><strong>动画背景</strong>怎么弄呢？</p><p>就像在矩形Rectangle&#x2F; 边界图像BorderImage &#x2F;椭圆Ellipse&#x2F;等里面添加设置绘图指令一样，可以用一个特定的纹理属性 texture ：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Rectangle:<br>    texture: <span class="hljs-keyword">reference</span> <span class="hljs-keyword">to</span> a texture<br></code></pre></td></tr></table></figure><p>可以用下面的代码实现一个动画背景：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.gridlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> GridLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.image <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Image<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.properties <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> ObjectProperty<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><br>Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>CustomLayout<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        BorderImage:</span><br><span class="language-xml">            # BorderImage behaves like the CSS BorderImage</span><br><span class="language-xml">            border: 10, 10, 10, 10</span><br><span class="language-xml">            texture: self.background_image.texture</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>RootWidget<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    CustomLayout:</span><br><span class="language-xml">        size_hint: .9, .9</span><br><span class="language-xml">        pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>: .<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">        rows:1</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;I don&#x27;t suffer from insanity, I enjoy every minute of it&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;top&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;When I was born I was so surprised; I didn&#x27;t speak for a year and a half.&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;middle&#x27;</span><br><span class="language-xml">            halign: &#x27;center&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;A consultant is someone who takes a subject you understand and makes it sound confusing&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;bottom&#x27;</span><br><span class="language-xml">            halign: &#x27;justify&#x27;</span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>CustomLayout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(GridLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    background_image = ObjectProperty(<br>        Image(<br>            source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;../examples/widgets/sequenced_images/data/images/button_white_animated.zip&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>            anim_delay=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>))<br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> RootWidget()<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>要理解这里到底发生了什么，得从第 13 行开始看：</p><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs glsl"><span class="hljs-built_in">texture</span>: self.background_image.<span class="hljs-built_in">texture</span><br></code></pre></td></tr></table></figure><p>这里是指定让边界图像 BorderImage 的纹理属性在背景图像 background_image 的纹理属性发生更新的时候进行同步更新。背景图像 background_image 属性的定义是在第 40 行：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">background_image</span> = ObjectProperty(...<br></code></pre></td></tr></table></figure><p>这一句代码是将背景图像 background_image 设置成一个<a href="https://kivy.org/docs/api-kivy.properties.html#kivy.properties.ObjectProperty" title="kivy.properties.ObjectProperty">对象属性 <code>ObjectProperty</code></a>，这样就可以在其中添加一个<a href="https://kivy.org/docs/api-kivy.uix.image.html#kivy.uix.image.Image" title="kivy.uix.image.Image">图形控件 <code>Image</code></a>。图像控件有一个纹理属性（texture property）；在前面的 self.background_image.texture 这句代码中，就是建立了一个名为 texture 的到这个属性的引用。<a href="https://kivy.org/docs/api-kivy.uix.image.html#kivy.uix.image.Image" title="kivy.uix.image.Image">图形控件 <code>Image</code></a> 支持动画（animation）：随着动画的改变，图像的纹理会同步更新，在这个过程中，边界图像 BorderImage 指令的 texture 纹理属性也会同步更新。</p><p>（译者注：texture of BorderImage instruction，这里我对 instruction 的翻译应该是不太对的，不过我还没理清楚该怎么表述。）</p><p>也可以直接传递自定义数据到纹理属性 texture。更多细节可以参考<a href="https://kivy.org/docs/api-kivy.graphics.texture.html#kivy.graphics.texture.Texture" title="kivy.graphics.texture.Texture">纹理 <code>Texture</code> 的文档</a>。</p><h2 id="网状布局"><a href="#网状布局" class="headerlink" title="网状布局"></a>网状布局</h2><p>嗯，看看这个过程如何扩展是很有趣的。</p><h2 id="尺寸和位置度量"><a href="#尺寸和位置度量" class="headerlink" title="尺寸和位置度量"></a>尺寸和位置度量</h2><p>Kivy 的默认长度单位是像素 pixel，所有的尺寸和位置都用这个单位来表达。你也可以用其他单位来衡量，在跨平台多种设备的时候，这有助于实现更好的连续性体验（这些设备会把尺寸自动转换到像素）。</p><p>可用单位包括 <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.pt" title="kivy.metrics.pt"><code>pt</code></a>， <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.mm" title="kivy.metrics.mm"><code>mm</code></a>，<a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.cm" title="kivy.metrics.cm"><code>cm</code></a>, <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.inch" title="kivy.metrics.inch"><code>inch</code></a>， <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.dp" title="kivy.metrics.dp"><code>dp</code></a> and <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.sp" title="kivy.metrics.sp"><code>sp</code></a>。可以在<a href="https://kivy.org/docs/api-kivy.metrics.html#module-kivy.metrics" title="kivy.metrics">度量文档 <code>metrics</code></a> 中了解更多相关内容。</p><p>你还可以探索一下<a href="https://kivy.org/docs/api-kivy.modules.screen.html#module-kivy.modules.screen" title="kivy.modules.screen">屏幕模块 <code>screen</code></a>的用法，这个可以模拟出不同设备的屏幕，供测试应用。</p><h2 id="使用屏幕管理器进行屏幕分割"><a href="#使用屏幕管理器进行屏幕分割" class="headerlink" title="使用屏幕管理器进行屏幕分割"></a>使用屏幕管理器进行屏幕分割</h2><p>如果你的应用程序要包含多个程序，那可能就需要从一个<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.Screen" title="kivy.uix.screenmanager.Screen">屏幕 <code>Screen</code></a>到另一个<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.Screen" title="kivy.uix.screenmanager.Screen">屏幕 <code>Screen</code></a>提供一个导航的通道。幸运的是，正好有一个<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.ScreenManager" title="kivy.uix.screenmanager.ScreenManager">屏幕管理器类<code>ScreenManager</code></a>，这个类允许你来定义分开的各个屏幕，设置屏幕管理器的<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.TransitionBase" title="kivy.uix.screenmanager.TransitionBase"><code>TransitionBase</code></a>就可以实现从一个屏幕到另一个屏幕的跳转导航。</p><h1 id="图形"><a href="#图形" class="headerlink" title="图形"></a>图形</h1><p><a href="https://kivy.org/docs/guide/graphics.html">英文原文</a></p><h2 id="译者前言"><a href="#译者前言" class="headerlink" title="译者前言"></a>译者前言</h2><p>这一章节比前两章节简单很多，翻译的也比较顺了。</p><h2 id="简介Canvas"><a href="#简介Canvas" class="headerlink" title="简介Canvas"></a>简介Canvas</h2><p>Kivy中控件图形呈现是使用Canvas完成的，可以将其看作一个无限的绘图板，也是一组绘图指令。有很多种绘图指令都可以应用或者添加到你的Canvas伤，不过总体上分为两类：</p><ul><li><a href="https://kivy.org/docs/api-kivy.graphics.context_instructions.html#module-kivy.graphics.context_instructions"><code>context instructions</code>环境指令</a></li><li><a href="https://kivy.org/docs/api-kivy.graphics.vertex_instructions.html#module-kivy.graphics.vertex_instructions"><code>vertex instructions</code>顶点指令</a></li></ul><p><a href="https://kivy.org/docs/api-kivy.graphics.context_instructions.html#module-kivy.graphics.context_instructions"><code>context instructions</code>环境指令</a>不绘制任何图形，但会改变<a href="https://kivy.org/docs/api-kivy.graphics.vertex_instructions.html#module-kivy.graphics.vertex_instructions"><code>vertex instructions</code>顶点指令</a>的绘制结果。</p><p>Canvas都包含两个指令分支。分别是<a href="https://kivy.org/docs/api-kivy.graphics.html#kivy.graphics.Canvas.before"><code>canvas.before</code></a>和<a href="https://kivy.org/docs/api-kivy.graphics.html#kivy.graphics.Canvas.after"><code>canvas.after</code></a> 这两种指令群。这两组指令分别在<code>Canvas</code>图形绘制前后执行。 绘制前的会被绘制的图形覆盖掉，绘制后的会覆盖在图形上层。这些指令都在用户对它们读取之后才会被创建。</p><p>要对一个控件添加Canvas绘图指令，需要使用Canvas环境指令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWidget</span>(<span class="hljs-title class_ inherited__">Widget</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(MyWidget, self).__init__(**kwargs)<br>        <span class="hljs-keyword">with</span> self.canvas:<br>            <span class="hljs-comment"># add your instruction for main canvas here</span><br>            <span class="hljs-comment"># 这里是增加一个座位主绘图的指令</span><br><br>        <span class="hljs-keyword">with</span> self.canvas.before:<br>            <span class="hljs-comment"># you can use this to add instructions rendered before</span><br>            <span class="hljs-comment"># 这里可以在绘图之前添加指令</span><br><br>        <span class="hljs-keyword">with</span> self.canvas.after:<br>            <span class="hljs-comment"># you can use this to add instructions rendered after</span><br>            <span class="hljs-comment"># 这里可以在绘图之后添加指令</span><br></code></pre></td></tr></table></figure><h2 id="环境指令"><a href="#环境指令" class="headerlink" title="环境指令"></a>环境指令</h2><p>环境指令是用于操作opengl环境。 可以旋转，翻译和缩放画布。还可以附加纹理或更改绘图颜色。下面这段代码里面的是最常用到的更改颜色的指令，其他的环境指令也都很有用处：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">with</span> self.canvas.before:<br>    Color(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">.4</span>, mode=<span class="hljs-string">&#x27;rgb&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="绘图指令"><a href="#绘图指令" class="headerlink" title="绘图指令"></a>绘图指令</h2><p>绘图指令可简可繁，最简单的比如画一个多边形，更复杂的比如绘制网格或者贝塞尔曲线都可以：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">with</span> self.canvas:<br>   <span class="hljs-comment"># draw a line using the default color</span><br>   <span class="hljs-comment"># 用默认颜色画一条线</span><br>   Line(points=(x1, y1, x2, y2, x3, y3))<br><br>   <span class="hljs-comment"># lets draw a semi-transparent red square</span><br>   <span class="hljs-comment"># 接下来画一个半透明的红方块</span><br>   Color(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">.5</span>, mode=<span class="hljs-string">&#x27;rgba&#x27;</span>)<br>   Rectangle(pos=self.pos, size=self.size)<br></code></pre></td></tr></table></figure><h2 id="操作指令"><a href="#操作指令" class="headerlink" title="操作指令"></a>操作指令</h2><p>有时候可能需要把之前添加到Canvas绘图上的指令进行更改或者删除，这可以有很多种办法，要根据具体需求来选择：</p><p>可以给指令创建一个引用然后对其进行更新：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWidget</span>(<span class="hljs-title class_ inherited__">Widget</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(MyWidget, self).__init__(**kwargs)<br>        <span class="hljs-keyword">with</span> self.canvas:<br>            self.rect = Rectangle(pos=self.pos, size=self.size)<br><br>        self.bind(pos=self.update_rect)<br>        self.bind(size=self.update_rect)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_rect</span>(<span class="hljs-params">self, *args</span>):<br>        self.rect.pos = self.pos<br>        self.rect.size = self.size<br></code></pre></td></tr></table></figure><p>或者也可以清空Canvas画布然后重新画：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWidget</span>(<span class="hljs-title class_ inherited__">Widget</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(MyWidget, self).__init__(**kwargs)<br>        self.draw_my_stuff()<br><br>        self.bind(pos=self.draw_my_stuff)<br>        self.bind(size=self.draw_my_stuff)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_my_stuff</span>(<span class="hljs-params">self</span>):<br>        self.canvas.clear()<br><br>        <span class="hljs-keyword">with</span> self.canvas:<br>            self.rect = Rectangle(pos=self.pos, size=self.size)<br></code></pre></td></tr></table></figure><p>要注意更新指令的方法是更好的选择，因为这样减少了开销，并且避免了创建新指令。</p>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu部署记录</title>
    <link href="/2024/07/09/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/"/>
    <url>/2024/07/09/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="ubuntu-20-04-6-live-server-amd64"><a href="#ubuntu-20-04-6-live-server-amd64" class="headerlink" title="ubuntu-20.04.6-live-server-amd64"></a>ubuntu-20.04.6-live-server-amd64</h1><h2 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h2><h3 id="1-制作一个U盘启动盘"><a href="#1-制作一个U盘启动盘" class="headerlink" title="1. 制作一个U盘启动盘"></a>1. 制作一个U盘启动盘</h3><p><strong>Ubuntu</strong> iso<strong>下载地址</strong></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/">清华大学开源软件镜像站</a></p><p><a href="https://cn.ubuntu.com/download">官网下载</a></p><p><strong>制作工具下载</strong></p><p><del>推荐使用rufus，因为免费</del></p><p><a href="https://rufus.org.cn/">安装地址</a></p><p>准备一个U盘，插上U盘，打开rufus，选择镜像文件，具体配置如下：</p><p><img src="/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/image-20240709200710588.png" alt="image-20240709200710588"></p><p>然后点击开始就行了</p><p>等U盘制作完成就可以开始下一步了</p><h3 id="2-设置开机启动项"><a href="#2-设置开机启动项" class="headerlink" title="2. 设置开机启动项"></a>2. 设置开机启动项</h3><h4 id="对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下："><a href="#对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下：" class="headerlink" title="对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下："></a>对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下：</h4><p><img src="/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/SouthEast.png" alt="img"></p><p>笔记本电脑<br>主要按键：Delete, ESC, F1, F2, F10</p><p>品牌笔记本电脑<br>ibm&#x2F;thinkpad（冷开机按f1，部分新型号可以在重新启动时启动按f1，少数机型是Fn+F1或F2）</p><p>惠普hp（启动和重新启动时按f2或者F10，或者先按ESC再按F10）</p><p>索尼sony（启动和重新启动时按f2或者ASSIST键）</p><p>戴尔dell（启动和重新启动时按f2）</p><p>宏碁acer（启动和重新启动时按f2）</p><p>东芝toshiba（冷开机时按esc然后按f1，或者F2）</p><p>惠普康柏hp compaq（开机到右上角出现闪动光标时按f10，或者开机时按f10）</p><p>富士通fujitsu（启动和重新启动时按f2）</p><p>三星Samsung（启动和重新时按f2）</p><p>联想Lenovo(启动时按F2或Fn+F2，部分机型需关机时按Novo恢复键)</p><p>华硕Asus（启动时按F2）</p><p>微星msi（启动时按Delete）</p><p>神舟Hasee（启动时按F2）</p><p>小米、海尔、明基、技嘉、方正、清华同方、雷神、未来人类、外星人、七喜等品牌笔记本也是F2</p><p>台式电脑<br>主要按键：DEL, ESC, F1, F2, F8, F9, F10, F12</p><p>组装机不同主板台式机<br>Award BIOS：按“Del”键</p><p>AMI BIOS：按“Del”或“ESC”键</p><p>Phoenix BIOS：按“F2”键</p><p>品牌台式机<br>ibm&#x2F;thinkpad（冷开机按f1，部分新型号可以在重新启动时启动按f1）</p><p>惠普hp（启动和重新启动时按f2或者F10）</p><p>索尼sony（启动和重新启动时按f2）</p><p>戴尔dell（启动和重新启动时按f2）</p><p>宏碁acer（启动和重新启动时按f2）</p><p>东芝toshiba（冷开机时按esc然后按f1）</p><p>惠普康柏hp compaq（开机到右上角出现闪动光标时按f10，或者开机时按f10）</p><p>富士通fujitsu（启动和重新启动时按f2）</p><p>三星Samsung（启动和重新时按f2）</p><p>联想Lenovo(启动时按F2或Fn+F2，部分机型需关机时按Novo恢复键)</p><p>华硕Asus（启动时按F2）</p><p>大多数中国大陆国产和台湾品牌（启动和重新启动时按f2）</p><h4 id="进入BIOS之后，设置启动方式为移动盘启动"><a href="#进入BIOS之后，设置启动方式为移动盘启动" class="headerlink" title="进入BIOS之后，设置启动方式为移动盘启动"></a>进入BIOS之后，设置启动方式为移动盘启动</h4><p><a href="http://www.kqidong.com/bios/2718.html">用u盘装系统bios怎么设置u盘启动_快启动官网 (kqidong.com)</a></p><p>我测试的时候使用的电脑不支持UEFI,所以选择的是下面这个：（Remouable Dev.移动盘启动)</p><p><img src="/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/1495707536719160_w3m.png" alt="1st Boot Device"></p><p>设置好之后，按F10进行保存重启，进入下一步</p><h3 id="3-系统安装"><a href="#3-系统安装" class="headerlink" title="3. 系统安装"></a>3. 系统安装</h3><p><a href="https://www.cnblogs.com/huizhipeng/p/18089881">参考文章</a></p><h3 id="4-设置允许ssh使用22端口连接"><a href="#4-设置允许ssh使用22端口连接" class="headerlink" title="4. 设置允许ssh使用22端口连接"></a>4. 设置允许ssh使用22端口连接</h3><p><a href="https://blog.csdn.net/ychgyyn/article/details/90215522#:~:text=%E8%BE%93%E5%85%A5%20passwd%20%EF%BC%8C%E8%BE%93%E5%85%A5%E4%BD%A0%E6%83%B3%E8%A6%81%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E5%AF%86%E7%A0%81%20%E8%BE%93%E5%85%A5%20su,yyn%20%E5%88%87%E6%8D%A2%E5%9B%9E%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%84%B6%E5%90%8E%E5%9C%A8%E8%BE%93%E5%85%A5%20su%20root%20%E5%90%8E%E8%BE%93%E5%85%A5%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E5%AF%86%E7%A0%81%E5%88%87%E6%8D%A2%E5%9B%9EROOT%E7%94%A8%E6%88%B7%E7%9C%8B%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F">参考文章</a></p><h1 id="ubuntu-20-04-6-desktop-amd64-iso"><a href="#ubuntu-20-04-6-desktop-amd64-iso" class="headerlink" title="ubuntu-20.04.6-desktop-amd64.iso"></a>ubuntu-20.04.6-desktop-amd64.iso</h1><p><a href="https://blog.csdn.net/weixin_44023658/article/details/105197092">参考文章</a></p><p>桌面版安装比较简单，制作U盘启动盘前面有样例，故不在记录</p><h1 id="使用宝塔面板进行管理"><a href="#使用宝塔面板进行管理" class="headerlink" title="使用宝塔面板进行管理"></a>使用宝塔面板进行管理</h1><p><a href="https://www.bt.cn/">宝塔面板官网</a></p><p>安装脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec<br></code></pre></td></tr></table></figure><p>在ubuntu命令行中运行即可安装</p><h1 id="使用1panel面板进行管理"><a href="#使用1panel面板进行管理" class="headerlink" title="使用1panel面板进行管理"></a>使用1panel面板进行管理</h1><p><a href="https://1panel.cn/">1panel官网链接</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh &amp;&amp; sudo bash quick_start.sh<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>系统部署</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue</title>
    <link href="/2024/07/01/vue/"/>
    <url>/2024/07/01/vue/</url>
    
    <content type="html"><![CDATA[<h1 id="01-Vue简介"><a href="#01-Vue简介" class="headerlink" title="01.Vue简介"></a>01.Vue简介</h1><p><img src="/./../images/vue/image-20240701130838024.png" alt="image-20240701130838024"></p><h1 id="02-第一个Vue程序"><a href="#02-第一个Vue程序" class="headerlink" title="02.第一个Vue程序"></a>02.第一个Vue程序</h1><p><a href="http://cn.vuejs.org/">官方文档</a></p><p><img src="/./../images/vue/image-20240715184346174.png" alt="image-20240715184346174"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            &#123;&#123;message&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715184937553.png" alt="image-20240715184937553"></p><h1 id="03-el挂载点"><a href="#03-el挂载点" class="headerlink" title="03.el挂载点"></a>03.el挂载点</h1><p>el挂载可以使用各种选择器，但是建议使用id选择器，还有就是el不能挂载在body和html标签上。</p><p><img src="/./../images/vue/image-20240715185558945.png" alt="image-20240715185558945"></p><p><img src="/./../images/vue/image-20240715185613823.png" alt="image-20240715185613823"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>el: 挂载点<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            &#123;&#123;message&#125;&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715185704406.png" alt="image-20240715185704406"></p><h1 id="04-data数据对象"><a href="#04-data数据对象" class="headerlink" title="04.data数据对象"></a>04.data数据对象</h1><p><img src="/./../images/vue/image-20240715190222498.png" alt="image-20240715190222498"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>data数据对象<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            &#123;&#123;message&#125;&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;school&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            字典获取类型：<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;school.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;campus&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            数组获取类型：<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;campus[0]&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">school</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">campus</span>:[</span><br><span class="language-javascript">                    <span class="hljs-string">&#x27;北京校区&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-string">&#x27;上海校区&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-string">&#x27;广州校区&#x27;</span></span><br><span class="language-javascript">                ]</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715190406665.png" alt="image-20240715190406665"></p><h1 id="05-本地应用v-text"><a href="#05-本地应用v-text" class="headerlink" title="05.本地应用v-text"></a>05.本地应用v-text</h1><p><img src="/./../images/vue/image-20240715190544976.png" alt="image-20240715190544976"></p><p><img src="/./../images/vue/image-20240715190556655.png" alt="image-20240715190556655"></p><p><img src="/./../images/vue/image-20240715190649614.png" alt="image-20240715190649614"></p><p><img src="/./../images/vue/image-20240715191018001.png" alt="image-20240715191018001"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-test<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;school.name+&#x27;!&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>支持字符串拼接<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">school</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span></span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">               &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715191212239.png" alt="image-20240715191212239"></p><h1 id="06-v-html"><a href="#06-v-html" class="headerlink" title="06.v-html"></a>06.v-html</h1><p><img src="/./../images/vue/image-20240715191712002.png" alt="image-20240715191712002"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-html<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>       <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>&quot;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;百度&lt;/a&gt;&#x27;</span>,</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715191644260.png" alt="image-20240715191644260"></p><h1 id="07-v-on"><a href="#07-v-on" class="headerlink" title="07.v-on"></a>07.v-on</h1><p>元素绑定事件</p><p><img src="/./../images/vue/image-20240715191926946.png" alt="image-20240715191926946"></p><p><img src="/./../images/vue/image-20240715192648491.png" alt="image-20240715192648491"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-on<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;v-on指令&quot;</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;v-on简写&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;双击事件&quot;</span> @<span class="hljs-attr">dblclick</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;change事件&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeFood&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;food&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">food</span>:<span class="hljs-string">&#x27;苹果&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;show&#x27;</span>)</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">changeFood</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>=<span class="hljs-string">&#x27;香蕉&#x27;</span></span><br><span class="language-javascript">                    &#125;            </span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715192716988.png" alt="image-20240715192716988"></p><h1 id="08-计数器"><a href="#08-计数器" class="headerlink" title="08.计数器"></a>08.计数器</h1><p><img src="/./../images/vue/image-20240715193302690.png" alt="image-20240715193302690"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>计数器<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            点击直接加减<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count++&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count--&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count=0&quot;</span>&gt;</span>reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                点击调用事件<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sub&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;reset&quot;</span>&gt;</span>reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">count</span>:<span class="hljs-number">0</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">add</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">sub</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">reset</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>=<span class="hljs-number">0</span></span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715193245175.png" alt="image-20240715193245175"></p><h1 id="09-v-show"><a href="#09-v-show" class="headerlink" title="09.v-show"></a>09.v-show</h1><p><img src="/./../images/vue/image-20240715193410742.png" alt="image-20240715193410742"></p><p><img src="/./../images/vue/image-20240715193804592.png" alt="image-20240715193804592"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-show<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show=!show&quot;</span>&gt;</span>显示/隐藏<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;show&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;显示/隐藏&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeShow&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-literal">true</span></span><br><span class="language-javascript">               &#125;,</span><br><span class="language-javascript">               <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                   <span class="hljs-title function_">changeShow</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                       <span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span>=!<span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span></span><br><span class="language-javascript">                   &#125;</span><br><span class="language-javascript">               &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715193723837.png" alt="image-20240715193723837"></p><h1 id="10-v-if"><a href="#10-v-if" class="headerlink" title="10.v-if"></a>10.v-if</h1><p><img src="/./../images/vue/image-20240715194327034.png" alt="image-20240715194327034"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-if<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>       <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show=!show&quot;</span>&gt;</span>切换<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;times&gt;10&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">times</span>:<span class="hljs-number">20</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-literal">true</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715194335025.png" alt="image-20240715194335025"></p><h1 id="11-v-bind"><a href="#11-v-bind" class="headerlink" title="11.v-bind"></a>11.v-bind</h1><p>设置元素的属性</p><p><img src="/./../images/vue/image-20240715195008293.png" alt="image-20240715195008293"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-bind<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.active</span>&#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>:red;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">            <span class="hljs-selector-class">.disabled</span>&#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>:gray;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        v-bind<br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive&#125;&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive,disabled:isDisabled&#125;&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classObject&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive,disabled:isDisabled&#125;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeActive&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">url</span>:<span class="hljs-string">&#x27;https://www.baidu.com&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;百度&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">isActive</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">isDisabled</span>:<span class="hljs-literal">false</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">classObject</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">active</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">disabled</span>:<span class="hljs-literal">false</span></span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">changeActive</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span>=!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span>;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715195342158.png" alt="image-20240715195342158"></p><h1 id="12-图片切换"><a href="#12-图片切换" class="headerlink" title="12.图片切换"></a>12.图片切换</h1><p><img src="/./../images/vue/image-20240715202051250.png" alt="image-20240715202051250"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>切换图片<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            切换图片<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imgUrls[index]&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;index=0&quot;</span>&gt;</span>切换到百度<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;index=1&quot;</span>&gt;</span>切换到QQ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;index=2&quot;</span>&gt;</span>切换到新浪<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span><br>            <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">index</span>:<span class="hljs-number">0</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">imgUrls</span>: [</span><br><span class="language-javascript">                        <span class="hljs-string">&#x27;https://www.baidu.com/img/bd_logo1.png&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-string">&#x27;https://www.qq.com/favicon.ico&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-string">&#x27;https://www.sina.com.cn/favicon.ico&#x27;</span></span><br><span class="language-javascript">                    ],</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715202122889.png" alt="image-20240715202122889"></p><h1 id="13-v-for"><a href="#13-v-for" class="headerlink" title="13.v-for"></a>13.v-for</h1><p><img src="/./../images/vue/image-20240715203851376.png" alt="image-20240715203851376"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-for<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;school,index in schools&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;index&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;school.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;school.address&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;food in food&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;food.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;food.price&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        添加食物<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;food.name&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;food.price&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addFood&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>删除食物<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;food.name&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;removeFood&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">schools</span>:[</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;清华大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span>&#125;, </span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span> &#125;,</span><br><span class="language-javascript">                ],</span><br><span class="language-javascript">                <span class="hljs-attr">food</span>:[</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;苹果&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">10</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;香蕉&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">20</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;西瓜&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">30</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;葡萄&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">40</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;草莓&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">50</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;火龙果&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">60</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;苹果&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">10</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;香蕉&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">20</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;西瓜&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">30</span>&#125;,</span><br><span class="language-javascript">                ]</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addFood</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">name</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">name</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">price</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">price</span></span><br><span class="language-javascript">                    &#125;)</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">removeFood</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">length</span>;i++)&#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>[i].<span class="hljs-property">name</span>==<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">name</span>)&#123;</span><br><span class="language-javascript">                            <span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-title function_">splice</span>(i,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715203915876.png" alt="image-20240715203915876"></p><h1 id="14-v-on补充"><a href="#14-v-on补充" class="headerlink" title="14.v-on补充"></a>14.v-on补充</h1><p><img src="/./../images/vue/image-20240715204348181.png" alt="image-20240715204348181"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-on补充<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>点我<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">show</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;show&#x27;</span>)</span><br><span class="language-javascript">                   </span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715204431422.png" alt="image-20240715204431422"></p><h1 id="15-v-model"><a href="#15-v-model" class="headerlink" title="15.v-model"></a>15.v-model</h1><p>双向数据绑定</p><p><img src="/./../images/vue/image-20240715204817624.png" alt="image-20240715204817624"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-model<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>       <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;message=&#x27;Hello World!&#x27;&quot;</span>&gt;</span>点我<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715204827443.png" alt="image-20240715204827443"></p><h1 id="16-记事本-add"><a href="#16-记事本-add" class="headerlink" title="16.记事本-add"></a>16.记事本-add</h1><p><img src="/./../images/vue/image-20240715205108039.png" alt="image-20240715205108039"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715205814207.png" alt="image-20240715205814207"></p><h1 id="17-记事本-remove"><a href="#17-记事本-remove" class="headerlink" title="17.记事本-remove"></a>17.记事本-remove</h1><p><img src="/./../images/vue/image-20240715211147417.png" alt="image-20240715211147417"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715211212882.png" alt="image-20240715211212882"></p><h1 id="18-记事本-count"><a href="#18-记事本-count" class="headerlink" title="18.记事本-count"></a>18.记事本-count</h1><p><img src="/./../images/vue/image-20240715211430417.png" alt="image-20240715211430417"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记数量<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>&#123;&#123;list.length&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715211459971.png" alt="image-20240715211459971"></p><h1 id="19-记事本-clear"><a href="#19-记事本-clear" class="headerlink" title="19.记事本-clear"></a>19.记事本-clear</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记数量<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>&#123;&#123;list.length&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715211640171.png" alt="image-20240715211640171"></p><h1 id="20-记事本-hidden"><a href="#20-记事本-hidden" class="headerlink" title="20.记事本-hidden"></a>20.记事本-hidden</h1><p>没有数据时，隐藏元素（v-show,v-for）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记数量<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>&#123;&#123;list.length&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;list.length&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: aqua;&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: aquamarine;&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715212313904.png" alt="image-20240715212313904"></p><h1 id="21-axios基本使用"><a href="#21-axios基本使用" class="headerlink" title="21.axios基本使用"></a>21.axios基本使用</h1><p><img src="/./../images/vue/image-20240715212441104.png" alt="image-20240715212441104"></p><p><img src="/./../images/vue/image-20240715213219569.png" alt="image-20240715213219569"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>axios基本使用<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span>get<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>post<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://api.github.com/users/zhongyuanzhi&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">post</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;Http://example.com/login?username=admin&amp;password=12345&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715213704367.png" alt="image-20240715213704367"></p><h1 id="22-axios-vue"><a href="#22-axios-vue" class="headerlink" title="22.axios+vue"></a>22.axios+vue</h1><p><img src="/./../images/vue/image-20240715214835633.png" alt="image-20240715214835633"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>axios基本使用<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span>get<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>post<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;message&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;20&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;59&quot;</span>&gt;</span>&#123;&#123;tmp&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">tmp</span>:<span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> that =<span class="hljs-variable language_">this</span>;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://api.github.com/users/zhongyuanzhi&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response;</span><br><span class="language-javascript">                        that.<span class="hljs-property">tmp</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response);</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">post</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;Http://example.com/login?username=admin&amp;password=12345&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/vue/image-20240715214909054.png" alt="image-20240715214909054"></p><h1 id="23-example-weather"><a href="#23-example-weather" class="headerlink" title="23.example-weather"></a>23.example-weather</h1><h2 id="回车查询"><a href="#回车查询" class="headerlink" title="回车查询"></a>回车查询</h2><p><img src="/./../images/vue/image-20240715215204013.png" alt="image-20240715215204013"></p><h4 id="墨迹天气API"><a href="#墨迹天气API" class="headerlink" title="墨迹天气API"></a><a href="http://autodev.openspeech.cn/csp/api/v2.1/weather?openId=aiuicus&clientType=android&sign=android&city=%E4%B8%8A%E6%B5%B7&latitude=39.902895&longitude=116.427915&needMoreData=true&pageNo=1&pageSize=7">墨迹天气API</a></h4><h2 id="点击查询"><a href="#点击查询" class="headerlink" title="点击查询"></a>点击查询</h2><p><img src="/./../images/vue/image-20240716140812920.png" alt="image-20240716140812920"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Weather App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>  <br>    <span class="hljs-comment">&lt;!-- 引入Vue --&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br>    <span class="hljs-comment">&lt;!-- 引入Axios --&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">  </span><br><span class="language-css">        <span class="hljs-comment">/* 简单的样式 */</span>  </span><br><span class="language-css">        <span class="hljs-selector-id">#app</span> &#123;  </span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span>;  </span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;  </span><br><span class="language-css">        &#125;  </span><br><span class="language-css">        <span class="hljs-selector-tag">input</span>, <span class="hljs-selector-tag">button</span> &#123;  </span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;  </span><br><span class="language-css">        &#125;  </span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>  <br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;city&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter city name&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;getWeather&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getWeather&quot;</span>&gt;</span>Get Weather<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    &#123;&#123;weather.location[0].fxLink&#125;&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;weather.location[0].fxLink&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">  </span><br><span class="language-javascript">    <span class="hljs-comment">// Vue实例  </span></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;  </span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,  </span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;  </span><br><span class="language-javascript">            <span class="hljs-attr">city</span>: <span class="hljs-string">&#x27;&#x27;</span>,  </span><br><span class="language-javascript">            <span class="hljs-attr">weather</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">code</span>:<span class="hljs-number">200</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">location</span>:[</span><br><span class="language-javascript">                        &#123;</span><br><span class="language-javascript">                           <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;海淀&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;101010200&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">lat</span>: <span class="hljs-string">&quot;39.95607&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">lon</span>: <span class="hljs-string">&quot;116.31032&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">adm2</span>: <span class="hljs-string">&quot;北京&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">adm1</span>: <span class="hljs-string">&quot;北京市&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">country</span>: <span class="hljs-string">&quot;中国&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">tz</span>: <span class="hljs-string">&quot;Asia/Shanghai&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">utcOffset</span>: <span class="hljs-string">&quot;+08:00&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">isDst</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;city&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">rank</span>: <span class="hljs-string">&quot;15&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">fxLink</span>: <span class="hljs-string">&quot;https://www.qweather.com/weather/haidian-101010200.html&quot;</span></span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    ],</span><br><span class="language-javascript">                </span><br><span class="language-javascript">            &#125;  </span><br><span class="language-javascript">        &#125;,  </span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;  </span><br><span class="language-javascript">            <span class="hljs-attr">getWeather</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;  </span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">city</span>) &#123;  </span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Please enter a city name!&#x27;</span>);  </span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span>;  </span><br><span class="language-javascript">                &#125;  </span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> vm = <span class="hljs-variable language_">this</span>;  </span><br><span class="language-javascript">                axios.<span class="hljs-title function_">get</span>(</span><br><span class="language-javascript">                    <span class="hljs-string">&quot;https://geoapi.qweather.com/v2/city/lookup?location=&quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">city</span> + <span class="hljs-string">&quot;&amp;key=50a831558a6e47efaf68994e101b0e42&quot;</span>)  </span><br><span class="language-javascript">                    .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) &#123;  </span><br><span class="language-javascript">                        vm.<span class="hljs-property">weather</span> = response.<span class="hljs-property">data</span>;  </span><br><span class="language-javascript">                    &#125;)  </span><br><span class="language-javascript">                    .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;  </span><br><span class="language-javascript">                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Error fetching weather:&#x27;</span>, error);  </span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Failed to fetch weather.&#x27;</span>);  </span><br><span class="language-javascript">                    &#125;);  </span><br><span class="language-javascript">            &#125;  </span><br><span class="language-javascript">        &#125;  </span><br><span class="language-javascript">    &#125;);  </span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>专升本英语</title>
    <link href="/2024/06/22/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/"/>
    <url>/2024/06/22/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/</url>
    
    <content type="html"><![CDATA[<h1 id="2024-6-18"><a href="#2024-6-18" class="headerlink" title="2024-6-18"></a>2024-6-18</h1><h2 id="1-中英文句子的对比"><a href="#1-中英文句子的对比" class="headerlink" title="1. 中英文句子的对比"></a>1. 中英文句子的对比</h2><h2 id="1-英语学习的最小单位是句子（而不是单词）"><a href="#1-英语学习的最小单位是句子（而不是单词）" class="headerlink" title="1.英语学习的最小单位是句子（而不是单词）"></a>1.英语学习的最小单位是句子（而不是单词）</h2><h2 id="2-什么是英语的句子？"><a href="#2-什么是英语的句子？" class="headerlink" title="2.什么是英语的句子？"></a>2.什么是英语的句子？</h2><h3 id="（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“建决要命”（建议）（决定）（要求）（命令）时才可以用。"><a href="#（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“建决要命”（建议）（决定）（要求）（命令）时才可以用。" class="headerlink" title="（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“建决要命”（建议）（决定）（要求）（命令）时才可以用。"></a>（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“<font color="red">建决要命”（建议）（决定）（要求）（命令）</font>时才可以用。</h3><ol><li><p>放松。</p><p>Relax.v.</p></li><li><p>请进来。 </p><p>Please come in.||Come in,please.     please既可以在句首也可以句末。</p></li><li><p>走吧。</p><p> Let’s go.      let  就是动原（动词原形），“使，让”   let us go.</p></li><li><p>别笑。</p><p>Don’t laugh.<br/>否定句——要加否定词 not<br/>肯定句</p></li></ol><h4 id="祈使句小结"><a href="#祈使句小结" class="headerlink" title="祈使句小结"></a>祈使句小结</h4><p>除了动词原形直接开头，还可以：</p><ul><li><p>please&lt;&#x3D;&#x3D;&gt;请</p></li><li><p>如果是否定，需要加don’t,或者Never (laugh)</p></li><li><p>有种特别常用的祈使句是let’s do</p></li></ul><h3 id="2-英语句子可以没有宾语，即动作后面没有承受者"><a href="#2-英语句子可以没有宾语，即动作后面没有承受者" class="headerlink" title="(2)英语句子可以没有宾语，即动作后面没有承受者"></a>(2)英语句子可以没有宾语，即动作后面没有承受者</h3><p>补充：主语是句中动作的发出者；宾语是句中动作的承受者</p><ol start="5"><li><p>她笑了    She laughs.</p><p>&#x3D;&gt;<font color="red">句中的动作要用动词表示，而英语中的动词是有变化的。(痛点)P26</font></p></li></ol><p>动词变化的五种形式：(<a href="#vi">跳转链接</a>)</p><ul><li>原形</li><li>三单（第三人称单数）——变形条件：</li></ul><p>​<font color="RoyalBlue">a.主语是第三人称单数（人称分为第一人称，“我，我们”；第二人称“你，你们；第三人称”除了一二人称，都是第三&#x3D;&#x3D;&gt;也就是说名词都是第三人称。</font></p><p>​<font color="RoyalBlue">b.时态是一般现在时</font></p><ul><li>现在分词&#x3D;&#x3D;&gt;动词后面+ing</li><li>过去式——变形条件：1时态是一般过去时2主语一般没有要求  &#x3D;&#x3D;&gt;一般动词后面+ed</li></ul><ol start="6"><li><p>他失败了。</p><p> 汉译英，很重要的一点是要判断时态</p><p>&#x3D;&#x3D;&gt;He failed. 汉语中的“了，过”，对应英语“-ed”</p></li></ol><h4 id="主谓结构小结"><a href="#主谓结构小结" class="headerlink" title="主谓结构小结"></a>主谓结构小结</h4><p>   动词后面没有宾语，称为“主谓”，这是完整句，此时的动词，在英语中称为“不及物动词vi”</p><h4 id="宾语小结"><a href="#宾语小结" class="headerlink" title="宾语小结"></a>宾语小结</h4><p>宾语一般跟在动词和介词后，分别称为动宾和介宾</p><p>look at me&#x2F;us&#x2F;you&#x2F;him&#x2F;her&#x2F;it&#x2F;them</p><h3 id="3-英语句子中必须有谓语，而且只能有一个（有且仅有）"><a href="#3-英语句子中必须有谓语，而且只能有一个（有且仅有）" class="headerlink" title="(3)英语句子中必须有谓语，而且只能有一个（有且仅有）"></a>(3)英语句子中必须有谓语，而且只能有一个（有且仅有）</h3><p>​谓语是由动词来充当的，动词分为两种，一种表示动作，一种表示“非动作”</p><ol start="7"><li><p>阿珍爱阿强</p><p>Azhen loves Aqiang.</p><p>只有一般现在时，才需要考虑“动词的三单”形式</p></li><li><p>中国人不骗中国人</p><p>动词是“骗”，“不”是否定词</p><p>先想时态——一般现在时</p><p>Chinese don’t cheat&#x2F;pian Chinese.</p></li><li><p>你很漂亮</p><p>找动词——没有——是说明这句话中没有表示“动作”的词</p><p>You are very&#x2F;so beautiful.</p><p>are——是怎么来的</p><p>are 是be的变形；be的意思是“是”</p><p>你是很漂亮。</p><p>补充：如果在汉译英过程中，汉语句中不体现动作，那么英语句子就要用以be为代表的一类动词——联系动词——不代表主语发出对宾语的动作，而是主语自己的状态、性质、变化……</p><p>补充2：动词分为表示动作的“实义动词”和不表示动作的“联系动词-be”</p></li><li><p>英语很重要</p><p>无论用什么动词，都要先想时态</p><p>一般现在时</p><p>English is exceedingly&#x2F;extraordinarily important.</p><p><font color="Turquoise">很 very&#x3D;&#x3D;&gt;exceedingly、extraordinarily</font></p></li></ol><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>​表示动作的实义&#x2F;意动词（英语中还有一种动词是“使役动词”，后面单独讲），动作如果能直接跟宾语，就是及物动词vt；如果不能直接跟宾语，就是不及物动词vi——P22</p><ol start="11"><li>遥墙机场就要到了</li></ol><p>补充：汉译英的步骤</p><ul><li><p>找汉语句中的动词</p></li><li><p>判断动词表示的动作的发出者——主语</p></li><li><p>然后判断发出者和动作的关系（主被动关系）</p></li><li><p>然后确定句子的时态</p></li></ul><p>We are arriving at Yaoqiang Airport.</p><p>Our flight is arriving at Yaoqiang Airport.</p><p>be——变形am,is,are</p><ol start="12"><li><p>我要去剪头</p><p>主语是能够发出动作的人，句中主要的动作是“剪”</p><p>cut hair</p><p>Tony will cut my hair.</p></li></ol><h4 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h4><p>​    找句子的主语，一定要先判断句子的动词——主语就是能够发出这个动作的人或事（主语就是句中动作的发出者）</p><h1 id="2024-6-23"><a href="#2024-6-23" class="headerlink" title="2024-6-23"></a>2024-6-23</h1><ol start="13"><li><p>飞机上有很多饮料</p><p>-&gt;”汉语没有语法性？”,汉语省略了很多东西</p><ol><li><p>动词 –有</p></li><li><p>动词发出者—不明确，甚至可以说没有</p><p>there be “有”</p><p>还有一个表示“有”——have</p><p>–&gt;举例：</p><p>​我有女朋友。</p><p>​I have a girlfriend.</p><p>很多的表达————&gt;</p><p>​普通的：many&#x2F;a lot of&#x2F;a lots of </p><p>There are  <font color="red">various&#x2F;a variety of</font>drinks on the plane.</p><p><font color="blue">地点的前面要加介词。</font></p></li></ol></li></ol><h4 id="小结-there-be-句型的使用条件"><a href="#小结-there-be-句型的使用条件" class="headerlink" title="小结:there be 句型的使用条件"></a>小结:there be 句型的使用条件</h4><ol><li><p>句中的动作是“有”</p></li><li><p>“有”的发出者不明确</p></li><li><p>从前有座山</p><p>There was a mountain long long ago.</p><p>Long long ago,there was a mountain.</p><p>时间状语可以在句首或句尾</p></li><li><p>有朋自远方来，不亦乐乎<br>​有个朋友从远方来，我非常开心。</p><ol><li><p>先找动词</p></li><li><p>有——动作发出者不明确</p></li></ol></li><li><p>一个句子中</p></li></ol><pre><code class="hljs">方案一：试试三个句子There is a friend.Come from a far place.I am very happy.  祈使句：Come from a place.(&quot;从远方来&quot;)方案二：如果一个句中，有多余一个的谓动，可以保留一个做谓动，另外一个变成非谓语动词（由动词变化而来，不做谓语的形式——doing 主动/done 被动/to do 目的，将来）There is a friend coming from a far place.Iam exceedingly delighted.​补充例子：你爱我，我爱你，蜜雪冰城甜蜜蜜。​方案一：You love me,I love you,MXBC  is sweet.​英语中不存在叠词。​方案二：You loving me,I loving you,MXBC is sweet.​&lt;font color=&quot;red&quot;&gt;独立主格结构&lt;/font&gt;​    </code></pre><h2 id="2-英语句子的标志"><a href="#2-英语句子的标志" class="headerlink" title="2.英语句子的标志"></a>2.英语句子的标志</h2><h3 id="专升本英语考试的最小单位是句子。"><a href="#专升本英语考试的最小单位是句子。" class="headerlink" title="专升本英语考试的最小单位是句子。"></a>专升本英语考试的最小单位是句子。</h3><h3 id="英语句子的标志"><a href="#英语句子的标志" class="headerlink" title="英语句子的标志"></a>英语句子的标志</h3><ol><li>句首单词首字母大写</li><li>句尾是三个标点（句号，问号，感叹号）英语的句号是.</li><li>句中带有时态，语态，情态，主谓一致的谓语动词（3态1致）</li></ol><h3 id="3-英语简单句的类型"><a href="#3-英语简单句的类型" class="headerlink" title="3.英语简单句的类型"></a>3.英语简单句的类型</h3><ol><li>祈使句</li><li>there be</li><li>主谓</li><li>主谓宾</li><li>主系表</li><li>主谓双宾</li><li>主谓宾宾补</li></ol><h2 id="3-句子完整的概念"><a href="#3-句子完整的概念" class="headerlink" title="3.句子完整的概念"></a>3.句子完整的概念</h2><p>1.简单句：有且仅有一个谓动的句子</p><ul><li>主干部分：主谓宾表补</li><li>附属部分（修饰成分）：定语，状语，同位语</li></ul><p>2.并列句：由“并列连词”连接的两个或多个简单句</p><p>3.主从复合句</p><p><strong>补充</strong>：</p><p>not是最常用的否定副词，但是有很多单词可以来代替它</p><p>hardly 几乎不&#x2F;never 绝不&#x2F;rarely 几乎不&#x2F;little 几乎不</p><p>not…but… 可以变成hardly…but…;never…but…;rarely…but rather…不是…而是</p><p><a id="bllc">常考并列连词</a></p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>表示并列关系的并列连词</td><td>and<br />和</td><td>both……and……<br />两者都</td></tr><tr><td></td><td></td><td>not only(just,merely,solely)……but(also)(too)(as well)<br />不仅……而且……</td></tr><tr><td></td><td></td><td>not…but…&#x2F;not…but only…&#x2F;not…but rather…&#x2F;hardly…but just…<br />不是…而是…</td></tr><tr><td></td><td></td><td>neither…nor…&#x2F;not…nor… 既不…也不…</td></tr><tr><td>表示选择关系的并列连词</td><td>or<br />或者</td><td>either…or..或者…或者…,or else 或者</td></tr><tr><td>表示对比关系的并列连词</td><td>while&#x2F;whereas<br />而</td><td>*作为并列连词，不放在句首</td></tr><tr><td>表示转折关系的并列连词</td><td>but 但是&#x2F;yet 然而，但是&#x2F;only（但是，可是）</td><td>and yet 然而，但是</td></tr><tr><td>表示原因关系的并列连词</td><td>for</td><td>*只能在句中，且在逗号后</td></tr><tr><td>表示结果关系的并列连词</td><td>so</td><td></td></tr></tbody></table><p><a>常考从句引导词</a></p><table><thead><tr><th>最强搭配</th><th>that <span />引导词的从句类型最多，而且用法最多，使用频率最高<br />看到that想从句</th></tr></thead><tbody><tr><td>wh-代词类</td><td>what（表示名词），who（表示人），which（表示物，有时候会是“介词+which”），whose+n（表示谁的什么）</td></tr><tr><td>wh-副词类</td><td>when（和时间有关），where（和地点有关），why（和原因有关），how（和“怎样””多么“有关）</td></tr><tr><td>wh-连词类</td><td>whether（一般和or not搭配使用，表示”是否“）</td></tr><tr><td>其他常考引导词</td><td>1. while&#x2F;as 意思和用法都非常多<br />2.although（虽然，尽管），though（尽管）（也可以做副词用）<br />3.because（因为）<br />4.before（和”前“有关），after（和”后“有关）<br />5.since（意思很多，主要是”自从“）<br />6.until（主要考点是not……until……直到……才……）<br />7.if（如果）<br />8.once（一旦）<br />9.unless（除非）<br />10.than（比）</td></tr></tbody></table><p><a id="vi">动词的五种形式</a></p><table><thead><tr><th>类型</th><th>原形</th><th>三单</th><th>现在分词</th><th>过去式</th><th>过去分词</th></tr></thead><tbody><tr><td>中规中矩型</td><td>ask</td><td>asks</td><td>asking</td><td>asked</td><td>asked</td></tr><tr><td></td><td>look</td><td>looks</td><td>looking</td><td>looked</td><td>looked</td></tr><tr><td>y结尾变化型</td><td>try</td><td>tries</td><td>trying</td><td>tried</td><td>tried</td></tr><tr><td>y结尾不变型</td><td>play</td><td>plays</td><td>playing</td><td>played</td><td>played</td></tr><tr><td>双写型</td><td>stop</td><td>stops</td><td>stopping</td><td>stopped</td><td>stopped</td></tr><tr><td></td><td>begin</td><td>begins</td><td>beginning</td><td>began</td><td>begun</td></tr><tr><td></td><td>control</td><td>controls</td><td>controlling</td><td>controlled</td><td>controlled</td></tr><tr><td>不双写型</td><td>open</td><td>opens</td><td>opening</td><td>opened</td><td>opened</td></tr><tr><td></td><td>ifx</td><td>fixes</td><td>fixing</td><td>fixed</td><td>dixed</td></tr><tr><td>可双可不双型</td><td>travel</td><td>travels</td><td>travelling</td><td>travelled</td><td>travelled</td></tr><tr><td>+es型</td><td>watch</td><td>watches</td><td>watching</td><td>watched</td><td>watched</td></tr><tr><td></td><td>go</td><td>goes</td><td>going</td><td>went</td><td>gone</td></tr><tr><td>去e型</td><td>live</td><td>lives</td><td>living</td><td>lived</td><td>lived</td></tr><tr><td>-c结尾型</td><td>picnic</td><td>picnics</td><td>picnicking</td><td>picnicked</td><td>picnicked</td></tr><tr><td>一身反骨型</td><td>have</td><td>has</td><td>having</td><td>had</td><td>had</td></tr><tr><td></td><td>be</td><td>(am)is are</td><td>being</td><td>was&#x2F;were</td><td>been</td></tr></tbody></table><h2 id="选词填空的做题步骤："><a href="#选词填空的做题步骤：" class="headerlink" title="选词填空的做题步骤："></a>选词填空的做题步骤：</h2><ol><li><p>先看选项（15&#x2F;12&#x2F;10），重点看词尾</p></li><li><p>看横线所在句，先标点（分区），再谓动，看是几个谓语动词，如果只有一个，那就是简单句，如果有多个，那就要考虑并列句（并列连词）或主从复合句（引导词）</p><p>考点练习：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">A.helpful B.than C.attraction D.that E.who F.in<br>G.respected H.win I.because J.giving K.without L.equally<br></code></pre></td></tr></table></figure><p>Why are we not treated sometimes as expected?<font color="red">It’s  <u>   空</u> we do</font> the same to others who have expectations from us.</p></li></ol><p>​需要引导词或并列连词，看给出单词，没有并列连词，因此是引导词，than&#x2F;that&#x2F;who&#x2F;because,此时一定先找考点”心中有丘壑，眼中有考点“——前why，后because</p><h1 id="2024-6-24"><a href="#2024-6-24" class="headerlink" title="2024-6-24"></a>2024-6-24</h1><h2 id="P19-谓动的标志"><a href="#P19-谓动的标志" class="headerlink" title="P19 谓动的标志"></a>P19 谓动的标志</h2><ol><li><p>必要性：在词汇量不够大的情况下，能够识别最典型的谓动</p><ol><li><p>am is are was were</p></li><li><p>do does did</p></li><li><p>has have had</p></li><li><p>情态动词（+动词原形）</p></li><li><p>动词过去式</p></li></ol></li></ol><p>Precious metals gradually <strong>took</strong> over <strong>because</strong> they <strong>were</strong> portable,durable,recognizable,and divisible into larger and smaller of value.</p><p>补充：从句从什么开始，到什么结束</p><p>​从引导词开始到标点结束或者引导词后面第二个谓动之前结束。</p><p>补充：当多个逗号同时出现在附近的位置，且后面不远处就有并列连词，尤其是and，这些逗号，都是代替and</p><h3 id="谓语动词的要素3态1一致"><a href="#谓语动词的要素3态1一致" class="headerlink" title="谓语动词的要素3态1一致"></a>谓语动词的要素3态1一致</h3><h3 id=""><a href="#" class="headerlink" title=""></a><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624174621887.png" alt="image-20240624174621887"></h3><p>​forecast 预测，预告cancer 癌症 rate 率ans：C indicates</p><h3 id="做题步骤："><a href="#做题步骤：" class="headerlink" title="做题步骤："></a>做题步骤：</h3><ol><li><p>先看标点，找到逗号前后看，but是并列连词，说明前后是并列，而横线在后面，所以but前面的部分可以先不看。</p></li><li><p>把but后面的内容当成一个整体，再切分，看到两个挨得很近的逗号，中间为插入语，<br><font color="red">,but the newest finding,</font>先不看</p></li><li><p>看到that想从句，看到have谓动标志，因此that…have…是从句，横线不在从句中</p></li><li><p>看主句缺什么？缺谓动4要素：时态，语态，情态，主谓一致，在选词填空中，一般判断出来缺谓动，只需要考虑时态和主谓一致</p></li><li><p>补充：英语的时态有16种，一般可以简单的分为2种（过去和现在）过去就是所有名称中带着过去的；其他都归于现在</p><p>has&#x2F;have&#x2F;done都是现在完成时，他们对应的就应该是现在的时态：一般现在时，现在进行时</p><p>过去完成时 had done，对应过去的时态——一般过去时，过去进行时</p><h3 id="考点：4大金刚"><a href="#考点：4大金刚" class="headerlink" title="考点：4大金刚"></a>考点：4大金刚</h3><p><strong>study是研究，study&#x2F;research</strong></p><p><strong>调查survey（investigation）</strong><br><strong>实验   experiment(trial)</strong></p><p><strong>finding 发现（conclusion）</strong></p><p>indicate 表明</p><p>hit…level 达到…水平&#x2F;程度</p></li></ol><p><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624181648187.png" alt="image-20240624181648187"></p><p>补充：句首的并列连词，作用是连接本句和上一句，因此，对本句后面的内容，就没有影响了。</p><p>补充：like如果在逗号前或后，尤其是在插入语中，like是介词，“像…,比如说…”;多个逗号同时出现在附近，后面有and</p><p>考点：并列考点</p><p>看到and找并列，从前往后，一一对应，前面有什么，后面也要在词性，词形，<br> <img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624183502979.png" alt="image-20240624183502979"></p><p>​fufillment满足感achievement成就感</p><p>看到and找并列从后往前</p><p>beside 除此之外however 然而，前后是转折</p><p><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624184003758.png" alt="image-20240624184003758"></p><p>​逗号后面有两个谓动，说明至少需要一个并列连词或引导词（并&#x2F;引）</p><p>broad 宽广的</p><p>in the briadest sense 从最广义来说</p><p>in…sense 从…意义上来说</p><p><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624184629562.png" alt="image-20240624184629562"></p><p>moderate adj.适中的</p><p>assure sb 让某人放心</p><p><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624185804644.png" alt="image-20240624185804644"></p><p><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624190608921.png" alt="image-20240624190608921"><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624200105726.png" alt="image-20240624200105726"></p><p><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624195933726-1719230375233-1.png" alt="image-20240624195933726"></p><p>还要注意：有很多副词是由其形容词+ly变化而来，但是意思发生了改变</p><p><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624200527992.png" alt="image-20240624200527992"></p><h2 id="P160各种词性后缀"><a href="#P160各种词性后缀" class="headerlink" title="P160各种词性后缀"></a>P160各种词性后缀</h2><h3 id="常考不带ly的副词"><a href="#常考不带ly的副词" class="headerlink" title="常考不带ly的副词"></a>常考不带ly的副词</h3><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>very 非常</td><td>much 非常</td><td>well 非常</td><td>quite 非常</td><td>pretty 非常，特别</td><td>rather 非常</td></tr><tr><td>often 经常</td><td>hard 勤奋地</td><td>already 已经</td><td>almost 几乎</td><td>still 仍然；但，不过</td><td>then 接着，另一个</td></tr><tr><td>fast 快地</td><td>perhaps 可能</td><td>enough 足够的</td><td>just 仅仅</td><td>once 一次</td><td>little 很少的</td></tr><tr><td>even 甚至</td><td>alone 独自</td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="带ly但实际是形容词"><a href="#带ly但实际是形容词" class="headerlink" title="带ly但实际是形容词"></a>带ly但实际是形容词</h3><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>Friendly 友好的</td><td>lovely 可爱的</td><td>Lively 活泼的</td><td>likely 可能的</td><td>lonely 孤独的</td><td>elderly 年纪较大的</td></tr><tr><td>costly 贵的</td><td>Weekly 每周的</td><td>Monthly 每月的</td><td>quarterly 季度的</td><td>daily 每天的</td><td>deadly 致命的</td></tr><tr><td>silly 傻的</td><td>fatherly 父亲般的</td><td>motherly 母亲般的</td><td>brotherly 兄弟般的</td><td>orderly 有秩序的</td><td>ugly 丑的</td></tr><tr><td>kindly 善良的</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>专升本</category>
      
    </categories>
    
    
    <tags>
      
      <tag>专升本英语</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>四级英语备考</title>
    <link href="/2024/06/11/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/"/>
    <url>/2024/06/11/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/</url>
    
    <content type="html"><![CDATA[<h1 id="一、听力部分（248-5-249分）"><a href="#一、听力部分（248-5-249分）" class="headerlink" title="一、听力部分（248.5~&#x3D;249分）"></a>一、听力部分（248.5~&#x3D;249分）</h1><h2 id="题型构成"><a href="#题型构成" class="headerlink" title="题型构成"></a>题型构成</h2><p>听力最低得分142</p><p>四六级是加权分</p><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611155738950.png" alt="image-20240611155738950"></p><h2 id="听力应对策略"><a href="#听力应对策略" class="headerlink" title="听力应对策略"></a>听力应对策略</h2><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611155954749.png" alt="image-20240611155954749"></p><h3 id="听之前Pre-listening"><a href="#听之前Pre-listening" class="headerlink" title="听之前Pre-listening"></a>听之前Pre-listening</h3><p><strong>看选项</strong></p><h4 id="听力选项中，大写的专有名词不是定位词（听力中一定会出现）"><a href="#听力选项中，大写的专有名词不是定位词（听力中一定会出现）" class="headerlink" title="听力选项中，大写的专有名词不是定位词（听力中一定会出现）"></a>听力选项中，<font color="red">大写的专有名词不是定位词</font>（听力中一定会出现）</h4><p>听力定位词指的是：我听到就可以选的单词，也就是区别于其他选项</p><p>通常定位词是：名词，较长的单词，动词，形容词</p><p>如果不认识，如何识别名词：</p><ul><li><p>of前后</p></li><li><p>连字符的后面（前面是两个用连字符连起来单词，后面那个）</p></li><li><p>‘s所有格后面</p></li><li><p>形容词性物主代词（代词所有格 my our your）</p></li><li><p>冠词 a&#x2F;an&#x2F;the</p></li><li><p>介词后</p></li></ul>  <font color="blue">  关于数字的补充：数字不能作为主要的定位词，但是可以作为选项完整信息来辅助选择</font><p>  <font color="blue">关于定位词的补充：定位词通常是作为一个整体（短语）而不是单独的某个单词，尤其是他们之间有修饰关系的时候<br>  </font></p><h3 id="比对选项，找出共同点和不同点：通过选项，判断可能的问题"><a href="#比对选项，找出共同点和不同点：通过选项，判断可能的问题" class="headerlink" title="比对选项，找出共同点和不同点：通过选项，判断可能的问题"></a>比对选项，找出共同点和不同点：通过选项，判断可能的问题</h3><p>没有时间 可以省略 适合听力150分往上的使用</p><h3 id="听中During-listening"><a href="#听中During-listening" class="headerlink" title="听中During-listening"></a>听中During-listening</h3><h3 id="听后After-listening"><a href="#听后After-listening" class="headerlink" title="听后After-listening"></a>听后After-listening</h3><h2 id="听力原则详解"><a href="#听力原则详解" class="headerlink" title="听力原则详解"></a>听力原则详解</h2><h2 id="1、位置原则——命题原则：做题原则"><a href="#1、位置原则——命题原则：做题原则" class="headerlink" title="1、位置原则——命题原则：做题原则"></a>1、位置原则——命题原则：做题原则</h2><h3 id="首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）"><a href="#首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）" class="headerlink" title="首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）"></a>首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）</h3><p><strong>出现的越早越是答案</strong></p><p>例外非常少</p><h3 id="中间题——（很多时候不是听不懂，而是跟不上）一定要利用信号词"><a href="#中间题——（很多时候不是听不懂，而是跟不上）一定要利用信号词" class="headerlink" title="中间题——（很多时候不是听不懂，而是跟不上）一定要利用信号词"></a>中间题——（很多时候不是听不懂，而是跟不上）一定要利用<strong>信号词</strong></h3><p><strong>信号词</strong></p><p><strong>听力不能翻译</strong>，一旦翻译时间一定跟不上</p><h3 id="尾题——通常出现在快要结束的地方（关键词：questions）"><a href="#尾题——通常出现在快要结束的地方（关键词：questions）" class="headerlink" title="尾题——通常出现在快要结束的地方（关键词：questions）"></a>尾题——通常出现在快要结束的地方（关键词：questions）</h3><ul><li>explosion</li><li>汉语拼音就是根据国际音标而来<ul><li>韵母aoeiu</li><li>元音aeiou</li><li>生母b &#x2F;b&#x2F;</li></ul></li></ul><h2 id="2、信号词原则（10种听力信号词）"><a href="#2、信号词原则（10种听力信号词）" class="headerlink" title="2、信号词原则（10种听力信号词）"></a>2、信号词原则（10种听力信号词）</h2><h3 id="转折词："><a href="#转折词：" class="headerlink" title="转折词："></a>转折词：</h3><ol><li>but,yet （失去爆破——读的快t的音消失了）</li><li>however,while,although,though 虽然，尽管 srds</li><li>now,unexpectedly 出人意料的是 unfortunately 不幸的是</li></ol><h3 id="并列词"><a href="#并列词" class="headerlink" title="并列词"></a>并列词</h3><p>and,or,also,while而not only…but also…,not…but…,either..or…，likewise，similarly同样的</p><p>重点：如果选项中出现并列（and，or），一定会听到并列前后的内容（也就是说，并列前后是重点）</p><h3 id="递进词"><a href="#递进词" class="headerlink" title="递进词"></a>递进词</h3><p>then 另外，接着，another 另一个，in addition，furthermore，besides 另外</p><h3 id="顺序词"><a href="#顺序词" class="headerlink" title="顺序词"></a>顺序词</h3><p>on one hand,on the other hand,first of all,to start,……finally</p><h3 id="强调词"><a href="#强调词" class="headerlink" title="强调词"></a>强调词</h3><p>do,does,did 强调句——重读，<strong>marjor，marjority，main，chief，key，primary</strong> 主要的（the major reason 主要原因）only，in fact ，the first</p><h3 id="最高级-听力不要翻译"><a href="#最高级-听力不要翻译" class="headerlink" title="最高级(听力不要翻译)"></a>最高级(<strong>听力不要翻译</strong>)</h3><p>the most,the best,the …est</p><h3 id="因果词"><a href="#因果词" class="headerlink" title="因果词"></a>因果词</h3><p>because,so,so that therefore ,reason,casuse,explain,explanation,due to,because of ,as a result of</p><h4 id="注意会表示因果关系的词"><a href="#注意会表示因果关系的词" class="headerlink" title="注意会表示因果关系的词"></a>注意会表示因果关系的词</h4><ol><li><p>lead to,result in,account for,contribute to,bring about</p></li><li><p>givr birth to,derive from,result from,generate from,originate from</p></li></ol><h3 id="观点结论词"><a href="#观点结论词" class="headerlink" title="观点结论词"></a>观点结论词</h3><p>think,believe,hold,suggest,claim,argue,note,add,conclude,turn out</p><h3 id="举例处"><a href="#举例处" class="headerlink" title="举例处"></a>举例处</h3><p>for example,for instance,like,such as,include</p><h3 id="特殊句型"><a href="#特殊句型" class="headerlink" title="特殊句型"></a>特殊句型</h3><p>带it的句型 it is……that强调句，it做形式主语或形式宾语；带wh-的从句</p><h2 id="重读停顿原则"><a href="#重读停顿原则" class="headerlink" title="重读停顿原则"></a>重读停顿原则</h2><h2 id="重合度高原则"><a href="#重合度高原则" class="headerlink" title="重合度高原则"></a>重合度高原则</h2><h2 id="信号词练习"><a href="#信号词练习" class="headerlink" title="信号词练习"></a>信号词练习</h2><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611173713616.png" alt="image-20240611173713616"></p><p>19.位置原则+信号词原则+原词重合度+重读停顿</p><ul><li>a.<strong>Everything</strong> was <strong>natural</strong> and <strong>fenuine</strong> then.</li><li>b.<strong>People</strong> had <strong>plenty of land</strong> to cultivate then.</li><li>c.It markedd <strong>the beginning of something</strong> new.</li><li>d.It was when <strong>her ancertors</strong> came to America.</li></ul><p>20.信号词+重合度+重读停顿</p><p>a.They were konwn to be <strong>creative</strong>.</p><p>b.They had <strong>all kinds of entertainment</strong>.</p><p>c.They enjoyed living <strong>a life of ease</strong>.</p><p>d.They believed in <strong>working</strong> for <strong>goals</strong>.</p><p>21.位置原则+信号词原则+原词重合度+重读停顿</p><p>a.Chatting with <strong>her ancestors.</strong></p><p>b.Furnishing <strong>her country house</strong>.</p><p>c.Doing <strong>needlework</strong> by <strong>the fire</strong>.</p><p>d.Polishing all <strong>the silver work</strong>.</p><h2 id="短文和长对话练习"><a href="#短文和长对话练习" class="headerlink" title="短文和长对话练习"></a>短文和长对话练习</h2><h2 id="长对话练习"><a href="#长对话练习" class="headerlink" title="长对话练习"></a>长对话练习</h2><p><strong>位置原则：第一题 对话的前三个回合（注意对话前面常出现的寒暄）</strong></p><p><strong>性别特征：通过选项，判断可能和男性和女性相关的话题</strong></p><p>对话中有很多语气词，要特别注意：</p><ul><li>well</li><li>you know</li><li>oh</li><li>now</li><li>I’d like to</li><li>how about to&#x2F;what about donig sth&#x2F;sth;做某事怎么样 提建议</li><li>let me see 让我想一想</li><li>why not do sth 为什么不？提建议</li><li>don’t you你难道不……</li><li>why don’t you 你为什么不……？</li><li>would you like to…提要求……您能不能?</li><li>sorry,I’d love to but…</li><li>listen</li><li>look 引起别人注意</li></ul><h1 id="二、阅读部分"><a href="#二、阅读部分" class="headerlink" title="二、阅读部分"></a>二、阅读部分</h1><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611181859741.png" alt="image-20240611181859741"></p><p><strong>目标1</strong>425&#x2F;426 710*60%（100——60）</p><p><strong>听力</strong>前15个对10个&#x3D;71 后10个对5个&#x3D;71 &#x3D;&gt;142&#x3D;150</p><p><strong>阅读</strong> A0.5——3.55分<font color="red">分值小 特别难</font></p><p>​B1——7.1分分值适中——先做（10——15mins）</p><p>​C2——14.2分 分值较高 难度较高——第二（20——25mins）</p><h2 id="阅读做题顺序-BCA（可以挪用翻译的5-10分钟）"><a href="#阅读做题顺序-BCA（可以挪用翻译的5-10分钟）" class="headerlink" title="阅读做题顺序 BCA（可以挪用翻译的5~10分钟）"></a>阅读做题顺序 <strong>BCA</strong>（可以挪用翻译的5~10分钟）</h2><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611184817885.png" alt="image-20240611184817885"></p><p><strong>最后得分在460分左右——还有30分钟剩余</strong></p><h1 id="翻译写作"><a href="#翻译写作" class="headerlink" title="翻译写作"></a>翻译写作</h1><h2 id="答题顺序"><a href="#答题顺序" class="headerlink" title="答题顺序"></a>答题顺序</h2><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611200030569.png" alt="image-20240611200030569"></p><p><font color="red">审题：题目读三遍、否则不动笔</font></p><h1 id="审题三要素"><a href="#审题三要素" class="headerlink" title="审题三要素"></a>审题三要素</h1><ol><li><p>体裁<font color="red">essay&#x2F;letter&#x2F;news report&#x2F;proposal&#x2F;report&#x2F;advertisement</font></p></li><li><p>话题+内容要求</p></li><li><p>字数<font color="red">四级150左右；六级180左右</font></p><p><font color="red">数一行多少词*行数</font></p></li></ol><h3 id="范例：23年6月"><a href="#范例：23年6月" class="headerlink" title="范例：23年6月"></a>范例：23年6月</h3><p><strong>Drirctions</strong>:Suppose the student union of your university is originzing an online discussion on college students doing community service.Your are to write an essay on its benfits and the service you can provide to the community.You will have 30 minutes for this task and should write at least 120 words but no more than 180 words. </p><p>   <font color="red">体裁：essay话题：college students doing community service内容要求：benfuts+the service you can provide</font></p><h3 id="范例2：23年12月"><a href="#范例2：23年12月" class="headerlink" title="范例2：23年12月"></a>范例2：23年12月</h3><p><strong>Driections</strong>:Suppose your university is inviting submissions from students for its xoming edition on a campus event that has impressed them most.You will have 30 minutes for this task and should write at least 120 words but no more than 180 words.</p><p><font color="red">体裁：essay&#x2F;letter都可以话题：acampus event内容要求：impressed……most……</font></p><h3 id="范例3：22年6月"><a href="#范例3：22年6月" class="headerlink" title="范例3：22年6月"></a>范例3：22年6月</h3><p><strong>Driections</strong>：Suppose you are writing a proposal to your schoole library for improving its services.You are to write about its current problems and possible solutions to these problems.You will 30 minutes to write the proposal.You should write at least 120 words but no more than 180 words.</p><p><font color="red">体裁：letter&#x2F;essay话题：library service内容要求：current problems+solutions</font></p><p><strong>四六级作文不需要写题目</strong></p><p><font color="red">写对了不扣分，写错了扣分，不写也不扣分</font></p><h3 id="救命作文"><a href="#救命作文" class="headerlink" title="救命作文"></a>救命作文</h3><h4 id="内容层面的灵活：一例多用"><a href="#内容层面的灵活：一例多用" class="headerlink" title="内容层面的灵活：一例多用"></a>内容层面的灵活：一例多用</h4><ul><li><p>以TOEFL写作为例：（环境）</p></li><li><p>在你家周围建一个工厂，你是否同意？</p></li><li><p>你认为科学家对人类的贡献大还是艺术家对人类的贡献大？</p></li><li><p>你的职业梦想是什么？</p></li><li><p>如果让你发明一样机器，你会选择什么？</p></li><li><p>如果你有一笔钱，你会用它来做什么？</p></li></ul><h4 id="English-Learning"><a href="#English-Learning" class="headerlink" title="English Learning"></a>English Learning</h4><p>In the <a href="adj,%E5%BD%93%E4%BB%8A=current=present-day">contemporary</a> world,[it is of great significance for](it is very important for …to…) yougsters to learn English well.English learning,thus, has <a href="%E5%BE%97%E5%88%B0">gained</a> great popularity.[Based on a survey](According to an investigation,),a majority of international organizations or firms <a href="say/admit">acknowledge</a> that they <a href="v.%E5%81%8F%E7%88%B1">prefer</a> <a href="v.%E6%8B%9B%E5%8B%9F">recruting</a> <a href="n.,%E5%91%98%E5%B7%A5">employees</a> who can speak English fluently.</p><p>However,[a host of](many&#x3D;a great many&#x3D;a sea of&#x3D;a large number of……various&#x3D;diverse&#x3D;all kinds of&#x3D;&#x3D;A case in point is that) English learners may have a variety difficulties or troubles in learning.For instance,a large number of students find it difficult to <a href="v.%E8%AE%B0">memorize</a> new words.<a href="Often">Frequently</a>,<a href="%E5%B0%BD%E7%AE%A1">it is also difficult for</a> them to understand rules of English grammar.In addtiion,though some are good at reading or writing,they fail to <a href="%E8%87%AA%E6%88%91%E8%A1%A8%E8%BE%BE">express themselves</a> freely in oral English.</p><p>[巧妇难为无米之炊。](Without rice,even a smart wife will find it difficult tocook)find it+adj.+to do表感受</p><p> Then,how to [get a good command](学好&#x3D;master v.) if this language?[I deem that](I suppose&#x2F;reckon&#x2F;hold that认为) practice makes perfect.Only pratice can help me master grammatical knowledge and remember new words.Of course,it is also through practice that I can speak and write fluently,and there is no other way.If I try my utmost to practive English every day,the future of my English learning will be promising and hopeful.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apl">In the contemporary world,it is of great significance for yougsters to learn English well.English  learning,thus,has gaind great popularity.Baserd on a survey,a majority of international organizations of firms acknowledge that they prefer recruting employees who can speak English fluently.<br>However,a host of English learners may have a variety difficulties or troules in learning.For instance,a large number of students find it difficult to memorize new words.Frequently,it is also difficult for them to understand rules of English grammar.In addition,though some age good at reading or writing,they fail to express themselves freely in oral English.<br>Then,how to get a good command if this language?I deem that practice makes perfect.Only practice can help me master grammatical knowledge and remember new words.Of course,it is also through practice that I can speak and write fluently,and there is no other way.If I try my utmost to practive English every day,the future of my English learning will be promising and hopeful.<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614193203008.png" alt="image-20240614193203008"></p><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614193222574.png" alt="image-20240614193222574"></p><h1 id="翻译预测"><a href="#翻译预测" class="headerlink" title="翻译预测"></a>翻译预测</h1><p>现代建设成就 中国传统文化</p><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195251551.png" alt="image-20240614195251551"></p><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195531788.png" alt="image-20240614195531788"></p><h1 id="写作"><a href="#写作" class="headerlink" title="写作"></a><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195551015.png" alt="image-20240614195551015">写作</h1><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195904749.png" alt="image-20240614195904749"></p><p>浪费</p><p>Addition to online games will waste hours,lavish days and even squander years.</p><p>帮助</p><p>We should help others.</p><p>We should offer material support,financial aid,mental comfort and spirtual backup to those in the need of help.</p><p>成功</p><p>The confidence will help us accumlate wealth,establish career,fit into society and even attain social status.</p><p><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614201020725.png" alt="image-20240614201020725"></p>]]></content>
    
    
    
    <tags>
      
      <tag>英语四级</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥常规考点总结</title>
    <link href="/2024/05/30/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/"/>
    <url>/2024/05/30/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h2 id="基础DP"><a href="#基础DP" class="headerlink" title="基础DP"></a>基础DP</h2><h3 id="线性DP"><a href="#线性DP" class="headerlink" title="线性DP"></a>线性DP</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132127462.png" alt="image-20240526132127462"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132140926.png" alt="image-20240526132140926"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132149001.png" alt="image-20240526132149001"></p><h4 id="动态规划分析步骤"><a href="#动态规划分析步骤" class="headerlink" title="动态规划分析步骤"></a>动态规划分析步骤</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132222766.png" alt="image-20240526132222766"></p><h4 id="模板题——破损的楼梯"><a href="#模板题——破损的楼梯" class="headerlink" title="模板题——破损的楼梯"></a>模板题——<a href="https://www.lanqiao.cn/problems/3367/learning">破损的楼梯</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">3367 破损的楼梯</span><br><span class="hljs-string">https://www.lanqiao.cn/problems/3367/learning</span><br><span class="hljs-string"></span><br><span class="hljs-string">这是一个典型的线性DP问题，dp[i]表示到达第i阶楼梯的方法数</span><br><span class="hljs-string">状态转移方程：dp[i]=dp[i-1]+dp[i-2]</span><br><span class="hljs-string">状态压缩：dp[i]只与dp[i-1]和dp[i-2]有关，所以可以压缩</span><br><span class="hljs-string">时间复杂度：O(n)</span><br><span class="hljs-string">空间复杂度：O(n)</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>)<br>mod = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>)<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>vis = [<span class="hljs-number">0</span>] * N<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a: vis[i] = <span class="hljs-number">1</span><br>dp = [<span class="hljs-number">0</span>] * N<br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span> - vis[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> vis[i]:<br>        <span class="hljs-keyword">continue</span><br>    dp[i] = (dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]) % mod<br><span class="hljs-built_in">print</span>(dp[n])<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br>tp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a:<br>  tp[i]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>-tp[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">if</span> tp[i]==<span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">continue</span><br>  dp[i]=dp[i-<span class="hljs-number">1</span>]+dp[i-<span class="hljs-number">2</span>]<br>mod=<span class="hljs-number">10</span>**<span class="hljs-number">9</span>+<span class="hljs-number">7</span><br><span class="hljs-built_in">print</span>(dp[i]%mod)<br></code></pre></td></tr></table></figure><h3 id="二维DP"><a href="#二维DP" class="headerlink" title="二维DP"></a>二维DP</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132351934.png" alt="image-20240526132351934"></p><h4 id="分析步骤"><a href="#分析步骤" class="headerlink" title="分析步骤"></a>分析步骤</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132407561.png" alt="image-20240526132407561"></p><h4 id="模板题——数字三角形"><a href="#模板题——数字三角形" class="headerlink" title="模板题——数字三角形"></a>模板题——<a href="https://www.lanqiao.cn/problems/1536/learning">数字三角形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>dp = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j == <span class="hljs-number">0</span>:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">elif</span> j == i:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j] += <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>], dp[i - <span class="hljs-number">1</span>][j])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp[N - <span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132533080.png" alt="image-20240526132533080"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132546231.png" alt="image-20240526132546231"></p><h4 id="模板题——摆花"><a href="#模板题——摆花" class="headerlink" title="模板题——摆花"></a>模板题——<a href="https://www.lanqiao.cn/problems/389/learning">摆花</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">n种花凑 m盆 每种&lt;a[i]</span><br><span class="hljs-string">1.分解子问题</span><br><span class="hljs-string">前i种花，一共j盆，答案是dp[n][m]</span><br><span class="hljs-string">2.状态转移</span><br><span class="hljs-string">前i种花有j盆方案数  如何由前i-1种有j盆得出.</span><br><span class="hljs-string">以下每一种选择是一种方案</span><br><span class="hljs-string">第i种花可以选0盆,前i-1种花有j盆：dp[i][j] = dp[i-1][j]</span><br><span class="hljs-string">第i种花可以选1盆,前i-1种花有j-1盆：：dp[i][j] = dp[i-1][j-1]</span><br><span class="hljs-string">...</span><br><span class="hljs-string">第i种花可以选a[i]盆,前i-1种花有j-a[i]盆：：dp[i][j] = dp[i-1][j-a[i]]</span><br><span class="hljs-string">3.边界条件，每种花都不选</span><br><span class="hljs-string">前i种花 0盆 是 一种方案 dp[i][0] = 1</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>MOD = <span class="hljs-number">10</span> ** <span class="hljs-number">6</span> + <span class="hljs-number">7</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>):<br>    dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><span class="hljs-comment"># 状态转移,当下做出的选择，利用之前dp,求dp[i][j]</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(a[i],j)+<span class="hljs-number">1</span>):<br>            dp[i][j]+=dp[i-<span class="hljs-number">1</span>][j-k]<br>            dp[i][j]%=MOD<br><span class="hljs-built_in">print</span>(dp[n][m])<br></code></pre></td></tr></table></figure><h4 id="模板题——选数异或"><a href="#模板题——选数异或" class="headerlink" title="模板题——选数异或"></a>模板题——<a href="https://www.lanqiao.cn/problems/3711/learning">选数异或</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py">n,x = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>Mod = <span class="hljs-number">998244353</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"> dp[i][j]前i个正整数有j个子序列异或成 j 的方案；答案dp[n][x]</span><br><span class="hljs-string"> dp[i][j] = 选第i个数字 + 不选第i个数字</span><br><span class="hljs-string">          = dp[i - 1][j ^ a[i]] + dp[i - 1][j]   </span><br><span class="hljs-string">          (因为如果选了第i个数字，那么a[i] ^ 前数 = j, 所以：前数 = j ^ a[i])</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>dp = [[<span class="hljs-number">0</span>] * (<span class="hljs-number">64</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-comment"># 初始化为 0</span><br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">64</span>):<br>        dp[i][j] = (dp[i-<span class="hljs-number">1</span>][j] + dp[i-<span class="hljs-number">1</span>][j ^ a[i]]) % Mod<br><span class="hljs-built_in">print</span>(dp[n][x])<br></code></pre></td></tr></table></figure><h3 id="LIS"><a href="#LIS" class="headerlink" title="LIS"></a>LIS</h3><h4 id="最长上升子序列"><a href="#最长上升子序列" class="headerlink" title="最长上升子序列"></a>最长上升子序列</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132915221.png" alt="image-20240526132915221"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132923043.png" alt="image-20240526132923043"></p><h4 id="模板题——蓝桥勇士"><a href="#模板题——蓝桥勇士" class="headerlink" title="模板题——蓝桥勇士"></a>模板题——<a href="https://www.lanqiao.cn/problems/2049/learning">蓝桥勇士</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=[<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">1</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> a[i]&lt;a[j]:<br>      dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[i]+<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h4 id="模板题——合唱队形"><a href="#模板题——合唱队形" class="headerlink" title="模板题——合唱队形"></a>模板题——<a href="https://www.lanqiao.cn/problems/742/learning">合唱队形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp1 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp1[i]表示以i结尾的最长上升子序列长度</span><br>dp2 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp2[i]表示以i出发的最长下降子序列长度</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    dp1[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, i):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp1[i] = <span class="hljs-built_in">max</span>(dp1[i], dp1[j] + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    dp2[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp2[i] = <span class="hljs-built_in">max</span>(dp2[i], dp2[j] + <span class="hljs-number">1</span>)<br><br>ans = <span class="hljs-built_in">max</span>((dp1[i] + dp2[i] - <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(n-ans)<br></code></pre></td></tr></table></figure><h3 id="LCS"><a href="#LCS" class="headerlink" title="LCS"></a>LCS</h3><h4 id="最长公共子序列"><a href="#最长公共子序列" class="headerlink" title="最长公共子序列"></a>最长公共子序列</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133212404.png" alt="image-20240526133212404"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133222560.png" alt="image-20240526133222560"></p><h4 id="模板题——最长公共子序列"><a href="#模板题——最长公共子序列" class="headerlink" title="模板题——最长公共子序列"></a>模板题——<a href="https://www.lanqiao.cn/problems/1189/learning">最长公共子序列</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 这段代码实现的是计算两个序列（a 和 b）的最长公共子序列（Longest Common Subsequence, LCS）的长度。LCS 是一种在计算两个序列相似度时常用的度量方法。这个问题通常通过动态规划来解决。现在，我将逐步解释这段代码的各个部分：</span><br><br><span class="hljs-comment"># 输入处理</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>b = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment"># 首先，通过 input().split() 获取两个整数 n 和 m，分别表示序列 a 和 b 的长度。</span><br><span class="hljs-comment"># 接着，读取这两个序列，并在序列前面各自加上一个 0 作为哨兵值。这样做是为了让序列的索引从 1 开始，方便后续操作。</span><br><span class="hljs-comment"># 初始化动态规划数组</span><br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>)]  <span class="hljs-comment"># 注意这里是 m，不是 n</span><br>now = <span class="hljs-number">0</span>; old = <span class="hljs-number">1</span><br><span class="hljs-comment"># 初始化一个二维动态规划数组 dp，但这里只用到了两行（range(2)），目的是节省空间。因为在计算当前状态时，只需要用到前一行（即上一状态）的数据。m + 1 是因为考虑到从 0 开始到 m 的所有可能位置。</span><br><span class="hljs-comment"># now 和 old 变量用来在这两行之间切换，表示当前行和上一行。</span><br><span class="hljs-comment"># 动态规划过程</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    now, old = old, now<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j - <span class="hljs-number">1</span>], dp[old][j])<br>        <span class="hljs-keyword">if</span> a[i] == b[j]: <br>            dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j], dp[old][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>)<br><span class="hljs-comment"># 这部分是动态规划的核心。</span><br><span class="hljs-comment"># 外层循环遍历序列 a，内层循环遍历序列 b。</span><br><span class="hljs-comment"># dp[now][j] = max(dp[now][j - 1], dp[old][j])：当前状态是基于之前状态的最大值，这表示如果当前字符不匹配，LCS 长度不变。</span><br><span class="hljs-comment"># 如果当前位置的字符相等（a[i] == b[j]），则检查上一个状态的值并加一，即 dp[now][j] = max(dp[now][j], dp[old][j - 1] + 1)。这反映了找到了一个公共元素，因此当前的最长公共子序列长度增加了 1。</span><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-built_in">print</span>(dp[now][m])<br><span class="hljs-comment"># 最后，打印出最长公共子序列的长度，即在遍历完两个序列后，dp 数组最后一个元素（dp[now][m]）的值。</span><br><span class="hljs-comment"># 通过这种方式，代码高效地计算了两个序列的最长公共子序列的长度，同时通过只使用两行的动态规划数组大大减少了空间复杂度。</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133424736.png" alt="image-20240526133424736"></p><h2 id="背包DP"><a href="#背包DP" class="headerlink" title="背包DP"></a>背包DP</h2><h3 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133609206.png" alt="image-20240526133609206"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133623292.png" alt="image-20240526133623292"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133631379.png" alt="image-20240526133631379"></p><h4 id="模板题——小明的背包1"><a href="#模板题——小明的背包1" class="headerlink" title="模板题——小明的背包1"></a>模板题——<a href="https://www.lanqiao.cn/problems/1174/learning">小明的背包1</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j]    前i件物品，总体积不超过j 的最大价值</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j&gt;=wi:<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i-<span class="hljs-number">1</span>][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br>            <br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化"><a href="#滚动数组优化" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133913024.png" alt="image-20240526133913024"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133922038.png" alt="image-20240526133922038"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133928502.png" alt="image-20240526133928502"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">n,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[<span class="hljs-number">0</span>]*(V+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  w,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,w-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-w]+v)<br><span class="hljs-built_in">print</span>(dp[V])<br></code></pre></td></tr></table></figure><h3 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134436937.png" alt="image-20240526134436937"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134445527.png" alt="image-20240526134445527"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134453737.png" alt="image-20240526134453737"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134501798.png" alt="image-20240526134501798"></p><h4 id="模板题——小明的背包2"><a href="#模板题——小明的背包2" class="headerlink" title="模板题——小明的背包2"></a>模板题——<a href="https://www.lanqiao.cn/problems/1175/learning">小明的背包2</a></h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134640485.png" alt="image-20240526134640485"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># dp[i][j]=max(dp[i-1][j],dp[i][j-wi]+vi)  不取或在先前基础上取第i种（所以可以取多次）</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span>  i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> (j&gt;=wi):<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-1"><a href="#滚动数组优化-1" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N, V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>items = []<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    w, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    items.append((w, v))<br>dp = [<span class="hljs-number">0</span>] * (V + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, V + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> w, v <span class="hljs-keyword">in</span> items:<br>        <span class="hljs-keyword">if</span> i &gt;= w:<br>            dp[i] = <span class="hljs-built_in">max</span>(dp[i], dp[i - w] + v)<br><span class="hljs-built_in">print</span>(dp[V])<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">读取输入的商场物品数量N和小明的背包容量V，以及每种物品的体积和价值。</span><br><span class="hljs-string">初始化一个长度为V+1的动态规划数组dp，dp[i]表示背包容量为i时所能获得的最大价值。</span><br><span class="hljs-string">使用动态规划求解，外层循环遍历背包容量从1到V，内层循环遍历每种物品，更新dp[i]的值为dp[i-w]+v和当前dp[i]的较大值。</span><br><span class="hljs-string">输出dp[V]即为小明所能获得的最大价值。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134702358.png" alt="image-20240526134702358"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134710379.png" alt="image-20240526134710379"></p><h4 id="模板题——小明的背包3"><a href="#模板题——小明的背包3" class="headerlink" title="模板题——小明的背包3"></a>模板题——<a href="https://www.lanqiao.cn/problems/1176/learning">小明的背包3</a></h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134904431.png" alt="image-20240526134904431"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134915203.png" alt="image-20240526134915203"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134922223.png" alt="image-20240526134922223"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134930677.png" alt="image-20240526134930677"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j] =max(dp[i][j],dp[i-1][j-k*wi]+k*vi)  k属于(0，si)</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi,si=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">min</span>(si,j//wi)+<span class="hljs-number">1</span>):<br><br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-k*wi]+k*vi)<br><br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-2"><a href="#滚动数组优化-2" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py">N,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>w,v,s=[[<span class="hljs-number">0</span>]*(N+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)]<br>dp=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  w[i],v[i],s[i]=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]):<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> w[i]&lt;=k:<br>        dp[k]=<span class="hljs-built_in">max</span>(dp[k-w[i]]+v[i],dp[k])<br><span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="二维费用背包-分组背包"><a href="#二维费用背包-分组背包" class="headerlink" title="二维费用背包&amp;分组背包"></a>二维费用背包&amp;分组背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526135531593.png" alt="image-20240526135531593"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526135538566.png" alt="image-20240526135538566"></p><h4 id="模板题——小蓝的神秘行囊"><a href="#模板题——小蓝的神秘行囊" class="headerlink" title="模板题——小蓝的神秘行囊"></a>模板题——<a href="https://www.lanqiao.cn/problems/3937/learning">小蓝的神秘行囊</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><br>n, v, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>dp = [[<span class="hljs-number">0</span>]*(v + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    volume, mass, value = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i &gt;= mass <span class="hljs-keyword">and</span> j &gt;= volume:<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i-mass][j-volume] + value)<br><span class="hljs-built_in">print</span>(dp[m][v])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py">n,v,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    vi,mi,wi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v,vi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m,mi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            dp[j][k] =<span class="hljs-built_in">max</span>(dp[j][k],dp[j-vi][k-mi]+wi)<br>           <br><span class="hljs-built_in">print</span>(dp[v][m])<br></code></pre></td></tr></table></figure><h2 id="树形DP"><a href="#树形DP" class="headerlink" title="树形DP"></a>树形DP</h2><h2 id="状压DP"><a href="#状压DP" class="headerlink" title="状压DP"></a>状压DP</h2><h2 id="数位DP"><a href="#数位DP" class="headerlink" title="数位DP"></a>数位DP</h2><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100046139.png" alt="image-20240526100046139"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100057701.png" alt="image-20240526100057701"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100110562.png" alt="image-20240526100110562"></p><h3 id="KMP算法"><a href="#KMP算法" class="headerlink" title="KMP算法"></a>KMP算法</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100136410.png" alt="image-20240526100136410"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100148837.png" alt="image-20240526100148837"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100157890.png" alt="image-20240526100157890"></p><p> <img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100211778.png" alt="image-20240526100211778"><br> <img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100221657.png" alt="image-20240526100221657"></p><h4 id="模板题——斤斤计较的小Z"><a href="#模板题——斤斤计较的小Z" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py">Next = [<span class="hljs-number">0</span>] * <span class="hljs-number">1000010</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_next</span>(<span class="hljs-params">T</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(T)):<br>        j = Next[i]<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> T[i] != T[j]:<br>            j = Next[j]<br>        <span class="hljs-keyword">if</span> T[i] == T[j]:<br>            Next[i + <span class="hljs-number">1</span>] = j + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            Next[i + <span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">KMP</span>(<span class="hljs-params">s,t</span>):<br>    get_next(t)<br>    ans = <span class="hljs-number">0</span><br>    j = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> s[i] != t[j]:<br>            j =  Next[j]<br>        <span class="hljs-keyword">if</span> s[i] == t[j]:<br>            j += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> j == <span class="hljs-built_in">len</span>(t):<br>            ans += <span class="hljs-number">1</span><br>            j =  Next[j]<br>    <span class="hljs-keyword">return</span> ans<br>t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br><span class="hljs-built_in">print</span>(KMP(s,t))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-built_in">print</span>((<span class="hljs-keyword">lambda</span> s: <span class="hljs-built_in">input</span>().count(s))(<span class="hljs-built_in">input</span>()))<br></code></pre></td></tr></table></figure><h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><h3 id="字符串哈希"><a href="#字符串哈希" class="headerlink" title="字符串哈希"></a>字符串哈希</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100452881.png" alt="image-20240526100452881"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100509262.png" alt="image-20240526100509262"></p><h4 id="模板题——斤斤计较的小Z-1"><a href="#模板题——斤斤计较的小Z-1" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py">t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br>m,n = <span class="hljs-built_in">len</span>(t), <span class="hljs-built_in">len</span>(s)<br>B = <span class="hljs-number">26</span><br>mod = <span class="hljs-number">1000000007</span><br><span class="hljs-built_in">hash</span> = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">hash</span>[i] = <span class="hljs-built_in">hash</span>[i - <span class="hljs-number">1</span>] * B + <span class="hljs-built_in">ord</span>(s[i - <span class="hljs-number">1</span>]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    <span class="hljs-built_in">hash</span>[i] %= mod<br><br>numT = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> t:<br>    numT = numT * B + <span class="hljs-built_in">ord</span>(c) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    numT %= mod<br>    <br>p = (B ** m) % mod<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n +<span class="hljs-number">1</span>):<br>    r = l + m - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> r &gt; n:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">hash</span>[r] - <span class="hljs-built_in">hash</span>[l - <span class="hljs-number">1</span>] * p % mod + mod) % mod == numT:<br>        ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><h1 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h1><h2 id="二项式定理"><a href="#二项式定理" class="headerlink" title="二项式定理"></a>二项式定理</h2><h2 id="容斥原理"><a href="#容斥原理" class="headerlink" title="容斥原理"></a>容斥原理</h2><h2 id="排列组合"><a href="#排列组合" class="headerlink" title="排列组合"></a>排列组合</h2><h2 id="模意义下的逆元"><a href="#模意义下的逆元" class="headerlink" title="模意义下的逆元"></a>模意义下的逆元</h2><h2 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h2><h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><h5 id="RMQ问题"><a href="#RMQ问题" class="headerlink" title="RMQ问题"></a>RMQ问题</h5><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183506581.png" alt="image-20240524183506581"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183726055.png" alt="image-20240524183726055"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183742068.png" alt="image-20240524183742068"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183753258.png" alt="image-20240524183753258"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183803151.png" alt="image-20240524183803151"></p><h2 id="平衡树"><a href="#平衡树" class="headerlink" title="平衡树"></a>平衡树</h2><h3 id="平衡树-Splay"><a href="#平衡树-Splay" class="headerlink" title="平衡树-Splay"></a>平衡树-Splay</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122034271.png" alt="image-20240526122034271"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122046309.png" alt="image-20240526122046309"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122055269.png" alt="image-20240526122055269"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122104347.png" alt="image-20240526122104347"></p><h3 id="平衡树-FHQ-Treap"><a href="#平衡树-FHQ-Treap" class="headerlink" title="平衡树-FHQ_Treap"></a>平衡树-FHQ_Treap</h3><h4 id="无旋Treap"><a href="#无旋Treap" class="headerlink" title="无旋Treap"></a>无旋Treap</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115339167.png" alt="image-20240526115339167"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115350766.png" alt="image-20240526115350766"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115359404.png" alt="image-20240526115359404"></p><h4 id="无旋Treap的结构"><a href="#无旋Treap的结构" class="headerlink" title="无旋Treap的结构"></a>无旋Treap的结构</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115559180.png" alt="image-20240526115559180"></p><h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115614042.png" alt="image-20240526115614042"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115623744.png" alt="image-20240526115623744"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115634558.png" alt="image-20240526115634558"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115644061.png" alt="image-20240526115644061"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115650541.png" alt="image-20240526115650541"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115656903.png" alt="image-20240526115656903"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115703005.png" alt="image-20240526115703005"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115710056.png" alt="image-20240526115710056"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115715945.png" alt="image-20240526115715945"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115721051.png" alt="image-20240526115721051"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115727235.png" alt="image-20240526115727235"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115734944.png" alt="image-20240526115734944"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115740418.png" alt="image-20240526115740418"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115746149.png" alt="image-20240526115746149"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115751158.png" alt="image-20240526115751158"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115755059.png" alt="image-20240526115755059"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115800730.png" alt="image-20240526115800730"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115804490.png" alt="image-20240526115804490"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115808715.png" alt="image-20240526115808715"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115813454.png" alt="image-20240526115813454"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115817884.png" alt="image-20240526115817884"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115823342.png" alt="image-20240526115823342"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115830400.png" alt="image-20240526115830400"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115835300.png" alt="image-20240526115835300"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115839426.png" alt="image-20240526115839426"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115847061.png" alt="image-20240526115847061"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115851600.png" alt="image-20240526115851600"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115858903.png" alt="image-20240526115858903"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115904405.png" alt="image-20240526115904405"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115910595.png" alt="image-20240526115910595"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115916421.png" alt="image-20240526115916421"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115922564.png" alt="image-20240526115922564"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115926736.png" alt="image-20240526115926736"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115931678.png" alt="image-20240526115931678"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115936852.png" alt="image-20240526115936852"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115942072.png" alt="image-20240526115942072"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115948947.png" alt="image-20240526115948947"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115954070.png" alt="image-20240526115954070"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115959511.png" alt="image-20240526115959511"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120003232.png" alt="image-20240526120003232"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120022163.png" alt="image-20240526120022163"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120026713.png" alt="image-20240526120026713"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120031817.png" alt="image-20240526120031817"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120036416.png" alt="image-20240526120036416"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120040832.png" alt="image-20240526120040832"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120053497.png" alt="image-20240526120053497"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120100194.png" alt="image-20240526120100194"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120104721.png" alt="image-20240526120104721"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120109696.png" alt="image-20240526120109696"></p><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> val;<br>    <span class="hljs-type">int</span> cnt;<br>    <span class="hljs-type">int</span> rev;<br>    <span class="hljs-type">int</span> prio;<br>    <span class="hljs-type">int</span> size;<br>    <span class="hljs-type">int</span> ch[<span class="hljs-number">2</span>];<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FHQTREAP</span> &#123;</span><br>    <span class="hljs-type">int</span> root;<br>    <span class="hljs-type">int</span> size;<br>    NODE node[MAXN];<br>&#125;<br><br><span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_val</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-keyword">if</span> (node[t].val &lt;= val) &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">1</span>], val);<br>        node[t].ch[<span class="hljs-number">1</span>] = tmp.first;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, tmp.second&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">0</span>], val);<br>        node[t].ch[<span class="hljs-number">0</span>] = tmp.second;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;tmp.first, t&#125;;<br>    &#125;<br>&#125;<br><br>tuple&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_rank</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    <span class="hljs-keyword">if</span> (k &lt;= node[node[t].ch[<span class="hljs-number">0</span>]].size()) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">0</span>], k);<br>        node[t].ch[<span class="hljs-number">0</span>] = rt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, mt, t&#125;;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k &gt; node[node[t]].ch[<span class="hljs-number">0</span>].size() + node[t].cnt) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">1</span>], k - node[node[t].ch[<span class="hljs-number">0</span>]].size() - node[t].cnt);<br>        node[t].ch[<span class="hljs-number">1</span>] = lt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, mt, rt&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = node[t].ch[<span class="hljs-number">0</span>];<br>        rt = node[t].ch[<span class="hljs-number">1</span>];<br>        check_rev(lt);<br>        check_rev(rt);<br>        node[t].ch[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        upda[t].ch[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, t, rt&#125;;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> lt, <span class="hljs-type">int</span> rt)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!lt) &#123;<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!rt) &#123;<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125;<br>    check_rev(lt);<br>    check_rev(rt);<br>    <span class="hljs-keyword">if</span> (node[lt].prio &lt; node[rt].prio) &#123;<br>        node[lt].ch[<span class="hljs-number">1</span>] = merge(node[lt].ch[<span class="hljs-number">1</span>], rt);<br>        update_size(lt);<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[rt].ch[<span class="hljs-number">0</span>] = merge(lt, node[rt].ch[<span class="hljs-number">0</span>]);<br>        update_size(rt);<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (!mt) &#123;<br>        mt = new_node(val);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[mt].cnt ++;<br>        update_size(mt);<br>    &#125;<br>    root = merge(merge(lt, mt), rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">del</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    unode[mt].cnt --;<br>    update_size(mt);<br>    <span class="hljs-keyword">if</span> (node[mt].cnt == <span class="hljs-number">0</span>) &#123;<br>        clear(mt);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = merge(lt, mt);<br>    &#125;<br>    root = merge(lt, rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-type">int</span> t1, t2, t3, t4, t5;<br>    tie(t1, t2, t3) = split_by_rank(root, l - <span class="hljs-number">1</span>);<br>    tie(t3, t4, t5) = split_by_ranl(t3, r - l + <span class="hljs-number">2</span>);<br>    node[t3].rev = <span class="hljs-number">1</span>;<br>    root = merge(merge(merge(merge(t1, t2), t3), t4), t5);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">check_rev</span><span class="hljs-params">(<span class="hljs-type">int</span> t)</span> &#123;<br>    <span class="hljs-keyword">if</span> (node[t].rev) &#123;<br>        swap(node[t].ch[<span class="hljs-number">0</span>], node[t].ch[<span class="hljs-number">1</span>]);<br>        node[node[t].ch[<span class="hljs-number">0</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[node[t].ch[<span class="hljs-number">1</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[t].rev = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">rank</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = node[tmp.first].size + <span class="hljs-number">1</span>;<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">kth</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, mt, rt) = split_by_rank(t, k);<br>    <span class="hljs-type">int</span> val = node[mt].val;<br>    t = merge(merge(lt, mt), rt);<br>    <span class="hljs-keyword">return</span> val;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">pre</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_cal(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = kth(tmp.first, node[tmp.first].size);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">nxt</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val);<br>    <span class="hljs-type">int</span> k = kth(tmp.second, <span class="hljs-number">1</span>);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><h3 id="基础并查集"><a href="#基础并查集" class="headerlink" title="基础并查集"></a>基础并查集</h3><h4 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194242229.png" alt="image-20240524194242229"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194253527.png" alt="image-20240524194253527"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194301781.png" alt="image-20240524194301781"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194309669.png" alt="image-20240524194309669"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194317881.png" alt="image-20240524194317881"></p><h5 id="模板题——蓝桥幼儿园"><a href="#模板题——蓝桥幼儿园" class="headerlink" title="模板题——蓝桥幼儿园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1135/learning">蓝桥幼儿园</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def Findroot(x):</span><br><span class="hljs-comment">#     while x!=p[x]:</span><br><span class="hljs-comment">#         x=p[x]</span><br><span class="hljs-comment">#     return x</span><br><span class="hljs-string">&#x27;&#x27;&#x27;使用路径压缩&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Findroot</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>    <span class="hljs-comment">#路径压缩</span><br>    p[x]=Findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Merge</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    p[rootx]=rooty<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Query</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    <span class="hljs-keyword">return</span> rootx==rooty<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    op,x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> op ==<span class="hljs-number">1</span>:<br>        Merge(x,y)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> Query(x,y):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="路径压缩"><a href="#路径压缩" class="headerlink" title="路径压缩"></a>路径压缩</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524195007281.png" alt="image-20240524195007281"></p><h5 id="模板题——星球大战"><a href="#模板题——星球大战" class="headerlink" title="模板题——星球大战"></a>模板题——<a href="https://www.lanqiao.cn/problems/828/learning/">星球大战</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>M = <span class="hljs-number">200010</span>; N = <span class="hljs-number">2</span> * M<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>father = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                 <span class="hljs-comment">#并查集板块</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">10</span>):<br>        father[i] = i<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_father</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x != father[x]: father[x] = find_father(father[x])<br>    <span class="hljs-keyword">return</span> father[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">unite</span>(<span class="hljs-params">x, y</span>):<br>    father[find_father(x)] = find_father(y)<br>come = [<span class="hljs-number">0</span>] * N; to = [<span class="hljs-number">0</span>] * N;   <span class="hljs-comment">#存储每个边</span><br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]      <span class="hljs-comment">#邻接表</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[a].append(b); g[b].append(a)<br>    come[i] = a; to[i] = b <br>broken = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                     <span class="hljs-comment">#记录每个点是否被修坏</span><br>destroy = []<br>k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    b = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    broken[b] = <span class="hljs-number">1</span><br>    destroy.append(b)<br>init()<br>res = n - k             <span class="hljs-comment">#先计算所有剩下星球的连通块数，(最后一轮的结果)</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    l = come[i]; r = to[i]<br>    fl, fr = find_father(l), find_father(r)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[l] <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> broken[r] <span class="hljs-keyword">and</span> fl != fr:<br>        res -= <span class="hljs-number">1</span><br>        <span class="hljs-comment">#unite(l, r)</span><br>        father[fl] = fr<br>ans = [res]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(destroy) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):       <span class="hljs-comment">#顺序破坏，相当于倒序修建</span><br>    c = destroy[i]<br>    broken[c] = <span class="hljs-number">0</span><br>    res += <span class="hljs-number">1</span>                                    <span class="hljs-comment">#修好一个星球，连通块会多一个</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> g[c]:<br>        fc, fp = find_father(c), find_father(j)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[j] <span class="hljs-keyword">and</span> fc != fp:<br>            res -= <span class="hljs-number">1</span><br>            father[fc] = fp<br>    ans.append(res)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ans) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):           <span class="hljs-comment">#倒序输出结果</span><br>    <span class="hljs-built_in">print</span>(ans[i])<br></code></pre></td></tr></table></figure><h3 id="可撤销并查集"><a href="#可撤销并查集" class="headerlink" title="可撤销并查集"></a>可撤销并查集</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203431727.png" alt="image-20240524203431727"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203449967.png" alt="image-20240524203449967"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203621861.png" alt="image-20240524203621861"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203634004.png" alt="image-20240524203634004"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203643547.png" alt="image-20240524203643547"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203712193.png" alt="image-20240524203712193"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203728659.png" alt="image-20240524203728659"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203741431.png" alt="image-20240524203741431"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203752845.png" alt="image-20240524203752845"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203808480.png" alt="image-20240524203808480"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203837465.png" alt="image-20240524203837465"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203855506.png" alt="image-20240524203855506"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203906020.png" alt="image-20240524203906020"></p><h4 id="可撤销并查集定义"><a href="#可撤销并查集定义" class="headerlink" title="可撤销并查集定义"></a>可撤销并查集定义</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203916807.png" alt="image-20240524203916807"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203959912.png" alt="image-20240524203959912"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204009818.png" alt="image-20240524204009818"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204018333.png" alt="image-20240524204018333"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204035190.png" alt="image-20240524204035190"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204043804.png" alt="image-20240524204043804"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204055615.png" alt="image-20240524204055615"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204106056.png" alt="image-20240524204106056"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204120154.png" alt="image-20240524204120154"></p><h4 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204147436.png" alt="image-20240524204147436"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204158246.png" alt="image-20240524204158246"></p><h3 id="带权并查集"><a href="#带权并查集" class="headerlink" title="带权并查集"></a>带权并查集</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102401075.png" alt="image-20240526102401075"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102412755.png" alt="image-20240526102412755"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102423880.png" alt="image-20240526102423880"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102443080.png" alt="image-20240526102443080"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102451528.png" alt="image-20240526102451528"></p><h2 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h2><h4 id="lowbit操作"><a href="#lowbit操作" class="headerlink" title="lowbit操作"></a>lowbit操作</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113101030.png" alt="image-20240526113101030"></p><h4 id="树状数组-1"><a href="#树状数组-1" class="headerlink" title="树状数组"></a>树状数组</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113114986.png" alt="image-20240526113114986"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113123838.png" alt="image-20240526113123838"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113132131.png" alt="image-20240526113132131"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113141135.png" alt="image-20240526113141135"></p><h4 id="模板题——单点修改，区间查询"><a href="#模板题——单点修改，区间查询" class="headerlink" title="模板题——单点修改，区间查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/2340/learning/">单点修改，区间查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs py">N = <span class="hljs-number">100100</span><br><span class="hljs-comment">#初始化树状数组 为0</span><br>f = [<span class="hljs-number">0</span>] * N<br><br><span class="hljs-comment">#求下标为x的最小区间长度</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; (-x)<br><br><span class="hljs-comment">#树状数组更新函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">upd</span>(<span class="hljs-params">pos,v</span>):<span class="hljs-comment">#pos：下标 v：值</span><br>    <span class="hljs-comment">#在下标为pos的区间加上v 并且在每个有包含pos的大区间加上v</span><br>    <span class="hljs-comment">#包含当前区间的大区间：在pos的位置上加lowbit(pos)便能得到大区间</span><br>    <span class="hljs-keyword">while</span> pos &lt;= n:<br>        f[pos] += v<br>        pos += lowbit(pos)<br><br><span class="hljs-comment">#得到1-pos位置的前缀和</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<span class="hljs-comment">#加上组成pos每一个区间的和</span><br>        res += f[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>data = <span class="hljs-built_in">input</span>().split()<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n):<br>    x = <span class="hljs-built_in">int</span>(data[i])<br>    <span class="hljs-comment">#树状数组初始化都为0，需要将原数组每个值通过upd方法将每个值加入树状数组</span><br>    upd(i+<span class="hljs-number">1</span>,x)<br><br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    opt,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-number">1</span>:<br>        upd(a,b)<span class="hljs-comment">#更新</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment">#区间[a,b] = [1,b] - [1,a-1]</span><br>        <span class="hljs-built_in">print</span>(get(b) - get(a-<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>n = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  s,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">1</span>:<br>    n[a-<span class="hljs-number">1</span>] += b<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">2</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(n[a-<span class="hljs-number">1</span>:b]))<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113358856.png" alt="image-20240526113358856"></p><h4 id="树状数组-2"><a href="#树状数组-2" class="headerlink" title="树状数组"></a>树状数组</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113430755.png" alt="image-20240526113430755"></p><h4 id="模板题——殷老师排队"><a href="#模板题——殷老师排队" class="headerlink" title="模板题——殷老师排队"></a>模板题——<a href="https://www.lanqiao.cn/problems/3620/learning/">殷老师排队</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">return</span> x &amp; (-x)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>  ans = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">while</span> x:<br>    ans += tree[x]<br>    x -= lowbit(x)<br>  <span class="hljs-keyword">return</span> ans <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-keyword">while</span> x &lt;= n:<br>    tree[x] += y<br>    x += lowbit(x)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a =[<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>tree = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  add(i,a[i])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  lt = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>  <span class="hljs-keyword">if</span> lt[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:<br>    x, y = lt[<span class="hljs-number">1</span>], lt[<span class="hljs-number">2</span>]<br>    add(x,y - a[x])<br>    a[x] = y<br>  <span class="hljs-keyword">else</span>:<br>    x = lt[<span class="hljs-number">1</span>]<br>    ans = (<span class="hljs-number">2</span> * x - n - <span class="hljs-number">2</span>) * a[x] + query(n) - <span class="hljs-number">2</span>*query(x-<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h3 id="二维树状数组"><a href="#二维树状数组" class="headerlink" title="二维树状数组"></a>二维树状数组</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113722203.png" alt="image-20240526113722203"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113730769.png" alt="image-20240526113730769"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113742110.png" alt="image-20240526113742110"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113748208.png" alt="image-20240526113748208"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113754750.png" alt="image-20240526113754750"></p><h4 id="模板题——"><a href="#模板题——" class="headerlink" title="模板题——"></a>模板题——</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113904670.png" alt="image-20240526113904670"></p><h3 id="树状数组上二分"><a href="#树状数组上二分" class="headerlink" title="树状数组上二分"></a>树状数组上二分</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113950824.png" alt="image-20240526113950824"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113958446.png" alt="image-20240526113958446"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114007562.png" alt="image-20240526114007562"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114020291.png" alt="image-20240526114020291"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114102890.png" alt="image-20240526114102890"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114113384.png" alt="image-20240526114113384"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114124229.png" alt="image-20240526114124229"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114131782.png" alt="image-20240526114131782"></p><h4 id="模板题——-1"><a href="#模板题——-1" class="headerlink" title="模板题——"></a>模板题——</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python">maxn = <span class="hljs-number">110000</span><br>ans = [<span class="hljs-number">0</span>] * maxn<br>tree = [<span class="hljs-number">0</span>] * maxn<br>a = [<span class="hljs-number">0</span>] * maxn<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; -x<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">pos, x</span>):<br>    <span class="hljs-keyword">while</span> pos &lt; maxn:<br>        tree[pos] += x<br>        pos += lowbit(pos)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<br>        res += tree[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split()))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    a[i] = nums[i - <span class="hljs-number">1</span>]<br>    add(i, <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    l, r = <span class="hljs-number">1</span>, n<br>    <span class="hljs-keyword">while</span> l &lt;= r:<br>        mid = (l + r) // <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> query(mid) &lt; a[i] + <span class="hljs-number">1</span>:<br>            l = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            r = mid - <span class="hljs-number">1</span><br>    ans[i] = r<br>    add(r, -<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(ans[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="线段树"><a href="#线段树" class="headerlink" title="线段树"></a>线段树</h2><h3 id="线段树-动态开点"><a href="#线段树-动态开点" class="headerlink" title="线段树-动态开点"></a>线段树-动态开点</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121216936.png" alt="image-20240526121216936"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121240169.png" alt="image-20240526121240169"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121250475.png" alt="image-20240526121250475"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121357462.png" alt="image-20240526121357462"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121408234.png" alt="image-20240526121408234"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121446955.png" alt="image-20240526121446955"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121517887.png" alt="image-20240526121517887"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121505465.png" alt="image-20240526121505465"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121533131.png" alt="image-20240526121533131"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121542078.png" alt="image-20240526121542078"></p><h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121653108.png" alt="image-20240526121653108"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Tree</span> &#123;</span><br>    <span class="hljs-type">int</span> l, r, n, ls, rs;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++ cnt;<br>        tree[t].l = l;<br>        tree[t].r = r;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        tree[t].n = n;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        update(tree[t].ls, l, mid, pos, n);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(tree[t].rs, mid + <span class="hljs-number">1</span>, r, pos, n);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getnum</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (tree[t].l == l &amp;&amp; tree[t].r == r) &#123;<br>        <span class="hljs-keyword">return</span> tree[t].n;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (tree[t].l + tree[t].r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].rs, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, mid) + getnum(tree[t].rs, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树-标记永久化"><a href="#线段树-标记永久化" class="headerlink" title="线段树-标记永久化"></a>线段树-标记永久化</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121717724.png" alt="image-20240526121717724"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121729855.png" alt="image-20240526121729855"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121746997.png" alt="image-20240526121746997"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121821681.png" alt="image-20240526121821681"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121831175.png" alt="image-20240526121831175"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121847400.png" alt="image-20240526121847400"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121855524.png" alt="image-20240526121855524"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121904894.png" alt="image-20240526121904894"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121912575.png" alt="image-20240526121912575"></p><h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> *v)</span> &#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        _v[t] = v[l];<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    build(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, v);<br>    build(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, v);<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] + _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> k)</span> &#123;<br>    _v[t] += k * (r - l + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        _laz[t] += k;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, k);<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, k);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> sum)</span> &#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t] + sum * (_r[t] - _l[t] + <span class="hljs-number">1</span>);;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, sum + _laz[t])<br>            + getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, sum + _laz[t]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护矩阵"><a href="#线段树维护矩阵" class="headerlink" title="线段树维护矩阵"></a>线段树维护矩阵</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124453903.png" alt="image-20240526124453903"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124459467.png" alt="image-20240526124459467"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124505523.png" alt="image-20240526124505523"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124509905.png" alt="image-20240526124509905"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124524019.png" alt="image-20240526124524019"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124529840.png" alt="image-20240526124529840"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124537171.png" alt="image-20240526124537171"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124545230.png" alt="image-20240526124545230"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    _v[t] = _E;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> pos, MATRIX &amp;v)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] = _r[t]) &#123;<br>        _v[t] = v;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span>, pos, v);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, pos, v);<br>    &#125;<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] * _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-function">MATRIX <span class="hljs-title">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t];<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid) * <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护哈希"><a href="#线段树维护哈希" class="headerlink" title="线段树维护哈希"></a>线段树维护哈希</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124653609.png" alt="image-20240526124653609"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124700848.png" alt="image-20240526124700848"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124710439.png" alt="image-20240526124710439"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124717847.png" alt="image-20240526124717847"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124726230.png" alt="image-20240526124726230"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124754241.png" alt="image-20240526124754241"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs py">bs1= []<br>bs2= []<br>mod1 = <span class="hljs-number">998244353</span><br>mod2 = <span class="hljs-number">19260817</span><br>bas = <span class="hljs-number">233</span><br>s = []<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">asdf</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, h1, h2, length</span>):<br>        self.h1 = h1<br>        self.h2 = h2<br>        self.length = length<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> asdf((self.h1 * bs1[c.length] + c.h1) % mod1, (self.h2 * bs2[c.length] + c.h2) % mod2, self.length + c.length)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> self.h1 == c.h1 <span class="hljs-keyword">and</span> self.h2 == c.h2 <span class="hljs-keyword">and</span> self.length == c.length<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">l, r, rt</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    s[rt] = build(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>) + build((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">l, r, rt, x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt;= l <span class="hljs-keyword">and</span> r &lt;= y:<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> y &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y)<br>    <span class="hljs-keyword">if</span> x &gt; (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br>    <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y) + query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">l, r, rt, ad, ch</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(ch), <span class="hljs-built_in">ord</span>(ch), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> ad &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        s[rt] = modify(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, ad, ch) + s[rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        s[rt] = s[rt * <span class="hljs-number">2</span>] + modify((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, ad, ch)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = <span class="hljs-built_in">input</span>()<br>a = <span class="hljs-string">&quot;!&quot;</span> + a<br>bs1.append(<span class="hljs-number">1</span>)<br>bs2.append(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    bs1.append(bs1[i]*bas%mod1)<br>    bs2.append(bs2[i]*bas%mod2)<br>s = [<span class="hljs-literal">None</span>] * (<span class="hljs-number">4</span> * (n+<span class="hljs-number">5</span>))<br>build(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>)<br><br>q = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    ls=<span class="hljs-built_in">input</span>().split()<br>    opt = ls[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        ad = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        ch = ls[<span class="hljs-number">2</span>]<br>        modify(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, <span class="hljs-built_in">int</span>(ad), ch)<br>    <span class="hljs-keyword">else</span>:<br>        l1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        r1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">2</span>])<br>        l2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">3</span>])<br>        r2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">4</span>])<br>        x = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l1, r1)<br>        y = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l2, r2)<br>        <span class="hljs-keyword">if</span> x == y:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="可持久化线段树"><a href="#可持久化线段树" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122146448.png" alt="image-20240526122146448"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122158524.png" alt="image-20240526122158524"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122211004.png" alt="image-20240526122211004"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122219620.png" alt="image-20240526122219620"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122228761.png" alt="image-20240526122228761"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122248198.png" alt="image-20240526122248198"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122258158.png" alt="image-20240526122258158"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122329330.png" alt="image-20240526122329330"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122339224.png" alt="image-20240526122339224"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122353739.png" alt="image-20240526122353739"></p><h4 id="可持久化线段树-1"><a href="#可持久化线段树-1" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> v, ls, rs;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SEGTREE</span> &#123;</span><br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> root[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>    NODE node[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">SEGTREE::update</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-type">_t</span>, <span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++cnt;<br>        node[t].v = node[<span class="hljs-type">_t</span>].v;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        node[t].v += k;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        node[t].rs = node[<span class="hljs-type">_t</span>].rs;<br>        update(node[<span class="hljs-type">_t</span>].ls, node[t].ls, l, mid, pos, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[t].ls = node[<span class="hljs-type">_t</span>].ls;<br>        update(node[<span class="hljs-type">_t</span>]).rs, node[t].rs, mid + <span class="hljs-number">1</span>, r, pos, k);<br>    &#125;<br>    node[t].v = node[node[t].ls].v + node[node[t].rs].v;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">SEGTREE::getV</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> _l, <span class="hljs-type">int</span> _r, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == _l &amp;&amp; r == _r) &#123;<br>        <span class="hljs-keyword">return</span> node[t].v;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l + _r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, mid)<br>            + getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="模板题——区间第k小"><a href="#模板题——区间第k小" class="headerlink" title="模板题——区间第k小"></a>模板题——<a href="https://www.lanqiao.cn/problems/1132/learning/">区间第k小</a></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> lc(x) tr[x].l</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rc(x) tr[x].r</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">6</span>;<br><span class="hljs-type">int</span> n,m,a[N],b[N];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br> <span class="hljs-type">int</span> l,r,s;<span class="hljs-comment">//左右儿子，该节点在值域中的个数</span><br>&#125;tr[N*<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> idx,root[N];<br><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;x,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span><br>&#123;<br>    x=++idx;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> ;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    build(lc(x),l,mid);<br>    build(rc(x),mid+<span class="hljs-number">1</span>,r);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> &amp;y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> v)</span><br>&#123;<br>    y=++idx;<br>    tr[y]=tr[x];<br>    tr[y].s++;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(v&lt;=mid)<br>        update(lc(x),lc(y),l,mid,v);<br>    <span class="hljs-keyword">else</span><br>        update(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,v);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> k)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> l;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> s=tr[lc(y)].s-tr[lc(x)].s;<br>    <span class="hljs-keyword">if</span>(k&lt;=s)<br>        <span class="hljs-keyword">return</span> query(lc(x),lc(y),l,mid,k);<br>    <span class="hljs-keyword">else</span> <br>        <span class="hljs-keyword">return</span> query(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,k-s);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    ios::sync_with_stdio(<span class="hljs-number">0</span>),<span class="hljs-built_in">cin</span>.tie(<span class="hljs-number">0</span>),<span class="hljs-built_in">cout</span>.tie(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;a[i];<br>        b[i]=a[i];<br>    &#125;<br>    sort(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n);<br>    <span class="hljs-type">int</span> bn=unique(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n)-b<span class="hljs-number">-1</span>;<br>    build(root[<span class="hljs-number">0</span>],<span class="hljs-number">1</span>,bn);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> id=lower_bound(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+bn,a[i])-b;<br>        update(root[i<span class="hljs-number">-1</span>],root[i],<span class="hljs-number">1</span>,bn,id);<br>    &#125;<br>    <span class="hljs-keyword">while</span>(m--)<br>    &#123;<br>        <span class="hljs-type">int</span> l,r,k;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;l&gt;&gt;r&gt;&gt;k;<br>        <span class="hljs-type">int</span> id=query(root[l<span class="hljs-number">-1</span>],root[r],<span class="hljs-number">1</span>,bn,k);<br>        <span class="hljs-built_in">cout</span>&lt;&lt;b[id]&lt;&lt;<span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><h2 id="单源最短路"><a href="#单源最短路" class="headerlink" title="单源最短路"></a>单源最短路</h2><h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526130244161.png" alt="image-20240526130244161"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526130253653.png" alt="image-20240526130253653"></p><h4 id="模板题——-蓝桥公园"><a href="#模板题——-蓝桥公园" class="headerlink" title="模板题—— 蓝桥公园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1121/learning"> 蓝桥公园</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span>=sys.stdin.readline<br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e18</span>)<br>dp=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  dp[i][i]=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br><span class="hljs-comment">#Floyd 模板</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> dp[i][j]==inf:<br>        dp[i][j]=-<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  s,e=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-built_in">print</span>(dp[s][e])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># Floyd 算法  多个起点--多个终点  多源最短路算法（多对多）</span><br><span class="hljs-comment"># 最简单的最短路径算法</span><br><span class="hljs-comment"># 存图:最简单的矩阵存图</span><br><span class="hljs-comment"># 效率不高，不能用于大图</span><br><br><span class="hljs-comment"># 动态规划：求图上两点i,j之间的最短距离，按‘从小图到全图’的步骤，在逐步扩大图的过程中计算和更新最短路</span><br><span class="hljs-comment"># 定义状态：dp[k][i][j]: i,j,k是点的编号，范围1--n</span><br><span class="hljs-comment"># 状态dp[k][i][j]表示在包含1--k点的子图上，点对i,j之间的最短路</span><br><span class="hljs-comment"># 状态转移方程 从子图1-k-1 扩展到子图 1-k</span><br><span class="hljs-comment"># dp[k][i][j]=min(dp[k-1][i][j],dp[k-1][i][k]+dp[k-1][k][j])</span><br><span class="hljs-comment"># 初始值：i,j直连 就是他们的边长； 若不直连，赋值为无穷大 / 0x3f3f3f3f3f3f3f3f</span><br><span class="hljs-comment"># 滚动数组优化：dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment">#                           不经过k     经过k</span><br><span class="hljs-comment"># for k in range(1,n+1):</span><br><span class="hljs-comment"># for i in range(1,n+1):</span><br><span class="hljs-comment"># for j in range(1,n+1):</span><br><span class="hljs-comment"># dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment"># 只能用于n&lt;300 的小规模图</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">floyd</span>():<br>    <span class="hljs-keyword">global</span> dp<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><span class="hljs-comment"># 蓝桥公园</span><br><span class="hljs-comment"># n个点 m条边 q次查询</span><br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span><br>dp=[[INF <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)]<br><span class="hljs-comment"># 记录路径</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>    u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br>floyd()<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    start,end=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-comment"># 无法到达</span><br>    <span class="hljs-keyword">if</span> dp[start][end]==INF:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 起点终点相同</span><br>    <span class="hljs-keyword">elif</span> start==end:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(dp[start][end])<br><br><span class="hljs-comment"># 1-12</span><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N, M, Q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>weight = [[<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> i == j <span class="hljs-keyword">else</span> sys.maxsize <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>) ] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 领接矩阵</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(M):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    weight[u][v] = <span class="hljs-built_in">min</span>(weight[u][v], w)<br>    weight[v][u] = weight[u][v]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># N次递推</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># 更新最小值</span><br>                weight[i][j] = <span class="hljs-built_in">min</span>(weight[i][j], weight[i][k] + weight[k][j])<br>                weight[j][i] = weight[i][j]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Q):<br>    st, ed = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    t = weight[st][ed]<br>    <span class="hljs-keyword">if</span> t == sys.maxsize:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(t)<br></code></pre></td></tr></table></figure><h4 id="模板题——城市间的交易"><a href="#模板题——城市间的交易" class="headerlink" title="模板题——城市间的交易"></a>模板题——<a href="https://www.lanqiao.cn/problems/8336/learning/">城市间的交易</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 8336 城市间的交易</span><br>INF =<span class="hljs-number">1e18</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 产量、成本和售价</span><br>a, p, s = [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>)<br>f = [[INF] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>g = [[<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    a[i], p[i], s[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 邻接矩阵初始化</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    f[u][v] = f[v][u] = <span class="hljs-built_in">min</span>(f[u][v], w)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    f[i][i] = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># Floyd</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k]+f[k][j])<br><span class="hljs-comment"># g[i][j]表示城市i的物品运输到城市j可得到的利润 = 城市j的售价 - 城市i的成本 - 从i到j的运输成本</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-comment"># 求每个城市的利润</span><br>    cnt = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        g[i][j] = s[j] - p[i] - f[i][j]<br>        cnt = <span class="hljs-built_in">max</span>(cnt, g[i][j])<br>    ans += a[i] * cnt<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>res=[]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  a,p,s=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  res.append((a,p,s))<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e10</span>)<br>path=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  path[u][v]=path[v][u]=<span class="hljs-built_in">min</span>(w,path[u][v])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+n):<br>  path[i][i]=<span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      path[i][j]=<span class="hljs-built_in">min</span>(path[i][j],path[i][k]+path[k][j])<br>re=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  result=<span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> path[i][j]!=inf:<br>       result=<span class="hljs-built_in">max</span>(result,res[j-<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]-res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]-path[i][j]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br>  re+=result<br><span class="hljs-built_in">print</span>(re)<br></code></pre></td></tr></table></figure><h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131011122.png" alt="image-20240526131011122"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131022596.png" alt="image-20240526131022596"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131034522.png" alt="image-20240526131034522"></p><h4 id="模板题——蓝桥王国"><a href="#模板题——蓝桥王国" class="headerlink" title="模板题——蓝桥王国"></a>模板题——<a href="https://www.lanqiao.cn/problems/1122/learning">蓝桥王国</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 1122_蓝桥王国_Dijkstra算法</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue  <span class="hljs-comment"># 导入优先队列</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>INF = <span class="hljs-number">1e18</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-comment"># 返回从s出发到所有点的最短路</span><br>    <span class="hljs-comment"># d[i]表示从s到i的最短路</span><br>    d = [INF] * (n + <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># vis[i]表示是否出队列（注：与传统BFS不同）</span><br>    vis = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    q = PriorityQueue()<br><br>    <span class="hljs-comment"># 1.将起点入队列，更新距离</span><br>    d[s] = <span class="hljs-number">0</span><br>    <span class="hljs-comment"># 将距离放在前面，才能对距离使用优先队列</span><br>    q.put((d[s], s))  <span class="hljs-comment"># 入队用put()</span><br>    <span class="hljs-comment"># 当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():  <span class="hljs-comment"># 或者写为： while len(q.queue) != 0:</span><br>        dis, u = q.get()<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[u]: <span class="hljs-keyword">continue</span><br>        vis[u] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-comment"># 对于从u出发，到达v，权重为w的边</span><br>        <span class="hljs-keyword">for</span> v, w <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-keyword">if</span> d[v] &gt; d[u] + w:<br>                d[v] = d[u] + w<br>                q.put((d[v], v))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> d[i] == INF:<br>            d[i] = -<span class="hljs-number">1</span><br>    <span class="hljs-comment"># d.pop(0)</span><br>    <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>::] <span class="hljs-comment"># 从1到最后</span><br><br><br><span class="hljs-comment"># 皇宫编号为1</span><br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 图的存储：邻接表。此题N为10^5，不能用邻接矩阵存图</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append((v, w))<br><span class="hljs-built_in">print</span>(*dijkstra(<span class="hljs-number">1</span>)) <span class="hljs-comment"># 列表前面加星号作用是将列表解开（unpacke）成多个独立的参数，传入函数。</span><br></code></pre></td></tr></table></figure><h4 id="模板题——混境之地3"><a href="#模板题——混境之地3" class="headerlink" title="模板题——混境之地3"></a>模板题——<a href="https://www.lanqiao.cn/problems/3818/learning">混境之地3</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 3818 混境之地  Dijkstra</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><span class="hljs-comment"># 数据较大时可以进行如下优化</span><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span> = sys.stdin.readline<br>INF = <span class="hljs-number">1e18</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">c</span>):<br>    <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;.&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        s = <span class="hljs-string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> c == s[i]:<br>                <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span><br>        <span class="hljs-comment"># return ord(c) - ord(&#x27;A&#x27;) + 1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>():<br>    d = [[INF] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    vis = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    q = PriorityQueue()  <span class="hljs-comment"># 创建优先队列</span><br>    <span class="hljs-comment"># 1.将起点塞入队列</span><br>    d[x1][y1] = <span class="hljs-number">0</span><br>    q.put((d[x1][y1], x1, y1))<br>    <span class="hljs-comment"># 2.当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():<br>        dis, x, y = q.get()<br>        <span class="hljs-keyword">if</span> x == x2 <span class="hljs-keyword">and</span> y == y2:<br>            <span class="hljs-keyword">return</span> dis<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[x][y]:<br>            <span class="hljs-keyword">continue</span><br>        vis[x][y] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-keyword">for</span> d elta_x, delta_y <span class="hljs-keyword">in</span> [[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]]:<br>            xx, yy = x + delta_x, y + delta_y<br>            <span class="hljs-comment"># 判断未越界、未标记、非障碍物</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= xx &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= yy &lt; m <span class="hljs-keyword">and</span> vis[xx][yy] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Map[xx][yy] != <span class="hljs-string">&quot;#&quot;</span>:<br>                <span class="hljs-keyword">if</span> d[xx][yy] &gt; d[x][y] + get(Map[xx][yy]):  <span class="hljs-comment"># 写一个get函数获取权重</span><br>                    d[xx][yy] = d[x][y] + get(Map[xx][yy])<br>                    q.put((d[xx][yy], xx, yy))<br>    <span class="hljs-keyword">return</span> INF<br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 地图大小</span><br>x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 起始点坐标</span><br>x1, y1, x2, y2 = x1 - <span class="hljs-number">1</span>, y1 - <span class="hljs-number">1</span>, x2 - <span class="hljs-number">1</span>, y2 - <span class="hljs-number">1</span><br><span class="hljs-comment"># 地图</span><br>Map = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>e = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <span class="hljs-comment"># 剩余能量</span><br><span class="hljs-comment"># 如果能量支撑到达终点，返回Yes，否则，返回No.</span><br><span class="hljs-keyword">if</span> e &gt;= dijkstra():  <span class="hljs-comment"># 不传参，使用全局变量</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Yes&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><h3 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131621641.png" alt="image-20240526131621641"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131631028.png" alt="image-20240526131631028"></p><h4 id="模板题——繁忙的都市"><a href="#模板题——繁忙的都市" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kruskal</span>():<br>    <span class="hljs-comment"># 初始化</span><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = []<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        Map.append([w, u, v])  <span class="hljs-comment"># 注意第一个参数是边权</span><br>    Map.sort()<br><br>    <span class="hljs-comment"># 并查集</span><br>    p = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">if</span> x != p[x]:<br>            p[x] = root(p[x])<br>        <span class="hljs-keyword">return</span> p[x]<br><br>    <span class="hljs-comment"># 非连环时更新</span><br>    _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span> = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> w, u, v <span class="hljs-keyword">in</span> Map:<br>        root_u = root(u)<br>        root_v = root(v)<br>        <span class="hljs-keyword">if</span> root_u != root_v:<br>            p[root_u] = root_v<br>            _<span class="hljs-built_in">sum</span> += <span class="hljs-number">1</span><br>            _<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span>(_<span class="hljs-built_in">max</span>, w)<br>    <span class="hljs-keyword">return</span> _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span><br><span class="hljs-built_in">print</span>(*kruskal())<br></code></pre></td></tr></table></figure><h3 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131818064.png" alt="image-20240526131818064"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131825567.png" alt="image-20240526131825567"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131840546.png" alt="image-20240526131840546"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131848626.png" alt="image-20240526131848626"></p><h4 id="模板题——繁忙的都市-1"><a href="#模板题——繁忙的都市-1" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>e=[]<br><span class="hljs-keyword">for</span>  _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  e.append((w,u,v))<br><span class="hljs-comment">#边按照权重进行排序</span><br>e.sort()<br><span class="hljs-comment">#需要一个并查集</span><br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">findroot</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>  <span class="hljs-keyword">else</span>:<br>    p[x]=findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br>ans=<span class="hljs-number">0</span><br><span class="hljs-comment">#进行遍历所有的边，进行合并：</span><br><span class="hljs-keyword">for</span> w,u,v <span class="hljs-keyword">in</span> e:<br>  <span class="hljs-comment">#只要u和v不在同一集合内就可以进行合并：</span><br>  rootu=findroot(u)<br>  rootv=findroot(v)<br>  <span class="hljs-keyword">if</span> rootu!=rootv:<br>    p[rootu]=rootv<br>    ans=<span class="hljs-built_in">max</span>(ans,w)<br><span class="hljs-built_in">print</span>(n-<span class="hljs-number">1</span>,ans)<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132045604.png" alt="image-20240526132045604"></p><h2 id="最近共同祖先"><a href="#最近共同祖先" class="headerlink" title="最近共同祖先"></a>最近共同祖先</h2><h4 id="最近公共祖先"><a href="#最近公共祖先" class="headerlink" title="最近公共祖先"></a>最近公共祖先</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526105959804.png" alt="image-20240526105959804"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110010233.png" alt="image-20240526110010233"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110018355.png" alt="image-20240526110018355"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110031858.png" alt="image-20240526110031858"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110040710.png" alt="image-20240526110040710"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110052606.png" alt="image-20240526110052606"></p><h4 id="模板题——最近公共祖先LCA查询"><a href="#模板题——最近公共祖先LCA查询" class="headerlink" title="模板题——最近公共祖先LCA查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/4385/learning">最近公共祖先LCA查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment">#设置deep数组表示深度。</span><br><span class="hljs-comment">#front数组，表示节点u,前2**i层的爹是谁？？？</span><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>tree=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>fornt=[[<span class="hljs-number">0</span>]*(<span class="hljs-number">21</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<span class="hljs-comment">#如果你是0你就是孤儿。</span><br>deep=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<span class="hljs-comment">#0节点没有层数。</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>  u,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  tree[u].append(v)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">er,die</span>):<br>  <span class="hljs-keyword">if</span> die==<span class="hljs-number">0</span>:<br>    deep[er]=<span class="hljs-number">1</span><span class="hljs-comment">#这是第一层,同时，第一层也没有爹啊，也不需要更新如何层数相关节点。</span><br><br>  <span class="hljs-keyword">else</span>:<br>    deep[er]=deep[die]+<span class="hljs-number">1</span><span class="hljs-comment">#更新层数。</span><br>    fornt[er][<span class="hljs-number">0</span>]=die<span class="hljs-comment">#上一层的点，就是die。</span><br>    <span class="hljs-keyword">for</span> cc <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>):<br>      <span class="hljs-keyword">if</span> fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br><br>        fornt[er][cc]=fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]<br>        <span class="hljs-comment">#倍增法。2**i层之上的点=</span><br>        <span class="hljs-comment">#2**(cc-1)上面的点的上面2**(cc-1)的点。就，无限套娃。</span><br>  <br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tree[er]:<br>    dfs(i,er)<span class="hljs-comment">#儿子变成新的爹。</span><br>dfs(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<span class="hljs-comment">#儿子是根，爹不存在。</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-comment">#第一步，拉升。将x拉到和y一个水平。一开始走2**20步，太大，就走2**19步，然后走一半，再走一半</span><br>  <span class="hljs-comment">#就像那个乌龟与跑步哥一样。二进制原理使得这个步数遍历后一定是一个高度。</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> deep[fornt[x][i]]&gt;=deep[y] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span>:<br>      x=fornt[x][i]<span class="hljs-comment">#自动判断能走不能走，能走则走一大步。x提升到别的节点。</span><br><br>  <span class="hljs-comment">#此时提升必定一样了。</span><br>  <span class="hljs-keyword">if</span> x==y:<br>    <span class="hljs-keyword">return</span> x<span class="hljs-comment">#原来你就是我爹！</span><br>  <br>  <span class="hljs-keyword">else</span>:<span class="hljs-comment">#不是？我们再度提升吧！神明！</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> fornt[x][i]!=fornt[y][i] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> fornt[y][i]!=<span class="hljs-number">0</span>:<span class="hljs-comment">#相等反而不能决定什么，因为可能不是最近的公共祖先</span><br>        x=fornt[x][i]<br>        y=fornt[y][i]<br>    <span class="hljs-keyword">return</span> fornt[y][<span class="hljs-number">0</span>]<span class="hljs-comment">#最后，y上面的就是自己的公共祖先。</span><br>q=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> deep[x]&lt;deep[y]:<span class="hljs-comment">#我们设x是深节点。</span><br>    x,y=y,x<br>  <span class="hljs-built_in">print</span>(find(x,y))<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥国赛</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥杯国赛试题解析</title>
    <link href="/2024/05/26/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/"/>
    <url>/2024/05/26/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h1 id="第十四届Python大学C组"><a href="#第十四届Python大学C组" class="headerlink" title="第十四届Python大学C组"></a>第十四届Python大学C组</h1><h2 id="跑步计划"><a href="#跑步计划" class="headerlink" title="跑步计划"></a><a href="https://www.lanqiao.cn/problems/17113/learning">跑步计划</a></h2><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝计划在某天的日期中出现 $1$ 时跑 $5$ 千米，否则只跑 $1$ 千米。注意日期中出现 $1$ 不仅指年月日也指星期。</p><p>请问按照小蓝的计划，$2023$ 年小蓝总共会跑步锻炼多少千米?例如，$5$ 月 $1$ 日、$1$ 月 $13$ 日、$11$ 月 $5$ 日、$4$ 月 $3$ 日 (星期一) 小蓝会跑 $5$ 千米，而 $5$ 月 $23$ 日小蓝会跑 $1$ 千米 (示例日期均为 $2023$ 年)</p><h3 id="答案提交"><a href="#答案提交" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 714  |  总提交次数: 778  |  通过率: 91.8%</p><p>难度: 中等   标签: 2023, 国赛, 日期问题</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br>bt = datetime.date(<span class="hljs-number">2023</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>c = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">366</span>):<br>    bt += datetime.timedelta(days=<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">in</span> bt.isoformat() <span class="hljs-keyword">or</span> bt.isoweekday() == <span class="hljs-number">1</span>:<br>        c += <span class="hljs-number">5</span><br>    <span class="hljs-keyword">else</span>:<br>        c += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(c)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">sun = <span class="hljs-number">0</span><br><span class="hljs-keyword">import</span> datetime<br>a = datetime.date(<span class="hljs-number">2023</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">366</span>):<br>  <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">in</span> a.strftime(<span class="hljs-string">&quot;%m%d%w&quot;</span>) :sun+=<span class="hljs-number">4</span><br>  sun+=<span class="hljs-number">1</span><br>  a += datetime.timedelta(days = <span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(sun)<br></code></pre></td></tr></table></figure><h2 id="混乘数字"><a href="#混乘数字" class="headerlink" title="混乘数字"></a><a href="https://www.lanqiao.cn/problems/17121/learning">混乘数字</a></h2><h3 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h3><p>混乘数字的定义如下: 对于一个正整数 $n$，如果存在正整数 $a, b$，使得 $n &#x3D; a \times b$，而且 $a$ 和 $b$ 的十进制数位中每个数字出现的次数之和与 $n$ 中对应数字出现次数相同，则称 $n$ 为混乘数字。</p><p>例如，对于正整数 $n &#x3D; 126$，存在 $a &#x3D; 6$, $b &#x3D; 21$ 满足条件，因此 $126$ 是一个混乘数字。</p><p>又如，对于正整数 $n &#x3D; 180225$，存在 $a &#x3D; 225$, $b &#x3D; 801$ 满足条件，因此 $180225$ 是一个混乘数字。</p><p>请你帮助计算出，$1 \sim 1000000$ (含)之间一共有多少个数字是混乘数字。</p><h3 id="答案提交-1"><a href="#答案提交-1" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>PyPy3</td><td>5s</td><td>256M</td></tr><tr><td>Go</td><td>5s</td><td>256M</td></tr><tr><td>JavaScript</td><td>5s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><span class="hljs-comment"># 混乘数字：</span><br><span class="hljs-comment"># 条件1：a * b == n</span><br><span class="hljs-comment"># 条件2：a、b一定是n的因子</span><br><span class="hljs-comment"># 条件3：且a、b中各个数字出现次数 == n中各个数字出现次数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">isHunc</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;返回True代表是混乘数字&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># 1. 求n中每个数字出现次数</span><br>    nums = defaultdict(<span class="hljs-built_in">int</span>)<br>    <span class="hljs-keyword">for</span> kwd <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">str</span>(n)):<br>        nums[kwd] += <span class="hljs-number">1</span><br>    <span class="hljs-comment"># 2. 开启暴力美学</span><br>    <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">int</span>(math.sqrt(n)) + <span class="hljs-number">1</span>):    <span class="hljs-comment"># 两个因子相乘，绝对有一个因子&lt;= 开平方后的值</span><br>        <span class="hljs-comment"># 判断是否符合条件1、2</span><br>        <span class="hljs-keyword">if</span> n % a == <span class="hljs-number">0</span>:<br>            b = n // a<br>            <span class="hljs-comment"># 判断是否符合条件3</span><br>            <span class="hljs-keyword">if</span> cnt_dy(a, b, nums):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">cnt_dy</span>(<span class="hljs-params">a, b, nums</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;符合条件3 返回 True&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># nums是可变对象，形参改变实参也会改变，我们需要将他的值复制，这样才不对原始数据造成更改</span><br>    now = nums.copy()<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(a):<br>        now[k] -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> now[k] &lt; <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(b):<br>        now[k] -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> now[k] &lt; <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 判断字典中是否还有值</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>(now.values()) != <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">125</span>, <span class="hljs-number">1000001</span>):<br>     <span class="hljs-keyword">if</span> isHunc(i):<br>         ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> math<br>count=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1000001</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,<span class="hljs-built_in">int</span>(math.sqrt(i))+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> i % j == <span class="hljs-number">0</span>:<br>      <span class="hljs-keyword">if</span> <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">str</span>(i)) == <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">str</span>(j)+<span class="hljs-built_in">str</span>(i//j)):<br>        count += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">break</span><br>  <span class="hljs-keyword">if</span> i % <span class="hljs-number">100000</span> == <span class="hljs-number">0</span>:<br>    <span class="hljs-built_in">print</span>(i,count)<br><span class="hljs-built_in">print</span>(count)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">590</span>)<br></code></pre></td></tr></table></figure><h2 id="整数变换"><a href="#整数变换" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning">整数变换</a></h2><h3 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝有一个整数 $n$。每分钟，小蓝的数都会发生变化，变为上一分钟的数减去上一分钟的数的各个数位和。</p><p>例如，如果小蓝开始时的数为 $23$，则下一分钟变为 $23 − (2 + 3) &#x3D; 18$，再下一分钟变为 $18 − (1 + 8) &#x3D; 9$，再下一分钟变为 $9 − 9 &#x3D; 0$，共经过了 $3$ 分钟变为 $0$。</p><p>给定一个正整数，请问这个数多少分钟后变为 $0$。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含一个整数 $n$。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数，表示答案。</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">23<br></code></pre></td></tr></table></figure><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定"><a href="#评测用例规模与约定" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30%$ 的评测用例，$1 ≤ n ≤ 1000$;</p><p>对于 $60%$ 的评测用例，$1 ≤ n ≤ 10^6$;</p><p>对于所有评测用例，$1 ≤ n ≤ 10^9$。</p><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h3><p>这道题目需要使用pypy3，否则会超时</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">input</span>()<br>int_n = <span class="hljs-built_in">int</span>(n)<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> int_n &gt; <span class="hljs-number">0</span>:<br>    s = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">list</span>(<span class="hljs-built_in">str</span>(int_n))))<br>    int_n -= s<br>    ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a><a href="https://www.lanqiao.cn/problems/17115/learning">定时任务</a></h2><h3 id="问题描述-3"><a href="#问题描述-3" class="headerlink" title="问题描述"></a>问题描述</h3><p>Cron 表达式在定时任务中经常被使用，在这里我们用了一种简化后的版本 SimpleCron 表达式：SimpleCron 表达式是一个具有时间含义的字符串，字符串以 $4$ 个空格隔开，分为 $5$ 个域，格式为 $X X X X X$，其中 $X$ 是一个域的占位符。$5$ 个域从左至右依次为秒 $(0 - 59)$、分钟 $(0 - 59)$、小时 $(0 - 23)$、日期 $(1 - 31)$、月份 $(1 - 12)$，其中括号内为他们各自的取值范围。同时域内取值也可以使用一些特殊字符（每个域内只能使用一种特殊字符）:</p><ol><li>特殊字符 $*$ （ASCII 码为 $42$）表示所有可能的值。例如：在分钟域内表示每一分钟；在日期域内表示月内的每一天。</li><li>特殊字符 $,$ （ASCII 码为 $44$）表示列出枚举值。例如：在秒域内，$3,20$ 表示分别在 $3$ 秒和 $20$ 秒执行一次任务。</li><li>特殊字符 $-$ （ASCII 码为 $45$）表示范围，可以视为连续的若干个枚举值。例如：$1-5$ 等价于 $1,2,3,4,5$。</li></ol><p>例如，$4 2 1,3,15 1-31 *$ 表示的含义是每个月份中的每一天中的 $01:02:04$、$03:02:04$、$15:02:04$ 这三个时刻各执行一次，在 $2023$ 年一共会执行 $1095$ 次。</p><p>现在给出你一个合法的 SimpleCron 表达式，其中用到的所有数字均没有前导零。请问在 $2023$ 一整年当中，使用了这个表达式的定时任务总计会执行多少次?</p><h3 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行，包含一个 SimpleCron 字符串。</p><h3 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行，包含一个整数表示答案。</p><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>4 </span><span>2</span> <span>1</span>,<span>3</span>,<span>15</span> <span>1</span>-<span>31</span> *</p><h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h3><p><span>1095</span></p><h3 id="评测用例规模与约定-1"><a href="#评测用例规模与约定-1" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于所有评测用例，$0 ≤$ 秒域的取值 $≤ 59$，$0 ≤$ 分钟域的取值 $≤ 59$，$0 ≤$ 小时域的取值 $≤ 23$，$1 ≤$ 日期域的取值 $≤ 31$，$1 ≤$ 月份域的取值 $≤ 12$。</p><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 181  |  总提交次数: 251  |  通过率: 72.1%</p><p>难度: 中等   标签: 2023, 国赛, 日期问题</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> datetime<br><br>time = <span class="hljs-built_in">input</span>().split()<br>a = [[<span class="hljs-number">0</span>, <span class="hljs-number">59</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">59</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">23</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">31</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">12</span>]]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>): <span class="hljs-comment"># 先得到对应时间点，哪些时间有任务</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;*&#x27;</span> <span class="hljs-keyword">in</span> time[i]:<br>        time[i] = <span class="hljs-built_in">range</span>(a[i][<span class="hljs-number">0</span>], a[i][<span class="hljs-number">1</span>] + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;-&#x27;</span> <span class="hljs-keyword">in</span> time[i]:<br>        l, r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, time[i].split(<span class="hljs-string">&#x27;-&#x27;</span>))<br>        time[i] = <span class="hljs-built_in">range</span>(l, r + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;,&#x27;</span> <span class="hljs-keyword">in</span> time[i]:<br>        time[i] = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, time[i].split(<span class="hljs-string">&#x27;,&#x27;</span>)))<br>    <span class="hljs-keyword">else</span>:<br>        time[i] = [<span class="hljs-built_in">int</span>(time[i])]<br><br>s, f, h, d, m = time<br><br>days = <span class="hljs-built_in">len</span>(s) * <span class="hljs-built_in">len</span>(f) * <span class="hljs-built_in">len</span>(h) <span class="hljs-comment">#一天的任务次数可以直接求得</span><br><br>start = datetime.date(<span class="hljs-number">2023</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>end = datetime.date(<span class="hljs-number">2024</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>t = datetime.timedelta(days=<span class="hljs-number">1</span>)<br><br>cnt = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> start &lt; end: <span class="hljs-comment">#按天遍历</span><br>    _, M, D = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>(start).split(<span class="hljs-string">&#x27;-&#x27;</span>))<br><br>    <span class="hljs-keyword">if</span> M <span class="hljs-keyword">in</span> m <span class="hljs-keyword">and</span> D <span class="hljs-keyword">in</span> d:<span class="hljs-comment">#满足累加每天的任务</span><br>        cnt += days<br>    start += t<br><br><span class="hljs-built_in">print</span>(cnt)<br></code></pre></td></tr></table></figure><h2 id="2023"><a href="#2023" class="headerlink" title="2023"></a><a href="https://www.lanqiao.cn/problems/17116/learning">2023</a></h2><h3 id="问题描述-4"><a href="#问题描述-4" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定 $n$, $m$，请求出所有 $n$ 位十进制整数中有多少个数中恰好出现了 $m$ 个 $2023$。</p><p>例如 $00202312023$ 是一个 $11$ 位的出现了 $2$ 个 $2023$ 的十进制整数。由于结果可能很大，请输出答案对 $998244353$ 取模的结果。</p><h3 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含两个整数 $n$, $m$，用一个空格分隔。</p><h3 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>5 </span><span>1</span></p><h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">20<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-2"><a href="#评测用例规模与约定-2" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40%$ 的评测用例，$n ≤ 10^5$，$m ≤ 10$；</p><p>对于所有评测用例，$4 ≤ n ≤ 10^5$，$0 ≤ 4m ≤ n$。</p><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 34  |  总提交次数: 232  |  通过率: 14.7%</p><p>难度: 中等   标签: 2023, 国赛, 排列组合, 二项式定理</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-4"><a href="#解题思路-4" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quickpow</span>(<span class="hljs-params">a, n, mod</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    快速幂算法，计算 a 的 n 次幂对 mod 取模的结果</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    ans = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> n:<br>        <span class="hljs-keyword">if</span> n &amp; <span class="hljs-number">1</span>:<br>            ans = ans * a % mod<br>        a = a * a % mod<br>        n &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> ans<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">C</span>(<span class="hljs-params">m, n, fact, inv, mod</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    计算组合数 C(m, n) % mod 的值</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> fact[n] * inv[m] % mod * inv[n - m] % mod<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fact_init</span>(<span class="hljs-params">mod</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    初始化阶乘数组和逆元数组</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    fact = [<span class="hljs-number">0</span>] * (<span class="hljs-number">100001</span>)<br>    inv = [<span class="hljs-number">0</span>] * (<span class="hljs-number">100001</span>)<br>    fact[<span class="hljs-number">0</span>] = inv[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">100001</span>):<br>        fact[i] = fact[i - <span class="hljs-number">1</span>] * i % mod<br>        inv[i] = inv[i - <span class="hljs-number">1</span>] * quickpow(i, mod - <span class="hljs-number">2</span>, mod) % mod<br>    <span class="hljs-keyword">return</span> fact, inv<br><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>k = n // <span class="hljs-number">4</span><br>ans = <span class="hljs-number">0</span><br>mod = <span class="hljs-number">998244353</span><br>fact, inv = fact_init(mod)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m, k + <span class="hljs-number">1</span>):<br>    ans += (-<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> (i - m) % <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>) * C(m, i, fact, inv, mod) * C(i, n - <span class="hljs-number">3</span> * i, fact, inv, mod) * quickpow(<span class="hljs-number">10</span>, n - <span class="hljs-number">4</span> * i, mod)<br>    ans %= mod<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid2479109-20240516-1715843529436.png" alt="二项式反演"></p><h2 id="最大算式"><a href="#最大算式" class="headerlink" title="最大算式"></a><a href="https://www.lanqiao.cn/problems/17129/learning">最大算式</a></h2><h3 id="问题描述-5"><a href="#问题描述-5" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定 $n$ 个非负整数 $A_i$ ，你可以在不改变这些数顺序的前提下任意在他们之间插入 $+,*,(,)$ 四种符号 。</p><p>请问在得到的算式合法的前提下，算式的结果最大可以是多少?</p><p>由于结果很大，你只需要输出答案对 $10^9+7$ 取模的结果即可。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $n$ 。</p><p>第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \cdots, A_n$ ，相邻两个整数之间使用一个空格分隔。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-3"><a href="#样例输入-3" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">7 1 2 1 1 1 2 1<br></code></pre></td></tr></table></figure><h3 id="样例输出-3"><a href="#样例输出-3" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">27<br></code></pre></td></tr></table></figure><h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><p>$(1+2)\times(1+1+1)\times(2+1)&#x3D;27$ .</p><h3 id="评测用例规模"><a href="#评测用例规模" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $40%$ 的评测用例， $n \leq 5000$ ；</p><p>对于所有评测用例， $1 \leq n \leq 10^5$ ， $0 \leq A_i \leq 10^9$ 。</p><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 22  |  总提交次数: 38  |  通过率: 57.9%</p><p>难度: 中等   标签: 2023, 贪心, 国赛, 数学</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-5"><a href="#解题思路-5" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> m[i]==<span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">if</span> s[-<span class="hljs-number">1</span>]==<span class="hljs-number">2</span>:<br>            s[-<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> s[-<span class="hljs-number">1</span>]&gt;m[i+<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> m[i+<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br>            m[i+<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            s[-<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        s.append(m[i])<br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>m=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>s=[]<br><span class="hljs-keyword">if</span> m[<span class="hljs-number">0</span>]==<span class="hljs-number">1</span>:<br>    m[<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br><span class="hljs-keyword">else</span>:<br>    s.append(m[<span class="hljs-number">0</span>])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> m[i]!=<span class="hljs-number">0</span>:<br>        find(i)<br><span class="hljs-keyword">if</span> m[-<span class="hljs-number">1</span>]==<span class="hljs-number">1</span>:<br>    s[-<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br><span class="hljs-keyword">elif</span> m[-<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br>    s.append(m[-<span class="hljs-number">1</span>])<br>k=<span class="hljs-number">1</span><br>num=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> s:<br>    k=k*j<br>num+=k<br><span class="hljs-built_in">print</span>(num%<span class="hljs-number">1000000007</span>)<br></code></pre></td></tr></table></figure><h2 id="躲炮弹"><a href="#躲炮弹" class="headerlink" title="躲炮弹"></a><a href="https://www.lanqiao.cn/problems/17123/learning/">躲炮弹</a></h2><h3 id="问题描述-6"><a href="#问题描述-6" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝正在玩一个躲炮弹的游戏。游戏中有一个人物和一个炮塔，它们的初始距离为 $n$。</p><p>炮塔可能选择在区间 $[L, R]$ 上的任意一个整数 $x$，然后发射的炮弹会飞向小蓝操控的人物。但炮弹只会在飞出 $x$ 的倍数的距离($x, 2x, 3x, \ldots$)时落地，然后弹回到空中。如果小蓝操控的人物恰好站在了炮弹落地的位置，那么游戏就会结束。</p><p>小蓝只能在炮弹发射前移动他的人物，每移动一步，可以使得人物和炮塔的距离增加 $1$ 或者减少 $1$。他想知道最少要移动多少步才能保证自己的人物一定能躲过炮弹。</p><h3 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含三个整数 $n, L, R$，相邻的整数之间使用一个空格分隔。</p><h3 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数，表示小蓝操纵的人物最少需要移动的步数。</p><h3 id="样例输入-4"><a href="#样例输入-4" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>10 </span><span>2</span> <span>13</span></p><h3 id="样例输出-4"><a href="#样例输出-4" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">7<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-3"><a href="#评测用例规模与约定-3" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40%$ 的评测用例，$n, L, R \leq 10^6$；</p><p>对于所有评测用例，$1 \leq n, L, R \leq 10^9$，$2 \leq L \leq R$。</p><h3 id="运行限制-6"><a href="#运行限制-6" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 38  |  总提交次数: 94  |  通过率: 40.4%</p><p>难度: 中等   标签: 2023, 国赛, 质因子分解</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-6"><a href="#解题思路-6" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs python">n, L, R = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">case 1: ans在n的右边 或者就是n</span><br><span class="hljs-string">case 2: n大于R ans在n-1到R+1之间</span><br><span class="hljs-string">case 3: ans在l-1这个位置</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment"># 找出当前数的所有质因数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pr_</span>(<span class="hljs-params">xx</span>):<br>    pr = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(xx ** <span class="hljs-number">0.5</span>) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">while</span> xx % i == <span class="hljs-number">0</span>:<br>            pr.append(i)<br>            xx //= i<br>    <span class="hljs-keyword">if</span> xx &gt; <span class="hljs-number">1</span>: pr.append(xx)<br>    <span class="hljs-keyword">return</span> pr<br><span class="hljs-comment"># 如果当前x是质数或者x除以x的质因子的值小于low 则当前位置是安全位置</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">judge</span>(<span class="hljs-params">x, low</span>):<br>    nums = pr_(x)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> x<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-comment"># 安全位置一定满足这一个条件 但是满足条件的不一定是安全位置</span><br>            <span class="hljs-comment"># 但我们可以保证最近的一个安全位置的前面一定不存在错误位置</span><br>            <span class="hljs-keyword">if</span> x // j &lt; low:<br>                <span class="hljs-keyword">return</span> x<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-comment"># case 1</span><br>res = <span class="hljs-built_in">max</span>(R + <span class="hljs-number">1</span>, n)<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    new_seat = judge(res, L)<br>    <span class="hljs-keyword">if</span> new_seat != -<span class="hljs-number">1</span>:<br>        ans = res - n<br>        <span class="hljs-keyword">break</span><br>    res += <span class="hljs-number">1</span><br><span class="hljs-comment"># case 2</span><br>res = n - <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> res &gt; R:<br>    new_seat = judge(res, L)<br>    <span class="hljs-keyword">if</span> new_seat != -<span class="hljs-number">1</span>:<br>        ans = <span class="hljs-built_in">min</span>(n - res, ans)<br>        <span class="hljs-keyword">break</span><br>    res -= <span class="hljs-number">1</span><br><span class="hljs-comment"># case 3 and 1, 2</span><br><span class="hljs-comment"># 如果n在L的特别左边是会返回负数的 所以要特判</span><br><span class="hljs-keyword">if</span> n &lt; L:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;0&#x27;</span>)<br><span class="hljs-keyword">elif</span> n == L:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1&#x27;</span>)<br><span class="hljs-keyword">else</span>:  <br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">min</span>(n - L + <span class="hljs-number">1</span>, ans))<br></code></pre></td></tr></table></figure><h2 id="走方格"><a href="#走方格" class="headerlink" title="走方格"></a><a href="https://www.lanqiao.cn/problems/17118/learning/">走方格</a></h2><h3 id="问题描述-7"><a href="#问题描述-7" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个 $N$ 行 $N$ 列的方格，第 $i$ 行第 $j$ 列的方格坐标为 $(i, j)$，高度为 $H_{i, j}$。小蓝从左上角坐标 $(0, 0)$ 出发，目的地是右下角坐标 $(N - 1, N - 1)$。</p><p>当小蓝位于第 $r$ 行第 $c$ 列时，他有如下的移动方式:</p><ol><li>若 $r + 1 &lt; N$，可以移动到 $(r + 1, c)$，花费 $1$ 秒;</li><li>若 $c + 1 &lt; N$，可以移动到 $(r, c + 1)$，花费 $1$ 秒;</li><li>对于任意整数 $L$，若 $H_{r,c} &gt; H_{r,c+1} &gt; \dots &gt; H_{r,c+L}$，可以移动到 $(r, c + L)$，花费 $1$ 秒;</li><li>对于任意整数 $L$，若 $H_{r,c} &gt; H_{r,c-1} &gt; \dots &gt; H_{r,c-L}$，可以移动到 $(r, c - L)$，花费 $1$ 秒。</li></ol><p>现在给出方格，请问小蓝从 $(0, 0)$ 移动到 $(N - 1, N - 1)$ 最少需要多少秒?</p><h3 id="输入格式-4"><a href="#输入格式-4" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个整数 $N$ 表示方格大小。</p><p>接下来 $N$ 行，每行包含 $N$ 个整数，表示每个方格上的数字。</p><h3 id="输出格式-4"><a href="#输出格式-4" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数表示答案。</p><h3 id="样例输入-5"><a href="#样例输入-5" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>4</span><br><span>0 </span><span>1</span> <span>9</span> <span>3</span><br><span>2 </span><span>9</span> <span>3</span> <span>7</span><br><span>8 </span><span>4</span> <span>8</span> <span>9</span><br><span>9 </span><span>8</span> <span>0</span> <span>7</span></p><h3 id="样例输出-5"><a href="#样例输出-5" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><h3 id="样例说明-1"><a href="#样例说明-1" class="headerlink" title="样例说明"></a>样例说明</h3><p>移动顺序为: $(0,0) \rightarrow (1,0) \rightarrow (2,0) \rightarrow (3,0) \rightarrow (3,2) \rightarrow (3,3)$，其中坐标 $(3,0)$、$(3,1)$、$(3,2)$ 处的数字分别为 $9 &gt; 8 &gt; 0$，所以可以花费 $1$ 秒从 $(3,0)$ 移动到 $(3, 2)$。</p><h3 id="评测用例规模与约定-4"><a href="#评测用例规模与约定-4" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $20%$ 的评测用例，$1 \leq N \leq 10$；</p><p>对于 $50%$ 的评测用例，$1 \leq N \leq 100$；</p><p>对于所有评测用例，$1 \leq N \leq 1000$，$0 \leq H_{i,j} \leq 100$。</p><h3 id="运行限制-7"><a href="#运行限制-7" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>3s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>PyPy3</td><td>5s</td><td>256M</td></tr><tr><td>Go</td><td>5s</td><td>256M</td></tr><tr><td>JavaScript</td><td>5s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-7"><a href="#解题思路-7" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> *<br><span class="hljs-comment"># 请在此输入您的代码</span><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) ]<br>f = [[inf <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  nums[i] = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment">#可以倒着走</span><br>f[n-<span class="hljs-number">1</span>][n] = -<span class="hljs-number">1</span><br>f[n][n-<span class="hljs-number">1</span>] = -<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-comment">#先更新自己</span><br>    f[i][j] = <span class="hljs-built_in">min</span>(f[i][j],f[i+<span class="hljs-number">1</span>][j]+<span class="hljs-number">1</span>,f[i][j+<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment">#然后更新捷径，要连续大于两个的才算捷径</span><br>    <span class="hljs-comment">#看横向有无捷径,跳过你左边的,i不变</span><br>    <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(j,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> l-<span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nums[i][l-<span class="hljs-number">1</span>] &gt; nums[i][l]:<br>        f[i][l-<span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(f[i][l-<span class="hljs-number">1</span>],f[i][j] +<span class="hljs-number">1</span>)<br>      <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-comment">#看纵向有无捷径，j不变</span><br>    <span class="hljs-comment"># for r in range(i,-1,-1):</span><br>    <span class="hljs-comment">#   if r-1 &gt;= 0 and nums[r-1][j] &gt; nums[r][j]:</span><br>    <span class="hljs-comment">#     f[r-1][j] = min(f[r-1][j],f[i][j] +1)</span><br>    <span class="hljs-comment">#   else:</span><br>    <span class="hljs-comment">#     break</span><br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>mp=[<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>inf=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>dp=[[<span class="hljs-number">0</span>]*n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-comment">#到x,y花费的最少步数</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    dp[i][<span class="hljs-number">0</span>]=i <span class="hljs-comment">#第i行第一个数为i</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>        dp[i][j]=inf<br>        <span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span>:<br>            dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j]+<span class="hljs-number">1</span>) <span class="hljs-comment">#从上往下走一格</span><br>            <br>        k=j<br>        <span class="hljs-keyword">while</span> mp[i][k]&lt;mp[i][k-<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> k&gt;=<span class="hljs-number">1</span>:<br>            dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k-<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>) <span class="hljs-comment">#从左往右走，且判断是否满足题目第三个条件</span><br>            k-=<span class="hljs-number">1</span><br>            <br>        dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][j-<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>) <span class="hljs-comment">#从左往右走一格</span><br><br><span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br><br><span class="hljs-comment">#题目第四个条件会增加步数，不能减少，会多走一步</span><br></code></pre></td></tr></table></figure><h2 id="等腰三角形"><a href="#等腰三角形" class="headerlink" title="等腰三角形"></a><a href="https://www.lanqiao.cn/problems/17131/learning/">等腰三角形</a></h2><h3 id="问题描述-8"><a href="#问题描述-8" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个包含 $n$ 个数的序列 $A_i$ ，每次操作可以选择其中任意一个数将其 $+1$ 或 $-1$ 。</p><p>我们要让这个序列满足能够从中任选三个数，这三个数对应长度的三条边总能组成一个等腰三角形。问最少需要多少次操作才能让序列满足条件。</p><h3 id="输入描述-1"><a href="#输入描述-1" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $n$ 。</p><p>第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \cdots, A_n$ ，相邻两个整数之间使用一个空格分隔。</p><h3 id="输出描述-1"><a href="#输出描述-1" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行包含一个整数，表示最少的操作次数。</p><h3 id="样例输入-6"><a href="#样例输入-6" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5 3 3 5 7 7<br></code></pre></td></tr></table></figure><h3 id="样例输出-6"><a href="#样例输出-6" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3<br></code></pre></td></tr></table></figure><h3 id="样例说明-2"><a href="#样例说明-2" class="headerlink" title="样例说明"></a>样例说明</h3><p>将原序列修改为 $4,4,4,7,7$ 即可。</p><h3 id="评测用例规模-1"><a href="#评测用例规模-1" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $40%$ 的评测用例， $n \leq 5000$ ， $A_i \leq 5000$ ；</p><p>对于 $70%$ 的评测用例， $n \leq 2\times 10^5$ ， $A_i \leq 10^6$ ；</p><p>对于所有评测用例， $1 \leq n \leq 2\times 10^5$ ， $1 \leq A_i \leq 10^9$ 。w</p><h3 id="运行限制-8"><a href="#运行限制-8" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 7  |  总提交次数: 69  |  通过率: 10.1%</p><p>难度: 中等   标签: 2023, 国赛, 数学, 分类讨论</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h2 id="单词分类"><a href="#单词分类" class="headerlink" title="单词分类"></a><a href="https://www.lanqiao.cn/problems/17126/learning/">单词分类</a></h2><h3 id="问题描述-9"><a href="#问题描述-9" class="headerlink" title="问题描述"></a>问题描述</h3><p>在遥远的 $\text{LQ}$ 国，只存在三种字符：$\text{l、q }$和 $\text{b}$ (ASCII 码分别为 $108、113、98$)，所有的单词都由这三种字符组合而来。小蓝为了更加快速的记忆单词，决定将词典上所有的单词按照单词前缀将其分为 $K$ 类，具体的要求是:</p><ol><li>选出 $K$ 个不同的单词前缀作为 $K$ 类；</li><li>对于字典上的每个单词，只能属于 $K$ 类中的某一个类，不能同时属于多个类；</li><li>对于 $K$ 类中的每个类，至少包含有一个单词。</li></ol><p>现在已知字典上一共有 $N$ 个单词，小蓝想要知道将这 $N$ 个单词按照上述要求分为 $K$ 类，一共有多少种不同的方案。两个方案不同指的是两个方案各自选出的 $K$ 个单词前缀不完全相同。答案可能过大，所以你需要将答案对 $1000000007$ (即 $10^9 + 7$)取模后输出。</p><h3 id="输入格式-5"><a href="#输入格式-5" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含两个整数 $N$ 和 $K$；</p><p>接下来 $N$ 行，每行包含一个单词，由 $\text{l、q、b}$ 三种字符组成。</p><h3 id="输出格式-5"><a href="#输出格式-5" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数表示答案。答案可能很大，请输出答案对 $1000000007$ 取模的值。</p><h3 id="样例输入-7"><a href="#样例输入-7" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>4</span> <span>2</span><br><span>lqb</span><br><span>lql</span><br><span>qqq</span><br><span>qql</span></p><h3 id="样例输出-7"><a href="#样例输出-7" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">4<br></code></pre></td></tr></table></figure><h3 id="样例说明-3"><a href="#样例说明-3" class="headerlink" title="样例说明"></a>样例说明</h3><p>方案 1：$\text{l&#x3D;lqb,lql、q&#x3D;qqq,qql}$; 方案 2：$\text{lq&#x3D;lqb,lql、q&#x3D;qqq,qql}$; 方案 3：$\text{l&#x3D;lqb,lql、qq&#x3D;qqq,qql}$; 方案 4：$\text{lq&#x3D;lqb,lql、qq&#x3D;qqq,qql}$。</p><p>以方案 1 为例，他表示选出的两类对应的前缀分别是 $\text{l}$ 和 $text{q}$，属于前缀 $\text{l}$ 的单词有 $\text{lqb、lql}$，属于前缀 $\text{q}$ 的单词有 $\text{qqq、qql}$，方案 1 将四个单词按照前缀分成了两类，且每类至少包含一个单词，每个单词仅属于一类，所以方案 1 满足题意。</p><h3 id="评测用例规模与约定-5"><a href="#评测用例规模与约定-5" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30%$ 的评测用例，$1 \leq N \leq 10$，$1 \leq K \leq 5$；</p><p>对于 $50%$ 的评测用例，$1 \leq N \leq 50$，$1 \leq K \leq 10$；</p><p>对于所有评测用例，$1 \leq N \leq 200$，$1 \leq K \leq 100$，$1 \leq$ 单词长度 $\leq 10$。</p><h3 id="运行限制-9"><a href="#运行限制-9" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 9  |  总提交次数: 28  |  通过率: 32.1%</p><p>难度: 中等   标签: 2023, 字典树, 国赛, 动态规划</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h1 id="第十四届Python大学B组"><a href="#第十四届Python大学B组" class="headerlink" title="第十四届Python大学B组"></a>第十四届Python大学B组</h1><h2 id="弹珠堆放"><a href="#弹珠堆放" class="headerlink" title="弹珠堆放"></a><a href="https://www.lanqiao.cn/problems/17142/learning/">弹珠堆放</a></h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/icon-menu-official.a857849-1716821316470-29.png"></p><p>题解</p><p>(89)</p><h3 id="问题描述-10"><a href="#问题描述-10" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝有 20230610 颗磁力弹珠，他对金字塔形状尤其感兴趣，如下图所示：</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049339195.png" alt="图片描述"></p><p>高度为 $1$ 的金字塔需要 $1$ 颗弹珠；</p><p>高度为 $2$ 的金字塔需要 $4$ 颗弹珠；</p><p>高度为 $3$ 的金字塔需要 $10$ 颗弹珠；</p><p>高度为 $4$ 的金字塔需要 $20$ 颗弹珠。</p><p>小蓝想要知道用他手里的弹珠可以摆出的最高的金字塔的高度是多少？</p><h3 id="答案提交-2"><a href="#答案提交-2" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-10"><a href="#运行限制-10" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 723  |  总提交次数: 767  |  通过率: 94.3%</p><p>难度: 中等   标签: 2023, 前缀和, 国赛</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-8"><a href="#解题思路-8" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n=<span class="hljs-number">20230610</span><br>dp=[<span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,<span class="hljs-number">500</span>):<br>    num=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,i+<span class="hljs-number">1</span>):<br>      num+=j<br>    dp.append(num+dp[i-<span class="hljs-number">2</span>])<br><br><span class="hljs-keyword">for</span> i,j <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(dp):<br>  <span class="hljs-keyword">if</span> n&gt;dp[i]:<br>    <span class="hljs-keyword">continue</span><br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(i)<br>    <span class="hljs-keyword">break</span><br> <span class="hljs-built_in">print</span>(<span class="hljs-number">494</span>)<br></code></pre></td></tr></table></figure><h2 id="划分"><a href="#划分" class="headerlink" title="划分"></a><a href="https://www.lanqiao.cn/problems/17143/learning/">划分</a></h2><h3 id="问题描述-11"><a href="#问题描述-11" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定 $40$ 个数，请将其任意划分成两组，每组至少一个元素。每组的权值为组内所有元素的和。划分的权值为两组权值的乘积。请问对于以下 $40$ 个数，划分的权值最大为多少。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5160 9191 6410 4657 7492 1531 8854 1253 4520 9231 1266 4801 3484 4323 5070 1789 2744 5959 9426 4433 4404 5291 2470 8533 7608 2935 8922 5273 8364 8819 7374 8077 5336 8495 5602 6553 3548 5267 9150 3309<br></code></pre></td></tr></table></figure><p>在试题包中有一个名为 \verb|nums.txt| 的文本文件，文件中的数与题面上的数相同。</p><h3 id="答案提交-3"><a href="#答案提交-3" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-11"><a href="#运行限制-11" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 186  |  总提交次数: 248  |  通过率: 75%</p><p>难度: 中等   标签: 2023, 国赛, 动态规划, 背包问题</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-9"><a href="#解题思路-9" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#根据题意可知分成两个集合的权值差要最小</span><br><span class="hljs-comment">#可以看成背包问题，背包大小为所有元素和的一半，最后看背包装了多少</span><br>ss = <span class="hljs-string">&quot;&quot;&quot;5160 9191 6410 4657 7492 1531 8854 1253 4520 9231 1266 4801 3484 4323 5070 1789 2744 5959 9426 4433 4404 5291 2470 8533 7608 2935 8922 5273 8364 8819 7374 8077 5336 8495 5602 6553 3548 5267 9150 3309&quot;&quot;&quot;</span><br>nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, ss.split(<span class="hljs-string">&quot; &quot;</span>)))<br>bag = <span class="hljs-built_in">sum</span>(nums) // <span class="hljs-number">2</span><br>n = <span class="hljs-number">40</span><br>dp = [[<span class="hljs-number">0</span>] * (bag + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    cur = nums[i - <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, bag + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j - cur &gt;= <span class="hljs-number">0</span>:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j - cur] + cur, dp[i - <span class="hljs-number">1</span>][j])<br><br>a = <span class="hljs-built_in">max</span>(dp[<span class="hljs-number">40</span>])<br>b = <span class="hljs-built_in">sum</span>(nums) - a<br><span class="hljs-built_in">print</span>(a * b)<br></code></pre></td></tr></table></figure><h2 id="偶串"><a href="#偶串" class="headerlink" title="偶串"></a><a href="https://www.lanqiao.cn/problems/17144/learning/">偶串</a></h2><h3 id="问题描述-12"><a href="#问题描述-12" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝特别喜欢偶数，当他看到字符串时，他总数要检查一下是不是每种字符都是出现偶数次。给定一个字符串，请帮助小蓝检查一下该字符串是否满足要求。</p><h3 id="输入描述-2"><a href="#输入描述-2" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行包含一个字符串，由小写英文字母组成。</p><h3 id="输出描述-2"><a href="#输出描述-2" class="headerlink" title="输出描述"></a>输出描述</h3><p>如果字符串中的每种字符都是出现偶数次，输出大写英文单词 $\verb|YES|$ ，否则输出大写英文单词 $\verb|NO|$ 。</p><h3 id="样例输入-8"><a href="#样例输入-8" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">banana<br></code></pre></td></tr></table></figure><h3 id="样例输出-8"><a href="#样例输出-8" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">NO<br></code></pre></td></tr></table></figure><h3 id="样例输入-9"><a href="#样例输入-9" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">bbnana<br></code></pre></td></tr></table></figure><h3 id="样例输出-9"><a href="#样例输出-9" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">YES<br></code></pre></td></tr></table></figure><h3 id="评测用例规模-2"><a href="#评测用例规模-2" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $50%$ 的评测用例， $1\le$ 字符串长度 $\le 1000$；</p><p>对于所有评测用例，$1\le$ 字符串长度 $\le 10^6$ 。</p><h3 id="运行限制-12"><a href="#运行限制-12" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 386  |  总提交次数: 429  |  通过率: 90%</p><p>难度: 中等   标签: 2023, 国赛, 语法</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-10"><a href="#解题思路-10" class="headerlink" title="解题思路"></a>解题思路</h3><h4 id="常规思路"><a href="#常规思路" class="headerlink" title="常规思路"></a>常规思路</h4><p>直接模拟直接求</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br><br>s = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br>d = Counter(s)<br>mark = <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> d.items():<br>    <span class="hljs-keyword">if</span> v % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>:<br>        mark = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span> <span class="hljs-keyword">if</span> mark == <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="使用异或"><a href="#使用异或" class="headerlink" title="使用异或"></a>使用异或</h4><p>根据异或的性质我们可以知道：任意两个相同的数异或的值为0，故偶数个相同的数异或的值也是0</p><p>所以最后我们走一遍循环，最后异或值只要为0那说明所有数字出现的次数为偶数次，反之则存在一个数字出现了奇数次</p><p>最后由于异或只能在数字之间，所以我们用字符的ascii码(ord)来代表这个字符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>():<br>    ans ^= <span class="hljs-built_in">ord</span>(i)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span> <span class="hljs-keyword">if</span> ans <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;YES&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="交易账本"><a href="#交易账本" class="headerlink" title="交易账本"></a><a href="https://www.lanqiao.cn/problems/17145/learning/">交易账本</a></h2><h3 id="问题描述-13"><a href="#问题描述-13" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝最近研发了一种新的记账方式，并邀请了一些用户参加测试。交易账本可以看作是交易记录的集合，每条交易记录都有着一个独一无二的交易编号 $txId$ （编号大小反映了交易记录产生的时间顺序， $txId$ 小的交易记录先发生于 $txId$ 大的交易记录），每条交易记录包含一个或多个输入信息以及一个或多个输出信息。</p><p>其中输入来自于已经发生过的某比交易的某个输出，可以理解为这笔钱从某比交易输出后继续输入到了当前这比交易中，输入信息主要包含以下数据：$fromTxId$、$fromTxOutNumber$ ，这表示当前输入来自于交易编号为 $fromTxId$ 的第 $fromTxOutNumber$ $(fromTxOutNumber&#x3D;0,1,2,\cdots )$ 个输出；输出信息主要包含以下数据：$account$、$val$ ，表示将 $val$ 数目的钱转移到了账户编号为 $account$ 的账户上。注意，当 $fromTxId$ 和 $fromTxOutNumber$ 都为 $-1$ 时，表明这是一笔特殊交易，由系统账户直接产生输出，特殊交易只含有一个输入和一个输出，可以认为系统账户拥有无限多数目的钱，特殊交易一定可以成功。</p><p>一个合法的账本应满足以下条件：1）对于每笔交易记录，所有的输入中涉及到的钱的总数目应和所有输出中钱的总数目相等；2）交易中的一个输出要么不使用，要使用的话输出中的钱应该全部分配给下一个输入，而不能分配给多个输入（特殊交易除外）；3）交易按照顺序进行，不可以在某比交易中引用还未发生的交易。</p><p>现在已知一共有 $N$ 个不同的账户，初始时所有账户钱数目都为 $0$ ，账本上总计有 $M$ 条交易记录（按照交易完成的顺序进行记录），请你来判断下账本上的记录是否是合法的。</p><h3 id="输入描述-3"><a href="#输入描述-3" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $T$ ，表示有 $T$ 组输入数据。</p><p>对于每组输入数据：</p><p>第一行包含两个整数 $N,M$ ，用一个空格分隔，分别表示账户的数目和账本的交易记录数目，其中账户编号为 $0,1,2,\cdots,N-1$ ，交易记录编号为 $0,1,2,\cdots ,M-1$ 。</p><p>接下来 $M$ 行，每行包含一条交易记录的信息，交易记录编号依次为 $0, 1, 2, \cdots, M-1$ 。第一个整数 $inCount$ 表示输入的个数，接下来包含 $inCount$ 个输入信息，每个输入信息包含 $fromTxId$ 和 $fromTxOutNumber$ 两个整数；接下来包含一个整数 $outCount$ 表示输出的个数，然后接着包含 $outCount$ 个输出信息，每个输出信息包含 $account$ 和 $val$ 两个整数。</p><h3 id="输出描述-3"><a href="#输出描述-3" class="headerlink" title="输出描述"></a>输出描述</h3><p>对于每组输入数据输出一行，如果账本记录合法则输出英文单词 $\verb|YES|$ ，否则输出英文单词 $\verb|NO|$。</p><h3 id="样例输入-10"><a href="#样例输入-10" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs text">4<br>3 3<br>1 -1 -1 1 0 100<br>1 0 0 2 1 50 2 50<br>2 1 0 1 1 1 2 100<br>3 3<br>1 -1 -1 1 0 100<br>1 0 0 2 1 50 2 50<br>2 1 0 1 1 1 2 150<br>3 3<br>1 -1 -1 1 0 100<br>1 0 0 2 1 50 2 50<br>3 0 0 1 0 1 1 1 2 200<br>3 3<br>1 -1 -1 1 0 100<br>2 0 0 2 0 2 1 100 2 100<br>1 -1 -1 1 2 100<br></code></pre></td></tr></table></figure><h3 id="样例输出-10"><a href="#样例输出-10" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">YES NO NO NO<br></code></pre></td></tr></table></figure><h3 id="样例说明-4"><a href="#样例说明-4" class="headerlink" title="样例说明"></a>样例说明</h3><p>对于第一个数据：第一条交易 $(txId&#x3D;0)$ 为特殊交易，给账户 $0$ 转入了 $100$；第二条交易 $(txId&#x3D;1)$ 将上一条交易的唯一一个输出作为当前交易的输入，有两个输出，分别给账户 $1$ 和 $2$ 转入了 $50$ ；最后一条交易 $(txId&#x3D;2)$ 将上一条交易的两个输出作为当前交易的输入，给账户 $2$ 转入了 $100$ 。</p><p>对于第二个数据，第三条交易中输入与输出总额不相等。</p><p>对于第三个数据，第一条交易中的输出被使用了超过一次。</p><p>对于第四个数据，第二条交易中引用了还未发生的交易的输出。</p><h3 id="评测用例规模-3"><a href="#评测用例规模-3" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于所有评测用例， $1\le T\le 10$ ， $1\le N\le 100$ ， $1\le M\le 1000$ ， $1\le inCount, outCount\le 100$ ， $1\le$ 交易中涉及到钱的数目$\le 10000$ ， $0\le account\le N-1$ ， $0\le fromTxId\le M-1$ 。</p><h3 id="运行限制-13"><a href="#运行限制-13" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-11"><a href="#解题思路-11" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> os<br>read=sys.stdin.readline<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">judge</span>():<br>    n,m=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment">#    print(f&#x27;n=&#123;n&#125;,&#123;m&#125;&#x27;)</span><br>    vis=[[<span class="hljs-number">0</span>]*m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)]<br>    flag=<span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        record=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,read().split()))<br>        money=<span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>*record[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>,<span class="hljs-number">2</span>):<br>            <span class="hljs-keyword">if</span> record[i]==-<span class="hljs-number">1</span>:<br>                money=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">if</span> vis[record[i]][record[i+<span class="hljs-number">1</span>]]==<span class="hljs-number">0</span>:<br>                    flag=<span class="hljs-literal">False</span><br>                <span class="hljs-keyword">else</span>:<br>                    money+=vis[record[i]][record[i+<span class="hljs-number">1</span>]]<br>                    vis[record[i]][record[i+<span class="hljs-number">1</span>]]=<span class="hljs-number">0</span><br>        out=<span class="hljs-number">2</span>*record[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(out+<span class="hljs-number">2</span>,<span class="hljs-built_in">len</span>(record),<span class="hljs-number">2</span>):<br>            j=(i-out)//<span class="hljs-number">2</span>-<span class="hljs-number">1</span><br><span class="hljs-comment">#            print(f&#x27;out=&#123;out&#125;,i=&#123;i&#125;,j=&#123;j&#125;&#x27;)</span><br>            vis[idx][j]=record[i]<br>            <span class="hljs-keyword">if</span> money!=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>):<br>                money-=record[i]<br>        <span class="hljs-keyword">if</span> money!=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>) <span class="hljs-keyword">and</span> money!=<span class="hljs-number">0</span>:<br>            flag=<span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;YES&#x27;</span> <span class="hljs-keyword">if</span> flag==<span class="hljs-literal">True</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;NO&#x27;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    t=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t):<br>        <span class="hljs-built_in">print</span>(judge())<br>    <span class="hljs-keyword">return</span><br><br>main()<br></code></pre></td></tr></table></figure><h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a><a href="https://www.lanqiao.cn/problems/17146/learning/">背包问题</a></h2><h3 id="问题描述-14"><a href="#问题描述-14" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝是一位狂热的积木爱好者，家里堆满了自己用积木组装的建筑模型。最近，有两款新出的积木组件上市，小蓝自然不会错过，他带上了自己的三个背包来到了积木商城，打算将尽可能多的积木组件带回家，每个背包都有一个固定的空间大小。小蓝只会购买这两种新出的积木组件 $A$ 和 $B$ ， $A$ 和 $B$ 各自会占用背包的一部分空间，但对于同一种类型的积木占用的空间是相同的。小蓝想知道自己最多能带走多少数量的积木组件。</p><p>可以认为小蓝有足够的货币，只要背包可以装下的积木他都有能力购买。商场内的积木数量也是有限制的。</p><h3 id="输入描述-4"><a href="#输入描述-4" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $T$ ，表示有 $T$ 组独立的询问。</p><p>每一组询问由三行组成。</p><p>每组询问的第一行包含三个整数 $B_1, B_2, B_3$ ，相邻的整数之间使用一个空格分隔，表示三个背包的空间大小。</p><p>每组询问的第二行包含两个整数 $cnt_A, cnt_B$ ，用一个空格分隔，分别表示商场内积木组件 $A$ 和 $B$ 的总量。</p><p>每组询问的第三行包含两个整数 $V_A, V_B$ ，用一个空格分隔，分别表示每个积木组件 $A$ 和 $B$ 所占用的空间大小。</p><h3 id="输出描述-4"><a href="#输出描述-4" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出 $T$ 行，每行包含一个整数表示答案。</p><h3 id="样例输入-11"><a href="#样例输入-11" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 2 2 3 1 2 1 2 3 8 3 3 4 4 2 6 8 7 10 10 5 1<br></code></pre></td></tr></table></figure><h3 id="样例输出-11"><a href="#样例输出-11" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 5 12<br></code></pre></td></tr></table></figure><h3 id="样例说明-5"><a href="#样例说明-5" class="headerlink" title="样例说明"></a>样例说明</h3><p>对于第一组询问，第一个背包装一个 B 积木，无剩余空间；第二个背包装一个 B 积木，无剩余空间；第三个背包装一个 A 积木，剩余 2 空间，但积木已经没有了；最终答案是 $3$ ，可以带走所有的积木。</p><p>对于第二组询问，第一个背包和第三个背包各自装一个 B 组件，第二个背包装两个 B 组件和一个 A 组件，答案是 $5$ 。</p><p>对于第三组询问，第一个背包：1A+1B；第二个背包：8B；第三个背包：1A+1B。答案是 $12$ 。</p><h3 id="评测用例规模-4"><a href="#评测用例规模-4" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $30%$ 的评测用例， $1\le cnt_A,cnt_B\le 100$ ；</p><p>对于所有评测用例， $1\le T\le 100$ ， $1\le B_1,B_2,B_3\le 10^9$ ， $1\le V_A,V_B\le 10^9$ ， $1\le cnt_A,cnt_B\le 1,000$ 。</p><h3 id="运行限制-14"><a href="#运行限制-14" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-12"><a href="#解题思路-12" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">solve</span>():<br>    a = LII()  <span class="hljs-comment"># 3个背包</span><br>    A, B = MII()  <span class="hljs-comment"># 1e3</span><br>    va, vb = MII()<br>    <span class="hljs-keyword">if</span> va &gt; vb:<br>        va, vb = vb, va<br>        A, B = B, A<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(A, a[<span class="hljs-number">0</span>] // va) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(A - i, a[<span class="hljs-number">1</span>] // va) + <span class="hljs-number">1</span>):<br>            cnta, cntb = A, B<br>            mx1 = <span class="hljs-built_in">min</span>((a[<span class="hljs-number">0</span>] - i * va) // vb, cntb)  <span class="hljs-comment"># 更新B的剩余数量</span><br>            cntb -= mx1<br>            mx2 = <span class="hljs-built_in">min</span>((a[<span class="hljs-number">1</span>] - j * va) // vb, cntb)<br>            cntb -= mx2<br>            t = i + j + mx1 + mx2   <span class="hljs-comment"># B1和B2的数量和</span><br>            leftA = cnta - i - j<br>            mi = <span class="hljs-built_in">min</span>(leftA, a[<span class="hljs-number">2</span>] // va)  <span class="hljs-comment"># B3最多能装多少个A</span><br>            left_v = a[<span class="hljs-number">2</span>] - mi * va<br>            t += mi + <span class="hljs-built_in">min</span>(left_v // vb, cntb)  <span class="hljs-comment"># 剩下的装B</span><br>            res = <span class="hljs-built_in">max</span>(res, t)<br>    <span class="hljs-built_in">print</span>(res)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># 1多组数据，0单组数据</span><br>    t = <span class="hljs-number">1</span> <br>    <span class="hljs-keyword">if</span> t:<br>        t = II()<br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t):<br>            solve()<br>    <span class="hljs-keyword">else</span>:<br>        solve()<br></code></pre></td></tr></table></figure><h2 id="翻转"><a href="#翻转" class="headerlink" title="翻转"></a><a href="https://www.lanqiao.cn/problems/18427/learning/">翻转</a></h2><h3 id="问题描述-15"><a href="#问题描述-15" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝制作了 $n$ 个工件，每个工件用一个由小写英文字母组成的，长度为 $2$ 的字符串表示，第 $i$ 个工件表示为 $s_i$ 。小蓝想把 $n$ 个工件拼接到一起，方便转移到另一个地方完成下一道工序，而拼接后的工件用字符串 $S&#x3D;s_1+s_2+…+s_n$ 表示，其中 $+$ 表示一种奇特的拼接方式：对于 $c&#x3D;a+b$ 来说，如果 $a$ 的第二个字符和 $b$ 的第一个字符相同，则拼接后的结果 $c$ 长度为 $3$ 而不是 $4$ ，中间相同的字符可以省略一个，比如 $xy+yz&#x3D;xyz$ 而 $xy+zy&#x3D;xyzy$ 。小蓝为了让拼接后的字符串 $S$ 的长度尽量小，可以将若干个工件进行左右翻转之后再进行拼接，请问拼接后的字符串 $S$ 的最小长度是多少？</p><p>请注意所有工件必须按出现顺序依次拼接，可以翻转任意工件。</p><h3 id="输入描述-5"><a href="#输入描述-5" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个正整数 $n$ 。</p><p>接下来 $n$ 行，每行包含一个长度为 $2$ 字符串，依次表示 $s_1, s_2, \cdots, s_n$ 。</p><h3 id="输出描述-5"><a href="#输出描述-5" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行，包含一个整数表示答案。</p><h3 id="样例输入-12"><a href="#样例输入-12" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 ab cb zz<br></code></pre></td></tr></table></figure><h3 id="样例输出-12"><a href="#样例输出-12" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5<br></code></pre></td></tr></table></figure><h3 id="样例说明-6"><a href="#样例说明-6" class="headerlink" title="样例说明"></a>样例说明</h3><p>将 $s_2$ 翻转后，拼接结果为 $abczz$ ，长度为 $5$ 。</p><h3 id="评测用例规模-5"><a href="#评测用例规模-5" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $20%$ 的评测用例， $n\le20$；</p><p>对于所有评测用例，$1\le n \le 10^5$ 。</p><h3 id="运行限制-15"><a href="#运行限制-15" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 204  |  总提交次数: 253  |  通过率: 80.6%</p><p>难度: 中等   标签: 2023, 国赛, 动态规划</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-13"><a href="#解题思路-13" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>s = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>dp1 = [<span class="hljs-number">2</span>] * n <span class="hljs-comment"># dp1[i] 第i个字符串不翻转的最小长度</span><br>dp2 = [<span class="hljs-number">2</span>] * n <span class="hljs-comment"># dp2[i] 第i个字符串翻转的最小长度</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n): <span class="hljs-comment"># 枚举每一个字符串</span><br>    <span class="hljs-comment"># 1.dp1[i]从dp1[i-1]或dp2[i-1]转移</span><br>    k1 = dp1[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] == s[i][<span class="hljs-number">0</span>])<br>    k2 = dp2[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] == s[i][<span class="hljs-number">0</span>])<br>    dp1[i] = <span class="hljs-built_in">min</span>(k1, k2)<br>    <span class="hljs-comment"># 2.dp1[i]从dp1[i-1]或dp2[i-1]转移</span><br>    k3 = dp1[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] == s[i][<span class="hljs-number">1</span>])<br>    k4 = dp2[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] == s[i][<span class="hljs-number">1</span>])<br>    dp2[i] = <span class="hljs-built_in">min</span>(k3, k4)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">min</span>(dp1[n-<span class="hljs-number">1</span>], dp2[n-<span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><h2 id="最大阶梯"><a href="#最大阶梯" class="headerlink" title="最大阶梯"></a><a href="https://www.lanqiao.cn/problems/17147/learning/">最大阶梯</a></h2><h3 id="问题描述-16"><a href="#问题描述-16" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝特别喜爱阶梯图案，阶梯图案可以看做是由若干个大小和颜色都相同的方格组成的，对于大小为 $N$ 的阶梯图案，包含了 $N$ 个连续的列，其中第 $i$ 列恰好有 $i$（$1\le i\le N$）个方格，将这 $N$ 列的底部对齐后便组成了一个阶梯图案，将其按照 $90$ 度旋转若干次后仍是阶梯图案，下图展示了几个不同大小的阶梯图案：</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049869582.png" alt="图片描述"></p><p>小蓝有一块大小为 $H\times H$ 的布匹，由 $H\times H$ 个大小相同的方格区域组成，每一个方格都有自己的颜色。小蓝可以沿着方格的边缘对布匹进行裁剪，他想要知道自己能得到的最大的同色阶梯图案的大小是多少？</p><h3 id="输入描述-6"><a href="#输入描述-6" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $H$ 表示布匹大小。</p><p>接下来输入 $H$ 行，每行包含 $H$ 个整数，相邻的整数之间使用一个空格分隔，表示每个方格的颜色。</p><h3 id="输出描述-6"><a href="#输出描述-6" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-13"><a href="#样例输入-13" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5 0 2 1 1 0 0 0 2 2 0 0 0 1 1 1 0 0 1 1 1 2 1 1 0 2<br></code></pre></td></tr></table></figure><h3 id="样例输出-13"><a href="#样例输出-13" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3<br></code></pre></td></tr></table></figure><h3 id="样例说明-7"><a href="#样例说明-7" class="headerlink" title="样例说明"></a>样例说明</h3><p>如下图所示，最大的同色阶梯图案用红色边框标出。</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049888211.png" alt="图片描述"></p><h3 id="评测用例规模-6"><a href="#评测用例规模-6" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $30%$ 的评测用例， $1\le H\le 10$；</p><p>对于 $60%$ 的评测用例， $1\le H\le 100$；</p><p>对于所有评测用例， $1\le H\le 1000$ ， $0\le$ 方格颜色$\le 10$ 。</p><h3 id="运行限制-16"><a href="#运行限制-16" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>5s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>PyPy3</td><td>5s</td><td>256M</td></tr><tr><td>Go</td><td>5s</td><td>256M</td></tr><tr><td>JavaScript</td><td>5s</td><td>256M</td></tr></tbody></table><p>总通过次数: 96  |  总提交次数: 158  |  通过率: 60.8%</p><p>难度: 中等   标签: 2023, 国赛, 动态规划</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-14"><a href="#解题思路-14" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><br><span class="hljs-comment"># 既然是动态规划，就要找转移来源，发现 dp[i][j] = min(dp[i-1][j], dp[i][j-1]) + 1</span><br><span class="hljs-comment"># 图形可以旋转 90 度，对应的图形就有 4 种</span><br><span class="hljs-comment"># 有两种解决思路: 1. 将原始图形进行旋转，用 同一个 方法 解决</span><br><span class="hljs-comment">#                2. 原始图不动，写 四 种寻找方法 解决</span><br><span class="hljs-comment"># 时间复杂度都是 O(n ^ 2)</span><br><br><br>h = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>matrix = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br>matrix_fan = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br>matrix_col = [[<span class="hljs-number">0</span>] * h <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br>matrix_col_fan = [[<span class="hljs-number">0</span>] * h <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h):<br>  l = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>  matrix[i].extend(l)<br>  matrix_fan[h-i-<span class="hljs-number">1</span>].extend(l[::-<span class="hljs-number">1</span>])<br>  <span class="hljs-keyword">for</span> j, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(l):<br>    matrix_col[h-j-<span class="hljs-number">1</span>][i] = v<br>    matrix_col_fan[j][h-i-<span class="hljs-number">1</span>] = v<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">l: <span class="hljs-built_in">list</span></span>):<br>  ans = <span class="hljs-number">1</span><br>  dp = [[<span class="hljs-number">1</span>] * h <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, h):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, h):<br>      <span class="hljs-keyword">if</span> l[i][j] == l[i-<span class="hljs-number">1</span>][j] == l[i][j-<span class="hljs-number">1</span>]:<br>        dp[i][j] = <span class="hljs-built_in">min</span>(dp[i-<span class="hljs-number">1</span>][j], dp[i][j-<span class="hljs-number">1</span>]) + <span class="hljs-number">1</span><br>        ans = <span class="hljs-built_in">max</span>(ans, dp[i][j])<br>  <br>  <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(check(matrix), check(matrix_fan), check(matrix_col), check(matrix_col_fan)))<br></code></pre></td></tr></table></figure><h2 id="最长回文前后缀"><a href="#最长回文前后缀" class="headerlink" title="最长回文前后缀"></a><a href="https://www.lanqiao.cn/problems/17148/learning/">最长回文前后缀</a></h2><h2 id="贸易航线"><a href="#贸易航线" class="headerlink" title=" 贸易航线"></a><a href="https://www.lanqiao.cn/problems/17149/learning/"> 贸易航线</a></h2><h2 id="困局"><a href="#困局" class="headerlink" title="困局"></a><a href="https://www.lanqiao.cn/problems/17150/learning/">困局</a></h2><h1 id="第十四届Python大学A组"><a href="#第十四届Python大学A组" class="headerlink" title="第十四届Python大学A组"></a>第十四届Python大学A组</h1><h2 id="跑步计划-1"><a href="#跑步计划-1" class="headerlink" title="跑步计划"></a><a href="https://www.lanqiao.cn/problems/17113/learning/">跑步计划</a></h2><h2 id="残缺的数字"><a href="#残缺的数字" class="headerlink" title="残缺的数字"></a><a href="https://www.lanqiao.cn/problems/17114/learning/">残缺的数字</a></h2><h2 id="整数变换-1"><a href="#整数变换-1" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning/">整数变换</a></h2><h2 id="2023-1"><a href="#2023-1" class="headerlink" title="2023"></a><a href="https://www.lanqiao.cn/problems/17116/learning/">2023</a></h2><h2 id="火车运输"><a href="#火车运输" class="headerlink" title="火车运输"></a><a href="https://www.lanqiao.cn/problems/17117/learning/">火车运输</a></h2><h2 id="走方格-1"><a href="#走方格-1" class="headerlink" title="走方格"></a><a href="https://www.lanqiao.cn/problems/17118/learning/">走方格</a></h2><h2 id="等腰三角形-1"><a href="#等腰三角形-1" class="headerlink" title="等腰三角形"></a><a href="https://www.lanqiao.cn/problems/17131/learning/">等腰三角形</a></h2><h2 id="彩色二叉树"><a href="#彩色二叉树" class="headerlink" title="彩色二叉树"></a><a href="https://www.lanqiao.cn/problems/17124/learning/">彩色二叉树</a></h2><h2 id="选段排序"><a href="#选段排序" class="headerlink" title="选段排序"></a><a href="https://www.lanqiao.cn/problems/17120/learning/">选段排序</a></h2><h2 id="最长同类子串"><a href="#最长同类子串" class="headerlink" title="最长同类子串"></a><a href="https://www.lanqiao.cn/problems/17141/learning/">最长同类子串</a></h2><h1 id="第十四届Java大学C组"><a href="#第十四届Java大学C组" class="headerlink" title="第十四届Java大学C组"></a>第十四届Java大学C组</h1><h2 id="跑步计划-2"><a href="#跑步计划-2" class="headerlink" title="跑步计划"></a><a href="https://www.lanqiao.cn/problems/17113/learning/">跑步计划</a></h2><h2 id="混乘数字-1"><a href="#混乘数字-1" class="headerlink" title="混乘数字"></a><a href="https://www.lanqiao.cn/problems/17121/learning/">混乘数字</a></h2><h2 id="整数变换-2"><a href="#整数变换-2" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning/">整数变换</a></h2><h2 id="定时任务-1"><a href="#定时任务-1" class="headerlink" title="定时任务"></a><a href="https://www.lanqiao.cn/problems/17115/learning/">定时任务</a></h2><h2 id="2023-2"><a href="#2023-2" class="headerlink" title="2023"></a><a href="https://www.lanqiao.cn/problems/17116/learning/">2023</a></h2><h2 id="最大算式-1"><a href="#最大算式-1" class="headerlink" title="最大算式"></a><a href="https://www.lanqiao.cn/problems/17130/learning/">最大算式</a></h2><h2 id="火车运输-1"><a href="#火车运输-1" class="headerlink" title="火车运输"></a><a href="https://www.lanqiao.cn/problems/17117/learning/">火车运输</a></h2><h2 id="走方格-2"><a href="#走方格-2" class="headerlink" title="走方格"></a><a href="https://www.lanqiao.cn/problems/17118/learning/">走方格</a></h2><h2 id="彩色二叉树-1"><a href="#彩色二叉树-1" class="headerlink" title="彩色二叉树"></a><a href="https://www.lanqiao.cn/problems/17124/learning/">彩色二叉树</a></h2><h2 id="单词分类-1"><a href="#单词分类-1" class="headerlink" title="单词分类"></a><a href="https://www.lanqiao.cn/problems/17126/learning/">单词分类</a></h2><h1 id="第十四届Java大学B组"><a href="#第十四届Java大学B组" class="headerlink" title="第十四届Java大学B组"></a>第十四届Java大学B组</h1><h2 id="互质"><a href="#互质" class="headerlink" title="互质"></a><a href="https://www.lanqiao.cn/problems/17132/learning/">互质</a></h2><h2 id="逆元"><a href="#逆元" class="headerlink" title="逆元"></a><a href="https://www.lanqiao.cn/problems/17133/learning/">逆元</a></h2><h2 id="玩具"><a href="#玩具" class="headerlink" title="玩具"></a><a href="https://www.lanqiao.cn/problems/17134/learning/">玩具</a></h2><h2 id="不完整的算式"><a href="#不完整的算式" class="headerlink" title="不完整的算式"></a><a href="https://www.lanqiao.cn/problems/17135/learning/">不完整的算式</a></h2><h2 id="星球"><a href="#星球" class="headerlink" title="星球"></a><a href="https://www.lanqiao.cn/problems/17136/learning/">星球</a></h2><h2 id="序列"><a href="#序列" class="headerlink" title="序列"></a><a href="https://www.lanqiao.cn/problems/17137/learning/">序列</a></h2><h2 id="电动车"><a href="#电动车" class="headerlink" title="电动车"></a><a href="https://www.lanqiao.cn/problems/17138/learning/">电动车</a></h2><h2 id="游戏"><a href="#游戏" class="headerlink" title="游戏"></a><a href="https://www.lanqiao.cn/problems/6251/learning/">游戏</a></h2><h2 id="非对称二叉树"><a href="#非对称二叉树" class="headerlink" title="非对称二叉树"></a><a href="https://www.lanqiao.cn/problems/17139/learning/">非对称二叉树</a></h2><h2 id="数和游戏"><a href="#数和游戏" class="headerlink" title="数和游戏"></a><a href="https://www.lanqiao.cn/problems/17140/learning/">数和游戏</a></h2><h1 id="第十四届Java大学A组"><a href="#第十四届Java大学A组" class="headerlink" title="第十四届Java大学A组"></a>第十四届Java大学A组</h1><h2 id="X质数"><a href="#X质数" class="headerlink" title="X质数"></a><a href="https://www.lanqiao.cn/problems/17128/learning/">X质数</a></h2><h2 id="残缺的数字-1"><a href="#残缺的数字-1" class="headerlink" title="残缺的数字"></a><a href="https://www.lanqiao.cn/problems/17114/learning/">残缺的数字</a></h2><h2 id="整数变换-3"><a href="#整数变换-3" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning/">整数变换</a></h2><h2 id="最大算式-2"><a href="#最大算式-2" class="headerlink" title="最大算式"></a><a href="https://www.lanqiao.cn/problems/17130/learning/">最大算式</a></h2><h2 id="躲炮弹-1"><a href="#躲炮弹-1" class="headerlink" title="躲炮弹"></a><a href="https://www.lanqiao.cn/problems/17123/learning/">躲炮弹</a></h2><h2 id="等腰三角形-2"><a href="#等腰三角形-2" class="headerlink" title="等腰三角形"></a><a href="https://www.lanqiao.cn/problems/17131/learning/">等腰三角形</a></h2><h2 id="连续数组"><a href="#连续数组" class="headerlink" title="连续数组"></a><a href="https://www.lanqiao.cn/problems/17125/learning/">连续数组</a></h2><h2 id="质数排序"><a href="#质数排序" class="headerlink" title="质数排序"></a><a href="https://www.lanqiao.cn/problems/17119/learning/">质数排序</a></h2><h2 id="单词分类-2"><a href="#单词分类-2" class="headerlink" title="单词分类"></a><a href="https://www.lanqiao.cn/problems/17126/learning/">单词分类</a></h2><h2 id="游戏的得分"><a href="#游戏的得分" class="headerlink" title="游戏的得分"></a><a href="https://www.lanqiao.cn/problems/17127/learning/">游戏的得分</a></h2>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥国赛</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥国赛知识梳理</title>
    <link href="/2024/05/24/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/"/>
    <url>/2024/05/24/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="线性DP"><a href="#线性DP" class="headerlink" title="线性DP"></a>线性DP</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132127462.png" alt="image-20240526132127462"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132140926.png" alt="image-20240526132140926"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132149001.png" alt="image-20240526132149001"></p><h4 id="动态规划分析步骤"><a href="#动态规划分析步骤" class="headerlink" title="动态规划分析步骤"></a>动态规划分析步骤</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132222766.png" alt="image-20240526132222766"></p><h4 id="模板题——破损的楼梯"><a href="#模板题——破损的楼梯" class="headerlink" title="模板题——破损的楼梯"></a>模板题——<a href="https://www.lanqiao.cn/problems/3367/learning">破损的楼梯</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">3367 破损的楼梯</span><br><span class="hljs-string">https://www.lanqiao.cn/problems/3367/learning</span><br><span class="hljs-string"></span><br><span class="hljs-string">这是一个典型的线性DP问题，dp[i]表示到达第i阶楼梯的方法数</span><br><span class="hljs-string">状态转移方程：dp[i]=dp[i-1]+dp[i-2]</span><br><span class="hljs-string">状态压缩：dp[i]只与dp[i-1]和dp[i-2]有关，所以可以压缩</span><br><span class="hljs-string">时间复杂度：O(n)</span><br><span class="hljs-string">空间复杂度：O(n)</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>)<br>mod = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>)<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>vis = [<span class="hljs-number">0</span>] * N<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a: vis[i] = <span class="hljs-number">1</span><br>dp = [<span class="hljs-number">0</span>] * N<br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span> - vis[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> vis[i]:<br>        <span class="hljs-keyword">continue</span><br>    dp[i] = (dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]) % mod<br><span class="hljs-built_in">print</span>(dp[n])<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br>tp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a:<br>  tp[i]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>-tp[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">if</span> tp[i]==<span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">continue</span><br>  dp[i]=dp[i-<span class="hljs-number">1</span>]+dp[i-<span class="hljs-number">2</span>]<br>mod=<span class="hljs-number">10</span>**<span class="hljs-number">9</span>+<span class="hljs-number">7</span><br><span class="hljs-built_in">print</span>(dp[i]%mod)<br></code></pre></td></tr></table></figure><h3 id="二维DP"><a href="#二维DP" class="headerlink" title="二维DP"></a>二维DP</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132351934.png" alt="image-20240526132351934"></p><h4 id="分析步骤"><a href="#分析步骤" class="headerlink" title="分析步骤"></a>分析步骤</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132407561.png" alt="image-20240526132407561"></p><h4 id="模板题——数字三角形"><a href="#模板题——数字三角形" class="headerlink" title="模板题——数字三角形"></a>模板题——<a href="https://www.lanqiao.cn/problems/1536/learning">数字三角形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>dp = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j == <span class="hljs-number">0</span>:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">elif</span> j == i:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j] += <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>], dp[i - <span class="hljs-number">1</span>][j])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp[N - <span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132533080.png" alt="image-20240526132533080"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132546231.png" alt="image-20240526132546231"></p><h4 id="模板题——摆花"><a href="#模板题——摆花" class="headerlink" title="模板题——摆花"></a>模板题——<a href="https://www.lanqiao.cn/problems/389/learning">摆花</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">n种花凑 m盆 每种&lt;a[i]</span><br><span class="hljs-string">1.分解子问题</span><br><span class="hljs-string">前i种花，一共j盆，答案是dp[n][m]</span><br><span class="hljs-string">2.状态转移</span><br><span class="hljs-string">前i种花有j盆方案数  如何由前i-1种有j盆得出.</span><br><span class="hljs-string">以下每一种选择是一种方案</span><br><span class="hljs-string">第i种花可以选0盆,前i-1种花有j盆：dp[i][j] = dp[i-1][j]</span><br><span class="hljs-string">第i种花可以选1盆,前i-1种花有j-1盆：：dp[i][j] = dp[i-1][j-1]</span><br><span class="hljs-string">...</span><br><span class="hljs-string">第i种花可以选a[i]盆,前i-1种花有j-a[i]盆：：dp[i][j] = dp[i-1][j-a[i]]</span><br><span class="hljs-string">3.边界条件，每种花都不选</span><br><span class="hljs-string">前i种花 0盆 是 一种方案 dp[i][0] = 1</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>MOD = <span class="hljs-number">10</span> ** <span class="hljs-number">6</span> + <span class="hljs-number">7</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>):<br>    dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><span class="hljs-comment"># 状态转移,当下做出的选择，利用之前dp,求dp[i][j]</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(a[i],j)+<span class="hljs-number">1</span>):<br>            dp[i][j]+=dp[i-<span class="hljs-number">1</span>][j-k]<br>            dp[i][j]%=MOD<br><span class="hljs-built_in">print</span>(dp[n][m])<br></code></pre></td></tr></table></figure><h4 id="模板题——选数异或"><a href="#模板题——选数异或" class="headerlink" title="模板题——选数异或"></a>模板题——<a href="https://www.lanqiao.cn/problems/3711/learning">选数异或</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py">n,x = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>Mod = <span class="hljs-number">998244353</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"> dp[i][j]前i个正整数有j个子序列异或成 j 的方案；答案dp[n][x]</span><br><span class="hljs-string"> dp[i][j] = 选第i个数字 + 不选第i个数字</span><br><span class="hljs-string">          = dp[i - 1][j ^ a[i]] + dp[i - 1][j]   </span><br><span class="hljs-string">          (因为如果选了第i个数字，那么a[i] ^ 前数 = j, 所以：前数 = j ^ a[i])</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>dp = [[<span class="hljs-number">0</span>] * (<span class="hljs-number">64</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-comment"># 初始化为 0</span><br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">64</span>):<br>        dp[i][j] = (dp[i-<span class="hljs-number">1</span>][j] + dp[i-<span class="hljs-number">1</span>][j ^ a[i]]) % Mod<br><span class="hljs-built_in">print</span>(dp[n][x])<br></code></pre></td></tr></table></figure><h3 id="LIS"><a href="#LIS" class="headerlink" title="LIS"></a>LIS</h3><h4 id="最长上升子序列"><a href="#最长上升子序列" class="headerlink" title="最长上升子序列"></a>最长上升子序列</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132915221.png" alt="image-20240526132915221"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132923043.png" alt="image-20240526132923043"></p><h4 id="模板题——蓝桥勇士"><a href="#模板题——蓝桥勇士" class="headerlink" title="模板题——蓝桥勇士"></a>模板题——<a href="https://www.lanqiao.cn/problems/2049/learning">蓝桥勇士</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=[<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">1</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> a[i]&lt;a[j]:<br>      dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[i]+<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h4 id="模板题——合唱队形"><a href="#模板题——合唱队形" class="headerlink" title="模板题——合唱队形"></a>模板题——<a href="https://www.lanqiao.cn/problems/742/learning">合唱队形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp1 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp1[i]表示以i结尾的最长上升子序列长度</span><br>dp2 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp2[i]表示以i出发的最长下降子序列长度</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    dp1[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, i):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp1[i] = <span class="hljs-built_in">max</span>(dp1[i], dp1[j] + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    dp2[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp2[i] = <span class="hljs-built_in">max</span>(dp2[i], dp2[j] + <span class="hljs-number">1</span>)<br><br>ans = <span class="hljs-built_in">max</span>((dp1[i] + dp2[i] - <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(n-ans)<br></code></pre></td></tr></table></figure><h3 id="LCS"><a href="#LCS" class="headerlink" title="LCS"></a>LCS</h3><h4 id="最长公共子序列"><a href="#最长公共子序列" class="headerlink" title="最长公共子序列"></a>最长公共子序列</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133212404.png" alt="image-20240526133212404"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133222560.png" alt="image-20240526133222560"></p><h4 id="模板题——最长公共子序列"><a href="#模板题——最长公共子序列" class="headerlink" title="模板题——最长公共子序列"></a>模板题——<a href="https://www.lanqiao.cn/problems/1189/learning">最长公共子序列</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 这段代码实现的是计算两个序列（a 和 b）的最长公共子序列（Longest Common Subsequence, LCS）的长度。LCS 是一种在计算两个序列相似度时常用的度量方法。这个问题通常通过动态规划来解决。现在，我将逐步解释这段代码的各个部分：</span><br><br><span class="hljs-comment"># 输入处理</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>b = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment"># 首先，通过 input().split() 获取两个整数 n 和 m，分别表示序列 a 和 b 的长度。</span><br><span class="hljs-comment"># 接着，读取这两个序列，并在序列前面各自加上一个 0 作为哨兵值。这样做是为了让序列的索引从 1 开始，方便后续操作。</span><br><span class="hljs-comment"># 初始化动态规划数组</span><br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>)]  <span class="hljs-comment"># 注意这里是 m，不是 n</span><br>now = <span class="hljs-number">0</span>; old = <span class="hljs-number">1</span><br><span class="hljs-comment"># 初始化一个二维动态规划数组 dp，但这里只用到了两行（range(2)），目的是节省空间。因为在计算当前状态时，只需要用到前一行（即上一状态）的数据。m + 1 是因为考虑到从 0 开始到 m 的所有可能位置。</span><br><span class="hljs-comment"># now 和 old 变量用来在这两行之间切换，表示当前行和上一行。</span><br><span class="hljs-comment"># 动态规划过程</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    now, old = old, now<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j - <span class="hljs-number">1</span>], dp[old][j])<br>        <span class="hljs-keyword">if</span> a[i] == b[j]: <br>            dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j], dp[old][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>)<br><span class="hljs-comment"># 这部分是动态规划的核心。</span><br><span class="hljs-comment"># 外层循环遍历序列 a，内层循环遍历序列 b。</span><br><span class="hljs-comment"># dp[now][j] = max(dp[now][j - 1], dp[old][j])：当前状态是基于之前状态的最大值，这表示如果当前字符不匹配，LCS 长度不变。</span><br><span class="hljs-comment"># 如果当前位置的字符相等（a[i] == b[j]），则检查上一个状态的值并加一，即 dp[now][j] = max(dp[now][j], dp[old][j - 1] + 1)。这反映了找到了一个公共元素，因此当前的最长公共子序列长度增加了 1。</span><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-built_in">print</span>(dp[now][m])<br><span class="hljs-comment"># 最后，打印出最长公共子序列的长度，即在遍历完两个序列后，dp 数组最后一个元素（dp[now][m]）的值。</span><br><span class="hljs-comment"># 通过这种方式，代码高效地计算了两个序列的最长公共子序列的长度，同时通过只使用两行的动态规划数组大大减少了空间复杂度。</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133424736.png" alt="image-20240526133424736"></p><h2 id="背包DP"><a href="#背包DP" class="headerlink" title="背包DP"></a>背包DP</h2><h3 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133609206.png" alt="image-20240526133609206"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133623292.png" alt="image-20240526133623292"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133631379.png" alt="image-20240526133631379"></p><h4 id="模板题——小明的背包1"><a href="#模板题——小明的背包1" class="headerlink" title="模板题——小明的背包1"></a>模板题——<a href="https://www.lanqiao.cn/problems/1174/learning">小明的背包1</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j]    前i件物品，总体积不超过j 的最大价值</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j&gt;=wi:<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i-<span class="hljs-number">1</span>][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br>            <br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化"><a href="#滚动数组优化" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133913024.png" alt="image-20240526133913024"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133922038.png" alt="image-20240526133922038"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133928502.png" alt="image-20240526133928502"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">n,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[<span class="hljs-number">0</span>]*(V+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  w,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,w-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-w]+v)<br><span class="hljs-built_in">print</span>(dp[V])<br></code></pre></td></tr></table></figure><h3 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134436937.png" alt="image-20240526134436937"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134445527.png" alt="image-20240526134445527"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134453737.png" alt="image-20240526134453737"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134501798.png" alt="image-20240526134501798"></p><h4 id="模板题——小明的背包2"><a href="#模板题——小明的背包2" class="headerlink" title="模板题——小明的背包2"></a>模板题——<a href="https://www.lanqiao.cn/problems/1175/learning">小明的背包2</a></h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134640485.png" alt="image-20240526134640485"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># dp[i][j]=max(dp[i-1][j],dp[i][j-wi]+vi)  不取或在先前基础上取第i种（所以可以取多次）</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span>  i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> (j&gt;=wi):<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-1"><a href="#滚动数组优化-1" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N, V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>items = []<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    w, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    items.append((w, v))<br>dp = [<span class="hljs-number">0</span>] * (V + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, V + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> w, v <span class="hljs-keyword">in</span> items:<br>        <span class="hljs-keyword">if</span> i &gt;= w:<br>            dp[i] = <span class="hljs-built_in">max</span>(dp[i], dp[i - w] + v)<br><span class="hljs-built_in">print</span>(dp[V])<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">读取输入的商场物品数量N和小明的背包容量V，以及每种物品的体积和价值。</span><br><span class="hljs-string">初始化一个长度为V+1的动态规划数组dp，dp[i]表示背包容量为i时所能获得的最大价值。</span><br><span class="hljs-string">使用动态规划求解，外层循环遍历背包容量从1到V，内层循环遍历每种物品，更新dp[i]的值为dp[i-w]+v和当前dp[i]的较大值。</span><br><span class="hljs-string">输出dp[V]即为小明所能获得的最大价值。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134702358.png" alt="image-20240526134702358"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134710379.png" alt="image-20240526134710379"></p><h4 id="模板题——小明的背包3"><a href="#模板题——小明的背包3" class="headerlink" title="模板题——小明的背包3"></a>模板题——<a href="https://www.lanqiao.cn/problems/1176/learning">小明的背包3</a></h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134904431.png" alt="image-20240526134904431"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134915203.png" alt="image-20240526134915203"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134922223.png" alt="image-20240526134922223"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134930677.png" alt="image-20240526134930677"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j] =max(dp[i][j],dp[i-1][j-k*wi]+k*vi)  k属于(0，si)</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi,si=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">min</span>(si,j//wi)+<span class="hljs-number">1</span>):<br><br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-k*wi]+k*vi)<br><br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-2"><a href="#滚动数组优化-2" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py">N,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>w,v,s=[[<span class="hljs-number">0</span>]*(N+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)]<br>dp=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  w[i],v[i],s[i]=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]):<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> w[i]&lt;=k:<br>        dp[k]=<span class="hljs-built_in">max</span>(dp[k-w[i]]+v[i],dp[k])<br><span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="二维费用背包-分组背包"><a href="#二维费用背包-分组背包" class="headerlink" title="二维费用背包&amp;分组背包"></a>二维费用背包&amp;分组背包</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526135531593.png" alt="image-20240526135531593"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526135538566.png" alt="image-20240526135538566"></p><h4 id="模板题——小蓝的神秘行囊"><a href="#模板题——小蓝的神秘行囊" class="headerlink" title="模板题——小蓝的神秘行囊"></a>模板题——<a href="https://www.lanqiao.cn/problems/3937/learning">小蓝的神秘行囊</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><br>n, v, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>dp = [[<span class="hljs-number">0</span>]*(v + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    volume, mass, value = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i &gt;= mass <span class="hljs-keyword">and</span> j &gt;= volume:<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i-mass][j-volume] + value)<br><span class="hljs-built_in">print</span>(dp[m][v])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py">n,v,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    vi,mi,wi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v,vi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m,mi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            dp[j][k] =<span class="hljs-built_in">max</span>(dp[j][k],dp[j-vi][k-mi]+wi)<br>           <br><span class="hljs-built_in">print</span>(dp[v][m])<br></code></pre></td></tr></table></figure><h2 id="树形DP"><a href="#树形DP" class="headerlink" title="树形DP"></a>树形DP</h2><h3 id="自上而下树形DP"><a href="#自上而下树形DP" class="headerlink" title="自上而下树形DP"></a>自上而下树形DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>val = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>edges = defaultdict(<span class="hljs-built_in">list</span>)<br>f = [[<span class="hljs-number">0</span>, val[i]] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">from_node, to_node</span>):<br>    edges[from_node].append(to_node)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, fa</span>):<br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> edges[u]:<br>        <span class="hljs-keyword">if</span> v == fa:<br>            <span class="hljs-keyword">continue</span><br>        dfs(v, u)<br>        f[u][<span class="hljs-number">0</span>] += <span class="hljs-built_in">max</span>(f[v][<span class="hljs-number">0</span>], f[v][<span class="hljs-number">1</span>])<br>        f[u][<span class="hljs-number">1</span>] += f[v][<span class="hljs-number">0</span>]<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    add_edge(u, v)<br>    add_edge(v, u)<br><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><h3 id="自下而上树形DP"><a href="#自下而上树形DP" class="headerlink" title="自下而上树形DP"></a>自下而上树形DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>N = <span class="hljs-number">100005</span><br>a = [<span class="hljs-number">0</span>]*N<br>dp = [[<span class="hljs-number">0</span>]*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>e = defaultdict(<span class="hljs-built_in">list</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        dfs(v)<br>        dp[u][<span class="hljs-number">1</span>] += dp[v][<span class="hljs-number">0</span>]<br>        dp[u][<span class="hljs-number">0</span>] += <span class="hljs-built_in">max</span>(dp[v])<br>    dp[u][<span class="hljs-number">1</span>] += a[u]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">global</span> N, a, dp, e<br>    n = <span class="hljs-built_in">int</span>(sys.stdin.readline())<br>    st = <span class="hljs-built_in">set</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        a[i] = <span class="hljs-built_in">int</span>(sys.stdin.readline())<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>        e[y].append(x)<br>        st.discard(x)<br>    rt = st.pop()<br>    dfs(rt)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp[rt]))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="路径相关树形DP"><a href="#路径相关树形DP" class="headerlink" title="路径相关树形DP"></a>路径相关树形DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs py">N = <span class="hljs-number">2005</span><br>e = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>w = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>dp = [<span class="hljs-number">0</span>]*N<br>n, m, k = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>dep = [<span class="hljs-number">0</span>]*N<br>f = [<span class="hljs-number">0</span>]*N<br>t = []<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">global</span> dp, e, w<br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        dfs(v)<br>        dp[u] += dp[v]<br>    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> w[u]:<br>        <span class="hljs-built_in">sum</span> = dp[u]<br>        <span class="hljs-keyword">for</span> nw <span class="hljs-keyword">in</span> t[<span class="hljs-string">&#x27;vec&#x27;</span>]:<br>            <span class="hljs-built_in">sum</span> -= dp[nw]<br>            <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[nw]:<br>                <span class="hljs-built_in">sum</span> += dp[v]<br>        dp[u] = <span class="hljs-built_in">max</span>(dp[u], <span class="hljs-built_in">sum</span> + t[<span class="hljs-string">&#x27;val&#x27;</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">global</span> n, m, f, e, dep, dp, w, t<br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>        f[i] = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>        e[f[i]].append(i)<br>        dep[i] = dep[f[i]] + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>        x, y, val = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        t.clear()<br>        <span class="hljs-keyword">while</span> x != y:<br>            <span class="hljs-keyword">if</span> dep[x] &gt; dep[y]:<br>                t.append(x)<br>                x = f[x]<br>            <span class="hljs-keyword">else</span>:<br>                t.append(y)<br>                y = f[y]<br>        t.append(x)<br>        w[x].append(&#123;<span class="hljs-string">&#x27;vec&#x27;</span>: <span class="hljs-built_in">list</span>(t), <span class="hljs-string">&#x27;val&#x27;</span>: val&#125;)<br>    dfs(<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(dp[<span class="hljs-number">1</span>])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="换根DP"><a href="#换根DP" class="headerlink" title="换根DP"></a>换根DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, dep, fa</span>):  <span class="hljs-comment"># 传入当前节点u,深度，父节点</span><br>    <span class="hljs-keyword">global</span> sum_depth<br>    sum_depth += dep  <span class="hljs-comment"># 加上当前节点u的深度</span><br>    <span class="hljs-comment"># 遍历u的所有子节点</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        <span class="hljs-keyword">if</span> v == fa:<br>            <span class="hljs-keyword">continue</span><br>        dfs(v, dep + <span class="hljs-number">1</span>, u)  <span class="hljs-comment"># 遍历到子节点</span><br>        siz[u] += siz[v]  <span class="hljs-comment"># 通过这一步，可以统计u所有子节点数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs2</span>(<span class="hljs-params">u, fa</span>):  <span class="hljs-comment"># 用来跟新其余节点为根的解</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        <span class="hljs-keyword">if</span> v == fa:<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-comment"># dp[v] = dp[u] - siz[v] + (n - siz[v])</span><br>        dp[v] = dp[u] - <span class="hljs-number">2</span> * siz[v] + n  <span class="hljs-comment"># 当前节点v的解=左边变化值+右边变化值</span><br>        dfs2(v, u)<br><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>dp = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># 用来更新不同节点为根时的深度和</span><br>siz = [<span class="hljs-number">1</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># 以i为根节点，其左子树的节点数，初始值为1表示仅包含该节点</span><br><span class="hljs-comment"># 建树</span><br>e = defaultdict(<span class="hljs-built_in">list</span>)<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    e[u].append(v)<br>    e[v].append(u)<br><span class="hljs-comment"># 第一遍dfs,找到以1为根节点的深度和</span><br>sum_depth = <span class="hljs-number">0</span>  <span class="hljs-comment"># 用来记录深度和</span><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br><span class="hljs-comment"># 第二遍dfs，求出其余点作为根的答案</span><br>dp[<span class="hljs-number">1</span>] = sum_depth  <span class="hljs-comment"># 6</span><br>dfs2(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)  <span class="hljs-comment"># dp=[0, 6, 5, 9, 8, 8]</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h2 id="区间DP"><a href="#区间DP" class="headerlink" title="区间DP"></a>区间DP</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526140152840.png" alt="image-20240526140152840"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526140205963.png" alt="image-20240526140205963"></p><h3 id="普通区间DP"><a href="#普通区间DP" class="headerlink" title="普通区间DP"></a>普通区间DP</h3><h4 id="模板题——石子合并"><a href="#模板题——石子合并" class="headerlink" title="模板题——石子合并"></a>模板题——<a href="https://www.lanqiao.cn/problems/1233/learning">石子合并</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>f = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    f[i][i] = <span class="hljs-number">0</span><br>    a[i] += a[i-<span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n-length+<span class="hljs-number">2</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, j):<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k] + f[k+<span class="hljs-number">1</span>][j] + a[j] - a[i-<span class="hljs-number">1</span>])<br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">1</span>][n])<br></code></pre></td></tr></table></figure><h4 id="模板题——涂色"><a href="#模板题——涂色" class="headerlink" title="模板题——涂色"></a>模板题——<a href="https://www.lanqiao.cn/problems/926/learning">涂色</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py">s = <span class="hljs-built_in">input</span>()<br>n = <span class="hljs-built_in">len</span>(s)<br>f = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    f[i][i] = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - length + <span class="hljs-number">1</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> s[i] == s[j]:<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i + <span class="hljs-number">1</span>][j], f[i][j - <span class="hljs-number">1</span>])<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, i + length - <span class="hljs-number">1</span>):<br>                f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k] + f[k + <span class="hljs-number">1</span>][j])<br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">0</span>][n - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h4 id="模板题——制作回文串"><a href="#模板题——制作回文串" class="headerlink" title="模板题——制作回文串"></a>模板题——<a href="https://www.lanqiao.cn/problems/1547/learning">制作回文串</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py">m, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>s = <span class="hljs-built_in">input</span>()<br>w1 = [<span class="hljs-number">0</span>] * <span class="hljs-number">30</span><br>w2 = [<span class="hljs-number">0</span>] * <span class="hljs-number">30</span><br>f = [[<span class="hljs-number">0</span>] * n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    ch, weight1, weight2 = <span class="hljs-built_in">input</span>().split()<br>    w1[<span class="hljs-built_in">ord</span>(ch) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)] = <span class="hljs-built_in">int</span>(weight1)<br>    w2[<span class="hljs-built_in">ord</span>(ch) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)] = <span class="hljs-built_in">int</span>(weight2)<br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - length + <span class="hljs-number">1</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> s[i] == s[j]:<br>            <span class="hljs-keyword">if</span> length == <span class="hljs-number">2</span>:<br>                f[i][j] = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">else</span>:<br>                f[i][j] = f[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            f[i][j] = <span class="hljs-built_in">min</span>(<br>                f[i + <span class="hljs-number">1</span>][j] + <span class="hljs-built_in">min</span>(w1[<span class="hljs-built_in">ord</span>(s[i]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)], w2[<span class="hljs-built_in">ord</span>(s[i]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)]),<br>                f[i][j - <span class="hljs-number">1</span>] + <span class="hljs-built_in">min</span>(w1[<span class="hljs-built_in">ord</span>(s[j]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)], w2[<span class="hljs-built_in">ord</span>(s[j]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)])<br>            )<br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">0</span>][n - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="环形区间DP"><a href="#环形区间DP" class="headerlink" title="环形区间DP"></a>环形区间DP</h3><h4 id="模板题——能量项链"><a href="#模板题——能量项链" class="headerlink" title="模板题——能量项链"></a>模板题——<a href="https://www.lanqiao.cn/problems/557/learning">能量项链</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>v = [<span class="hljs-number">0</span>] * (<span class="hljs-number">2</span> * n + <span class="hljs-number">2</span>)<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    v[i] = a[i]<br>    v[i + n] = v[i]<br><br>f = [[<span class="hljs-number">0</span>] * (<span class="hljs-number">2</span> * n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span> * n + <span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span> * n - length + <span class="hljs-number">2</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, j):<br>            f[i][j] = <span class="hljs-built_in">max</span>(f[i][j], f[i][k] + f[k + <span class="hljs-number">1</span>][j] + v[i] * v[k + <span class="hljs-number">1</span>] * v[j + <span class="hljs-number">1</span>])<br><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    ans = <span class="hljs-built_in">max</span>(ans, f[i][i + n - <span class="hljs-number">1</span>])<br><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="状压DP"><a href="#状压DP" class="headerlink" title="状压DP"></a>状压DP</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141319988.png" alt="image-20240526141319988"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141327177-1716704007699-3.png" alt="image-20240526141327177"></p><h4 id="模板题——例1"><a href="#模板题——例1" class="headerlink" title="模板题——例1"></a>模板题——例1</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141355192.png" alt="image-20240526141355192"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs py">MAXN = <span class="hljs-number">105</span><br>N, M, K = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] * MAXN<br>f = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">20</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()):<br>        a[i] |= <span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>)<br><br>f[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    <span class="hljs-keyword">for</span> S <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span> &lt;&lt; M):<br>        <span class="hljs-keyword">if</span> f[S] &gt; MAXN:<br>            <span class="hljs-keyword">continue</span><br>        f[S | a[i]] = <span class="hljs-built_in">min</span>(f[S | a[i]], f[S] + <span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">print</span>(f[(<span class="hljs-number">1</span> &lt;&lt; M) - <span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> f[(<span class="hljs-number">1</span> &lt;&lt; M) - <span class="hljs-number">1</span>] &lt; MAXN <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h4 id="模板题——例2"><a href="#模板题——例2" class="headerlink" title="模板题——例2"></a>模板题——例2</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141422932.png" alt="image-20240526141422932"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> math<br><br>maxn = <span class="hljs-number">2100000</span><br>f = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * maxn<br>lowbit = [<span class="hljs-number">0</span>] * maxn<br>line = [[<span class="hljs-number">0</span>] * <span class="hljs-number">20</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>)]<br>x = [<span class="hljs-number">0.0</span>] * maxn<br>y = [<span class="hljs-number">0.0</span>] * maxn<br>eps = <span class="hljs-number">1e-8</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">equ</span>(<span class="hljs-params">a1, b1, c1, a2, b2, c2</span>):<br>    y = (a1 * c2 - a2 * c1) / (a1 * b2 - a2 * b1)<br>    x = (c1 - b1 * y) / a1<br>    <span class="hljs-keyword">return</span> x, y<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">18</span>)):<br>    j = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> (i &amp; (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))):<br>        j += <span class="hljs-number">1</span><br>    lowbit[i] = j<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    x[i], y[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">float</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> math.isclose(x[i], x[j], abs_tol=eps):<br>            <span class="hljs-keyword">continue</span><br>        a, b = equ(x[i] * x[i], x[i], y[i], x[j] * x[j], x[j], y[j])<br>        <span class="hljs-keyword">if</span> math.isclose(a, <span class="hljs-number">0</span>, abs_tol=eps):<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> math.isclose(a * x[k] * x[k] + b * x[k], y[k], abs_tol=eps):<br>                line[i][j] |= (<span class="hljs-number">1</span> &lt;&lt; (k - <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, (<span class="hljs-number">1</span> &lt;&lt; n)):<br>    j = lowbit[i]<br>    f[i | (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))] = <span class="hljs-built_in">min</span>(f[i | (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))], f[i] + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        f[i | line[j][k]] = <span class="hljs-built_in">min</span>(f[i | line[j][k]], f[i] + <span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">print</span>(f[(<span class="hljs-number">1</span> &lt;&lt; n) - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h2 id="数位DP"><a href="#数位DP" class="headerlink" title="数位DP"></a>数位DP</h2><h2 id="期望DP"><a href="#期望DP" class="headerlink" title="期望DP"></a>期望DP</h2><h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="链表，栈，队列"><a href="#链表，栈，队列" class="headerlink" title="链表，栈，队列"></a>链表，栈，队列</h2><h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154910861.png" alt="image-20240524154910861"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154926348.png" alt="image-20240524154926348"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154959997.png" alt="image-20240524154959997"></p><h4 id="模板题——约瑟夫环"><a href="#模板题——约瑟夫环" class="headerlink" title="模板题——约瑟夫环"></a>模板题——<a href="https://www.lanqiao.cn/problems/1111/learning">约瑟夫环</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">n,k,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>))<br>i=k-<span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> a:<br>    i=(i+(m-<span class="hljs-number">1</span>))%<span class="hljs-built_in">len</span>(a)<br>    <span class="hljs-built_in">print</span>(a.pop(i))<br></code></pre></td></tr></table></figure><h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524155117734.png" alt="image-20240524155117734"></p><h4 id="模板题——小蓝的括号串1"><a href="#模板题——小蓝的括号串1" class="headerlink" title="模板题——小蓝的括号串1"></a>模板题——<a href="https://www.lanqiao.cn/problems/2490/learning">小蓝的括号串1</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>s=<span class="hljs-built_in">input</span>()<br>a=[]<br>ok=<span class="hljs-literal">True</span><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>    <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;(&#x27;</span>:<br>        a.append(c)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(a) == <span class="hljs-number">0</span>:<br>            ok = <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">break</span><br>        a.pop()<br><span class="hljs-keyword">if</span> ok <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(a) == <span class="hljs-number">0</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Yes&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173345373.png" alt="image-20240524173345373"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173355058.png" alt="image-20240524173355058"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173423272.png" alt="image-20240524173423272"></p><h4 id="模板题——队列操作"><a href="#模板题——队列操作" class="headerlink" title="模板题——队列操作"></a>模板题——<a href="https://www.lanqiao.cn/problems/1519/learning/">队列操作</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">N=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    s=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> s[<span class="hljs-number">0</span>]==<span class="hljs-number">1</span>:<br>        a.append(s[<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">elif</span> s[<span class="hljs-number">0</span>]==<span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">if</span> a:<br>            <span class="hljs-built_in">print</span>(a.pop(<span class="hljs-number">0</span>))<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;no&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(a))<br></code></pre></td></tr></table></figure><h2 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524175734507.png" alt="image-20240524175734507"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524175709055.png" alt="image-20240524175709055"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524180001397.png" alt="image-20240524180001397"></p><h3 id="优先队列"><a href="#优先队列" class="headerlink" title="优先队列"></a>优先队列</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182115097.png" alt="image-20240524182115097"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182127911.png" alt="image-20240524182127911"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182141588.png" alt="image-20240524182141588"></p><h4 id="模板题——小蓝的神奇复印机"><a href="#模板题——小蓝的神奇复印机" class="headerlink" title="模板题——小蓝的神奇复印机"></a>模板题——<a href="https://www.lanqiao.cn/problems/3749/learning">小蓝的神奇复印机</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue,Queue<br>N,X=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>q=Queue()<br>pq=PriorityQueue()<br><span class="hljs-keyword">for</span> i,x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(a):<br>  q.put((i,x))<br>  pq.put(-x)<br>time=<span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>  i,x=q.get()<br>  <span class="hljs-keyword">if</span> -x==pq.queue[<span class="hljs-number">0</span>]:<br>    pq.get()<br>    time+=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> i==X:<br>      <span class="hljs-built_in">print</span>(time)<br>      <span class="hljs-keyword">break</span><br>  <span class="hljs-keyword">else</span>:<br>    q.put((i,x))<br></code></pre></td></tr></table></figure><h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><h5 id="RMQ问题"><a href="#RMQ问题" class="headerlink" title="RMQ问题"></a>RMQ问题</h5><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183506581.png" alt="image-20240524183506581"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183726055.png" alt="image-20240524183726055"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183742068.png" alt="image-20240524183742068"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183753258.png" alt="image-20240524183753258"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183803151.png" alt="image-20240524183803151"></p><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><h3 id="基础并查集"><a href="#基础并查集" class="headerlink" title="基础并查集"></a>基础并查集</h3><h4 id="基础-1"><a href="#基础-1" class="headerlink" title="基础"></a>基础</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194242229.png" alt="image-20240524194242229"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194253527.png" alt="image-20240524194253527"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194301781.png" alt="image-20240524194301781"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194309669.png" alt="image-20240524194309669"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194317881.png" alt="image-20240524194317881"></p><h5 id="模板题——蓝桥幼儿园"><a href="#模板题——蓝桥幼儿园" class="headerlink" title="模板题——蓝桥幼儿园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1135/learning">蓝桥幼儿园</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def Findroot(x):</span><br><span class="hljs-comment">#     while x!=p[x]:</span><br><span class="hljs-comment">#         x=p[x]</span><br><span class="hljs-comment">#     return x</span><br><span class="hljs-string">&#x27;&#x27;&#x27;使用路径压缩&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Findroot</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>    <span class="hljs-comment">#路径压缩</span><br>    p[x]=Findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Merge</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    p[rootx]=rooty<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Query</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    <span class="hljs-keyword">return</span> rootx==rooty<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    op,x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> op ==<span class="hljs-number">1</span>:<br>        Merge(x,y)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> Query(x,y):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="路径压缩"><a href="#路径压缩" class="headerlink" title="路径压缩"></a>路径压缩</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524195007281.png" alt="image-20240524195007281"></p><h5 id="模板题——星球大战"><a href="#模板题——星球大战" class="headerlink" title="模板题——星球大战"></a>模板题——<a href="https://www.lanqiao.cn/problems/828/learning/">星球大战</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>M = <span class="hljs-number">200010</span>; N = <span class="hljs-number">2</span> * M<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>father = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                 <span class="hljs-comment">#并查集板块</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">10</span>):<br>        father[i] = i<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_father</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x != father[x]: father[x] = find_father(father[x])<br>    <span class="hljs-keyword">return</span> father[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">unite</span>(<span class="hljs-params">x, y</span>):<br>    father[find_father(x)] = find_father(y)<br>come = [<span class="hljs-number">0</span>] * N; to = [<span class="hljs-number">0</span>] * N;   <span class="hljs-comment">#存储每个边</span><br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]      <span class="hljs-comment">#邻接表</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[a].append(b); g[b].append(a)<br>    come[i] = a; to[i] = b <br>broken = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                     <span class="hljs-comment">#记录每个点是否被修坏</span><br>destroy = []<br>k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    b = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    broken[b] = <span class="hljs-number">1</span><br>    destroy.append(b)<br>init()<br>res = n - k             <span class="hljs-comment">#先计算所有剩下星球的连通块数，(最后一轮的结果)</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    l = come[i]; r = to[i]<br>    fl, fr = find_father(l), find_father(r)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[l] <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> broken[r] <span class="hljs-keyword">and</span> fl != fr:<br>        res -= <span class="hljs-number">1</span><br>        <span class="hljs-comment">#unite(l, r)</span><br>        father[fl] = fr<br>ans = [res]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(destroy) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):       <span class="hljs-comment">#顺序破坏，相当于倒序修建</span><br>    c = destroy[i]<br>    broken[c] = <span class="hljs-number">0</span><br>    res += <span class="hljs-number">1</span>                                    <span class="hljs-comment">#修好一个星球，连通块会多一个</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> g[c]:<br>        fc, fp = find_father(c), find_father(j)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[j] <span class="hljs-keyword">and</span> fc != fp:<br>            res -= <span class="hljs-number">1</span><br>            father[fc] = fp<br>    ans.append(res)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ans) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):           <span class="hljs-comment">#倒序输出结果</span><br>    <span class="hljs-built_in">print</span>(ans[i])<br></code></pre></td></tr></table></figure><h3 id="可撤销并查集"><a href="#可撤销并查集" class="headerlink" title="可撤销并查集"></a>可撤销并查集</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203431727.png" alt="image-20240524203431727"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203449967.png" alt="image-20240524203449967"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203621861.png" alt="image-20240524203621861"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203634004.png" alt="image-20240524203634004"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203643547.png" alt="image-20240524203643547"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203712193.png" alt="image-20240524203712193"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203728659.png" alt="image-20240524203728659"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203741431.png" alt="image-20240524203741431"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203752845.png" alt="image-20240524203752845"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203808480.png" alt="image-20240524203808480"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203837465.png" alt="image-20240524203837465"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203855506.png" alt="image-20240524203855506"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203906020.png" alt="image-20240524203906020"></p><h4 id="可撤销并查集定义"><a href="#可撤销并查集定义" class="headerlink" title="可撤销并查集定义"></a>可撤销并查集定义</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203916807.png" alt="image-20240524203916807"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203959912.png" alt="image-20240524203959912"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204009818.png" alt="image-20240524204009818"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204018333.png" alt="image-20240524204018333"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204035190.png" alt="image-20240524204035190"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204043804.png" alt="image-20240524204043804"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204055615.png" alt="image-20240524204055615"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204106056.png" alt="image-20240524204106056"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204120154.png" alt="image-20240524204120154"></p><h4 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204147436.png" alt="image-20240524204147436"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204158246.png" alt="image-20240524204158246"></p><h3 id="带权并查集"><a href="#带权并查集" class="headerlink" title="带权并查集"></a>带权并查集</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102401075.png" alt="image-20240526102401075"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102412755.png" alt="image-20240526102412755"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102423880.png" alt="image-20240526102423880"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102443080.png" alt="image-20240526102443080"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102451528.png" alt="image-20240526102451528"></p><h2 id="树上问题"><a href="#树上问题" class="headerlink" title="树上问题"></a>树上问题</h2><h3 id="树的基本概念"><a href="#树的基本概念" class="headerlink" title="树的基本概念"></a>树的基本概念</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102633616.png" alt="image-20240526102633616"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102641495.png" alt="image-20240526102641495"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102651200.png" alt="image-20240526102651200"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102714548.png" alt="image-20240526102714548"></p><h4 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102917869.png" alt="image-20240526102917869"> <br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102815444.png" alt="image-20240526102815444"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102945303.png" alt="image-20240526102945303"></p><h4 id="模板题——完全二叉树的权值"><a href="#模板题——完全二叉树的权值" class="headerlink" title="模板题——完全二叉树的权值"></a>模板题——<a href="https://www.lanqiao.cn/problems/183/learning">完全二叉树的权值</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> math<br><br>s = []<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>x = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br>deep = <span class="hljs-built_in">int</span>(math.log(n, <span class="hljs-number">2</span>)) + <span class="hljs-number">1</span>  <span class="hljs-comment"># 完全二叉树求深度公式</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(deep):  <span class="hljs-comment"># 按层数来遍历</span><br>    s.append(<span class="hljs-built_in">sum</span>(x[<span class="hljs-number">2</span> ** i - <span class="hljs-number">1</span>:<span class="hljs-number">2</span> ** i + <span class="hljs-number">2</span> ** i - <span class="hljs-number">1</span>]))  <span class="hljs-comment"># 切片出每层的节点，并计算其权值</span><br><span class="hljs-built_in">print</span>(s.index(<span class="hljs-built_in">max</span>(s)) + <span class="hljs-number">1</span>)  <span class="hljs-comment"># 找出权值最大的层级，并返回其索引</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103231454.png" alt="image-20240526103231454"></p><h3 id="树的遍历"><a href="#树的遍历" class="headerlink" title="树的遍历"></a>树的遍历</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103255622.png" alt="image-20240526103255622"></p><h4 id="先序遍历"><a href="#先序遍历" class="headerlink" title="先序遍历"></a>先序遍历</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103305459.png" alt="image-20240526103305459"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103325159.png" alt="image-20240526103325159"></p><h4 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103335871.png" alt="image-20240526103335871"></p><h4 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103352924.png" alt="image-20240526103352924"></p><h4 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103409405.png" alt="image-20240526103409405"></p><h4 id="树的遍历-1"><a href="#树的遍历-1" class="headerlink" title="树的遍历"></a>树的遍历</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103902993.png" alt="image-20240526103902993"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103916051.png" alt="image-20240526103916051"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103926976.png" alt="image-20240526103926976"></p><h4 id="模板题——欧涛爬树"><a href="#模板题——欧涛爬树" class="headerlink" title="模板题——欧涛爬树"></a>模板题——<a href="https://www.lanqiao.cn/problems/3039/learning/">欧涛爬树</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br>sys.setrecursionlimit(<span class="hljs-number">100000</span>)<br><span class="hljs-built_in">input</span>=sys.stdin.readline<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u,fa</span>):<span class="hljs-comment">#进行判断是否是叶子节点</span><br>    path.append(s[u])<br>    flag=<span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]:<br>        <span class="hljs-keyword">if</span> v==fa:<span class="hljs-keyword">continue</span><br>        dfs(v,u)<br>        flag=<span class="hljs-literal">False</span><br>    <span class="hljs-keyword">if</span> flag:<br>        S.add(<span class="hljs-string">&#x27;&#x27;</span>.join(path))<br>    path.pop()<br><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>        <span class="hljs-comment">#邻接表进行存放树</span><br>        G=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>        s=<span class="hljs-string">&#x27; &#x27;</span>+<span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>            u,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>            G[u].append(v)<br>            G[v].append(u)<br>        path=[]<br>        S=<span class="hljs-built_in">set</span>()<br>        dfs(<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(S))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read</span>():<br>    <span class="hljs-keyword">import</span> sys<br>    <span class="hljs-keyword">return</span> sys.stdin.readline().strip()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">root, fa</span>):<br>    path.append(s[root])<br>    flag = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> to <span class="hljs-keyword">in</span> vis[root]:<br>        <span class="hljs-keyword">if</span> to == fa:<br>            <span class="hljs-keyword">continue</span><br>        dfs(to, root)<br>        flag = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">if</span> flag:<br>        result.add(<span class="hljs-string">&quot;&quot;</span>.join(path))<br>    path.pop()<br><br><br><span class="hljs-comment"># 多次输入模板</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        n = <span class="hljs-built_in">int</span>(read())<br>        s = read()<br>        vis = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>            u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, read().split())<br>            u -= <span class="hljs-number">1</span><br>            v -= <span class="hljs-number">1</span><br>            vis[u].append(v)<br>            vis[v].append(u)<br>        result = <span class="hljs-built_in">set</span>()<br>        path = []<br>        dfs(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(result))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><h3 id="树的直径与重心"><a href="#树的直径与重心" class="headerlink" title="树的直径与重心"></a>树的直径与重心</h3><h4 id="树的直径"><a href="#树的直径" class="headerlink" title="树的直径"></a>树的直径</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104404857.png" alt="image-20240526104404857"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104428203.png" alt="image-20240526104428203"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104454203.png" alt="image-20240526104454203"></p><h4 id="模板题——直径"><a href="#模板题——直径" class="headerlink" title="模板题——直径"></a>模板题——<a href="https://www.lanqiao.cn/problems/1394/learning">直径</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-built_in">input</span> = sys.stdin.readline<br>sys.setrecursionlimit(<span class="hljs-number">100000</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, fa, pre=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-keyword">global</span> S<br>    <span class="hljs-keyword">if</span> d[u] &gt; d[S]: S = u<br>    <span class="hljs-keyword">for</span> v, w <span class="hljs-keyword">in</span> G[u]:<br>        <span class="hljs-keyword">if</span> v == fa: <span class="hljs-keyword">continue</span><br>        d[v] = d[u] + w<br>        <span class="hljs-keyword">if</span> pre: pre[v] = u<br>        dfs(v, u, pre)<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br>d = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>pre = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append([v, w])<br>    G[v].append([u, w])<br>S = <span class="hljs-number">1</span><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>d[S] = <span class="hljs-number">0</span><br>dfs(S, <span class="hljs-number">0</span>, pre)<br>L = [S]<br>L_list = <span class="hljs-built_in">set</span>()<br><span class="hljs-keyword">while</span> S != <span class="hljs-number">0</span>:<br>    L_list.add(S)<br>    S = pre[S]<br><span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> L_list:<br>    <span class="hljs-keyword">for</span> i, (v, w) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(G[u]):<br>        <span class="hljs-keyword">if</span> v <span class="hljs-keyword">in</span> L_list:<br>            G[u][i] = [v, w - <span class="hljs-number">1</span>]<br>S = <span class="hljs-number">1</span><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>d[S] = <span class="hljs-number">0</span><br>dfs(S, <span class="hljs-number">0</span>)<br>L2 = d[S]<br><span class="hljs-built_in">print</span>(L)<br><span class="hljs-built_in">print</span>(L - L2)<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526105912364.png" alt="image-20240526105912364"></p><h3 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h3><h4 id="最近公共祖先"><a href="#最近公共祖先" class="headerlink" title="最近公共祖先"></a>最近公共祖先</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526105959804.png" alt="image-20240526105959804"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110010233.png" alt="image-20240526110010233"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110018355.png" alt="image-20240526110018355"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110031858.png" alt="image-20240526110031858"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110040710.png" alt="image-20240526110040710"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110052606.png" alt="image-20240526110052606"></p><h4 id="模板题——最近公共祖先LCA查询"><a href="#模板题——最近公共祖先LCA查询" class="headerlink" title="模板题——最近公共祖先LCA查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/4385/learning">最近公共祖先LCA查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment">#设置deep数组表示深度。</span><br><span class="hljs-comment">#front数组，表示节点u,前2**i层的爹是谁？？？</span><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>tree=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>fornt=[[<span class="hljs-number">0</span>]*(<span class="hljs-number">21</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<span class="hljs-comment">#如果你是0你就是孤儿。</span><br>deep=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<span class="hljs-comment">#0节点没有层数。</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>  u,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  tree[u].append(v)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">er,die</span>):<br>  <span class="hljs-keyword">if</span> die==<span class="hljs-number">0</span>:<br>    deep[er]=<span class="hljs-number">1</span><span class="hljs-comment">#这是第一层,同时，第一层也没有爹啊，也不需要更新如何层数相关节点。</span><br><br>  <span class="hljs-keyword">else</span>:<br>    deep[er]=deep[die]+<span class="hljs-number">1</span><span class="hljs-comment">#更新层数。</span><br>    fornt[er][<span class="hljs-number">0</span>]=die<span class="hljs-comment">#上一层的点，就是die。</span><br>    <span class="hljs-keyword">for</span> cc <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>):<br>      <span class="hljs-keyword">if</span> fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br><br>        fornt[er][cc]=fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]<br>        <span class="hljs-comment">#倍增法。2**i层之上的点=</span><br>        <span class="hljs-comment">#2**(cc-1)上面的点的上面2**(cc-1)的点。就，无限套娃。</span><br>  <br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tree[er]:<br>    dfs(i,er)<span class="hljs-comment">#儿子变成新的爹。</span><br>dfs(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<span class="hljs-comment">#儿子是根，爹不存在。</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-comment">#第一步，拉升。将x拉到和y一个水平。一开始走2**20步，太大，就走2**19步，然后走一半，再走一半</span><br>  <span class="hljs-comment">#就像那个乌龟与跑步哥一样。二进制原理使得这个步数遍历后一定是一个高度。</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> deep[fornt[x][i]]&gt;=deep[y] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span>:<br>      x=fornt[x][i]<span class="hljs-comment">#自动判断能走不能走，能走则走一大步。x提升到别的节点。</span><br><br>  <span class="hljs-comment">#此时提升必定一样了。</span><br>  <span class="hljs-keyword">if</span> x==y:<br>    <span class="hljs-keyword">return</span> x<span class="hljs-comment">#原来你就是我爹！</span><br>  <br>  <span class="hljs-keyword">else</span>:<span class="hljs-comment">#不是？我们再度提升吧！神明！</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> fornt[x][i]!=fornt[y][i] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> fornt[y][i]!=<span class="hljs-number">0</span>:<span class="hljs-comment">#相等反而不能决定什么，因为可能不是最近的公共祖先</span><br>        x=fornt[x][i]<br>        y=fornt[y][i]<br>    <span class="hljs-keyword">return</span> fornt[y][<span class="hljs-number">0</span>]<span class="hljs-comment">#最后，y上面的就是自己的公共祖先。</span><br>q=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> deep[x]&lt;deep[y]:<span class="hljs-comment">#我们设x是深节点。</span><br>    x,y=y,x<br>  <span class="hljs-built_in">print</span>(find(x,y))<br></code></pre></td></tr></table></figure><h3 id="树上差分"><a href="#树上差分" class="headerlink" title="树上差分"></a>树上差分</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110829760.png" alt="image-20240526110829760"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110840432.png" alt="image-20240526110840432"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110850262.png" alt="image-20240526110850262"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110859590.png" alt="image-20240526110859590"></p><h4 id="问题引入"><a href="#问题引入" class="headerlink" title="问题引入"></a>问题引入</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110924343.png" alt="image-20240526110924343"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110933963.png" alt="image-20240526110933963"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110943437.png" alt="image-20240526110943437"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110952759.png" alt="image-20240526110952759"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111012615.png" alt="image-20240526111012615"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111135950.png" alt="image-20240526111135950"></p><h4 id="模板题——"><a href="#模板题——" class="headerlink" title="模板题——"></a>模板题——</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>maxn = <span class="hljs-number">110000</span><br>n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>maxx = <span class="hljs-built_in">int</span>(math.log2(n))<br>edge = defaultdict(<span class="hljs-built_in">list</span>)<br>head = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>dep = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>dlt = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>fa = [[<span class="hljs-number">0</span>] * <span class="hljs-number">20</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br>cnt = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">a, b, dis</span>):<br>    <span class="hljs-keyword">global</span> cnt<br>    cnt += <span class="hljs-number">1</span><br>    edge[cnt] = [head[a], b, dis]<br>    head[a] = cnt<br>    cnt += <span class="hljs-number">1</span><br>    edge[cnt] = [head[b], a, dis]<br>    head[b] = cnt<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    a, b, dis = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    add_edge(a, b, dis)<br><br>dfs(<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    a, b, x = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    dlt[a] += x<br>    dlt[b] += x<br>    c = lca(a, b)<br>    dlt[c] -= <span class="hljs-number">2</span> * x<br><br>dfs1(<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(dlt[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h3 id="DFS序"><a href="#DFS序" class="headerlink" title="DFS序"></a>DFS序</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111342883.png" alt="image-20240526111342883"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111358571.png" alt="image-20240526111358571"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111411449.png" alt="image-20240526111411449"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111421595.png" alt="image-20240526111421595"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111429485.png" alt="image-20240526111429485"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111439242.png" alt="image-20240526111439242"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111454557.png" alt="image-20240526111454557"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111510842.png" alt="image-20240526111510842"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111525573.png" alt="image-20240526111525573"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111537764.png" alt="image-20240526111537764"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111549957.png" alt="image-20240526111549957"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111604828.png" alt="image-20240526111604828"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111613985.png" alt="image-20240526111613985"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111621233.png" alt="image-20240526111621233"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111628644.png" alt="image-20240526111628644"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111634702.png" alt="image-20240526111634702"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111645145.png" alt="image-20240526111645145"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111654060.png" alt="image-20240526111654060"></p><h4 id="模板题——异或和"><a href="#模板题——异或和" class="headerlink" title="模板题——异或和"></a>模板题——<a href="https://www.lanqiao.cn/problems/3549/learning">异或和</a></h4><h5 id="dfs序和树状数组"><a href="#dfs序和树状数组" class="headerlink" title="dfs序和树状数组"></a>dfs序和树状数组</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, va = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[u].append(va)<br>    g[va].append(u)<br><br>tree = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>a = [[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)] <span class="hljs-comment"># 存dfs序</span><br>cnt = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node, fa</span>):<br>    <span class="hljs-keyword">global</span> cnt<br>    cnt += <span class="hljs-number">1</span><br>    a[node][<span class="hljs-number">0</span>] = cnt<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[node]:<br>        <span class="hljs-keyword">if</span> i != fa:<br>            dfs(i, node)<br>    a[node][<span class="hljs-number">1</span>] = cnt<br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; (-x)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">x, d</span>):<br>    <span class="hljs-keyword">while</span> x &lt;= n:<br>        tree[x] ^= d<br>        x += lowbit(x)<br>        <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> x:<br>        ans ^= tree[x]<br>        x -= lowbit(x)<br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    update(a[i][<span class="hljs-number">0</span>], v[i])<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    o = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> o[<span class="hljs-number">0</span>] == <span class="hljs-number">2</span>:<br>        <span class="hljs-built_in">print</span>(query(a[o[<span class="hljs-number">1</span>]][<span class="hljs-number">1</span>]) ^ query(a[o[<span class="hljs-number">1</span>]][<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">else</span>:<br>        x, y = o[<span class="hljs-number">1</span>], o[<span class="hljs-number">2</span>]<br>        update(a[x][<span class="hljs-number">0</span>], v[x] ^ y)<br>        v[x] = y<br></code></pre></td></tr></table></figure><h5 id="模拟暴力代码"><a href="#模拟暴力代码" class="headerlink" title="模拟暴力代码"></a>模拟暴力代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>g = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    c, d =<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[c].append(d)<br>    g[d].append(c)<br><br>dep = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>dep[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">depth</span>(<span class="hljs-params">node, fa</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[node]:<br>        <span class="hljs-keyword">if</span> i != fa:<br>            dep[i] = dep[node] + <span class="hljs-number">1</span><br>            depth(i, node)<br>depth(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[node]:<br>        <span class="hljs-keyword">if</span> dep[i] &gt; dep[node]:<br>            li.append(a[i])<br>            dfs(i)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">global</span> li<br>    li = [a[n]]<br>    dfs(n)<br>    ans = li[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(li)):<br>        ans = ans ^ li[i]<br>    <span class="hljs-built_in">print</span>(ans)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">change</span>(<span class="hljs-params">x, y</span>):<br>    a[x] = y<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    o = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> o[<span class="hljs-number">0</span>] == <span class="hljs-number">2</span>: query(o[<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">else</span>: change(o[<span class="hljs-number">1</span>], o[<span class="hljs-number">2</span>])<br></code></pre></td></tr></table></figure><p>利用邻接表打印树结构，然后根据子树根节点寻找打印子树的元素，存到列表中，最后对列表的所有元素（即子树的所有点）进行异或和运算</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 读取输入的 n 和 m</span><br>value = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))  <span class="hljs-comment"># 读取输入的值列表</span><br>value.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  <span class="hljs-comment"># 在值列表的最前面插入 0,根节点为1，索引从1开始</span><br>yihuo = []  <span class="hljs-comment"># 存储异或运算结果的列表</span><br>tree = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 初始化邻接表,表示树结构</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):  <span class="hljs-comment"># 读取 n-1 次输入</span><br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    a, b = <span class="hljs-built_in">min</span>(a, b), <span class="hljs-built_in">max</span>(a, b)<br>    tree[a].append(b)  <span class="hljs-comment"># 在 a 结点的邻接表中添加 b 结点，说明b为a的子节点</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):  <span class="hljs-comment"># 读取 m 次操作输入</span><br>    op = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> op[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:  <span class="hljs-comment"># 如果是操作 1</span><br>        value[op[<span class="hljs-number">1</span>]] = op[<span class="hljs-number">2</span>]  <span class="hljs-comment"># 更新点权</span><br>    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 如果是操作 2</span><br>        x = op[<span class="hljs-number">1</span>]<span class="hljs-comment">#子树根节点</span><br>        vis = [x]  <span class="hljs-comment"># 把子树存到该列表里</span><br>        qfront = <span class="hljs-number">0</span>  <span class="hljs-comment"># 队列的头指针</span><br>        qend = <span class="hljs-number">1</span>  <span class="hljs-comment"># 队列的尾指针</span><br>        <span class="hljs-keyword">while</span> qfront != qend:  <span class="hljs-comment"># 当队列不为空时</span><br>            <span class="hljs-keyword">if</span> tree[vis[qfront]] != []:  <span class="hljs-comment"># 该节点有子节点</span><br>                vis.extend(tree[vis[qfront]])  <span class="hljs-comment"># 将子节点存到子树中</span><br>                qend += <span class="hljs-built_in">len</span>(tree[vis[qfront]])  <span class="hljs-comment"># 更新队列的尾指针</span><br>            qfront += <span class="hljs-number">1</span>  <span class="hljs-comment"># 更新队列的头指针</span><br>        ans = value[vis[<span class="hljs-number">0</span>]]  <span class="hljs-comment"># 初始化异或运算的结果</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(vis)):  <span class="hljs-comment"># 遍历访问列表中的结点</span><br>            ans ^= value[vis[i]]  <span class="hljs-comment"># 对每个结点的值进行异或运算</span><br>        yihuo.append(ans)  <span class="hljs-comment"># 将异或运算的结果加入到结果列表中</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> yihuo:  <span class="hljs-comment"># 遍历结果列表</span><br>    <span class="hljs-built_in">print</span>(i)  <span class="hljs-comment"># 输出每个异或运算的结果</span><br></code></pre></td></tr></table></figure><h3 id="树链剖分"><a href="#树链剖分" class="headerlink" title="树链剖分"></a>树链剖分</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112353706.png" alt="image-20240526112353706"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112401255.png" alt="image-20240526112401255"></p><h4 id="重链部分"><a href="#重链部分" class="headerlink" title="重链部分"></a>重链部分</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112422998.png" alt="image-20240526112422998"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112438353.png" alt="image-20240526112438353"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112446340.png" alt="image-20240526112446340"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112453669.png" alt="image-20240526112453669"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112501407.png" alt="image-20240526112501407"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112511133-1716693912043-1.png" alt="image-20240526112511133"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112520973.png" alt="image-20240526112520973"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112528251.png" alt="image-20240526112528251"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112534620.png" alt="image-20240526112534620"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112540265.png" alt="image-20240526112540265"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112547668.png" alt="image-20240526112547668"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112554018.png" alt="image-20240526112554018"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112600918.png" alt="image-20240526112600918"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112606842.png" alt="image-20240526112606842"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112612323.png" alt="image-20240526112612323"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112617087.png" alt="image-20240526112617087"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112624067.png" alt="image-20240526112624067"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112632456.png" alt="image-20240526112632456"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112636784.png" alt="image-20240526112636784"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112641641.png" alt="image-20240526112641641"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112646496.png" alt="image-20240526112646496"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112653107.png" alt="image-20240526112653107"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112657735.png" alt="image-20240526112657735"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112703078.png" alt="image-20240526112703078"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112709755.png" alt="image-20240526112709755"></p><h4 id="树链部分的性质"><a href="#树链部分的性质" class="headerlink" title="树链部分的性质"></a>树链部分的性质</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112730804.png" alt="image-20240526112730804"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112737253.png" alt="image-20240526112737253"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112746989.png" alt="image-20240526112746989"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112753152.png" alt="image-20240526112753152"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112759297.png" alt="image-20240526112759297"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112805144.png" alt="image-20240526112805144"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112810692.png" alt="image-20240526112810692"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112816453.png" alt="image-20240526112816453"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112839302.png" alt="image-20240526112839302"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112846421.png" alt="image-20240526112846421"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112851218.png" alt="image-20240526112851218"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112856579.png" alt="image-20240526112856579"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112901873.png" alt="image-20240526112901873"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112907428.png" alt="image-20240526112907428"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112913595.png" alt="image-20240526112913595"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112918708.png" alt="image-20240526112918708"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112923449.png" alt="image-20240526112923449"></p><h2 id="树形数据结构"><a href="#树形数据结构" class="headerlink" title="树形数据结构"></a>树形数据结构</h2><h3 id="树状数组基础"><a href="#树状数组基础" class="headerlink" title="树状数组基础"></a>树状数组基础</h3><h4 id="lowbit操作"><a href="#lowbit操作" class="headerlink" title="lowbit操作"></a>lowbit操作</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113101030.png" alt="image-20240526113101030"></p><h4 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113114986.png" alt="image-20240526113114986"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113123838.png" alt="image-20240526113123838"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113132131.png" alt="image-20240526113132131"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113141135.png" alt="image-20240526113141135"></p><h4 id="模板题——单点修改，区间查询"><a href="#模板题——单点修改，区间查询" class="headerlink" title="模板题——单点修改，区间查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/2340/learning/">单点修改，区间查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs py">N = <span class="hljs-number">100100</span><br><span class="hljs-comment">#初始化树状数组 为0</span><br>f = [<span class="hljs-number">0</span>] * N<br><br><span class="hljs-comment">#求下标为x的最小区间长度</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; (-x)<br><br><span class="hljs-comment">#树状数组更新函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">upd</span>(<span class="hljs-params">pos,v</span>):<span class="hljs-comment">#pos：下标 v：值</span><br>    <span class="hljs-comment">#在下标为pos的区间加上v 并且在每个有包含pos的大区间加上v</span><br>    <span class="hljs-comment">#包含当前区间的大区间：在pos的位置上加lowbit(pos)便能得到大区间</span><br>    <span class="hljs-keyword">while</span> pos &lt;= n:<br>        f[pos] += v<br>        pos += lowbit(pos)<br><br><span class="hljs-comment">#得到1-pos位置的前缀和</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<span class="hljs-comment">#加上组成pos每一个区间的和</span><br>        res += f[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>data = <span class="hljs-built_in">input</span>().split()<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n):<br>    x = <span class="hljs-built_in">int</span>(data[i])<br>    <span class="hljs-comment">#树状数组初始化都为0，需要将原数组每个值通过upd方法将每个值加入树状数组</span><br>    upd(i+<span class="hljs-number">1</span>,x)<br><br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    opt,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-number">1</span>:<br>        upd(a,b)<span class="hljs-comment">#更新</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment">#区间[a,b] = [1,b] - [1,a-1]</span><br>        <span class="hljs-built_in">print</span>(get(b) - get(a-<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>n = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  s,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">1</span>:<br>    n[a-<span class="hljs-number">1</span>] += b<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">2</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(n[a-<span class="hljs-number">1</span>:b]))<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113358856.png" alt="image-20240526113358856"></p><h4 id="树状数组-1"><a href="#树状数组-1" class="headerlink" title="树状数组"></a>树状数组</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113430755.png" alt="image-20240526113430755"></p><h4 id="模板题——殷老师排队"><a href="#模板题——殷老师排队" class="headerlink" title="模板题——殷老师排队"></a>模板题——<a href="https://www.lanqiao.cn/problems/3620/learning/">殷老师排队</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">return</span> x &amp; (-x)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>  ans = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">while</span> x:<br>    ans += tree[x]<br>    x -= lowbit(x)<br>  <span class="hljs-keyword">return</span> ans <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-keyword">while</span> x &lt;= n:<br>    tree[x] += y<br>    x += lowbit(x)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a =[<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>tree = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  add(i,a[i])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  lt = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>  <span class="hljs-keyword">if</span> lt[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:<br>    x, y = lt[<span class="hljs-number">1</span>], lt[<span class="hljs-number">2</span>]<br>    add(x,y - a[x])<br>    a[x] = y<br>  <span class="hljs-keyword">else</span>:<br>    x = lt[<span class="hljs-number">1</span>]<br>    ans = (<span class="hljs-number">2</span> * x - n - <span class="hljs-number">2</span>) * a[x] + query(n) - <span class="hljs-number">2</span>*query(x-<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h3 id="二维树状数组"><a href="#二维树状数组" class="headerlink" title="二维树状数组"></a>二维树状数组</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113722203.png" alt="image-20240526113722203"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113730769.png" alt="image-20240526113730769"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113742110.png" alt="image-20240526113742110"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113748208.png" alt="image-20240526113748208"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113754750.png" alt="image-20240526113754750"></p><h4 id="模板题——-1"><a href="#模板题——-1" class="headerlink" title="模板题——"></a>模板题——</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113904670.png" alt="image-20240526113904670"></p><h3 id="树状数组上二分"><a href="#树状数组上二分" class="headerlink" title="树状数组上二分"></a>树状数组上二分</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113950824.png" alt="image-20240526113950824"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113958446.png" alt="image-20240526113958446"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114007562.png" alt="image-20240526114007562"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114020291.png" alt="image-20240526114020291"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114102890.png" alt="image-20240526114102890"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114113384.png" alt="image-20240526114113384"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114124229.png" alt="image-20240526114124229"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114131782.png" alt="image-20240526114131782"></p><h4 id="模板题——-2"><a href="#模板题——-2" class="headerlink" title="模板题——"></a>模板题——</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python">maxn = <span class="hljs-number">110000</span><br>ans = [<span class="hljs-number">0</span>] * maxn<br>tree = [<span class="hljs-number">0</span>] * maxn<br>a = [<span class="hljs-number">0</span>] * maxn<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; -x<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">pos, x</span>):<br>    <span class="hljs-keyword">while</span> pos &lt; maxn:<br>        tree[pos] += x<br>        pos += lowbit(pos)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<br>        res += tree[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split()))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    a[i] = nums[i - <span class="hljs-number">1</span>]<br>    add(i, <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    l, r = <span class="hljs-number">1</span>, n<br>    <span class="hljs-keyword">while</span> l &lt;= r:<br>        mid = (l + r) // <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> query(mid) &lt; a[i] + <span class="hljs-number">1</span>:<br>            l = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            r = mid - <span class="hljs-number">1</span><br>    ans[i] = r<br>    add(r, -<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(ans[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="线段树-动态开点"><a href="#线段树-动态开点" class="headerlink" title="线段树-动态开点"></a>线段树-动态开点</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121216936.png" alt="image-20240526121216936"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121240169.png" alt="image-20240526121240169"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121250475.png" alt="image-20240526121250475"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121357462.png" alt="image-20240526121357462"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121408234.png" alt="image-20240526121408234"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121446955.png" alt="image-20240526121446955"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121517887.png" alt="image-20240526121517887"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121505465.png" alt="image-20240526121505465"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121533131.png" alt="image-20240526121533131"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121542078.png" alt="image-20240526121542078"></p><h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121653108.png" alt="image-20240526121653108"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Tree</span> &#123;</span><br>    <span class="hljs-type">int</span> l, r, n, ls, rs;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++ cnt;<br>        tree[t].l = l;<br>        tree[t].r = r;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        tree[t].n = n;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        update(tree[t].ls, l, mid, pos, n);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(tree[t].rs, mid + <span class="hljs-number">1</span>, r, pos, n);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getnum</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (tree[t].l == l &amp;&amp; tree[t].r == r) &#123;<br>        <span class="hljs-keyword">return</span> tree[t].n;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (tree[t].l + tree[t].r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].rs, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, mid) + getnum(tree[t].rs, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树-标记永久化"><a href="#线段树-标记永久化" class="headerlink" title="线段树-标记永久化"></a>线段树-标记永久化</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121717724.png" alt="image-20240526121717724"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121729855.png" alt="image-20240526121729855"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121746997.png" alt="image-20240526121746997"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121821681.png" alt="image-20240526121821681"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121831175.png" alt="image-20240526121831175"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121847400.png" alt="image-20240526121847400"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121855524.png" alt="image-20240526121855524"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121904894.png" alt="image-20240526121904894"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121912575.png" alt="image-20240526121912575"></p><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> *v)</span> &#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        _v[t] = v[l];<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    build(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, v);<br>    build(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, v);<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] + _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> k)</span> &#123;<br>    _v[t] += k * (r - l + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        _laz[t] += k;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, k);<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, k);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> sum)</span> &#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t] + sum * (_r[t] - _l[t] + <span class="hljs-number">1</span>);;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, sum + _laz[t])<br>            + getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, sum + _laz[t]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护矩阵"><a href="#线段树维护矩阵" class="headerlink" title="线段树维护矩阵"></a>线段树维护矩阵</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124453903.png" alt="image-20240526124453903"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124459467.png" alt="image-20240526124459467"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124505523.png" alt="image-20240526124505523"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124509905.png" alt="image-20240526124509905"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124524019.png" alt="image-20240526124524019"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124529840.png" alt="image-20240526124529840"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124537171.png" alt="image-20240526124537171"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124545230.png" alt="image-20240526124545230"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    _v[t] = _E;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> pos, MATRIX &amp;v)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] = _r[t]) &#123;<br>        _v[t] = v;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span>, pos, v);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, pos, v);<br>    &#125;<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] * _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-function">MATRIX <span class="hljs-title">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t];<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid) * <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护哈希"><a href="#线段树维护哈希" class="headerlink" title="线段树维护哈希"></a>线段树维护哈希</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124653609.png" alt="image-20240526124653609"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124700848.png" alt="image-20240526124700848"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124710439.png" alt="image-20240526124710439"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124717847.png" alt="image-20240526124717847"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124726230.png" alt="image-20240526124726230"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124754241.png" alt="image-20240526124754241"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs py">bs1= []<br>bs2= []<br>mod1 = <span class="hljs-number">998244353</span><br>mod2 = <span class="hljs-number">19260817</span><br>bas = <span class="hljs-number">233</span><br>s = []<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">asdf</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, h1, h2, length</span>):<br>        self.h1 = h1<br>        self.h2 = h2<br>        self.length = length<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> asdf((self.h1 * bs1[c.length] + c.h1) % mod1, (self.h2 * bs2[c.length] + c.h2) % mod2, self.length + c.length)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> self.h1 == c.h1 <span class="hljs-keyword">and</span> self.h2 == c.h2 <span class="hljs-keyword">and</span> self.length == c.length<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">l, r, rt</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    s[rt] = build(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>) + build((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">l, r, rt, x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt;= l <span class="hljs-keyword">and</span> r &lt;= y:<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> y &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y)<br>    <span class="hljs-keyword">if</span> x &gt; (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br>    <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y) + query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">l, r, rt, ad, ch</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(ch), <span class="hljs-built_in">ord</span>(ch), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> ad &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        s[rt] = modify(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, ad, ch) + s[rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        s[rt] = s[rt * <span class="hljs-number">2</span>] + modify((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, ad, ch)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = <span class="hljs-built_in">input</span>()<br>a = <span class="hljs-string">&quot;!&quot;</span> + a<br>bs1.append(<span class="hljs-number">1</span>)<br>bs2.append(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    bs1.append(bs1[i]*bas%mod1)<br>    bs2.append(bs2[i]*bas%mod2)<br>s = [<span class="hljs-literal">None</span>] * (<span class="hljs-number">4</span> * (n+<span class="hljs-number">5</span>))<br>build(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>)<br><br>q = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    ls=<span class="hljs-built_in">input</span>().split()<br>    opt = ls[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        ad = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        ch = ls[<span class="hljs-number">2</span>]<br>        modify(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, <span class="hljs-built_in">int</span>(ad), ch)<br>    <span class="hljs-keyword">else</span>:<br>        l1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        r1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">2</span>])<br>        l2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">3</span>])<br>        r2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">4</span>])<br>        x = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l1, r1)<br>        y = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l2, r2)<br>        <span class="hljs-keyword">if</span> x == y:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="可持久化线段树"><a href="#可持久化线段树" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122146448.png" alt="image-20240526122146448"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122158524.png" alt="image-20240526122158524"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122211004.png" alt="image-20240526122211004"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122219620.png" alt="image-20240526122219620"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122228761.png" alt="image-20240526122228761"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122248198.png" alt="image-20240526122248198"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122258158.png" alt="image-20240526122258158"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122329330.png" alt="image-20240526122329330"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122339224.png" alt="image-20240526122339224"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122353739.png" alt="image-20240526122353739"></p><h4 id="可持久化线段树-1"><a href="#可持久化线段树-1" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> v, ls, rs;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SEGTREE</span> &#123;</span><br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> root[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>    NODE node[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">SEGTREE::update</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-type">_t</span>, <span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++cnt;<br>        node[t].v = node[<span class="hljs-type">_t</span>].v;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        node[t].v += k;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        node[t].rs = node[<span class="hljs-type">_t</span>].rs;<br>        update(node[<span class="hljs-type">_t</span>].ls, node[t].ls, l, mid, pos, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[t].ls = node[<span class="hljs-type">_t</span>].ls;<br>        update(node[<span class="hljs-type">_t</span>]).rs, node[t].rs, mid + <span class="hljs-number">1</span>, r, pos, k);<br>    &#125;<br>    node[t].v = node[node[t].ls].v + node[node[t].rs].v;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">SEGTREE::getV</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> _l, <span class="hljs-type">int</span> _r, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == _l &amp;&amp; r == _r) &#123;<br>        <span class="hljs-keyword">return</span> node[t].v;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l + _r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, mid)<br>            + getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="模板题——区间第k小"><a href="#模板题——区间第k小" class="headerlink" title="模板题——区间第k小"></a>模板题——<a href="https://www.lanqiao.cn/problems/1132/learning/">区间第k小</a></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> lc(x) tr[x].l</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rc(x) tr[x].r</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">6</span>;<br><span class="hljs-type">int</span> n,m,a[N],b[N];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br> <span class="hljs-type">int</span> l,r,s;<span class="hljs-comment">//左右儿子，该节点在值域中的个数</span><br>&#125;tr[N*<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> idx,root[N];<br><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;x,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span><br>&#123;<br>    x=++idx;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> ;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    build(lc(x),l,mid);<br>    build(rc(x),mid+<span class="hljs-number">1</span>,r);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> &amp;y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> v)</span><br>&#123;<br>    y=++idx;<br>    tr[y]=tr[x];<br>    tr[y].s++;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(v&lt;=mid)<br>        update(lc(x),lc(y),l,mid,v);<br>    <span class="hljs-keyword">else</span><br>        update(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,v);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> k)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> l;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> s=tr[lc(y)].s-tr[lc(x)].s;<br>    <span class="hljs-keyword">if</span>(k&lt;=s)<br>        <span class="hljs-keyword">return</span> query(lc(x),lc(y),l,mid,k);<br>    <span class="hljs-keyword">else</span> <br>        <span class="hljs-keyword">return</span> query(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,k-s);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    ios::sync_with_stdio(<span class="hljs-number">0</span>),<span class="hljs-built_in">cin</span>.tie(<span class="hljs-number">0</span>),<span class="hljs-built_in">cout</span>.tie(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;a[i];<br>        b[i]=a[i];<br>    &#125;<br>    sort(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n);<br>    <span class="hljs-type">int</span> bn=unique(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n)-b<span class="hljs-number">-1</span>;<br>    build(root[<span class="hljs-number">0</span>],<span class="hljs-number">1</span>,bn);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> id=lower_bound(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+bn,a[i])-b;<br>        update(root[i<span class="hljs-number">-1</span>],root[i],<span class="hljs-number">1</span>,bn,id);<br>    &#125;<br>    <span class="hljs-keyword">while</span>(m--)<br>    &#123;<br>        <span class="hljs-type">int</span> l,r,k;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;l&gt;&gt;r&gt;&gt;k;<br>        <span class="hljs-type">int</span> id=query(root[l<span class="hljs-number">-1</span>],root[r],<span class="hljs-number">1</span>,bn,k);<br>        <span class="hljs-built_in">cout</span>&lt;&lt;b[id]&lt;&lt;<span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="扫描线与二维数点"><a href="#扫描线与二维数点" class="headerlink" title="扫描线与二维数点"></a>扫描线与二维数点</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122721288.png" alt="image-20240526122721288"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122730203.png" alt="image-20240526122730203"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122740484.png" alt="image-20240526122740484"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122748677.png" alt="image-20240526122748677"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122757899.png" alt="image-20240526122757899"></p><h4 id="二维数点"><a href="#二维数点" class="headerlink" title="二维数点"></a>二维数点</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122820094.png" alt="image-20240526122820094"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122808099.png" alt="image-20240526122808099"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122858486.png" alt="image-20240526122858486"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> maxn 110000</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&#123;<br>    <span class="hljs-type">int</span> x,y;<br>&#125;point[maxn];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rect</span>&#123;<br>    <span class="hljs-type">int</span> p1,p2,q1,q2,id;<br>&#125;rect[maxn];<br><span class="hljs-type">int</span> n,m,ans[maxn];<br><span class="hljs-type">int</span> len[maxn],cnt;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(<span class="hljs-type">const</span> Point &amp;a,<span class="hljs-type">const</span> Point &amp;b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a.x &lt; b.x;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp1</span><span class="hljs-params">(<span class="hljs-type">const</span> Rect &amp;a,<span class="hljs-type">const</span> Rect &amp;b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a.p1&lt;b.p1;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp2</span><span class="hljs-params">(<span class="hljs-type">const</span> Rect &amp;a,<span class="hljs-type">const</span> Rect &amp;b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a.q1&lt;b.q1;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br>    <span class="hljs-type">int</span> sum;<br>&#125;tree[maxn&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pushup</span><span class="hljs-params">(<span class="hljs-type">int</span> rt)</span></span>&#123;<br>    tree[rt].sum=tree[rt&lt;&lt;<span class="hljs-number">1</span>].sum+tree[rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>].sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> x)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(l==r)&#123;<br>        <span class="hljs-keyword">if</span>(l==x)tree[rt].sum+=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(x&lt;=mid)<span class="hljs-built_in">add</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,x);<br>    <span class="hljs-keyword">if</span>(x&gt;mid)<span class="hljs-built_in">add</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,x);<br>    <span class="hljs-built_in">pushup</span>(rt);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y)&#123;<br>        <span class="hljs-keyword">return</span> tree[rt].sum;<br>    &#125;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span>(x&lt;=mid)ans+=<span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,x,y);<br>    <span class="hljs-keyword">if</span>(y&gt;mid)ans+=<span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,x,y);<br>    <span class="hljs-built_in">pushup</span>(rt);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;point[i].x,&amp;point[i].y);<br>        len[++cnt]=point[i].x,len[++cnt]=point[i].y;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        <span class="hljs-type">int</span> a,b,c,d;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c,&amp;d);<br>        rect[i]=&#123;a,b,c,d,i&#125;;<br>        len[++cnt]=a;len[++cnt]=b;len[++cnt]=c;len[++cnt]=d;<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> tot=<span class="hljs-built_in">unique</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>)-len<span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        point[i].x=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,point[i].x)-len;<br>        point[i].y=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,point[i].y)-len;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        rect[i].p1=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].p1)-len;<br>        rect[i].q1=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].q1)-len;<br>        rect[i].p2=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].p2)-len;<br>        rect[i].q1=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].q2)-len;<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(point+<span class="hljs-number">1</span>,point+n+<span class="hljs-number">1</span>,cmp);<br>    <span class="hljs-built_in">sort</span>(rect+<span class="hljs-number">1</span>,rect+m+<span class="hljs-number">1</span>,cmp1);<br>    <span class="hljs-type">int</span> pos=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        <span class="hljs-keyword">while</span>(rect[i].p1&gt;point[pos+<span class="hljs-number">1</span>].x&amp;&amp;pos&lt;=n)&#123;<br>            pos+=<span class="hljs-number">1</span>;<br>            <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,point[i].y);<br>        &#125;<br>        ans[rect[i].id]-=<span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,rect[i].p2,rect[i].q2);<br>    &#125;<br>    <span class="hljs-built_in">memset</span>(tree,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(tree));<br>    <span class="hljs-built_in">sort</span>(rect+<span class="hljs-number">1</span>,rect+m+<span class="hljs-number">1</span>,cmp);<br>    pos=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        <span class="hljs-keyword">while</span>(rect[i].q1&gt;=point[pos+<span class="hljs-number">1</span>].x&amp;&amp;pos&lt;=n)&#123;<br>            pos+=<span class="hljs-number">1</span>;<br>            <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,pos[i].y);<br>        &#125;<br>        ans[rect[i].id]+=<span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,rect[i].p2,rect[i].q2);<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,ans[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="平衡树-Splay"><a href="#平衡树-Splay" class="headerlink" title="平衡树-Splay"></a>平衡树-Splay</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122034271.png" alt="image-20240526122034271"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122046309.png" alt="image-20240526122046309"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122055269.png" alt="image-20240526122055269"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122104347.png" alt="image-20240526122104347"></p><h3 id="平衡树-FHQ-Treap"><a href="#平衡树-FHQ-Treap" class="headerlink" title="平衡树-FHQ_Treap"></a>平衡树-FHQ_Treap</h3><h4 id="无旋Treap"><a href="#无旋Treap" class="headerlink" title="无旋Treap"></a>无旋Treap</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115339167.png" alt="image-20240526115339167"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115350766.png" alt="image-20240526115350766"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115359404.png" alt="image-20240526115359404"></p><h4 id="无旋Treap的结构"><a href="#无旋Treap的结构" class="headerlink" title="无旋Treap的结构"></a>无旋Treap的结构</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115559180.png" alt="image-20240526115559180"></p><h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115614042.png" alt="image-20240526115614042"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115623744.png" alt="image-20240526115623744"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115634558.png" alt="image-20240526115634558"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115644061.png" alt="image-20240526115644061"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115650541.png" alt="image-20240526115650541"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115656903.png" alt="image-20240526115656903"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115703005.png" alt="image-20240526115703005"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115710056.png" alt="image-20240526115710056"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115715945.png" alt="image-20240526115715945"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115721051.png" alt="image-20240526115721051"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115727235.png" alt="image-20240526115727235"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115734944.png" alt="image-20240526115734944"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115740418.png" alt="image-20240526115740418"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115746149.png" alt="image-20240526115746149"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115751158.png" alt="image-20240526115751158"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115755059.png" alt="image-20240526115755059"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115800730.png" alt="image-20240526115800730"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115804490.png" alt="image-20240526115804490"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115808715.png" alt="image-20240526115808715"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115813454.png" alt="image-20240526115813454"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115817884.png" alt="image-20240526115817884"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115823342.png" alt="image-20240526115823342"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115830400.png" alt="image-20240526115830400"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115835300.png" alt="image-20240526115835300"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115839426.png" alt="image-20240526115839426"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115847061.png" alt="image-20240526115847061"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115851600.png" alt="image-20240526115851600"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115858903.png" alt="image-20240526115858903"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115904405.png" alt="image-20240526115904405"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115910595.png" alt="image-20240526115910595"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115916421.png" alt="image-20240526115916421"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115922564.png" alt="image-20240526115922564"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115926736.png" alt="image-20240526115926736"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115931678.png" alt="image-20240526115931678"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115936852.png" alt="image-20240526115936852"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115942072.png" alt="image-20240526115942072"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115948947.png" alt="image-20240526115948947"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115954070.png" alt="image-20240526115954070"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115959511.png" alt="image-20240526115959511"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120003232.png" alt="image-20240526120003232"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120022163.png" alt="image-20240526120022163"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120026713.png" alt="image-20240526120026713"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120031817.png" alt="image-20240526120031817"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120036416.png" alt="image-20240526120036416"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120040832.png" alt="image-20240526120040832"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120053497.png" alt="image-20240526120053497"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120100194.png" alt="image-20240526120100194"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120104721.png" alt="image-20240526120104721"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120109696.png" alt="image-20240526120109696"></p><h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> val;<br>    <span class="hljs-type">int</span> cnt;<br>    <span class="hljs-type">int</span> rev;<br>    <span class="hljs-type">int</span> prio;<br>    <span class="hljs-type">int</span> size;<br>    <span class="hljs-type">int</span> ch[<span class="hljs-number">2</span>];<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FHQTREAP</span> &#123;</span><br>    <span class="hljs-type">int</span> root;<br>    <span class="hljs-type">int</span> size;<br>    NODE node[MAXN];<br>&#125;<br><br><span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_val</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-keyword">if</span> (node[t].val &lt;= val) &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">1</span>], val);<br>        node[t].ch[<span class="hljs-number">1</span>] = tmp.first;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, tmp.second&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">0</span>], val);<br>        node[t].ch[<span class="hljs-number">0</span>] = tmp.second;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;tmp.first, t&#125;;<br>    &#125;<br>&#125;<br><br>tuple&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_rank</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    <span class="hljs-keyword">if</span> (k &lt;= node[node[t].ch[<span class="hljs-number">0</span>]].size()) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">0</span>], k);<br>        node[t].ch[<span class="hljs-number">0</span>] = rt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, mt, t&#125;;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k &gt; node[node[t]].ch[<span class="hljs-number">0</span>].size() + node[t].cnt) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">1</span>], k - node[node[t].ch[<span class="hljs-number">0</span>]].size() - node[t].cnt);<br>        node[t].ch[<span class="hljs-number">1</span>] = lt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, mt, rt&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = node[t].ch[<span class="hljs-number">0</span>];<br>        rt = node[t].ch[<span class="hljs-number">1</span>];<br>        check_rev(lt);<br>        check_rev(rt);<br>        node[t].ch[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        upda[t].ch[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, t, rt&#125;;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> lt, <span class="hljs-type">int</span> rt)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!lt) &#123;<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!rt) &#123;<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125;<br>    check_rev(lt);<br>    check_rev(rt);<br>    <span class="hljs-keyword">if</span> (node[lt].prio &lt; node[rt].prio) &#123;<br>        node[lt].ch[<span class="hljs-number">1</span>] = merge(node[lt].ch[<span class="hljs-number">1</span>], rt);<br>        update_size(lt);<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[rt].ch[<span class="hljs-number">0</span>] = merge(lt, node[rt].ch[<span class="hljs-number">0</span>]);<br>        update_size(rt);<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (!mt) &#123;<br>        mt = new_node(val);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[mt].cnt ++;<br>        update_size(mt);<br>    &#125;<br>    root = merge(merge(lt, mt), rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">del</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    unode[mt].cnt --;<br>    update_size(mt);<br>    <span class="hljs-keyword">if</span> (node[mt].cnt == <span class="hljs-number">0</span>) &#123;<br>        clear(mt);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = merge(lt, mt);<br>    &#125;<br>    root = merge(lt, rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-type">int</span> t1, t2, t3, t4, t5;<br>    tie(t1, t2, t3) = split_by_rank(root, l - <span class="hljs-number">1</span>);<br>    tie(t3, t4, t5) = split_by_ranl(t3, r - l + <span class="hljs-number">2</span>);<br>    node[t3].rev = <span class="hljs-number">1</span>;<br>    root = merge(merge(merge(merge(t1, t2), t3), t4), t5);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">check_rev</span><span class="hljs-params">(<span class="hljs-type">int</span> t)</span> &#123;<br>    <span class="hljs-keyword">if</span> (node[t].rev) &#123;<br>        swap(node[t].ch[<span class="hljs-number">0</span>], node[t].ch[<span class="hljs-number">1</span>]);<br>        node[node[t].ch[<span class="hljs-number">0</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[node[t].ch[<span class="hljs-number">1</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[t].rev = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">rank</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = node[tmp.first].size + <span class="hljs-number">1</span>;<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">kth</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, mt, rt) = split_by_rank(t, k);<br>    <span class="hljs-type">int</span> val = node[mt].val;<br>    t = merge(merge(lt, mt), rt);<br>    <span class="hljs-keyword">return</span> val;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">pre</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_cal(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = kth(tmp.first, node[tmp.first].size);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">nxt</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val);<br>    <span class="hljs-type">int</span> k = kth(tmp.second, <span class="hljs-number">1</span>);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="单调栈"><a href="#单调栈" class="headerlink" title="单调栈"></a>单调栈</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114259208.png" alt="image-20240526114259208"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114322817.png" alt="image-20240526114322817"></p><h4 id="模板题——百亿富翁"><a href="#模板题——百亿富翁" class="headerlink" title="模板题——百亿富翁"></a>模板题——<a href="https://www.lanqiao.cn/problems/1142/learning/">百亿富翁</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">right_bigger</span>():<br>  ans=[-<span class="hljs-number">1</span>]*n<br>  stack=[]<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> h[stack[-<span class="hljs-number">1</span>]]&lt;h[i]:<br>      ans[stack[-<span class="hljs-number">1</span>]]=i+<span class="hljs-number">1</span><br>      stack.pop()<br>    stack.append(i)<br>  <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">left_bigger</span>():<br>  ans=[-<span class="hljs-number">1</span>]*n<br>  stack=[]<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> h[stack[-<span class="hljs-number">1</span>]]&lt;h[i]:<br>      ans[stack[-<span class="hljs-number">1</span>]]=i+<span class="hljs-number">1</span><br>      stack.pop()<br>    stack.append(i)<br>  <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">import</span> sys<br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>h=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><span class="hljs-built_in">print</span>(*left_bigger())<br><span class="hljs-built_in">print</span>(*right_bigger())<br></code></pre></td></tr></table></figure><h2 id="分块"><a href="#分块" class="headerlink" title="分块"></a>分块</h2><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="KMP-字符串哈希"><a href="#KMP-字符串哈希" class="headerlink" title="KMP&amp;字符串哈希"></a>KMP&amp;字符串哈希</h2><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100046139.png" alt="image-20240526100046139"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100057701.png" alt="image-20240526100057701"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100110562.png" alt="image-20240526100110562"></p><h3 id="KMP算法"><a href="#KMP算法" class="headerlink" title="KMP算法"></a>KMP算法</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100136410.png" alt="image-20240526100136410"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100148837.png" alt="image-20240526100148837"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100157890.png" alt="image-20240526100157890"></p><p> <img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100211778.png" alt="image-20240526100211778"><br> <img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100221657.png" alt="image-20240526100221657"></p><h4 id="模板题——斤斤计较的小Z"><a href="#模板题——斤斤计较的小Z" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py">Next = [<span class="hljs-number">0</span>] * <span class="hljs-number">1000010</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_next</span>(<span class="hljs-params">T</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(T)):<br>        j = Next[i]<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> T[i] != T[j]:<br>            j = Next[j]<br>        <span class="hljs-keyword">if</span> T[i] == T[j]:<br>            Next[i + <span class="hljs-number">1</span>] = j + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            Next[i + <span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">KMP</span>(<span class="hljs-params">s,t</span>):<br>    get_next(t)<br>    ans = <span class="hljs-number">0</span><br>    j = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> s[i] != t[j]:<br>            j =  Next[j]<br>        <span class="hljs-keyword">if</span> s[i] == t[j]:<br>            j += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> j == <span class="hljs-built_in">len</span>(t):<br>            ans += <span class="hljs-number">1</span><br>            j =  Next[j]<br>    <span class="hljs-keyword">return</span> ans<br>t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br><span class="hljs-built_in">print</span>(KMP(s,t))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-built_in">print</span>((<span class="hljs-keyword">lambda</span> s: <span class="hljs-built_in">input</span>().count(s))(<span class="hljs-built_in">input</span>()))<br></code></pre></td></tr></table></figure><h3 id="字符串哈希"><a href="#字符串哈希" class="headerlink" title="字符串哈希"></a>字符串哈希</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100452881.png" alt="image-20240526100452881"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100509262.png" alt="image-20240526100509262"></p><h4 id="模板题——斤斤计较的小Z-1"><a href="#模板题——斤斤计较的小Z-1" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py">t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br>m,n = <span class="hljs-built_in">len</span>(t), <span class="hljs-built_in">len</span>(s)<br>B = <span class="hljs-number">26</span><br>mod = <span class="hljs-number">1000000007</span><br><span class="hljs-built_in">hash</span> = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">hash</span>[i] = <span class="hljs-built_in">hash</span>[i - <span class="hljs-number">1</span>] * B + <span class="hljs-built_in">ord</span>(s[i - <span class="hljs-number">1</span>]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    <span class="hljs-built_in">hash</span>[i] %= mod<br><br>numT = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> t:<br>    numT = numT * B + <span class="hljs-built_in">ord</span>(c) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    numT %= mod<br>    <br>p = (B ** m) % mod<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n +<span class="hljs-number">1</span>):<br>    r = l + m - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> r &gt; n:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">hash</span>[r] - <span class="hljs-built_in">hash</span>[l - <span class="hljs-number">1</span>] * p % mod + mod) % mod == numT:<br>        ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="Manacher"><a href="#Manacher" class="headerlink" title="Manacher"></a>Manacher</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101919972.png" alt="image-20240526101919972"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101929004.png" alt="image-20240526101929004"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101944468.png" alt="image-20240526101944468"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101953533.png" alt="image-20240526101953533"></p><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102101694.png" alt="image-20240526102101694"></p><h2 id="字典树基础"><a href="#字典树基础" class="headerlink" title="字典树基础"></a>字典树基础</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123731966.png" alt="image-20240526123731966"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123744464.png" alt="image-20240526123744464"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123847593.png" alt="image-20240526123847593"></p><h4 id="模板题——前缀判定"><a href="#模板题——前缀判定" class="headerlink" title="模板题——前缀判定"></a>模板题——<a href="https://www.lanqiao.cn/problems/1204/learning">前缀判定</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>():<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    self.nodes = &#123;&#125;<br>  <br>  <span class="hljs-comment">#插入</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self,s</span>):<br>    curr = self<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s:<br>      <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> curr.nodes.keys():<br>        curr.nodes[i] = TreeNode()<br>      <span class="hljs-comment">#往下走</span><br>      curr = curr.nodes[i]<br>  <br>  <span class="hljs-comment">#检查是否为前缀</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">pre</span>(<span class="hljs-params">self,s</span>):<br>    curr = self<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s:<br>      <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> curr.nodes.keys():<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>      curr = curr.nodes[i]<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><br>n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>tree = TreeNode()<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  s = <span class="hljs-built_in">input</span>()<br>  tree.insert(s)<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  t = <span class="hljs-built_in">input</span>()<br>  <span class="hljs-keyword">if</span> tree.pre(t):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Y&#x27;</span>)<br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;N&#x27;</span>)<br></code></pre></td></tr></table></figure><h4 id="模板题——依依的瓶中信"><a href="#模板题——依依的瓶中信" class="headerlink" title="模板题——依依的瓶中信"></a>模板题——<a href="https://www.lanqiao.cn/problems/3751/learning">依依的瓶中信</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">多个字符串，求公共前缀长度问题，用字典树</span><br><span class="hljs-string">同一个字符串不可与自身比较：构建树的时候打标记，查找的时候清除标记，若标记为0，则说明当前在于自己比较，直接返回。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>():<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    self.nodes = &#123;&#125;          <span class="hljs-comment">#用于存放以当前点为根的子树</span><br>    self.value = <span class="hljs-number">1</span>           <span class="hljs-comment">#每可子树的权值，初始为1</span><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self,s</span>):<span class="hljs-comment">#建树</span><br>    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>      <span class="hljs-keyword">if</span> c <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.nodes.keys():     <span class="hljs-comment">#若不存在，则添加该子树</span><br>        self.nodes[c] = TreeNode()<br>      <span class="hljs-keyword">else</span>:<br>        self.nodes[c].value +=<span class="hljs-number">1</span>       <span class="hljs-comment">#若存在，则该子树的权值+1，</span><br>      self = self.nodes[c]          <span class="hljs-comment">#进入下一层</span><br><span class="hljs-comment">#&#123;1,a:&#123;2,b:&#123;2,c:&#123;1,&#125;&#125;&#125;,b:&#123;1,c:&#123;1&#125;&#125;&#125;</span><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">commen_pre</span>(<span class="hljs-params">self,t</span>):  <span class="hljs-comment">#查找</span><br>    cnt = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> t:           <span class="hljs-comment">#该题不用判断c是否存在，因为每个点都存在</span><br>      <span class="hljs-keyword">if</span> self.nodes[c].value -<span class="hljs-number">1</span> == <span class="hljs-number">0</span>:    <span class="hljs-comment">#如果走到自己独有的节点上时，就返回其与其它子串的公共前缀长</span><br>        <span class="hljs-keyword">return</span> cnt<br>      cnt += <span class="hljs-number">1</span><br>      self = self.nodes[c]   <span class="hljs-comment">#进入下一层</span><br>    <span class="hljs-keyword">return</span> cnt    <span class="hljs-comment">#若自己本身就是某个串的前缀，则返回自己的长度</span><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>S =[]<br>tree = TreeNode() <span class="hljs-comment">#实例化根节点</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):  <span class="hljs-comment">#建树</span><br>  s = <span class="hljs-built_in">input</span>()<br>  S.append(s)<br>  tree.insert(s)<br><br><span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> S:      <span class="hljs-comment">#查找、统计</span><br>  <span class="hljs-built_in">print</span>(tree.commen_pre(s))<br></code></pre></td></tr></table></figure><h2 id="01tire"><a href="#01tire" class="headerlink" title="01tire"></a>01tire</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124139861.png" alt="image-20240526124139861"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124148215.png" alt="image-20240526124148215"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124153033.png" alt="image-20240526124153033"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124201442.png" alt="image-20240526124201442"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124207236.png" alt="image-20240526124207236"><br><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124211551.png" alt="image-20240526124211551"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs py">maxn = <span class="hljs-number">210000</span><br>ch = [[<span class="hljs-number">0</span>]*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(maxn)]<br>val = [<span class="hljs-number">0</span>]*maxn<br>n, ans, tot = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">global</span> tot<br>    now = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">31</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        pos = ((x &gt;&gt; j) &amp; <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> ch[now][pos] == <span class="hljs-number">0</span>:<br>            tot += <span class="hljs-number">1</span><br>            ch[now][pos] = tot<br>        now = ch[now][pos]<br>    val[now] = x<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>    now = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">31</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        pos = ((x &gt;&gt; j) &amp; <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> ch[now][pos ^ <span class="hljs-number">1</span>] != <span class="hljs-number">0</span>:<br>            now = ch[now][pos ^ <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            now = ch[now][pos]<br>    <span class="hljs-keyword">return</span> val[now]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    insert(x)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    ans = <span class="hljs-built_in">max</span>(ans, query(val[i]))<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><h2 id="基础-2"><a href="#基础-2" class="headerlink" title="基础"></a>基础</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124949289.png" alt="image-20240526124949289"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124958064.png" alt="image-20240526124958064"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125006396.png" alt="image-20240526125006396"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125013800.png" alt="image-20240526125013800"></p><h3 id="DFS-BFS"><a href="#DFS-BFS" class="headerlink" title="DFS&amp;BFS"></a>DFS&amp;BFS</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125134400.png" alt="image-20240526125134400"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125142643.png" alt="image-20240526125142643"></p><h4 id="DFS模板题——帮派弟位"><a href="#DFS模板题——帮派弟位" class="headerlink" title="DFS模板题——帮派弟位"></a>DFS模板题——<a href="https://www.lanqiao.cn/problems/3891/learning">帮派弟位</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py">n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>G=[[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<span class="hljs-comment">#bfs和图的结合</span><br>rudu=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>) <span class="hljs-comment">#计数，根结点是没有rudu的</span><br>biaoji=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-built_in">sum</span>=[[<span class="hljs-number">0</span>,i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-comment">#注意是二元组，记录子数数量，是先按数量排，再按序号排.然后是包括他自己的，所以初始化为1</span><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>    l,r=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()) <span class="hljs-comment">#表示序号为l的人附属于r</span><br>    G[r].append(l) <span class="hljs-comment">#表示r下面有l 可以看出r和谁相邻</span><br>    rudu[l]+=<span class="hljs-number">1</span> <span class="hljs-comment">#表明l头上是有父亲的</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>): <span class="hljs-comment">#找出谁的rudu为0，即找出谁是根结点</span><br>    <span class="hljs-keyword">if</span> rudu[i]==<span class="hljs-number">0</span>:<br>        root=i<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u</span>):<br>    biaoji[u]=<span class="hljs-number">1</span> <span class="hljs-comment">#打上标记</span><br>    <span class="hljs-built_in">sum</span>[u][<span class="hljs-number">0</span>]=-<span class="hljs-number">1</span><span class="hljs-comment">#为什么这里设置成-1，而不是1呢，因为题目要求如果手下相同的，序号小的排在前面，设置成-1就可以这样了。！</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]: <span class="hljs-comment">#遍历和u相邻的每个节点</span><br>        <span class="hljs-keyword">if</span> biaoji[v]==<span class="hljs-number">0</span>: <span class="hljs-comment">#如果没有打上标记</span><br>            dfs(v)<span class="hljs-comment">#遍历和u相邻的节点，就是遍历子节点</span><br>            <span class="hljs-built_in">sum</span>[u][<span class="hljs-number">0</span>]+=<span class="hljs-built_in">sum</span>[v][<span class="hljs-number">0</span>] <span class="hljs-comment">#遍历v子节点的同时，可以把v下的子节点也加上去</span><br><br>dfs(root)<br><span class="hljs-built_in">sum</span>.sort()<br><span class="hljs-keyword">for</span> i,(x,y) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">sum</span>,start=<span class="hljs-number">1</span>):<span class="hljs-comment">#输出小明的排列</span><br>    <span class="hljs-keyword">if</span> y==m:<br>        <span class="hljs-built_in">print</span>(i)<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125335820.png" alt="image-20240526125335820"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125344854.png" alt="image-20240526125344854"></p><h4 id="BFS模板题——最少操作数"><a href="#BFS模板题——最少操作数" class="headerlink" title="BFS模板题——最少操作数"></a>BFS模板题——<a href="https://www.lanqiao.cn/problems/1509/learning">最少操作数</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bfs</span>(<span class="hljs-params">s,t</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    :param s: 起点</span><br><span class="hljs-string">    :param t: 终点</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    dis = [-<span class="hljs-number">1</span>]*<span class="hljs-number">100001</span><br>    queue = deque()<br>    <span class="hljs-comment">#1、将起点塞入到队列中，打上标记</span><br>    queue.append(s)<br>    dis[s] = <span class="hljs-number">0</span><br>    <span class="hljs-comment">#2、当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(queue) != <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># 2.1 取出队首元素u</span><br>        u = queue.popleft()<br>        <span class="hljs-comment">#2.2 判断u是否为终点</span><br>        <span class="hljs-keyword">if</span> u == t:<br>            <span class="hljs-keyword">return</span> dis[u]<br>        <span class="hljs-comment">#2.3 将u相连的所有点v，只要v未标记，则入队列</span><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> [u-<span class="hljs-number">1</span>,u+<span class="hljs-number">1</span>,u*<span class="hljs-number">2</span>]:<br>            <span class="hljs-comment">#特判：未越界、未标记</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span>&lt;=v&lt;=<span class="hljs-number">100000</span> <span class="hljs-keyword">and</span> dis[v] == -<span class="hljs-number">1</span>:<br>                queue.append(v)<br>                dis[v] = dis[u] + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>n,k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><span class="hljs-built_in">print</span>(bfs(n,k))<br></code></pre></td></tr></table></figure><h4 id="BFS模板题——混境之地4"><a href="#BFS模板题——混境之地4" class="headerlink" title="BFS模板题——混境之地4"></a>BFS模板题——<a href="https://www.lanqiao.cn/problems/3819/learning">混境之地4</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment">#  3819 混境之地</span><br><span class="hljs-comment"># BFS遍历  经典题目</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque  <span class="hljs-comment"># 使用队列</span><br>INF = <span class="hljs-number">0x3f3f3f3f</span>   <span class="hljs-comment"># 对应的十进制为：1061109567，一般的数据小于10^9，因此可将其作为一个边界</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>(<span class="hljs-params">x, y, dist</span>):<br>    <span class="hljs-comment"># 从(x, y)到每个点的最短时间</span><br>    queue = deque()<br>    vis = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    <span class="hljs-comment"># 1、将起点加入队列</span><br>    queue.append([x, y])<br>    dist[x][y] = <span class="hljs-number">0</span>  <span class="hljs-comment"># 更新距离</span><br>    vis[x][y] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 打标记</span><br>    <span class="hljs-comment"># 2、当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(queue) != <span class="hljs-number">0</span>:<br>        x, y = queue.popleft()<br>        <span class="hljs-comment"># 对于每个相邻的点，都进行一次判断</span><br>        <span class="hljs-keyword">for</span> deltax, deltay <span class="hljs-keyword">in</span> [(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)]:<br>            xx, yy = x + deltax, y + deltay<br>            <span class="hljs-comment"># 未越界、未标记、非障碍物</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= xx &lt; n  <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= yy &lt; m <span class="hljs-keyword">and</span> g[xx][yy] != <span class="hljs-string">&quot;#&quot;</span> <span class="hljs-keyword">and</span> vis[xx][yy] == <span class="hljs-number">0</span>:<br>                queue.append([xx, yy])<br>                dist[xx][yy] = dist[x][y] + <span class="hljs-number">1</span><br>                vis[xx][yy] = <span class="hljs-number">1</span><br><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>A, B, C, D = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>A, B, C, D = A-<span class="hljs-number">1</span>, B-<span class="hljs-number">1</span>, C-<span class="hljs-number">1</span>, D-<span class="hljs-number">1</span><br><span class="hljs-comment"># 输入图</span><br>g = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>E = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-comment"># dist1[i][j]表示起点到(i, j)的最短时间</span><br>dist1 = [[INF] * m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]  <span class="hljs-comment"># INF无穷大</span><br><span class="hljs-comment"># dist2[i][j]表示终点到(i, j)的最短时间</span><br>dist2 = [[INF] * m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>BFS(A, B, dist1)  <span class="hljs-comment"># 起点做一遍</span><br>BFS(C, D, dist2)  <span class="hljs-comment"># 终点做一遍</span><br><span class="hljs-comment"># 判断能否直接走到终点</span><br>res = dist1[C][D]<br><span class="hljs-keyword">if</span> res &lt;= E:<br>    <span class="hljs-built_in">print</span>(res)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># 枚举所有的圣泉</span><br>    res = INF<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-comment"># 能量E不可小于0，可以等于0</span><br>            <span class="hljs-keyword">if</span> g[i][j] == <span class="hljs-string">&#x27;V&#x27;</span> <span class="hljs-keyword">and</span> dist1[i][j] &lt;= E:  <span class="hljs-comment"># 不需要经过多个圣泉</span><br>                res = <span class="hljs-built_in">min</span>(dist1[i][j] + dist2[i][j], res)<br>    <span class="hljs-comment"># 如果走不到圣泉</span><br>    <span class="hljs-keyword">if</span> res == INF:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># 初始能量为E，总共距离为res，相当于，后面的res-E需要花费两倍时间，因为需要等待能量恢复</span><br>        <span class="hljs-built_in">print</span>((res - E) * <span class="hljs-number">2</span> + E)<br></code></pre></td></tr></table></figure><h2 id="拓扑排序"><a href="#拓扑排序" class="headerlink" title="拓扑排序"></a>拓扑排序</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125845566.png" alt="image-20240526125845566"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125853909.png" alt="image-20240526125853909"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125908891.png" alt="image-20240526125908891"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125916425.png" alt="image-20240526125916425"></p><h4 id="模板题——走多远"><a href="#模板题——走多远" class="headerlink" title="模板题——走多远"></a>模板题——<a href="https://www.lanqiao.cn/problems/1337/learning">走多远</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><span class="hljs-comment"># INF = 0x3f3f3f3f</span><br><span class="hljs-comment"># 针对有向无环图，在进行拓扑排序时，可以进行状态转移</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">topo</span>():<br>    q = deque()<br>    <span class="hljs-comment"># 1。将入度为0的点加入队列中</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> ru[i] == <span class="hljs-number">0</span>:<br>            q.append(i)<br>    <span class="hljs-comment"># 2. 当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(q) != <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># 2.1 取出队首元素</span><br>        u = q.popleft()<br>        <span class="hljs-comment"># 2.2 对于和u相连的每个点v</span><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-comment"># 从u走到v，说明dp[v]可以从dp[u]+1转移</span><br>            dp[v] = <span class="hljs-built_in">max</span>(dp[v], dp[u] + <span class="hljs-number">1</span>)<br>            <span class="hljs-comment"># 进行动态规划</span><br>            ru[v] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> ru[v] == <span class="hljs-number">0</span>:<br>                q.append(v)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 图的存储——邻接表</span><br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>ru = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append(v)<br>    ru[v] += <span class="hljs-number">1</span><br><span class="hljs-comment"># dp[i]表示走到i的最长路/最大值</span><br>dp = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>topo()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h4 id="模板题——最小字典序排列"><a href="#模板题——最小字典序排列" class="headerlink" title="模板题——最小字典序排列"></a>模板题——<a href="https://www.lanqiao.cn/problems/3351/learning">最小字典序排列</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 3351 最小字典序排列</span><br><span class="hljs-comment"># 拓扑排序+优先队列</span><br><span class="hljs-comment"># 需要字典序最小的拓扑序列，只需要将普通队列转换成优先队列即可</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">topo</span>():<br>    q = PriorityQueue()<br>    <span class="hljs-comment"># 1。将入度为0的点加入队列中</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> ru[i] == <span class="hljs-number">0</span>:<br>            q.put(i) <span class="hljs-comment"># append改为put</span><br>    <span class="hljs-comment"># 2. 当队列非空</span><br>    ans = []<br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty(): <span class="hljs-comment"># 判断优先队列q是否非空</span><br>    <span class="hljs-comment"># while len(q.queue) != 0:</span><br>        <span class="hljs-comment"># 2.1 取出队首元素</span><br>        u = q.get()  <span class="hljs-comment"># popleft改为put</span><br>        ans.append(u)<br>        <span class="hljs-comment"># 2.2 对于和u相连的每个点v</span><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-comment"># 进行动态规划</span><br>            ru[v] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> ru[v] == <span class="hljs-number">0</span>:<br>                q.put(v)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(ans) != n:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(*ans, sep = <span class="hljs-string">&#x27; &#x27;</span>)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 图的存储——邻接表</span><br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>ru = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append(v)<br>    ru[v] += <span class="hljs-number">1</span><br>topo()<br></code></pre></td></tr></table></figure><h2 id="最短路"><a href="#最短路" class="headerlink" title="最短路"></a>最短路</h2><h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526130244161.png" alt="image-20240526130244161"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526130253653.png" alt="image-20240526130253653"></p><h4 id="模板题——-蓝桥公园"><a href="#模板题——-蓝桥公园" class="headerlink" title="模板题—— 蓝桥公园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1121/learning"> 蓝桥公园</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span>=sys.stdin.readline<br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e18</span>)<br>dp=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  dp[i][i]=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br><span class="hljs-comment">#Floyd 模板</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> dp[i][j]==inf:<br>        dp[i][j]=-<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  s,e=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-built_in">print</span>(dp[s][e])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># Floyd 算法  多个起点--多个终点  多源最短路算法（多对多）</span><br><span class="hljs-comment"># 最简单的最短路径算法</span><br><span class="hljs-comment"># 存图:最简单的矩阵存图</span><br><span class="hljs-comment"># 效率不高，不能用于大图</span><br><br><span class="hljs-comment"># 动态规划：求图上两点i,j之间的最短距离，按‘从小图到全图’的步骤，在逐步扩大图的过程中计算和更新最短路</span><br><span class="hljs-comment"># 定义状态：dp[k][i][j]: i,j,k是点的编号，范围1--n</span><br><span class="hljs-comment"># 状态dp[k][i][j]表示在包含1--k点的子图上，点对i,j之间的最短路</span><br><span class="hljs-comment"># 状态转移方程 从子图1-k-1 扩展到子图 1-k</span><br><span class="hljs-comment"># dp[k][i][j]=min(dp[k-1][i][j],dp[k-1][i][k]+dp[k-1][k][j])</span><br><span class="hljs-comment"># 初始值：i,j直连 就是他们的边长； 若不直连，赋值为无穷大 / 0x3f3f3f3f3f3f3f3f</span><br><span class="hljs-comment"># 滚动数组优化：dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment">#                           不经过k     经过k</span><br><span class="hljs-comment"># for k in range(1,n+1):</span><br><span class="hljs-comment"># for i in range(1,n+1):</span><br><span class="hljs-comment"># for j in range(1,n+1):</span><br><span class="hljs-comment"># dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment"># 只能用于n&lt;300 的小规模图</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">floyd</span>():<br>    <span class="hljs-keyword">global</span> dp<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><span class="hljs-comment"># 蓝桥公园</span><br><span class="hljs-comment"># n个点 m条边 q次查询</span><br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span><br>dp=[[INF <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)]<br><span class="hljs-comment"># 记录路径</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>    u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br>floyd()<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    start,end=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-comment"># 无法到达</span><br>    <span class="hljs-keyword">if</span> dp[start][end]==INF:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 起点终点相同</span><br>    <span class="hljs-keyword">elif</span> start==end:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(dp[start][end])<br><br><span class="hljs-comment"># 1-12</span><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N, M, Q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>weight = [[<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> i == j <span class="hljs-keyword">else</span> sys.maxsize <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>) ] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 领接矩阵</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(M):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    weight[u][v] = <span class="hljs-built_in">min</span>(weight[u][v], w)<br>    weight[v][u] = weight[u][v]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># N次递推</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># 更新最小值</span><br>                weight[i][j] = <span class="hljs-built_in">min</span>(weight[i][j], weight[i][k] + weight[k][j])<br>                weight[j][i] = weight[i][j]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Q):<br>    st, ed = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    t = weight[st][ed]<br>    <span class="hljs-keyword">if</span> t == sys.maxsize:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(t)<br></code></pre></td></tr></table></figure><h4 id="模板题——城市间的交易"><a href="#模板题——城市间的交易" class="headerlink" title="模板题——城市间的交易"></a>模板题——<a href="https://www.lanqiao.cn/problems/8336/learning/">城市间的交易</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 8336 城市间的交易</span><br>INF =<span class="hljs-number">1e18</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 产量、成本和售价</span><br>a, p, s = [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>)<br>f = [[INF] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>g = [[<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    a[i], p[i], s[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 邻接矩阵初始化</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    f[u][v] = f[v][u] = <span class="hljs-built_in">min</span>(f[u][v], w)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    f[i][i] = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># Floyd</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k]+f[k][j])<br><span class="hljs-comment"># g[i][j]表示城市i的物品运输到城市j可得到的利润 = 城市j的售价 - 城市i的成本 - 从i到j的运输成本</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-comment"># 求每个城市的利润</span><br>    cnt = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        g[i][j] = s[j] - p[i] - f[i][j]<br>        cnt = <span class="hljs-built_in">max</span>(cnt, g[i][j])<br>    ans += a[i] * cnt<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>res=[]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  a,p,s=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  res.append((a,p,s))<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e10</span>)<br>path=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  path[u][v]=path[v][u]=<span class="hljs-built_in">min</span>(w,path[u][v])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+n):<br>  path[i][i]=<span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      path[i][j]=<span class="hljs-built_in">min</span>(path[i][j],path[i][k]+path[k][j])<br>re=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  result=<span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> path[i][j]!=inf:<br>       result=<span class="hljs-built_in">max</span>(result,res[j-<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]-res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]-path[i][j]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br>  re+=result<br><span class="hljs-built_in">print</span>(re)<br></code></pre></td></tr></table></figure><h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131011122.png" alt="image-20240526131011122"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131022596.png" alt="image-20240526131022596"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131034522.png" alt="image-20240526131034522"></p><h4 id="模板题——蓝桥王国"><a href="#模板题——蓝桥王国" class="headerlink" title="模板题——蓝桥王国"></a>模板题——<a href="https://www.lanqiao.cn/problems/1122/learning">蓝桥王国</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 1122_蓝桥王国_Dijkstra算法</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue  <span class="hljs-comment"># 导入优先队列</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>INF = <span class="hljs-number">1e18</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-comment"># 返回从s出发到所有点的最短路</span><br>    <span class="hljs-comment"># d[i]表示从s到i的最短路</span><br>    d = [INF] * (n + <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># vis[i]表示是否出队列（注：与传统BFS不同）</span><br>    vis = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    q = PriorityQueue()<br><br>    <span class="hljs-comment"># 1.将起点入队列，更新距离</span><br>    d[s] = <span class="hljs-number">0</span><br>    <span class="hljs-comment"># 将距离放在前面，才能对距离使用优先队列</span><br>    q.put((d[s], s))  <span class="hljs-comment"># 入队用put()</span><br>    <span class="hljs-comment"># 当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():  <span class="hljs-comment"># 或者写为： while len(q.queue) != 0:</span><br>        dis, u = q.get()<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[u]: <span class="hljs-keyword">continue</span><br>        vis[u] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-comment"># 对于从u出发，到达v，权重为w的边</span><br>        <span class="hljs-keyword">for</span> v, w <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-keyword">if</span> d[v] &gt; d[u] + w:<br>                d[v] = d[u] + w<br>                q.put((d[v], v))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> d[i] == INF:<br>            d[i] = -<span class="hljs-number">1</span><br>    <span class="hljs-comment"># d.pop(0)</span><br>    <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>::] <span class="hljs-comment"># 从1到最后</span><br><br><br><span class="hljs-comment"># 皇宫编号为1</span><br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 图的存储：邻接表。此题N为10^5，不能用邻接矩阵存图</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append((v, w))<br><span class="hljs-built_in">print</span>(*dijkstra(<span class="hljs-number">1</span>)) <span class="hljs-comment"># 列表前面加星号作用是将列表解开（unpacke）成多个独立的参数，传入函数。</span><br></code></pre></td></tr></table></figure><h4 id="模板题——混境之地3"><a href="#模板题——混境之地3" class="headerlink" title="模板题——混境之地3"></a>模板题——<a href="https://www.lanqiao.cn/problems/3818/learning">混境之地3</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 3818 混境之地  Dijkstra</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><span class="hljs-comment"># 数据较大时可以进行如下优化</span><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span> = sys.stdin.readline<br>INF = <span class="hljs-number">1e18</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">c</span>):<br>    <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;.&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        s = <span class="hljs-string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> c == s[i]:<br>                <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span><br>        <span class="hljs-comment"># return ord(c) - ord(&#x27;A&#x27;) + 1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>():<br>    d = [[INF] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    vis = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    q = PriorityQueue()  <span class="hljs-comment"># 创建优先队列</span><br>    <span class="hljs-comment"># 1.将起点塞入队列</span><br>    d[x1][y1] = <span class="hljs-number">0</span><br>    q.put((d[x1][y1], x1, y1))<br>    <span class="hljs-comment"># 2.当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():<br>        dis, x, y = q.get()<br>        <span class="hljs-keyword">if</span> x == x2 <span class="hljs-keyword">and</span> y == y2:<br>            <span class="hljs-keyword">return</span> dis<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[x][y]:<br>            <span class="hljs-keyword">continue</span><br>        vis[x][y] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-keyword">for</span> d elta_x, delta_y <span class="hljs-keyword">in</span> [[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]]:<br>            xx, yy = x + delta_x, y + delta_y<br>            <span class="hljs-comment"># 判断未越界、未标记、非障碍物</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= xx &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= yy &lt; m <span class="hljs-keyword">and</span> vis[xx][yy] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Map[xx][yy] != <span class="hljs-string">&quot;#&quot;</span>:<br>                <span class="hljs-keyword">if</span> d[xx][yy] &gt; d[x][y] + get(Map[xx][yy]):  <span class="hljs-comment"># 写一个get函数获取权重</span><br>                    d[xx][yy] = d[x][y] + get(Map[xx][yy])<br>                    q.put((d[xx][yy], xx, yy))<br>    <span class="hljs-keyword">return</span> INF<br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 地图大小</span><br>x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 起始点坐标</span><br>x1, y1, x2, y2 = x1 - <span class="hljs-number">1</span>, y1 - <span class="hljs-number">1</span>, x2 - <span class="hljs-number">1</span>, y2 - <span class="hljs-number">1</span><br><span class="hljs-comment"># 地图</span><br>Map = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>e = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <span class="hljs-comment"># 剩余能量</span><br><span class="hljs-comment"># 如果能量支撑到达终点，返回Yes，否则，返回No.</span><br><span class="hljs-keyword">if</span> e &gt;= dijkstra():  <span class="hljs-comment"># 不传参，使用全局变量</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Yes&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="生成树"><a href="#生成树" class="headerlink" title="生成树"></a>生成树</h2><h3 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131621641.png" alt="image-20240526131621641"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131631028.png" alt="image-20240526131631028"></p><h4 id="模板题——繁忙的都市"><a href="#模板题——繁忙的都市" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kruskal</span>():<br>    <span class="hljs-comment"># 初始化</span><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = []<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        Map.append([w, u, v])  <span class="hljs-comment"># 注意第一个参数是边权</span><br>    Map.sort()<br><br>    <span class="hljs-comment"># 并查集</span><br>    p = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">if</span> x != p[x]:<br>            p[x] = root(p[x])<br>        <span class="hljs-keyword">return</span> p[x]<br><br>    <span class="hljs-comment"># 非连环时更新</span><br>    _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span> = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> w, u, v <span class="hljs-keyword">in</span> Map:<br>        root_u = root(u)<br>        root_v = root(v)<br>        <span class="hljs-keyword">if</span> root_u != root_v:<br>            p[root_u] = root_v<br>            _<span class="hljs-built_in">sum</span> += <span class="hljs-number">1</span><br>            _<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span>(_<span class="hljs-built_in">max</span>, w)<br>    <span class="hljs-keyword">return</span> _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span><br><span class="hljs-built_in">print</span>(*kruskal())<br></code></pre></td></tr></table></figure><h3 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131818064.png" alt="image-20240526131818064"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131825567.png" alt="image-20240526131825567"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131840546.png" alt="image-20240526131840546"></p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131848626.png" alt="image-20240526131848626"></p><h4 id="模板题——繁忙的都市-1"><a href="#模板题——繁忙的都市-1" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>e=[]<br><span class="hljs-keyword">for</span>  _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  e.append((w,u,v))<br><span class="hljs-comment">#边按照权重进行排序</span><br>e.sort()<br><span class="hljs-comment">#需要一个并查集</span><br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">findroot</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>  <span class="hljs-keyword">else</span>:<br>    p[x]=findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br>ans=<span class="hljs-number">0</span><br><span class="hljs-comment">#进行遍历所有的边，进行合并：</span><br><span class="hljs-keyword">for</span> w,u,v <span class="hljs-keyword">in</span> e:<br>  <span class="hljs-comment">#只要u和v不在同一集合内就可以进行合并：</span><br>  rootu=findroot(u)<br>  rootv=findroot(v)<br>  <span class="hljs-keyword">if</span> rootu!=rootv:<br>    p[rootu]=rootv<br>    ans=<span class="hljs-built_in">max</span>(ans,w)<br><span class="hljs-built_in">print</span>(n-<span class="hljs-number">1</span>,ans)<br></code></pre></td></tr></table></figure><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132045604.png" alt="image-20240526132045604"></p>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥国赛</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BookShop说明文档</title>
    <link href="/2024/05/22/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/"/>
    <url>/2024/05/22/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="zdx-BookShop"><a href="#zdx-BookShop" class="headerlink" title="zdx-BookShop"></a>zdx-BookShop</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>ASP.NET应用系统设计与开发实战项目BookShop，完整项目在BookShop目录下</p><h2 id="项目演示"><a href="#项目演示" class="headerlink" title="项目演示"></a>项目演示</h2><h3 id="当当网上书店首页"><a href="#当当网上书店首页" class="headerlink" title="当当网上书店首页"></a>当当网上书店首页</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522141242224-1716370269691-1.png" alt="image-20240522141242224"></p><h3 id="当当网图书分类显示"><a href="#当当网图书分类显示" class="headerlink" title="当当网图书分类显示"></a>当当网图书分类显示</h3><h4 id="按照图书分类"><a href="#按照图书分类" class="headerlink" title="按照图书分类"></a>按照图书分类</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145038514.png" alt="image-20240522145038514"></p><h4 id="按照出版品牌商"><a href="#按照出版品牌商" class="headerlink" title="按照出版品牌商"></a>按照出版品牌商</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145159148.png" alt="image-20240522145159148"></p><h3 id="当当网图书详情页"><a href="#当当网图书详情页" class="headerlink" title="当当网图书详情页"></a>当当网图书详情页</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174033577.png" alt="image-20240517174033577"></p><h3 id="当当网新增订单演示"><a href="#当当网新增订单演示" class="headerlink" title="当当网新增订单演示"></a>当当网新增订单演示</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145321335.png" alt="image-20240522145321335"><br><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145345736-1716370269692-2.png" alt="image-20240522145345736"><br><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145651681-1716370269692-3.png" alt="image-20240522145651681"><br><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145707070-1716370269692-4.png" alt="image-20240522145707070"></p><h3 id="当当网用户登录"><a href="#当当网用户登录" class="headerlink" title="当当网用户登录"></a>当当网用户登录</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174110277-1716370269692-5.png" alt="image-20240517174110277"></p><h3 id="当当网个人信息"><a href="#当当网个人信息" class="headerlink" title="当当网个人信息"></a>当当网个人信息</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174213598-1716370269692-6.png" alt="image-20240517174213598"></p><h3 id="当当网购物车"><a href="#当当网购物车" class="headerlink" title="当当网购物车"></a>当当网购物车</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174250589-1716370269692-7.png" alt="image-20240517174250589"></p><h3 id="搜索功能演示"><a href="#搜索功能演示" class="headerlink" title="搜索功能演示"></a>搜索功能演示</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174350714.png" alt="image-20240517174350714"></p><h3 id="后台管理系统用户登录"><a href="#后台管理系统用户登录" class="headerlink" title="后台管理系统用户登录"></a>后台管理系统用户登录</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173310694-1716370269692-21.png" alt="image-20240517173310694"></p><h3 id="管理员用户管理"><a href="#管理员用户管理" class="headerlink" title="管理员用户管理"></a>管理员用户管理</h3><h4 id="用户信息查询"><a href="#用户信息查询" class="headerlink" title="用户信息查询"></a>用户信息查询</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173504064-1716370269692-8.png" alt="image-20240517173504064"></p><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173549044-1716370269692-9.png" alt="image-20240517173549044"></p><h4 id="后端新增用户"><a href="#后端新增用户" class="headerlink" title="后端新增用户"></a>后端新增用户</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150356339-1716370269692-10.png" alt="image-20240522150356339"></p><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150526547-1716370269692-11.png" alt="image-20240522150526547"></p><h3 id="管理员图书分类管理"><a href="#管理员图书分类管理" class="headerlink" title="管理员图书分类管理"></a>管理员图书分类管理</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173639044-1716370269692-12.png" alt="image-20240517173639044"></p><h3 id="管理员出版社管理"><a href="#管理员出版社管理" class="headerlink" title="管理员出版社管理"></a>管理员出版社管理</h3><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173728364-1716370269692-13.png" alt="image-20240517173728364"></p><h3 id="管理员图书管理"><a href="#管理员图书管理" class="headerlink" title="管理员图书管理"></a>管理员图书管理</h3><h4 id="图书分类查询"><a href="#图书分类查询" class="headerlink" title="图书分类查询"></a>图书分类查询</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173804161-1716370269692-14.png" alt="image-20240517173804161"></p><h4 id="添加图书信息"><a href="#添加图书信息" class="headerlink" title="添加图书信息"></a>添加图书信息</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150125276-1716370269692-16.png" alt="image-20240522150125276"></p><h4 id="修改图书信息"><a href="#修改图书信息" class="headerlink" title="修改图书信息"></a>修改图书信息</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145943193-1716370269692-15.png" alt="image-20240522145943193"></p><h3 id="管理员订单管理"><a href="#管理员订单管理" class="headerlink" title="管理员订单管理"></a>管理员订单管理</h3><h4 id="订单管理列表"><a href="#订单管理列表" class="headerlink" title="订单管理列表"></a>订单管理列表</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173834433-1716370269692-17.png" alt="image-20240517173834433"></p><h4 id="订单详细信息"><a href="#订单详细信息" class="headerlink" title="订单详细信息"></a>订单详细信息</h4><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150240729-1716370269692-18.png" alt="image-20240522150240729"></p><h2 id="项目特点"><a href="#项目特点" class="headerlink" title="项目特点"></a>项目特点</h2><h4 id="使用Common类库统一管理DBHelper"><a href="#使用Common类库统一管理DBHelper" class="headerlink" title="使用Common类库统一管理DBHelper"></a>使用Common类库统一管理DBHelper</h4><p>具体内容请参考项目对应代码，此处举例</p><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160917117-1716370269692-19.png" alt="image-20240522160917117"></p><h4 id="采用MD5加密用户密码信息"><a href="#采用MD5加密用户密码信息" class="headerlink" title="采用MD5加密用户密码信息"></a>采用MD5加密用户密码信息</h4><p>可以有效防止数据库泄露用户密码信息泄露的情况</p><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160655322-1716370269692-20.png" alt="image-20240522160655322"></p><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160732222-1716370269692-22.png" alt="image-20240522160732222"></p><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160615465-1716370269692-23.png" alt="image-20240522160615465"></p><h2 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h2><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><ul><li><p>BookShop.WebUI：ASP.NET MVC Web应用程序项目，包含视图、控制器、路由等。</p></li><li><p>BookShop.Common：包含通用工具和辅助类的类库项目，用于数据访问层（DAL）和其他服务。</p></li><li><p>BookShop.DAL：数据访问层（DAL）类库项目，包含数据访问逻辑和接口。</p></li><li><p>BookShop.Model：包含数据模型（如书籍、作者、类别等）的类库项目。</p></li><li><p>BookShop.BLL：业务逻辑层（BLL）类库项目，包含业务规则和服务。</p></li></ul><p><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160151327-1716370269692-24.png" alt="image-20240522160151327"></p><h3 id="Common类库"><a href="#Common类库" class="headerlink" title="Common类库"></a>Common类库</h3><ul><li>数据库连接字符串管理：在Common类库中，可以定义一个配置管理器类，用于从配置文件（如web.config或appsettings.json）中读取和解析数据库连接字符串。</li><li>数据库提供程序工厂：创建一个数据库提供程序工厂类，该类能够根据配置的连接字符串类型（如SQL Server、MySQL等）创建和返回相应的数据库上下文或连接对象。</li></ul><h3 id="数据访问层（DAL）"><a href="#数据访问层（DAL）" class="headerlink" title="数据访问层（DAL）"></a>数据访问层（DAL）</h3><ul><li>接口定义：在BookShop.Data项目中，为每种数据模型定义接口（如IBookRepository、IAuthorRepository等），这些接口包含CRUD（创建、读取、更新、删除）操作的方法。</li><li>实现类：为每个接口创建实现类（如SqlBookRepository、MySqlBookRepository等），这些类将使用Common类库中的数据库提供程序工厂来建立与数据库的连接并执行操作。</li></ul><h3 id="MySQL数据源处理"><a href="#MySQL数据源处理" class="headerlink" title="MySQL数据源处理"></a>MySQL数据源处理</h3><ul><li><p>在Common里面配置符合MySql的DBHelper</p></li><li><p>MySQL连接字符串：在web.config配置文件中添加MySQL数据库的连接字符串。</p></li><li><p>MySQL提供程序：在Common类库中实现或集成MySQL数据库提供程序（如使用MySQL Connector&#x2F;NET）。</p></li></ul><h3 id="业务逻辑层（BLL）"><a href="#业务逻辑层（BLL）" class="headerlink" title="业务逻辑层（BLL）"></a>业务逻辑层（BLL）</h3><ul><li>服务类：在BookShop.BLL项目中，创建服务类（如BookService、AuthorService等），这些类将调用数据访问层中的接口来执行业务逻辑。服务类应该是无状态的，并且只应包含与业务逻辑相关的代码。</li></ul><h3 id="控制器和视图"><a href="#控制器和视图" class="headerlink" title="控制器和视图"></a>控制器和视图</h3><ul><li>控制器：在BookShop.WebUI项目中，创建MVC控制器，这些控制器将调用业务逻辑层中的服务类来处理请求并返回数据。</li><li>视图：创建MVC视图来显示数据并允许用户与应用程序进行交互。视图应该只包含与显示相关的代码，并且应该通过控制器来与业务逻辑层进行通信。</li></ul><h2 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h2><ol><li>拉取项目</li><li>运行安装BookShop&#x2F;mysql-connection-net文件夹中的文件，并添加引用</li><li>添加mybookshop数据库，运行mysql脚本</li><li>清理并重新生成解决方案</li><li>运行项目</li></ol><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><ol><li><p>本项目使用.net4.5.2，可以向上兼容</p></li><li><p>在项目运行前请安装BookShop&#x2F;mysql-connection-net文件夹中的文件，并添加引用</p></li><li><p>测试账号信息如下：</p><table><thead><tr><th align="center">测试账号</th><th align="center">测试用户类型</th><th align="center">密码</th></tr></thead><tbody><tr><td align="center">admin</td><td align="center">管理员</td><td align="center">123456</td></tr><tr><td align="center">jingjing</td><td align="center">普通用户</td><td align="center">jingjing</td></tr><tr><td align="center">bobo</td><td align="center">VIP用户</td><td align="center">123456</td></tr></tbody></table></li></ol>]]></content>
    
    
    <categories>
      
      <category>ASP.NET学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ASP.NET</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>树形动态规划问题解析&amp;树上背包问题研究</title>
    <link href="/2024/05/06/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/"/>
    <url>/2024/05/06/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="1-树上DP概述"><a href="#1-树上DP概述" class="headerlink" title="1. 树上DP概述"></a>1. 树上DP概述</h2><p>树形 DP，即在树上进行的 DP。由于树固有的递归性质，树形 DP 一般都是递归进行的。</p><p>大部分的树形 DP 都是线性的，并且由于树本身就是有序的，所以具有十分良好的性质，例如子结构性质等。</p><p>树形 DP 在算法竞赛中考察多样，但是简单的可以分为：</p><ol><li>树上线性 DP。</li><li>换根 DP。</li></ol><p>树上线性 DP 也分为很多种，不同的题有不同的考法，实际上，所有的 DP 都能在树上考，但是蓝桥比赛中，一般就几种考法：</p><ol><li>树上决策，例如选最大值，最小值。</li><li>树上背包。</li><li>换根，换根 dp 是树上的一类特殊性质。</li></ol><p>接下来，我们将通过几个问题来描述这三种问题的解法。</p><h2 id="2-树上决策问题"><a href="#2-树上决策问题" class="headerlink" title="2. 树上决策问题"></a>2. 树上决策问题</h2><p>树上决策问题，往往是子节点向父节点转移时，只取最优的解，这一点与线性 DP 十分相似。</p><p>看一道例题：</p><h3 id="2-1-生命之树-真题"><a href="#2-1-生命之树-真题" class="headerlink" title="2. 1 生命之树-真题"></a>2. 1 <a href="https://www.lanqiao.cn/problems/131/learning/">生命之树-真题</a></h3><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713417459185.png" alt="图片描述"></p><p>这题看着挺玄乎，其实并没有那么复杂。</p><p>我们观察题目要求：给定一棵树，选出一个非空集合，使得对于任意两个元素 $a, b$，都存在一个序列 $a, v_1, …v_k, b$ 是这个集合里的元素，并且相邻两个点之间有一条边。</p><p>本来可以一句话说清楚的事情，但是偏偏要给出数学定义，所以要考察大家的归纳整理能力。</p><p>实际上，就是要在树中选出一个连通块即可，并且满足连通块的和值最大。</p><p>为什么呢？</p><p>我们观察一幅图，相信大家能理解了：</p><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713419773909.png" alt="图片描述"></p><p>绿色的代表我们选择的点集合。这些点是连通的，所以满足要求。</p><p>如果换成这个样子：</p><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713419870334.png" alt="图片描述"></p><p>这样就不满足题目要求了。</p><p>所以大家可以体会出来，题目的要求，其实就是找一个树上的连通块。</p><p>那么我们的问题就变成了在树上找最大的连通块了。</p><p>树形 DP，终究还是 DP，所以需要划分子问题。</p><p>我们常用的方法是，<strong>将子节点为根的子树，看成子问题，然后合并到当前根</strong>。</p><p>将节点从深到浅（子树从小到大）的顺序作为 DP 的阶段，在 DP 的表示中，通常第一维代表节点的编号，后续维度按照问题进行设计。</p><p>首先我们需要解决一个问题，树上的连通块是什么？有什么性质可以利用。</p><p>答案是：树上的联通块也是树，他一定有根。所以我们要是找到这个根，或者枚举这个根，就可以找到答案。</p><p>我们设计的状态如下：</p><p>$dp_i$ 表示，对于节点为 $i$ 的子树，我们找到的以 $i$ 为根的连通块和值最大是 $dp_i$。</p><p>那么我们的转移的意义就是：对于 $i$ 来说，由于 $i$ 一定存在连通块中，所以，我们要找到他的儿子中，哪些是和 $i$ 连着的。</p><p>有一种贪心方案，对于 $i$ 的儿子 $v \in son(i)$ ，如果 $dp_v \ge 0$，我们就将他接入父亲即可。</p><p>所以，我们的转移方程就是： $$ dp_i &#x3D; w_i + \sum _{dp_j \ge 0 &amp; j \in son(i)} dp_j $$ 代码如下：</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span> using namespace std; const int N = 1e5+100; typedef long long ll; vector<span class="hljs-string">&lt;int&gt;</span> G[N]; int w[N]; ll dp[N], ans = -1e18; int n; void dfs(int u, int f) &#123; dp[u] = w[u]; for (int v : G[u]) &#123; <span class="hljs-keyword">if</span> (v == f) continue; dfs(v, u); <span class="hljs-keyword">if</span> (dp[v] &gt; 0) &#123; dp[u] += dp[v]; &#125; &#125; ans = max(ans, dp[u]); &#125; int main() &#123; cin &gt;&gt; n; for (int i = 1; i <span class="hljs-string">&lt;= n; ++i) &#123; cin &gt;</span>&gt; w[i]; &#125; int u, v; for (int i = 1; i <span class="hljs-string">&lt; n; ++i) &#123; cin &gt;</span>&gt; u &gt;&gt; v; G[u].push_back(v); G[v].push_back(u); &#125; dfs(1, 0); cout &lt;&lt; ans &lt;&lt; endl; return 0; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (<span class="hljs-number">1e5</span> + <span class="hljs-number">100</span>); <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] dp; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] w; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;List&lt;Integer&gt;&gt; G; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> Long.MIN_VALUE; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> f)</span> &#123; dp[u] = w[u]; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : G.get(u)) &#123; <span class="hljs-keyword">if</span> (v == f) <span class="hljs-keyword">continue</span>; dfs(v, u); <span class="hljs-keyword">if</span> (dp[v] &gt; <span class="hljs-number">0</span>) &#123; dp[u] += dp[v]; &#125; &#125; ans = Math.max(ans, dp[u]); &#125; <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123; <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in); n = scanner.nextInt(); w = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N]; G = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; N; i++) &#123; G.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;()); &#125; dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N]; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123; w[i] = scanner.nextInt(); &#125; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) &#123; <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> scanner.nextInt() - <span class="hljs-number">1</span>; <span class="hljs-comment">// 0-indexed in Java int v = scanner.nextInt() - 1; G.get(u).add(v); G.get(v).add(u); &#125; dfs(0, -1); System.out.println(ans); scanner.close(); &#125; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys sys.setrecursionlimit(<span class="hljs-number">100000</span>) n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()) aList = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()] tree = [[]<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] ans = <span class="hljs-number">0</span> dp = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>): m, n =<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) tree[m].append(n) tree[n].append(m) <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u,f</span>): <span class="hljs-keyword">global</span> ans dp[u] = aList[u] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tree[u]: <span class="hljs-keyword">if</span> i !=f: dp[i] = dfs(i, u) <span class="hljs-keyword">if</span> dp[i]&gt;<span class="hljs-number">0</span>: dp[u] += dp[i] ans=<span class="hljs-built_in">max</span>(ans, dp[u]) <span class="hljs-keyword">return</span> dp[u] dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>) <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="3-树上背包问题"><a href="#3-树上背包问题" class="headerlink" title="3. 树上背包问题"></a>3. 树上背包问题</h2><p>树上背包问题，本质上还是背包，可以看成在树上进行的背包。</p><p>每次转移都是在父亲与儿子之间进行了一次经典背包转移。</p><h3 id="3-1-小明的背包6"><a href="#3-1-小明的背包6" class="headerlink" title="3.1 小明的背包6"></a>3.1 <a href="https://www.lanqiao.cn/problems/131/learning/">小明的背包6</a></h3><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713421022535.png" alt="图片描述"></p><p>这个是典型的依赖背包问题。</p><p>并且依赖关系构成了一棵树。</p><p>我们看样例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>6 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>4 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>9<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713421190949.png" alt="图片描述"></p><p>依赖关系如上图所示：上图的含义是如果只有购买了 $1$ 号物品，才能购买 $2, 3, 4$ 号物品。</p><p>记住，我们的目标是划分子问题，也就是说，只要保证了一个子问题的划分是正确的，那么由于树的优良递归性质，其他的也会是正确的。</p><p>复习一下普通的背包问题，用 $dp_i$ 表示，在使用了 $i$ 空间的情况下的最大价值。</p><p>但是在树问题中，由于第一维度是节点的编号，所以我们用 $dp_{i,j}$ 表示对于 $i$ 子树来说，使用了 $j$ 空间的最大价值。</p><p>当然题目中有要求，必须满足依赖关系，所以，我们需要重新定义： $dp_{i,j}$ 表示对于 $i$ 子树来说，使用了 $j$ 空间且满足依赖关系的最大价值。</p><p>如何满足呢？</p><p>我们只需要保证每一个 $dp_{i,j}$ 都选了 $i$ 节点即可。</p><p>我们可以在背包中预留出节点 $i$ 的空间即可。</p><p>代码如下：</p><ul><li>C ++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span> using namespace std; const int N = 1e2+20; vector<span class="hljs-string">&lt;int&gt;</span> G[N]; int n, V; int v[N], w[N]; int dp[N][N]; void dfs(int u) &#123; for (int i = v[u]; i <span class="hljs-string">&lt;= V; ++i) dp[u][i] = w[u]; for (int i : G[u]) &#123; dfs(i); for (int j = V; j &gt;</span>= v[u] + v[i]; --j) &#123; for (int k = v[i]; k <span class="hljs-string">&lt;= j - v[u]; ++k) // 剩余的空间 dp[u][j] = max(dp[u][j - k] + dp[i][k], dp[u][j]); &#125; &#125; &#125; int main() &#123; cin &gt;</span>&gt; n &gt;&gt; V; int s; for (int i = 1; i <span class="hljs-string">&lt;= n; ++i) &#123; cin &gt;</span>&gt; v[i] &gt;&gt; w[i] &gt;&gt; s; G[s].push_back(i); &#125; dfs(0); cout &lt;&lt; dp[0][V] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList; <span class="hljs-keyword">import</span> java.util.List; <span class="hljs-keyword">import</span> java.util.Scanner; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> V; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] dp; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;List&lt;Integer&gt;&gt; G; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] v; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] w; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span> &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> v[u]; i &lt;= V; ++i) &#123; dp[u][i] = w[u]; &#125; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> child : G.get(u)) &#123; dfs(child); <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> V; j &gt;= v[u] + v[child]; --j) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> v[child]; k &lt;= j - v[u]; ++k) &#123; dp[u][j] = Math.max(dp[u][j - k] + dp[child][k], dp[u][j]); &#125; &#125; &#125; &#125; <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123; <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in); <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt(); V = scanner.nextInt(); G = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; ++i) &#123; G.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;()); &#125; v = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>]; w = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>]; dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>][V + <span class="hljs-number">1</span>]; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123; v[i] = scanner.nextInt(); w[i] = scanner.nextInt(); <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> scanner.nextInt(); G.get(s).add(i); &#125; dfs(<span class="hljs-number">0</span>); System.out.println(dp[<span class="hljs-number">0</span>][V]); scanner.close(); &#125; &#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>: <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">self, u, dp, G, v, w, V</span>): <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v[u], V + <span class="hljs-number">1</span>): dp[u][i] = w[u] <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> G[u]: self.dfs(child, dp, G, v, w, V) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V, v[u] + v[child] - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v[child], j - v[u] + <span class="hljs-number">1</span>): dp[u][j] = <span class="hljs-built_in">max</span>(dp[u][j - k] + dp[child][k], dp[u][j]) <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">self</span>): n, V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) G = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)] <span class="hljs-comment"># 0-indexed in Python v = [0] * (n + 1) w = [0] * (n + 1) for i in range(1, n + 1): v[i], w[i], s = map(int, input().split()) G[s].append(i) dp = [[0] * (V + 1) for _ in range(n + 1)] self.dfs(0, dp, G, v, w, V) print(dp[0][V]) # Run the main function solution = Solution() solution.main()</span><br></code></pre></td></tr></table></figure><h2 id="4-换根-DP-问题"><a href="#4-换根-DP-问题" class="headerlink" title="4. 换根 DP 问题"></a>4. 换根 DP 问题</h2><p>换根 DP，面对的问题通常是“不定根”问题，也就是说，对于一棵树，他的根不一定是 $1$ 号点，可能是任意某个点。</p><p>或者在某些问题中，我们需要尝试计算以每个点为根的情况，最后维护出最大值。</p><p>我们先看一副图，来理解所谓的“换根”。</p><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713424406656.png" alt="图片描述"></p><p>我们将原来以 $1$ 为根换成了以 $2$ 为根。那么树的形态也就发生了变化。</p><p>如果每次都是选择一个点作为根进行处理，那么总的时间复杂度为 $O(n^2)$，但是如果我们能发现性质，我们可以将复杂度降为 $O(n)$。</p><p>即换一次根的复杂度为 $O(1)$，下面，我们将讲述这种方法。</p><p>在一般的问题中，我们常常是利用dfs来不断的将根转换为根的子节点。</p><p>我们会发现一些事情：</p><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713424716921.png" alt="图片描述"></p><p>我们一次转换的过程，其实有很大一部分并没有发生变化，体现在 DP 转移中，就是这些点的 DP 值也不会发生改变。</p><p>实际上改变的只有改变身份的两个点，其他的点都不会发生变化。</p><p>在换根的问题中，一般的步骤如下：</p><ol><li>以 $1$ 为根进行一遍扫描，并且处理出必要的信息，例如深度、DP 值等。</li><li>开始以 $1$ 进行换根，并且向下递归，在递归之前，需要将自己变成子节点的身份。</li><li>进入新的根后，按照根的身份，重新进行转移。并且维护答案。</li></ol><h3 id="4-1-卖树"><a href="#4-1-卖树" class="headerlink" title="4.1 卖树"></a>4.1 <a href="https://www.lanqiao.cn/problems/3029/learning/">卖树</a></h3><p><img src="/./../images/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90-%E6%A0%91%E4%B8%8A%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%A0%94%E7%A9%B6/uid1792586-20240418-1713424080194.png" alt="图片描述"></p><p>本题需要计算以每个点为根的情况下，产生的盈利。</p><p>如果我们确定了一个点为根，我们很容易算出答案，如果确定了根，问题就变成了求最大深度，这个问题只需要一遍DFS就可以完成。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> f, <span class="hljs-type">int</span> dt)</span> </span>&#123; <span class="hljs-comment">// 求出以1为根的原始信息 dep[u] = dt; Mdp[u] = 0; // Mdp即为当前点为根的最大深度 for (int v : G[u]) &#123; if (v == f) continue; dfs(v, u, dt + 1); Mdp[u] = max(Mdp[v] + 1, Mdp[u]); &#125; &#125;</span><br></code></pre></td></tr></table></figure><p>因为节点数量太多，我们无法承受 $O(n^2)$ 的复杂度，所以我们需要进行换根，</p><p>基本思想如上述一致：</p><ol><li>我们需要先算出以 $1$ 为根的信息，包括以每个节点为子树的最大深度，从 $1$ 转移到 $i$ 节点的代价。</li><li>我们从 $1$ 号点开始换根，每次只将根的身份换给儿子，然后进入递归，进入之前，我们需要将当前点的身份改为子节点。</li><li>进行新的根，由于原来的转移已经失效，所以需要重新转移。并且维护答案，然后重复2步骤。</li></ol><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span> using namespace std; const int N = 1e5+10; vector<span class="hljs-string">&lt;int&gt;</span> G[N]; int n, k, c; int dep[N], Mdp[N]; typedef long long ll; ll ans = 0; void dfs(int u, int f, int dt) &#123; <span class="hljs-comment">// 求出以1为根的原始信息 dep[u] = dt; Mdp[u] = 0; for (int v : G[u]) &#123; if (v == f) continue; dfs(v, u, dt + 1); Mdp[u] = max(Mdp[v] + 1, Mdp[u]); &#125; &#125; void dfs2(int u, int f) &#123; // 开始换根 /** * 重新转移 */ int tmpf = 0, Mx1 = 0, Mx2 = 0; for (int v : G[u]) &#123; tmpf = max(tmpf, Mdp[v] + 1); &#125; // 维护答案 ans = max(1ll * tmpf * k - 1ll * dep[u] * c, ans); // 根变儿子步骤 int pre = Mdp[u]; for (int v : G[u]) &#123; if (Mdp[v] + 1 &gt; Mx1) &#123; Mx2 = Mx1; Mx1 = Mdp[v] + 1; &#125; else if (Mdp[v] + 1 &gt; Mx2) &#123; Mx2 = Mdp[v] + 1; &#125; &#125; for (int v : G[u]) &#123; if (v == f) continue; // 由于根要变成儿子，所以要改变原来的转移值 if (Mdp[v] + 1 == Mx1) Mdp[u] = Mx2; else Mdp[u] = Mx1; dfs2(v, u); &#125; // 还原原始的值。 Mdp[u] = pre; &#125; void sol() &#123; for (int i = 1; i &lt;= n; ++i) G[i].clear(); ans = 0; cin &gt;&gt; n &gt;&gt; k &gt;&gt; c; int u, v; for (int i = 1; i &lt; n; ++i) &#123; cin &gt;&gt; u &gt;&gt; v; G[u].push_back(v); G[v].push_back(u); &#125; dfs(1, 0, 0); dfs2(1, 0); cout &lt;&lt; ans &lt;&lt; &#x27;\n&#x27;; &#125; int main() &#123; ios::sync_with_stdio(0); int T; cin &gt;&gt; T; while (T --) &#123; sol(); &#125; return 0; &#125;</span></span><br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict <span class="hljs-keyword">import</span> sys sys.setrecursionlimit(<span class="hljs-number">100000</span>) N = <span class="hljs-number">100010</span> G = defaultdict(<span class="hljs-built_in">list</span>) n, k, c = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span> dep = [<span class="hljs-number">0</span>] * N Mdp = [<span class="hljs-number">0</span>] * N ans = <span class="hljs-number">0</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, f, dt</span>): <span class="hljs-comment"># 求出以1为根的原始信息 global dep, Mdp dep[u] = dt Mdp[u] = 0 for v in G[u]: if v == f: continue dfs(v, u, dt + 1) Mdp[u] = max(Mdp[v] + 1, Mdp[u]) def dfs2(u, f): # 开始换根 global ans, dep, Mdp tmpf = 0 Mx1 = 0 Mx2 = 0 # 重新转移 for v in G[u]: tmpf = max(tmpf, Mdp[v] + 1) # 维护答案 ans = max(ans, tmpf * k - dep[u] * c) # 根变儿子步骤 pre = Mdp[u] for v in G[u]: if Mdp[v] + 1 &gt; Mx1: Mx2 = Mx1 Mx1 = Mdp[v] + 1 elif Mdp[v] + 1 &gt; Mx2: Mx2 = Mdp[v] + 1 for v in G[u]: if v == f: continue # 由于根要变成儿子，所以要改变原来的转移值 if Mdp[v] + 1 == Mx1: Mdp[u] = Mx2 else: Mdp[u] = Mx1 dfs2(v, u) # 还原原始的值。 Mdp[u] = pre def sol(): global n, k, c, ans, G, dep, Mdp n, k, c = map(int, input().split()) G.clear() ans = 0 for _ in range(n - 1): u, v = map(int, input().split()) G[u].append(v) G[v].append(u) dfs(1, 0, 0) dfs2(1, 0) print(ans) T = int(input()) for _ in range(T): sol()</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*; <span class="hljs-keyword">import</span> java.io.*; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123; <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">100010</span>; <span class="hljs-keyword">static</span> List&lt;Integer&gt;[] G; <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, k, c; <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] dep, Mdp; <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> ans; <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> f, <span class="hljs-type">int</span> dt)</span> &#123; <span class="hljs-comment">// 求出以1为根的原始信息 Mdp[u] = 0; for (int v : G[u]) &#123; if (v == f) continue; dfs(v, u, dt + 1); Mdp[u] = Math.max(Mdp[v] + 1, Mdp[u]); &#125; &#125; static void dfs2(int u, int f) &#123; // 开始换根 int tmpf = 0, Mx1 = 0, Mx2 = 0; /** * 重新转移 */ for (int v : G[u]) &#123; tmpf = Math.max(tmpf, Mdp[v] + 1); &#125; // 维护答案 ans = Math.max(ans, (long) tmpf * k - (long) dep[u] * c); // 根变儿子步骤 int pre = Mdp[u]; for (int v : G[u]) &#123; if (Mdp[v] + 1 &gt; Mx1) &#123; Mx2 = Mx1; Mx1 = Mdp[v] + 1; &#125; else if (Mdp[v] + 1 &gt; Mx2) &#123; Mx2 = Mdp[v] + 1; &#125; &#125; for (int v : G[u]) &#123; if (v == f) continue; // 由于根要变成儿子，所以要改变原来的转移值 if (Mdp[v] + 1 == Mx1) &#123; Mdp[u] = Mx2; &#125; else &#123; Mdp[u] = Mx1; &#125; dfs2(v, u); &#125; // 还原原始的值。 Mdp[u] = pre; &#125; static void sol(Scanner scanner) &#123; for (int i = 1; i &lt;= n; i++) G[i].clear(); ans = 0; n = scanner.nextInt(); k = scanner.nextInt(); c = scanner.nextInt(); int u, v; for (int i = 1; i &lt; n; i++) &#123; u = scanner.nextInt(); v = scanner.nextInt(); G[u].add(v); G[v].add(u); &#125; dfs(1, 0, 0); dfs2(1, 0); System.out.println(ans); &#125; public static void main(String[] args) &#123; G = new ArrayList[N]; for (int i = 0; i &lt; N; i++) &#123; G[i] = new ArrayList&lt;&gt;(); &#125; dep = new int[N]; Mdp = new int[N]; Scanner scanner = new Scanner(System.in); int T = scanner.nextInt(); while (T-- &gt; 0) &#123; sol(scanner); &#125; &#125; &#125;</span><br></code></pre></td></tr></table></figure><h2 id="5-作业"><a href="#5-作业" class="headerlink" title="5. 作业"></a>5. 作业</h2><table><thead><tr><th>题目</th><th>链接</th></tr></thead><tbody><tr><td>取气球（算法赛）</td><td><a href="https://www.lanqiao.cn/problems/17024/learning/">https://www.lanqiao.cn/problems/17024/learning/</a></td></tr><tr><td>左孩子右兄弟（21 年省赛）</td><td><a href="https://www.lanqiao.cn/problems/1451/learning/">https://www.lanqiao.cn/problems/1451/learning/</a></td></tr></tbody></table>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>状态压缩动态规划的典型题型深入分析</title>
    <link href="/2024/05/06/%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%9A%84%E5%85%B8%E5%9E%8B%E9%A2%98%E5%9E%8B%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/"/>
    <url>/2024/05/06/%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%9A%84%E5%85%B8%E5%9E%8B%E9%A2%98%E5%9E%8B%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h2 id="1-树上DP概述"><a href="#1-树上DP概述" class="headerlink" title="1. 树上DP概述"></a>1. 树上DP概述</h2><p>树形 DP，即在树上进行的 DP。由于树固有的递归性质，树形 DP 一般都是递归进行的。</p><p>大部分的树形 DP 都是线性的，并且由于树本身就是有序的，所以具有十分良好的性质，例如子结构性质等。</p><p>树形 DP 在算法竞赛中考察多样，但是简单的可以分为：</p><ol><li>树上线性 DP。</li><li>换根 DP。</li></ol><p>树上线性 DP 也分为很多种，不同的题有不同的考法，实际上，所有的 DP 都能在树上考，但是蓝桥比赛中，一般就几种考法：</p><ol><li>树上决策，例如选最大值，最小值。</li><li>树上背包。</li><li>换根，换根 dp 是树上的一类特殊性质。</li></ol><p>接下来，我们将通过几个问题来描述这三种问题的解法。</p><h2 id="2-树上决策问题"><a href="#2-树上决策问题" class="headerlink" title="2. 树上决策问题"></a>2. 树上决策问题</h2><p>树上决策问题，往往是子节点向父节点转移时，只取最优的解，这一点与线性 DP 十分相似。</p><p>看一道例题：</p><h3 id="2-1-生命之树-真题"><a href="#2-1-生命之树-真题" class="headerlink" title="2. 1 生命之树-真题"></a>2. 1 <a href="https://www.lanqiao.cn/problems/131/learning/">生命之树-真题</a></h3><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713417459185" alt="图片描述"></p><p>这题看着挺玄乎，其实并没有那么复杂。</p><p>我们观察题目要求：给定一棵树，选出一个非空集合，使得对于任意两个元素 $a, b$，都存在一个序列 $a, v_1, …v_k, b$ 是这个集合里的元素，并且相邻两个点之间有一条边。</p><p>本来可以一句话说清楚的事情，但是偏偏要给出数学定义，所以要考察大家的归纳整理能力。</p><p>实际上，就是要在树中选出一个连通块即可，并且满足连通块的和值最大。</p><p>为什么呢？</p><p>我们观察一幅图，相信大家能理解了：</p><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713419773909" alt="图片描述"></p><p>绿色的代表我们选择的点集合。这些点是连通的，所以满足要求。</p><p>如果换成这个样子：</p><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713419870334" alt="图片描述"></p><p>这样就不满足题目要求了。</p><p>所以大家可以体会出来，题目的要求，其实就是找一个树上的连通块。</p><p>那么我们的问题就变成了在树上找最大的连通块了。</p><p>树形 DP，终究还是 DP，所以需要划分子问题。</p><p>我们常用的方法是，<strong>将子节点为根的子树，看成子问题，然后合并到当前根</strong>。</p><p>将节点从深到浅（子树从小到大）的顺序作为 DP 的阶段，在 DP 的表示中，通常第一维代表节点的编号，后续维度按照问题进行设计。</p><p>首先我们需要解决一个问题，树上的连通块是什么？有什么性质可以利用。</p><p>答案是：树上的联通块也是树，他一定有根。所以我们要是找到这个根，或者枚举这个根，就可以找到答案。</p><p>我们设计的状态如下：</p><p>$dp_i$ 表示，对于节点为 $i$ 的子树，我们找到的以 $i$ 为根的连通块和值最大是 $dp_i$。</p><p>那么我们的转移的意义就是：对于 $i$ 来说，由于 $i$ 一定存在连通块中，所以，我们要找到他的儿子中，哪些是和 $i$ 连着的。</p><p>有一种贪心方案，对于 $i$ 的儿子 $v \in son(i)$ ，如果 $dp_v \ge 0$，我们就将他接入父亲即可。</p><p>所以，我们的转移方程就是： $$ dp_i &#x3D; w_i + \sum _{dp_j \ge 0 &amp; j \in son(i)} dp_j $$ 代码如下：</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span> using namespace std; const int N = 1e5+100; typedef long long ll; vector<span class="hljs-string">&lt;int&gt;</span> G[N]; int w[N]; ll dp[N], ans = -1e18; int n; void dfs(int u, int f) &#123; dp[u] = w[u]; for (int v : G[u]) &#123; <span class="hljs-keyword">if</span> (v == f) continue; dfs(v, u); <span class="hljs-keyword">if</span> (dp[v] &gt; 0) &#123; dp[u] += dp[v]; &#125; &#125; ans = max(ans, dp[u]); &#125; int main() &#123; cin &gt;&gt; n; for (int i = 1; i <span class="hljs-string">&lt;= n; ++i) &#123; cin &gt;</span>&gt; w[i]; &#125; int u, v; for (int i = 1; i <span class="hljs-string">&lt; n; ++i) &#123; cin &gt;</span>&gt; u &gt;&gt; v; G[u].push_back(v); G[v].push_back(u); &#125; dfs(1, 0); cout &lt;&lt; ans &lt;&lt; endl; return 0; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (<span class="hljs-number">1e5</span> + <span class="hljs-number">100</span>); <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] dp; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] w; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;List&lt;Integer&gt;&gt; G; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> Long.MIN_VALUE; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> f)</span> &#123; dp[u] = w[u]; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : G.get(u)) &#123; <span class="hljs-keyword">if</span> (v == f) <span class="hljs-keyword">continue</span>; dfs(v, u); <span class="hljs-keyword">if</span> (dp[v] &gt; <span class="hljs-number">0</span>) &#123; dp[u] += dp[v]; &#125; &#125; ans = Math.max(ans, dp[u]); &#125; <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123; <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in); n = scanner.nextInt(); w = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N]; G = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; N; i++) &#123; G.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;()); &#125; dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N]; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123; w[i] = scanner.nextInt(); &#125; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) &#123; <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> scanner.nextInt() - <span class="hljs-number">1</span>; <span class="hljs-comment">// 0-indexed in Java int v = scanner.nextInt() - 1; G.get(u).add(v); G.get(v).add(u); &#125; dfs(0, -1); System.out.println(ans); scanner.close(); &#125; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys sys.setrecursionlimit(<span class="hljs-number">100000</span>) n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()) aList = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()] tree = [[]<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] ans = <span class="hljs-number">0</span> dp = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>): m, n =<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) tree[m].append(n) tree[n].append(m) <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u,f</span>): <span class="hljs-keyword">global</span> ans dp[u] = aList[u] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tree[u]: <span class="hljs-keyword">if</span> i !=f: dp[i] = dfs(i, u) <span class="hljs-keyword">if</span> dp[i]&gt;<span class="hljs-number">0</span>: dp[u] += dp[i] ans=<span class="hljs-built_in">max</span>(ans, dp[u]) <span class="hljs-keyword">return</span> dp[u] dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>) <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="3-树上背包问题"><a href="#3-树上背包问题" class="headerlink" title="3. 树上背包问题"></a>3. 树上背包问题</h2><p>树上背包问题，本质上还是背包，可以看成在树上进行的背包。</p><p>每次转移都是在父亲与儿子之间进行了一次经典背包转移。</p><h3 id="3-1-小明的背包6"><a href="#3-1-小明的背包6" class="headerlink" title="3.1 小明的背包6"></a>3.1 <a href="https://www.lanqiao.cn/problems/131/learning/">小明的背包6</a></h3><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713421022535" alt="图片描述"></p><p>这个是典型的依赖背包问题。</p><p>并且依赖关系构成了一棵树。</p><p>我们看样例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>6 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>4 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>9<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713421190949" alt="图片描述"></p><p>依赖关系如上图所示：上图的含义是如果只有购买了 $1$ 号物品，才能购买 $2, 3, 4$ 号物品。</p><p>记住，我们的目标是划分子问题，也就是说，只要保证了一个子问题的划分是正确的，那么由于树的优良递归性质，其他的也会是正确的。</p><p>复习一下普通的背包问题，用 $dp_i$ 表示，在使用了 $i$ 空间的情况下的最大价值。</p><p>但是在树问题中，由于第一维度是节点的编号，所以我们用 $dp_{i,j}$ 表示对于 $i$ 子树来说，使用了 $j$ 空间的最大价值。</p><p>当然题目中有要求，必须满足依赖关系，所以，我们需要重新定义： $dp_{i,j}$ 表示对于 $i$ 子树来说，使用了 $j$ 空间且满足依赖关系的最大价值。</p><p>如何满足呢？</p><p>我们只需要保证每一个 $dp_{i,j}$ 都选了 $i$ 节点即可。</p><p>我们可以在背包中预留出节点 $i$ 的空间即可。</p><p>代码如下：</p><ul><li>C ++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span> using namespace std; const int N = 1e2+20; vector<span class="hljs-string">&lt;int&gt;</span> G[N]; int n, V; int v[N], w[N]; int dp[N][N]; void dfs(int u) &#123; for (int i = v[u]; i <span class="hljs-string">&lt;= V; ++i) dp[u][i] = w[u]; for (int i : G[u]) &#123; dfs(i); for (int j = V; j &gt;</span>= v[u] + v[i]; --j) &#123; for (int k = v[i]; k <span class="hljs-string">&lt;= j - v[u]; ++k) // 剩余的空间 dp[u][j] = max(dp[u][j - k] + dp[i][k], dp[u][j]); &#125; &#125; &#125; int main() &#123; cin &gt;</span>&gt; n &gt;&gt; V; int s; for (int i = 1; i <span class="hljs-string">&lt;= n; ++i) &#123; cin &gt;</span>&gt; v[i] &gt;&gt; w[i] &gt;&gt; s; G[s].push_back(i); &#125; dfs(0); cout &lt;&lt; dp[0][V] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList; <span class="hljs-keyword">import</span> java.util.List; <span class="hljs-keyword">import</span> java.util.Scanner; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> V; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] dp; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;List&lt;Integer&gt;&gt; G; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] v; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] w; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span> &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> v[u]; i &lt;= V; ++i) &#123; dp[u][i] = w[u]; &#125; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> child : G.get(u)) &#123; dfs(child); <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> V; j &gt;= v[u] + v[child]; --j) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> v[child]; k &lt;= j - v[u]; ++k) &#123; dp[u][j] = Math.max(dp[u][j - k] + dp[child][k], dp[u][j]); &#125; &#125; &#125; &#125; <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123; <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in); <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt(); V = scanner.nextInt(); G = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; ++i) &#123; G.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;()); &#125; v = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>]; w = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>]; dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>][V + <span class="hljs-number">1</span>]; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123; v[i] = scanner.nextInt(); w[i] = scanner.nextInt(); <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> scanner.nextInt(); G.get(s).add(i); &#125; dfs(<span class="hljs-number">0</span>); System.out.println(dp[<span class="hljs-number">0</span>][V]); scanner.close(); &#125; &#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>: <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">self, u, dp, G, v, w, V</span>): <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v[u], V + <span class="hljs-number">1</span>): dp[u][i] = w[u] <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> G[u]: self.dfs(child, dp, G, v, w, V) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V, v[u] + v[child] - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v[child], j - v[u] + <span class="hljs-number">1</span>): dp[u][j] = <span class="hljs-built_in">max</span>(dp[u][j - k] + dp[child][k], dp[u][j]) <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">self</span>): n, V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) G = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)] <span class="hljs-comment"># 0-indexed in Python v = [0] * (n + 1) w = [0] * (n + 1) for i in range(1, n + 1): v[i], w[i], s = map(int, input().split()) G[s].append(i) dp = [[0] * (V + 1) for _ in range(n + 1)] self.dfs(0, dp, G, v, w, V) print(dp[0][V]) # Run the main function solution = Solution() solution.main()</span><br></code></pre></td></tr></table></figure><h2 id="4-换根-DP-问题"><a href="#4-换根-DP-问题" class="headerlink" title="4. 换根 DP 问题"></a>4. 换根 DP 问题</h2><p>换根 DP，面对的问题通常是“不定根”问题，也就是说，对于一棵树，他的根不一定是 $1$ 号点，可能是任意某个点。</p><p>或者在某些问题中，我们需要尝试计算以每个点为根的情况，最后维护出最大值。</p><p>我们先看一副图，来理解所谓的“换根”。</p><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713424406656" alt="图片描述"></p><p>我们将原来以 $1$ 为根换成了以 $2$ 为根。那么树的形态也就发生了变化。</p><p>如果每次都是选择一个点作为根进行处理，那么总的时间复杂度为 $O(n^2)$，但是如果我们能发现性质，我们可以将复杂度降为 $O(n)$。</p><p>即换一次根的复杂度为 $O(1)$，下面，我们将讲述这种方法。</p><p>在一般的问题中，我们常常是利用dfs来不断的将根转换为根的子节点。</p><p>我们会发现一些事情：</p><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713424716921" alt="图片描述"></p><p>我们一次转换的过程，其实有很大一部分并没有发生变化，体现在 DP 转移中，就是这些点的 DP 值也不会发生改变。</p><p>实际上改变的只有改变身份的两个点，其他的点都不会发生变化。</p><p>在换根的问题中，一般的步骤如下：</p><ol><li>以 $1$ 为根进行一遍扫描，并且处理出必要的信息，例如深度、DP 值等。</li><li>开始以 $1$ 进行换根，并且向下递归，在递归之前，需要将自己变成子节点的身份。</li><li>进入新的根后，按照根的身份，重新进行转移。并且维护答案。</li></ol><h3 id="4-1-卖树"><a href="#4-1-卖树" class="headerlink" title="4.1 卖树"></a>4.1 <a href="https://www.lanqiao.cn/problems/3029/learning/">卖树</a></h3><p><img src="https://dn-simplecloud.shiyanlou.com/questions/uid1792586-20240418-1713424080194" alt="图片描述"></p><p>本题需要计算以每个点为根的情况下，产生的盈利。</p><p>如果我们确定了一个点为根，我们很容易算出答案，如果确定了根，问题就变成了求最大深度，这个问题只需要一遍DFS就可以完成。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> f, <span class="hljs-type">int</span> dt)</span> </span>&#123; <span class="hljs-comment">// 求出以1为根的原始信息 dep[u] = dt; Mdp[u] = 0; // Mdp即为当前点为根的最大深度 for (int v : G[u]) &#123; if (v == f) continue; dfs(v, u, dt + 1); Mdp[u] = max(Mdp[v] + 1, Mdp[u]); &#125; &#125;</span><br></code></pre></td></tr></table></figure><p>因为节点数量太多，我们无法承受 $O(n^2)$ 的复杂度，所以我们需要进行换根，</p><p>基本思想如上述一致：</p><ol><li>我们需要先算出以 $1$ 为根的信息，包括以每个节点为子树的最大深度，从 $1$ 转移到 $i$ 节点的代价。</li><li>我们从 $1$ 号点开始换根，每次只将根的身份换给儿子，然后进入递归，进入之前，我们需要将当前点的身份改为子节点。</li><li>进行新的根，由于原来的转移已经失效，所以需要重新转移。并且维护答案，然后重复2步骤。</li></ol><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span> using namespace std; const int N = 1e5+10; vector<span class="hljs-string">&lt;int&gt;</span> G[N]; int n, k, c; int dep[N], Mdp[N]; typedef long long ll; ll ans = 0; void dfs(int u, int f, int dt) &#123; <span class="hljs-comment">// 求出以1为根的原始信息 dep[u] = dt; Mdp[u] = 0; for (int v : G[u]) &#123; if (v == f) continue; dfs(v, u, dt + 1); Mdp[u] = max(Mdp[v] + 1, Mdp[u]); &#125; &#125; void dfs2(int u, int f) &#123; // 开始换根 /** * 重新转移 */ int tmpf = 0, Mx1 = 0, Mx2 = 0; for (int v : G[u]) &#123; tmpf = max(tmpf, Mdp[v] + 1); &#125; // 维护答案 ans = max(1ll * tmpf * k - 1ll * dep[u] * c, ans); // 根变儿子步骤 int pre = Mdp[u]; for (int v : G[u]) &#123; if (Mdp[v] + 1 &gt; Mx1) &#123; Mx2 = Mx1; Mx1 = Mdp[v] + 1; &#125; else if (Mdp[v] + 1 &gt; Mx2) &#123; Mx2 = Mdp[v] + 1; &#125; &#125; for (int v : G[u]) &#123; if (v == f) continue; // 由于根要变成儿子，所以要改变原来的转移值 if (Mdp[v] + 1 == Mx1) Mdp[u] = Mx2; else Mdp[u] = Mx1; dfs2(v, u); &#125; // 还原原始的值。 Mdp[u] = pre; &#125; void sol() &#123; for (int i = 1; i &lt;= n; ++i) G[i].clear(); ans = 0; cin &gt;&gt; n &gt;&gt; k &gt;&gt; c; int u, v; for (int i = 1; i &lt; n; ++i) &#123; cin &gt;&gt; u &gt;&gt; v; G[u].push_back(v); G[v].push_back(u); &#125; dfs(1, 0, 0); dfs2(1, 0); cout &lt;&lt; ans &lt;&lt; &#x27;\n&#x27;; &#125; int main() &#123; ios::sync_with_stdio(0); int T; cin &gt;&gt; T; while (T --) &#123; sol(); &#125; return 0; &#125;</span></span><br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict <span class="hljs-keyword">import</span> sys sys.setrecursionlimit(<span class="hljs-number">100000</span>) N = <span class="hljs-number">100010</span> G = defaultdict(<span class="hljs-built_in">list</span>) n, k, c = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span> dep = [<span class="hljs-number">0</span>] * N Mdp = [<span class="hljs-number">0</span>] * N ans = <span class="hljs-number">0</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, f, dt</span>): <span class="hljs-comment"># 求出以1为根的原始信息 global dep, Mdp dep[u] = dt Mdp[u] = 0 for v in G[u]: if v == f: continue dfs(v, u, dt + 1) Mdp[u] = max(Mdp[v] + 1, Mdp[u]) def dfs2(u, f): # 开始换根 global ans, dep, Mdp tmpf = 0 Mx1 = 0 Mx2 = 0 # 重新转移 for v in G[u]: tmpf = max(tmpf, Mdp[v] + 1) # 维护答案 ans = max(ans, tmpf * k - dep[u] * c) # 根变儿子步骤 pre = Mdp[u] for v in G[u]: if Mdp[v] + 1 &gt; Mx1: Mx2 = Mx1 Mx1 = Mdp[v] + 1 elif Mdp[v] + 1 &gt; Mx2: Mx2 = Mdp[v] + 1 for v in G[u]: if v == f: continue # 由于根要变成儿子，所以要改变原来的转移值 if Mdp[v] + 1 == Mx1: Mdp[u] = Mx2 else: Mdp[u] = Mx1 dfs2(v, u) # 还原原始的值。 Mdp[u] = pre def sol(): global n, k, c, ans, G, dep, Mdp n, k, c = map(int, input().split()) G.clear() ans = 0 for _ in range(n - 1): u, v = map(int, input().split()) G[u].append(v) G[v].append(u) dfs(1, 0, 0) dfs2(1, 0) print(ans) T = int(input()) for _ in range(T): sol()</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*; <span class="hljs-keyword">import</span> java.io.*; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123; <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">100010</span>; <span class="hljs-keyword">static</span> List&lt;Integer&gt;[] G; <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, k, c; <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] dep, Mdp; <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> ans; <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> f, <span class="hljs-type">int</span> dt)</span> &#123; <span class="hljs-comment">// 求出以1为根的原始信息 Mdp[u] = 0; for (int v : G[u]) &#123; if (v == f) continue; dfs(v, u, dt + 1); Mdp[u] = Math.max(Mdp[v] + 1, Mdp[u]); &#125; &#125; static void dfs2(int u, int f) &#123; // 开始换根 int tmpf = 0, Mx1 = 0, Mx2 = 0; /** * 重新转移 */ for (int v : G[u]) &#123; tmpf = Math.max(tmpf, Mdp[v] + 1); &#125; // 维护答案 ans = Math.max(ans, (long) tmpf * k - (long) dep[u] * c); // 根变儿子步骤 int pre = Mdp[u]; for (int v : G[u]) &#123; if (Mdp[v] + 1 &gt; Mx1) &#123; Mx2 = Mx1; Mx1 = Mdp[v] + 1; &#125; else if (Mdp[v] + 1 &gt; Mx2) &#123; Mx2 = Mdp[v] + 1; &#125; &#125; for (int v : G[u]) &#123; if (v == f) continue; // 由于根要变成儿子，所以要改变原来的转移值 if (Mdp[v] + 1 == Mx1) &#123; Mdp[u] = Mx2; &#125; else &#123; Mdp[u] = Mx1; &#125; dfs2(v, u); &#125; // 还原原始的值。 Mdp[u] = pre; &#125; static void sol(Scanner scanner) &#123; for (int i = 1; i &lt;= n; i++) G[i].clear(); ans = 0; n = scanner.nextInt(); k = scanner.nextInt(); c = scanner.nextInt(); int u, v; for (int i = 1; i &lt; n; i++) &#123; u = scanner.nextInt(); v = scanner.nextInt(); G[u].add(v); G[v].add(u); &#125; dfs(1, 0, 0); dfs2(1, 0); System.out.println(ans); &#125; public static void main(String[] args) &#123; G = new ArrayList[N]; for (int i = 0; i &lt; N; i++) &#123; G[i] = new ArrayList&lt;&gt;(); &#125; dep = new int[N]; Mdp = new int[N]; Scanner scanner = new Scanner(System.in); int T = scanner.nextInt(); while (T-- &gt; 0) &#123; sol(scanner); &#125; &#125; &#125;</span><br></code></pre></td></tr></table></figure><h2 id="5-作业"><a href="#5-作业" class="headerlink" title="5. 作业"></a>5. 作业</h2><table><thead><tr><th>题目</th><th>链接</th></tr></thead><tbody><tr><td>取气球（算法赛）</td><td><a href="https://www.lanqiao.cn/problems/17024/learning/">https://www.lanqiao.cn/problems/17024/learning/</a></td></tr><tr><td>左孩子右兄弟（21 年省赛）</td><td><a href="https://www.lanqiao.cn/problems/1451/learning/">https://www.lanqiao.cn/problems/1451/learning/</a></td></tr></tbody></table>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>线性动态规划问题&amp;背包问题进阶策略详解</title>
    <link href="/2024/05/06/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/"/>
    <url>/2024/05/06/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="1-DP-概述"><a href="#1-DP-概述" class="headerlink" title="1. DP 概述"></a>1. DP 概述</h2><p>DP（dynamic Progamming），动态规划算法，是一类常见、常考的算法。</p><p>在算法竞赛中，DP的考法多而杂，并且难度可以从简单到超难，主要难在状态的设计，以及思考如何转移；但是在蓝桥杯比赛中，涉及到的往往都是简单，基础的DP考点，十分考验基本功。</p><p>动态规划是一种通过把原问题分解为相对简单的子问题的方式求解复杂问题的方法。</p><p>由于动态规划并不是某种具体的算法，而是一种解决特定问题的方法，因此它会出现在各式各样的数据结构中，与之相关的题目种类也更为繁杂。</p><p>在算法类竞赛中，计数等非最优化问题的递推解法也常被不规范地称作 DP。</p><h2 id="2-主要思想以及条件"><a href="#2-主要思想以及条件" class="headerlink" title="2. 主要思想以及条件"></a>2. 主要思想以及条件</h2><p>DP 将原问题划分划分为若干个重叠的子问题，并且逐层递进，每个子问题在求解的过程中，都会被抽象为“阶段”，也叫做“状态”，在完成前一个阶段的计算后，才能进行下一阶段的计算。</p><p>最广泛运用的例子就是数字三角形问题：</p><p>给定一个三角形，第 $i$ 行有 $i$ 个元素，如下图：</p><p>​       <span> 5 </span><br>​     <span> 5 </span> <span> 4 </span><br>   <span> 8 </span> <span> 9 </span> <span> 0 </span></p><p>你初始在第一行的第一个元素位置，每一次，可以选择左下，或者右下的位置进行移动，每次移动到一个位置上，可以获得相应的分数。问：你可以任意规划自己的路线，请问在走到最后一行时，能够获得的最大分数是多少？</p><p>同学们可以自行计算一下，当然，很多同学可以一眼看出来，答案是 $5 + 5 + 9 &#x3D; 19$。从第一行开始，往左边，然后往右边。</p><p>如果利用动态规划的思想，应该如下考虑：</p><p>而对于每一个点，它的下一步决策只有两种：往左下角或者往右下角（如果存在）。因此只需要记录当前点的最大权值，用这个最大权值执行下一步决策，来更新后续点的最大权值。<strong>即，对于每一个点，当作一种状态，代表的意义是：到达当前点能累积的最大分数。</strong></p><p>如果你理解了这一步，并且认为其设计的十分有道理，那么我们来剖析一下其中原理：</p><h3 id="2-1-条件"><a href="#2-1-条件" class="headerlink" title="2.1 条件"></a>2.1 条件</h3><p>能用动态规划解决的问题，需要满足三个条件：最优子结构，无后效性和子问题重叠。</p><ol><li>无后效性</li></ol><p>已经求解的子问题，不会再受到后续决策的影响，即后续状态不会影响前序状态，也说明了求解的有序性。</p><ol start="2"><li>子问题重叠</li></ol><p>子问题 A 和子问题 B 可能存在共同的子问题 C，那么我们可以将一些重叠的子问题存储下来，特别来说，重叠的越多，我们的空间利用率越高。</p><ol start="3"><li>最优子结构</li></ol><p>当前问题的最优解一定可以由子问题的最优解导出。</p><p>再抽象一点，其实大部分的 DP 问题，都可以抽象为数字三角形问题，结构图如下：</p><p><img src="/./../images/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/uid1792586-20240417-1713337518314.png" alt="图片描述"></p><p>箭头源代表子问题，箭头指向，代表后续问题。</p><p>例如：$\lbrace 1 \rbrace$ 同时是 $\lbrace 2,3 \rbrace$ 的子问题，并且 $2$ 问题的解可以由 $1$ 导出。</p><p>总结：<strong>动态规划对状态的遍历，构成了一张有向无环图，遍历顺序（或者求解顺序）应该是该图的一个拓扑序</strong>。</p><h2 id="3-关于比赛中的状态设计"><a href="#3-关于比赛中的状态设计" class="headerlink" title="3. 关于比赛中的状态设计"></a>3. 关于比赛中的状态设计</h2><p>DP 的难点在于状态的设计和子结构的发掘，即使学界讨论了诸多DP转移的状态设计和优化手段，但是如何把问题形式化为状态空间，往往是一件考察智力而非套路的事情。</p><p>但是在蓝桥杯的赛题中，考察的是选手的基本功，与一点点的拔高，所以不会太难，可以遵循某些套路。</p><p>笔者按照经验，先讲授一些自己常用的状态设计思路，然后结合例题讲解。</p><p>设计一个状态分为如下几步：</p><ol><li>尝试找到题目中的需要优化的值，例如最小值，最大值，次数等，做为目标，也是就是状态的最优值。</li><li>尝试找到题目中的条件，例如长度，区间数量等，做为状态设计。</li><li>尝试模拟题目中的求解步骤，这往往是题目中的条件，例如对某个数加一，或者在占领某些土地。作为转移的部分。</li><li>尝试结合将 1，2，3 结合起来，看能否找到一个合理的最优结构，并且无后向性。</li><li>如果不是最优，尝试这加大状态的条件，例如在补上一个必要的量，在进行3步骤。</li></ol><p>笔者还有一些习惯，例如在看到某个题目时，如果准备尝试用DP解题，就是按照题目中的量进行一个简单尝试。例如，题目中有三个量，就会尝试写出 $dp_{i,j,k}$ ，然后尝试读出其代表的实际意义。如果可行，就进行优化或者细化。</p><p>一般而言，常见的线性DP，都能用此种方法解决，对于较难的问题，往往很难一下子设计出一个较好的状态，这就需要大量的经验以及一些天赋。</p><p>例如，你可以尝试设计这两个问题的状态：</p><ol><li><p><a href="https://www.lanqiao.cn/problems/3601/learning/">蓝桥云课-青蛙吃虫</a></p></li><li><p><a href="https://www.lanqiao.cn/problems/17004/learning/">蓝桥算法赛-食堂</a></p></li></ol><p>可以很明显的感觉出设计的难点。</p><h2 id="4-线性DP"><a href="#4-线性DP" class="headerlink" title="4. 线性DP"></a>4. 线性DP</h2><p>本部分将结合一些题，来不断的重复上述建立 DP 状态的方法，意图帮助读者强化一些简单的DP状态设计。</p><h3 id="4-1-蓝桥云课-青蛙吃虫"><a href="#4-1-蓝桥云课-青蛙吃虫" class="headerlink" title="4.1 蓝桥云课-青蛙吃虫"></a>4.1 <a href="https://www.lanqiao.cn/problems/3601/learning/">蓝桥云课-青蛙吃虫</a></h3><p><img src="/./../images/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/uid1792586-20240417-1713337799031.png" alt="图片描述"></p><ol><li>找到题目中的需要优化的值，“最多吃多少昆虫”，完美符合要求，我们将这个最大值作为状态的最优值，也就是说，如果我们设计了一个状态 $s$，那么我们的 $dp_s$ 所代表的意义大概率在 $s$ 情况下的吃虫的最大虫数。</li><li>尝试找到题目中的条件，路径长度为 $N$，最多跳 $K$ 次。</li><li>尝试模拟题目中的求解步骤，这往往是题目中的条件。每次跳 $T$ 格，但是满足 $A \le T \le B$，可以看作跳一次，就是一次转移。</li></ol><p>尝试结合将 1，2，3 结合起来，看能否找到一个合理的最优结构，并且无后向性。</p><blockquote><p>得到的状态以及转移如下：</p><p>定义 $dp_{i,j}$ 为跳跃了 $i$ 次后，当前处在 $j$ 位置能吃到的最大昆虫数量。</p><p>那么由定义得到 $dp_{0,0} &#x3D; 0$，这是初始状态，代表的意义是在未跳跃前的状态，很明显符合定义（初始状态的定义，往往是需要对应于真实情况）。</p><p>我们思考如何转移，由于转移的过程为题目中的求解条件：每次跳跃一些格子，那么跳跃就是转移的过程。</p><p>我们思路如何得到 $dp_{i,j}$ ，复习定义：跳跃了 $i$ 次后，当前处在 $j$ 位置能吃到的最大昆虫数量。</p><p>那么这个状态的前一个状态是什么，也是就说，他的子问题是什么，根据实际情况，我们可以得到上一个状态一定是 $dp_{i-1,j’}$，定义为 跳跃了 $i-1$ 次后，到达位置为 $j’$ 的位置，如果满足跳一次可以到达 $j$，那么必须满足 $A \le j-j’ \le B$。</p></blockquote><p>有了这个过程，那么我们实际上就得到了转移的逻辑，你完全可以根据这个思路写出代码核心：</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">-0x3f3f3f3f</span>, <span class="hljs-built_in">sizeof</span>(dp)); <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= K; ++i) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; ++j) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = A; k &lt;= B; ++k) &#123; <span class="hljs-keyword">if</span> (j - k &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>; dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i - <span class="hljs-number">1</span>][j - k] + a[j]); &#125; ans = <span class="hljs-built_in">max</span>(ans, dp[i][j]); &#125; &#125; cout &lt;&lt; ans &lt;&lt; endl;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span>[] row : dp) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; row.length; j++) &#123; row[j] = -<span class="hljs-number">0x3f3f3f3f</span>; &#125; &#125; dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= K; ++i) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; ++j) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> A; k &lt;= B; ++k) &#123; <span class="hljs-keyword">if</span> (j - k &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>; dp[i][j] = Math.max(dp[i][j], dp[i - <span class="hljs-number">1</span>][j - k] + a[j]); &#125; ans = Math.max(ans, dp[i][j]); &#125; &#125; System.out.println(ans);<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, K + <span class="hljs-number">1</span>): <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>): <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(A, B + <span class="hljs-number">1</span>): <span class="hljs-keyword">if</span> j - k &lt; <span class="hljs-number">0</span>: <span class="hljs-keyword">continue</span> dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i - <span class="hljs-number">1</span>][j - k] + a[j]) ans = <span class="hljs-built_in">max</span>(ans, dp[i][j]) <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>我们可以写出更具规整的转移： $dp_{0,0} &#x3D; 0 \ dp_{i,j} &#x3D; \max_{A \le k \le B}(dp_{i-1,k})$ 我们要求的答案为 $\underset{0 \le i \le k, 0 \le j \le n}{\max}(dp_{i,j})$。</p><h3 id="4-2-蓝桥算法赛-奇怪的段"><a href="#4-2-蓝桥算法赛-奇怪的段" class="headerlink" title="4.2 蓝桥算法赛-奇怪的段"></a>4.2 <a href="https://www.lanqiao.cn/problems/12112/learning/">蓝桥算法赛-奇怪的段</a></h3><p><img src="/./../images/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/uid1792586-20240417-1713337554344.png" alt="图片描述"></p><p>我们继续重复上述解题方法：</p><ol><li><p>找到题目中的需要优化的值，“加权和值最大”，完美符合要求，我们将这个最大值作为状态的最优值，也就是说，如果我们设计了一个状态 $s$，那么我们的 $dp_s$ 所代表的意义大概率在 $s$ 情况下的最大加权和值。</p></li><li><p>尝试找到题目中的条件，序列长度为 $n$，划分出 $k$ 个区间。</p></li><li><p>尝试模拟题目中的求解步骤，这往往是题目中的条件。在本题中，划分区间就是一次转移。</p></li><li><p>尝试结合将1，2，3结合起来，看能否找到一个合理的最优结构，并且无后向性。</p></li></ol><p>我们可以尝试建立如下转移：</p><blockquote><p>定义状态 $dp_{i,j}$ 表示处理到第 $i$ 个数字，分出 $j$ 个区间的最大值。</p><p>初始状态为 $dp_{0,0} &#x3D; 0$。这个代表初始情况下，未划分区间的最大值，是符合实际情况，并且是符合定义的。</p><p>由于一次划分就是一次转移，我们考虑 $dp_{i,j}$，他的上一次划分一定是 $dp_{i’,j-1}$，所代表的意义是，划分 $j-1$ 段时，最后一个元素是 $i$ 的情况。</p><p>那么我们的转移就是 $dp_{i,j} &#x3D; dp_{i’,j-1} + p_j \times \sum _{y&#x3D;i’+1} ^i a_y$。</p><p>当然，我们要求的是最大值，所以我们需要加一个条件： $dp_{i,j} &#x3D; \underset {j \le i’ \le i} {\max}  (dp_{i’,j-1} + p_j \times \sum _{y&#x3D;i’+1} ^i a_y)$ 状态是 $n \times k$ 个，每次转移的代价是 $n$ 次，那么这个转移的复杂度为 $O(n^2 \times k)$。</p><p>当然，对于这个题来说，复杂度太高了，无法通过本题，由于是算法赛，所以无法通过，<strong>如果是蓝桥大赛的题，那么大概率能得到 $50$ % 的分数。</strong> 当然需要一些优化策略，不然求和的这一部分也会增加复杂度，同学们自行思考（提示：前缀和，或者边循环边算）。</p><p>如果要解决本题，我们考虑优化</p><p>将式子拆开</p><p><img src="/./../images/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/uid1792586-20240417-1713348601655.png" alt="图片描述"></p><p>上述的理解为，将 $a_i$ 新开一个区间，还是并入旧区间。</p><p>转移的复杂度为：$O(n\times k)$。</p><p>实现过程中用了滚动数组，用来节约空间，当然也可以不用。</p><p>滚动数组： 由于每次转移 $dp_{i,j}$ 只与 $dp_{i-1, j’}$ 有关，对于第一维来说， $dp_i$ 只与 $dp_{i-1}$ 有关，所以，我们用两个量来表示当前的 $dp_i$ 和 $dp_{i-1}$ 即可。在代码中用 $dp_{now}$ 和 $dp_{pre}$ 表示。</p></blockquote><p>代码如下：</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span> using namespace std; const int N = 1e5+100; using ll = long long; ll dp[2][204]; int n, k; int a[N], b[204]; int main() &#123; cin &gt;&gt; n &gt;&gt; k; for (int i = 1; i <span class="hljs-string">&lt;= n; ++i) cin &gt;</span>&gt; a[i]; for (int i = 1; i <span class="hljs-string">&lt;= k; ++i) cin &gt;</span>&gt; b[i]; memset(dp, -0x3f, sizeof(dp)); int now = 0, pre = 1; dp[now][0] = 0; for (int i = 1; i &lt;= n; ++i) &#123; swap(now, pre); memset(dp[now], -0x3f, sizeof(dp[now])); for (int j = 1; j &lt;= k; ++j) &#123; dp[now][j] = max(dp[pre][j], dp[pre][j - 1]) + 1ll * a[i] * b[j]; &#125; &#125; cout &lt;&lt; dp[now][k] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>; return 0; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">std</span> &#123; <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123; <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in); <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">100500</span>; <span class="hljs-type">long</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[<span class="hljs-number">2</span>][<span class="hljs-number">205</span>]; <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt(); <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> scanner.nextInt(); <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N]; <span class="hljs-type">int</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">205</span>]; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123; a[i] = scanner.nextInt(); &#125; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= k; ++i) &#123; b[i] = scanner.nextInt(); &#125; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">205</span>; ++i) dp[<span class="hljs-number">0</span>][i] = dp[<span class="hljs-number">1</span>][i] = -<span class="hljs-number">9000000000000000000L</span>; dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; <span class="hljs-type">int</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, pre = <span class="hljs-number">1</span>; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123; now ^= <span class="hljs-number">1</span>; pre ^= <span class="hljs-number">1</span>; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">205</span>; ++j) dp[now][j] = -<span class="hljs-number">9000000000000000000L</span>; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= k; ++j) &#123; dp[now][j] = Math.max(dp[pre][j], dp[pre][j - <span class="hljs-number">1</span>]) + <span class="hljs-number">1L</span> * a[i] * b[j]; &#125; &#125; System.out.println(dp[now][k]); &#125; &#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">N = <span class="hljs-number">100500</span> dp = [[-<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * <span class="hljs-number">205</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>)] n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) b = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) now, pre = <span class="hljs-number">0</span>, <span class="hljs-number">1</span> dp[now][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>): now, pre = pre, now dp[now] = [-<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * <span class="hljs-number">205</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>): dp[now][j] = <span class="hljs-built_in">max</span>(dp[pre][j], dp[pre][j - <span class="hljs-number">1</span>]) + a[i] * b[j] <span class="hljs-built_in">print</span>(dp[now][k])<br></code></pre></td></tr></table></figure><h2 id="5-背包"><a href="#5-背包" class="headerlink" title="5. 背包"></a>5. 背包</h2><p>背包问题是老生常谈的经典问题了。</p><p>原始模型如下：</p><p>有 $n$ 个物品和一个容量为 $m$ 的背包，每个物品有一个价值 $p$ 和 体积 $v$ 。问在总容量不超过 $m$ 的情况下，你能装载的最大价值和为多少？</p><p>背包有多种模型：</p><ol><li>0&#x2F;1 背包，在这种情况下，每个物品只有一个。</li><li>完全背包，在这种情况下，每个物品有无穷个。</li><li>多重背包，在这种情况下，每个物品有 $c_i$ 个，$c_i$ 为第 $i$ 个物品的数量。</li><li>分组背包，在这种情况下，存在 $n$ 个组别，每个组别有若干个物品，但是每组至多只能选择一个。</li><li>依赖背包，在这种情况下，某些物品之间存在依赖关系。</li></ol><p>最基础的属于 0&#x2F;1 背包和完全背包。</p><p>其模板代码如下：</p><h3 id="5-1-0-1-背包"><a href="#5-1-0-1-背包" class="headerlink" title="5.1 0&#x2F;1 背包"></a>5.1 0&#x2F;1 背包</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// 二维数组版本 for (int i = 1; i &lt;= n; ++i) &#123; for (int j = m; j - v[i] &gt;= 0; --j) &#123; dp[i][j] = max(dp[i][j], dp[i - 1][j - v[i]] + p[i]); &#125; &#125; // ------------- 一维数组版本 for (int i = 1; i &lt;= n; ++i) &#123; for (int j = m; j - v[i] &gt;= 0; --j) &#123; dp[j] = max(dp[j], dp[j - v[i]] + p[i]); &#125; &#125; // dp[i][j] 代表处理到第 i 个物品，容量为 j 时的最大值。</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 二维数组版本 for (int i = 1; i &lt;= n; ++i) &#123; for (int j = m; j - v[i] &gt;= 0; --j) &#123; dp[i][j] = Math.max(dp[i][j], dp[i - 1][j - v[i]] + p[i]); &#125; &#125; // ------------- 一维数组版本 for (int i = 1; i &lt;= n; ++i) &#123; for (int j = m; j - v[i] &gt;= 0; --j) &#123; dp[j] = Math.max(dp[j], dp[j - v[i]] + p[i]); &#125; &#125; // dp[i][j] 代表处理到第 i 个物品，容量为 j 时的最大值。</span><br></code></pre></td></tr></table></figure><ul><li>python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 二维数组版本 for i in range(1, n + 1): for j in range(m, v[i] - 1, -1): dp[i][j] = max(dp[i][j], dp[i - 1][j - v[i]] + p[i]) # ------------- 一维数组版本 for i in range(1, n + 1): for j in range(m, v[i] - 1, -1): dp[j] = max(dp[j], dp[j - v[i]] + p[i])</span><br></code></pre></td></tr></table></figure><h3 id="5-2-完全背包"><a href="#5-2-完全背包" class="headerlink" title="5.2 完全背包"></a>5.2 完全背包</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ------------- 一维数组版本 for (int i = 1; i &lt;= n; ++i) &#123; for (int j = v[i]; j &lt;= m; ++j) &#123; dp[j] = max(dp[j], dp[j - v[i]] + p[i]); &#125; &#125; // dp[i][j] 代表处理到第 i 个物品，容量为 j 时的最大值。</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ------------- 一维数组版本 for (int i = 1; i &lt;= n; ++i) &#123; for (int j = v[i]; j &lt;= m; ++j) &#123; dp[j] = Math.max(dp[j], dp[j - v[i]] + p[i]); &#125; &#125; // dp[i][j] 代表处理到第 i 个物品，容量为 j 时的最大值。</span><br></code></pre></td></tr></table></figure><ul><li>python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>): <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v[i], m + <span class="hljs-number">1</span>): dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - v[i]] + p[i])<br></code></pre></td></tr></table></figure><h3 id="5-3-多重背包"><a href="#5-3-多重背包" class="headerlink" title="5.3 多重背包"></a>5.3 多重背包</h3><p>多重背包可以转化为 $0&#x2F;1$ 背包。</p><p>首先我们可以将每个物品的 $c_i$ 个全部拆出来，变成0&#x2F;1 背包，但是这样的话复杂度就变成了 $O(m \times \sum c_i)$。</p><p>还有另外一种方式，我们可以将 $c_i$ 按照进制拆分，分为 $\lbrace 1, 2, 4, 8, … \rbrace$ 个，例如，如果是 $5$ 个，每个物品的容量为 $v$，价值为 $p$，那么划分为 $\lbrace 1, 2, 2\rbrace$，将这 $5$ 个物品划分为 $3$ 个物品，第一个物品容量为 $v$，价格为 $p$，第二个物品容量为 $2v$，价格为 $2p$，第三个物品容量为 $2v$，价格为 $2p$，这样就将复杂度降低为了 $O(m \sum \log_2(c_i))$。</p><blockquote><p>这样的划分，可以拼凑出 $0 \sim c_i$ 所有数量的物品。因为是按照二进制划分的，假设划分的最大数量是 $2^k$，那么最后一个是 $x &#x3D; c_i-2^{k+1} + 1$。</p><p>我们首先可以用前 $k$ 个拼凑出 $0 \sim 2 ^{k+1} - 1$ 种情况，并且 $x \lt 2^{k+1}$，所以其他数可以先加上 $x$ ，然后再加上 $0 \sim 2^{k+1} - 1$ 中的一个，那么就可以拼凑出 $0 \sim c_i$ 所有的数量了。</p></blockquote><p>拆分代码：</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// index 为新的物品编号 index = 0; for (int i = 1; i &lt;= m; i++) &#123; int cnt = 1, p, v, c; cin &gt;&gt; p &gt;&gt; v &gt;&gt; c; while (c &gt; cnt) &#123; c -= cnt; list[++index].p = c * p; list[index].v = c * v; cnt *= 2; &#125; list[++index].p = c * p; list[index].v = c * v; &#125; // list 存储所有新的物品</span><br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m): cnt = <span class="hljs-number">1</span> p, v, c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) <span class="hljs-keyword">while</span> c &gt; cnt: c = c - cnt <span class="hljs-built_in">list</span>.append((c * p, c * v)) cnt = cnt * <span class="hljs-number">2</span> <span class="hljs-built_in">list</span>.append((c * p, c * v))<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in); p = scanner.nextInt(); v = scanner.nextInt(); c = scanner.nextInt(); <span class="hljs-keyword">while</span> (c &gt; cnt) &#123; c -= cnt; index++; list[index].p = c * p; list[index].v = c * v; cnt *= <span class="hljs-number">2</span>; &#125; index++; list[index].p = c * p; list[index].v = c * v;<br></code></pre></td></tr></table></figure><h4 id="5-3-1-小明的背包4"><a href="#5-3-1-小明的背包4" class="headerlink" title="5.3.1 小明的背包4"></a>5.3.1 <a href="https://www.lanqiao.cn/problems/1177/learning/">小明的背包4</a></h4><p><img src="/./../images/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/uid1792586-20240417-1713349006255.png" alt="图片描述"></p><p>算是一个多重背包模板题，套用上述模板解题即可。</p><p>当然，本题中存在无限的数量，可以有两种考虑方法，对于无穷数量，我们定义会满载的数量，例如 $\frac{V}{w_i}$；或者在分完多重背包后，在进行完全背包。</p><p>都可以，推荐同学们两种都试试。</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> using namespace std; int idx = 0; int w[40003], v[40003]; int N, V; int dp[2003]; int main() &#123; cin &gt;&gt; N &gt;&gt; V; int ww, vv, c; while (N --) &#123; cin &gt;&gt; ww &gt;&gt; vv &gt;&gt; c; <span class="hljs-keyword">if</span> (c == 0) c = V / ww; int cnt = 1; while (c &gt; cnt) &#123; idx ++; c -= cnt; w[idx] = cnt * ww; v[idx] = cnt * vv; cnt *= 2; &#125; idx ++; w[idx] = c * ww; v[idx] = c * vv; &#125; for (int i = 1; i <span class="hljs-string">&lt;= idx; ++i) &#123; for (int j = V; j - w[i] &gt;</span>= 0; --j) &#123; dp[j] = max(dp[j], dp[j - w[i]] + v[i]); &#125; &#125; cout &lt;&lt; dp[V] &lt;&lt; endl; return 0; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">std</span> &#123; <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123; <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in); <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-type">int</span>[] w = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">40003</span>]; <span class="hljs-type">int</span>[] v = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">40003</span>]; <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> scanner.nextInt(); <span class="hljs-type">int</span> <span class="hljs-variable">V</span> <span class="hljs-operator">=</span> scanner.nextInt(); <span class="hljs-type">int</span>[] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">2003</span>]; <span class="hljs-keyword">while</span> (N-- &gt; <span class="hljs-number">0</span>) &#123; <span class="hljs-type">int</span> <span class="hljs-variable">ww</span> <span class="hljs-operator">=</span> scanner.nextInt(); <span class="hljs-type">int</span> <span class="hljs-variable">vv</span> <span class="hljs-operator">=</span> scanner.nextInt(); <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> scanner.nextInt(); <span class="hljs-keyword">if</span> (c == <span class="hljs-number">0</span>) c = V / ww; <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-keyword">while</span> (c &gt; cnt) &#123; idx++; c -= cnt; w[idx] = cnt * ww; v[idx] = cnt * vv; cnt *= <span class="hljs-number">2</span>; &#125; idx++; w[idx] = c * ww; v[idx] = c * vv; &#125; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= idx; ++i) &#123; <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> V; j - w[i] &gt;= <span class="hljs-number">0</span>; --j) &#123; dp[j] = Math.max(dp[j], dp[j - w[i]] + v[i]); &#125; &#125; System.out.println(dp[V]); &#125; &#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">idx = <span class="hljs-number">0</span> w = [<span class="hljs-number">0</span>] * <span class="hljs-number">40003</span> v = [<span class="hljs-number">0</span>] * <span class="hljs-number">40003</span> N, V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) dp = [<span class="hljs-number">0</span>] * <span class="hljs-number">2003</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N): ww, vv, c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) <span class="hljs-keyword">if</span> c == <span class="hljs-number">0</span>: c = V // ww cnt = <span class="hljs-number">1</span> <span class="hljs-keyword">while</span> c &gt; cnt: idx += <span class="hljs-number">1</span> c -= cnt w[idx] = cnt * ww v[idx] = cnt * vv cnt *= <span class="hljs-number">2</span> idx += <span class="hljs-number">1</span> w[idx] = c * ww v[idx] = c * vv <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, idx + <span class="hljs-number">1</span>): <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V, w[i] - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - w[i]] + v[i]) <span class="hljs-built_in">print</span>(dp[V])<br></code></pre></td></tr></table></figure><h3 id="5-4-分组背包"><a href="#5-4-分组背包" class="headerlink" title="5.4 分组背包"></a>5.4 分组背包</h3><p>给定 $n$ 组物品，第 $i$ 组中有 $c_i$ 个物品，第 $i$ 组中第 $j$ 个物品的价值为 $p_{i,j}$ ，体积为 $v_{i,j}$，每组物品最多只能选择一个。</p><p>背包大小为 $m$ ，问装载的最大价值。</p><p>这个问题与原始的 $0&#x2F;1$ 背包十分相似，复习下，原始的 $0&#x2F;1$ 背包如何建立的状态转移：$dp_{i,j}$ 为处理到第 $i$ 个物品，装载体积为 $j$ 的最大价值。</p><p>其转移为 $dp_{i,j} &#x3D; \max(dp_{i-1, j} , dp_{i-1,j-v_i} + p_i)$</p><p>我们只要稍作思考，就可以完成转化：</p><p>我们定义：$dp_{i,j}$ 为处理到第 $i$ <strong>组</strong>物品，装载体积为 $j$ 的最大价值。</p><p>那么转移为： $dp_{i,j} &#x3D; \max(dp_{i-1, j} , \max_{1 \le j \le c_i}(dp_{i-1,j-v_{i,j}} + p_{i,j}))$ 观察到了吗，这两种甚至没有区别，只有再处理每一组的过程中进行了一次选择，逻辑通顺，完美转移！</p><p>我们来看一道例题：</p><h4 id="5-4-1-金明的预算"><a href="#5-4-1-金明的预算" class="headerlink" title="5.4.1 金明的预算"></a>5.4.1 <a href="https://www.lanqiao.cn/problems/558/learning/">金明的预算</a></h4><p><img src="/./../images/%E7%BA%BF%E6%80%A7%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E8%BF%9B%E9%98%B6%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3/uid1792586-20240417-1713347341038.png" alt="图片描述"></p><p>我们简化一下题意：</p><p>有 $m$ 块钱，$n$ 件物品，每个物品的价值为 $p_i \times v_i$，价格为 $v_i$。有一些物品存在依赖关系，想要购买当前物品，就一定要购买前置物品。</p><p>问能购买的最大价值。</p><p><strong>条件</strong>：每一件物品最多只有<strong>两件</strong>附属物品。</p><p>看起来是一个依赖有关的背包问题，但是仔细思考就会发现，如果 $A$ 物品有两件附属物品 $B,C$，那么对于这三件物品，只有这么几种情况 $\lbrace \varnothing \rbrace,\lbrace A \rbrace,\lbrace A,B \rbrace,\lbrace A, C \rbrace,\lbrace A, B, C \rbrace$，并且对于这三个物品的组合，只能选择<strong>一种</strong>。对于有一个附属物品和没有附属物品的情况，类似考虑。</p><p>回过头来，是不是发现，很想分组背包的感觉。</p><p>我们重新描绘一下题意：</p><p>有 $m$ 块钱，$n$ 组物品，每组物品数量不超过三，每个物品有价值、价格。每组物品只能选择<strong>一种</strong>组合。问能购买的最大价值。</p><p>完美转换为分组背包。</p><p>代码如下：</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span> using namespace std; int n, m; vector<span class="hljs-string">&lt;int&gt;</span> G[65]; int v[65], p[65], q[65]; int dp[33000]; int main() &#123; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i <span class="hljs-string">&lt;= m; ++i) &#123; cin &gt;</span>&gt; v[i] &gt;&gt; p[i] &gt;&gt; q[i]; p[i] *= v[i]; <span class="hljs-keyword">if</span> (q[i]) &#123; G[q[i]].push_back(i); &#125; &#125; for (int i = 1; i <span class="hljs-string">&lt;= m; ++i) &#123; if (q[i] == 0) &#123; for (int j = n; j &gt;</span>= 0; --j) &#123; <span class="hljs-keyword">if</span> (j - v[i] &gt;= 0) dp[j] = max(dp[j], dp[j - v[i]] + p[i]); <span class="hljs-keyword">if</span> (G[i].size() &gt; 0 &amp;&amp; j - v[i] - v[G[i][0]] &gt;= 0) dp[j] = max(dp[j], dp[j - v[i] - v[G[i][0]]] + p[i] + p[G[i][0]]); <span class="hljs-keyword">if</span> (G[i].size() &gt; 1 &amp;&amp; j - v[i] - v[G[i][1]] &gt;= 0) dp[j] = max(dp[j], dp[j - v[i] - v[G[i][1]]] + p[i] + p[G[i][1]]); <span class="hljs-keyword">if</span> (G[i].size() &gt; 1 &amp;&amp; j - v[i] - v[G[i][0]] - v[G[i][1]] &gt;= 0) dp[j] = max(dp[j], dp[j - v[i] - v[G[i][0]] - v[G[i][1]]] + p[i] + p[G[i][0]] + p[G[i][1]]); &#125; &#125; &#125; cout &lt;&lt; dp[n] &lt;&lt; endl; return 0; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList; <span class="hljs-keyword">import</span> java.util.List; <span class="hljs-keyword">import</span> java.util.Scanner; <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123; <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m; <span class="hljs-keyword">static</span> List&lt;Integer&gt;[] G = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[<span class="hljs-number">65</span>]; <span class="hljs-comment">// 使用ArrayList数组来表示图 static int[] v = new int[65], p = new int[65], q = new int[65]; static int[] dp = new int[33000]; public static void main(String[] args) &#123; Scanner scanner = new Scanner(System.in); n = scanner.nextInt(); m = scanner.nextInt(); // 初始化G数组 for (int i = 0; i &lt; G.length; i++) &#123; G[i] = new ArrayList&lt;&gt;(); &#125; for (int i = 1; i &lt;= m; i++) &#123; v[i] = scanner.nextInt(); p[i] = scanner.nextInt(); q[i] = scanner.nextInt(); p[i] *= v[i]; if (q[i] != 0) &#123; G[q[i]].add(i); // 将后继节点i添加到q[i]的列表中 &#125; &#125; for (int i = 1; i &lt;= m; i++) &#123; if (q[i] == 0) &#123; for (int j = n; j &gt;= 0; j--) &#123; if (j - v[i] &gt;= 0) dp[j] = Math.max(dp[j], dp[j - v[i]] + p[i]); // 处理后继节点 for (int k = 0; k &lt; G[i].size(); k++) &#123; int nextItem = G[i].get(k); if (j - v[i] - v[nextItem] &gt;= 0) &#123; dp[j] = Math.max(dp[j], dp[j - v[i] - v[nextItem]] + p[i] + p[nextItem]); &#125; &#125; if (G[i].size() &gt; 1) &#123; int p1 = G[i].get(0), p2 = G[i].get(1); if (j - v[i] - v[p1] - v[p2] &gt;= 0) &#123; dp[j] = Math.max(dp[j], dp[j - v[i] - v[p1] - v[p2]] + p[i] + p[p1] + p[p2]); &#125; &#125; &#125; &#125; &#125; System.out.println(dp[n]); scanner.close(); &#125; &#125;</span><br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) G = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">65</span>)] v = [<span class="hljs-number">0</span>] * <span class="hljs-number">65</span> p = [<span class="hljs-number">0</span>] * <span class="hljs-number">65</span> q = [<span class="hljs-number">0</span>] * <span class="hljs-number">65</span> dp = [<span class="hljs-number">0</span>] * <span class="hljs-number">33000</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>): v[i], p[i], q[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()) p[i] *= v[i] <span class="hljs-keyword">if</span> q[i]: G[q[i]].append(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>): <span class="hljs-keyword">if</span> q[i] == <span class="hljs-number">0</span>: <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): <span class="hljs-keyword">if</span> j - v[i] &gt;= <span class="hljs-number">0</span>: dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - v[i]] + p[i]) <span class="hljs-keyword">if</span> G[i]: <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(G[i])): <span class="hljs-keyword">if</span> j - v[i] - v[G[i][k]] &gt;= <span class="hljs-number">0</span>: dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - v[i] - v[G[i][k]]] + p[i] + p[G[i][k]]) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(G[i]) &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> j - v[i] - v[G[i][<span class="hljs-number">0</span>]] - v[G[i][<span class="hljs-number">1</span>]] &gt;= <span class="hljs-number">0</span>: dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - v[i] - v[G[i][<span class="hljs-number">0</span>]] - v[G[i][<span class="hljs-number">1</span>]]] + p[i] + p[G[i][<span class="hljs-number">0</span>]] + p[G[i][<span class="hljs-number">1</span>]]) <span class="hljs-built_in">print</span>(dp[n])<br></code></pre></td></tr></table></figure><h2 id="6-依赖背包"><a href="#6-依赖背包" class="headerlink" title="6. 依赖背包"></a>6. 依赖背包</h2><p>这个比较复杂，一般来讲是树形的依赖关系，我们放在树形DP再讲。</p><h2 id="7-作业"><a href="#7-作业" class="headerlink" title="7. 作业"></a>7. 作业</h2><table><thead><tr><th>考点</th><th>题目</th></tr></thead><tbody><tr><td>线性 DP</td><td><a href="https://www.lanqiao.cn/problems/2114/learning/">李白打酒-真题</a></td></tr><tr><td>线性 DP</td><td><a href="https://www.lanqiao.cn/problems/3545/learning/">保险箱-真题</a></td></tr><tr><td>背包问题</td><td><a href="https://www.lanqiao.cn/problems/5130/learning/">健身-算法赛</a></td></tr><tr><td>背包问题</td><td><a href="https://www.lanqiao.cn/problems/98/learning/">包子凑数</a></td></tr></tbody></table>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>算法竞赛入门经典（第2版）学习记录</title>
    <link href="/2024/04/25/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8%EF%BC%88%E7%AC%AC2%E7%89%88%EF%BC%89%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2024/04/25/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8%EF%BC%88%E7%AC%AC2%E7%89%88%EF%BC%89%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;math.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">//算数表达式的计算</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">/* 算术表达式的计算 */</span><br>    <span class="hljs-comment">// printf(&quot;%d\n&quot;,1+2);</span><br>    <span class="hljs-comment">// //实验一</span><br>    <span class="hljs-comment">// printf(&quot;%d\n&quot;,3-4);</span><br>    <span class="hljs-comment">// //二</span><br>    <span class="hljs-comment">// printf(&quot;%d\n&quot;,5*6);</span><br>    <span class="hljs-comment">// //三</span><br>    <span class="hljs-comment">// printf(&quot;%d\n&quot;,7/8);</span><br>    <span class="hljs-comment">// //四</span><br>    <span class="hljs-comment">// printf(&quot;%d\n&quot;,9%10);</span><br>    <span class="hljs-comment">// //五</span><br>    <span class="hljs-comment">// printf(&quot;%.1f\n&quot;,8.0/5.0);</span><br>    <span class="hljs-comment">// //整数值用%d,浮点数用%f</span><br>    <span class="hljs-comment">// //比较复杂的表达式计算</span><br>    <span class="hljs-comment">// printf(&quot;%.8f\n&quot;,1+2*sqrt(3)/(5-0.1));</span><br>    <span class="hljs-comment">// //数学函数sqrt(x)的作用是计算x的算术平方根</span><br>    <span class="hljs-comment">// printf(&quot;%.8f\n&quot;,pow(2,3));</span><br>    <span class="hljs-comment">// //pow(x,y)的作用是计算x的y次方</span><br><br><br>    <span class="hljs-comment">/* 1.2 输入输出 */</span><br>    <span class="hljs-comment">// int a,b;</span><br>    <span class="hljs-comment">// scanf(&quot;%d%d&quot;,&amp;a,&amp;b);</span><br>    <span class="hljs-comment">// printf(&quot;%d\n&quot;,a+b);</span><br>    <span class="hljs-comment">// 输入的样例</span><br>    <span class="hljs-comment">// //例题1-1 圆柱体的表面积</span><br>    <span class="hljs-comment">// const double PI=acos(-1.0);</span><br>    <span class="hljs-comment">// double r,h,s1,s2,s;</span><br>    <span class="hljs-comment">// //cin&gt;&gt;r&gt;&gt;h;</span><br>    <span class="hljs-comment">// scanf(&quot;%lf%lf&quot;,&amp;r,&amp;h);</span><br>    <span class="hljs-comment">// s1=2*PI*r*r;</span><br>    <span class="hljs-comment">// s2=2*PI*r*h;</span><br>    <span class="hljs-comment">// s=s1+s2;</span><br>    <span class="hljs-comment">// printf(&quot;Area=%.3f\n&quot;,s);</span><br>    <span class="hljs-comment">// cout &lt;&lt; &quot;&quot; &lt;&lt; endl;</span><br>    <span class="hljs-comment">//算法竞赛的程序应当只做3件事情：</span><br>    <span class="hljs-comment">//读入数据、计算结果、打印输出。</span><br>    <span class="hljs-comment">//尽量使用const关键字声明常数</span><br><br><br>    <span class="hljs-comment">/*1.3 顺序结构程序设计*/</span><br>    <span class="hljs-comment">// //三位数翻转</span><br>    <span class="hljs-comment">// int a,b,c;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br>    <span class="hljs-comment">// cout&lt;&lt;c&lt;&lt;b&lt;&lt;a&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // 交换变量</span><br>    <span class="hljs-comment">// // 三变量法</span><br>    <span class="hljs-comment">// int a,b,c;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b;</span><br>    <span class="hljs-comment">// c=a;</span><br>    <span class="hljs-comment">// a=b;</span><br>    <span class="hljs-comment">// b=c;</span><br>    <span class="hljs-comment">// cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // 两变量法</span><br>    <span class="hljs-comment">// int a,b;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b;</span><br>    <span class="hljs-comment">// a=a+b;</span><br>    <span class="hljs-comment">// b=a-b;</span><br>    <span class="hljs-comment">// a=a-b;</span><br>    <span class="hljs-comment">// cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // 输入输出</span><br>    <span class="hljs-comment">// int a,b;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b;</span><br>    <span class="hljs-comment">// cout&lt;&lt;b&lt;&lt;&quot; &quot;&lt;&lt;a&lt;&lt;endl;</span><br><br>    <span class="hljs-comment">/*1.4 分支结构程序设计*/</span><br>    <span class="hljs-comment">// //鸡兔同笼</span><br>    <span class="hljs-comment">// int a,b,n,m;</span><br>    <span class="hljs-comment">// cin&gt;&gt;n&gt;&gt;m;</span><br>    <span class="hljs-comment">// if(n&gt;m)&#123;cout&lt;&lt;&quot;No answer&quot;&lt;&lt;endl;&#125;</span><br>    <span class="hljs-comment">// else&#123;</span><br>    <span class="hljs-comment">//     a=(4*n-m)/2;</span><br>    <span class="hljs-comment">//     b=n-a;</span><br>    <span class="hljs-comment">//     if (m%2==1 || a&lt;0 || b&lt;0)</span><br>    <span class="hljs-comment">//     &#123;</span><br>    <span class="hljs-comment">//         cout&lt;&lt;&quot;No answer&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">//     &#125;</span><br>    <span class="hljs-comment">//     else&#123;</span><br>    <span class="hljs-comment">//         cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;endl;</span><br>    <span class="hljs-comment">//     &#125;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// //C语言中的逻辑运算符都是短路运算符</span><br>    <span class="hljs-comment">// //&amp;&amp;和||都是短路运算符，当第一个运算符为假时，第二个运算符将不会被执行。</span><br>    <span class="hljs-comment">// // 三整数排序</span><br>    <span class="hljs-comment">// int a,b,c,t;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br>    <span class="hljs-comment">// if(a&gt;b)&#123;t=a;a=b;b=t;&#125;</span><br>    <span class="hljs-comment">// if(a&gt;c)&#123;t=a;a=c;c=t;&#125;</span><br>    <span class="hljs-comment">// if(b&gt;c)&#123;t=b;b=c;c=t;&#125;</span><br>    <span class="hljs-comment">// cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;&quot; &quot;&lt;&lt;c&lt;&lt;endl;</span><br><br>    <span class="hljs-comment">/*1.5 注解和习题*/</span><br>    <span class="hljs-comment">//实验A1：表达式11111*11111的值是多少？把5个1改成6个1呢？9个1呢？</span><br>    <span class="hljs-comment">//cout&lt;&lt;11111*11111&lt;&lt;endl;// 1234534321</span><br><br>    <span class="hljs-comment">//实验A2：把实验A1中的所有数换成浮点数，结果如何？</span><br>    <span class="hljs-comment">//cout&lt;&lt;11111.0*11111.0&lt;&lt;endl;// 1.23454e+08</span><br><br>    <span class="hljs-comment">//实验A3：表达式sqrt（-10）的值是多少？尝试用各种方式输出。在计算的过程中系统会报错吗？</span><br>    <span class="hljs-comment">//cout&lt;&lt;sqrt(-10)&lt;&lt;endl;// nan</span><br>    <span class="hljs-comment">// cout&lt;&lt;&quot;sqrt(-10)=&quot;&lt;&lt;sqrt(-10)&lt;&lt;endl;</span><br>    <span class="hljs-comment">// cout&lt;&lt;&quot;sqrt(-10)=&quot;&lt;&lt;sqrt(-10.0)&lt;&lt;endl;</span><br>    <span class="hljs-comment">// cout&lt;&lt;&quot;sqrt(-10)=&quot;&lt;&lt;sqrt(-10.0f)&lt;&lt;endl;</span><br>    <span class="hljs-comment">// cout&lt;&lt;&quot;sqrt(-10)=&quot;&lt;&lt;sqrt(-10.0l)&lt;&lt;endl;</span><br><br>    <span class="hljs-comment">// //实验A4：表达式1.0/0.0、0.0/0.0的值是多少？尝试用各种方式输出。在计算的过程中系统会报错吗？</span><br>    <span class="hljs-comment">// cout&lt;&lt;1.0/0.0&lt;&lt;endl; // inf</span><br>    <span class="hljs-comment">// cout&lt;&lt;0.0/0.0&lt;&lt;endl; // nan</span><br><br>    <span class="hljs-comment">//实验A5：表达式1/0的值是多少？在计算的过程中系统会报错吗？</span><br>    <span class="hljs-comment">//cout&lt;&lt;1/0&lt;&lt;endl; // Arithmetic exception</span><br><br>    <span class="hljs-comment">// //实验B1：在同一行中输入12和2，并以空格分隔，是否得到了预期的结果？</span><br>    <span class="hljs-comment">// int a,b;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b;</span><br>    <span class="hljs-comment">// cout&lt;&lt;a/b&lt;&lt;endl; // 6 正常</span><br><br>    <span class="hljs-comment">// //实验B2：在不同的两行中输入12和2，是否得到了预期的结果？</span><br>    <span class="hljs-comment">// int a,b;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a;</span><br>    <span class="hljs-comment">// cin&gt;&gt;b;</span><br>    <span class="hljs-comment">// cout&lt;&lt;a/b&lt;&lt;endl; // 6 正常</span><br><br>    <span class="hljs-comment">// // 实验B3：在实验B1和B2中，在12和2的前面和后面加入大量的空格或水平制表符（TAB），甚至插入一些空行。</span><br>    <span class="hljs-comment">// int a,b;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b;</span><br>    <span class="hljs-comment">// cout&lt;&lt;a/b&lt;&lt;endl;// 6 正常</span><br><br>    <span class="hljs-comment">// //实验B4：把2换成字符s，重复实验B1～B3。</span><br>    <span class="hljs-comment">// char s;</span><br>    <span class="hljs-comment">// cin&gt;&gt;s;</span><br>    <span class="hljs-comment">// cout&lt;&lt;s/s&lt;&lt;endl; // 1 正常</span><br><br>    <span class="hljs-comment">/*习题*/</span><br>    <span class="hljs-comment">// // 平均数</span><br>    <span class="hljs-comment">// int a,b,c;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br>    <span class="hljs-comment">// //保留三位小数</span><br>    <span class="hljs-comment">// //cout输出控制小数位，需要添加头文件#include &lt;iomanip&gt;</span><br>    <span class="hljs-comment">// cout&lt;&lt;setiosflags(ios::fixed)</span><br>    <span class="hljs-comment">//     &lt;&lt;setprecision(3)&lt;&lt;(a+b+c)/3.0&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // 温度</span><br>    <span class="hljs-comment">// double f,c;</span><br>    <span class="hljs-comment">// cin&gt;&gt;f;</span><br>    <span class="hljs-comment">// c=(f-32)*5/9;</span><br>    <span class="hljs-comment">// cout&lt;&lt;setiosflags(ios::fixed)</span><br>    <span class="hljs-comment">//     &lt;&lt;setprecision(3)&lt;&lt;c&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // 连续和</span><br>    <span class="hljs-comment">// // 输入正整数n，输出1到n的连续和。</span><br>    <span class="hljs-comment">// int n,m;</span><br>    <span class="hljs-comment">// cin&gt;&gt;n;</span><br>    <span class="hljs-comment">// m=n*(n+1)/2;</span><br>    <span class="hljs-comment">// cout&lt;&lt;m&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // sin和cos</span><br>    <span class="hljs-comment">// int n;</span><br>    <span class="hljs-comment">// cin&gt;&gt;n;</span><br>    <span class="hljs-comment">// cout&lt;&lt;sin(n)&lt;&lt;&quot; &quot;&lt;&lt;cos(n)&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // 打折</span><br>    <span class="hljs-comment">// double price,discount,total;</span><br>    <span class="hljs-comment">// cin&gt;&gt;discount;</span><br>    <span class="hljs-comment">// price=95;</span><br>    <span class="hljs-comment">// total=price*discount;</span><br>    <span class="hljs-comment">// if (total&gt;=300)</span><br>    <span class="hljs-comment">// &#123;</span><br>    <span class="hljs-comment">//     cout&lt;&lt;&quot;Total price is &quot;&lt;&lt;total*0.85&lt;&lt;&quot; yuan.&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">// &#125;else&#123;</span><br>    <span class="hljs-comment">//     cout&lt;&lt;&quot;Total price is &quot;&lt;&lt;total&lt;&lt;&quot; yuan.&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// // 三角形</span><br>    <span class="hljs-comment">// int a,b,c;</span><br>    <span class="hljs-comment">// cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br>    <span class="hljs-comment">// if (a+b&gt;c &amp;&amp; a+c&gt;b &amp;&amp; b+c&gt;a)</span><br>    <span class="hljs-comment">// &#123;</span><br>    <span class="hljs-comment">//     cout&lt;&lt;&quot;Yes&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">// &#125;else&#123;</span><br>    <span class="hljs-comment">//     cout&lt;&lt;&quot;No&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// // 年份</span><br>    <span class="hljs-comment">// int year;</span><br>    <span class="hljs-comment">// cin&gt;&gt;year;</span><br>    <span class="hljs-comment">// if (year%400==0 || (year%4==0 &amp;&amp; year%100!=0))</span><br>    <span class="hljs-comment">// &#123;</span><br>    <span class="hljs-comment">//     cout&lt;&lt;&quot;Yes&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">// &#125;else&#123;</span><br>    <span class="hljs-comment">//     cout&lt;&lt;&quot;No&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">// &#125;</span><br><br>    <span class="hljs-comment">// //问题1：int型整数的最小值和最大值是多少（需要精确值）？</span><br>    <span class="hljs-comment">// cout&lt;&lt;INT_MIN&lt;&lt;&quot; &quot;&lt;&lt;INT_MAX&lt;&lt;endl;// -2147483648 2147483647</span><br>    <span class="hljs-comment">// //问题2：double型浮点数能精确到多少位小数？或者，这个问题本身值得商榷？</span><br>    <span class="hljs-comment">// cout&lt;&lt;DBL_DIG&lt;&lt;endl;// 15</span><br>    <span class="hljs-comment">// //问题3：double型浮点数最大正数值和最小正数值分别是多少（不必特别精确）？</span><br>    <span class="hljs-comment">// cout&lt;&lt;DBL_MIN&lt;&lt;&quot; &quot;&lt;&lt;DBL_MAX&lt;&lt;endl;// 2.22507e-308 1.79769e+308</span><br>    <span class="hljs-comment">// //问题4：逻辑运算符号“&amp;&amp;”、“||”和“！”（表示逻辑非）的相对优先级是怎样的？也就是说，a&amp;&amp;b||c应理解成（a&amp;&amp;b）||c还是a&amp;&amp;（b||c），或者随便怎么理解都可以？</span><br>    <span class="hljs-comment">//  cout&lt;&lt;&quot;&amp;&amp;优先级高于||&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">//  cout&lt;&lt;&quot;!优先级最低&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">//  cout&lt;&lt;&quot;a&amp;&amp;b||c&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">//  cout&lt;&lt;&quot;(a&amp;&amp;b)||c&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">//  cout&lt;&lt;&quot;a&amp;&amp;(b||c)&quot;&lt;&lt;endl;</span><br>    <span class="hljs-comment">// // 问题5：if（a）if（b）x＋＋；else  y＋＋的确切含义是什么？这个else应和哪个if配套？有没有办法明确表达出配套方法？</span><br>    <span class="hljs-comment">// int a,b,x,y;</span><br>    <span class="hljs-comment">// a=1,b=1,x=0,y=0;</span><br>    <span class="hljs-comment">// if(a)if(b)x++;else y++;</span><br>    <span class="hljs-comment">// cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;endl;</span><br>    <span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法与数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>算法与数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>代码随想录突击版学习</title>
    <link href="/2024/04/25/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95%E7%AA%81%E5%87%BB%E7%89%88%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/04/25/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95%E7%AA%81%E5%87%BB%E7%89%88%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h1><p>给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。</p><p>示例 1:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">输入: nums = [-1,0,3,5,9,12], target = 9     <br>输出: 4       <br>解释: 9 出现在 nums 中并且下标为 4     <br></code></pre></td></tr></table></figure><p>示例 2:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">输入: nums = [-1,0,3,5,9,12], target = 2     <br>输出: -1        <br>解释: 2 不存在 nums 中因此返回 -1        <br></code></pre></td></tr></table></figure><p>提示：</p><ul><li>你可以假设 nums 中的所有元素是不重复的。</li><li>n 将在 [1, 10000]之间。</li><li>nums 的每个元素都将在 [-9999, 9999]之间。</li></ul><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>首先，二分查找的使用限制：</p><p>​二分查找只使用于有序数组中，二分查找的边界需要进行判断</p><p>使用python编写的模板：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#在单调递增序列a中查找&gt;=x的数中最小的一个（即x或x的后继）</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">findMin</span>(<span class="hljs-params">a,x,low,high</span>):<br>    <span class="hljs-keyword">while</span> low&lt;high:<br>        mid=<span class="hljs-built_in">int</span>((low+high)/<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">if</span>(a[mid]&gt;=x):<br>            high=mid<br>        <span class="hljs-keyword">else</span>:<br>            low=mid+<span class="hljs-number">1</span><br>    <span class="hljs-built_in">print</span>(a[high])<br><span class="hljs-comment">#在单调递增序列a中查找&lt;=x的数中最大的一个（即x或x的前驱）</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">findMax</span>(<span class="hljs-params">a,x,low,high</span>):<br>    <span class="hljs-keyword">while</span> low&lt;high:<br>        mid=<span class="hljs-built_in">int</span>((low+high+<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">if</span>(a[mid]&lt;=x):<br>            low=mid<br>        <span class="hljs-keyword">else</span>:<br>            high = mid-<span class="hljs-number">1</span><br>    <span class="hljs-built_in">print</span>(a[low])<br>a=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>]<br>x=<span class="hljs-number">3</span><br>low=<span class="hljs-number">0</span><br>high=<span class="hljs-built_in">len</span>(a)-<span class="hljs-number">1</span><br>findMin(a,x,low,high)<br>findMax(a,x,low,high)<br></code></pre></td></tr></table></figure><p>那么，使用java怎么实现呢？</p>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构刷题题单</title>
    <link href="/2024/04/24/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/"/>
    <url>/2024/04/24/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/</url>
    
    <content type="html"><![CDATA[<h1 id="P1996-约瑟夫问题"><a href="#P1996-约瑟夫问题" class="headerlink" title="P1996 约瑟夫问题"></a>P1996 约瑟夫问题</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>$n$ 个人围成一圈，从第一个人开始报数,数到 $m$ 的人出列，再由下一个人重新从 $1$ 开始报数，数到 $m$ 的人再出圈，依次类推，直到所有的人都出圈，请输出依次出圈人的编号。</p><p><strong>注意：本题和《深入浅出-基础篇》上例题的表述稍有不同。书上表述是给出淘汰 $n-1$ 名小朋友，而该题是全部出圈。</strong></p><h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入两个整数 $n,m$。</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出一行 $n$ 个整数，按顺序输出每个出圈人的编号。</p><h2 id="样例-1"><a href="#样例-1" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">10 </span><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">6</span> <span class="hljs-number">9</span> <span class="hljs-number">2</span> <span class="hljs-number">7</span> <span class="hljs-number">1</span> <span class="hljs-number">8</span> <span class="hljs-number">5</span> <span class="hljs-number">10</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h2 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h2><p>$1 \le m, n \le 100$​</p><h2 id="解题思路："><a href="#解题思路：" class="headerlink" title="解题思路："></a>解题思路：</h2><p>由于这题数据范围非常小，因此可以用很多比较奇怪的算法。不过，命题者的初衷是希望我们使用链表进行模拟。</p><p>在这里，我使用了一个结构体 <code>Peo</code> 存储一个双向链表：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Peo</span><br>&#123;<br>    <span class="hljs-type">int</span> ID;                    <span class="hljs-comment">//编号</span><br>    Peo *next, *front;<br>&#125;;<br></code></pre></td></tr></table></figure><p>其中 <code>ID</code> 代表这个人的编号，输出时使用，另外两个指针分别指向上一个和下一个人，不过我们先要对其初始化。 使用两个变量 <code>tot</code>, <code>outNum</code> 来分别存储总人数和出局的数，然后让链表之间互相链接，最后首尾相连。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; tot - <span class="hljs-number">1</span>; i++) &#123; n[i].front = n + i - <span class="hljs-number">1</span>; n[i].next = n + i + <span class="hljs-number">1</span>; n[i].ID = i + <span class="hljs-number">1</span>; &#125;<br>    n[<span class="hljs-number">0</span>].front = n + tot - <span class="hljs-number">1</span>; n[<span class="hljs-number">0</span>].next = n + <span class="hljs-number">1</span>; n[tot - <span class="hljs-number">1</span>].front = n + tot - <span class="hljs-number">2</span>; n[tot - <span class="hljs-number">1</span>].next = n;<br>    n[<span class="hljs-number">0</span>].ID = <span class="hljs-number">1</span>; n[tot - <span class="hljs-number">1</span>].ID = tot;<br></code></pre></td></tr></table></figure><p>链表初始化完成之后，我们可以使用一个结构体指针 <code>now</code> 来表示我们现在模拟到哪一个人了。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Peo *now = n;            <span class="hljs-comment">//指向目前报数的人的指针</span><br></code></pre></td></tr></table></figure><p>最后，我们需要用一种方法来删除链表当中的某一项，可以这样考虑，如果当前需要删除的项是 <code>now</code>, 那么链表中需要修改的变量只有它前一项和后一项的两个指针，在代码实现上，将 <code>now-&gt;front</code> 的 <code>next</code> 更改为<code>now-&gt;next</code>，然后 <code>now-&gt;next</code> 的 <code>front</code> 更改为<code>now-&gt;front</code> 就可以了。我们使用一个函数封装这一过程。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">void</span> _Cut(Peo *num)<br>    &#123;<br>        num = num-&gt;front;<br>        num-&gt;next = num-&gt;next-&gt;next;<br>        num = num-&gt;next;<br>        num-&gt;front = num-&gt;front-&gt;front;<br>    &#125;<br></code></pre></td></tr></table></figure><p>这样，剩下的就是依据题意模拟了，过程虽然看似有些复杂，但是这大致就是题目期望我们去做的全部过程。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Peo</span><br>&#123;<br>    <span class="hljs-type">int</span> ID;                                    <span class="hljs-comment">//编号</span><br>    Peo *next, *front;<br><br>    <span class="hljs-built_in">Peo</span>()&#123; next = front = <span class="hljs-literal">nullptr</span>; &#125;<br>&#125;n[<span class="hljs-number">100</span>];<br><br><span class="hljs-type">void</span> _Cut(Peo *num)<br>&#123;<br>    num = num-&gt;front;<br>    num-&gt;next = num-&gt;next-&gt;next;<br>    num = num-&gt;next;<br>    num-&gt;front = num-&gt;front-&gt;front;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> tot, outNum, nowNum = <span class="hljs-number">1</span>;<br>    Peo *now = n;            <span class="hljs-comment">//指向目前报数的人的指针</span><br>    cin &gt;&gt; tot &gt;&gt; outNum;        <span class="hljs-comment">//数据读入</span><br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; tot - <span class="hljs-number">1</span>; i++) &#123; n[i].front = n + i - <span class="hljs-number">1</span>; n[i].next = n + i + <span class="hljs-number">1</span>; n[i].ID = i + <span class="hljs-number">1</span>; &#125;<br>    n[<span class="hljs-number">0</span>].front = n + tot - <span class="hljs-number">1</span>; n[<span class="hljs-number">0</span>].next = n + <span class="hljs-number">1</span>; n[tot - <span class="hljs-number">1</span>].front = n + tot - <span class="hljs-number">2</span>; n[tot - <span class="hljs-number">1</span>].next = n;<br>    n[<span class="hljs-number">0</span>].ID = <span class="hljs-number">1</span>; n[tot - <span class="hljs-number">1</span>].ID = tot;<br>    <span class="hljs-comment">//初始化链表</span><br>    <br>    <span class="hljs-keyword">while</span> (tot &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">if</span> (nowNum == outNum) &#123;<br>            cout &lt;&lt; now-&gt;ID &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;        <span class="hljs-comment">//输出出局的人的编号</span><br>            <br>            _Cut(now);                    <span class="hljs-comment">//出局</span><br>            nowNum = <span class="hljs-number">1</span>;                    <span class="hljs-comment">//初始化数字</span><br>            tot--;                        <span class="hljs-comment">//总人数-1</span><br>            now = now-&gt;next;            <span class="hljs-comment">//下一个人</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            nowNum++;                    <span class="hljs-comment">//数字+1</span><br>            now = now-&gt;next;            <span class="hljs-comment">//下一个人</span><br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="方法2：队列"><a href="#方法2：队列" class="headerlink" title="方法2：队列"></a>方法2：队列</h3><p>若是使用链表，这题的代码实现复杂程度无疑大大上升了，其实，我们完全用不着那么麻烦，一个个地报数，可以想象成一个队列，一个人报完数后，判断他所报的数是不是出局的数，如果是，直接弹出，但若不是，将其移动至队尾。</p><p>我们使用一个队列 <code>q</code> 进行模拟，在读取总人数和出局数字后，把这些人一个个地压入队列尾部。在使用队列之前，需要先加上头文件 <code>&lt;queue&gt;</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> tot, outNum, nowNum = <span class="hljs-number">1</span>;<br>        queue&lt;<span class="hljs-type">int</span>&gt; q;<br>        cin &gt;&gt; tot &gt;&gt; outNum;                        <span class="hljs-comment">//读取数据</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= tot; i++)q.<span class="hljs-built_in">push</span>(i);    <span class="hljs-comment">//初始化队列</span><br></code></pre></td></tr></table></figure><p>完成这些之后，开始模拟，整个过程非常直观，在这里就不详细解释了。以下是完整代码。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;queue&gt;</span></span><br>    <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> tot, outNum, nowNum = <span class="hljs-number">1</span>;<br>        queue&lt;<span class="hljs-type">int</span>&gt; q;<br>        cin &gt;&gt; tot &gt;&gt; outNum;                        <span class="hljs-comment">//读取数据</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= tot; i++)q.<span class="hljs-built_in">push</span>(i);    <span class="hljs-comment">//初始化队列</span><br>        <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>())                    <span class="hljs-comment">//在队列不为空时继续模拟</span><br>        &#123;<br>            <span class="hljs-keyword">if</span> (nowNum == outNum)<br>            &#123;<br>                cout &lt;&lt; q.<span class="hljs-built_in">front</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;    <span class="hljs-comment">//打印出局的人的编号</span><br>                q.<span class="hljs-built_in">pop</span>();                    <span class="hljs-comment">//出局</span><br>                nowNum = <span class="hljs-number">1</span>;                    <span class="hljs-comment">//初始化现在的数字</span><br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                nowNum++;<br>                q.<span class="hljs-built_in">push</span>(q.<span class="hljs-built_in">front</span>());            <span class="hljs-comment">//排至队尾</span><br>                q.<span class="hljs-built_in">pop</span>();<br>            &#125;<br>        &#125;<br>        cout &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>14-3-2020 UPD： 替换了正文部分错误或模棱两可的表述。规范了第一段代码中不合适的实现细节。</p><p>作者：Mickey_snow </p><h2 id="解题思路（python）"><a href="#解题思路（python）" class="headerlink" title="解题思路（python）"></a>解题思路（python）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>peo = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>)]<br>ple = []<br>i = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> peo:<br>    i += <span class="hljs-number">1</span><br>    p = peo.pop(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">if</span> i == m:<br>        ple.append(p)<br>        i = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        peo.append(p)<br> <br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ple:<br>    <span class="hljs-built_in">print</span>(i,end = <span class="hljs-string">&quot; &quot;</span>)<br></code></pre></td></tr></table></figure><p>解法2：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs pytohn">import queue        # 导入Python自带的queue标准库可以实现队列、栈、优先队列<br> <br> <br>def josephus(num1, num2):<br>    q = queue.Queue()                # 声明q是一个队列<br>    for i in range(1, num1 + 1):        # 数字依次导入<br>       q.put(i)<br> <br>    while q.qsize() &gt; 0:<br>        for i in range(num2 - 1):    # 死亡计数，被点到的出列<br>            q.put(q.get())<br>        print(q.get(), end=&#x27; &#x27;)    # 输出出列数<br> <br> <br>n, m = map(int, input().split())<br>josephus(n, m)<br></code></pre></td></tr></table></figure><h1 id="P1047-NOIP2005-普及组-校门外的树"><a href="#P1047-NOIP2005-普及组-校门外的树" class="headerlink" title="P1047 [NOIP2005 普及组] 校门外的树"></a>P1047 [NOIP2005 普及组] 校门外的树</h1><h2 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h2><p>某校大门外长度为 $l$ 的马路上有一排树，每两棵相邻的树之间的间隔都是 $1$ 米。我们可以把马路看成一个数轴，马路的一端在数轴 $0$ 的位置，另一端在 $l$ 的位置；数轴上的每个整数点，即 $0,1,2,\dots,l$，都种有一棵树。</p><p>由于马路上有一些区域要用来建地铁。这些区域用它们在数轴上的起始点和终止点表示。已知任一区域的起始点和终止点的坐标都是整数，区域之间可能有重合的部分。现在要把这些区域中的树（包括区域端点处的两棵树）移走。你的任务是计算将这些树都移走后，马路上还有多少棵树。</p><h2 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行有两个整数，分别表示马路的长度 $l$ 和区域的数目 $m$。</p><p>接下来 $m$ 行，每行两个整数 $u, v$，表示一个区域的起始点和终止点的坐标。</p><h2 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出一行一个整数，表示将这些树都移走后，马路上剩余的树木数量。</p><h2 id="样例-1-1"><a href="#样例-1-1" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-1"><a href="#样例输入-1-1" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">500 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">150 </span><span class="hljs-number">300</span><br><span class="hljs-symbol">100 </span><span class="hljs-number">200</span><br><span class="hljs-symbol">470 </span><span class="hljs-number">471</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-1"><a href="#样例输出-1-1" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">298<br></code></pre></td></tr></table></figure><h2 id="提示-1"><a href="#提示-1" class="headerlink" title="提示"></a>提示</h2><p><strong>【数据范围】</strong></p><ul><li>对于 $20%$ 的数据，保证区域之间没有重合的部分。</li><li>对于 $100%$ 的数据，保证 $1 \leq l \leq 10^4$，$1 \leq m \leq 100$，$0 \leq u \leq v \leq l$。</li></ul><p><strong>【题目来源】</strong></p><p>NOIP 2005 普及组第二题</p><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, m = <span class="hljs-number">0</span>;<span class="hljs-comment">//马路长度和区间个数</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;l, &amp;m);<br>    <span class="hljs-type">int</span> u = <span class="hljs-number">0</span>, v = <span class="hljs-number">0</span>;<span class="hljs-comment">//区间的左右位置，u肯定小于v滴</span><br>    <span class="hljs-type">int</span> tree[<span class="hljs-number">10001</span>]=&#123;<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-comment">//树树全部初始化为0，代表没砍过</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<span class="hljs-comment">//一共有m个区间，那就得操作m次呐</span><br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);<span class="hljs-comment">//想从哪砍到哪呢</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = u; j &lt;= v; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(tree[j]==<span class="hljs-number">0</span>)<br>            tree[j] = <span class="hljs-number">1</span>;<span class="hljs-comment">//砍过的标记为1</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<span class="hljs-comment">//剩余sum棵树树还没被砍</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= l; k++)<span class="hljs-comment">//遍历树树</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (tree[k] == <span class="hljs-number">0</span>) sum++;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, sum);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P5732-【深基5-习7】杨辉三角"><a href="#P5732-【深基5-习7】杨辉三角" class="headerlink" title="P5732 【深基5.习7】杨辉三角"></a>P5732 【深基5.习7】杨辉三角</h1><h2 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h2><p>给出 $n(n\le20)$，输出杨辉三角的前 $n$ 行。</p><p>如果你不知道什么是杨辉三角，可以观察样例找找规律。</p><h2 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h2><h2 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h2><h2 id="样例-1-2"><a href="#样例-1-2" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-2"><a href="#样例输入-1-2" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">6<br></code></pre></td></tr></table></figure><h3 id="样例输出-1-2"><a href="#样例输出-1-2" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">4</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span> <span class="hljs-number">10</span> <span class="hljs-number">10</span> <span class="hljs-number">5</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h2><p>杨辉三角形的规律：</p><ul><li>1、每个数等于它上方两数之和。</li><li>2、每行数字左右对称，由1开始逐渐变大。</li><li>3、第n行的数字有n项。</li><li>4、第n行数字和为2^(n-1)。（2的(n-1)次方）</li><li>5 (a+b)^n的展开式中的各项系数依次对应杨辉三角的第(n+1)行中的每一项。</li><li>6、第n行的第m个数和第n-m个数相等，即C(n,m)&#x3D;C(n,n-m)，这是组合数性质</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta"># <span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><span class="hljs-type">int</span> arr[<span class="hljs-number">30</span>][<span class="hljs-number">30</span>]=&#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=i;j++)<br>&#123;<br><span class="hljs-keyword">if</span>(i==<span class="hljs-number">1</span>&amp;&amp;j==<span class="hljs-number">1</span>)<br>&#123;<br>arr[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,arr[i][j]);     <span class="hljs-comment">//第一行是特殊的，需要注意</span><br><span class="hljs-keyword">break</span>;<br>&#125;<br>arr[i][j]=arr[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]+arr[i<span class="hljs-number">-1</span>][j];<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,arr[i][j]);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P1160-队列安排"><a href="#P1160-队列安排" class="headerlink" title="P1160 队列安排"></a>P1160 队列安排</h1><h2 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h2><p>一个学校里老师要将班上 $N$ 个同学排成一列，同学被编号为 $1\sim N$，他采取如下的方法：</p><ol><li><p>先将 $1$ 号同学安排进队列，这时队列中只有他一个人；</p></li><li><p>$2\sim N$ 号同学依次入列，编号为 $i$ 的同学入列方式为：老师指定编号为 $i$ 的同学站在编号为 $1\sim(i-1)$ 中某位同学（即之前已经入列的同学）的左边或右边；</p></li><li><p>从队列中去掉 $M$ 个同学，其他同学位置顺序不变。</p></li></ol><p>在所有同学按照上述方法队列排列完毕后，老师想知道从左到右所有同学的编号。</p><h2 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行一个整数 $N$，表示了有 $N$ 个同学。</p><p>第 $2\sim N$ 行，第 $i$ 行包含两个整数 $k,p$，其中 $k$ 为小于 $i$ 的正整数，$p$ 为 $0$ 或者 $1$。若 $p$ 为 $0$，则表示将 $i$ 号同学插入到 $k$ 号同学的左边，$p$ 为 $1$ 则表示插入到右边。</p><p>第 $N+1$ 行为一个整数 $M$，表示去掉的同学数目。</p><p>接下来 $M$ 行，每行一个正整数 $x$，表示将 $x$ 号同学从队列中移去，如果 $x$ 号同学已经不在队列中则忽略这一条指令。</p><h2 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，包含最多 $N$ 个空格隔开的整数，表示了队列从左到右所有同学的编号。</p><h2 id="样例-1-3"><a href="#样例-1-3" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-3"><a href="#样例输入-1-3" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">0</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">0</span><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-3"><a href="#样例输出-1-3" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">4</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="提示-2"><a href="#提示-2" class="headerlink" title="提示"></a>提示</h2><p><strong>【样例解释】</strong></p><p>将同学 $2$ 插入至同学 $1$ 左边，此时队列为：</p><p><code>2 1</code></p><p>将同学 $3$ 插入至同学 $2$ 右边，此时队列为：</p><p><code>2 3 1</code>  </p><p>将同学 $4$ 插入至同学 $1$ 左边，此时队列为：</p><p><code>2 3 4 1</code>  </p><p>将同学 $3$ 从队列中移出，此时队列为：</p><p><code>2 4 1</code>  </p><p>同学 $3$ 已经不在队列中，忽略最后一条指令</p><p>最终队列：</p><p><code>2 4 1</code>  </p><p><strong>【数据范围】</strong></p><p>对于 $20%$ 的数据，$1\leq N\leq 10$。</p><p>对于 $40%$ 的数据，$1\leq N\leq 1000$。</p><p>对于 $100%$ 的数据，$1&lt;M\leq N\leq 10^5$​。</p><h2 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">100005</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br><span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, r = <span class="hljs-number">0</span>;<br>&#125;L[N];<br><span class="hljs-type">int</span> h[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-type">int</span> n, m, head = <span class="hljs-number">1</span>;<span class="hljs-comment">//初始化头节点为第一个同学</span><br>cin &gt;&gt; n;<br><span class="hljs-built_in">memset</span>(h, <span class="hljs-number">1</span>, <span class="hljs-built_in">sizeof</span>(h));<span class="hljs-comment">//h数组用来检查第i个同学有没有被删除，置1。</span><br><span class="hljs-type">int</span> k, p;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i) &#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;k, &amp;p);<br><span class="hljs-keyword">if</span> (p == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-keyword">if</span> (L[k].l) &#123;<span class="hljs-comment">//如果k同学左边还有同学</span><br>L[L[k].l].r = i;<span class="hljs-comment">//先修改k左边的同学的右边为i</span><br>L[i].l = L[k].l;<br>&#125;<br>L[i].r = k;<span class="hljs-comment">//注意不能写在if (L[k].l)前。</span><br>L[k].l = i;<br><span class="hljs-keyword">if</span> (head == k) &#123;<span class="hljs-comment">//k为头节点的话，i又插入在k左边，则将head=i；</span><br>head = i;<br>&#125;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">//同上</span><br><span class="hljs-keyword">if</span> (L[k].r) &#123;<br>L[L[k].r].l = i;<br>L[i].r = L[k].r;<br>&#125;<br>L[i].l = k;<br>L[k].r = i;<br>&#125;<br>&#125;<br>cin &gt;&gt; m;<br><span class="hljs-type">int</span> cur;<br><span class="hljs-keyword">while</span> (m--) &#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;cur);<br><span class="hljs-keyword">if</span> (h[cur]) &#123;<span class="hljs-comment">//cur没有被删除</span><br><span class="hljs-type">int</span> tmp = L[cur].l;<br><span class="hljs-keyword">if</span> (L[cur].l) &#123;<br>L[L[cur].l].r = L[cur].r;<br>&#125;<span class="hljs-keyword">else</span> &#123;<span class="hljs-comment">//如果左边没有节点，则需要修改头节点</span><br>head = L[cur].r;<br>&#125;<br><span class="hljs-keyword">if</span> (L[cur].r) &#123;<br>L[L[cur].r].l = tmp;<br>&#125;<br>h[cur] = <span class="hljs-number">0</span>;<br>&#125;<br> <br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = head; i != <span class="hljs-number">0</span>; i = L[i].r) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, i);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P4387-【深基15-习9】验证栈序列"><a href="#P4387-【深基15-习9】验证栈序列" class="headerlink" title="P4387 【深基15.习9】验证栈序列"></a>P4387 【深基15.习9】验证栈序列</h1><h2 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h2><p>给出两个序列 pushed 和 poped 两个序列，其取值从 1 到 $n(n\le100000)$。已知入栈序列是 pushed，如果出栈序列有可能是 poped，则输出 <code>Yes</code>，否则输出 <code>No</code>。为了防止骗分，每个测试点有多组数据，不超过 $5$ 组。</p><h2 id="输入格式-4"><a href="#输入格式-4" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行一个整数 $q$，询问次数。</p><p>接下来 $q$ 个询问，对于每个询问：</p><p>第一行一个整数 $n$ 表示序列长度；</p><p>第二行 $n$ 个整数表示入栈序列；</p><p>第三行 $n$ 个整数表示出栈序列；</p><h2 id="输出格式-4"><a href="#输出格式-4" class="headerlink" title="输出格式"></a>输出格式</h2><p>对于每个询问输出答案。</p><h2 id="样例-1-4"><a href="#样例-1-4" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-4"><a href="#样例输入-1-4" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">2</span><br><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span><br><span class="hljs-symbol">5 </span><span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-4"><a href="#样例输出-1-4" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">Yes</span><br><span class="hljs-keyword">No</span><br></code></pre></td></tr></table></figure><h2 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h2><p>在python中，对于栈使用的是stack。</p><p>可以如下两种编写方式，重构后感觉第二种更适合刷题。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">judge</span>(<span class="hljs-params">pushed, poped</span>):  <br>    stack = []<br>    push = <span class="hljs-number">0</span>  <br>    popo = <span class="hljs-number">0</span>  <br>    <span class="hljs-keyword">while</span> push &lt; <span class="hljs-built_in">len</span>(pushed) <span class="hljs-keyword">and</span> popo &lt; <span class="hljs-built_in">len</span>(poped):   <br>        stack.append(pushed[push])  <br>        push += <span class="hljs-number">1</span>   <br>        <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> stack[-<span class="hljs-number">1</span>] == poped[popo]:  <br>            stack.pop()  <br>            popo += <span class="hljs-number">1</span>  <br>    <span class="hljs-keyword">return</span> push == <span class="hljs-built_in">len</span>(pushed) <span class="hljs-keyword">and</span> popo == <span class="hljs-built_in">len</span>(poped) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> stack  <br>q = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):  <br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <br>    pushed = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))  <br>    poped = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))  <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span> <span class="hljs-keyword">if</span> judge(pushed, poped) <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;No&quot;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">q=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    pushed=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>    poped=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>    stack = []<br>    push_index=<span class="hljs-number">0</span><br>    pop_index=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> push_index &lt; <span class="hljs-built_in">len</span>(pushed) <span class="hljs-keyword">and</span> pop_index &lt;<span class="hljs-built_in">len</span>(poped):<br>        stack.append(pushed[push_index])<br>        push_index +=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> stack[-<span class="hljs-number">1</span>]==poped[pop_index]:<br>            stack.pop()<br>            pop_index += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> push_index == <span class="hljs-built_in">len</span>(pushed) <span class="hljs-keyword">and</span> pop_index ==<span class="hljs-built_in">len</span>(poped) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> stack:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="解题思路2"><a href="#解题思路2" class="headerlink" title="解题思路2"></a>解题思路2</h2><p>使用C语言</p><p>   每个数字只能入栈出栈1次，无法将入栈数字全部出栈的输出No</p><p>   除出栈入栈数组外多一个数组作为缓冲区外部循环做n次每次将第i个数据放在缓冲区最顶的内存里，进入内循环如果缓冲区最顶的数据与第j个出栈的数据一致就将数据出栈，内循环直到缓冲区没有数据退出内循环，外循环结束时缓冲区没有数据代表出栈成功。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-type">int</span> a[<span class="hljs-number">100005</span>]=&#123;<span class="hljs-number">0</span>&#125;,top=<span class="hljs-number">0</span>,b[<span class="hljs-number">100005</span>]=&#123;<span class="hljs-number">0</span>&#125;,c[<span class="hljs-number">100005</span>]=&#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-built_in">main</span>()<br>&#123;<br><span class="hljs-type">int</span> i,j=<span class="hljs-number">0</span>,k,q,n;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;q);<br><span class="hljs-keyword">while</span>(q--)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><span class="hljs-built_in">memset</span>(a,<span class="hljs-number">0</span>,n*<span class="hljs-number">4</span>);<br><span class="hljs-built_in">memset</span>(b,<span class="hljs-number">0</span>,n*<span class="hljs-number">4</span>);<br><span class="hljs-built_in">memset</span>(c,<span class="hljs-number">0</span>,n*<span class="hljs-number">4</span>);<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;n;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;a[i]);<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;n;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;b[i]);<br>i=<span class="hljs-number">0</span>;j=<span class="hljs-number">0</span>;  top=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(i&lt;n)<br>&#123;<br>c[top++]=a[i++];<br><span class="hljs-keyword">while</span>(c[top<span class="hljs-number">-1</span>]==b[j] )&#123;<br>j++,top--;<br><span class="hljs-keyword">if</span>(top==<span class="hljs-number">0</span>)<span class="hljs-keyword">break</span>;<br>&#125;<br><br>&#125;<br><span class="hljs-keyword">if</span>(top==<span class="hljs-number">0</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Yes\n&quot;</span>);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;No\n&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P1090-NOIP2004-提高组-合并果子-USACO06NOV-Fence-Repair-G"><a href="#P1090-NOIP2004-提高组-合并果子-USACO06NOV-Fence-Repair-G" class="headerlink" title="P1090 [NOIP2004 提高组] 合并果子 &#x2F; [USACO06NOV] Fence Repair G"></a>P1090 [NOIP2004 提高组] 合并果子 &#x2F; [USACO06NOV] Fence Repair G</h1><h2 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h2><p>在一个果园里，多多已经将所有的果子打了下来，而且按果子的不同种类分成了不同的堆。多多决定把所有的果子合成一堆。</p><p>每一次合并，多多可以把两堆果子合并到一起，消耗的体力等于两堆果子的重量之和。可以看出，所有的果子经过 $n-1$ 次合并之后， 就只剩下一堆了。多多在合并果子时总共消耗的体力等于每次合并所耗体力之和。</p><p>因为还要花大力气把这些果子搬回家，所以多多在合并果子时要尽可能地节省体力。假定每个果子重量都为 $1$ ，并且已知果子的种类 数和每种果子的数目，你的任务是设计出合并的次序方案，使多多耗费的体力最少，并输出这个最小的体力耗费值。</p><p>例如有 $3$ 种果子，数目依次为 $1$ ， $2$ ， $9$ 。可以先将 $1$ 、 $2$ 堆合并，新堆数目为 $3$ ，耗费体力为 $3$ 。接着，将新堆与原先的第三堆合并，又得到新的堆，数目为 $12$ ，耗费体力为 $12$ 。所以多多总共耗费体力 $&#x3D;3+12&#x3D;15$ 。可以证明 $15$ 为最小的体力耗费值。</p><h2 id="输入格式-5"><a href="#输入格式-5" class="headerlink" title="输入格式"></a>输入格式</h2><p>共两行。<br>第一行是一个整数 $n(1\leq n\leq 10000)$ ，表示果子的种类数。  </p><p>第二行包含 $n$ 个整数，用空格分隔，第 $i$ 个整数 $a_i(1\leq a_i\leq 20000)$ 是第 $i$ 种果子的数目。</p><h2 id="输出格式-5"><a href="#输出格式-5" class="headerlink" title="输出格式"></a>输出格式</h2><p>一个整数，也就是最小的体力耗费值。输入数据保证这个值小于 $2^{31}$ 。</p><h2 id="样例-1-5"><a href="#样例-1-5" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-5"><a href="#样例输入-1-5" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-5"><a href="#样例输出-1-5" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">15<br></code></pre></td></tr></table></figure><h2 id="提示-3"><a href="#提示-3" class="headerlink" title="提示"></a>提示</h2><p>对于 $30%$ 的数据，保证有 $n \le 1000$：</p><p>对于 $50%$ 的数据，保证有 $n \le 5000$；</p><p>对于全部的数据，保证有 $n \le 10000$​。</p><h2 id="解题思路-4"><a href="#解题思路-4" class="headerlink" title="解题思路"></a>解题思路</h2><p>这是一个典型的哈夫曼树，哈夫曼树是二叉树中的一种完全二叉树</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br><span class="hljs-type">int</span> n, a1[<span class="hljs-number">99999</span>], a2[<span class="hljs-number">99999</span>];       <span class="hljs-comment">//a1用于存剩余元素，a2用于存合并之后的元素</span><br><span class="hljs-type">int</span> ans, x;            <span class="hljs-comment">//x为a2的元素个数</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cin &gt;&gt; n;<br><span class="hljs-built_in">memset</span>(a1, <span class="hljs-number">127</span>, <span class="hljs-built_in">sizeof</span>(a1));<br><span class="hljs-built_in">memset</span>(a2, <span class="hljs-number">127</span>, <span class="hljs-built_in">sizeof</span>(a2));<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>cin &gt;&gt; a1[i];<br><span class="hljs-built_in">sort</span>(a1, a1 + n);<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>, w;        <span class="hljs-comment">//w为每次一消耗的体力</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt; n; k++)<br>&#123;<br>w = a1[i] &lt; a2[j] ? a1[i++] : a2[j++];<br>w += a1[i] &lt; a2[j] ? a1[i++] : a2[j++];<br>a2[x++] = w;<br>ans += w;<br>&#125;<br>cout &lt;&lt; ans;<br> <br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>首先将两个数组的元素初始值设置为int的最大值，使得后续找最小值时方便，再将数组进行从小到大的排序，当然也是便于寻找最小值。</p><p>ok，进入核心步骤，也就是找最小值合并。</p><p>有n个堆，那么合并成一个堆只需要n-1次操作，因此循环为n-1次</p><p>由于a1(利用了sort函数),a2(每次取最小值合并，下一次合并的堆一定比上一次大)均为从小到大排序</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">  w = a1[i] &lt; a2[j] ? a1[i++] : a2[j++];    <span class="hljs-comment">//第一次取最小值</span><br>w += a1[i] &lt; a2[j] ? a1[i++] : a2[j++];    <span class="hljs-comment">//第二次去最小值</span><br>a2[x++] = w;<br>ans += w;<br></code></pre></td></tr></table></figure><p>那么就可以直接在两个数组中按下标顺序找最小值，i和j起一个指针作用，若该元素已经使用了，就指到下一个元素。通过两次取最小值，找到最小堆合并存入第二个数组中，最后利用ans算出结果</p><h1 id="P1449-后缀表达式"><a href="#P1449-后缀表达式" class="headerlink" title="P1449 后缀表达式"></a>P1449 后缀表达式</h1><h2 id="题目描述-6"><a href="#题目描述-6" class="headerlink" title="题目描述"></a>题目描述</h2><p>所谓后缀表达式是指这样的一个表达式：式中不再引用括号，运算符号放在两个运算对象之后，所有计算按运算符号出现的顺序，严格地由左而右新进行（不用考虑运算符的优先级）。</p><p>本题中运算符仅包含 $\texttt{+-*&#x2F;}$。保证对于 $\texttt{&#x2F;}$ 运算除数不为 0。特别地，其中 $\texttt{&#x2F;}$ 运算的结果需要<strong>向 0 取整</strong>（即与 C++ <code>/</code> 运算的规则一致）。</p><p>如：$\texttt{3*(5-2)+7}$ 对应的后缀表达式为：$\texttt{3.5.2.-*7.+@}$。在该式中，<code>@</code> 为表达式的结束符号。<code>.</code> 为操作数的结束符号。</p><h2 id="输入格式-6"><a href="#输入格式-6" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入一行一个字符串 $s$，表示后缀表达式。</p><h2 id="输出格式-6"><a href="#输出格式-6" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出一个整数，表示表达式的值。</p><h2 id="样例-1-6"><a href="#样例-1-6" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-6"><a href="#样例输入-1-6" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">3</span>.<span class="hljs-number">5</span>.<span class="hljs-number">2</span>.-*<span class="hljs-number">7</span>.+@<br></code></pre></td></tr></table></figure><h3 id="样例输出-1-6"><a href="#样例输出-1-6" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">16<br></code></pre></td></tr></table></figure><h2 id="样例-2"><a href="#样例-2" class="headerlink" title="样例 #2"></a>样例 #2</h2><h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入 #2"></a>样例输入 #2</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">10</span>.<span class="hljs-number">28</span>.<span class="hljs-number">30</span>./*<span class="hljs-number">7</span>.-@<br></code></pre></td></tr></table></figure><h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出 #2"></a>样例输出 #2</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-7</span><br></code></pre></td></tr></table></figure><h2 id="提示-4"><a href="#提示-4" class="headerlink" title="提示"></a>提示</h2><p>数据保证，$1 \leq |s| \leq 50$，答案和计算过程中的每一个值的绝对值不超过 $10^9$​。</p><h2 id="解题思路-5"><a href="#解题思路-5" class="headerlink" title="解题思路"></a>解题思路</h2><p><img src="/./../images/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/format,png.png" alt="img"><br>     上图是一棵表达式树，对应的后缀表达式是4 1 5 2 - * + 6 3 &#x2F; -。</p><p>可以看出，每个运算符结点都有左子树和右子树，每个数字结点都是叶子节点。<br>    表达式树的中序遍历就是中缀表达式。<br>运算方式：左子树的结果 运算符 右子树的结果</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stack&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br>stack &lt;<span class="hljs-type">int</span>&gt; n;<br><span class="hljs-type">int</span> s=<span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">char</span> ch;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        cin&gt;&gt;ch;<br>        <span class="hljs-keyword">if</span>(ch&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;ch&gt;=<span class="hljs-string">&#x27;0&#x27;</span>) s=s*<span class="hljs-number">10</span>+ch-<span class="hljs-string">&#x27;0&#x27;</span>;<span class="hljs-comment">//累计</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;.&#x27;</span>)&#123;<br>            n.<span class="hljs-built_in">push</span>(s);<span class="hljs-comment">//压栈</span><br>            s=<span class="hljs-number">0</span>;<span class="hljs-comment">//s清零</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ch!=<span class="hljs-string">&#x27;@&#x27;</span>)&#123;<br>            <span class="hljs-type">int</span> a1=n.<span class="hljs-built_in">top</span>();n.<span class="hljs-built_in">pop</span>();<span class="hljs-type">int</span> a2=n.<span class="hljs-built_in">top</span>();n.<span class="hljs-built_in">pop</span>();<span class="hljs-comment">//弹出栈顶两个元素</span><br>            <span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;+&#x27;</span>) n.<span class="hljs-built_in">push</span>(a1+a2);<br>            <span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) n.<span class="hljs-built_in">push</span>(a2-a1);<br>            <span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;*&#x27;</span>) n.<span class="hljs-built_in">push</span>(a1*a2);<br>            <span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;/&#x27;</span>) n.<span class="hljs-built_in">push</span>(a2/a1);<br>            <span class="hljs-comment">//压入结果</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>    &#125;<br>    cout&lt;&lt;n.<span class="hljs-built_in">top</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P1241-括号序列"><a href="#P1241-括号序列" class="headerlink" title="P1241 括号序列"></a>P1241 括号序列</h1><h2 id="题目描述-7"><a href="#题目描述-7" class="headerlink" title="题目描述"></a>题目描述</h2><p>定义如下规则：</p><ol><li>空串是「平衡括号序列」</li><li>若字符串 $S$ 是「平衡括号序列」，那么 $\texttt{[}S\texttt]$ 和 $\texttt{(}S\texttt)$ 也都是「平衡括号序列」</li><li>若字符串 $A$ 和 $B$ 都是「平衡括号序列」，那么 $AB$（两字符串拼接起来）也是「平衡括号序列」。</li></ol><p>例如，下面的字符串都是平衡括号序列：</p><ul><li><code>()</code>，<code>[]</code>，<code>(())</code>，<code>([])</code>，<code>()[]</code>，<code>()[()]</code></li></ul><p>而以下几个则不是：</p><ul><li><code>(</code>，<code>[</code>，<code>]</code>，<code>)(</code>，<code>())</code>，<code>([()</code></li></ul><p>现在，给定一个仅由 <code>(</code>，<code>)</code>，<code>[</code>，<code>]</code>构成的字符串 $s$，请你按照如下的方式给字符串中每个字符配对：</p><ol><li>从左到右扫描整个字符串。</li><li>对于当前的字符，如果它是一个右括号，考察它与它左侧离它<strong>最近</strong>的<strong>未匹配</strong>的的左括号。如果该括号与之对应（即小括号匹配小括号，中括号匹配中括号），则将二者配对。如果左侧未匹配的左括号不存在或与之不对应，则其配对失败。</li></ol><p>配对结束后，对于 $s$ 中全部未配对的括号，请你在其旁边添加一个字符，使得该括号和新加的括号匹配。</p><h2 id="输入格式-7"><a href="#输入格式-7" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入只有一行一个字符串，表示 $s$。</p><h2 id="输出格式-7"><a href="#输出格式-7" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出一行一个字符串表示你的答案。</p><h2 id="样例-1-7"><a href="#样例-1-7" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-7"><a href="#样例输入-1-7" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure">([()<br></code></pre></td></tr></table></figure><h3 id="样例输出-1-7"><a href="#样例输出-1-7" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scheme">()[]()<br></code></pre></td></tr></table></figure><h2 id="样例-2-1"><a href="#样例-2-1" class="headerlink" title="样例 #2"></a>样例 #2</h2><h3 id="样例输入-2-1"><a href="#样例输入-2-1" class="headerlink" title="样例输入 #2"></a>样例输入 #2</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-comment">([)</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-2-1"><a href="#样例输出-2-1" class="headerlink" title="样例输出 #2"></a>样例输出 #2</h3><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scheme">()[]()<br></code></pre></td></tr></table></figure><h2 id="提示-5"><a href="#提示-5" class="headerlink" title="提示"></a>提示</h2><h3 id="数据规模与约定"><a href="#数据规模与约定" class="headerlink" title="数据规模与约定"></a>数据规模与约定</h3><p>对于全部的测试点，保证 $s$ 的长度不超过 $100$​，且只含  <code>(</code>，<code>)</code>，<code>[</code>，<code>]</code> 四种字符。</p><h2 id="解题思路-6"><a href="#解题思路-6" class="headerlink" title="解题思路"></a>解题思路</h2><ul><li><p>参考思路<br>原题目：扫描一遍原序列，对每一个右括号，找到在它左边最靠近它的左括号匹配，如果没有就放弃。</p></li><li><p>翻译：扫描一遍原序列，当找到一个右括号（即找到一个 ‘ ) ‘ 或者 ‘ ] ‘ 时），以它为起点向左找，找到一个没被标记成功匹配的左括号（即找到一个 ‘ ( ‘ 或者 ‘ [ ‘ ），如果两者匹配的话，标记它们成功匹配，如果不匹配，或者找不到左括号的话，不做任何标记。</p></li><li><p>原题目：在以这种方式把原序列匹配完成后，把剩下的未匹配的括号补全。</p></li><li><p>翻译：上面扫描一遍标记完成功匹配的括号之后，扫描一遍序列，对于标记过的括号，则直接输出；对于没有标记的括号，则补全成对输出</p></li><li><p>举例：如果有个 ‘ [ ‘ 或 ‘ ] ‘ 没被标记匹配，则输出 [ ]</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br> <br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br><span class="hljs-type">int</span> a[<span class="hljs-number">105</span>]; <span class="hljs-comment">// 标记</span><br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> i,j;<br>    string s;<br>    cin &gt;&gt; s;<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;s.<span class="hljs-built_in">length</span>(); i++) &#123;<br>        <span class="hljs-keyword">if</span> (s[i] == <span class="hljs-string">&#x27;)&#x27;</span>) &#123; <span class="hljs-comment">// 找到了右括号</span><br>            <span class="hljs-keyword">for</span> (j=i<span class="hljs-number">-1</span>; j&gt;=<span class="hljs-number">0</span>; j--) &#123;<br>                <span class="hljs-keyword">if</span> (s[j] == <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-keyword">and</span> a[j] == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// 找到了没被匹配过的左括号且匹配成功</span><br>                    a[i] = a[j] = <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s[j] == <span class="hljs-string">&#x27;[&#x27;</span> <span class="hljs-keyword">and</span> a[j] == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 找到了左括号但匹配失败</span><br>            &#125;<br>            <span class="hljs-comment">// 找不到左括号，不做任何操作</span><br>        &#125;<br>        <span class="hljs-comment">// 下面同理</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s[i] == <span class="hljs-string">&#x27;]&#x27;</span>) &#123;<br>            <span class="hljs-keyword">for</span> (j=i<span class="hljs-number">-1</span>; j&gt;=<span class="hljs-number">0</span>; j--) &#123;<br>                <span class="hljs-keyword">if</span> (s[j] == <span class="hljs-string">&#x27;[&#x27;</span> <span class="hljs-keyword">and</span> a[j] == <span class="hljs-number">0</span>) &#123;<br>                    a[i] = a[j] = <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s[j] == <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-keyword">and</span> a[j] == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;s.<span class="hljs-built_in">length</span>(); i++) &#123;<br>        <span class="hljs-keyword">if</span> (a[i] == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// 没有匹配则成对输出</span><br>            <span class="hljs-keyword">if</span> (s[i] == <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-keyword">or</span> s[i] == <span class="hljs-string">&#x27;)&#x27;</span>) cout &lt;&lt; <span class="hljs-string">&quot;()&quot;</span>;<br>            <span class="hljs-keyword">else</span> cout &lt;&lt; <span class="hljs-string">&quot;[]&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> cout &lt;&lt; s[i]; <span class="hljs-comment">// 匹配成功则直接输出</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h1 id="P1044-NOIP2003-普及组-栈"><a href="#P1044-NOIP2003-普及组-栈" class="headerlink" title="P1044 [NOIP2003 普及组] 栈"></a>P1044 [NOIP2003 普及组] 栈</h1><h2 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h2><p>栈是计算机中经典的数据结构，简单的说，栈就是限制在一端进行插入删除操作的线性表。</p><p>栈有两种最重要的操作，即 pop（从栈顶弹出一个元素）和 push（将一个元素进栈）。</p><p>栈的重要性不言自明，任何一门数据结构的课程都会介绍栈。宁宁同学在复习栈的基本概念时，想到了一个书上没有讲过的问题，而他自己无法给出答案，所以需要你的帮忙。</p><h2 id="题目描述-8"><a href="#题目描述-8" class="headerlink" title="题目描述"></a>题目描述</h2><p><img src="/./../images/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/5qxy9fz2.png"></p><p>宁宁考虑的是这样一个问题：一个操作数序列，$1,2,\ldots ,n$（图示为 1 到 3 的情况），栈 A 的深度大于 $n$。</p><p>现在可以进行两种操作，</p><ol><li>将一个数，从操作数序列的头端移到栈的头端（对应数据结构栈的 push 操作）</li><li>将一个数，从栈的头端移到输出序列的尾端（对应数据结构栈的 pop 操作）</li></ol><p>使用这两种操作，由一个操作数序列就可以得到一系列的输出序列，下图所示为由 <code>1 2 3</code> 生成序列 <code>2 3 1</code> 的过程。</p><p><img src="/./../images/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/8uwv2pa2.png"></p><p>（原始状态如上图所示）</p><p>你的程序将对给定的 $n$，计算并输出由操作数序列 $1,2,\ldots,n$ 经过操作可能得到的输出序列的总数。</p><h2 id="输入格式-8"><a href="#输入格式-8" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入文件只含一个整数 $n$（$1 \leq n \leq 18$）。</p><h2 id="输出格式-8"><a href="#输出格式-8" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出文件只有一行，即可能输出序列的总数目。</p><h2 id="样例-1-8"><a href="#样例-1-8" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-8"><a href="#样例输入-1-8" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><h3 id="样例输出-1-8"><a href="#样例输出-1-8" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><h2 id="提示-6"><a href="#提示-6" class="headerlink" title="提示"></a>提示</h2><p><strong>【题目来源】</strong></p><p>NOIP 2003 普及组第三题</p><h2 id="解题思路-7"><a href="#解题思路-7" class="headerlink" title="解题思路"></a>解题思路</h2><p>思路：先定义数组和变量，然后令f[0]&#x3D;1,f[1]&#x3D;1,默认f[0]&#x3D;1纯粹是为了满足表达式计算，无实际意义；然后用卡特兰数递推式方可求出从2开始到n的各个f值，最后输出f[n]即可.<br>    **卡特兰数原理：令h(0)&#x3D;1,h(1)&#x3D;1，catalan数满足递推式:h(n)&#x3D; h(0)<em>h(n-1)+h(1)<em>h(n-2) + … + h(n-1)h(0) (n&gt;&#x3D;2)</em></em></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1001</span>;<br><span class="hljs-type">int</span> f[MAXN],n;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    cin&gt;&gt;n;<br>    f[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>, f[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">//从2到n按规律递推</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>;i &lt;= n;i++)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; i;j++)<br>            f[i] += f[j] * f[i-j<span class="hljs-number">-1</span>];<span class="hljs-comment">//卡特兰数递推式</span><br>    cout&lt;&lt;f[n];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P6033-NOIP2004-提高组-合并果子-加强版"><a href="#P6033-NOIP2004-提高组-合并果子-加强版" class="headerlink" title="P6033 [NOIP2004 提高组] 合并果子 加强版"></a>P6033 [NOIP2004 提高组] 合并果子 加强版</h1><h2 id="题目背景-1"><a href="#题目背景-1" class="headerlink" title="题目背景"></a>题目背景</h2><p>本题除【数据范围与约定】外与 <a href="https://www.luogu.com.cn/problem/P1090">P1090</a> <strong>完  全  一  致</strong>。</p><h2 id="题目描述-9"><a href="#题目描述-9" class="headerlink" title="题目描述"></a>题目描述</h2><p>在一个果园里，多多已经将所有的果子打了下来，而且按果子的不同种类分成了不同的堆。多多决定把所有的果子合成一堆。</p><p>每一次合并，多多可以把两堆果子合并到一起，消耗的体力等于两堆果子的重量之和。可以看出，所有的果子经过 $(n - 1)$ 次合并之后， 就只剩下一堆了。多多在合并果子时总共消耗的体力等于每次合并所耗体力之和。</p><p>因为还要花大力气把这些果子搬回家，所以多多在合并果子时要尽可能地节省体力。假定每个果子重量都为 $1$，并且已知果子的种类数和每种果子的数目，你的任务是设计出合并的次序方案，使多多耗费的体力最少，并输出这个最小的体力耗费值。</p><p>例如有 $3$ 堆果子，数目依次为 $1,<del>2,</del>9$。可以先将 $1$、$2$ 堆合并，新堆数目为 $3$，耗费体力为 $3$。接着，将新堆与原先的第三堆合并，又得到新的堆，数目为 $12$，耗费体力为 $12$。所以多多总共耗费体力为 $3+12&#x3D;15$。可以证明 $15$ 为最小的体力耗费值。</p><h2 id="输入格式-9"><a href="#输入格式-9" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入的第一行是一个整数 $n$，代表果子的堆数。<br>输入的第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表第 $i$ 堆果子的个数 $a_i$。</p><h2 id="输出格式-9"><a href="#输出格式-9" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出一行一个整数，表示最小耗费的体力值。</p><h2 id="样例-1-9"><a href="#样例-1-9" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-9"><a href="#样例输入-1-9" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-9"><a href="#样例输出-1-9" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">15<br></code></pre></td></tr></table></figure><h2 id="提示-7"><a href="#提示-7" class="headerlink" title="提示"></a>提示</h2><p><strong>【数据规模与约定】</strong></p><p><strong>本题采用多测试点捆绑测试，共有四个子任务</strong>。</p><ul><li>Subtask 1（10 points）：$1 \leq n \leq 8$。</li><li>Subtask 2（20 points）：$1 \leq n \leq 10^3$。</li><li>Subtask 3（30 points）：$1 \leq n \leq 10^5$。</li><li>Subtask 4（40 points）：$1 \leq n \leq 10^7$。</li></ul><p>对于全部的测试点，保证 $1 \leq a_i \leq 10^5$。</p><p><strong>【提示】</strong></p><ul><li>请注意常数因子对程序效率造成的影响。</li><li>请使用类型合适的变量来存储本题的结果。</li><li>本题输入规模较大，请注意数据读入对程序效率造成的影响。</li></ul><h2 id="解题思路-8"><a href="#解题思路-8" class="headerlink" title="解题思路"></a>解题思路</h2><p>参考文章：<a href="https://blog.csdn.net/qq_46105170/article/details/125371722?ops_request_misc=%7B%22request_id%22:%22171423979916800180663041%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=171423979916800180663041&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-125371722-null-null.142%5Ev100%5Epc_search_result_base1&utm_term=P6033&spm=1018.2226.3001.4187">【洛谷】P6033 合并果子 加强版（配数学证明）_洛谷6033测试数据-CSDN博客</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>, N = <span class="hljs-number">1e7</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n, a[M];<br><span class="hljs-type">long</span> res;<br><span class="hljs-type">long</span> q1[N], q2[N];<br><span class="hljs-type">int</span> hh1, tt1, hh2, tt2;<br><br><span class="hljs-comment">// 快读</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">read</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;x)</span> </span>&#123;<br>  <span class="hljs-type">int</span> si = <span class="hljs-number">1</span>;<br>  x = <span class="hljs-number">0</span>;<br>  <span class="hljs-type">char</span> c = <span class="hljs-built_in">getchar</span>();<br>  <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;-&#x27;</span>) si = <span class="hljs-number">-1</span>, c = <span class="hljs-built_in">getchar</span>();<br>  <span class="hljs-keyword">for</span> (; <span class="hljs-string">&#x27;0&#x27;</span> &lt;= c &amp;&amp; c &lt;= <span class="hljs-string">&#x27;9&#x27;</span>; c = <span class="hljs-built_in">getchar</span>())<br>    x = x * <span class="hljs-number">10</span> + c - <span class="hljs-string">&#x27;0&#x27;</span>;<br>  x *= si;<br>&#125;<br><br><span class="hljs-comment">// 两个队列里取队头最小值</span><br><span class="hljs-function"><span class="hljs-type">long</span> <span class="hljs-title">find_min</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">long</span> x;<br>  <span class="hljs-keyword">if</span> (hh2 == tt2 || hh1 &lt; tt1 &amp;&amp; q1[hh1] &lt; q2[hh2]) x = q1[hh1++];<br>  <span class="hljs-keyword">else</span> x = q2[hh2++];<br>  <span class="hljs-keyword">return</span> x;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">read</span>(n);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>, x; i &lt;= n; i++) &#123;<br>    <span class="hljs-built_in">read</span>(x);<br>    a[x]++;<br>  &#125;<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; M; i++) <span class="hljs-keyword">while</span> (a[i]) a[i]--, q1[tt1++] = i;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>    <span class="hljs-type">long</span> x = <span class="hljs-built_in">find_min</span>(), y = <span class="hljs-built_in">find_min</span>();<br>    res += x + y;<br>    q2[tt2++] = x + y;<br>  &#125;<br><br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%ld\n&quot;</span>, res);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P3370-【模板】字符串哈希"><a href="#P3370-【模板】字符串哈希" class="headerlink" title="P3370 【模板】字符串哈希"></a>P3370 【模板】字符串哈希</h1><h2 id="题目描述-10"><a href="#题目描述-10" class="headerlink" title="题目描述"></a>题目描述</h2><p>如题，给定 $N$ 个字符串（第 $i$ 个字符串长度为 $M_i$，字符串内包含数字、大小写字母，大小写敏感），请求出 $N$ 个字符串中共有多少个不同的字符串。</p><p><strong>友情提醒：如果真的想好好练习哈希的话，请自觉。</strong></p><h2 id="输入格式-10"><a href="#输入格式-10" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行包含一个整数 $N$，为字符串的个数。</p><p>接下来 $N$ 行每行包含一个字符串，为所提供的字符串。</p><h2 id="输出格式-10"><a href="#输出格式-10" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出包含一行，包含一个整数，为不同的字符串个数。</p><h2 id="样例-1-10"><a href="#样例-1-10" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-10"><a href="#样例输入-1-10" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-number">5</span><br><span class="hljs-keyword">abc</span><br>aaaa<br><span class="hljs-keyword">abc</span><br>abcc<br><span class="hljs-number">12345</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-10"><a href="#样例输出-1-10" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">4<br></code></pre></td></tr></table></figure><h2 id="提示-8"><a href="#提示-8" class="headerlink" title="提示"></a>提示</h2><p>对于 $30%$ 的数据：$N\leq 10$，$M_i≈6$，$Mmax\leq 15$。</p><p>对于 $70%$ 的数据：$N\leq 1000$，$M_i≈100$，$Mmax\leq 150$。</p><p>对于 $100%$ 的数据：$N\leq 10000$，$M_i≈1000$，$Mmax\leq 1500$。</p><p>样例说明：</p><p>样例中第一个字符串(abc)和第三个字符串(abc)是一样的，所以所提供字符串的集合为{aaaa,abc,abcc,12345}，故共计4个不同的字符串。</p><p>Tip：<br>感兴趣的话，你们可以先看一看以下三题：</p><p>BZOJ3097：<a href="http://www.lydsy.com/JudgeOnline/problem.php?id=3097">http://www.lydsy.com/JudgeOnline/problem.php?id=3097</a></p><p>BZOJ3098：<a href="http://www.lydsy.com/JudgeOnline/problem.php?id=3098">http://www.lydsy.com/JudgeOnline/problem.php?id=3098</a></p><p>BZOJ3099：<a href="http://www.lydsy.com/JudgeOnline/problem.php?id=3099">http://www.lydsy.com/JudgeOnline/problem.php?id=3099</a></p><p>如果你仔细研究过了（或者至少仔细看过AC人数的话），我想你一定会明白字符串哈希的正确姿势的^_^</p><h2 id="提示-9"><a href="#提示-9" class="headerlink" title="提示"></a>提示</h2><p>对于 $30%$ 的数据：$N\leq 10$，$M_i≈6$，$Mmax\leq 15$。</p><p>对于 $70%$ 的数据：$N\leq 1000$，$M_i≈100$，$Mmax\leq 150$。</p><p>对于 $100%$ 的数据：$N\leq 10000$，$M_i≈1000$，$Mmax\leq 1500$。</p><p>样例说明：</p><p>样例中第一个字符串(abc)和第三个字符串(abc)是一样的，所以所提供字符串的集合为{aaaa,abc,abcc,12345}，故共计4个不同的字符串。</p><p>Tip：<br>感兴趣的话，你们可以先看一看以下三题：</p><p>BZOJ3097：<a href="http://www.lydsy.com/JudgeOnline/problem.php?id=3097">http://www.lydsy.com/JudgeOnline/problem.php?id=3097</a></p><p>BZOJ3098：<a href="http://www.lydsy.com/JudgeOnline/problem.php?id=3098">http://www.lydsy.com/JudgeOnline/problem.php?id=3098</a></p><p>BZOJ3099：<a href="http://www.lydsy.com/JudgeOnline/problem.php?id=3099">http://www.lydsy.com/JudgeOnline/problem.php?id=3099</a></p><p>如果你仔细研究过了（或者至少仔细看过AC人数的话），我想你一定会明白字符串哈希的正确姿势的^_^</p><h2 id="解题代码"><a href="#解题代码" class="headerlink" title="解题代码"></a>解题代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n))<br>a.sort()<br>cout=<span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> a:<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(a)==<span class="hljs-number">1</span>:<br>        cout+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> a[<span class="hljs-number">0</span>]!=a[<span class="hljs-number">1</span>]:<br>        cout+=<span class="hljs-number">1</span><br>        a.pop(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">else</span>:<br>        a.pop(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(cout)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>lst = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>lst.sort()<br> <br>count = n<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>    <span class="hljs-keyword">if</span> lst[i] == lst[i - <span class="hljs-number">1</span>]:<br>        count -= <span class="hljs-number">1</span><br> <br><span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><h2 id="解题思路-9"><a href="#解题思路-9" class="headerlink" title="解题思路"></a>解题思路</h2><p><a href="https://blog.csdn.net/louisdlee/article/details/134437128?ops_request_misc=%7B%22request_id%22:%22171423993116800184189562%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=171423993116800184189562&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-134437128-null-null.142%5Ev100%5Epc_search_result_base1&utm_term=P3370&spm=1018.2226.3001.4187">《洛谷深入浅出基础篇》 p3370字符串哈希——hash表_洛谷p3370-CSDN博客</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-type">int</span> LL;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">1007</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> base = <span class="hljs-number">117</span>;<br><br>vector&lt;string&gt; linker[mod + <span class="hljs-number">2</span>];<br>string s;<br><span class="hljs-type">int</span> ans;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert1</span><span class="hljs-params">(string s)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> hash = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; s.<span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>hash = (hash*<span class="hljs-number">1ll</span>*base + (LL)s[i]) % mod;<br>&#125;<br> <br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; linker[hash].<span class="hljs-built_in">size</span>(); i++)<br><span class="hljs-keyword">if</span> (linker[hash][i] == s)<span class="hljs-keyword">return</span>;<br>linker[hash].<span class="hljs-built_in">push_back</span>(s);<br>ans++;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br>cin &gt;&gt; n;<br><span class="hljs-keyword">while</span> (n--)<br>&#123;<br>cin &gt;&gt; s;<br><span class="hljs-built_in">insert1</span>(s);<br>&#125;<br>cout &lt;&lt; ans;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P5250-【深基17-例5】木材仓库"><a href="#P5250-【深基17-例5】木材仓库" class="headerlink" title="P5250 【深基17.例5】木材仓库"></a>P5250 【深基17.例5】木材仓库</h1><h2 id="题目描述-11"><a href="#题目描述-11" class="headerlink" title="题目描述"></a>题目描述</h2><p>博艾市有一个木材仓库，里面可以存储各种长度的木材，但是保证没有两个木材的长度是相同的。作为仓库负责人，你有时候会进货，有时候会出货，因此需要维护这个库存。有不超过 100000 条的操作：</p><ul><li>进货，格式<code>1 Length</code>：在仓库中放入一根长度为 Length(不超过 $10^9$) 的木材。如果已经有相同长度的木材那么输出<code>Already Exist</code>。</li><li>出货，格式<code>2 Length</code>：从仓库中取出长度为 Length 的木材。如果没有刚好长度的木材，取出仓库中存在的和要求长度最接近的木材。如果有多根木材符合要求，取出比较短的一根。输出取出的木材长度。如果仓库是空的，输出<code>Empty</code>。</li></ul><h2 id="输入格式-11"><a href="#输入格式-11" class="headerlink" title="输入格式"></a>输入格式</h2><h2 id="输出格式-11"><a href="#输出格式-11" class="headerlink" title="输出格式"></a>输出格式</h2><h2 id="样例-1-11"><a href="#样例-1-11" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-11"><a href="#样例输入-1-11" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">7</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-11"><a href="#样例输出-1-11" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-number">3</span><br><span class="hljs-number">1</span><br><span class="hljs-number">5</span><br><span class="hljs-built_in">Empty</span><br></code></pre></td></tr></table></figure><h2 id="解题答案"><a href="#解题答案" class="headerlink" title="解题答案"></a>解题答案</h2><p>python版</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> bisect <span class="hljs-keyword">import</span> bisect_left  <br>  <br>s = <span class="hljs-built_in">set</span>()  <br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <br>  <br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):  <br>    k, l = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <br>      <br>    <span class="hljs-keyword">if</span> k == <span class="hljs-number">1</span>:  <br>        <span class="hljs-keyword">if</span> l <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s:  <br>            s.add(l)  <br>        <span class="hljs-keyword">else</span>:  <br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Already Exist&quot;</span>)  <br>    <span class="hljs-keyword">else</span>:  <br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> s:  <br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Empty&quot;</span>)  <br>            <span class="hljs-keyword">continue</span>  <br>          <br>        <span class="hljs-comment"># Python的set没有lower_bound方法，但我们可以使用bisect_left来找到最接近l的元素索引  </span><br>        <span class="hljs-comment"># 首先将set转换为sorted list  </span><br>        sorted_s = <span class="hljs-built_in">sorted</span>(s)  <br>        index = bisect_left(sorted_s, l)  <br>          <br>        <span class="hljs-keyword">if</span> index == <span class="hljs-number">0</span>:  <br>            <span class="hljs-built_in">print</span>(sorted_s[index])  <br>            s.remove(sorted_s[index])  <br>            <span class="hljs-keyword">continue</span>  <br>          <br>        <span class="hljs-keyword">if</span> index == <span class="hljs-built_in">len</span>(sorted_s):  <br>            index -= <span class="hljs-number">1</span>  <br>            <span class="hljs-built_in">print</span>(sorted_s[index])  <br>            s.remove(sorted_s[index])  <br>            <span class="hljs-keyword">continue</span>  <br>          <br>        <span class="hljs-comment"># 找出离l最近的两个元素  </span><br>        prev = sorted_s[index - <span class="hljs-number">1</span>]  <br>        curr = sorted_s[index]  <br>          <br>        <span class="hljs-comment"># 根据差值大小决定删除哪个元素  </span><br>        <span class="hljs-keyword">if</span> l - prev &lt;= curr - l:  <br>            <span class="hljs-built_in">print</span>(prev)  <br>            s.remove(prev)  <br>        <span class="hljs-keyword">else</span>:  <br>            <span class="hljs-built_in">print</span>(curr)  <br>            s.remove(curr)<br></code></pre></td></tr></table></figure><p>c语言版</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> IOS ios::sync_with_stdio(0),cin.tie(0),cout.tie(0)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> endl <span class="hljs-string">&quot;\n&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> pb push_back</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> lb lower_bound</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ub upper_bound</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">1e12</span>+<span class="hljs-number">10</span>;<br>set&lt;<span class="hljs-type">int</span>&gt; s;<span class="hljs-comment">//存放木材 </span><br><span class="hljs-type">int</span> num=<span class="hljs-number">0</span>;<span class="hljs-comment">//目前有几个木材 </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-type">int</span> op,x;<br>cin&gt;&gt;op&gt;&gt;x;<br><span class="hljs-keyword">if</span>(op==<span class="hljs-number">1</span>)&#123;<br><span class="hljs-keyword">if</span>(s.<span class="hljs-built_in">count</span>(x))<br>  cout&lt;&lt;<span class="hljs-string">&quot;Already Exist&quot;</span>&lt;&lt;endl;<br><span class="hljs-keyword">else</span><br>  s.<span class="hljs-built_in">insert</span>(x);<span class="hljs-comment">//存放长度为x木材  </span><br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(op==<span class="hljs-number">2</span>)&#123;<br><span class="hljs-keyword">if</span>(s.<span class="hljs-built_in">size</span>()==<span class="hljs-number">2</span>)<br>  cout&lt;&lt;<span class="hljs-string">&quot;Empty&quot;</span>&lt;&lt;endl;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">auto</span> k=s.<span class="hljs-built_in">lb</span>(x);<br><span class="hljs-keyword">if</span>(*k==x)&#123;<span class="hljs-comment">//有刚好长度的木材 </span><br>cout&lt;&lt;x&lt;&lt;endl;<br>s.<span class="hljs-built_in">erase</span>(k);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">auto</span> k1=s.<span class="hljs-built_in">lb</span>(x),k2=--s.<span class="hljs-built_in">lb</span>(x);<span class="hljs-comment">//找到长度接近x的木材 </span><br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">abs</span>(*k1-x)&lt;<span class="hljs-built_in">abs</span>(*k2-x))&#123; <br>cout&lt;&lt;*k1&lt;&lt;endl;<br>s.<span class="hljs-built_in">erase</span>(k1); <br>&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-comment">//取最接近x且比较短的一根木材</span><br>cout&lt;&lt;*k2&lt;&lt;endl;<br>s.<span class="hljs-built_in">erase</span>(k2); <br>&#125;<br>&#125;<br>&#125;<br>&#125; <br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>IOS;<br>s.<span class="hljs-built_in">insert</span>(INF),s.<span class="hljs-built_in">insert</span>(-INF);<br><span class="hljs-type">int</span> T=<span class="hljs-number">1</span>;<br>cin&gt;&gt;T;<br><span class="hljs-keyword">while</span>(T--)&#123;<br><span class="hljs-built_in">solve</span>();<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P5266-【深基17-例6】学籍管理"><a href="#P5266-【深基17-例6】学籍管理" class="headerlink" title="P5266 【深基17.例6】学籍管理"></a>P5266 【深基17.例6】学籍管理</h1><h2 id="题目描述-12"><a href="#题目描述-12" class="headerlink" title="题目描述"></a>题目描述</h2><p>您要设计一个学籍管理系统，最开始学籍数据是空的，然后该系统能够支持下面的操作（不超过 $10^5$ 条）：</p><ul><li>插入与修改，格式<code>1 NAME SCORE</code>：在系统中插入姓名为 NAME(由字母和数字组成不超过 20 个字符的字符串，区分大小写) ，分数为 $\texttt{SCORE}$（$0&lt;\texttt{SCORE}&lt;2^{31}$） 的学生。如果已经有同名的学生则更新这名学生的成绩为 SCORE。如果成功插入或者修改则输出<code>OK</code>。</li><li>查询，格式<code>2 NAME</code>：在系统中查询姓名为 NAME 的学生的成绩。如果没能找到这名学生则输出<code>Not found</code>，否则输出该生成绩。</li><li>删除，格式<code>3 NAME</code>：在系统中删除姓名为 NAME 的学生信息。如果没能找到这名学生则输出<code>Not found</code>，否则输出<code>Deleted successfully</code>。</li><li>汇总，格式<code>4</code>：输出系统中学生数量。</li></ul><h2 id="输入格式-12"><a href="#输入格式-12" class="headerlink" title="输入格式"></a>输入格式</h2><h2 id="输出格式-12"><a href="#输出格式-12" class="headerlink" title="输出格式"></a>输出格式</h2><h2 id="样例-1-12"><a href="#样例-1-12" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-12"><a href="#样例输入-1-12" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span>lxl <span class="hljs-number">10</span><br><span class="hljs-symbol">2 </span>lxl<br><span class="hljs-symbol">3 </span>lxl<br><span class="hljs-symbol">2 </span>lxl<br><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-12"><a href="#样例输出-1-12" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">OK</span><br><span class="hljs-number">10</span><br><span class="hljs-variable">Deleted</span> <span class="hljs-variable">successfully</span><br><span class="hljs-built_in">Not</span> <span class="hljs-variable">found</span><br><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="解题思路-10"><a href="#解题思路-10" class="headerlink" title="解题思路"></a>解题思路</h3><p>题目要求对字符串进行存储、修改、查询、删除、统计数目等操作，考虑到直接对字符串进行上述操作在代码实现和时间复杂度上都不够优，从而想到利用哈希建立映射关系，对哈希函数的返回值进行操作。</p><p><strong>代码：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,sc,k,num,haxh;<span class="hljs-comment">//n为操作总数，sc为学生分数，k为操作格式，num记录系统中的人数，haxh用于存储字符串hash值。 </span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> base=<span class="hljs-number">173</span>,mod=<span class="hljs-number">19260817</span>;<span class="hljs-comment">//哈希函数的基数和模数。 </span><br><span class="hljs-type">char</span> s[<span class="hljs-number">114</span>];<span class="hljs-comment">//学生姓名。 </span><br><span class="hljs-type">int</span> b[<span class="hljs-number">30000000</span>];<span class="hljs-comment">//利用数组进行操作。 </span><br><span class="hljs-function"><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title">hs</span><span class="hljs-params">(<span class="hljs-type">char</span> str[])</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> len=<span class="hljs-built_in">strlen</span>(str),ans=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;i++)<br>ans=(ans*base+(<span class="hljs-type">long</span> <span class="hljs-type">long</span>)str[i])%mod;<br><span class="hljs-keyword">return</span> ans;<br>&#125;<span class="hljs-comment">//通过哈希函数将字符串映射到 int 类型上。 </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><span class="hljs-keyword">while</span>(n--)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;k);<br><span class="hljs-keyword">if</span>(k&lt;<span class="hljs-number">4</span>)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s);<span class="hljs-comment">//前三种操作需要读入学生姓名。 </span><br>haxh=<span class="hljs-built_in">hs</span>(s);<span class="hljs-comment">//计算学生姓名的hash值。 </span><br><span class="hljs-keyword">if</span>(k==<span class="hljs-number">1</span>)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;sc);<br><span class="hljs-keyword">if</span>(b[haxh]&lt;=<span class="hljs-number">0</span>) <br>num++;<span class="hljs-comment">//分数小于等于0说明系统中没有该学生，学生总数加一。</span><br>b[haxh]=sc;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;OK\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k==<span class="hljs-number">2</span>)<br>&#123;<br><span class="hljs-keyword">if</span>(b[haxh]&gt;<span class="hljs-number">0</span>)<span class="hljs-comment">//判断系统中有无该学生的信息。 </span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,b[haxh]);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Not found\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k==<span class="hljs-number">3</span>)<br>&#123;<br><span class="hljs-keyword">if</span>(b[haxh]&gt;<span class="hljs-number">0</span>)<br>&#123;<br>b[haxh]=<span class="hljs-number">0</span>;<br>num--;<span class="hljs-comment">//删除该生信息。 </span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Deleted successfully\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Not found\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,num);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>当然也可以用 $STL$ 中的 $map$ 来建立映射关系，但在时间常数上要比手打哈希略大。</p><p><img src="/./../images/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/resize,m_lfit,h_1700,w_2205.png"></p><p>上面三次提交使用的是手打哈希，下面两次提交使用的是 $map$ ，可以明显看出 $map$ 比手打哈希要慢。</p><p><strong>代码：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,sc,k,num;<br><span class="hljs-type">char</span> s[<span class="hljs-number">114</span>];<br>map&lt;string,<span class="hljs-type">int</span>&gt;sys;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><span class="hljs-keyword">while</span>(n--)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;k);<br><span class="hljs-keyword">if</span>(k&lt;<span class="hljs-number">4</span>)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s);<br><span class="hljs-keyword">if</span>(k==<span class="hljs-number">1</span>)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;sc);<br><span class="hljs-keyword">if</span>(sys[s]&lt;=<span class="hljs-number">0</span>)<br>num++;<br>sys[s]=sc;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;OK\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k==<span class="hljs-number">2</span>)<br>&#123;<br><span class="hljs-keyword">if</span>(sys[s]&gt;<span class="hljs-number">0</span>)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,sys[s]);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Not found\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k==<span class="hljs-number">3</span>)<br>&#123;<br><span class="hljs-keyword">if</span>(sys[s]&gt;<span class="hljs-number">0</span>)<br>&#123;<br>sys[s]=<span class="hljs-number">0</span>;<br>num--;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Deleted successfully\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Not found\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,num);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>作者：linponess    创建时间：2019-12-26 11:45:56</p><h1 id="P1102-A-B-数对"><a href="#P1102-A-B-数对" class="headerlink" title="P1102 A-B 数对"></a>P1102 A-B 数对</h1><h2 id="题目背景-2"><a href="#题目背景-2" class="headerlink" title="题目背景"></a>题目背景</h2><p>出题是一件痛苦的事情！</p><p>相同的题目看多了也会有审美疲劳，于是我舍弃了大家所熟悉的 A+B Problem，改用 A-B 了哈哈！</p><h2 id="题目描述-13"><a href="#题目描述-13" class="headerlink" title="题目描述"></a>题目描述</h2><p>给出一串正整数数列以及一个正整数 $C$，要求计算出所有满足 $A - B &#x3D; C$ 的数对的个数（不同位置的数字一样的数对算不同的数对）。</p><h2 id="输入格式-13"><a href="#输入格式-13" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入共两行。</p><p>第一行，两个正整数 $N,C$。</p><p>第二行，$N$ 个正整数，作为要求处理的那串数。</p><h2 id="输出格式-13"><a href="#输出格式-13" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，表示该串正整数中包含的满足 $A - B &#x3D; C$ 的数对的个数。</p><h2 id="样例-1-13"><a href="#样例-1-13" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-13"><a href="#样例输入-1-13" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">4 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-13"><a href="#样例输出-1-13" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><h2 id="提示-10"><a href="#提示-10" class="headerlink" title="提示"></a>提示</h2><p>对于 $75%$ 的数据，$1 \leq N \leq 2000$。</p><p>对于 $100%$ 的数据，$1 \leq N \leq 2 \times 10^5$，$0 \leq a_i &lt;2^{30}$，$1 \leq C &lt; 2^{30}$。</p><p>2017&#x2F;4&#x2F;29 新添数据两组</p><h2 id="解题思路-11"><a href="#解题思路-11" class="headerlink" title="解题思路"></a>解题思路</h2><h3 id="map-映照容器可以解决这一题"><a href="#map-映照容器可以解决这一题" class="headerlink" title="map 映照容器可以解决这一题"></a><strong>map 映照容器可以解决这一题</strong></h3><p>首先，我们来了解一下 map 是个什么东西：</p><ul><li>map 映照容器在头文件中定义，它的元素数据是由一个键值和一个映照数据组成的，键值和映照数据具有一一对应的关系，键值可以是数，也可以是字符。 例如：</li></ul><hr><p>键值    映照数据<br>  <span>(name)</span>     <span>(score)</span><br>   Alice        <span>98</span><br>   Mary        <span>96</span><br>   <span>156</span>        <span>66</span></p><hr><p>在没有指定比较函数时，元素是从小到大插入的。比较函数只对键值进行比较，元素的各项数据可以通过键值检索出来。</p><hr><p>对于这一道题，我们可以把 A-B&#x3D;C 改成 B+C&#x3D;A，再通过 map 进行映照，就可以得出答案。</p><p><strong>code:</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span><span class="hljs-comment">//万能头文件,不用调用头文件&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> n,c,co=<span class="hljs-number">0</span>; <span class="hljs-comment">//要开long long,否则会 WA 一个数据点 </span><br>    cin&gt;&gt;n&gt;&gt;c; <br>    <span class="hljs-type">int</span> a[n+<span class="hljs-number">1</span>];<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; b;<span class="hljs-comment">//键值和映照数据都是 int 类型</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123; <br>        cin&gt;&gt;a[i]; b[a[i]]++;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) <br>        co+=b[a[i]+c];<span class="hljs-comment">//反向思维,枚举 B+C </span><br>    cout&lt;&lt;co&lt;&lt;endl; <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125;<br></code></pre></td></tr></table></figure><p>作者：onepeople666    创建时间：2020-02-04 13:12:37</p><p>以上是洛谷题解中的一种C++做法，那么对于这个问题，肯定要使用自己熟悉的语言来进行实现。</p><h3 id="python如何解决这一个问题？"><a href="#python如何解决这一个问题？" class="headerlink" title="python如何解决这一个问题？"></a>python如何解决这一个问题？</h3><h4 id="常规思路：遍历"><a href="#常规思路：遍历" class="headerlink" title="常规思路：遍历"></a>常规思路：遍历</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py">n,c=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>nums=<span class="hljs-built_in">list</span>=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>count_dict=&#123;&#125;<br>pair_count=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>    <span class="hljs-keyword">if</span> num -c <span class="hljs-keyword">in</span> count_dict:<br>        pair_count +=count_dict[num -c]<br>    count_dict[num] =count_dict.get(num,<span class="hljs-number">0</span>) +<span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(pair_count)<br></code></pre></td></tr></table></figure><p>虽然确实符合思维逻辑，但是超时了。</p><p>那就使用算法，使用二分算法比较符合当前的情况，在python中，可以使用bisect库来实现。</p><h4 id="二分实现："><a href="#二分实现：" class="headerlink" title="二分实现："></a>二分实现：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> bisect<br>n,c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>lst0 = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>lst0.sort() <span class="hljs-comment">#此方法用到了二分查找,所以需要先对列表进行排序</span><br>lst1 = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    lst1[i] = lst0[i]-c<br>count = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    x = bisect.bisect_left (lst0,lst1[i])<br>    y = bisect.bisect_right(lst0,lst1[i])<br>    count += y-x<br><span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><h3 id="知识点补充（bisect库）"><a href="#知识点补充（bisect库）" class="headerlink" title="知识点补充（bisect库）"></a>知识点补充（bisect库）</h3><h4 id="1-基础知识"><a href="#1-基础知识" class="headerlink" title="1 基础知识"></a>1 基础知识</h4><p><strong>前提：列表有序！！！</strong></p><p><a href="https://so.csdn.net/so/search?q=bisect&spm=1001.2101.3001.7020">bisect</a>()和bisect_right()等同，那下面就介绍bisect_left()和bisec_right()的区别！</p><p>用法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">index1 = bisect(ls, x)   <span class="hljs-comment">#第1个参数是列表，第2个参数是要查找的数，返回值为索引</span><br>index2 = bisect_left(ls, x)<br>index3 = bisec_right(ls, x)<br></code></pre></td></tr></table></figure><p>bisect.bisect和bisect.bisect_right返回大于x的第一个下标(相当于C++中的upper_bound)，bisect.bisect_left返回大于等于x的第一个下标(相当于C++中的lower_bound)。</p><p>case1<br>如果列表中没有元素x，那么bisect_left(ls, x)和bisec_right(ls, x)返回相同的值，该值是x在ls中“<strong>合适的插入点索引，使得数组有序</strong>”。此时，ls[index2] &gt; x，ls[index3] &gt; x。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> bisect<br>ls = [<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>,<span class="hljs-number">13</span>,<span class="hljs-number">17</span>]<br>index1 = bisect.bisect(ls,<span class="hljs-number">7</span>)<br>index2 = bisect.bisect_left(ls,<span class="hljs-number">7</span>)<br>index3 = bisect.bisect_right(ls,<span class="hljs-number">7</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;index1 = &#123;&#125;, index2 = &#123;&#125;, index3 = &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(index1, index2, index3))<br></code></pre></td></tr></table></figure><p>程序运行结果为，</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">index1 = <span class="hljs-number">2</span>, index2 = <span class="hljs-number">2</span>, index3 = <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>case2<br>如果列表中只有一个元素等于x，那么bisect_left(ls, x)的值是x在ls中的<strong>索引</strong>，ls[index2] &#x3D; x。而bisec_right(ls, x)的值是x在ls中的<strong>索引加1</strong>，ls[index3] &gt; x。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> bisect<br>ls = [<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>,<span class="hljs-number">13</span>,<span class="hljs-number">17</span>]<br>index1 = bisect.bisect(ls,<span class="hljs-number">9</span>)<br>index2 = bisect.bisect_left(ls,<span class="hljs-number">9</span>)<br>index3 = bisect.bisect_right(ls,<span class="hljs-number">9</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;index1 = &#123;&#125;, index2 = &#123;&#125;, index3 = &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(index1, index2, index3))<br></code></pre></td></tr></table></figure><p>程序运行结果为，</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">index1 = <span class="hljs-number">3</span>, index2 = <span class="hljs-number">2</span>, index3 = <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>case3<br>如果列表中存在多个元素等于x，那么bisect_left(ls, x)返回<strong>最左边的那个索引</strong>，此时ls[index2] &#x3D; x。bisect_right(ls, x)返回<strong>最右边的那个索引加1</strong>，此时ls[index3] &gt; x。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> bisect<br>ls = [<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">17</span>]<br>index1 = bisect.bisect(ls,<span class="hljs-number">5</span>)<br>index2 = bisect.bisect_left(ls,<span class="hljs-number">5</span>)<br>index3 = bisect.bisect_right(ls,<span class="hljs-number">5</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;index1 = &#123;&#125;, index2 = &#123;&#125;, index3 = &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(index1, index2, index3))<br></code></pre></td></tr></table></figure><p>程序运行结果为，</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">index1 = <span class="hljs-number">4</span>, index2 = <span class="hljs-number">1</span>, index3 = <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h4 id="2-扩展知识"><a href="#2-扩展知识" class="headerlink" title="2 扩展知识"></a>2 扩展知识</h4><p>（一）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python3">j = bisect.bisect_right(rides, start, hi = i - 1, key = lambda x : x[1])<br></code></pre></td></tr></table></figure><p><code>rides</code>：这是一个列表，已经按顺序排列。</p><p><code>start</code>：这是我们要在<code>rides</code>中查找的元素。</p><p><code>hi = i - 1</code>：这是查找的上界。具体而言，在<code>[0, hi)</code>这个左闭右开区间中，寻找满足<code>rides[x][1] &gt; start</code>且<code>x</code>最小的case，返回<code>x</code>。如果没有找到，则返回<code>hi</code>。</p><p><code>key = lambda x : x[1]</code>：这是用于比较的元素。默认情况下，<code>bisect_right</code>比较元素<code>x</code>的值，而这里表示比较元素<code>x</code>的下标等于1的元素的值（说明元素<code>x</code>是一个列表或元组等等），即<code>x[1]</code>。</p><p>参考文章：<a href="http://t.csdnimg.cn/ZdACV">http://t.csdnimg.cn/ZdACV</a></p><h1 id="P8681-蓝桥杯-2019-省-AB-完全二叉树的权值"><a href="#P8681-蓝桥杯-2019-省-AB-完全二叉树的权值" class="headerlink" title="P8681 [蓝桥杯 2019 省 AB] 完全二叉树的权值"></a>P8681 [蓝桥杯 2019 省 AB] 完全二叉树的权值</h1><h2 id="题目描述-14"><a href="#题目描述-14" class="headerlink" title="题目描述"></a>题目描述</h2><p>给定一棵包含 $N$ 个节点的完全二叉树，树上每个节点都有一个权值，按从上到下、从左到右的顺序依次是 $A_1,A_2, \cdots A_N$，如下图所示：</p><p><img src="/./../images/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/lq1cyfst.png"></p><p>现在小明要把相同深度的节点的权值加在一起，他想知道哪个深度的节点权值之和最大？如果有多个深度的权值和同为最大，请你输出其中最小的深度。</p><p>注：根的深度是 $1$。</p><h2 id="输入格式-14"><a href="#输入格式-14" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行包含一个整数 $N$。</p><p>第二行包含 $N$ 个整数 $A_1,A_2, \cdots, A_N$。</p><h2 id="输出格式-14"><a href="#输出格式-14" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出一个整数代表答案。</p><h2 id="样例-1-14"><a href="#样例-1-14" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-14"><a href="#样例输入-1-14" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">7</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">6</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-14"><a href="#样例输出-1-14" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">2<br></code></pre></td></tr></table></figure><h2 id="提示-11"><a href="#提示-11" class="headerlink" title="提示"></a>提示</h2><p>对于所有评测用例，$1 \le N \le 10^5$，$0 \le |A_i| \le 10^5$。</p><p>蓝桥杯 2019 省赛 A 组 F 题（B 组 G 题）。</p><h1 id="P4715-【深基16-例1】淘汰赛"><a href="#P4715-【深基16-例1】淘汰赛" class="headerlink" title="P4715 【深基16.例1】淘汰赛"></a>P4715 【深基16.例1】淘汰赛</h1><h2 id="题目描述-15"><a href="#题目描述-15" class="headerlink" title="题目描述"></a>题目描述</h2><p>有 $2^n$（$n\le7$）个国家参加世界杯决赛圈且进入淘汰赛环节。已经知道各个国家的能力值，且都不相等。能力值高的国家和能力值低的国家踢比赛时高者获胜。1 号国家和 2 号国家踢一场比赛，胜者晋级。3 号国家和 4 号国家也踢一场，胜者晋级……晋级后的国家用相同的方法继续完成赛程，直到决出冠军。给出各个国家的能力值，请问亚军是哪个国家？</p><h2 id="输入格式-15"><a href="#输入格式-15" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行一个整数 $n$，表示一共 $2^n$ 个国家参赛。</p><p>第二行 $2^n$ 个整数，第 $i$ 个整数表示编号为 $i$ 的国家的能力值（$1\leq i \leq 2^n$）。</p><p>数据保证不存在平局。</p><h2 id="输出格式-15"><a href="#输出格式-15" class="headerlink" title="输出格式"></a>输出格式</h2><p>仅一个整数，表示亚军国家的编号。</p><h2 id="样例-1-15"><a href="#样例-1-15" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-15"><a href="#样例输入-1-15" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">3</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">10</span> <span class="hljs-number">5</span> <span class="hljs-number">9</span> <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-15"><a href="#样例输出-1-15" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">1<br></code></pre></td></tr></table></figure><h3 id="解题答案-1"><a href="#解题答案-1" class="headerlink" title="解题答案"></a>解题答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>L=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>q=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> L:<br>    q.append(i)<br><span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(q)&gt;<span class="hljs-number">2</span>:<br>    a,b=q.pop(<span class="hljs-number">0</span>),q.pop(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">if</span> a&gt;b:<br>        q.append(a)<br>    <span class="hljs-keyword">else</span>:<br>        q.append(b)<br><span class="hljs-built_in">print</span>(L.index(<span class="hljs-built_in">min</span>(q))+<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h1 id="P4913-【深基16-例3】二叉树深度"><a href="#P4913-【深基16-例3】二叉树深度" class="headerlink" title="P4913 【深基16.例3】二叉树深度"></a>P4913 【深基16.例3】二叉树深度</h1><h2 id="题目描述-16"><a href="#题目描述-16" class="headerlink" title="题目描述"></a>题目描述</h2><p>有一个 $n(n \le 10^6)$ 个结点的二叉树。给出每个结点的两个子结点编号（均不超过 $n$），建立一棵二叉树（根节点的编号为 $1$），如果是叶子结点，则输入 <code>0 0</code>。</p><p>建好这棵二叉树之后，请求出它的深度。二叉树的<strong>深度</strong>是指从根节点到叶子结点时，最多经过了几层。</p><h2 id="输入格式-16"><a href="#输入格式-16" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行一个整数 $n$，表示结点数。</p><p>之后 $n$ 行，第 $i$ 行两个整数 $l$、$r$，分别表示结点 $i$ 的左右子结点编号。若 $l&#x3D;0$ 则表示无左子结点，$r&#x3D;0$ 同理。</p><h2 id="输出格式-16"><a href="#输出格式-16" class="headerlink" title="输出格式"></a>输出格式</h2><p>一个整数，表示最大结点深度。</p><h2 id="样例-1-16"><a href="#样例-1-16" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-16"><a href="#样例输入-1-16" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">7</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">7</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">6</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-16"><a href="#样例输出-1-16" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">4<br></code></pre></td></tr></table></figure><h3 id="解题答案-2"><a href="#解题答案-2" class="headerlink" title="解题答案"></a>解题答案</h3><p>可以使用bfs或dfs进行求解</p><h4 id="DFS搜索答案"><a href="#DFS搜索答案" class="headerlink" title="DFS搜索答案"></a>DFS搜索答案</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys <br>sys.setrecursionlimit(<span class="hljs-number">5000</span>)<br> <br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">global</span> longth<br>    <span class="hljs-keyword">if</span> x == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> V[x] == (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>):<br>        <span class="hljs-keyword">return</span><br>    longth = <span class="hljs-built_in">max</span>(longth, y)<br>    dfs(V[x][<span class="hljs-number">0</span>], y + <span class="hljs-number">1</span>)<br>    dfs(V[x][<span class="hljs-number">1</span>], y + <span class="hljs-number">1</span>)<br> <br> <br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>V = &#123;&#125;  <span class="hljs-comment"># 建个字典</span><br>longth = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    l, r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    V[i + <span class="hljs-number">1</span>] = (l, r)  <span class="hljs-comment"># 塞键值对,节点数</span><br> <br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(longth + <span class="hljs-number">1</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br></code></pre></td></tr></table></figure><h4 id="BFS搜索答案"><a href="#BFS搜索答案" class="headerlink" title="BFS搜索答案"></a>BFS搜索答案</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">bfs</span>(<span class="hljs-params">n</span>):<br>    q.append(n)<br>    G[n]=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> q:<br>        x=q.pop(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">dict</span>[x][j]!=<span class="hljs-number">0</span>:<br>                q.append(<span class="hljs-built_in">dict</span>[x][j])<br>                G[<span class="hljs-built_in">dict</span>[x][j]]=G[x]+<span class="hljs-number">1</span><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>q=[]<br><span class="hljs-built_in">dict</span>=&#123;&#125;<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    l,r=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-built_in">dict</span>[i+<span class="hljs-number">1</span>]=(l,r)<br>G=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>bfs(<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(G))<br></code></pre></td></tr></table></figure><h1 id="P1030-NOIP2001-普及组-求先序排列"><a href="#P1030-NOIP2001-普及组-求先序排列" class="headerlink" title="P1030 [NOIP2001 普及组] 求先序排列"></a>P1030 [NOIP2001 普及组] 求先序排列</h1><h2 id="题目描述-17"><a href="#题目描述-17" class="headerlink" title="题目描述"></a>题目描述</h2><p>给出一棵二叉树的中序与后序排列。求出它的先序排列。（约定树结点用不同的大写字母表示，且二叉树的节点个数 $ \le 8$）。</p><h2 id="输入格式-17"><a href="#输入格式-17" class="headerlink" title="输入格式"></a>输入格式</h2><p>共两行，均为大写字母组成的字符串，表示一棵二叉树的中序与后序排列。</p><h2 id="输出格式-17"><a href="#输出格式-17" class="headerlink" title="输出格式"></a>输出格式</h2><p>共一行一个字符串，表示一棵二叉树的先序。</p><h2 id="样例-1-17"><a href="#样例-1-17" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-17"><a href="#样例输入-1-17" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">BADC</span><br><span class="hljs-attribute">BDCA</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-17"><a href="#样例输出-1-17" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ABCD</span><br></code></pre></td></tr></table></figure><h2 id="提示-12"><a href="#提示-12" class="headerlink" title="提示"></a>提示</h2><p><strong>【题目来源】</strong></p><p>NOIP 2001 普及组第三题</p><h3 id="解题思路-12"><a href="#解题思路-12" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">首先先序中序后序，搞懂<br>我们知道，后序是“左 右 根”<br>中序是“左 根 右”<br>所以，后序的最后一个必定是“根”<br>接着，在中序中找到这个根，它左边便是此时这个节点的左子树，右边便是这个节点的右子树，一直递归<br>为了优化，我们发现先序是“根 左 右”，<br>所以每次循环的时候打出后序的最后一个，便是这个树的“根”<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 从用户那里获取中序遍历的字符串输入  </span><br>mid = <span class="hljs-built_in">input</span>()  <br><span class="hljs-comment"># 从用户那里获取后序遍历的字符串输入  </span><br>last = <span class="hljs-built_in">input</span>()  <br><span class="hljs-comment"># 定义一个函数bf，用于构建先序遍历  </span><br><span class="hljs-comment"># 参数m表示中序遍历字符串，l表示后序遍历字符串  </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bf</span>(<span class="hljs-params">m, l</span>):  <br>    <span class="hljs-comment"># 如果中序遍历或后序遍历的字符串为空，则直接返回空字符串  </span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(l) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(m) == <span class="hljs-number">0</span>:  <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>  <br>    <span class="hljs-comment"># 找到后序遍历字符串最后一个字符（即根节点）在中序遍历字符串中的位置  </span><br>    k = m.index(l[-<span class="hljs-number">1</span>])  <br>    <span class="hljs-comment"># 拼接先序遍历的结果：根节点 + 左子树的先序遍历 + 右子树的先序遍历  </span><br>    <span class="hljs-comment"># 注意：左子树的中序遍历是m[0:k]，后序遍历是l[0:k]  </span><br>    <span class="hljs-comment">#       右子树的中序遍历是m[k+1:]，后序遍历是l[k:-1]（去掉根节点）  </span><br>    <span class="hljs-keyword">return</span> l[-<span class="hljs-number">1</span>] + bf(m[<span class="hljs-number">0</span>:k], l[<span class="hljs-number">0</span>:k]) + bf(m[k+<span class="hljs-number">1</span>:], l[k:-<span class="hljs-number">1</span>])  <br><span class="hljs-comment"># 调用bf函数，传入中序遍历和后序遍历的字符串，得到先序遍历的结果  </span><br>t = bf(mid, last)  <br><span class="hljs-comment"># 打印先序遍历的结果，注意这里t[1:]是为了去掉根节点前的多余字符（如果有的话）  </span><br><span class="hljs-built_in">print</span>(t[<span class="hljs-number">1</span>:])<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">mid=<span class="hljs-built_in">input</span>()<br>last=<span class="hljs-built_in">input</span>()<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bf</span>(<span class="hljs-params">m,l</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(l)==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(m)==<span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br>    k=m.index(l[-<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">return</span> l[-<span class="hljs-number">1</span>]+bf(m[<span class="hljs-number">0</span>:k],l[<span class="hljs-number">0</span>:k])+bf(m[k+<span class="hljs-number">1</span>:],l[k:-<span class="hljs-number">1</span>])<br>t=bf(mid,last)<br><span class="hljs-built_in">print</span>(t[<span class="hljs-number">1</span>:])<br></code></pre></td></tr></table></figure><h1 id="P1157-组合的输出"><a href="#P1157-组合的输出" class="headerlink" title="P1157 组合的输出"></a>P1157 组合的输出</h1><h2 id="题目描述-18"><a href="#题目描述-18" class="headerlink" title="题目描述"></a>题目描述</h2><p>排列与组合是常用的数学方法，其中组合就是从 $n$ 个元素中抽出 $r$ 个元素（不分顺序且 $r \le n$），我们可以简单地将 $n$ 个元素理解为自然数 $1,2,\dots,n$，从中任取 $r$ 个数。</p><p>现要求你输出所有组合。</p><p>例如 $n&#x3D;5,r&#x3D;3$，所有组合为：</p><p>$123,124,125,134,135,145,234,235,245,345$。</p><h2 id="输入格式-18"><a href="#输入格式-18" class="headerlink" title="输入格式"></a>输入格式</h2><p>一行两个自然数 $n,r(1&lt;n&lt;21,0 \le r \le n)$。</p><h2 id="输出格式-18"><a href="#输出格式-18" class="headerlink" title="输出格式"></a>输出格式</h2><p>所有的组合，每一个组合占一行且其中的元素按由小到大的顺序排列，每个元素占三个字符的位置，所有的组合也按字典顺序。</p><p><strong>注意哦！输出时，每个数字需要 $3$ 个场宽。以 C++ 为例，你可以使用下列代码：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">cout &lt;&lt; <span class="hljs-built_in">setw</span>(<span class="hljs-number">3</span>) &lt;&lt; x;<br></code></pre></td></tr></table></figure><p>输出占 $3$ 个场宽的数 $x$。注意你需要头文件 <code>iomanip</code>。</p><h2 id="样例-1-18"><a href="#样例-1-18" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-18"><a href="#样例输入-1-18" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">5 </span><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-18"><a href="#样例输出-1-18" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span><br>  <span class="hljs-attribute">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">4</span><br>  <span class="hljs-attribute">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">5</span><br>  <span class="hljs-attribute">1</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span><br>  <span class="hljs-attribute">1</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span><br>  <span class="hljs-attribute">1</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span><br>  <span class="hljs-attribute">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span><br>  <span class="hljs-attribute">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">5</span><br>  <span class="hljs-attribute">2</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span><br>  <span class="hljs-attribute">3</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h1 id="P3378-【模板】堆"><a href="#P3378-【模板】堆" class="headerlink" title="P3378 【模板】堆"></a>P3378 【模板】堆</h1><h2 id="题目描述-19"><a href="#题目描述-19" class="headerlink" title="题目描述"></a>题目描述</h2><p>给定一个数列，初始为空，请支持下面三种操作：</p><ol><li>给定一个整数 $x$，请将 $x$ 加入到数列中。</li><li>输出数列中最小的数。</li><li>删除数列中最小的数（如果有多个数最小，只删除 $1$ 个）。</li></ol><h2 id="输入格式-19"><a href="#输入格式-19" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行是一个整数，表示操作的次数 $n$。<br>接下来 $n$ 行，每行表示一次操作。每行首先有一个整数 $op$ 表示操作类型。</p><ul><li>若 $op &#x3D; 1$，则后面有一个整数 $x$，表示要将 $x$ 加入数列。</li><li>若 $op &#x3D; 2$，则表示要求输出数列中的最小数。</li><li>若 $op &#x3D; 3$，则表示删除数列中的最小数。如果有多个数最小，只删除 $1$ 个。</li></ul><h2 id="输出格式-19"><a href="#输出格式-19" class="headerlink" title="输出格式"></a>输出格式</h2><p>对于每个操作 $2$，输出一行一个整数表示答案。</p><h2 id="样例-1-19"><a href="#样例-1-19" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-19"><a href="#样例输入-1-19" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-19"><a href="#样例输出-1-19" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">2<br>5<br></code></pre></td></tr></table></figure><h2 id="提示-13"><a href="#提示-13" class="headerlink" title="提示"></a>提示</h2><p><strong>【数据规模与约定】</strong></p><ul><li>对于 $30%$ 的数据，保证 $n \leq 15$。</li><li>对于 $70%$ 的数据，保证 $n \leq 10^4$。</li><li>对于 $100%$ 的数据，保证 $1 \leq n \leq 10^6$，$1 \leq x \lt 2^{31}$，$op \in {1, 2, 3}$。</li></ul><h1 id="P1135-奇怪的电梯"><a href="#P1135-奇怪的电梯" class="headerlink" title="P1135 奇怪的电梯"></a>P1135 奇怪的电梯</h1><h2 id="题目背景-3"><a href="#题目背景-3" class="headerlink" title="题目背景"></a>题目背景</h2><p>感谢 @<a href="https://www.luogu.com.cn/user/101694">yummy</a> 提供的一些数据。</p><h2 id="题目描述-20"><a href="#题目描述-20" class="headerlink" title="题目描述"></a>题目描述</h2><p>呵呵，有一天我做了一个梦，梦见了一种很奇怪的电梯。大楼的每一层楼都可以停电梯，而且第 $i$ 层楼（$1 \le i \le N$）上有一个数字 $K_i$（$0 \le K_i \le N$）。电梯只有四个按钮：开，关，上，下。上下的层数等于当前楼层上的那个数字。当然，如果不能满足要求，相应的按钮就会失灵。例如： $3, 3, 1, 2, 5$ 代表了 $K_i$（$K_1&#x3D;3$，$K_2&#x3D;3$，……），从 $1$ 楼开始。在 $1$ 楼，按“上”可以到 $4$ 楼，按“下”是不起作用的，因为没有 $-2$ 楼。那么，从 $A$ 楼到 $B$ 楼至少要按几次按钮呢？</p><h2 id="输入格式-20"><a href="#输入格式-20" class="headerlink" title="输入格式"></a>输入格式</h2><p>共二行。  </p><p>第一行为三个用空格隔开的正整数，表示 $N, A, B$（$1 \le N \le 200$，$1 \le A, B \le N$）。</p><p>第二行为 $N$ 个用空格隔开的非负整数，表示 $K_i$。</p><h2 id="输出格式-20"><a href="#输出格式-20" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行，即最少按键次数，若无法到达，则输出 <code>-1</code>。</p><h2 id="样例-1-20"><a href="#样例-1-20" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-20"><a href="#样例输入-1-20" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">5 </span><span class="hljs-number">1</span> <span class="hljs-number">5</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-20"><a href="#样例输出-1-20" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><h2 id="提示-14"><a href="#提示-14" class="headerlink" title="提示"></a>提示</h2><p>对于 $100 %$ 的数据，$1 \le N \le 200$，$1 \le A, B \le N$，$0 \le K_i \le N$。</p><p>本题共 $16$ 个测试点，前 $15$ 个每个测试点 $6$ 分，最后一个测试点 $10$ 分。</p><h1 id="P1334-瑞瑞的木板"><a href="#P1334-瑞瑞的木板" class="headerlink" title="P1334 瑞瑞的木板"></a>P1334 瑞瑞的木板</h1><h2 id="题目背景-4"><a href="#题目背景-4" class="headerlink" title="题目背景"></a>题目背景</h2><p>瑞瑞想要亲自修复在他的一个小牧场周围的围栏。</p><h2 id="题目描述-21"><a href="#题目描述-21" class="headerlink" title="题目描述"></a>题目描述</h2><p>他测量栅栏并发现他需要 $n$ 根木板，每根的长度为整数 $l_i$。于是，他买了一根足够长的木板，长度为所需的 $n$ 根木板的长度的总和，他决定将这根木板切成所需的 $n$ 根木板（瑞瑞在切割木板时不会产生木屑，不需考虑切割时损耗的长度)。</p><p>瑞瑞切割木板时使用的是一种特殊的方式，这种方式在将一根长度为 $x$ 的木板切为两根时，需要消耗 $x$ 个单位的能量。瑞瑞拥有无尽的能量，但现在提倡节约能量，所以作为榜样，他决定尽可能节约能量。显然，总共需要切割 $(n-1)$ 次，问题是，每次应该怎么切呢？请编程计算最少需要消耗的能量总和。</p><h2 id="输入格式-21"><a href="#输入格式-21" class="headerlink" title="输入格式"></a>输入格式</h2><p>输入的第一行是整数，表示所需木板的数量 $n$。</p><p>第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $l_i$ 代表第  $i$ 根木板的长度 $l_i$。</p><h2 id="输出格式-21"><a href="#输出格式-21" class="headerlink" title="输出格式"></a>输出格式</h2><p>一个整数，表示最少需要消耗的能量总和。</p><h2 id="样例-1-21"><a href="#样例-1-21" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-21"><a href="#样例输入-1-21" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs">3<br>8<br>5<br>8<br></code></pre></td></tr></table></figure><h3 id="样例输出-1-21"><a href="#样例输出-1-21" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">34<br></code></pre></td></tr></table></figure><h2 id="提示-15"><a href="#提示-15" class="headerlink" title="提示"></a>提示</h2><h4 id="输入输出样例-1-解释"><a href="#输入输出样例-1-解释" class="headerlink" title="输入输出样例 1 解释"></a>输入输出样例 1 解释</h4><p>将长度为 $21$ 的木板，第一次切割为长度为 $8$ 和长度为 $13$ 的，消耗 $21$ 个单位的能量，第二次将长度为 $13$ 的木板切割为长度为 $5$ 和 $8$ 的，消耗 $13$ 个单位的能量，共消耗 $34$ 个单位的能量，是消耗能量最小的方案。</p><hr><h4 id="数据规模与约定-1"><a href="#数据规模与约定-1" class="headerlink" title="数据规模与约定"></a>数据规模与约定</h4><ul><li>对于 $100%$ 的数据，保证 $1\le n \le 2 \times 10^4$，$1 \leq l_i \leq 5 \times 10^4$。</li></ul><h1 id="P1631-序列合并"><a href="#P1631-序列合并" class="headerlink" title="P1631 序列合并"></a>P1631 序列合并</h1><h2 id="题目描述-22"><a href="#题目描述-22" class="headerlink" title="题目描述"></a>题目描述</h2><p>有两个长度为 $N$ 的<strong>单调不降</strong>序列 $A,B$，在 $A,B$ 中各取一个数相加可以得到 $N^2$ 个和，求这 $N^2$ 个和中最小的 $N$ 个。</p><h2 id="输入格式-22"><a href="#输入格式-22" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行一个正整数 $N$；</p><p>第二行 $N$ 个整数 $A_{1\dots N}$。</p><p>第三行 $N$ 个整数 $B_{1\dots N}$。</p><h2 id="输出格式-22"><a href="#输出格式-22" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行 $N$ 个整数，从小到大表示这 $N$ 个最小的和。</p><h2 id="样例-1-22"><a href="#样例-1-22" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-22"><a href="#样例输入-1-22" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">6</span> <span class="hljs-number">6</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">4</span> <span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-22"><a href="#样例输出-1-22" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">6</span> <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h2 id="提示-16"><a href="#提示-16" class="headerlink" title="提示"></a>提示</h2><p>对于 $50%$ 的数据，$N \le 10^3$。</p><p>对于 $100%$ 的数据，$1 \le N \le 10^5$，$1 \le a_i,b_i \le 10^9$。</p><h1 id="P5657-CSP-S2019-格雷码"><a href="#P5657-CSP-S2019-格雷码" class="headerlink" title="P5657 [CSP-S2019] 格雷码"></a>P5657 [CSP-S2019] 格雷码</h1><h2 id="题目描述-23"><a href="#题目描述-23" class="headerlink" title="题目描述"></a>题目描述</h2><p>通常，人们习惯将所有 $n$ 位二进制串按照字典序排列，例如所有 2 位二进制串按字典序从小到大排列为：00，01，10，11。</p><p>格雷码（Gray Code）是一种特殊的 $n$ 位二进制串排列法，它要求相邻的两个二进制串间<strong>恰好</strong>有一位<strong>不同</strong>，特别地，第一个串与最后一个串也算作相邻。</p><p>所有 2 位二进制串按格雷码排列的一个例子为：00，01，11，10。</p><p>$n$ 位格雷码不止一种，下面给出其中一种格雷码的生成算法：</p><ol><li>1 位格雷码由两个 1 位二进制串组成，顺序为：0，1。</li><li>$n + 1$ 位格雷码的前 $2^n$ 个二进制串，可以由依此算法生成的 $n$ 位格雷码（总共 $2^n$ 个 $n$ 位二进制串）按<strong>顺序</strong>排列，再在每个串前加一个前缀 0 构成。</li><li>$n + 1$ 位格雷码的后 $2^n$ 个二进制串，可以由依此算法生成的 $n$ 位格雷码（总共 $2^n$ 个 $n$ 位二进制串）按<strong>逆序</strong>排列，再在每个串前加一个前缀 1 构成。</li></ol><p>综上，$n + 1$ 位格雷码，由 $n$ 位格雷码的 $2^n$ 个二进制串按顺序排列再加前缀 0，和按逆序排列再加前缀 1 构成，共 $2^{n+1}$ 个二进制串。另外，对于 $n$ 位格雷码中的 $2^n$ 个 二进制串，我们按上述算法得到的排列顺序将它们从 $0 \sim 2^n - 1$ 编号。</p><p>按该算法，2 位格雷码可以这样推出：</p><ol><li>已知 1 位格雷码为 0，1。</li><li>前两个格雷码为 00，01。后两个格雷码为 11，10。合并得到 00，01，11，10，编号依次为 0 ~ 3。</li></ol><p>同理，3 位格雷码可以这样推出：</p><ol><li>已知 2 位格雷码为：00，01，11，10。</li><li>前四个格雷码为：000，001，011，010。后四个格雷码为：110，111，101，100。合并得到：000，001，011，010，110，111，101，100，编号依次为 0 ~ 7。</li></ol><p>现在给出 $n$，$k$，请你求出按上述算法生成的 $n$ 位格雷码中的 $k$ 号二进制串。</p><h2 id="输入格式-23"><a href="#输入格式-23" class="headerlink" title="输入格式"></a>输入格式</h2><p>仅一行两个整数 $n$，$k$，意义见题目描述。</p><h2 id="输出格式-23"><a href="#输出格式-23" class="headerlink" title="输出格式"></a>输出格式</h2><p>仅一行一个 $n$ 位二进制串表示答案。</p><h2 id="样例-1-23"><a href="#样例-1-23" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-23"><a href="#样例输入-1-23" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-23"><a href="#样例输出-1-23" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">10<br></code></pre></td></tr></table></figure><h2 id="样例-2-2"><a href="#样例-2-2" class="headerlink" title="样例 #2"></a>样例 #2</h2><h3 id="样例输入-2-2"><a href="#样例输入-2-2" class="headerlink" title="样例输入 #2"></a>样例输入 #2</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-2-2"><a href="#样例输出-2-2" class="headerlink" title="样例输出 #2"></a>样例输出 #2</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">111<br></code></pre></td></tr></table></figure><h2 id="样例-3"><a href="#样例-3" class="headerlink" title="样例 #3"></a>样例 #3</h2><h3 id="样例输入-3"><a href="#样例输入-3" class="headerlink" title="样例输入 #3"></a>样例输入 #3</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">44 </span><span class="hljs-number">1145141919810</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-3"><a href="#样例输出-3" class="headerlink" title="样例输出 #3"></a>样例输出 #3</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">00011000111111010000001001001000000001100011<br></code></pre></td></tr></table></figure><h2 id="提示-17"><a href="#提示-17" class="headerlink" title="提示"></a>提示</h2><p>【样例 1 解释】</p><p>2 位格雷码为：00，01，11，10，编号从 0∼3，因此 3 号串是 10。</p><p>【样例 2 解释】</p><p>3 位格雷码为：000，001，011，010，110，111，101，100，编号从 0∼7，因此 5 号串是 111。</p><p>【数据范围】</p><p>对于 $50%$ 的数据：$n \leq 10$</p><p>对于 $80%$ 的数据：$k \leq 5 \times 10^6$</p><p>对于 $95%$ 的数据：$k \leq 2^{63} - 1$</p><p>对于 $100%$ 的数据：$1 \leq n \leq 64$, $0 \leq k \lt 2^n$</p><h1 id="P3884-JLOI2009-二叉树问题"><a href="#P3884-JLOI2009-二叉树问题" class="headerlink" title="P3884 [JLOI2009] 二叉树问题"></a>P3884 [JLOI2009] 二叉树问题</h1><h2 id="题目描述-24"><a href="#题目描述-24" class="headerlink" title="题目描述"></a>题目描述</h2><p>如下图所示的一棵二叉树的深度、宽度及结点间距离分别为：</p><ul><li>深度：$4$</li><li>宽度：$4$</li><li>结点 8 和 6 之间的距离：$8$</li><li>结点 7 和 6 之间的距离：$3$</li></ul><p>其中宽度表示二叉树上同一层最多的结点个数，节点 $u, v$ 之间的距离表示从 $u$ 到 $v$ 的最短有向路径上向根节点的边数的两倍加上向叶节点的边数。</p><p><img src="/./../images/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/6843.png"></p><p>给定一颗以 1 号结点为根的二叉树，请求出其深度、宽度和两个指定节点 $x, y$ 之间的距离。</p><h2 id="输入格式-24"><a href="#输入格式-24" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行是一个整数，表示树的结点个数 $n$。<br>接下来 $n - 1$ 行，每行两个整数 $u, v$，表示树上存在一条连接 $u, v$ 的边。<br>最后一行有两个整数 $x, y$，表示求 $x, y$ 之间的距离。</p><h2 id="输出格式-24"><a href="#输出格式-24" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出三行，每行一个整数，依次表示二叉树的深度、宽度和 $x, y$ 之间的距离。</p><h2 id="样例-1-24"><a href="#样例-1-24" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-24"><a href="#样例输入-1-24" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">10 </span>                               <br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span>                            <br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span>                            <br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">6</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">7</span><br><span class="hljs-symbol">5 </span><span class="hljs-number">8</span><br><span class="hljs-symbol">5 </span><span class="hljs-number">9</span><br><span class="hljs-symbol">6 </span><span class="hljs-number">10</span><br><span class="hljs-symbol">8 </span><span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-24"><a href="#样例输出-1-24" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">4<br>4<br>8<br></code></pre></td></tr></table></figure><h2 id="提示-18"><a href="#提示-18" class="headerlink" title="提示"></a>提示</h2><p>对于全部的测试点，保证 $1 \leq u, v, x, y \leq n \leq 100$​，且给出的是一棵树。</p><h2 id="解题思路-13"><a href="#解题思路-13" class="headerlink" title="解题思路"></a>解题思路</h2><p>读题可知题目需要求出二叉树的深度宽度与两点间最短路径，这其实是三个问题分别解决并输出，求宽度与深度可以在一个dfs中完成，开数组记录每一深度下的节点数，最大的即为宽度，对于最短路径则使用bfs，用队列保存节点，每次弹出队头并加入左右父节点，左右节点则路径加一，父节点则路径加二，直到搜索到目的。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Treenode</span>&#123;<br><span class="hljs-type">int</span> left,right,father,val;<br>&#125;node[<span class="hljs-number">101</span>];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Station</span>&#123;<br><span class="hljs-type">int</span> pos,step;<br>&#125;;<br><span class="hljs-type">int</span> width[<span class="hljs-number">101</span>],visited[<span class="hljs-number">101</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dfs</span><span class="hljs-params">(Treenode nod,<span class="hljs-type">int</span> deep)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span>(nod.val!=<span class="hljs-number">0</span>)<br>width[deep]++;<br><span class="hljs-keyword">if</span>(nod.left==<span class="hljs-number">0</span>&amp;&amp;nod.right==<span class="hljs-number">0</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span><br><span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(<span class="hljs-built_in">dfs</span>(node[nod.left],deep+<span class="hljs-number">1</span>),<span class="hljs-built_in">dfs</span>(node[nod.right],deep+<span class="hljs-number">1</span>))+<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n,i,u,v,x,y;<br>cin&gt;&gt;n;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;=n;i++)<br>&#123;<br>node[i].val=i;<br>&#125;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;n;i++)<br>&#123;<br>cin&gt;&gt;u&gt;&gt;v;<br><span class="hljs-keyword">if</span>(!node[u].left)<br>node[u].left=v;<br><span class="hljs-keyword">else</span><br>node[u].right=v;<br>node[v].father=u;<br>&#125;<br>cin&gt;&gt;x&gt;&gt;y;<br><span class="hljs-type">int</span> ans,wide=<span class="hljs-number">0</span>;<br>ans=<span class="hljs-built_in">dfs</span>(node[<span class="hljs-number">1</span>],<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;=n;i++) <br>wide=<span class="hljs-built_in">max</span>(wide,width[i]);<br>cout&lt;&lt;ans&lt;&lt;endl&lt;&lt;wide&lt;&lt;endl;<br><br><br>Station tn=&#123;x,<span class="hljs-number">0</span>&#125;;<br>queue&lt;Station&gt; tem;<br><span class="hljs-built_in">memset</span>(visited,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(visited));<br>visited[x]=<span class="hljs-number">1</span>;<br>tem.<span class="hljs-built_in">push</span>(tn);<br><span class="hljs-keyword">while</span>(!tem.<span class="hljs-built_in">empty</span>())<br>&#123;<br>Station nodes=tem.<span class="hljs-built_in">front</span>();<br>tem.<span class="hljs-built_in">pop</span>();<br><span class="hljs-keyword">if</span>(nodes.pos==y)<br>&#123;<br>cout&lt;&lt;nodes.step;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-type">int</span> left=node[nodes.pos].left,right=node[nodes.pos].right,father=node[nodes.pos].father,step=nodes.step;<br><span class="hljs-keyword">if</span>(left&amp;&amp;!visited[left])<br>&#123;<br>visited[left]=<span class="hljs-number">1</span>;<br>tem.<span class="hljs-built_in">push</span>(&#123;left,step+<span class="hljs-number">1</span>&#125;);<br>&#125;<br><span class="hljs-keyword">if</span>(right&amp;&amp;!visited[right])<br>&#123;<br>visited[right]=<span class="hljs-number">1</span>;<br>tem.<span class="hljs-built_in">push</span>(&#123;right,step+<span class="hljs-number">1</span>&#125;);<br>&#125;<br><span class="hljs-keyword">if</span>(father&amp;&amp;!visited[father])<br>&#123;<br>visited[father]=<span class="hljs-number">1</span>;<br>tem.<span class="hljs-built_in">push</span>(&#123;father,step+<span class="hljs-number">2</span>&#125;);<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P6915-ICPC2015-WF-Weather-Report"><a href="#P6915-ICPC2015-WF-Weather-Report" class="headerlink" title="P6915 [ICPC2015 WF] Weather Report"></a>P6915 [ICPC2015 WF] Weather Report</h1><h2 id="题面翻译"><a href="#题面翻译" class="headerlink" title="题面翻译"></a>题面翻译</h2><p>给定4种天气情况出现的概率，你需要将n天的所有可能的 $4^{n}$ 种情况已某种方式编码为01串，使得：</p><ul><li>编码长度的期望最短</li><li>任何一个编码不是另一个编码的前缀</li></ul><p>求期望长度。</p><h2 id="题目描述-25"><a href="#题目描述-25" class="headerlink" title="题目描述"></a>题目描述</h2><p><img src="/./../images/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%B7%E9%A2%98%E9%A2%98%E5%8D%95/xqo70y6n.png"></p><p>You have been hired by the Association for Climatological Measurement, a scientific organization interested in tracking global weather trends over a long period of time. Of course, this is no easy task. They have deployed many small devices around the world, designed to take periodic measurements of the local weather conditions. These are cheap devices with somewhat restricted capabilities. Every day they observe which of the four standard kinds of weather occurred: Sunny, Cloudy, Rainy, or Frogs. After every $n$ of these observations have been made, the results are reported to the main server for analysis. However, the massive number of devices has caused the available communication bandwidth to be overloaded. The Association needs your help to come up with a method of compressing these reports into fewer bits. </p><p>For a particular device’s location, you may assume that the weather each day is an independent random event, and you are given the predicted probabilities of the four possible weather types. Each of the $4^ n$ possible weather reports for a device must be encoded as a unique sequence of bits, such that no sequence is a prefix of any other sequence (an important property, or else the server would not know when each sequence ends). The goal is to use an encoding that minimizes the expected number of transmitted bits.</p><h2 id="输入格式-25"><a href="#输入格式-25" class="headerlink" title="输入格式"></a>输入格式</h2><p>The first line of input contains an integer $1 \le n \le 20$, the number of observations that go into each report. The second line contains four positive floating-point numbers, $p_{\text {sunny}}$, $p_{\text {cloudy}}$, $p_{\text {rainy}}$, and $p_{\text {frogs}}$, representing the respective weather probabilities. These probabilities have at most 6 digits after the decimal point and sum to 1.</p><h2 id="输出格式-25"><a href="#输出格式-25" class="headerlink" title="输出格式"></a>输出格式</h2><p>Display the minimum expected number of bits in the encoding of a report, with an absolute or relative error of at most $10^{-4}$.</p><h2 id="样例-1-25"><a href="#样例-1-25" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-25"><a href="#样例输入-1-25" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2</span><br><span class="hljs-attribute">0</span>.<span class="hljs-number">9</span> <span class="hljs-number">0</span>.<span class="hljs-number">049999</span> <span class="hljs-number">0</span>.<span class="hljs-number">05</span> <span class="hljs-number">0</span>.<span class="hljs-number">000001</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-25"><a href="#样例输出-1-25" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>.<span class="hljs-number">457510</span><br></code></pre></td></tr></table></figure><h2 id="样例-2-3"><a href="#样例-2-3" class="headerlink" title="样例 #2"></a>样例 #2</h2><h3 id="样例输入-2-3"><a href="#样例输入-2-3" class="headerlink" title="样例输入 #2"></a>样例输入 #2</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">20</span><br><span class="hljs-attribute">0</span>.<span class="hljs-number">25</span> <span class="hljs-number">0</span>.<span class="hljs-number">25</span> <span class="hljs-number">0</span>.<span class="hljs-number">25</span> <span class="hljs-number">0</span>.<span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-2-3"><a href="#样例输出-2-3" class="headerlink" title="样例输出 #2"></a>样例输出 #2</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">40</span>.<span class="hljs-number">000000</span><br></code></pre></td></tr></table></figure><h2 id="提示-19"><a href="#提示-19" class="headerlink" title="提示"></a>提示</h2><p>Time limit: 1000 ms, Memory limit: 1048576 kB. </p><p> International Collegiate Programming Contest (ACM-ICPC) World Finals 2015</p><h2 id="解题思路-14"><a href="#解题思路-14" class="headerlink" title="解题思路"></a>解题思路</h2><ul><li>给出四种天气出现的概率（每天都一样），要求把nnn天中4n4n4^n种可能的天气序列映射成010101串，满足任何一个010101串不是另一个010101串的前缀，且期望串长最短。</li><li>n≤20n≤20n\le20</li></ul><h3 id="哈夫曼树：堆-贪心"><a href="#哈夫曼树：堆-贪心" class="headerlink" title="哈夫曼树：堆+贪心"></a>哈夫曼树：堆+贪心</h3><p>哈夫曼树是满足∑x∈leafdepx×valx∑x∈leafdepx×valx\sum_{x\in leaf}dep_x\times val_x最小的二叉树。</p><p>把4n4n4^n种可能的天气序列看作叶节点，valxvalxval_x取每种天气数列出现的概率，发现上面的式子恰好就是期望的计算式。因此，只要建出哈夫曼树就解决了这道题目。</p><p>4n4n4^n太大不可能直接单独考虑每种天气序列。发现一种天气序列的概率只取决于其中每种天气各自的个数而与顺序无关，因此不同的概率只有C3n+3Cn+33C_{n+3}^3种，我们可以把相同的概率绑成一个pairpairpair一起求解。</p><p>求解的过程就是经典的堆+贪心，每次取出最小元素，先让它自己尽可能两两配对，如果有一个多余的就再和新的堆顶配对。</p><h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Tp template<span class="hljs-string">&lt;typename Ty&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Ts template<span class="hljs-string">&lt;typename Ty,typename... Ar&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Rg register</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> RI Rg int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Cn const</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> CI Cn int&amp;</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I inline</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> W while</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 20</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> fi first</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> se second</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> LL long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DB long double</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,C[N+<span class="hljs-number">5</span>][N+<span class="hljs-number">5</span>];DB p[<span class="hljs-number">4</span>];<span class="hljs-keyword">typedef</span> pair&lt;DB,LL&gt; Pr;priority_queue&lt;Pr,vector&lt;Pr&gt;,greater&lt;Pr&gt; &gt; q;<br><span class="hljs-function">I <span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(CI x,CI t,DB w,Cn LL&amp; s)</span><span class="hljs-comment">//暴搜可能状态</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span>(x==<span class="hljs-number">3</span>) &#123;<span class="hljs-keyword">for</span>(RI i=<span class="hljs-number">1</span>;i&lt;=t;++i) w*=p[x];q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">make_pair</span>(w,s));<span class="hljs-keyword">return</span>;&#125;<span class="hljs-comment">//概率和个数绑成pair扔入堆</span><br><span class="hljs-keyword">for</span>(RI i=<span class="hljs-number">0</span>;i&lt;=t;++i) <span class="hljs-built_in">dfs</span>(x+<span class="hljs-number">1</span>,t-i,w,s*C[t][i]),w*=p[x];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>RI i,j;<span class="hljs-keyword">for</span>(<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n),i=<span class="hljs-number">0</span>;i^<span class="hljs-number">4</span>;++i) <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%Lf&quot;</span>,p+i);<br><span class="hljs-keyword">for</span>(C[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=i=<span class="hljs-number">1</span>;i&lt;=n;++i) <span class="hljs-keyword">for</span>(C[i][<span class="hljs-number">0</span>]=j=<span class="hljs-number">1</span>;j&lt;=i;++j) C[i][j]=C[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]+C[i<span class="hljs-number">-1</span>][j];<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Push(x,y) (q.push(make_pair(x,y)),ans+=(x)*(y))<span class="hljs-comment">//合并得到y个x，扔入堆，同时统计答案</span></span><br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>,n,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);Pr k,o;DB ans=<span class="hljs-number">0</span>;<span class="hljs-built_in">W</span>(!q.<span class="hljs-built_in">empty</span>()) k=q.<span class="hljs-built_in">top</span>(),q.<span class="hljs-built_in">pop</span>(),<br>k.se&gt;<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-built_in">Push</span>(<span class="hljs-number">2</span>*k.fi,k.se&gt;&gt;<span class="hljs-number">1</span>),k.se&amp;<span class="hljs-number">1</span>&amp;&amp;!q.<span class="hljs-built_in">empty</span>()&amp;&amp;(o=q.<span class="hljs-built_in">top</span>(),q.<span class="hljs-built_in">pop</span>(),--o.se&amp;&amp;(q.<span class="hljs-built_in">push</span>(o),<span class="hljs-number">0</span>),<span class="hljs-built_in">Push</span>(k.fi+o.fi,<span class="hljs-number">1</span>));<span class="hljs-comment">//尽可能自己两两配对，若有剩余和新的堆顶配对</span><br><span class="hljs-keyword">return</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4Lf\n&quot;</span>,ans),<span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="P3916-图的遍历"><a href="#P3916-图的遍历" class="headerlink" title="P3916 图的遍历"></a>P3916 图的遍历</h1><h2 id="题目描述-26"><a href="#题目描述-26" class="headerlink" title="题目描述"></a>题目描述</h2><p>给出 $N$ 个点，$M$ 条边的有向图，对于每个点 $v$，求 $A(v)$ 表示从点 $v$ 出发，能到达的编号最大的点。</p><h2 id="输入格式-26"><a href="#输入格式-26" class="headerlink" title="输入格式"></a>输入格式</h2><p>第 $1$ 行 $2$ 个整数 $N,M$，表示点数和边数。</p><p>接下来 $M$ 行，每行 $2$ 个整数 $U_i,V_i$，表示边 $(U_i,V_i)$。点用 $1,2,\dots,N$ 编号。</p><h2 id="输出格式-26"><a href="#输出格式-26" class="headerlink" title="输出格式"></a>输出格式</h2><p>一行 $N$ 个整数 $A(1),A(2),\dots,A(N)$。</p><h2 id="样例-1-26"><a href="#样例-1-26" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1-26"><a href="#样例输入-1-26" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">4 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1-26"><a href="#样例输出-1-26" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">4 </span><span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h2 id="提示-20"><a href="#提示-20" class="headerlink" title="提示"></a>提示</h2><ul><li>对于 $60%$ 的数据，$1 \leq N,M \leq 10^3$。</li><li>对于 $100%$ 的数据，$1 \leq N,M \leq 10^5$​。</li></ul><h2 id="解题思路-15"><a href="#解题思路-15" class="headerlink" title="解题思路"></a>解题思路</h2><p>使用链式前向星</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> AUTHOR <span class="hljs-string">&quot;HEX9CF&quot;</span></span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> maxn = <span class="hljs-number">100005</span>;<br><span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> maxi[maxn];<br><span class="hljs-comment">// 链式前向星</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Sedge</span><br>&#123;<br>    <span class="hljs-type">int</span> to;<br>    <span class="hljs-type">int</span> next;<br>&#125; edge[maxn];<br><span class="hljs-type">int</span> head[maxn];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    edge[cnt].to = v;<br>    edge[cnt].next = head[u];<br>    head[u] = cnt++;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> ori)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (maxi[x])<br>    &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    maxi[x] = ori;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = head[x]; ~i; i = edge[i].next)<br>    &#123;<br>        <span class="hljs-built_in">dfs</span>(edge[i].to, ori);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">read</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">char</span> ch;<br>    x = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (!(<span class="hljs-string">&#x27;0&#x27;</span> &lt;= ch &amp;&amp; <span class="hljs-string">&#x27;9&#x27;</span> &gt;= ch))<br>    &#123;<br>        ch = <span class="hljs-built_in">getchar</span>();<br>    &#125;<br>    <span class="hljs-keyword">while</span> ((<span class="hljs-string">&#x27;0&#x27;</span> &lt;= ch &amp;&amp; <span class="hljs-string">&#x27;9&#x27;</span> &gt;= ch))<br>    &#123;<br>        x = x * <span class="hljs-number">10</span> + ch - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        ch = <span class="hljs-built_in">getchar</span>();<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-type">int</span> a, b;<br>    <span class="hljs-built_in">memset</span>(head, <span class="hljs-number">-1</span>, <span class="hljs-built_in">sizeof</span>(head));<br>    <span class="hljs-built_in">memset</span>(maxi, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(maxi));<br>    <span class="hljs-built_in">read</span>(n);<br>    <span class="hljs-built_in">read</span>(m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">read</span>(a);<br>        <span class="hljs-built_in">read</span>(b);<br>        <span class="hljs-built_in">add</span>(b, a); <span class="hljs-comment">// 反向添加边</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i; i--)<br>    &#123;<br>        <span class="hljs-comment">// 反向搜索</span><br>        <span class="hljs-built_in">dfs</span>(i, i);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cout &lt;&lt; maxi[i];<br>        <span class="hljs-keyword">if</span> (i != n)<br>        &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>js基本语法&amp;vue基本语法</title>
    <link href="/2024/04/17/js%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-vue%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <url>/2024/04/17/js%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-vue%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JavaScript学习<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 对象的增删改查 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 创建一个对象</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> obj=&#123;&#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> obj2=&#123;&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 添加属性</span></span></span><br><span class="language-javascript"><span class="language-xml">        obj.<span class="hljs-property">a</span>=<span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj)</span></span><br><span class="language-javascript"><span class="language-xml">        obj2.<span class="hljs-property">a</span>=<span class="hljs-number">2</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj2)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 删除属性</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">delete</span> obj.<span class="hljs-property">a</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 添加属性</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> user=&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;张三&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;男&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 添加属性</span></span></span><br><span class="language-javascript"><span class="language-xml">        user[<span class="hljs-string">&quot;address&quot;</span>]=<span class="hljs-string">&quot;北京&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;深拷贝1&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> teacher=&#123;&#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 把user里面的属性转给teacher,安全的对象转移方式</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(teacher,user) <span class="hljs-comment">//深拷贝</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;user===&quot;</span>,user)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;teacher===&quot;</span>,teacher)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 深拷贝方式2</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;深拷贝2&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> teacher1=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(user))</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;teacher1===&quot;</span>,teacher1)</span></span><br><span class="language-javascript"><span class="language-xml">        teacher1.<span class="hljs-property">xxx</span>=<span class="hljs-string">&quot;测试&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;teacher1===&quot;</span>,teacher1)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;user===&quot;</span>,user)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 深拷贝方式3</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;深拷贝3&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> teacher2=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(&#123;&#125;,user)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;teacher2===&quot;</span>,teacher2)</span></span><br><span class="language-javascript"><span class="language-xml">        teacher2.<span class="hljs-property">xxx</span>=<span class="hljs-string">&quot;测试&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;teacher2===&quot;</span>,teacher2)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;user===&quot;</span>,user)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 浅拷贝</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;浅拷贝&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> teacher3=teacher2 <span class="hljs-comment">//浅拷贝</span></span></span><br><span class="language-javascript"><span class="language-xml">        teacher3.<span class="hljs-property">yyy</span>=<span class="hljs-string">&quot;测试&quot;</span> <span class="hljs-comment">// teacher3和teacher2指向同一个对象</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;teacher3===&quot;</span>,teacher3)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;teacher2===&quot;</span>,teacher2)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//从对象中拿到属性</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> user1=&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;张三&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;男&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;从对象中拿到属性&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 三种方式</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;方式1&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">name</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;方式2&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1[<span class="hljs-string">&quot;name&quot;</span>])</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;方式3&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;解构语法&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> &#123;name&#125; = user1</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> a=<span class="hljs-literal">null</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//let c=a.x</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//console.log(&quot;c===&quot;,c)</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;拿到空数据&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;使用?.解决拿到空数据报错问题&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> b=a ?.<span class="hljs-property">x</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;b===&quot;</span>,b)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;使用??解决拿到空数据报错问题&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> d=<span class="hljs-literal">null</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> e=<span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> f= d ?? e</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;f===&quot;</span>,f)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;user&quot;</span>))</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> n=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;user&quot;</span>)??<span class="hljs-string">&quot;&#123;&#125;&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;n===&quot;</span>,n)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;使用||解决拿到空数据报错问题&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> res;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> res1=res||&#123;&#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res1.<span class="hljs-property">name</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;左边为null则取右边的值&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        a=<span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">        b=<span class="hljs-literal">null</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a ??= b)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> jsObj=&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">sex</span>:<span class="hljs-string">&quot;男&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-number">1</span>:<span class="hljs-string">&quot;1&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-number">2</span>:<span class="hljs-string">&quot;2&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(jsObj[<span class="hljs-number">1</span>])</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// debugger</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> jsObj)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;key===&quot;</span>,key)</span></span><br><span class="language-javascript"><span class="language-xml">            jsObj[key]+=<span class="hljs-string">&quot;---测试&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;jsObj[key]===&quot;</span>,jsObj[key])</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-keyword">if</span> (key===<span class="hljs-string">&quot;name&quot;</span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;name===&quot;</span>,jsObj[key])</span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 数组的增删改查 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arr=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>()</span></span><br><span class="language-javascript"><span class="language-xml">        arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arr1=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//arr增加元素</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;arr增加元素&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        arr1[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1)</span></span><br><span class="language-javascript"><span class="language-xml">        arr1.<span class="hljs-title function_">push</span>(<span class="hljs-number">2</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//修改元素</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;修改元素&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        arr1[<span class="hljs-number">0</span>]=<span class="hljs-number">3</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//删除元素</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;删除元素&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;pop尾部删除&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        arr1.<span class="hljs-title function_">pop</span>()</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;shift头部删除&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        arr1.<span class="hljs-title function_">shift</span>()</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;splice左闭右开区间删除&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        arr1.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//切片</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;切片--截取元素，左闭右开&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew1=arrNew.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;arrNew===&quot;</span>,arrNew)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;arrNew1===&quot;</span>,arrNew1)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//合并数组</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;合并数组&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew2=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew3=[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew4=arrNew2.<span class="hljs-title function_">concat</span>(arrNew3)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;arrNew2===&quot;</span>,arrNew2)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;arrNew3===&quot;</span>,arrNew3)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;arrNew4===&quot;</span>,arrNew4)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//split</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;split&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> str=<span class="hljs-string">&quot;1,2,3,4,5&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew5=str.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;,&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;arrNew5===&quot;</span>,arrNew5)</span></span><br><span class="language-javascript"><span class="language-xml">        str=<span class="hljs-string">&quot;ceshi,shigfd&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;,&quot;</span>))</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//join</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;join&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew6=[<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-string">&quot;4&quot;</span>,<span class="hljs-string">&quot;5&quot;</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew6.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;,&quot;</span>))</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew6.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&quot;</span>))</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew6.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;---&quot;</span>))</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//sort 排序排的是字典序 unicode码</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sort 排序&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew7=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">10</span>,<span class="hljs-number">15</span>,<span class="hljs-number">22</span>,<span class="hljs-number">20</span>,<span class="hljs-number">11</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew7.<span class="hljs-title function_">sort</span>())</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;按照数值大小排序&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew7.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span>a-b))</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew7.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span>b-a))</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//reverse</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;reverse&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew7.<span class="hljs-title function_">reverse</span>())</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew7.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span>b-a))<span class="hljs-comment">//降序</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//indexOf</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;indexOf&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew8=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew8.<span class="hljs-title function_">indexOf</span>(<span class="hljs-number">3</span>))<span class="hljs-comment">//没有返回-1，有返回下标</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//filter</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;filter&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew9=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;查找大于3的元素&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew10=arrNew9.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item&gt;<span class="hljs-number">3</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew10)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew11=[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span>&#125;]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;查找大于18岁的元素&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew12=arrNew11.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.<span class="hljs-property">age</span>&gt;<span class="hljs-number">18</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew12)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//删除数组的某一项</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;删除数组的某一项&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew13=[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;王&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span>&#125;]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew13)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew14= arrNew13.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.<span class="hljs-property">name</span>!==<span class="hljs-string">&quot;王&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew14)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//find</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;find&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew15=[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span>&#125;]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;查找李四&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew16=arrNew15.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.<span class="hljs-property">name</span>===<span class="hljs-string">&quot;李四&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew16)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//findIndex</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;findIndex&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew17=[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span>&#125;]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;查找李四的下标&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew18=arrNew17.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.<span class="hljs-property">name</span>===<span class="hljs-string">&quot;李四&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew18)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//map</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;map&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew19=[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span>&#125;]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;遍历数组&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew20=arrNew19.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>&#123;<span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">name</span>:item.<span class="hljs-property">name</span>, <span class="hljs-attr">age</span>:item.<span class="hljs-property">age</span>+<span class="hljs-number">1</span>&#125;&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew20)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;遍历数组，只取name&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew21=arrNew19.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>&#123;<span class="hljs-keyword">return</span> item.<span class="hljs-property">name</span>&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew21)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;遍历数组，只取name，并拼接&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew22=arrNew19.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>&#123;<span class="hljs-keyword">return</span> item.<span class="hljs-property">name</span>+<span class="hljs-string">&quot;---&quot;</span>&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew22)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew23=arrNew19.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.<span class="hljs-property">name</span>+<span class="hljs-string">&quot;---&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew23)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//forEach</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;forEach&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew24=[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span>&#125;]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;遍历数组&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        arrNew24.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>&#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item)&#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//reduce</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;reduce&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> arrNew25=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;求和&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//pre 前一个值 cur 当前值</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> sum=arrNew25.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;<span class="hljs-keyword">return</span> pre+cur&#125;,<span class="hljs-number">0</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sum)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//统计</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;统计出现的次数&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> count=arrNew24.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-keyword">if</span> (cur.<span class="hljs-property">name</span> <span class="hljs-keyword">in</span> pre)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">                pre[cur.<span class="hljs-property">name</span>]++</span></span><br><span class="language-javascript"><span class="language-xml">            &#125;<span class="hljs-keyword">else</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">                pre[cur.<span class="hljs-property">name</span>]=<span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-keyword">return</span> pre</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;,&#123;&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//json</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> json=&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;张三&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">18</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-string">&quot;sex&quot;</span>:<span class="hljs-string">&quot;男&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-string">&quot;address&quot;</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-string">&quot;province&quot;</span>:<span class="hljs-string">&quot;四川&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-string">&quot;city&quot;</span>:<span class="hljs-string">&quot;成都&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">            &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-string">&quot;hobby&quot;</span>:[<span class="hljs-string">&quot;吃饭&quot;</span>,<span class="hljs-string">&quot;睡觉&quot;</span>,<span class="hljs-string">&quot;打豆豆&quot;</span>],</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-string">&quot;children&quot;</span>:[</span></span><br><span class="language-javascript"><span class="language-xml">                &#123;<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">18</span>&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">                &#123;<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">19</span>&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">                &#123;<span class="hljs-string">&#x27;name&#x27;</span>:<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">20</span>&#125;</span></span><br><span class="language-javascript"><span class="language-xml">            ]</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[]是引用类型，&#123;&#125;是值类型&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//http://www.json.cn/ json验证</span></span></span><br><span class="language-javascript"><span class="language-xml">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"></span><br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>vue学习<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.active</span>&#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: red;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            &#123;&#123;num&#125;&#125; <span class="hljs-comment">&lt;!--运算会有问题尽量不要在这里做运算--&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            &#123;&#123;bool&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            &#123;&#123;bool ? &#x27;a&#x27;:&#x27;b&#x27;&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            &#123;&#123;bool2 ? &#x27;a&#x27;:&#x27;b&#x27;&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            &#123;&#123;arr[0].name&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            &#123;&#123;arr.find(item=&gt;item.name===&quot;张三&quot;)&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;htmlStr&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>v-html渲染<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;value&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>v-model是双向绑定的<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;color===&#x27;red&#x27;&quot;</span>&gt;</span>红色<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;color===&#x27;绿色&#x27;&quot;</span>&gt;</span>绿色<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;color===&#x27;蓝色&#x27;&quot;</span>&gt;</span>蓝色<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>黑色<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>搜索一下<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>v-bind:href可以简写成:href<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>搜索一下<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;von&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100px;height: 100px;background-color: red;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clickDiv&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;von1&quot;</span> &gt;</span>v-on绑定事件简写@<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in fruits&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in fruits&quot;</span>&gt;</span>&#123;&#123;index+1&#125;&#125;:&#123;&#123;item&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in fruitsS&quot;</span>&gt;</span>&#123;&#123;index+1&#125;&#125;:&#123;&#123;item.name&#125;&#125;:&#123;&#123;item.price&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in fruitsS&quot;</span> <span class="hljs-attr">v-bind:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>&#123;&#123;index+1&#125;&#125;:&#123;&#123;item.name&#125;&#125;:&#123;&#123;item.price&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: flex;margin-top: 30px;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;cur_menu&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in menu&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 0 10px&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;&#x27;active&#x27;:item ===cur_menu&#125;&quot;</span></span><br><span class="hljs-tag">                 <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in menu&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> app=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#app&quot;</span>,   <span class="hljs-comment">// 绑定元素</span></span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;hello vue&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">num</span>:<span class="hljs-number">1</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">bool</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">bool2</span>:<span class="hljs-literal">false</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">arr</span>:[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;],</span><br><span class="language-javascript">                <span class="hljs-attr">htmlStr</span>:<span class="hljs-string">&quot;&lt;a href=&#x27;http://www.baidu.com&#x27;&gt;百度&lt;/a&gt;&lt;br/&gt;&lt;strong&gt;v-html渲染&lt;/strong&gt;&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">value</span>:<span class="hljs-string">&quot;&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">color</span>:<span class="hljs-string">&#x27;red&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;https://www.baidu.com&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">fruits</span>:[<span class="hljs-string">&quot;苹果&quot;</span>,<span class="hljs-string">&quot;香蕉&quot;</span>,<span class="hljs-string">&quot;西瓜&quot;</span>],</span><br><span class="language-javascript">                <span class="hljs-attr">fruitsS</span>:[&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;苹果&quot;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">5</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;香蕉&quot;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">3</span>&#125;,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;西瓜&quot;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">10</span>&#125;],</span><br><span class="language-javascript">                <span class="hljs-attr">menu</span>:[<span class="hljs-string">&quot;首页&quot;</span>,<span class="hljs-string">&quot;详情&quot;</span>,<span class="hljs-string">&quot;购物车&quot;</span>,<span class="hljs-string">&quot;我的&quot;</span>],</span><br><span class="language-javascript">                <span class="hljs-attr">cur_menu</span>:<span class="hljs-string">&#x27;首页&#x27;</span>,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">clickDiv</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;点击了div&quot;</span>)</span><br><span class="language-javascript">                    <span class="hljs-keyword">let</span> color=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;von&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span></span><br><span class="language-javascript">                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;von&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span>= color === <span class="hljs-string">&quot;red&quot;</span> ? <span class="hljs-string">&quot;green&quot;</span> : <span class="hljs-string">&quot;red&quot;</span></span><br><span class="language-javascript">                    <span class="hljs-keyword">let</span> color1=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;von1&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span></span><br><span class="language-javascript">                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;von1&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span>= color1 === <span class="hljs-string">&quot;red&quot;</span> ? <span class="hljs-string">&quot;green&quot;</span> : <span class="hljs-string">&quot;red&quot;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue2&amp;&amp;JavaScript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vue&amp;&amp;JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>19-23年蓝桥杯真题</title>
    <link href="/2024/04/11/19-23%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%9F%E9%A2%98/"/>
    <url>/2024/04/11/19-23%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%9F%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="https://www.luogu.com.cn/problem/P8678">P8678 [蓝桥杯 2019 省 A] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8679">P8679 [蓝桥杯 2019 省 B] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8680">P8680 [蓝桥杯 2019 省 B] 特别数的和</a></li><li><a href="https://www.luogu.com.cn/problem/P8681">P8681 [蓝桥杯 2019 省 AB] 完全二叉树的权值</a></li><li><a href="https://www.luogu.com.cn/problem/P8682">P8682 [蓝桥杯 2019 省 B] 等差数列</a></li><li><a href="https://www.luogu.com.cn/problem/P8683">P8683 [蓝桥杯 2019 省 B] 后缀表达式</a></li><li><a href="https://www.luogu.com.cn/problem/P8684">P8684 [蓝桥杯 2019 省 B] 灵能传输</a></li><li><a href="https://www.luogu.com.cn/problem/P8685">P8685 [蓝桥杯 2019 省 A] 外卖店优先级</a></li><li><a href="https://www.luogu.com.cn/problem/P8686">P8686 [蓝桥杯 2019 省 A] 修改数组</a></li><li><a href="https://www.luogu.com.cn/problem/P8687">P8687 [蓝桥杯 2019 省 A] 糖果</a></li><li><a href="https://www.luogu.com.cn/problem/P8688">P8688 [蓝桥杯 2019 省 A] 组合数问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8704">P8704 [蓝桥杯 2020 省 A1] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8705">P8705 [蓝桥杯 2020 省 B1] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8706">P8706 [蓝桥杯 2020 省 AB1] 解码</a></li><li><a href="https://www.luogu.com.cn/problem/P8707">P8707 [蓝桥杯 2020 省 AB1] 走方格</a></li><li><a href="https://www.luogu.com.cn/problem/P8708">P8708 [蓝桥杯 2020 省 A1] 整数小拼接</a></li><li><a href="https://www.luogu.com.cn/problem/P8709">P8709 [蓝桥杯 2020 省 A1] 超级胶水</a></li><li><a href="https://www.luogu.com.cn/problem/P8710">P8710 [蓝桥杯 2020 省 AB1] 网络分析</a></li><li><a href="https://www.luogu.com.cn/problem/P8711">P8711 [蓝桥杯 2020 省 B1] 整除序列</a></li><li><a href="https://www.luogu.com.cn/problem/P8712">P8712 [蓝桥杯 2020 省 B1] 整数拼接</a></li><li><a href="https://www.luogu.com.cn/problem/P8713">P8713 [蓝桥杯 2020 省 A2] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8714">P8714 [蓝桥杯 2020 省 B2] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8715">P8715 [蓝桥杯 2020 省 AB2] 子串分值</a></li><li><a href="https://www.luogu.com.cn/problem/P8716">P8716 [蓝桥杯 2020 省 AB2] 回文日期</a></li><li><a href="https://www.luogu.com.cn/problem/P8717">P8717 [蓝桥杯 2020 省 AB2] 成绩分析</a></li><li><a href="https://www.luogu.com.cn/problem/P8718">P8718 [蓝桥杯 2020 省 A2] 荒岛探测</a></li><li><a href="https://www.luogu.com.cn/problem/P8719">P8719 [蓝桥杯 2020 省 AB2] 字串排序</a></li><li><a href="https://www.luogu.com.cn/problem/P8720">P8720 [蓝桥杯 2020 省 B2] 平面切分</a></li><li><a href="https://www.luogu.com.cn/problem/P8721">P8721 [蓝桥杯 2020 省 AB3] 填空问题(缺少 inc.txt, E 题数据)</a></li><li><a href="https://www.luogu.com.cn/problem/P8722">P8722 [蓝桥杯 2020 省 AB3] 日期识别</a></li><li><a href="https://www.luogu.com.cn/problem/P8723">P8723 [蓝桥杯 2020 省 AB3] 乘法表</a></li><li><a href="https://www.luogu.com.cn/problem/P8724">P8724 [蓝桥杯 2020 省 AB3] 限高杆</a></li><li><a href="https://www.luogu.com.cn/problem/P8725">P8725 [蓝桥杯 2020 省 AB3] 画中漂流</a></li><li><a href="https://www.luogu.com.cn/problem/P8726">P8726 [蓝桥杯 2020 省 AB3] 旅行家</a></li><li><a href="https://www.luogu.com.cn/problem/P8740">P8740 [蓝桥杯 2021 省 A] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8741">P8741 [蓝桥杯 2021 省 B] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8742">P8742 [蓝桥杯 2021 省 AB] 砝码称重</a></li><li><a href="https://www.luogu.com.cn/problem/P8743">P8743 [蓝桥杯 2021 省 A] 异或数列</a></li><li><a href="https://www.luogu.com.cn/problem/P8744">P8744 [蓝桥杯 2021 省 A] 左孩子右兄弟</a></li><li><a href="https://www.luogu.com.cn/problem/P8745">P8745 [蓝桥杯 2021 省 AB] 括号序列</a></li><li><a href="https://www.luogu.com.cn/problem/P8746">P8746 [蓝桥杯 2021 省 A] 分果果</a></li><li><a href="https://www.luogu.com.cn/problem/P8747">P8747 [蓝桥杯 2021 省 B] 双向排序</a></li><li><a href="https://www.luogu.com.cn/problem/P8748">P8748 [蓝桥杯 2021 省 B] 时间显示</a></li><li><a href="https://www.luogu.com.cn/problem/P8749">P8749 [蓝桥杯 2021 省 B] 杨辉三角形</a></li><li><a href="https://www.luogu.com.cn/problem/P8750">P8750 [蓝桥杯 2021 省 A2] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8751">P8751 [蓝桥杯 2021 省 B2] 填空问题</a></li><li><a href="https://www.luogu.com.cn/problem/P8752">P8752 [蓝桥杯 2021 省 B2] 特殊年份</a></li><li><a href="https://www.luogu.com.cn/problem/P8753">P8753 [蓝桥杯 2021 省 AB2] 小平方</a></li><li><a href="https://www.luogu.com.cn/problem/P8754">P8754 [蓝桥杯 2021 省 AB2] 完全平方数</a></li><li><a href="https://www.luogu.com.cn/problem/P8755">P8755 [蓝桥杯 2021 省 AB2] 负载均衡</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>EF框架</title>
    <link href="/2024/04/10/EF%E6%A1%86%E6%9E%B6/"/>
    <url>/2024/04/10/EF%E6%A1%86%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h1><p>[video(video-xcdU9b91-1704040286495)(type-csdn)(url-<a href="https://live.csdn.net/v/embed/355757)(image-https://video-community.csdnimg.cn/vod-84deb4/a090dd94a7e271eebfde0675b3ed0102/snapshots/8ea7d139d04a45018cee00f5941a4830-00004.jpg?auth_key=4857630234-0-0-fd49d3e2a45ced4ff569beca2381b74b)(title-EF%E6%A1%86%E6%9E%B6%E6%BC%94%E7%A4%BA)%5D">https://live.csdn.net/v/embed/355757)(image-https://video-community.csdnimg.cn/vod-84deb4/a090dd94a7e271eebfde0675b3ed0102/snapshots/8ea7d139d04a45018cee00f5941a4830-00004.jpg?auth_key=4857630234-0-0-fd49d3e2a45ced4ff569beca2381b74b)(title-EF框架演示)]</a></p><h1 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h1><p>Visual Studio 2019<br>SQL Server<br>EntityFramework 6.2.0</p><h1 id="一、创建项目，编写数据库"><a href="#一、创建项目，编写数据库" class="headerlink" title="一、创建项目，编写数据库"></a>一、创建项目，编写数据库</h1><h2 id="创建一个Windows窗体应用-NET-Framework"><a href="#创建一个Windows窗体应用-NET-Framework" class="headerlink" title="创建一个Windows窗体应用(.NET Framework)"></a>创建一个Windows窗体应用(.NET Framework)</h2><h3 id="添加新项目"><a href="#添加新项目" class="headerlink" title="添加新项目"></a>添加新项目</h3><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/23ea1cd9d9634190b6a8f31b16988c1f.png" alt="创建一个窗体项目"><img src="/./../images/EF%E6%A1%86%E6%9E%B6/e7b5d3811f1b450f95aa8e32019a2ac0.png" alt="具体内容">创建后再创建下图：<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/e5da96b6d8d44bd9a97166ef1c7e0ef2.png" alt="可视化界面"></p><h3 id="创建SQL数据库，创建表"><a href="#创建SQL数据库，创建表" class="headerlink" title="创建SQL数据库，创建表"></a>创建SQL数据库，创建表</h3><p>创建数据库StudyEF，创建表如下：<br>在这里要强调一点，在创建表的时候一定设置主键，不然创建后的ef框架会有问题。<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/4eede7e3d5254b3fbe246eb3035a5e29.png" alt="建表">往表里面添加几条数据，方便进行测试<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/c2d63178c31043d18fa63bd343cb8552.png" alt="表中数据"></p><h2 id="给项目添加EF实体数据模型"><a href="#给项目添加EF实体数据模型" class="headerlink" title="给项目添加EF实体数据模型"></a>给项目添加EF实体数据模型</h2><p>添加一个ADO.NET实体数据模型，我将其命名为EFData，然后进行下面操作<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/68010de04d114b54911a7fd54fe4400e.png" alt="选择第一个"><img src="/./../images/EF%E6%A1%86%E6%9E%B6/b483bc2b0272416596f8f8561421afbc.png" alt="继续"><img src="/./../images/EF%E6%A1%86%E6%9E%B6/4b155b9626db4c25a73318c72fa4326c.png" alt="新建连接"><img src="/./../images/EF%E6%A1%86%E6%9E%B6/8a315ee3b4cf496ab60dc5c4087a5970.png" alt="测试连接"><img src="/./../images/EF%E6%A1%86%E6%9E%B6/ce34dc63b9144bcfb63f75a9b9b6904e.png" alt="修改对应的连接"><br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/31fa81caf3004751bbb9e8a1292959df.png" alt="添加"><br>然后就是完成，漫长的等待创建完成</p><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/274f2968f1bf4abe9ff28dae4d7e297f.png" alt="创建成功"></p><h1 id="二、DataGridView绑定数据源"><a href="#二、DataGridView绑定数据源" class="headerlink" title="二、DataGridView绑定数据源"></a>二、DataGridView绑定数据源</h1><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/861af9287cfc46d38d2ed3eb5d876f19.png" alt="添加数据库">下一步，下一步，然后选择连接<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/639606538b554ddba521733ebbf2950c.png" alt="在这里插入图片描述">下一步，下一步，一直到下图，选中表，点击完成<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/02f7559804954c33b0c50dc2ce250b5e.png" alt="在这里插入图片描述"><br>添加完成后，dgv控件自动显示字段名<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/c8ada2553bbf458089488d979b4b650f.png" alt="在这里插入图片描述"><br>这里的表头可以根据需求修改<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/ae14d255c29d4c9ea36e8a009a8d6926.png" alt="在这里插入图片描述"><br>运行测试，数据显示正常<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/a7da9b7137034732945cedc3af2f8d56.png" alt="在这里插入图片描述"></p><h1 id="三、实现添加按钮"><a href="#三、实现添加按钮" class="headerlink" title="三、实现添加按钮"></a>三、实现添加按钮</h1><h2 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h2><p>首先添加一个Add的windows窗体<br>如图所示：<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/ca8bda65cdbd49388744c8e3d4b2a06c.png" alt="添加窗体设计">鼠标双击添加按钮，在添加按钮事件里面开始编写：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs csharp">String username = textBox1.Text;<br>       String name = textBox2.Text;<br>       String password = textBox3.Text;<br>       String age = textBox4.Text;<br>       String phone = textBox5.Text;<br>       String email = textBox6.Text;<br>       String address = textBox7.Text;<br>       <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> study = <span class="hljs-keyword">new</span> StudyEFEntities())<br>       &#123;<br>           <span class="hljs-keyword">var</span> test = <span class="hljs-keyword">new</span> TestData <span class="hljs-comment">// 假设TestData是您的实体类  </span><br>           &#123;<br>               <span class="hljs-comment">// 在此处设置test对象的属性，例如：  </span><br>               password = password,<br>               username=username,<br>               name=name,<br>               age=age,<br>               phone=phone,<br>               email=email,<br>               address=address<br>           &#125;;<br><br>           <span class="hljs-comment">// 将test对象添加到数据库中  </span><br>           study.TestData.Add(test);<br>           <span class="hljs-comment">// 保存更改到数据库  </span><br>           study.SaveChanges();<br>       &#125;<br>       MessageBox.Show(<span class="hljs-string">&quot;添加成功&quot;</span>);<br>       Main f1 = (Main)<span class="hljs-keyword">this</span>.Owner;<br>       f1.Refresh_Method();<br>       f1.Activate();<br>       <span class="hljs-keyword">this</span>.Hide();<br></code></pre></td></tr></table></figure><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/56e07fd67d4d4dcd90f6008c20bbfc96.png" alt="添加">在主页面（原来我写的是Test窗体，但是重新生成解决方案了也没有显示，估计是重名了与其他功能，于是我主界面换成了Main窗体）的添加按钮里面编写new一个窗体，并且写一个让数据刷新的方法，通过owner在添加窗体调用，这样添加完成原来的窗体更新数据。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">button1_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span><br>     &#123;<br>         Add f1 = <span class="hljs-keyword">new</span> Add();<br>         f1.Owner = <span class="hljs-keyword">this</span>;<br>         f1.Show();<br>     &#125;<br><br>     <span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Refresh_Method</span>()</span><br>     &#123;<br>         <span class="hljs-keyword">this</span>.testDataTableAdapter.Fill(<span class="hljs-keyword">this</span>.studyEFDataSet1.TestData);<br>     &#125;<br></code></pre></td></tr></table></figure><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/52910a887077462a89be7c7abe92c5e9.png" alt="在这里插入图片描述"></p><h2 id="运行测试"><a href="#运行测试" class="headerlink" title="运行测试"></a>运行测试</h2><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/5d607bca1a624e9ea829b0b7e9e84670.png" alt="在这里插入图片描述"><img src="/./../images/EF%E6%A1%86%E6%9E%B6/f51496f5946c47538fdc822a030dc9c8.png" alt="在这里插入图片描述">测试没有问题。</p><h1 id="四、实现删除按钮"><a href="#四、实现删除按钮" class="headerlink" title="四、实现删除按钮"></a>四、实现删除按钮</h1><h2 id="编写代码-1"><a href="#编写代码-1" class="headerlink" title="编写代码"></a>编写代码</h2><p>在Main窗体里面，双击删除按钮</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//删除按钮</span><br>        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">button2_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span><br>        &#123;<br>            <span class="hljs-keyword">var</span> dev1 = <span class="hljs-keyword">this</span>.dataGridView1.CurrentRow;<br>            <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> study = <span class="hljs-keyword">new</span> StudyEFEntities())<br>            &#123;<br>                <span class="hljs-keyword">if</span> (dev1.Cells[<span class="hljs-number">0</span>].Value != <span class="hljs-literal">null</span>)<br>                &#123;<br>                    <span class="hljs-built_in">int</span> idToDelete;<br>                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">int</span>.TryParse(dev1.Cells[<span class="hljs-number">0</span>].Value.ToString(), <span class="hljs-keyword">out</span> idToDelete))<br>                    &#123;<br>                        <span class="hljs-keyword">var</span> ToDelete = study.TestData.FirstOrDefault(u =&gt; u.id == idToDelete);<br>                        <span class="hljs-keyword">if</span> (ToDelete != <span class="hljs-literal">null</span>)<br>                        &#123;<br>                            study.TestData.Remove(ToDelete);<br>                            study.SaveChanges();<br>                        &#125;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">this</span>.testDataTableAdapter.Fill(<span class="hljs-keyword">this</span>.studyEFDataSet1.TestData);<br>            &#125;<br>        &#125;<br></code></pre></td></tr></table></figure><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/a1c758d8c0434c579d7f803ae34a5239.png" alt="删除按钮"></p><h2 id="运行测试-1"><a href="#运行测试-1" class="headerlink" title="运行测试"></a>运行测试</h2><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/ed387128824b4eae916a6a9112d5a60f.png" alt="在这里插入图片描述">测试没有问题，点击删除删除选中数据，并且刷新数据（原理是重新绑定数据）</p><h1 id="五、实现修改按钮"><a href="#五、实现修改按钮" class="headerlink" title="五、实现修改按钮"></a>五、实现修改按钮</h1><h2 id="编写代码-2"><a href="#编写代码-2" class="headerlink" title="编写代码"></a>编写代码</h2><h3 id="窗体之间传递参数"><a href="#窗体之间传递参数" class="headerlink" title="窗体之间传递参数"></a>窗体之间传递参数</h3><p>因为修改，修改是要有数据显示才能方便，不然就成重写了，在这里我觉得需要做一个参数传递。</p><h4 id="Main窗体中修改按钮事件"><a href="#Main窗体中修改按钮事件" class="headerlink" title="Main窗体中修改按钮事件"></a>Main窗体中修改按钮事件</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//修改按钮</span><br>       <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">button3_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dataGridView1.SelectedRows.Count &gt; <span class="hljs-number">0</span>)<br>           &#123;<br>               <span class="hljs-keyword">var</span> dev1 = <span class="hljs-keyword">this</span>.dataGridView1.CurrentRow;<br>               Update frm = <span class="hljs-keyword">new</span> Update(dev1);<br>               frm.Owner = <span class="hljs-keyword">this</span>;<br>               frm.Show();<br>           &#125;<br>           <span class="hljs-keyword">else</span><br>           &#123;<br>               MessageBox.Show(<span class="hljs-string">&quot;请先选择一条数据&quot;</span>);<br>           &#125;<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/9553048d44794291bbe15479e654fbf8.png" alt="在这里插入图片描述"></p><h4 id="在update窗体中添加参数绑定"><a href="#在update窗体中添加参数绑定" class="headerlink" title="在update窗体中添加参数绑定"></a>在update窗体中添加参数绑定</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Update</span>(<span class="hljs-params">DataGridViewRow dev1</span>)</span><br>        &#123;<br>            InitializeComponent();<br>            textBox8.Text = dev1.Cells[<span class="hljs-number">0</span>].Value.ToString();<br>            textBox1.Text = dev1.Cells[<span class="hljs-number">1</span>].Value.ToString();<br>            textBox2.Text = dev1.Cells[<span class="hljs-number">2</span>].Value.ToString();<br>            textBox3.Text = dev1.Cells[<span class="hljs-number">3</span>].Value.ToString();<br>            textBox4.Text = dev1.Cells[<span class="hljs-number">4</span>].Value.ToString();<br>            textBox5.Text = dev1.Cells[<span class="hljs-number">5</span>].Value.ToString();<br>            textBox6.Text = dev1.Cells[<span class="hljs-number">6</span>].Value.ToString();<br>            textBox7.Text = dev1.Cells[<span class="hljs-number">7</span>].Value.ToString();<br>        &#125;<br></code></pre></td></tr></table></figure><h4 id="在update窗体中添加修改按钮代码"><a href="#在update窗体中添加修改按钮代码" class="headerlink" title="在update窗体中添加修改按钮代码"></a>在update窗体中添加修改按钮代码</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">button1_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span><br>       &#123;<br>           <span class="hljs-built_in">int</span> id = <span class="hljs-built_in">int</span>.Parse(textBox8.Text);<br>           <span class="hljs-built_in">string</span> username = textBox1.Text;<br>           <span class="hljs-built_in">string</span> name = textBox2.Text;<br>           <span class="hljs-built_in">string</span> password = textBox3.Text;<br>           <span class="hljs-built_in">string</span> age = textBox4.Text;<br>           <span class="hljs-built_in">string</span> phone = textBox5.Text;<br>           <span class="hljs-built_in">string</span> email = textBox6.Text;<br>           <span class="hljs-built_in">string</span> address = textBox7.Text;<br>           <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> study = <span class="hljs-keyword">new</span> StudyEFEntities())<br>           &#123;<br>               <span class="hljs-comment">// 假设你要更新的是用户信息  </span><br>               <span class="hljs-keyword">var</span> ToUpdate = study.TestData.FirstOrDefault(u =&gt; u.id == id);<br>               <span class="hljs-keyword">if</span> (ToUpdate != <span class="hljs-literal">null</span>)<br>               &#123;<br>                   <span class="hljs-comment">// 更新用户的属性  </span><br>                   ToUpdate.username = username;<br>                   ToUpdate.name = name;<br>                   ToUpdate.password = password;<br>                   ToUpdate.age = age;<br>                   ToUpdate.phone = phone;<br>                   ToUpdate.email = email;<br>                   ToUpdate.address = address;<br>                   <span class="hljs-comment">// 保存更改到数据库  </span><br>                   study.SaveChanges();<br>               &#125;<br>           &#125;<br>               MessageBox.Show(<span class="hljs-string">&quot;修改成功&quot;</span>);<br>               Main f1 = (Main)<span class="hljs-keyword">this</span>.Owner;<br>               f1.Refresh_Method();<br>               f1.Activate();<br>               <span class="hljs-keyword">this</span>.Hide();<br>       &#125;<br></code></pre></td></tr></table></figure><h2 id="测试运行"><a href="#测试运行" class="headerlink" title="测试运行"></a>测试运行</h2><p>运行测试没有问题。</p><h1 id="六、实现查询按钮"><a href="#六、实现查询按钮" class="headerlink" title="六、实现查询按钮"></a>六、实现查询按钮</h1><h2 id="新建表checkname，给下拉框添加数据"><a href="#新建表checkname，给下拉框添加数据" class="headerlink" title="新建表checkname，给下拉框添加数据"></a>新建表checkname，给下拉框添加数据</h2><p><img src="https://img-blog.csdnimg.cn/direct/images/EF%E6%A1%86%E6%9E%B6/75526e320ad74d32a524e6c97e65f22c.png" alt="在这里插入图片描述"><br>添加字段<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/159df9cc1cb54fdd871eda06f8927b2c.png" alt="在这里插入图片描述"></p><p>去vs里更新模型数据<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/d1fe399d8bf84bc3b424f7af036192c8.png" alt="在这里插入图片描述"></p><p>在main窗体里面绑定数据<br><img src="/./../images/EF%E6%A1%86%E6%9E%B6/03e64d968aac4c1d941a28dcd75e39c2.png" alt="在这里插入图片描述"></p><h2 id="编写代码-3"><a href="#编写代码-3" class="headerlink" title="编写代码"></a>编写代码</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//查询按钮实现</span><br>       <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">button4_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span><br>       &#123;<br>           <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> study = <span class="hljs-keyword">new</span> StudyEFEntities())<br>           &#123;<br>               <span class="hljs-comment">// 查询满足条件的用户 </span><br>               <span class="hljs-keyword">if</span> (comboBox1.SelectedValue.ToString() == <span class="hljs-string">&quot;u.id&quot;</span>) <br>               &#123;<br>                   <span class="hljs-built_in">int</span> ToCheck;<br>                   <span class="hljs-keyword">if</span> (<span class="hljs-built_in">int</span>.TryParse(textBox1.Text, <span class="hljs-keyword">out</span> ToCheck))<br>                   &#123;<br>                       <span class="hljs-keyword">var</span> test = study.TestData.Where(u =&gt; u.id == ToCheck);<br>                       <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList(); <br>                   &#125;<br>               &#125;<br>               <span class="hljs-keyword">if</span> (comboBox1.SelectedValue.ToString() == <span class="hljs-string">&quot;u.username&quot;</span>)<br>               &#123;<br>                   <span class="hljs-keyword">var</span> test = study.TestData.Where(u =&gt; u.username == textBox1.Text);<br>                   <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList();<br>               &#125;<br>               <span class="hljs-keyword">if</span> (comboBox1.SelectedValue.ToString() == <span class="hljs-string">&quot;u.name&quot;</span>)<br>               &#123;<br>                   <span class="hljs-keyword">var</span> test = study.TestData.Where(u =&gt; u.name == textBox1.Text);<br>                   <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList();<br>               &#125;<br>               <span class="hljs-keyword">if</span> (comboBox1.SelectedValue.ToString() == <span class="hljs-string">&quot;u.password&quot;</span>)<br>               &#123;<br>                   <span class="hljs-keyword">var</span> test = study.TestData.Where(u =&gt; u.password == textBox1.Text);<br>                   <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList();<br>               &#125;<br>               <span class="hljs-keyword">if</span> (comboBox1.SelectedValue.ToString() == <span class="hljs-string">&quot;u.phone&quot;</span>)<br>               &#123;<br>                   <span class="hljs-keyword">var</span> test = study.TestData.Where(u =&gt; u.phone == textBox1.Text);<br>                   <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList();<br>               &#125;<br>               <span class="hljs-keyword">if</span> (comboBox1.SelectedValue.ToString() == <span class="hljs-string">&quot;u.email&quot;</span>)<br>               &#123;<br>                   <span class="hljs-keyword">var</span> test = study.TestData.Where(u =&gt; u.email == textBox1.Text);<br>                   <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList();<br>               &#125;<br>               <span class="hljs-keyword">if</span> (comboBox1.SelectedValue.ToString() == <span class="hljs-string">&quot;u.phone&quot;</span>)<br>               &#123;<br>                   <span class="hljs-keyword">var</span> test = study.TestData.Where(u =&gt; u.phone == textBox1.Text);<br>                   <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList();<br>               &#125;<br><br>           &#125;<br>       &#125;<br>       <span class="hljs-comment">//重置按钮实现</span><br>       <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">button5_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span><br>       &#123;<br>           textBox1.Text = <span class="hljs-string">&quot;&quot;</span>;<br>           comboBox1.Text = <span class="hljs-string">&quot;&quot;</span>;<br>           <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> study = <span class="hljs-keyword">new</span> StudyEFEntities())<br>           &#123;<br>                <br>               <span class="hljs-keyword">var</span> test = study.TestData;<br>               <span class="hljs-keyword">this</span>.dataGridView1.DataSource = test.ToList();<br><br>           &#125;<br>       &#125;<br></code></pre></td></tr></table></figure><h2 id="运行测试-2"><a href="#运行测试-2" class="headerlink" title="运行测试"></a>运行测试</h2><p><img src="/./../images/EF%E6%A1%86%E6%9E%B6/34dfb9ef8a084e68bd51bc7166ebf7c8.png" alt="在这里插入图片描述"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥杯模拟赛</title>
    <link href="/2024/04/05/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/"/>
    <url>/2024/04/05/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="小郑的蓝桥平衡串"><a href="#小郑的蓝桥平衡串" class="headerlink" title="小郑的蓝桥平衡串"></a>小郑的蓝桥平衡串</h1><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>平衡串指的是一个字符串，其中包含两种不同字符，并且这两种字符的数量相等。</p><p>例如，$ababab$ 和 $aababb$ 都是平衡串，因为每种字符各有三个，而 $abaab$ 和 $aaaab$ 都不是平衡串，因为它们的字符数量不相等。</p><p>平衡串在密码学和计算机科学中具有重要应用，比如可以用于构造哈希函数或者解决一些数学问题。</p><p>小郑拿到一个只包含 $L$、$Q$ 的字符串，他的任务就是找到最长平衡串，且满足平衡串的要求，即保证子串中 $L$、$Q$ 的数量相等。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行字符串，保证字符串中只包含字符 $L$、$Q$。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数，为输入字符串中最长平衡串的长度。</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">LQLL<br></code></pre></td></tr></table></figure><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">2<br></code></pre></td></tr></table></figure><h3 id="评测数据规模"><a href="#评测数据规模" class="headerlink" title="评测数据规模"></a>评测数据规模</h3><p>对于所有评测数据，输入字符串的长度 $len \le 1000$。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="解题答案"><a href="#解题答案" class="headerlink" title="解题答案"></a>解题答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> accumulate<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_presum</span>(<span class="hljs-params">a</span>):<br>  <span class="hljs-built_in">sum</span>=<span class="hljs-built_in">list</span>(accumulate(a))<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sum</span>(<span class="hljs-params"><span class="hljs-built_in">sum</span>,l,r</span>):<br>  <span class="hljs-keyword">if</span> l==<span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>[r]<br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>[r]-<span class="hljs-built_in">sum</span>[l-<span class="hljs-number">1</span>]<br>s=<span class="hljs-built_in">input</span>()<br>n=<span class="hljs-built_in">len</span>(s)<br>a=[]<br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>  <span class="hljs-keyword">if</span> x==<span class="hljs-string">&quot;L&quot;</span>:<br>    a.append(<span class="hljs-number">1</span>)<br>  <span class="hljs-keyword">else</span>:<br>    a.append(-<span class="hljs-number">1</span>)<br><span class="hljs-built_in">sum</span>=get_presum(a)<br>ans=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i,n):<br>    <span class="hljs-keyword">if</span> get_sum(<span class="hljs-built_in">sum</span>,i,j)==<span class="hljs-number">0</span>:<br>      ans=<span class="hljs-built_in">max</span>(ans,j-i+<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="区间次方和"><a href="#区间次方和" class="headerlink" title="区间次方和"></a>区间次方和</h1><h3 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个长度为 $n$ 的整数数组 $a$ 以及 $m$ 个查询。</p><p>每个查询包含三个整数 $l,r,k$ 表示询问 $l \sim r$ 之间所有元素的 $k$ 次方和。</p><p>请对每个查询输出一个答案，答案对 $10^9+7$ 取模。</p><h3 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行输入两个整数 $n,m$ 其含义如上所述。</p><p>第二行输入 $n$ 个整数 $a[1],a[2],…,a[n]$。</p><p>接下来 $m$ 行，每行输入三个整数 $l,r,k$ 表示一个查询。</p><h3 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出 $m$ 行，每行一个整数，表示查询的答案对 $10^9+7$ 取模的结果。</p><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 3<br>1 2 3 4 5<br>1 3 2<br>2 4 3<br>3 5 1<br></code></pre></td></tr></table></figure><h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">14<br>99<br>12<br></code></pre></td></tr></table></figure><h3 id="评测数据规模："><a href="#评测数据规模：" class="headerlink" title="评测数据规模："></a>评测数据规模：</h3><p>对于 $100$% 的评测数据：$1 \leq n,m \leq 10^5$ ，$1 \leq a[i] \leq 100$ ，$1 \leq l \leq r \leq n$ ，$1 \leq k \leq 5$ 。</p><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 1770  |  总提交次数: 2005  |  通过率: 88.3%</p><p>难度: 简单   标签: 前缀和</p><h3 id="解题答案-1"><a href="#解题答案-1" class="headerlink" title="解题答案"></a>解题答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> accumulate<br>MOD=<span class="hljs-number">1000000007</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_presum</span>(<span class="hljs-params">a</span>):<br>  <span class="hljs-built_in">sum</span>=<span class="hljs-built_in">list</span>(accumulate(a))<br>  <span class="hljs-built_in">sum</span>=[x % MOD <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">sum</span>]<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sum</span>(<span class="hljs-params"><span class="hljs-built_in">sum</span>,l,r</span>):<br>  <span class="hljs-keyword">if</span> l==<span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>[r]<br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">sum</span>[r]-<span class="hljs-built_in">sum</span>[l-<span class="hljs-number">1</span>]+MOD)%MOD<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>sum_list=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">6</span>):<br>  sum_list.append(get_presum([x**i <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> a]))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  l,r,k=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-built_in">print</span>(get_sum(sum_list[k-<span class="hljs-number">1</span>],l-<span class="hljs-number">1</span>,r-<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><h1 id="蓝桥17160"><a href="#蓝桥17160" class="headerlink" title="蓝桥17160"></a>蓝桥17160</h1><h3 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h3><p>小 Z 喜欢盖印章。</p><p>有一天，小 Z 得到了一个 $n\times m$ 的网格图，与此同时，他的手上有两种印章（分别称为 A，B），如下图所示。</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/uid2149259-20240110-1704873080724.jpeg"></p><p>他想将这两种印章盖在这个网格图上。</p><p>由于小 Z 是一个有原则的人，他将按照以下规则进行操作。</p><ol><li>每个印章所形成的图案的边必须和网格图边重合。</li><li>对于网格图上的每一个格子，最多只能被一个印章图案覆盖。</li><li>对于每个印章，可以将印章顺时针旋转 $90^{\circ},180^{\circ},270^{\circ}$。</li><li>印章的图案在网格图上必须是<strong>完整</strong>的。</li></ol><p>给定小 Z 所盖完印章的网格图以及两种印章的使用次数 $K$，请你分别求出两种印章的使用次数。可以证明，在这种情况下二者的使用次数是唯一的。</p><p>数据保证存在一种方案达到要求。</p><p>具体例子可以参考样例。</p><h3 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行包含三个正整数 $n ,m, K(2 \le n \times m \le 10^{6}, 0 \le K \le n \times m)$，具体意义如题面所示。</p><p>接下来有 $n$ 行长度为 $m$ 的 01 串，其中 1 表示这个位置被印章图案覆盖。否则表示这个位置没有被覆盖。</p><h3 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出两个整数，第一个整数为 A 出现的次数，第二个整数为 B 出现的次数。</p><h3 id="样例输入1"><a href="#样例输入1" class="headerlink" title="样例输入1"></a>样例输入1</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">3</span> <span class="hljs-number">3</span><br><span class="hljs-number">110</span><br><span class="hljs-number">110</span><br><span class="hljs-number">110</span><br></code></pre></td></tr></table></figure><h3 id="xxxxxxxxxx15-1import-os2import-sys3​4-请在此输入您的代码5n-int-input-6a-list-map-int-input-split-7a-sort-8b-9c-10for-i-in-range-n-11-if-a-i-2-0-12-b-append-a-i-13-else-14-c-append-a-i-15print-“-“-join-map-str-c-”-“-join-map-str-b-python"><a href="#xxxxxxxxxx15-1import-os2import-sys3​4-请在此输入您的代码5n-int-input-6a-list-map-int-input-split-7a-sort-8b-9c-10for-i-in-range-n-11-if-a-i-2-0-12-b-append-a-i-13-else-14-c-append-a-i-15print-“-“-join-map-str-c-”-“-join-map-str-b-python" class="headerlink" title="xxxxxxxxxx15 1import os2import sys3​4# 请在此输入您的代码5n &#x3D; int(input())6a &#x3D; list(map(int, input().split()))7a.sort()8b &#x3D; []9c &#x3D; []10for i in range(n):11    if a[i] % 2 &#x3D;&#x3D; 0:12        b.append(a[i])13    else:14        c.append(a[i])15print(“ “.join(map(str, c)),” “.join(map(str,b)))python"></a>xxxxxxxxxx15 1import os2import sys3​4# 请在此输入您的代码5n &#x3D; int(input())6a &#x3D; list(map(int, input().split()))7a.sort()8b &#x3D; []9c &#x3D; []10for i in range(n):11    if a[i] % 2 &#x3D;&#x3D; 0:12        b.append(a[i])13    else:14        c.append(a[i])15print(“ “.join(map(str, c)),” “.join(map(str,b)))python</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">0 </span><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="样例输入2"><a href="#样例输入2" class="headerlink" title="样例输入2"></a>样例输入2</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-number">110</span><br><span class="hljs-number">110</span><br><span class="hljs-number">110</span><br></code></pre></td></tr></table></figure><h3 id="样例输出2"><a href="#样例输出2" class="headerlink" title="样例输出2"></a>样例输出2</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>上述样例如图所示：</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/uid2149259-20240110-1704873294740.jpeg"></p><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>2s</td><td>128M</td></tr><tr><td>Python3</td><td>3s</td><td>128M</td></tr><tr><td>PyPy3</td><td>3s</td><td>128M</td></tr><tr><td>Go</td><td>3s</td><td>128M</td></tr><tr><td>JavaScript</td><td>3s</td><td>128M</td></tr></tbody></table><h1 id="奇偶排序"><a href="#奇偶排序" class="headerlink" title="奇偶排序"></a>奇偶排序</h1><h3 id="问题描述-3"><a href="#问题描述-3" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝所在的王国名为偶数王国，在他们王国中数字的比较通常按以下步骤进行：</p><ul><li>如果两个数字的奇偶性不同，那么偶数一定大于奇数。</li><li>如果两个数字的奇偶性相同，则比较它们的实际数值大小。</li></ul><p>现在给你一个正整数数组 AA，请你输出按照偶数王国规则从小到大排序后的 AA。</p><h3 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行输入一个整数 N(1≤N≤103)N(1≤N≤103) 表示数组 AA 的长度。</p><p>第二行输入 NN 个整数 A1,A2,A3,⋯ ,AN(1≤Ai≤105)A1,A2,A3,⋯,AN(1≤Ai≤105) 表示数组 AA。</p><h3 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行 NN 个整数表示答案。</p><h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">5<br>1 2 3 4 5<br></code></pre></td></tr></table></figure><h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">1 3 5 2 4<br></code></pre></td></tr></table></figure><h1 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h1><p>解法1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><br>n = <span class="hljs-built_in">input</span>()<br>str_n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>list_a = []<br>list_b = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> str_n:<br>    <span class="hljs-keyword">if</span> i%<span class="hljs-number">2</span>==<span class="hljs-number">0</span>:<br>        list_b.append(i)<br>    <span class="hljs-keyword">else</span>:<br>        list_a.append(i)<br>list_a.sort()<br>list_b.sort()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; &quot;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>,list_a))+<span class="hljs-string">&quot; &quot;</span>+<span class="hljs-string">&quot; &quot;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>,list_b)))<br></code></pre></td></tr></table></figure><p>解法2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>a=<span class="hljs-built_in">input</span>()<br>b=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>c=[]<br>d=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(b)):<br>    <span class="hljs-keyword">if</span> b[i]%<span class="hljs-number">2</span>==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> b[i]!=<span class="hljs-number">0</span>:<br>        c.append(b[i])<br>    <span class="hljs-keyword">else</span>:<br>        d.append(b[i])<br>c.sort()<br>d.sort()<br>e=d+c<br>f=<span class="hljs-string">&#x27; &#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>,e))<br><span class="hljs-built_in">print</span>(f)<br></code></pre></td></tr></table></figure><p>解法3：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>a=[]<br>b=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  <span class="hljs-keyword">if</span> nums[i]&amp;<span class="hljs-number">1</span>:<br>    a.append(nums[i])<br>  <span class="hljs-keyword">else</span>:<br>    b.append(nums[i])<br>a.sort()<br>b.sort()<br>c=a+b<br><span class="hljs-built_in">print</span>(*c)<br></code></pre></td></tr></table></figure><p>解法4：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>a.sort()<br>b = []<br>c = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">if</span> a[i] % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:<br>        b.append(a[i])<br>    <span class="hljs-keyword">else</span>:<br>        c.append(a[i])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; &quot;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, c)),<span class="hljs-string">&quot; &quot;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>,b)))<br></code></pre></td></tr></table></figure><h1 id="可结合的元素对"><a href="#可结合的元素对" class="headerlink" title="可结合的元素对"></a>可结合的元素对</h1><h3 id="问题描述-4"><a href="#问题描述-4" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝和小桥是蓝桥学院中学业成绩最好的两位同学。一天，小蓝向小桥提出了一个问题，希望小桥能够展示她最新学到的知识。问题是这样的：</p><p>给定一个长度为 NN 的数组 A，如果一对下标 (i,j) 满足以下规则，那么称它们为可结合的元素对：</p><ul><li>1≤i&lt;j≤N。</li><li>lowbit(ai+aj)&#x3D;ai+aj ，其中 lowbit(x) 表示 x 的二进制表示中最低位的 1的值。</li></ul><p>小蓝希望小桥能够计算出数组 AA 中可结合的元素对的数量，但小桥无法解决这个问题，只能请你帮忙了。</p><h3 id="输入格式-4"><a href="#输入格式-4" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行输入一个整数 N(2≤N≤105) 表示数组 A 的长度。</p><p>第二行输入 NN 个整数 A1,A2,A3,⋯ ,AN(1≤Ai≤109) 表示数组 A。</p><h3 id="输出格式-4"><a href="#输出格式-4" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数表示答案。</p><h3 id="样例输入-3"><a href="#样例输入-3" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">5<br>2 4 6 7 8<br></code></pre></td></tr></table></figure><h3 id="样例输出-3"><a href="#样例输出-3" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">1<br></code></pre></td></tr></table></figure><h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><p>只有下标对 (1,3) 符合条件。</p><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>2s</td><td>256M</td></tr><tr><td>C</td><td>2s</td><td>256M</td></tr><tr><td>Java</td><td>3s</td><td>256M</td></tr><tr><td>Python3</td><td>4s</td><td>256M</td></tr><tr><td>PyPy3</td><td>4s</td><td>256M</td></tr><tr><td>Go</td><td>4s</td><td>256M</td></tr><tr><td>JavaScript</td><td>4s</td><td>256M</td></tr></tbody></table><h2 id="解题思路："><a href="#解题思路：" class="headerlink" title="解题思路："></a>解题思路：</h2><p>解法1：</p><p>二者之和为2的幂次即为所求</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>a.sort()<br>pool =&#123;&#125;<br><br>rs = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> a:<br>  e = <span class="hljs-number">2</span> ** x.bit_length()-x<br>  rs += pool.get(e,<span class="hljs-number">0</span>)<br>  <span class="hljs-keyword">if</span> x <span class="hljs-keyword">in</span> pool:<br>      pool[x] += <span class="hljs-number">1</span><br>  <span class="hljs-keyword">else</span>:<br>      pool[x] = <span class="hljs-number">1</span><br><br><span class="hljs-built_in">print</span>(rs)<br></code></pre></td></tr></table></figure><p>解法2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>arr = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>arr.sort()<br>d = Counter()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<span class="hljs-comment">#预处理计数</span><br>    d[arr[i]] += <span class="hljs-number">1</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    d[arr[i]] -= <span class="hljs-number">1</span> <span class="hljs-comment">#计数减去当前位置</span><br>    cnt = <span class="hljs-built_in">int</span>(log(arr[i], <span class="hljs-number">2</span>)) + <span class="hljs-number">1</span><br>    res = <span class="hljs-number">2</span> ** cnt - arr[i]<br>    ans += d[res]<br>    <span class="hljs-comment"># ans+=arr[0:i].count(res)</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>解法3：</p><p>两个数加起来是2n的都符合条件，用hash表计数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>res = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">32</span>): res.append(<span class="hljs-number">1</span>&lt;&lt;i)<br>cnt = &#123;&#125;<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(res)):<br>        ans += cnt.get(res[j] - a[i], <span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">if</span> a[i] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cnt: cnt[a[i]] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>: cnt[a[i]] += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="题目：霓虹"><a href="#题目：霓虹" class="headerlink" title="题目：霓虹"></a>题目：霓虹</h1><h3 id="问题描述-5"><a href="#问题描述-5" class="headerlink" title="问题描述"></a>问题描述</h3><p>晚上，小蓝正无聊的走在大路上，小蓝所在的街区是一个带有赛博朋克风格的街区。</p><p>他抬头一看，看到了很多霓虹灯牌。在其中的某一个店铺前，挂着一排的数字灯牌，每一个数字的显示都依靠 77 段 LED 管，亮着的灯管组成数字，具体来说如下图所示： </p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/uid1792586-20240227-1709024109264.jpeg" alt="图片描述"></p><p>小蓝刚学过数字电路，他知道具体的工作原理如下：</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/uid1792586-20240227-1709024091566.jpeg" alt="图片描述"></p><p>在思考的过程中，他发现数字发生了变化。他想要知道，在数字变化的过程中，总共有多少根<strong>灯管</strong>的状态产生了变化？</p><p>例如，从显示数字 00 到显示数字 66，会有一个灯管熄灭，一个灯管点亮，那么总共有两根灯管发生了变化。</p><p>具体来说，当前的数字串是 AA，一秒钟之后，数字串变成了 BB，小蓝想知道，在数字跳转的过程中，有多少个<strong>灯管</strong>的状态发生了变化。</p><h3 id="输入格式-5"><a href="#输入格式-5" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入共两行，包含两个<strong>等长</strong>字符串。</p><p>第一行包含一个字符串 SS（∣S∣≤105∣S∣≤105），代表一开始的数字串。</p><p>第二行包含一个字符串 TT（∣T∣≤105∣T∣≤105），代表跳变后的数字串。</p><h3 id="输出格式-5"><a href="#输出格式-5" class="headerlink" title="输出格式"></a>输出格式</h3><p>一个整数，代表跳变过程中变化的灯管数量。</p><h3 id="样例输入-4"><a href="#样例输入-4" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">01<br>56<br></code></pre></td></tr></table></figure><h3 id="样例输出-4"><a href="#样例输出-4" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">9<br></code></pre></td></tr></table></figure><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h3><p>跳变过程如题干中的图片。</p><p>0→50→5 变化了 33 根灯管，1→61→6 变化了 66 根灯管，共变化 99 根灯管。</p><h3 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h3><p>本题考察位运算，具体考察异或运算。</p><p>每个数字由 77 个数码管表示，我们可以用 77 个二进制位来表示每个数。</p><p>0∼90∼9 可以表示为如下数位：</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs maxima">int pos[] = &#123;<span class="hljs-number">0B1111110</span>, <span class="hljs-number">0B0000110</span>, <span class="hljs-number">0B1011011</span>, <span class="hljs-number">0B1001111</span>, <span class="hljs-number">0B0100111</span>,<br>             <span class="hljs-number">0B1101101</span>, <span class="hljs-number">0B1111101</span>, <span class="hljs-number">0B1000110</span>, <span class="hljs-number">0B1111111</span>, <span class="hljs-number">0B1101111</span>&#125;;<br></code></pre></td></tr></table></figure><p><code>0B</code> 是代码语言的二进制前缀，同样的还有 <code>0X</code> 是十六进制前缀，<code>0</code> 是八进制前缀。</p><p>对于两个数，比如 11 和 22，我们可以用 pos1⊗pos2pos1⊗pos2，⊗⊗ 为异或，结果为 <code>0B1011101</code>，11 的数量就是不同的数量。</p><p>复杂度：O(∣S∣)O(∣S∣)。</p><p>如果你愿意统计出 100100 种情况，也是可以的。</p><h3 id="AC-Code"><a href="#AC-Code" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span>+<span class="hljs-number">100</span>;<br><br><span class="hljs-type">int</span> pos[] = &#123;<span class="hljs-number">0B</span>1111110, <span class="hljs-number">0B</span>0000110, <span class="hljs-number">0B</span>1011011, <span class="hljs-number">0B</span>1001111, <span class="hljs-number">0B</span>0100111,<br>             <span class="hljs-number">0B</span>1101101, <span class="hljs-number">0B</span>1111101, <span class="hljs-number">0B</span>1000110, <span class="hljs-number">0B</span>1111111, <span class="hljs-number">0B</span>1101111&#125;;<br><br><span class="hljs-type">char</span> S[N], T[N];<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">nu_i</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (x) &#123;<br>        res += (x &amp; <span class="hljs-number">1</span>);<br>        x &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; S;<br>    cin &gt;&gt; T;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; S[i]; ++i) &#123;<br>        ans += <span class="hljs-built_in">nu_i</span>(pos[S[i] - <span class="hljs-string">&#x27;0&#x27;</span>] ^ pos[T[i] - <span class="hljs-string">&#x27;0&#x27;</span>]);<br>    &#125;<br>    cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">std</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">100010</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] pos = &#123;<span class="hljs-number">0B1111110</span>, <span class="hljs-number">0B0000110</span>, <span class="hljs-number">0B1011011</span>, <span class="hljs-number">0B1001111</span>, <span class="hljs-number">0B0100111</span>,<br>                        <span class="hljs-number">0B1101101</span>, <span class="hljs-number">0B1111101</span>, <span class="hljs-number">0B1000110</span>, <span class="hljs-number">0B1111111</span>, <span class="hljs-number">0B1101111</span>&#125;;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">nu_i</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (x != <span class="hljs-number">0</span>) &#123;<br>            res += (x &amp; <span class="hljs-number">1</span>);<br>            x &gt;&gt;= <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">char</span>[] S = scanner.next().toCharArray();<br>        <span class="hljs-type">char</span>[] T = scanner.next().toCharArray();<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; S.length; i++) &#123;<br>            ans += nu_i(pos[S[i] - <span class="hljs-string">&#x27;0&#x27;</span>] ^ pos[T[i] - <span class="hljs-string">&#x27;0&#x27;</span>]);<br>        &#125;<br>        System.out.println(ans);<br>        scanner.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">nu_i</span>(<span class="hljs-params">x</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> x:<br>        res += (x &amp; <span class="hljs-number">1</span>)<br>        x &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pos = [<span class="hljs-number">0B1111110</span>, <span class="hljs-number">0B0000110</span>, <span class="hljs-number">0B1011011</span>, <span class="hljs-number">0B1001111</span>, <span class="hljs-number">0B0100111</span>,<br>           <span class="hljs-number">0B1101101</span>, <span class="hljs-number">0B1111101</span>, <span class="hljs-number">0B1000110</span>, <span class="hljs-number">0B1111111</span>, <span class="hljs-number">0B1101111</span>]<br><br>    S = <span class="hljs-built_in">input</span>()<br>    T = <span class="hljs-built_in">input</span>()<br><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(S)):<br>        ans += nu_i(pos[<span class="hljs-built_in">int</span>(S[i])] ^ pos[<span class="hljs-built_in">int</span>(T[i])])<br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h3 id="其他解法："><a href="#其他解法：" class="headerlink" title="其他解法："></a>其他解法：</h3><p>解法1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">li=[[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]]<br>num1=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>()))<br>num2=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>()))<br>add=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(num1)):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> li:<br>    add+=j[num1[i]]^j[num2[i]]<br><span class="hljs-built_in">print</span>(add)<br></code></pre></td></tr></table></figure><p>解法2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dd</span>(<span class="hljs-params">a,b</span>):<br>  z = <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a:<br>    <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> b:<br>      z+=i<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> b:<br>    <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> a:<br>      z+=i<br>  <span class="hljs-keyword">return</span> z<br><br>f1 = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27; &#x27;</span>)<br>f2 = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27; &#x27;</span>)<br>sz = &#123;<br>    <span class="hljs-string">&#x27;0&#x27;</span>:<span class="hljs-string">&#x27;abcdef&#x27;</span>,<br>    <span class="hljs-string">&#x27;1&#x27;</span>:<span class="hljs-string">&#x27;bc&#x27;</span>,<br>    <span class="hljs-string">&#x27;2&#x27;</span>:<span class="hljs-string">&#x27;abged&#x27;</span>,<br>    <span class="hljs-string">&#x27;3&#x27;</span>:<span class="hljs-string">&#x27;abgcd&#x27;</span>,<br>    <span class="hljs-string">&#x27;4&#x27;</span>:<span class="hljs-string">&#x27;fgbc&#x27;</span>,<br>    <span class="hljs-string">&#x27;5&#x27;</span>:<span class="hljs-string">&#x27;afgcd&#x27;</span>,<br>    <span class="hljs-string">&#x27;6&#x27;</span>:<span class="hljs-string">&#x27;afedcg&#x27;</span>,<br>    <span class="hljs-string">&#x27;7&#x27;</span>:<span class="hljs-string">&#x27;abc&#x27;</span>,<br>    <span class="hljs-string">&#x27;8&#x27;</span>:<span class="hljs-string">&#x27;abcdefg&#x27;</span>,<br>    <span class="hljs-string">&#x27;9&#x27;</span>:<span class="hljs-string">&#x27;abcdfg&#x27;</span><br>&#125;<br>t = <span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-keyword">for</span> i,j <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(f1):<br>    t+=dd(sz[j],sz[f2[i]])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(t))<br></code></pre></td></tr></table></figure><p>解法3：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>num = [[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>],<br>       [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>       [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]]<br><br>start_num = <span class="hljs-built_in">input</span>()<br>end_num = <span class="hljs-built_in">input</span>()<br>count = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(start_num)):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">7</span>):<br>        <span class="hljs-keyword">if</span> num[<span class="hljs-built_in">int</span>(start_num[i])][j] != num[<span class="hljs-built_in">int</span>(end_num[i])][j]:<br>            count += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><p>解法4：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">S = <span class="hljs-built_in">input</span>()<br>T = <span class="hljs-built_in">input</span>()<br>n = <span class="hljs-built_in">len</span>(S)<br>ans = <span class="hljs-number">0</span><br>res = &#123;<span class="hljs-number">0</span>: <span class="hljs-string">&quot;1111110&quot;</span>, <span class="hljs-number">1</span>: <span class="hljs-string">&quot;0011000&quot;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&quot;0110111&quot;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&quot;0111101&quot;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&quot;1011001&quot;</span>, <span class="hljs-number">5</span>: <span class="hljs-string">&quot;1101101&quot;</span>,<br>       <span class="hljs-number">6</span>: <span class="hljs-string">&quot;1101111&quot;</span>, <span class="hljs-number">7</span>: <span class="hljs-string">&quot;0111000&quot;</span>, <span class="hljs-number">8</span>: <span class="hljs-string">&quot;1111111&quot;</span>, <span class="hljs-number">9</span>: <span class="hljs-string">&quot;1111101&quot;</span>&#125;<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    a = res[<span class="hljs-built_in">int</span>(S[i])]<br>    b = res[<span class="hljs-built_in">int</span>(T[i])]<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(a)):<br>        <span class="hljs-keyword">if</span> a[j] != b[j]:<br>            ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="矩阵X"><a href="#矩阵X" class="headerlink" title="矩阵X"></a>矩阵X</h1><h3 id="问题描述-6"><a href="#问题描述-6" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝面对一个 n×m 的矩形D，其中每个位置 (i,j) 上都有一个元素 xi,j。</p><p>我们定义两个函数 f(D)、g(D)，f(D) 的值为矩阵 D 的所有元素的和值，g(D) 为矩阵 D 的极差，即矩阵中的最大值减去最小值。</p><p>他需要在这个矩形中选择一个 n′×m′n′×m′ 的<strong>连续子矩阵</strong>，记为矩阵 D′，他希望选择的连续子矩阵 D′ 能够使得 f(D′)×g(D′) 最大化。</p><p>小蓝知道你很聪明，于是他把问题交给了你，希望你回答他最大化的值是多少。</p><p>连续子矩阵：是在原矩阵选取部分<strong>连续行</strong>、<strong>连续列</strong>所组成的新矩阵。</p><h3 id="输入格式-6"><a href="#输入格式-6" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行包含四个整数 n,m,n′,m′（n×m≤106,1≤n′≤n,1≤m′≤m），表示矩形的行数和列数，以及你需要选择的子矩阵的行数和列数。</p><p>接下来 n 行，每行包含 m 个整数，表示矩形中每个位置的元素值 xi,j（1≤xi,j≤106）。</p><p>输入量较大，建议采用较快的输入输出方式。</p><h3 id="输出格式-6"><a href="#输出格式-6" class="headerlink" title="输出格式"></a>输出格式</h3><p>一个整数，代表最大化的值。</p><h3 id="样例输入-5"><a href="#样例输入-5" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">4 4 2 2<br>1 2 3 3<br>2 3 4 5<br>1 1 3 5<br>1 7 2 4<br></code></pre></td></tr></table></figure><h3 id="样例输出-5"><a href="#样例输出-5" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">78<br></code></pre></td></tr></table></figure><h3 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h3><p>选择的连续子矩阵如下图黄色部分所示：</p><p>f(D′)&#x3D;13,g(D′)&#x3D;6f(D′)&#x3D;13,g(D′)&#x3D;6。</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/uid1792586-20240228-1709110370184.png" alt="图片描述"></p><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>4s</td><td>256M</td></tr><tr><td>C</td><td>4s</td><td>256M</td></tr><tr><td>Java</td><td>5s</td><td>256M</td></tr><tr><td>Python3</td><td>10s</td><td>256M</td></tr><tr><td>PyPy3</td><td>10s</td><td>256M</td></tr><tr><td>Go</td><td>10s</td><td>256M</td></tr><tr><td>JavaScript</td><td>10s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h3><p>本题考察单调队列，优先队列，思维，二维前缀和。</p><p>首先第一个问题是存储问题，由于 n×m≤106n×m≤106，但是不知道 n,mn,m 的具体范围，所以，我们可以用一维数组模拟二维，或者二维 vectorvector，这样便就可以解决二维存储问题。</p><p>第二个问题，矩阵求和，我们可以用简单的二维前缀和解决这个问题。</p><p>第三个问题，求子矩阵的最值，我们有两个解法：</p><ol><li>我们记录一下每一行的连续 m′m′ 个元素的最值，具体用优先队列，或者单调队列实现吗，然后我们枚举每个子矩阵，并且暴力扫描这个子矩阵的所有行，由于行数可能很大，我们可以调换一下行列，因为 min⁡(n′,m′)≤106min(n′,m′)≤1</li></ol><p>06，所以整体的复杂度为 O(nmnm)O(nmnm</p><ol><li>)，四秒可以通过。</li><li>我们不需要暴力扫描子矩阵的所有行，我们仍然可以通过单调队列完成扫描每一行，然后记录下连续 n′n′ 的最值即可。复杂度为 O(nm)O(nm)。</li></ol><h3 id="AC-Code-1"><a href="#AC-Code-1" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n, m, n1, m1;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span>+<span class="hljs-number">100</span>;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><br><span class="hljs-type">int</span> a[N];<br>ll t[N];<br><span class="hljs-type">int</span> Mx[N], Mn[N];<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">getidx</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a * m + b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-number">0</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cin &gt;&gt; n &gt;&gt; m &gt;&gt; n1 &gt;&gt; m1;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n * m; ++i) &#123;<br>        cin &gt;&gt; t[i];<br>        a[i] = t[i];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (n1 &gt; m1) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; ++j) &#123;<br>                a[j * n + i] = t[i * m + j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">swap</span>(n1, m1);<br>        <span class="hljs-built_in">swap</span>(n, m);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        t[<span class="hljs-built_in">getidx</span>(i, <span class="hljs-number">0</span>)] = a[<span class="hljs-built_in">getidx</span>(i, <span class="hljs-number">0</span>)];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; m; ++j) &#123;<br>            t[<span class="hljs-built_in">getidx</span>(i, j)] = a[<span class="hljs-built_in">getidx</span>(i, j)] + t[<span class="hljs-built_in">getidx</span>(i, j - <span class="hljs-number">1</span>)];<br>        &#125;<br>    &#125;  <br>    <span class="hljs-keyword">using</span> Pair = pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;;<br>    priority_queue&lt;Pair&gt; qx, qn;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">while</span> (!qx.<span class="hljs-built_in">empty</span>()) qx.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">while</span> (!qn.<span class="hljs-built_in">empty</span>()) qn.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m1 - <span class="hljs-number">1</span>; ++j) &#123;<br>            qx.<span class="hljs-built_in">push</span>(&#123;a[<span class="hljs-built_in">getidx</span>(i, j)], j&#125;);<br>            qn.<span class="hljs-built_in">push</span>(&#123;-a[<span class="hljs-built_in">getidx</span>(i, j)], j&#125;);<br>        &#125;   <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = m1 - <span class="hljs-number">1</span>; j &lt; m; ++j) &#123;<br>            <span class="hljs-keyword">while</span> (!qx.<span class="hljs-built_in">empty</span>() &amp;&amp; qx.<span class="hljs-built_in">top</span>().second &lt;= j - m1) qx.<span class="hljs-built_in">pop</span>();<br>            <span class="hljs-keyword">while</span> (!qn.<span class="hljs-built_in">empty</span>() &amp;&amp; qn.<span class="hljs-built_in">top</span>().second &lt;= j - m1) qn.<span class="hljs-built_in">pop</span>();<br>            qx.<span class="hljs-built_in">push</span>(&#123;a[<span class="hljs-built_in">getidx</span>(i, j)], j&#125;);<br>            qn.<span class="hljs-built_in">push</span>(&#123;-a[<span class="hljs-built_in">getidx</span>(i, j)], j&#125;);<br>            Mx[<span class="hljs-built_in">getidx</span>(i, j)] = qx.<span class="hljs-built_in">top</span>().first;<br>            Mn[<span class="hljs-built_in">getidx</span>(i, j)] = -qn.<span class="hljs-built_in">top</span>().first;<br>        &#125;<br>    &#125;  <br>    ll ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n1 - <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = m1 - <span class="hljs-number">1</span>; j &lt; m; ++j) &#123;<br>            ll sum = <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> tx = <span class="hljs-number">-1e9</span>, tn = <span class="hljs-number">1e9</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; n1; ++k) &#123;<br>                tx = <span class="hljs-built_in">max</span>(tx, Mx[<span class="hljs-built_in">getidx</span>(i - k, j)]);<br>                tn = <span class="hljs-built_in">min</span>(tn, Mn[<span class="hljs-built_in">getidx</span>(i - k, j)]);<br>                <span class="hljs-keyword">if</span> (j == m1 - <span class="hljs-number">1</span>) sum += t[<span class="hljs-built_in">getidx</span>(i - k, j)];<br>                <span class="hljs-keyword">else</span> sum += t[<span class="hljs-built_in">getidx</span>(i - k, j)] - t[<span class="hljs-built_in">getidx</span>(i - k, j - m1)];<br>            &#125;<br>            ans = <span class="hljs-built_in">max</span>(ans, sum * (tx - tn));<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.PriorityQueue;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">std</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m, n1, m1;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] a, Mx, Mn;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] t;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = scanner.nextInt();<br>        m = scanner.nextInt();<br>        n1 = scanner.nextInt();<br>        m1 = scanner.nextInt();<br>        <br>        a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n * m];<br>        t = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[n * m];<br>        Mx = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n * m];<br>        Mn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n * m];<br>        <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n * m; ++i) &#123;<br>            t[i] = scanner.nextLong();<br>            a[i] = (<span class="hljs-type">int</span>) t[i];<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (n1 &gt; m1) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m; ++j) &#123;<br>                    a[j * n + i] = (<span class="hljs-type">int</span>) t[i * m + j];<br>                &#125;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> n1;<br>            n1 = m1;<br>            m1 = temp;<br>            temp = n;<br>            n = m;<br>            m = temp;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            t[getidx(i, <span class="hljs-number">0</span>)] = a[getidx(i, <span class="hljs-number">0</span>)];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt; m; ++j) &#123;<br>                t[getidx(i, j)] = a[getidx(i, j)] + t[getidx(i, j - <span class="hljs-number">1</span>)];<br>            &#125;<br>        &#125;<br><br>        PriorityQueue&lt;Pair&gt; qx = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;((p1, p2) -&gt; Integer.compare(p2.first, p1.first));<br>        PriorityQueue&lt;Pair&gt; qn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;((p1, p2) -&gt; Integer.compare(p2.first, p1.first));<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">while</span> (!qx.isEmpty()) qx.poll();<br>            <span class="hljs-keyword">while</span> (!qn.isEmpty()) qn.poll();<br>            <br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m1 - <span class="hljs-number">1</span>; ++j) &#123;<br>                qx.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(a[getidx(i, j)], j));<br>                qn.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(-a[getidx(i, j)], j));<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> m1 - <span class="hljs-number">1</span>; j &lt; m; ++j) &#123;<br>                <span class="hljs-keyword">while</span> (!qx.isEmpty() &amp;&amp; qx.peek().second &lt;= j - m1) qx.poll();<br>                <span class="hljs-keyword">while</span> (!qn.isEmpty() &amp;&amp; qn.peek().second &lt;= j - m1) qn.poll();<br>                qx.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(a[getidx(i, j)], j));<br>                qn.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(-a[getidx(i, j)], j));<br>                Mx[getidx(i, j)] = qx.peek().first;<br>                Mn[getidx(i, j)] = -qn.peek().first;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">long</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n1 - <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> m1 - <span class="hljs-number">1</span>; j &lt; m; ++j) &#123;<br>                <span class="hljs-type">long</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> Integer.MIN_VALUE, tn = Integer.MAX_VALUE;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &lt; n1; ++k) &#123;<br>                    tx = Math.max(tx, Mx[getidx(i - k, j)]);<br>                    tn = Math.min(tn, Mn[getidx(i - k, j)]);<br>                    <span class="hljs-keyword">if</span> (j == m1 - <span class="hljs-number">1</span>) sum += t[getidx(i - k, j)];<br>                    <span class="hljs-keyword">else</span> sum += t[getidx(i - k, j)] - t[getidx(i - k, j - m1)];<br>                &#125;<br>                ans = Math.max(ans, sum * (tx - tn));<br>            &#125;<br>        &#125;<br>        System.out.println(ans);<br>        scanner.close();<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getidx</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> a * m + b;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pair</span> &#123;<br>        <span class="hljs-type">int</span> first;<br>        <span class="hljs-type">int</span> second;<br><br>        Pair(<span class="hljs-type">int</span> first, <span class="hljs-type">int</span> second) &#123;<br>            <span class="hljs-built_in">this</span>.first = first;<br>            <span class="hljs-built_in">this</span>.second = second;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br>n, m, n1, m1 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = []<br>t = []<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    xx = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> xx:<br>        <span class="hljs-comment"># print(num)</span><br>        t.append(num)<br>        a.append(num)<br><br><span class="hljs-keyword">if</span> n1 &gt; m1:<br>    a = [t[i * m + j] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    n1, m1 = m1, n1<br>    n, m = m, n<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        <span class="hljs-keyword">if</span> j == <span class="hljs-number">0</span>:<br>            t[i * m + j] = a[i * m + j]<br>        <span class="hljs-keyword">else</span>:<br>            t[i * m + j] = a[i * m + j] + t[i * m + j - <span class="hljs-number">1</span>]<br><br>Mx = [<span class="hljs-number">0</span>] * (n * m)<br>Mn = [<span class="hljs-number">0</span>] * (n * m)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    qx = []<br>    qn = []<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m1 - <span class="hljs-number">1</span>):<br>        heapq.heappush(qx, (-a[i * m + j], j))<br>        heapq.heappush(qn, (a[i * m + j], j))<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m1 - <span class="hljs-number">1</span>, m):<br>        <span class="hljs-keyword">while</span> qx <span class="hljs-keyword">and</span> qx[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] &lt;= j - m1:<br>            heapq.heappop(qx)<br>        <span class="hljs-keyword">while</span> qn <span class="hljs-keyword">and</span> qn[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] &lt;= j - m1:<br>            heapq.heappop(qn)<br>        heapq.heappush(qx, (-a[i * m + j], j))<br>        heapq.heappush(qn, (a[i * m + j], j))<br>        Mx[i * m + j] = -qx[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]<br>        Mn[i * m + j] = qn[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]<br><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n1 - <span class="hljs-number">1</span>, n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m1 - <span class="hljs-number">1</span>, m):<br>        sum_val = <span class="hljs-number">0</span><br>        tx = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;-inf&#x27;</span>)<br>        tn = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n1):<br>            tx = <span class="hljs-built_in">max</span>(tx, Mx[(i - k) * m + j])<br>            tn = <span class="hljs-built_in">min</span>(tn, Mn[(i - k) * m + j])<br>            <span class="hljs-keyword">if</span> j == m1 - <span class="hljs-number">1</span>:<br>                sum_val += t[(i - k) * m + j]<br>            <span class="hljs-keyword">else</span>:<br>                sum_val += t[(i - k) * m + j] - t[(i - k) * m + j - m1]<br>        ans = <span class="hljs-built_in">max</span>(ans, sum_val * (tx - tn))<br><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h3 id="解题思路2"><a href="#解题思路2" class="headerlink" title="解题思路2"></a>解题思路2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><span class="hljs-built_in">input</span> = sys.stdin.readline<br><span class="hljs-comment"># 请在此输入您的代码</span><br>n, m, n1, m1 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>matrix = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    matrix.append([<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())))<br><br><span class="hljs-comment"># 二维前缀和</span><br>prefix = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        prefix[i][j] = prefix[i-<span class="hljs-number">1</span>][j] + prefix[i][j-<span class="hljs-number">1</span>] - prefix[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>] + matrix[i][j]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">shift_window</span>(<span class="hljs-params">a, n, k, f, l</span>):<br>    b = []<br>    de = deque()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">while</span> de <span class="hljs-keyword">and</span> f(a[i], a[de[-<span class="hljs-number">1</span>]], l):<br>            de.pop()<br>        de.append(i)<br>        <span class="hljs-keyword">if</span> i &gt;= de[<span class="hljs-number">0</span>] + k:<br>            de.popleft()<br>        <span class="hljs-keyword">if</span> i &gt;= k - <span class="hljs-number">1</span>:<br>            b.append(a[de[<span class="hljs-number">0</span>]])<br>    <span class="hljs-keyword">return</span> b<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x, y, l</span>):<br>    <span class="hljs-keyword">if</span> l:<br>        <span class="hljs-keyword">return</span> x &gt;= y<br>    <span class="hljs-keyword">return</span> x &lt;= y<br><br><br>bb_mx = []<br>bb_mn = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    bb_mx.append(shift_window(matrix[i][<span class="hljs-number">1</span>:], m, m1, f, <span class="hljs-number">1</span>))<br>    bb_mn.append(shift_window(matrix[i][<span class="hljs-number">1</span>:], m, m1, f, <span class="hljs-number">0</span>))<br><br>cc_mx = []<br>cc_mn = []<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(bb_mx[<span class="hljs-number">0</span>])):<br>    temp1 = []<br>    temp2 = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        temp1.append(bb_mx[i][j])<br>        temp2.append(bb_mn[i][j])<br>    cc_mx.extend(shift_window(temp1, n, n1, f, <span class="hljs-number">1</span>))<br>    cc_mn.extend(shift_window(temp2, n, n1, f, <span class="hljs-number">0</span>))<br><br>gap = [<span class="hljs-number">0</span>] * <span class="hljs-built_in">len</span>(cc_mn)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(cc_mn)):<br>    gap[i] = cc_mx[i] - cc_mn[i]<br>cnt = <span class="hljs-number">0</span><br>ans = -<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m - m1 + <span class="hljs-number">2</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n - n1 + <span class="hljs-number">2</span>):<br>        ii, jj = i + n1 - <span class="hljs-number">1</span>, j + m1 - <span class="hljs-number">1</span><br>        pre_sum = prefix[ii][jj] - prefix[ii-n1][jj] - prefix[ii][jj-m1] + prefix[ii-n1][jj-m1]<br>        ans = <span class="hljs-built_in">max</span>(ans, pre_sum * gap[cnt])<br>        cnt += <span class="hljs-number">1</span><br><br><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="兽之泪"><a href="#兽之泪" class="headerlink" title="兽之泪"></a>兽之泪</h1><h3 id="问题描述-7"><a href="#问题描述-7" class="headerlink" title="问题描述"></a>问题描述</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E6%A8%A1%E6%8B%9F%E8%B5%9B%E6%B1%87%E6%80%BB/uid1792586-20240228-1709088676873.png" alt="图片描述"></p><p>在蓝桥王国，流传着一个古老的传说：在怪兽谷，有一笔由神圣骑士留下的宝藏。</p><p>小蓝是一位年轻而勇敢的冒险家，他决定去寻找宝藏。根据远古卷轴的提示，如果要找到宝藏，那么需要集齐 nn 滴兽之泪，同时卷轴中也记载了，每击败一次怪物，就能够收集一滴兽之泪。</p><p>小蓝知道，这些怪物并非泛泛之辈，每一只都拥有强大的力量和狡猾的技巧。每一只怪物都有它独特的弱点和对策，小蓝必须谨慎选择战斗的策略和使用的能量。</p><p>在怪兽谷中，有 k 只怪兽。对于第 ii 只怪兽，第一次击败他需要 xixi 点能量，后续再击败他需要 yi点能量，由于怪兽吃了亏，所以有所准备，可以得到 yi≥xi。在挑战过程中，前 k−1 只怪兽可以随意挑战，但是第 kk 只怪兽是怪兽之王，如果要挑战第 k只怪兽，那么对于前 k−1 只怪兽<strong>都要击败至少一次</strong>。</p><p>小蓝想知道，如果要集齐 n 滴兽之泪，那么至少需要多少能量。</p><h3 id="输入格式-7"><a href="#输入格式-7" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行包含两个整数 kk 和 nn（2≤k≤105,1≤n≤2×105），表示怪物的数量和需要收集的兽之泪的数量。</p><p>接下来 kk 行，每行包含两个整数 xi 和 yi（1≤xi≤yi≤109），表示第 ii 只怪物第一次和后续击败所需的能量。</p><h3 id="输出格式-7"><a href="#输出格式-7" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数，表示小蓝至少需要多少点能量才能收集完成。</p><h3 id="样例输入-6"><a href="#样例输入-6" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">3 4<br>2 4<br>4 5<br>1 1<br></code></pre></td></tr></table></figure><h3 id="样例输出-6"><a href="#样例输出-6" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">8<br></code></pre></td></tr></table></figure><h3 id="说明-3"><a href="#说明-3" class="headerlink" title="说明"></a>说明</h3><p>一种可行的方案是：</p><ol><li>第一次选择 1 号怪物，消耗能量 2。</li><li>第二次选择 2 号怪物，消耗能量 4。</li><li>由于 1,2都已经击败一次，所以可以选择 33 号，第三次选择 3 号怪物，消耗能量 1。</li><li>第四次选择 3 号怪物，消耗能量 1。</li></ol><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h2 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h2><h3 id="解题思路-4"><a href="#解题思路-4" class="headerlink" title="解题思路"></a>解题思路</h3><p>考察分情况讨论与优先队列。</p><ol><li>攻击最后一只怪兽。</li><li>不攻击最后一只怪兽。</li></ol><p>如果攻击最后一只怪兽，那么每只怪兽都要攻击至少一次，然后还剩下 n−kn−k 次，只需要选择最小的一个攻击 n−kn−k 次即可。</p><p>如果不攻击最后一只怪兽，那么只能攻击前 k−1k−1 只怪兽，考虑优先队列，我们首先将前 k−1k−1 只怪兽都入队，然后每次选择最小的那个，当他攻击过后，我们将第二次攻击的能量入队，持续 nn 次即可。</p><p>时间复杂度：O(nlog⁡k)O(nlogk)。</p><h3 id="AC-Code-2"><a href="#AC-Code-2" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n, k;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span>+<span class="hljs-number">100</span>;<br><span class="hljs-type">int</span> a[N], b[N];<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> Pair = pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; k &gt;&gt; n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= k; ++i) &#123;<br>        cin &gt;&gt; a[i] &gt;&gt; b[i];<br>    &#125;<br>    ll ans1 = <span class="hljs-number">0</span>, ans2 = <span class="hljs-number">1e18</span>;<br><br><span class="hljs-comment">// ------- 不挑战最后一个怪兽</span><br>    priority_queue&lt;Pair&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; k; ++i) &#123;<br>        q.<span class="hljs-built_in">push</span>(&#123;-a[i], i&#125;);<br>    &#125;<br>    <span class="hljs-type">int</span> tmp = n;<br>    <span class="hljs-keyword">while</span> (tmp) &#123;<br>        <span class="hljs-keyword">auto</span> x = q.<span class="hljs-built_in">top</span>(); q.<span class="hljs-built_in">pop</span>();<br>        ans1 += -x.first;<br>        q.<span class="hljs-built_in">push</span>(&#123;-b[x.second], x.second&#125;);<br>        tmp --;<br>    &#125;<br>    <br><span class="hljs-comment">// ------- 挑战最后一个怪兽</span><br>    <span class="hljs-keyword">if</span> (n &gt;= k) &#123;<br>        ans2 = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= k; ++i) &#123;<br>            ans2 += a[i];<br>            q.<span class="hljs-built_in">push</span>(&#123;-b[i], i&#125;);<br>        &#125;<br>        n -= k;<br>        <span class="hljs-keyword">while</span> (n) &#123;<br>            <span class="hljs-keyword">auto</span> x = q.<span class="hljs-built_in">top</span>(); q.<span class="hljs-built_in">pop</span>();<br>            ans2 += -x.first;<br>            q.<span class="hljs-built_in">push</span>(&#123;-b[x.second], x.second&#125;);<br>            n --;<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">min</span>(ans1, ans2) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.PriorityQueue;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">std</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pair</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;Pair&gt; &#123;<br>        <span class="hljs-type">int</span> first;<br>        <span class="hljs-type">int</span> second;<br><br>        Pair(<span class="hljs-type">int</span> first, <span class="hljs-type">int</span> second) &#123;<br>            <span class="hljs-built_in">this</span>.first = first;<br>            <span class="hljs-built_in">this</span>.second = second;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Pair other)</span> &#123;<br>            <span class="hljs-keyword">return</span> Integer.compare(<span class="hljs-built_in">this</span>.first, other.first);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>        <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[k + <span class="hljs-number">1</span>];<br>        <span class="hljs-type">int</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[k + <span class="hljs-number">1</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= k; ++i) &#123;<br>            a[i] = scanner.nextInt();<br>            b[i] = scanner.nextInt();<br>        &#125;<br><br>        <span class="hljs-type">long</span> <span class="hljs-variable">ans1</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, ans2 = Long.MAX_VALUE;<br><br>        <span class="hljs-comment">// ------- 不挑战最后一个怪兽</span><br>        PriorityQueue&lt;Pair&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; k; ++i) &#123;<br>            q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(a[i], i));<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">tmp</span> <span class="hljs-operator">=</span> n;<br>        <span class="hljs-keyword">while</span> (tmp &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">Pair</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> q.poll();<br>            ans1 += x.first;<br>            q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(b[x.second], x.second));<br>            tmp--;<br>        &#125;<br><br>        <span class="hljs-comment">// ------- 挑战最后一个怪兽</span><br>        <span class="hljs-keyword">if</span> (n &gt;= k) &#123;<br>            ans2 = <span class="hljs-number">0</span>;<br>            q.clear();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= k; ++i) &#123;<br>                ans2 += a[i];<br>                q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(b[i], i));<br>            &#125;<br>            n -= k;<br>            <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-type">Pair</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> q.poll();<br>                ans2 += x.first;<br>                q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(b[x.second], x.second));<br>                n--;<br>            &#125;<br>        &#125;<br>        System.out.println(Math.min(ans1, ans2));<br>        scanner.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br>k, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] * (k + <span class="hljs-number">1</span>)<br>b = [<span class="hljs-number">0</span>] * (k + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>):<br>    a[i], b[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>ans1, ans2 = <span class="hljs-number">0</span>, <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br><br><span class="hljs-comment"># ------- 不挑战最后一个怪兽</span><br>q = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k):<br>    heapq.heappush(q, (a[i], i))<br><br>tmp = n<br><span class="hljs-keyword">while</span> tmp:<br>    x = heapq.heappop(q)<br>    ans1 += x[<span class="hljs-number">0</span>]<br>    heapq.heappush(q, (b[x[<span class="hljs-number">1</span>]], x[<span class="hljs-number">1</span>]))<br>    tmp -= <span class="hljs-number">1</span><br><br><span class="hljs-comment"># ------- 挑战最后一个怪兽</span><br><span class="hljs-keyword">if</span> n &gt;= k:<br>    ans2 = <span class="hljs-number">0</span><br>    q = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>):<br>        ans2 += a[i]<br>        heapq.heappush(q, (b[i], i))<br>    n -= k<br>    <span class="hljs-keyword">while</span> n:<br>        x = heapq.heappop(q)<br>        ans2 += x[<span class="hljs-number">0</span>]<br>        heapq.heappush(q, (b[x[<span class="hljs-number">1</span>]], x[<span class="hljs-number">1</span>]))<br>        n -= <span class="hljs-number">1</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">min</span>(ans1, ans2))<br></code></pre></td></tr></table></figure><h2 id="解题思路2-1"><a href="#解题思路2-1" class="headerlink" title="解题思路2"></a>解题思路2</h2><p>解法2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">import</span> heapq<br><br>a = []<br>b = []<br><br>n,k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  x,y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  a.append(x)<br>  b.append(y)<br><br><br>q = []<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>  heapq.heappush(q,(a[i],i))<br><br><br>t = k<br><br>ans = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">while</span> t &gt; <span class="hljs-number">0</span>:<br>  w,i = heapq.heappop(q)<br><br>  heapq.heappush(q,(b[i],i))<br>  ans += w<br>  t -= <span class="hljs-number">1</span><br><br><br>ans2 = <span class="hljs-number">0</span><br><span class="hljs-keyword">if</span> k &gt;= n:<br>  ans2 += <span class="hljs-built_in">sum</span>(a) + (k-n) * <span class="hljs-built_in">min</span>(b)<br><br><br><span class="hljs-keyword">if</span> k &gt;= n:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-built_in">min</span>(ans,ans2))<br><span class="hljs-keyword">else</span>:<br>  <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2023年蓝桥杯省赛A组试题</title>
    <link href="/2024/04/03/2023%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9BA%E7%BB%84%E8%AF%95%E9%A2%98/"/>
    <url>/2024/04/03/2023%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9BA%E7%BB%84%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>2023年蓝桥杯省赛B组试题</title>
    <link href="/2024/04/01/2023%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9BB%E7%BB%84%E8%AF%95%E9%A2%98/"/>
    <url>/2024/04/01/2023%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9BB%E7%BB%84%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="题目总览"><a href="#题目总览" class="headerlink" title="题目总览"></a>题目总览</h2><ul><li>2023</li><li>硬币兑换</li><li>松散子序列</li><li>管道</li><li>保险箱</li><li>树上选点</li><li>T字消除</li><li>独一无二</li><li>异或和</li><li>混论的数组</li></ul><h2 id="2023-蓝桥云课-lanqiao-cn"><a href="#2023-蓝桥云课-lanqiao-cn" class="headerlink" title="2023 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3496/learning/?page=1&first_category_id=1&tags=2023">2023 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>请求出在 $12345678$ （含）至 $98765432$ （含）中，有多少个数中完全不包含 $2023$。</p><p>完全不包含 $2023$ 是指无论将这个数的哪些数位移除都不能得到 $2023$。例如 $20322175$，$33220022$ 都完全不包含 $2023$，而 $20230415$，$20193213$ 则含有 $2023$（后者取第 $1,2,6,8$ 个数位）。</p><h3 id="答案提交"><a href="#答案提交" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 2971  |  总提交次数: 4174  |  通过率: 71.2%</p><p>难度: 中等   标签: 2023, 模拟, 枚举, 省赛</p><h3 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">ck</span>(<span class="hljs-params">u</span>):<br>    a=[]<br>    <span class="hljs-keyword">while</span> u:<br>        a.append(u%<span class="hljs-number">10</span>)<br>        u//=<span class="hljs-number">10</span><br>    a.reverse()<br>    n=<span class="hljs-built_in">len</span>(a)<br>    cnt1,cnt2,cnt3=<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">if</span> a[i]==<span class="hljs-number">2</span>:<br>            cnt1+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> a[i]==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> cnt1&gt;<span class="hljs-number">0</span>:<br>            cnt2+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> a[i]==<span class="hljs-number">2</span> <span class="hljs-keyword">and</span> cnt2&gt;<span class="hljs-number">0</span>:<br>            cnt3+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> a[i]==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> cnt3&gt;<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>ans=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">12345678</span>,<span class="hljs-number">98765432</span>+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> ck(i):<br>        ans+=<span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>((<span class="hljs-number">98765432</span>-<span class="hljs-number">12345678</span>+<span class="hljs-number">1</span>)-ans)<br></code></pre></td></tr></table></figure><h2 id="硬币兑换-蓝桥云课"><a href="#硬币兑换-蓝桥云课" class="headerlink" title="硬币兑换 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3501/learning/?page=2&first_category_id=1&tags=2023">硬币兑换 - 蓝桥云课</a></h2><h3 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝手中有 $2023$ 种不同面值的硬币，这些硬币全部是新版硬币，其中第 $i(1 \leq i \leq 2023)$ 种硬币的面值为 $i$，数量也为 $i$ 个。硬币兑换机可以进行硬币兑换，兑换规则为：交给硬币兑换机两个新版硬币 $coin_1$ 和 $coin_2$，硬币兑换机会兑换成一个面值为 $coin_1 + coin_2$ 的旧版硬币。</p><p>小蓝可以用自己已有的硬币进行任意次数兑换，假设最终小蓝手中有 $K$ 种不同面值的硬币（只看面值，不看新旧）并且第 $i(1 \leq i \leq K)$ 种硬币的个数为 $sum_i$。小蓝想要使得 $\max{sum_1,sum_2,\dots,sum_K}$ 的值达到最大，请你帮他计算这个值最大是多少。</p><p>注意硬币兑换机只接受新版硬币进行兑换，并且兑换出的硬币全部是旧版硬币。</p><h3 id="答案提交-1"><a href="#答案提交-1" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="参考答案-1"><a href="#参考答案-1" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">a=[<span class="hljs-number">0</span>]*<span class="hljs-number">100000</span><br>ans=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2024</span>):<br>    a[i]=i<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">4501</span>):<br>    res=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,i//<span class="hljs-number">2</span>+<span class="hljs-number">1</span>):<br>        k=i-j<br>        <span class="hljs-keyword">if</span> j!=k:<br>            res+=<span class="hljs-built_in">min</span>(a[j],a[k])<br>        <span class="hljs-keyword">else</span>:<br>            res+=a[j]//<span class="hljs-number">2</span><br>    res+=a[i]<br>    ans=<span class="hljs-built_in">max</span>(res,ans)<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="松散子序列-蓝桥云课"><a href="#松散子序列-蓝桥云课" class="headerlink" title="松散子序列 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3543/learning/?page=1&first_category_id=1&tags=2023&name=%E6%9D%BE%E6%95%A3%E5%AD%90%E5%BA%8F%E5%88%97">松散子序列 - 蓝桥云课</a></h2><h3 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个仅含小写字母的字符串 $s$，假设 $s$ 的一个子序列 $t$ 的第 $i$ 个字符对应了原字符串中的第 $p_i$ 个字符。我们定义 $s$ 的一个松散子序列为：对于 $i &gt; 1$ 总是有 $p_i - p_{i-1} \geq 2$。设一个子序列的价值为其包含的每个字符的价值之和 ($a \sim z$ 分别为 $1 \sim 26$)。</p><p>求 $s$ 的松散子序列中的最大价值。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含一个字符串 $s$。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">azaazaz<br></code></pre></td></tr></table></figure><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">78<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定"><a href="#评测用例规模与约定" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $20$% 的评测用例，$|s| \leq 10$；</p><p>对于 $40$% 的评测用例，$|s| \leq 300$；</p><p>对于 $70$% 的评测用例，$|s| \leq 5000$；</p><p>对于所有评测用例，$1 \leq |s| \leq 10^6$，字符串中仅包含小写字母。</p><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>5s</td><td>512M</td></tr><tr><td>Python3</td><td>12s</td><td>512M</td></tr><tr><td>PyPy3</td><td>12s</td><td>512M</td></tr><tr><td>Go</td><td>12s</td><td>512M</td></tr><tr><td>JavaScript</td><td>12s</td><td>512M</td></tr></tbody></table><p>总通过次数: 1367  |  总提交次数: 1668  |  通过率: 82%</p><p>难度: 困难   标签: 2023, 省赛, 动态规划</p><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><p>根据题目要求，我们需要求出字符串 $s$ 的松散子序列中的最大价值。因此，我们可以使用动态规划的思想来解决这个问题。</p><h4 id="定义状态"><a href="#定义状态" class="headerlink" title="定义状态"></a>定义状态</h4><p>我们可以使用 $f[i][0]$ 表示不选字符串 $s$ 的第 $i$ 个字符时的价值，$f[i][1]$ 表示选字符串 $s$ 的第 $i$ 个字符时的价值。</p><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p>因为要求价值最大，所以我们需要取最大值。</p><h4 id="状态计算"><a href="#状态计算" class="headerlink" title="状态计算"></a>状态计算</h4><p>因为有 $p_i-p_{i-1}\ge2$ 的限制，所以 $f[i][1]&#x3D;max(f[i-2][1], f[i-2][0])+val$，只能从隔了 $1$ 个的开始选。</p><p>$f[i][0]&#x3D;max(f[i-1][1], f[i-1][0])$，因为第 $i$ 个字符没有选，那么我们就用前一个来更新。</p><p>最终的答案即为 $max(f[n-1][1], f[n-1][0])$。</p><h4 id="时间复杂度分析"><a href="#时间复杂度分析" class="headerlink" title="时间复杂度分析"></a>时间复杂度分析</h4><p>该题的时间复杂度为 $O(n)$。</p><h3 id="AC-Code"><a href="#AC-Code" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>+<span class="hljs-number">5</span>;<br><span class="hljs-type">int</span> f[N][<span class="hljs-number">2</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    string s;<br>    cin &gt;&gt; s;<br>    <span class="hljs-type">int</span> n = s.<span class="hljs-built_in">length</span>();<br><br>    unordered_map&lt;<span class="hljs-type">char</span>, <span class="hljs-type">int</span>&gt; values;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++) &#123;<br>        values[<span class="hljs-string">&#x27;a&#x27;</span> + i] = i + <span class="hljs-number">1</span>;<br>    &#125;<br><br>    f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    f[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = values[s[<span class="hljs-number">0</span>]];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>        f[i][<span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(f[i - <span class="hljs-number">2</span>][<span class="hljs-number">1</span>], f[i - <span class="hljs-number">2</span>][<span class="hljs-number">0</span>]) + values[s[i]];<br>        f[i][<span class="hljs-number">0</span>] = <span class="hljs-built_in">max</span>(f[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>], f[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>]);<br>    &#125;<br><br>    cout &lt;&lt; <span class="hljs-built_in">max</span>(f[n - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>], f[n - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>]) &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> N=(<span class="hljs-type">int</span>)<span class="hljs-number">1e6</span>+<span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N + <span class="hljs-number">1</span>][<span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> scanner.next();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br><br>        Map&lt;Character, Integer&gt; values = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++) &#123;<br>            values.put((<span class="hljs-type">char</span>) (<span class="hljs-string">&#x27;a&#x27;</span> + i), i + <span class="hljs-number">1</span>);<br>        &#125;<br><br>        <br>        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        f[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = values.get(s.charAt(<span class="hljs-number">0</span>));<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>          <span class="hljs-keyword">if</span>(i==<span class="hljs-number">1</span>)  f[i][<span class="hljs-number">1</span>] = values.get(s.charAt(i));<br>          <span class="hljs-keyword">if</span>(i&gt;=<span class="hljs-number">2</span>)  f[i][<span class="hljs-number">1</span>] = Math.max(f[i - <span class="hljs-number">2</span>][<span class="hljs-number">1</span>], f[i - <span class="hljs-number">2</span>][<span class="hljs-number">0</span>]) + values.get(s.charAt(i));<br>            f[i][<span class="hljs-number">0</span>] = Math.max(f[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>], f[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>]);<br>        &#125;<br><br>        System.out.println(Math.max(f[n - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>], f[n - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>]));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-built_in">input</span>()<br>n = <span class="hljs-built_in">len</span>(s)<br>f = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <br>values = &#123;<span class="hljs-built_in">chr</span>(i): <span class="hljs-built_in">ord</span>(<span class="hljs-built_in">chr</span>(i)) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>) + <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">97</span>, <span class="hljs-number">97</span>+<span class="hljs-number">26</span>, <span class="hljs-number">1</span>)&#125;<br><br>f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>f[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = values[s[<span class="hljs-number">0</span>]]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-number">1</span>):<br>    f[i][<span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(f[i-<span class="hljs-number">2</span>][<span class="hljs-number">1</span>], f[i-<span class="hljs-number">2</span>][<span class="hljs-number">0</span>]) + values[s[i]]<br>    f[i][<span class="hljs-number">0</span>] = <span class="hljs-built_in">max</span>(f[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>], f[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(f-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>], f[n-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]))<br></code></pre></td></tr></table></figure><h2 id="管道-蓝桥云课"><a href="#管道-蓝桥云课" class="headerlink" title="管道 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3544/learning/?page=1&first_category_id=1&tags=2023&name=%E7%AE%A1%E9%81%93">管道 - 蓝桥云课</a></h2><h3 id="问题描述-3"><a href="#问题描述-3" class="headerlink" title="问题描述"></a>问题描述</h3><p>有一根长度为 $\text{len}$ 的横向的管道，该管道按照单位长度分为 $\text{len}$ 段，每一段的中央有一个可开关的阀门和一个检测水流的传感器。</p><p>一开始管道是空的，位于 $L_i$ 的阀门会在 $S_i$ 时刻打开，并不断让水流入管道。</p><p>对于位于 $L_i$ 的阀门，它流入的水在 $T_i$ ($T_i \geq S_i$) 时刻会使得从第 $L_i - (T_i - S_i)$ 段到第 $L_i + (T_i - S_i)$ 段的传感器检测到水流。</p><p>求管道中每一段中间的传感器都检测到有水流的最早时间。</p><h3 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含两个整数 $n,\text{len}$，用一个空格分隔，分别表示会打开的阀门数和管道长度。</p><p>接下来 $n$ 行每行包含两个整数 $L_i,S_i$，用一个空格分隔，表示位于第 $L_i$ 段管道中央的阀门会在 $S_i$ 时刻打开。</p><h3 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 10 1 1 6 5 10 2<br></code></pre></td></tr></table></figure><h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-1"><a href="#评测用例规模与约定-1" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30$% 的评测用例，$n \leq 200$，$S_i, \text{len} \leq 3000$；</p><p>对于 $70$% 的评测用例，$n \leq 5000$，$S_i, \text{len} \leq 10^5$；</p><p>对于所有评测用例，$1 \leq n \leq 10^5$，$1 \leq S_i,\text{len} \leq 10^9$，$1 \leq L_i \leq \text{len}$，$L_{i-1} &lt; L_i$。</p><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>5s</td><td>512M</td></tr><tr><td>Python3</td><td>12s</td><td>512M</td></tr><tr><td>PyPy3</td><td>12s</td><td>512M</td></tr><tr><td>Go</td><td>12s</td><td>512M</td></tr><tr><td>JavaScript</td><td>12s</td><td>512M</td></tr></tbody></table><p>总通过次数: 1124  |  总提交次数: 1560  |  通过率: 72.1%</p><p>难度: 简单   标签: 2023, 贪心, 省赛, 二分</p><h3 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h3><p>对于一个时间点 $x$，如果此时所有传感器都能检测到水流，那么当时间点大于 $x$ 时也一定保证所有传感器都能检测到水流。题目要求我们找到满足条件的最小时间点，因为答案具有二段性，所以我们可以想到二分答案。</p><p>有了二分的思路后，问题转换为对于一个确定的时间点 $x$，我们如何判断此时所有传感器都能检测到水流？仔细思考，当时间确定后，对于一个位于 $a_i$ 且开启时间为 $S_i(S_i \leq x)$ 的阀门，它的水流实际就是一条覆盖区间 $[a_i-(x-S_i),a_i+(x-S_i)]$ 的线段。</p><p>我们可以将所有 $S_i \leq x$ 的阀门都进行转换，实际上得到的就是若干条线段。判断所有传感器是否都能检测到水流，等价于判断能否用这若干条线段覆盖区间 $[1,\text{len}]$，问题接着转换为区间覆盖问题。</p><p>区间覆盖是一个经典问题。我们可以按区间的左端点来排序这些区间。接下来，我们检查这些区间是否覆盖了整个管道。如果第一个区间的左端点大于 $1$，那么表示管道的开始部分没有被覆盖，直接返回 <code>false</code>。否则我们设一个变量 $r$ 表示可到达的最远距离，$r$ 的初始值为第一个区间的右端点。我们接着检查其他区间是否与 $r$ 相邻或重叠。如果当前区间和 $r$ 相邻或重叠，我们将当前区间的右端点和 $r$ 取最大值。最后如果 $r \geq \text{len}$ 则说明成功覆盖所有区间，否则说明没有。</p><p>回过头来考虑如何书写二分，设 $l$ 为答案的下界，$r$ 为答案的上界，如果二分得到的时间点 $\text{mid}$ 符合条件，因为大于 $\text{mid}$ 的时间点也一定符合条件，所以更新 $r&#x3D;\text{mid}$，否则更新 $l&#x3D;\text{mid+1}$。我们重复这个过程，直到搜索范围的左右端点相等，此时就找到了最早的时间。 当然 $l,r$ 的初始值我们也需要思考，$l$ 显然为 $1$，而 $r$ 我们需要考虑极限情况，即只存在一个最左或最右的阀门在最晚的时间点打开，显然此时需要的时间为 $2 \times 10^9$，所以 $r$ 的初始值为 $2 \times 10^9$。</p><p>时间复杂度：$O(n\log n^2)$。</p><h3 id="AC-Code-1"><a href="#AC-Code-1" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> sz(s) ((int)s.size())</span><br><br><span class="hljs-type">int</span> n, m;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios_base :: <span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>); cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(n)</span>, <span class="hljs-title">s</span><span class="hljs-params">(n)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        cin &gt;&gt; a[i] &gt;&gt; s[i];<br>    &#125;<br>    <span class="hljs-keyword">auto</span> check = [&amp;](LL t) &#123;<br>        std::vector&lt;pair&lt;LL, LL&gt;&gt; v;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">if</span> (t &gt;= s[i]) v.<span class="hljs-built_in">push_back</span>(&#123;a[i] - (t - s[i]), a[i] + (t - s[i])&#125;);<br>        &#125;<br>        <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sz</span>(v) == <span class="hljs-number">0</span> || v[<span class="hljs-number">0</span>].first &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        LL r = v[<span class="hljs-number">0</span>].second;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">sz</span>(v); ++i) &#123;<br>            <span class="hljs-keyword">if</span> (v[i].first &lt;= r + <span class="hljs-number">1</span>) r = <span class="hljs-built_in">max</span>(r, v[i].second);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> r &gt;= m;<br>    &#125;;<br>    LL l = <span class="hljs-number">1</span>, r = <span class="hljs-number">2e9</span>;<br>    <span class="hljs-keyword">while</span> (l &lt; r) &#123;<br>        LL mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) r = mid;<br>        <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    cout &lt;&lt; r &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = sc.nextInt();<br>        m = sc.nextInt();<br>        <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span>[] s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            a[i] = sc.nextInt();<br>            s[i] = sc.nextInt();<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>, r = <span class="hljs-number">2_000_000_000</span>;<br>        <span class="hljs-keyword">while</span> (l &lt; r) &#123;<br>            <span class="hljs-type">long</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> l + r &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (check(mid, a, s)) r = mid;<br>            <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;<br>        &#125;<br>        System.out.println(r);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">long</span> t, <span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span>[] s)</span> &#123;<br>        List&lt;Pair&lt;Long, Long&gt;&gt; v = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">if</span> (t &gt;= s[i]) &#123;<br>                v.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>&lt;&gt;(a[i] - (t - s[i]), a[i] + (t - s[i])));<br>            &#125;<br>        &#125;<br>        v.sort(Comparator.comparingLong(Pair::getKey));<br>        <span class="hljs-keyword">if</span> (v.size() == <span class="hljs-number">0</span> || v.get(<span class="hljs-number">0</span>).getKey() &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> v.get(<span class="hljs-number">0</span>).getValue();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; v.size(); ++i) &#123;<br>            <span class="hljs-keyword">if</span> (v.get(i).getKey() &lt;= r + <span class="hljs-number">1</span>) r = Math.max(r, v.get(i).getValue());<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> r &gt;= m;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pair</span>&lt;K, V&gt; &#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> K key;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> V value;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Pair</span><span class="hljs-params">(K key, V value)</span> &#123;<br>            <span class="hljs-built_in">this</span>.key = key;<br>            <span class="hljs-built_in">this</span>.value = value;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> K <span class="hljs-title function_">getKey</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> key;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> V <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> value;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = []<br>s = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    a_i, s_i = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    a.append(a_i)<br>    s.append(s_i)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">t</span>):<br>    v = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">if</span> t &gt;= s[i]:<br>            v.append((a[i] - (t - s[i]), a[i] + (t - s[i])))<br>    v.sort()<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(v) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> v[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] &gt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    r = v[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(v)):<br>        <span class="hljs-keyword">if</span> v[i][<span class="hljs-number">0</span>] &lt;= r + <span class="hljs-number">1</span>:<br>            r = <span class="hljs-built_in">max</span>(r, v[i][<span class="hljs-number">1</span>])<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> r &gt;= m<br><br>l = <span class="hljs-number">1</span><br>r = <span class="hljs-number">2_000_000_000</span><br><span class="hljs-keyword">while</span> l &lt; r:<br>    mid = (l + r) // <span class="hljs-number">2</span><br>    <span class="hljs-keyword">if</span> check(mid):<br>        r = mid<br>    <span class="hljs-keyword">else</span>:<br>        l = mid + <span class="hljs-number">1</span><br><br><span class="hljs-built_in">print</span>(r)<br></code></pre></td></tr></table></figure><h2 id="保险箱-蓝桥云课"><a href="#保险箱-蓝桥云课" class="headerlink" title="保险箱 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3545/learning/?page=1&first_category_id=1&name=%E4%BF%9D%E9%99%A9%E7%AE%B1">保险箱 - 蓝桥云课</a></h2><h3 id="问题描述-4"><a href="#问题描述-4" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝有一个保险箱，保险箱上共有 $n$ 位数字。</p><p>小蓝可以任意调整保险箱上的每个数字，每一次操作可以将其中一位增加 $1$ 或减少 $1$。</p><p>当某位原本为 $9$ 或 $0$ 时可能会向前（左边）进位&#x2F;退位，当最高位（左边第一位）上的数字变化时向前的进位或退位忽略。</p><p>例如： $00000$ 的第 $5$ 位减 $1$ 变为 $99999$； $99999$ 的第 $5$ 位减 $1$ 变为 $99998$； $00000$ 的第 $4$ 位减 $1$ 变为 $99990$； $97993$ 的第 $4$ 位加 $1$ 变为 $98003$； $99909$ 的第 $3$ 位加 $1$ 变为 $00009$。</p><p>保险箱上一开始有一个数字 $x$，小蓝希望把它变成 $y$，这样才能打开它，问小蓝最少需要操作的次数。</p><h3 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个整数 $n$。</p><p>第二行包含一个 $n$ 位整数 $x$。</p><p>第三行包含一个 $n$ 位整数 $y$。</p><h3 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5 12349 54321<br></code></pre></td></tr></table></figure><h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">11<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-2"><a href="#评测用例规模与约定-2" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30$% 的评测用例，$1 \leq n \leq 300$；</p><p>对于 $60$% 的评测用例，$1 \leq n \leq 3000$；</p><p>对于所有评测用例，$1 \leq n \leq 10^5$，$x,y$ 中仅包含数字 $0$ 至 $9$，可能有前导零。</p><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>5s</td><td>512M</td></tr><tr><td>Python3</td><td>12s</td><td>512M</td></tr><tr><td>PyPy3</td><td>12s</td><td>512M</td></tr><tr><td>Go</td><td>12s</td><td>512M</td></tr><tr><td>JavaScript</td><td>12s</td><td>512M</td></tr></tbody></table><p>总通过次数: 724  |  总提交次数: 1125  |  通过率: 64.4%</p><p>难度: 简单   标签: 2023, 省赛, 动态规划</p><h3 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h3><p>题目问的是将一个 $n$ 位的数字从 $x$ 变成 $y$ 需要进行几次操作，每次操作可以任意选择一位进行 +1 或者 -1，并且除了最高位以外，操作产生的进位和退位会保留。</p><h4 id="暴力思路"><a href="#暴力思路" class="headerlink" title="暴力思路"></a>暴力思路</h4><p>最直接的解法是直接进行模拟，从最后一位数字开始进行比较，判断是加或减哪个能获得最小步骤，同时处理借位或退位的情况。</p><h4 id="动态规划状态设计"><a href="#动态规划状态设计" class="headerlink" title="动态规划状态设计"></a>动态规划状态设计</h4><p>由于这个题目每次对一位进行了加和减的操作之后，会产生进位和退位的后继影响，所以我们可以考虑使用动态规划来解决这个问题。从最低位（从右向左）开始考虑，低位的改变会对高位产生影响，而每一位会存在三种可能性：进位、退位、不退不进。</p><p>因此我们可以使用一个 dp 数组对此进行记录：</p><ol><li>$dp[i][0]$表示第 $i$ 位既没有进位、也没有退位的最小所需操作数。</li><li>$dp[i][1]$表示第 $i$ 位进行了进位的最小所需操作数。</li><li>$dp[i][2]$表示第 $i$ 位进行了退位的最小所需操作数。</li></ol><p>最后对三种可能性取一个最小值，即可得到答案。</p><h4 id="初始化和状态转移"><a href="#初始化和状态转移" class="headerlink" title="初始化和状态转移"></a>初始化和状态转移</h4><p>将 $x$ 上第i位数字变成 $y$ 上第i位数字所需的最小操作数是当前位的操作数加上更低位的操作数，由于存在三种不同的情况，对于每一种情况，分别有以下几种转移：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp">dp[i][<span class="hljs-number">0</span>] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + <span class="hljs-built_in">abs</span>(a[i] - b[i]), dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>] + <span class="hljs-built_in">abs</span>((a[i] + <span class="hljs-number">1</span>) - b[i]) ,  dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>] + <span class="hljs-built_in">abs</span>((a[i] - <span class="hljs-number">1</span>) - b[i]));<br><br>dp[i][<span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + (<span class="hljs-number">10</span> - a[i] + b[i]), dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>] +  <span class="hljs-number">10</span> - (a[i] + <span class="hljs-number">1</span>) + b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + <span class="hljs-number">10</span> - (a[i] - <span class="hljs-number">1</span>)+ b[i]);<br><br>dp[i][<span class="hljs-number">2</span>] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + a[i] + <span class="hljs-number">10</span> - b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + (a[i] + <span class="hljs-number">1</span>)+ <span class="hljs-number">10</span> - b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + (a[i]<span class="hljs-number">-1</span>) + <span class="hljs-number">10</span> - b[i]);<br></code></pre></td></tr></table></figure><p>这三种情况分别对应了当前位置不进不退、进行了进位、进行了退位和上一位不进不退、进行了进位、进行了退位的组合结果，一共有 $3\times3$ 种情况。</p><h4 id="最终答案"><a href="#最终答案" class="headerlink" title="最终答案"></a>最终答案</h4><p>最后的答案是第 $n$ 位上的三种情况的最小值，也就是对 $dp[n][0]$, $dp[n][1]$ 和 $dp[n][2]$ 取最小值：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">ans = <span class="hljs-built_in">min</span>(dp[n][<span class="hljs-number">0</span>], dp[n][<span class="hljs-number">1</span>], dp[n][<span class="hljs-number">2</span>])<br></code></pre></td></tr></table></figure><p>时间复杂度为 $O(n)$。</p><h3 id="AC-Code-2"><a href="#AC-Code-2" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">1000000000</span>;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1000010</span>][<span class="hljs-number">3</span>];<br><span class="hljs-type">int</span> n, a[<span class="hljs-number">1000010</span>], b[<span class="hljs-number">1000010</span>];<br>string x, y;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; n &gt;&gt; x &gt;&gt; y;<br>    <span class="hljs-built_in">reverse</span>(x.<span class="hljs-built_in">begin</span>(), x.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">reverse</span>(y.<span class="hljs-built_in">begin</span>(), y.<span class="hljs-built_in">end</span>());<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        a[i] = x[i] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        b[i] = y[i] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (!i) &#123;<br>            dp[i][<span class="hljs-number">0</span>] = <span class="hljs-built_in">abs</span>(a[i] - b[i]);<br>            dp[i][<span class="hljs-number">1</span>] = <span class="hljs-number">10</span> - a[i] + b[i];<br>            dp[i][<span class="hljs-number">2</span>] = a[i] + <span class="hljs-number">10</span> - b[i];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            dp[i][<span class="hljs-number">0</span>] = <span class="hljs-built_in">min</span>(&#123;dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + <span class="hljs-built_in">abs</span>(a[i] - b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + <span class="hljs-built_in">abs</span>(a[i] + <span class="hljs-number">1</span> - b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + <span class="hljs-built_in">abs</span>(a[i] - <span class="hljs-number">1</span> - b[i])&#125;);<br>            dp[i][<span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(&#123;dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + (<span class="hljs-number">10</span> - a[i] + b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + <span class="hljs-number">10</span> - (a[i] + <span class="hljs-number">1</span>) + b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + <span class="hljs-number">10</span> - (a[i] - <span class="hljs-number">1</span>) + b[i]&#125;);<br>            dp[i][<span class="hljs-number">2</span>] = <span class="hljs-built_in">min</span>(&#123;dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + a[i] + <span class="hljs-number">10</span> - b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + (a[i] + <span class="hljs-number">1</span>) + <span class="hljs-number">10</span> - b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + (a[i] - <span class="hljs-number">1</span>) + <span class="hljs-number">10</span> - b[i]&#125;);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-type">int</span> ans = dp[n<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>];<br>    ans = <span class="hljs-built_in">min</span>(ans, dp[n - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);<br>    ans = <span class="hljs-built_in">min</span>(ans, dp[n - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>]);<br>    cout &lt;&lt; ans &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INF</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000000000</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>        scanner.nextLine(); <span class="hljs-comment">// Consume newline</span><br>        <br>        <span class="hljs-type">String</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(scanner.nextLine()).reverse().toString();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(scanner.nextLine()).reverse().toString();<br>        <br>        <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            a[i] = x.charAt(i) - <span class="hljs-string">&#x27;0&#x27;</span>;<br>            b[i] = y.charAt(i) - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        &#125;<br>        <br>        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1000010</span>][<span class="hljs-number">3</span>];<br>        <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) &#123;<br>                dp[i][<span class="hljs-number">0</span>] = Math.abs(a[i] - b[i]);<br>                dp[i][<span class="hljs-number">1</span>] = <span class="hljs-number">10</span> - a[i] + b[i];<br>                dp[i][<span class="hljs-number">2</span>] = a[i] + <span class="hljs-number">10</span> - b[i];<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[i][<span class="hljs-number">0</span>] = Math.min(<br>                    Math.min(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + Math.abs(a[i] - b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + Math.abs(a[i] + <span class="hljs-number">1</span> - b[i])),<br>                    dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + Math.abs(a[i] - <span class="hljs-number">1</span> - b[i])<br>                );<br>                <br>                dp[i][<span class="hljs-number">1</span>] = Math.min(<br>                    Math.min(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + (<span class="hljs-number">10</span> - a[i] + b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + <span class="hljs-number">10</span> - (a[i] + <span class="hljs-number">1</span>) + b[i]),<br>                    dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + <span class="hljs-number">10</span> - (a[i] - <span class="hljs-number">1</span>) + b[i]<br>                );<br>                <br>                dp[i][<span class="hljs-number">2</span>] = Math.min(<br>                    Math.min(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + a[i] + <span class="hljs-number">10</span> - b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + (a[i] + <span class="hljs-number">1</span>) + <span class="hljs-number">10</span> - b[i]),<br>                    dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + (a[i] - <span class="hljs-number">1</span>) + <span class="hljs-number">10</span> - b[i]<br>                );<br>            &#125;<br>        &#125;<br>        <br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> Math.min(Math.min(dp[n - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>], dp[n - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>]), dp[n - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>]);<br>        System.out.println(ans);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">INF = <span class="hljs-number">1000000000</span><br>dp = [[INF <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000010</span>)]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>x = <span class="hljs-built_in">input</span>()[::-<span class="hljs-number">1</span>]<br>y = <span class="hljs-built_in">input</span>()[::-<span class="hljs-number">1</span>]<br><br>a = [<span class="hljs-number">0</span>] * n<br>b = [<span class="hljs-number">0</span>] * n<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    a[i] = <span class="hljs-built_in">int</span>(x[i])<br>    b[i] = <span class="hljs-built_in">int</span>(y[i])<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span>:<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-built_in">abs</span>(a[i] - b[i])<br>        dp[i][<span class="hljs-number">1</span>] = <span class="hljs-number">10</span> - a[i] + b[i]<br>        dp[i][<span class="hljs-number">2</span>] = a[i] + <span class="hljs-number">10</span> - b[i]<br>    <span class="hljs-keyword">else</span>:<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + <span class="hljs-built_in">abs</span>(a[i] - b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + <span class="hljs-built_in">abs</span>(a[i] + <span class="hljs-number">1</span> - b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + <span class="hljs-built_in">abs</span>(a[i] - <span class="hljs-number">1</span> - b[i]))<br>        dp[i][<span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + (<span class="hljs-number">10</span> - a[i] + b[i]), dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + <span class="hljs-number">10</span> - (a[i] + <span class="hljs-number">1</span>) + b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + <span class="hljs-number">10</span> - (a[i] - <span class="hljs-number">1</span>) + b[i])<br>        dp[i][<span class="hljs-number">2</span>] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + a[i] + <span class="hljs-number">10</span> - b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + (a[i] + <span class="hljs-number">1</span>) + <span class="hljs-number">10</span> - b[i], dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + (a[i] - <span class="hljs-number">1</span>) + <span class="hljs-number">10</span> - b[i])<br><br>ans = <span class="hljs-built_in">min</span>(dp[n-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], dp[n-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>], dp[n-<span class="hljs-number">1</span>][<span class="hljs-number">2</span>])<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="树上选点-蓝桥云课"><a href="#树上选点-蓝桥云课" class="headerlink" title="树上选点 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3546/learning/?page=1&first_category_id=1&name=%E6%A0%91%E4%B8%8A%E9%80%89%E7%82%B9">树上选点 - 蓝桥云课</a></h2><h3 id="问题描述-5"><a href="#问题描述-5" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一棵树，树根为 $1$，每个点的点权为 $V_i$。 你需要找出若干个点 $P_i$，使得：</p><ol><li>每两个点 $P_x$、$P_y$ 互不相邻；</li><li>每两个点 $P_x$、$P_y$ 与树根的距离互不相同；</li><li>找出的点的点权之和尽可能大。</li></ol><p>请输出找到的这些点的点权和的最大值。</p><h3 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个整数 $n$。</p><p>第二行包含 $n-1$ 个整数 $F_i$，相邻整数之间使用一个空格分隔，分别表示第 $2$ 至 $n$ 个结点的父结点编号。</p><p>第三行包含 $n$ 个整数 $V_i$，相邻整数之间使用一个空格分隔，分别表示每个结点的点权。</p><h3 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-3"><a href="#样例输入-3" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5 1 2 3 2 2 1 9 3 5<br></code></pre></td></tr></table></figure><h3 id="样例输出-3"><a href="#样例输出-3" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">11<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-3"><a href="#评测用例规模与约定-3" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40$% 的评测用例，$n \leq 5000$；</p><p>对于所有评测用例，$1 \leq n \leq 2 \times 10^5$，$1 \leq F_i &lt; i$，$1 \leq V_i \leq 10^4$。</p><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>5s</td><td>512M</td></tr><tr><td>Python3</td><td>20s</td><td>512M</td></tr><tr><td>PyPy3</td><td>20s</td><td>512M</td></tr><tr><td>Go</td><td>20s</td><td>512M</td></tr><tr><td>JavaScript</td><td>20s</td><td>512M</td></tr></tbody></table><p>总通过次数: 210  |  总提交次数: 457  |  通过率: 46%</p><p>难度: 简单   标签: 2023, 省赛, 动态规划</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h3><p>这个问题可以使用动态规划的策略进行解决。首先，我们要解析并存储树的结构，然后从叶子节点开始，通过动态规划的方法，逐步向上更新每个节点被选中和不被选中时能得到的最大权值和。</p><p><strong>状态定义</strong></p><p>我们定义两种状态，$f[u][1]$ 和 $f[u][0]$。$f[u][1]$ 表示选择节点 $u$ 的最大权值，$f[u][0]$ 表示不选择节点 $u$ 的最大权值。</p><p><strong>状态转移</strong></p><p>对于每一个节点 $u$，我们有以下状态转移方程：</p><ul><li>不选择当前节点 $u$：$f[u][0] &#x3D; max(f[u][0], f[v][1])$，其中 $v$ 是 $u$ 的下一层节点，表示我们可以选择下一层的任何一个节点；</li><li>选择当前节点 $u$：$f[u][1] &#x3D; max(f[u][1], a[u] + f[v][0])$，表示我们选择当前节点 $u$，并且我们不能选择其子节点 $v$，但是我们可以选择 $v$ 的子节点。</li></ul><p><strong>具体实现</strong></p><p>首先，我们读取输入数据，存储树的结构，并初始化状态矩阵。然后，我们从叶子节点开始，逐步向上更新每一个节点的状态。对于每一层的节点，我们先更新不选择该节点的方案，然后再更新选择该节点的方案。为了减少时间复杂度，我们使用了 <code>multiset</code> 来存储每一层能够转移的所有状态，可以直接找到最大值。</p><p><strong>时间复杂度分析</strong></p><p>每个节点我们都进行了一次状态更新操作，所以时间复杂度为 $O(n)$。在更新状态时，我们使用了 <code>multiset</code> 进行最大值查询，时间复杂度为 $O(\log n)$，所以总的时间复杂度为 $O(n \log n)$。</p><h3 id="AC-Code-3"><a href="#AC-Code-3" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//c++</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">200010</span>;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; g[N], depth[N];     <span class="hljs-comment">// g[]用来存每个结点的儿子 , depth[] 用来存每一深度的结点</span><br><span class="hljs-type">int</span> d[N], a[N], f[N][<span class="hljs-number">2</span>], fa[N]; <span class="hljs-comment">// d[]记录每个结点的深度,a[]是每个结点的值,f[][]第一维表示结点、第二维表示是否选择该节点</span><br><span class="hljs-built_in">multiset</span>&lt;<span class="hljs-type">int</span>&gt; s[N];             <span class="hljs-comment">// 存每一层能够转移的所有状态</span><br><span class="hljs-type">signed</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;n);<br>    d[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;          <span class="hljs-comment">// 1是根，所以深度为1</span><br>    <span class="hljs-type">int</span> max_depth = <span class="hljs-number">0</span>; <span class="hljs-comment">// 记录最大深度</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;fa[i]);<br>        g[fa[i]].push_back(i);            <span class="hljs-comment">// 存结点的儿子</span><br>        d[i] = d[fa[i]] + <span class="hljs-number">1</span>;              <span class="hljs-comment">// 子节点深度等于父节点深度+1</span><br>        max_depth = max(max_depth, d[i]); <span class="hljs-comment">// 更新最大深度</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;a[i]);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        depth[d[i]].push_back(i); <span class="hljs-comment">// 记录每一层的结点</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = max_depth; j &gt;= <span class="hljs-number">1</span>; j--) <span class="hljs-comment">// 从叶子结点开始更新结点最大值</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> u : depth[j]) <span class="hljs-comment">// 本层结点大小更新</span><br>        &#123;<br>            <span class="hljs-comment">// 先来更新不选择该结点的方案</span><br>            <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size())                               <span class="hljs-comment">// 如果下一层存在能转移过来的状态</span><br>                f[u][<span class="hljs-number">0</span>] = max(f[u][<span class="hljs-number">0</span>], *prev(s[j + <span class="hljs-number">1</span>].end())); <span class="hljs-comment">// 当前节点如果不选肯定选的是前一层的最大值(选或者不选都行)</span><br><br>            <span class="hljs-comment">// 再来更新选择该节点的方案</span><br>            f[u][<span class="hljs-number">1</span>] = a[u];     <span class="hljs-comment">// 如果选择该结点,则该结点的最小值是结点本身的值</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> v : g[u]) <span class="hljs-comment">// 选择能够转移到现在这个状态的状态</span><br>            &#123;<br>                s[j + <span class="hljs-number">1</span>].erase(s[j + <span class="hljs-number">1</span>].find(f[v][<span class="hljs-number">1</span>])); <span class="hljs-comment">// 因为不能选择相邻结点,把选取了它的儿子的方案除去,不能从这些最大值中更新</span><br>            &#125;<br>            <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size()) <span class="hljs-comment">// 如果下一层存在能转移过来的状态</span><br>            &#123;<br>                <span class="hljs-type">int</span> mx = *prev(s[j + <span class="hljs-number">1</span>].end());    <span class="hljs-comment">// 能够转移至这个状态的最大值</span><br>                f[u][<span class="hljs-number">1</span>] = max(f[u][<span class="hljs-number">1</span>], a[u] + mx); <span class="hljs-comment">// 如果选这个节点,那么要从他非儿子中选一个最大的(不选或选)或者从他儿子中选一个不选的最大的</span><br>            &#125;<br><br>            <span class="hljs-comment">// 为下一次状态更新做准备</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> v : g[u])<br>            &#123;<br>                s[j + <span class="hljs-number">1</span>].insert(f[v][<span class="hljs-number">1</span>]); <span class="hljs-comment">// 刚刚为了更新选择该结点状态时删去了选它的儿子状态,现在再加回来,因为本层其他节点可能更新需要</span><br>            &#125;<br>            s[j].insert(f[u][<span class="hljs-number">1</span>]);<br>            s[j].insert(f[u][<span class="hljs-number">0</span>]); <span class="hljs-comment">// 当前节点或者不选都可以作为它们上一层节点的更新值</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, max(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>])); <span class="hljs-comment">// 在选和不选1结点中的方案中的最大值就是答案</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">200010</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Integer&gt;[] g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N], depth = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], fa = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N][<span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> TreeMap&lt;Integer, Integer&gt;[] s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>[N];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>        d[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max_depth</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            g[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            depth[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>            fa[i] = scanner.nextInt();<br>            g[fa[i]].add(i);<br>            d[i] = d[fa[i]] + <span class="hljs-number">1</span>;<br>            max_depth = Math.max(max_depth, d[i]);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            a[i] = scanner.nextInt();<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            depth[d[i]].add(i);<br>        &#125;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= max_depth + <span class="hljs-number">1</span>; i++)&#123;<br>            s[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> max_depth; j &gt;= <span class="hljs-number">1</span>; j--) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> u : depth[j]) &#123;<br>                <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size() &gt; <span class="hljs-number">0</span>) &#123;<br>                    f[u][<span class="hljs-number">0</span>] = Math.max(f[u][<span class="hljs-number">0</span>], s[j + <span class="hljs-number">1</span>].lastKey());<br>                &#125;<br>                f[u][<span class="hljs-number">1</span>] = a[u];<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : g[u]) &#123;<br>                    remove(s[j + <span class="hljs-number">1</span>], f[v][<span class="hljs-number">1</span>]);<br>                &#125;<br>                <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size() &gt; <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">mx</span> <span class="hljs-operator">=</span> s[j + <span class="hljs-number">1</span>].lastKey();<br>                    f[u][<span class="hljs-number">1</span>] = Math.max(f[u][<span class="hljs-number">1</span>], a[u] + mx);<br>                &#125;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : g[u]) &#123;<br>                    add(s[j + <span class="hljs-number">1</span>], f[v][<span class="hljs-number">1</span>]);<br>                &#125;<br>                add(s[j], f[u][<span class="hljs-number">1</span>]);<br>                add(s[j], f[u][<span class="hljs-number">0</span>]);<br>            &#125;<br>        &#125;<br><br>        System.out.println(Math.max(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]));<br>        scanner.close();<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(TreeMap&lt;Integer, Integer&gt; map, <span class="hljs-type">int</span> x)</span> &#123;<br>        map.put(x, map.getOrDefault(x, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(TreeMap&lt;Integer, Integer&gt; map, <span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span> (map.containsKey(x)) &#123;<br>            <span class="hljs-keyword">if</span> (map.get(x) == <span class="hljs-number">1</span>) &#123;<br>                map.remove(x);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                map.put(x, map.get(x) - <span class="hljs-number">1</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br>N = <span class="hljs-number">200010</span><br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>depth = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>d = [<span class="hljs-number">0</span>] * N<br>a = [<span class="hljs-number">0</span>] * N<br>fa = [<span class="hljs-number">0</span>] * N<br>f = [[<span class="hljs-number">0</span>] * <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>s = [Counter() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>d[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>max_depth = <span class="hljs-number">0</span><br>arrt = [<span class="hljs-built_in">int</span>(n) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;&quot;</span>).split()]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    fa[i] = arrt[i - <span class="hljs-number">2</span>]<span class="hljs-comment">#int(input())</span><br>    g[fa[i]].append(i)<br>    d[i] = d[fa[i]] + <span class="hljs-number">1</span><br>    max_depth = <span class="hljs-built_in">max</span>(max_depth, d[i])<br><br>arrt = [<span class="hljs-built_in">int</span>(n) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;&quot;</span>).split()]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    a[i] = arrt[i - <span class="hljs-number">1</span>] <span class="hljs-comment">#int(input())</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    depth[d[i]].append(i)<br><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_depth, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> depth[j]:<br>        <span class="hljs-keyword">if</span> s[j + <span class="hljs-number">1</span>]:<br>            f[u][<span class="hljs-number">0</span>] = <span class="hljs-built_in">max</span>(f[u][<span class="hljs-number">0</span>], <span class="hljs-built_in">max</span>(s[j + <span class="hljs-number">1</span>].keys()))<br><br>        f[u][<span class="hljs-number">1</span>] = a[u]<br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> g[u]:<br>            s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]] == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">del</span> s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]]<br><br>        <span class="hljs-keyword">if</span> s[j + <span class="hljs-number">1</span>]:<br>            mx = <span class="hljs-built_in">max</span>(s[j + <span class="hljs-number">1</span>].keys())<br>            f[u][<span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(f[u][<span class="hljs-number">1</span>], a[u] + mx)<br><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> g[u]:<br>            s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]] += <span class="hljs-number">1</span><br><br>        s[j][f[u][<span class="hljs-number">1</span>]] += <span class="hljs-number">1</span><br>        s[j][f[u][<span class="hljs-number">0</span>]] += <span class="hljs-number">1</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><h2 id="T字消除-蓝桥云课"><a href="#T字消除-蓝桥云课" class="headerlink" title="T字消除 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3547/learning/?page=1&first_category_id=1&tags=2023&name=T">T字消除 - 蓝桥云课</a></h2><h3 id="问题描述-6"><a href="#问题描述-6" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝正在玩一款游戏，游戏中有一个 $n \times n$ 大小的 $01$ 矩阵 $A_{i,j}$。 小蓝每次需要选择一个 $T$ 字型的区域，且这个区域内至少要有一个 $1$。选中后，这个区域内所有的元素都会变成 $0$。 给定游戏目前的矩阵，小蓝想知道他最多可以进行多少次上述操作。 $T$ 字型区域是指形如 $(x-1,y)\to(x,y)\to(x+1,y)\to(x,y+1)$ 的四个点所形成的区域。其旋转 $90^\circ,180^\circ,270^\circ$ 的形式同样也视作 $T$ 字形区域。</p><h3 id="输入格式-4"><a href="#输入格式-4" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入包含多组数据。</p><p>输入的第一行包含一个整数 $D$ 表示数据组数。</p><p>对于每组数据，第一行包含一个整数 $n$。</p><p>接下来 $n$ 行每行包含 $n$ 个 $0$ 或 $1$，表示矩阵 $A_{i,j}$ 的每个位置的值。</p><h3 id="输出格式-4"><a href="#输出格式-4" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出 $D$ 行，每行包含一个整数表示小蓝最多可以对当前询问中的矩阵操作的次数。</p><h3 id="样例输入-4"><a href="#样例输入-4" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">1 3 001 011 111<br></code></pre></td></tr></table></figure><h3 id="样例输出-4"><a href="#样例输出-4" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5<br></code></pre></td></tr></table></figure><h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><p>我们用 $X$ 表示某次操作选中的 $T$ 字形，以下给出一种可行方案：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">001 XXX 0X0 00X 0X0 X00 011 =&gt; 0X1 =&gt; XXX =&gt; 0XX =&gt; XX0 =&gt; XX0 111 111 111 11X 1X0 X00<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-4"><a href="#评测用例规模与约定-4" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $10$% 的评测用例，$n &#x3D; 3$；</p><p>对于 $40$% 的评测用例，$n \leq 30$；</p><p>对于所有评测用例，$3 \leq n \leq 2000$，矩阵中仅含 $0$ 和 $1$。</p><h3 id="运行限制-6"><a href="#运行限制-6" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>5s</td><td>512M</td></tr><tr><td>Python3</td><td>999s</td><td>512M</td></tr><tr><td>PyPy3</td><td>999s</td><td>512M</td></tr><tr><td>Go</td><td>999s</td><td>512M</td></tr><tr><td>JavaScript</td><td>999s</td><td>512M</td></tr></tbody></table><p>总通过次数: 44  |  总提交次数: 199  |  通过率: 22.1%</p><p>难度: 简单   标签: 2023, 模拟, 省赛</p><h3 id="解题思路-4"><a href="#解题思路-4" class="headerlink" title="解题思路"></a>解题思路</h3><p>这个问题可以使用动态规划的策略进行解决。首先，我们要解析并存储树的结构，然后从叶子节点开始，通过动态规划的方法，逐步向上更新每个节点被选中和不被选中时能得到的最大权值和。</p><p><strong>状态定义</strong></p><p>我们定义两种状态，$f[u][1]$ 和 $f[u][0]$。$f[u][1]$ 表示选择节点 $u$ 的最大权值，$f[u][0]$ 表示不选择节点 $u$ 的最大权值。</p><p><strong>状态转移</strong></p><p>对于每一个节点 $u$，我们有以下状态转移方程：</p><ul><li>不选择当前节点 $u$：$f[u][0] &#x3D; max(f[u][0], f[v][1])$，其中 $v$ 是 $u$ 的下一层节点，表示我们可以选择下一层的任何一个节点；</li><li>选择当前节点 $u$：$f[u][1] &#x3D; max(f[u][1], a[u] + f[v][0])$，表示我们选择当前节点 $u$，并且我们不能选择其子节点 $v$，但是我们可以选择 $v$ 的子节点。</li></ul><p><strong>具体实现</strong></p><p>首先，我们读取输入数据，存储树的结构，并初始化状态矩阵。然后，我们从叶子节点开始，逐步向上更新每一个节点的状态。对于每一层的节点，我们先更新不选择该节点的方案，然后再更新选择该节点的方案。为了减少时间复杂度，我们使用了 <code>multiset</code> 来存储每一层能够转移的所有状态，可以直接找到最大值。</p><p><strong>时间复杂度分析</strong></p><p>每个节点我们都进行了一次状态更新操作，所以时间复杂度为 $O(n)$。在更新状态时，我们使用了 <code>multiset</code> 进行最大值查询，时间复杂度为 $O(\log n)$，所以总的时间复杂度为 $O(n \log n)$。</p><h3 id="AC-Code-4"><a href="#AC-Code-4" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//c++</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">200010</span>;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; g[N], depth[N];     <span class="hljs-comment">// g[]用来存每个结点的儿子 , depth[] 用来存每一深度的结点</span><br><span class="hljs-type">int</span> d[N], a[N], f[N][<span class="hljs-number">2</span>], fa[N]; <span class="hljs-comment">// d[]记录每个结点的深度,a[]是每个结点的值,f[][]第一维表示结点、第二维表示是否选择该节点</span><br><span class="hljs-built_in">multiset</span>&lt;<span class="hljs-type">int</span>&gt; s[N];             <span class="hljs-comment">// 存每一层能够转移的所有状态</span><br><span class="hljs-type">signed</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;n);<br>    d[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;          <span class="hljs-comment">// 1是根，所以深度为1</span><br>    <span class="hljs-type">int</span> max_depth = <span class="hljs-number">0</span>; <span class="hljs-comment">// 记录最大深度</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;fa[i]);<br>        g[fa[i]].push_back(i);            <span class="hljs-comment">// 存结点的儿子</span><br>        d[i] = d[fa[i]] + <span class="hljs-number">1</span>;              <span class="hljs-comment">// 子节点深度等于父节点深度+1</span><br>        max_depth = max(max_depth, d[i]); <span class="hljs-comment">// 更新最大深度</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;a[i]);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        depth[d[i]].push_back(i); <span class="hljs-comment">// 记录每一层的结点</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = max_depth; j &gt;= <span class="hljs-number">1</span>; j--) <span class="hljs-comment">// 从叶子结点开始更新结点最大值</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> u : depth[j]) <span class="hljs-comment">// 本层结点大小更新</span><br>        &#123;<br>            <span class="hljs-comment">// 先来更新不选择该结点的方案</span><br>            <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size())                               <span class="hljs-comment">// 如果下一层存在能转移过来的状态</span><br>                f[u][<span class="hljs-number">0</span>] = max(f[u][<span class="hljs-number">0</span>], *prev(s[j + <span class="hljs-number">1</span>].end())); <span class="hljs-comment">// 当前节点如果不选肯定选的是前一层的最大值(选或者不选都行)</span><br><br>            <span class="hljs-comment">// 再来更新选择该节点的方案</span><br>            f[u][<span class="hljs-number">1</span>] = a[u];     <span class="hljs-comment">// 如果选择该结点,则该结点的最小值是结点本身的值</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> v : g[u]) <span class="hljs-comment">// 选择能够转移到现在这个状态的状态</span><br>            &#123;<br>                s[j + <span class="hljs-number">1</span>].erase(s[j + <span class="hljs-number">1</span>].find(f[v][<span class="hljs-number">1</span>])); <span class="hljs-comment">// 因为不能选择相邻结点,把选取了它的儿子的方案除去,不能从这些最大值中更新</span><br>            &#125;<br>            <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size()) <span class="hljs-comment">// 如果下一层存在能转移过来的状态</span><br>            &#123;<br>                <span class="hljs-type">int</span> mx = *prev(s[j + <span class="hljs-number">1</span>].end());    <span class="hljs-comment">// 能够转移至这个状态的最大值</span><br>                f[u][<span class="hljs-number">1</span>] = max(f[u][<span class="hljs-number">1</span>], a[u] + mx); <span class="hljs-comment">// 如果选这个节点,那么要从他非儿子中选一个最大的(不选或选)或者从他儿子中选一个不选的最大的</span><br>            &#125;<br><br>            <span class="hljs-comment">// 为下一次状态更新做准备</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> v : g[u])<br>            &#123;<br>                s[j + <span class="hljs-number">1</span>].insert(f[v][<span class="hljs-number">1</span>]); <span class="hljs-comment">// 刚刚为了更新选择该结点状态时删去了选它的儿子状态,现在再加回来,因为本层其他节点可能更新需要</span><br>            &#125;<br>            s[j].insert(f[u][<span class="hljs-number">1</span>]);<br>            s[j].insert(f[u][<span class="hljs-number">0</span>]); <span class="hljs-comment">// 当前节点或者不选都可以作为它们上一层节点的更新值</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, max(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>])); <span class="hljs-comment">// 在选和不选1结点中的方案中的最大值就是答案</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">200010</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Integer&gt;[] g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N], depth = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], fa = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N][<span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> TreeMap&lt;Integer, Integer&gt;[] s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>[N];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>        d[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max_depth</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            g[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            depth[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>            fa[i] = scanner.nextInt();<br>            g[fa[i]].add(i);<br>            d[i] = d[fa[i]] + <span class="hljs-number">1</span>;<br>            max_depth = Math.max(max_depth, d[i]);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            a[i] = scanner.nextInt();<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            depth[d[i]].add(i);<br>        &#125;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= max_depth + <span class="hljs-number">1</span>; i++)&#123;<br>            s[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> max_depth; j &gt;= <span class="hljs-number">1</span>; j--) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> u : depth[j]) &#123;<br>                <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size() &gt; <span class="hljs-number">0</span>) &#123;<br>                    f[u][<span class="hljs-number">0</span>] = Math.max(f[u][<span class="hljs-number">0</span>], s[j + <span class="hljs-number">1</span>].lastKey());<br>                &#125;<br>                f[u][<span class="hljs-number">1</span>] = a[u];<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : g[u]) &#123;<br>                    remove(s[j + <span class="hljs-number">1</span>], f[v][<span class="hljs-number">1</span>]);<br>                &#125;<br>                <span class="hljs-keyword">if</span> (s[j + <span class="hljs-number">1</span>].size() &gt; <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">mx</span> <span class="hljs-operator">=</span> s[j + <span class="hljs-number">1</span>].lastKey();<br>                    f[u][<span class="hljs-number">1</span>] = Math.max(f[u][<span class="hljs-number">1</span>], a[u] + mx);<br>                &#125;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : g[u]) &#123;<br>                    add(s[j + <span class="hljs-number">1</span>], f[v][<span class="hljs-number">1</span>]);<br>                &#125;<br>                add(s[j], f[u][<span class="hljs-number">1</span>]);<br>                add(s[j], f[u][<span class="hljs-number">0</span>]);<br>            &#125;<br>        &#125;<br><br>        System.out.println(Math.max(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]));<br>        scanner.close();<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(TreeMap&lt;Integer, Integer&gt; map, <span class="hljs-type">int</span> x)</span> &#123;<br>        map.put(x, map.getOrDefault(x, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(TreeMap&lt;Integer, Integer&gt; map, <span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span> (map.containsKey(x)) &#123;<br>            <span class="hljs-keyword">if</span> (map.get(x) == <span class="hljs-number">1</span>) &#123;<br>                map.remove(x);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                map.put(x, map.get(x) - <span class="hljs-number">1</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br>N = <span class="hljs-number">200010</span><br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>depth = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>d = [<span class="hljs-number">0</span>] * N<br>a = [<span class="hljs-number">0</span>] * N<br>fa = [<span class="hljs-number">0</span>] * N<br>f = [[<span class="hljs-number">0</span>] * <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>s = [Counter() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>d[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>max_depth = <span class="hljs-number">0</span><br>arrt = [<span class="hljs-built_in">int</span>(n) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;&quot;</span>).split()]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    fa[i] = arrt[i - <span class="hljs-number">2</span>]<span class="hljs-comment">#int(input())</span><br>    g[fa[i]].append(i)<br>    d[i] = d[fa[i]] + <span class="hljs-number">1</span><br>    max_depth = <span class="hljs-built_in">max</span>(max_depth, d[i])<br><br>arrt = [<span class="hljs-built_in">int</span>(n) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;&quot;</span>).split()]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    a[i] = arrt[i - <span class="hljs-number">1</span>] <span class="hljs-comment">#int(input())</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    depth[d[i]].append(i)<br><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_depth, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> depth[j]:<br>        <span class="hljs-keyword">if</span> s[j + <span class="hljs-number">1</span>]:<br>            f[u][<span class="hljs-number">0</span>] = <span class="hljs-built_in">max</span>(f[u][<span class="hljs-number">0</span>], <span class="hljs-built_in">max</span>(s[j + <span class="hljs-number">1</span>].keys()))<br><br>        f[u][<span class="hljs-number">1</span>] = a[u]<br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> g[u]:<br>            s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]] == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">del</span> s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]]<br><br>        <span class="hljs-keyword">if</span> s[j + <span class="hljs-number">1</span>]:<br>            mx = <span class="hljs-built_in">max</span>(s[j + <span class="hljs-number">1</span>].keys())<br>            f[u][<span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(f[u][<span class="hljs-number">1</span>], a[u] + mx)<br><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> g[u]:<br>            s[j + <span class="hljs-number">1</span>][f[v][<span class="hljs-number">1</span>]] += <span class="hljs-number">1</span><br><br>        s[j][f[u][<span class="hljs-number">1</span>]] += <span class="hljs-number">1</span><br>        s[j][f[u][<span class="hljs-number">0</span>]] += <span class="hljs-number">1</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><h2 id="异或和-蓝桥云课"><a href="#异或和-蓝桥云课" class="headerlink" title="异或和 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3549/learning/?page=1&first_category_id=1&tags=2023&name=%E5%BC%82%E6%88%96%E5%92%8C">异或和 - 蓝桥云课</a></h2><h3 id="问题描述-7"><a href="#问题描述-7" class="headerlink" title="问题描述"></a>问题描述</h3><p>给一棵含有 $n$ 个结点的有根树，根结点为 $1$，编号为 $i$ 的点有点权 $a_i$（$i \in [1,n]$）。现在有两种操作，格式如下：</p><ul><li>$1\ x\ y$：该操作表示将点 $x$ 的点权改为 $y$。</li><li>$2\ x$：该操作表示查询以结点 $x$ 为根的子树内的所有点的点权的异或和。</li></ul><p>现有长度为 $m$ 的操作序列，请对于每个第二类操作给出正确的结果。</p><h3 id="输入格式-5"><a href="#输入格式-5" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含两个正整数 $n,m$，用一个空格分隔。</p><p>第二行包含 $n$ 个整数 $a_1,a_2,\ldots,a_n$，相邻整数之间使用一个空格分隔。</p><p>接下来 $n-1$ 行，每行包含两个正整数 $u_i,v_i$，表示结点 $u_i$ 和 $v_i$ 之间有一条边。</p><p>接下来 $m$ 行，每行包含一个操作。</p><h3 id="输出格式-5"><a href="#输出格式-5" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出若干行，每行对应一个查询操作的答案。</p><h3 id="样例输入-5"><a href="#样例输入-5" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">4 4 1 2 3 4 1 2 1 3 2 4 2 1 1 1 0 2 1 2 2<br></code></pre></td></tr></table></figure><h3 id="样例输出-5"><a href="#样例输出-5" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">4 5 6<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-5"><a href="#评测用例规模与约定-5" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30$% 的评测用例，$n,m \leq 1000$；</p><p>对于所有评测用例，$1 \leq n,m \leq 100000$，$0 \leq a_i,y \leq 100000$，$1 \leq u_i,v_i,x \leq n$。</p><h3 id="运行限制-7"><a href="#运行限制-7" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>5s</td><td>512M</td></tr><tr><td>Python3</td><td>17s</td><td>512M</td></tr><tr><td>PyPy3</td><td>17s</td><td>512M</td></tr><tr><td>Go</td><td>17s</td><td>512M</td></tr><tr><td>JavaScript</td><td>17s</td><td>512M</td></tr></tbody></table><p>总通过次数: 367  |  总提交次数: 453  |  通过率: 81%</p><p>难度: 简单   标签: 2023, DFS序, 图论, 树状数组, 省赛</p><h3 id="解题思路-5"><a href="#解题思路-5" class="headerlink" title="解题思路"></a>解题思路</h3><p>考虑第二个操作，查询以节点 $x$ 为根的子树内的所有点的点权的异或和。</p><p>类似这种子树查询问题，我们通常使用 DFS 序对树进行预处理。具体地说，在 DFS 遍历中，我们从根节点开始，依次遍历它的每个子节点。对于每个子节点，我们首先遍历它的子树，然后回溯到该子节点，继续遍历它的兄弟节点。在遍历的过程中，我们可以记录每个节点在 DFS 序中的遍历顺序，即第一次遍历到该节点的时间戳和最后一次遍历到该节点的时间戳。这里的时间戳可以使用一个计数器来实现，每次遍历到一个新节点时，计数器加 $1$，表示当前节点的时间戳。当回溯到该节点时，表示当前节点的最后一次遍历时间戳。</p><p>这样操作有什么作用呢？假设我们有一个长度大于 $n$ 的数组 $a$，我们记进入每个点 $i$ 的时间戳为 $\text{in}[i]$，回溯到点 $i$ 的时间戳为 $\text{out}[i]$，同时将每个点的点权赋值到 $a[\text{in}[i]]$ 上。这样对于一个根为 $x$ 的子树内所有点的点权异或和就等价于 $a$ 数组区间 $[\text{in}[x],\text{out}[x]]$ 的异或和。这样我们就将复杂的树上询问，转化为我们熟悉的数组区间查询问题。</p><p>接下来考虑操作 $1$，将点 $x$ 的点权改为 $y$。</p><p>结合上述分析，该操作即是将 $a[\text{in}[x]]$ 改为 $y$。</p><p>综上所述，我们需要对 $a$ 数组进行一个单点修改和区间查询的操作，这个经典操作我们可以使用树状数组或者线段树来维护，代码中使用的是树状数组。具体地说，我们使用一个树状数组 $a$ 来维护树的 DFS 序的前缀异或序列，$a_i$ 表示区间 $[1,i]$ 的异或和。</p><ul><li>操作 $1$：将 $a[\text{in}[x]]$ 修改为 $y$。</li><li>操作 $2$：求解 $[\text{in}[x],\text{out}[x]]$ 的异或和，根据异或性质 $[1,r] \oplus[1,l-1]&#x3D;[l,r]$，我们只需要求解 $a_{\text{in}[x]-1} \oplus a_r$ 即可求得答案。</li></ul><p>时间复杂度为 $O(n \log n)$。</p><h3 id="AC-Code-5"><a href="#AC-Code-5" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">100010</span>;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Fenwick</span> &#123;<br>    <span class="hljs-type">int</span> n;<br>    std::vector&lt;T&gt; a;<br><br>    <span class="hljs-built_in">Fenwick</span>(<span class="hljs-type">int</span> n = <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">init</span>(n);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>-&gt;n = n;<br>        a.<span class="hljs-built_in">assign</span>(n + <span class="hljs-number">1</span>, <span class="hljs-built_in">T</span>());<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, T v)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (; x &lt;= n; x += x &amp; (-x)) &#123;<br>            a[x] ^= v;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function">T <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>        <span class="hljs-keyword">auto</span> ans = <span class="hljs-built_in">T</span>();<br>        <span class="hljs-keyword">for</span> (; x; x -= x &amp; (-x)) &#123;<br>            ans ^= a[x];<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br>    <span class="hljs-function">T <span class="hljs-title">rangeSum</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(r) ^ <span class="hljs-built_in">sum</span>(l);<br>    &#125;<br>&#125;;<br><span class="hljs-type">int</span> n, m, tot;<br><span class="hljs-type">int</span> a[N], in[N], out[N];<br>std::vector&lt;<span class="hljs-type">int</span>&gt; e[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> fa)</span> </span>&#123;<br>    in[u] = ++tot;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> v : e[u]) &#123;<br>        <span class="hljs-keyword">if</span> (v == fa) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-built_in">dfs</span>(v, u);<br>    &#125;<br>    out[u] = tot;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios_base :: <span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>); cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-function">Fenwick&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">tr</span><span class="hljs-params">(n)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        <span class="hljs-type">int</span> u, v;<br>        cin &gt;&gt; u &gt;&gt; v;<br>        e[u].<span class="hljs-built_in">push_back</span>(v);<br>        e[v].<span class="hljs-built_in">push_back</span>(u);<br>    &#125;<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) tr.<span class="hljs-built_in">add</span>(in[i], a[i]);<br>    <span class="hljs-type">int</span> op, x, y;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i) &#123;<br>        cin &gt;&gt; op &gt;&gt; x;<br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>) &#123;<br>            cin &gt;&gt; y;<br>            <span class="hljs-type">int</span> v = tr.<span class="hljs-built_in">rangeSum</span>(in[x] - <span class="hljs-number">1</span>, in[x]);<br>            tr.<span class="hljs-built_in">add</span>(in[x], y ^ v);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cout &lt;&lt; tr.<span class="hljs-built_in">rangeSum</span>(in[x] - <span class="hljs-number">1</span>, out[x]) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.io.*;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">100010</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m, tot;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], in = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], out = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> List&lt;Integer&gt;[] e = <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>[N];<br> <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> v)</span> &#123;<br>        <span class="hljs-keyword">for</span> (; x &lt;= n; x += x &amp; (-x)) &#123;<br>            b[x] ^= v;<br>        &#125;<br>    &#125;<br> <br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (; x &gt; <span class="hljs-number">0</span>; x -= x &amp; (-x)) &#123;<br>            ans ^= b[x];<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br> <br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">rangeSum</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>        <span class="hljs-keyword">return</span> sum(r) ^ sum(l);<br>    &#125;<br> <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> fa)</span> &#123;<br>        in[u] = ++tot;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : e[u]) &#123;<br>            <span class="hljs-keyword">if</span> (v == fa) <span class="hljs-keyword">continue</span>;<br>            dfs(v, u);<br>        &#125;<br>        out[u] = tot;<br>    &#125;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(System.out));<br>        String[] temp = reader.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>        n = Integer.parseInt(temp[<span class="hljs-number">0</span>]);<br>        m = Integer.parseInt(temp[<span class="hljs-number">1</span>]);<br>        temp = reader.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>            a[i] = Integer.parseInt(temp[i - <span class="hljs-number">1</span>]);<br>            e[i]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>            temp = reader.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> Integer.parseInt(temp[<span class="hljs-number">0</span>]);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> Integer.parseInt(temp[<span class="hljs-number">1</span>]);<br>            e[u].add(v);<br>            e[v].add(u);<br>        &#125;<br>        dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>            add(in[i], a[i]);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; ++i) &#123;<br>            temp = reader.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">op</span> <span class="hljs-operator">=</span> Integer.parseInt(temp[<span class="hljs-number">0</span>]);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> Integer.parseInt(temp[<span class="hljs-number">1</span>]);<br>            <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> Integer.parseInt(temp[<span class="hljs-number">2</span>]);<br>                <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> rangeSum(in[x] - <span class="hljs-number">1</span>, in[x]);<br>                add(in[x], y ^ v);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                writer.write(rangeSum(in[x] - <span class="hljs-number">1</span>, out[x]) + <span class="hljs-string">&quot;\n&quot;</span>);<br>            &#125;<br>        &#125;<br>        reader.close();<br>        writer.flush();<br>        writer.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br>N = <span class="hljs-number">100010</span><br>n, m, tot = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>a = [<span class="hljs-number">0</span>]*N<br>in_ = [<span class="hljs-number">0</span>]*N<br>out = [<span class="hljs-number">0</span>]*N<br>b = [<span class="hljs-number">0</span>]*N<br>e = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, v</span>):<br>    <span class="hljs-keyword">while</span> x &lt;= n:<br>        b[x] ^= v<br>        x += x &amp; (-x)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sum_</span>(<span class="hljs-params">x</span>):<br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> x == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> ans<br>    <span class="hljs-keyword">while</span> x &gt; <span class="hljs-number">0</span>:<br>        ans ^= b[x]<br>        x -= x &amp; (-x)<br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">rangeSum</span>(<span class="hljs-params">l, r</span>):<br>    <span class="hljs-keyword">return</span> sum_(r) ^ sum_(l)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, fa</span>):<br>    <span class="hljs-keyword">global</span> tot<br>    in_[u] = tot = tot + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        <span class="hljs-keyword">if</span> v == fa:<br>            <span class="hljs-keyword">continue</span><br>        dfs(v, u)<br>    out[u] = tot<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">global</span> n, m, tot<br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    a[<span class="hljs-number">1</span>:n+<span class="hljs-number">1</span>] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>        u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>        e[u].append(v)<br>        e[v].append(u)<br>    dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        add(in_[i], a[i])<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        op, x, *extra = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>        <span class="hljs-keyword">if</span> op == <span class="hljs-number">1</span>:<br>            y = extra[<span class="hljs-number">0</span>]<br>            v = rangeSum(in_[x] - <span class="hljs-number">1</span>, in_[x])<br>            add(in_[x], y ^ v)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(rangeSum(in_[x] - <span class="hljs-number">1</span>, out[x]))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h2 id="混乱的数组-蓝桥云课"><a href="#混乱的数组-蓝桥云课" class="headerlink" title="混乱的数组 - 蓝桥云课"></a><a href="https://www.lanqiao.cn/problems/3550/learning/?page=1&first_category_id=1&tags=2023&name=%E6%B7%B7%E4%B9%B1%E7%9A%84%E6%95%B0%E7%BB%84">混乱的数组 - 蓝桥云课</a></h2><h3 id="问题描述-8"><a href="#问题描述-8" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个正整数 $x$，请找出一个尽可能短的仅含正整数的数组 $A$，使得 $A$ 中恰好有 $x$ 对 $i, j$ 满足 $i &lt; j$ 且 $A_i &gt; A_j$。如果存在多个这样的数组，请输出字典序最小的那个。</p><h3 id="输入格式-6"><a href="#输入格式-6" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含一个整数表示 $x$。</p><h3 id="输出格式-6"><a href="#输出格式-6" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出两行。</p><p>第一行包含一个整数 $n$，表示所求出的数组长度。</p><p>第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔，依次表示数组中的每个数。</p><h3 id="样例输入-6"><a href="#样例输入-6" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3<br></code></pre></td></tr></table></figure><h3 id="样例输出-6"><a href="#样例输出-6" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 3 2 1<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-6"><a href="#评测用例规模与约定-6" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30$% 的评测用例，$x \leq 10$；</p><p>对于 $60$% 的评测用例，$x \leq 100$；</p><p>对于所有评测用例，$1 \leq x \leq 10^9$。</p><h3 id="运行限制-8"><a href="#运行限制-8" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>5s</td><td>512M</td></tr><tr><td>Python3</td><td>12s</td><td>512M</td></tr><tr><td>PyPy3</td><td>12s</td><td>512M</td></tr><tr><td>Go</td><td>12s</td><td>512M</td></tr><tr><td>JavaScript</td><td>12s</td><td>512M</td></tr></tbody></table><p>总通过次数: 127  |  总提交次数: 411  |  通过率: 30.9%</p><p>难度: 简单   标签: 2023, 思维, 构造, 省赛</p><h3 id="解题思路-6"><a href="#解题思路-6" class="headerlink" title="解题思路"></a>解题思路</h3><h4 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h4><p>题目要求我们构造出一个字典序最小且有 $x$ 个逆序对的可重复数字的数组。</p><p>我们可以假设一种特殊情况。我们知道，一个严格递减的数组一共有 $\dfrac{n\times(n-1)}{2}$ 个逆序对，也是长度为 $n$ 的序列最大逆序对数量，例如 $3,2,1$ 就有 $3$ 个逆序对。</p><p>因此我们可以通过该公式找出 $\ge x$ 的第一个严格递减数组。我们可以 $2$ 分 $n$，也可以暴力求 $n$，暴力求 $n$ 的复杂度是 $\sqrt{x}$。</p><h4 id="构造答案"><a href="#构造答案" class="headerlink" title="构造答案"></a>构造答案</h4><p>如果 $\dfrac{n\times(n-1)}{2}$ 恰好等于 $x$，那么答案就是 $n \sim 1$。</p><p>如果 $\dfrac{n\times(n-1)}{2}$ 大于 $x$，则说明答案序列一定长度为 $n$。因为我们求出来 $\dfrac{n\times (n-1)}{2} \ge x &gt; \dfrac{(n-1)\times(n-2)}{2}$。</p><p>现在假设 $x&#x3D;13$，则序列 $a&#x3D;[6,5,4,3,2,1]$，该序列有 $15$ 个逆序对。我们将 $6$ 变为 $4$，该序列就有 $13$ 个逆序对了。也就是 $a&#x3D;[4,5,4,3,2,1]$，但这并不是最小的答案，我们有如下修改方式：</p><ol><li>我们将 $a[3]$ 修改为 $3$，序列为 $[4,5,3,3,2,1]$，可以发现 $a[3]$ 和 $a[4]$ 构成不了逆序对，但 $a[1]$ 和 $a[3]$ 构成了逆序对，此时逆序对数不变，字典序变小。</li><li>我们将 $a[4]$ 修改为 $2$，序列为 $[4,5,3,2,2,1]$，可以发现 $a[3]$ 和 $a[4]$ 构成了逆序对，$a[4]$ 和 $a[5]$ 构不成逆序对了。</li></ol><p>因此我们若想修改 $a_i$，则 $1\sim i-1$ 中等于 $a_i$ 的数量要等于 $i+1\sim n$ 中等于 $a_i-1$ 的数量，就能在保持逆序对不变的情况下修改。继续按照上述结论修改为 $[4,5,3,2,1,1]$。</p><p>我们发现，$a[2]$ 修改为 $4$ 依旧不影响结果，现在序列变为 $[4,4,3,2,1,1]$。然后根据之前所述规则，将 $a[2]$ 改为 $3$，然后 $a[3]$ 也可以修改为 $2$，最终答案为 $[4,3,2,2,1,1]$。</p><p>从做题经验来说：构造题大多都是有规律的构造，而非暴力构造，我们可以尝试寻找规律：</p><p>对于 $x&#x3D;(11\sim 14)$ 我们均可以一一尝试：</p><p>$\text{[2 4 3 2 1 1 ],[3 3 2 2 1 1 ],[4 3 2 2 1 1],[5 4 3 2 1 1 ]}$。到这里发现可能后缀很像，但是依旧无法解题，我们继续找规律：</p><p>$x&#x3D;(16\sim21)$：</p><p>$\text{[2 5 4 3 2 1 1 ],[3 4 3 2 2 1 1],[4 3 3 2 2 1 1 ],[5 4 3 2 2 1 1],[6 5 4 3 2 1 1 ],[7,6,5,4,3,2,1]}$。</p><p>我们发现后缀是从 $\text{[1 1] [2 2 1 1] [3 3 2 2 1 1][2 2 1 1][1 1]}$ 这种形式出现。</p><p>而前缀规律为 $[2,5,4,3,2][3,4,3],[4],[5,4,3],[6,5,4,3,2]$。</p><p>因此前后缀规律出现，跟是否是当前一半有关，因此寻找出规律。</p><p>因此若 $x-\dfrac{n\times(n-1)}{2}\le \dfrac{n}{2}$，则我们首项填 $1+x-\dfrac{n\times(n-1)}{2}$，第二项从 $n-2$ 开始递减填充，最后填充值大小与首项一样，然后最后构造数量和 $x-\dfrac{n\times(n-1)}{2}$ 相关的 $[1,1][2,2][3,3]…$。</p><p>该方法成立原因如下：</p><p>以 $17,\text{[3 4 3 2 2 1 1]}$ 为例：</p><p>我们在末置部分构造 $\text{2 2 1 1}$，已经有 $4$ 个逆序对了，首项一定比末置部分构造要大，因此对首项贡献为 $4$ 个逆序对，然后第二项开始递减填充了 $2$ 次，末置部分构造对齐贡献了 $8$ 个逆序对，他们互相之间构造了 $1$ 个逆序对，因此答案为 $4+4+8+1&#x3D;17$。设 $x-\dfrac{n\times(n-1)}{2}&#x3D;x_1$，则末置部分构造长度为 $x_1\times2$，首项大小为 $x_1+1$，递减长度为 $n-x_1\times2-1$。则构造出的逆序对数量为： $\dfrac{(x_1\times(x1-1))}{2}\times 4+\dfrac{(x_1\times(x1-1))}{2}\times 4+(n-x_1\times2-1)\times\dfrac{(x_1\times(x1-1))}{2}\times 4+\dfrac{(n-x_1\times2-1)\times((n-x_1\times2-2))}{2}$ $\dfrac{(x_1\times(x1-1))}{2}\times 4$ 是末置部分构造出的逆序对数量。</p><p>$x-\dfrac{n\times(n-1)}{2}&gt;\dfrac{n}{2}$ 证明也同理。</p><p>综上，该方案是一个合理的构造方案。</p><h3 id="AC-Code-6"><a href="#AC-Code-6" class="headerlink" title="AC_Code"></a>AC_Code</h3><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> x, n, a[<span class="hljs-number">100005</span>], res, k, r;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);<br>  n = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">while</span> (n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> &lt; x) n++;<br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, n);<br>  <span class="hljs-keyword">if</span> (n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> == x) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>      a[i] = n - i + <span class="hljs-number">1</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    res = n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> - x;<br>    <span class="hljs-keyword">if</span> (res &lt;= n / <span class="hljs-number">2</span>) &#123;<br>      r = n;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= res; i++) &#123;<br>        a[r--] = i;<br>        a[r--] = i;<br>      &#125;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = r; i &gt;= <span class="hljs-number">1</span>; i--) a[i] = res + (r - i + <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      res = n - res - <span class="hljs-number">1</span>;<br>      r = n;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= res; i++) &#123;<br>        a[r--] = i;<br>        a[r--] = i;<br>      &#125;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = r; i &gt;= <span class="hljs-number">2</span>; i--) a[i] = res + (r - i + <span class="hljs-number">1</span>);<br>      a[<span class="hljs-number">1</span>] = res + <span class="hljs-number">1</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d%c&quot;</span>, a[i], i == n? <span class="hljs-string">&#x27;\n&#x27;</span> : <span class="hljs-string">&#x27; &#x27;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        <br>        <span class="hljs-keyword">while</span> (n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> &lt; x) &#123;<br>            n++;<br>        &#125;<br>        <br>        System.out.println(n);<br>        <br>        <span class="hljs-keyword">if</span> (n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> == x) &#123;<br>            <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                a[i] = n - i + <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                System.out.print(a[i]);<br>                <span class="hljs-keyword">if</span> (i == n) &#123;<br>                    System.out.println();<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    System.out.print(<span class="hljs-string">&quot; &quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>];<br>            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> - x;<br>            <span class="hljs-type">int</span> r;<br>            <br>            <span class="hljs-keyword">if</span> (res &lt;= n / <span class="hljs-number">2</span>) &#123;<br>                r = n;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= res; i++) &#123;<br>                    a[r--] = i;<br>                    a[r--] = i;<br>                &#125;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> r; i &gt;= <span class="hljs-number">1</span>; i--) &#123;<br>                    a[i] = res + (r - i + <span class="hljs-number">1</span>);<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                res = n - res - <span class="hljs-number">1</span>;<br>                r = n;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= res; i++) &#123;<br>                    a[r--] = i;<br>                    a[r--] = i;<br>                &#125;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> r; i &gt;= <span class="hljs-number">2</span>; i--) &#123;<br>                    a[i] = res + (r - i + <span class="hljs-number">1</span>);<br>                &#125;<br>                a[<span class="hljs-number">1</span>] = res + <span class="hljs-number">1</span>;<br>            &#125;<br>            <br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                System.out.print(a[i]);<br>                <span class="hljs-keyword">if</span> (i == n) &#123;<br>                    System.out.println();<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    System.out.print(<span class="hljs-string">&quot; &quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>n = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">while</span> n * (n - <span class="hljs-number">1</span>) // <span class="hljs-number">2</span> &lt; x:<br>    n += <span class="hljs-number">1</span><br><br><span class="hljs-built_in">print</span>(n)<br><br><span class="hljs-keyword">if</span> n * (n - <span class="hljs-number">1</span>) // <span class="hljs-number">2</span> == x:<br>    a = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        a[i] = n - i + <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(a[i], end=<span class="hljs-string">&quot; &quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>()<br><span class="hljs-keyword">else</span>:<br>    a = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    res = n * (n - <span class="hljs-number">1</span>) // <span class="hljs-number">2</span> - x<br>    r = <span class="hljs-number">0</span><br>    <br>    <span class="hljs-keyword">if</span> res &lt;= n // <span class="hljs-number">2</span>:<br>        r = n<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, res + <span class="hljs-number">1</span>):<br>            a[r] = i<br>            r -= <span class="hljs-number">1</span><br>            a[r] = i<br>            r -= <span class="hljs-number">1</span><br>        <br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(r, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>            a[i] = res + (r - i + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        res = n - res - <span class="hljs-number">1</span><br>        r = n<br>        <br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, res + <span class="hljs-number">1</span>):<br>            a[r] = i<br>            r -= <span class="hljs-number">1</span><br>            a[r] = i<br>            r -= <span class="hljs-number">1</span><br>        <br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(r, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>            a[i] = res + (r - i + <span class="hljs-number">1</span>)<br>        <br>        a[<span class="hljs-number">1</span>] = res + <span class="hljs-number">1</span><br>    <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-built_in">print</span>(a[i], end=<span class="hljs-string">&quot; &quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2023年蓝桥杯省赛c组试题</title>
    <link href="/2024/03/31/2023%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9Bc%E7%BB%84%E8%AF%95%E9%A2%98/"/>
    <url>/2024/03/31/2023%E5%B9%B4%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9Bc%E7%BB%84%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="题目总览"><a href="#题目总览" class="headerlink" title="题目总览"></a>题目总览</h2><ul><li>1.求和</li><li>2.分糖果</li><li>3.三国游戏</li><li>4.平均</li><li>5.填充</li><li>6.棋盘</li><li>7.子矩阵</li><li>8.公因数匹配</li><li>9.异或和之差</li><li>10.太阳</li></ul><h2 id="3-求和-蓝桥云课-lanqiao-cn"><a href="#3-求和-蓝桥云课-lanqiao-cn" class="headerlink" title="3.求和 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3493/learning/?page=1&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B">3.求和 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>求 $1$ （含）至 $20230408$ （含）中每个数的和。</p><h3 id="答案提交"><a href="#答案提交" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 7339  |  总提交次数: 8165  |  通过率: 89.9%</p><p>难度: 中等   标签: 2023, 模拟, 省赛</p><h3 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">20240409</span>)))<br></code></pre></td></tr></table></figure><p>计算结果是204634714038436</p><h2 id="0分糖果-蓝桥云课-lanqiao-cn"><a href="#0分糖果-蓝桥云课-lanqiao-cn" class="headerlink" title="0分糖果 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/4124/learning/?page=3&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B">0分糖果 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h3><p>两种糖果分别有 $9$ 个和 $16$ 个，要全部分给 $7$ 个小朋友，每个小朋友得到的糖果总数最少为 $2$ 个最多为 $5$ 个，问有多少种不同的分法。糖果必须全部分完。</p><p>只要有其中一个小朋友在两种方案中分到的糖果不完全相同，这两种方案就算作不同的方案。</p><h3 id="答案提交-1"><a href="#答案提交-1" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><p>总通过次数: 2122  |  总提交次数: 2351  |  通过率: 90.3%</p><p>难度: 困难   标签: 2023, 枚举, 省赛, DFS</p><h3 id="参考答案-1"><a href="#参考答案-1" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">depth, n, m</span>):<br>    <span class="hljs-keyword">global</span> ans<br>    <span class="hljs-keyword">if</span> depth == <span class="hljs-number">7</span>:<br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> m == <span class="hljs-number">0</span>:<br>            ans += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-number">2</span> &lt;= i + j &lt;= <span class="hljs-number">5</span> <span class="hljs-keyword">and</span> i &lt;= n <span class="hljs-keyword">and</span> j &lt;= m:<br>                dfs(depth + <span class="hljs-number">1</span>, n - i, m - j)<br>dfs(<span class="hljs-number">0</span>,<span class="hljs-number">9</span>,<span class="hljs-number">16</span>)<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">ans = <span class="hljs-number">0</span><br>path = [[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">7</span>)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">depth</span>):<br>    <span class="hljs-keyword">global</span> ans<br>    <span class="hljs-keyword">if</span> depth == <span class="hljs-number">7</span>:<br>        sum1 = sum2 = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">7</span>):<br>            sum1 += path[i][<span class="hljs-number">0</span>]<br>            sum2 += path[i][<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> sum1 == <span class="hljs-number">9</span> <span class="hljs-keyword">and</span> sum2 == <span class="hljs-number">16</span>:<br>            ans += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">6</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">6</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-number">2</span> &lt;= i + j &lt;= <span class="hljs-number">5</span>:<br>                path[depth][<span class="hljs-number">0</span>] = i<br>                path[depth][<span class="hljs-number">1</span>] = j<br>                dfs(depth + <span class="hljs-number">1</span>)<br>dfs(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>计算结果是5067671</p><h2 id="10-三国游戏-蓝桥云课-lanqiao-cn"><a href="#10-三国游戏-蓝桥云课-lanqiao-cn" class="headerlink" title="10.三国游戏 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3518/learning/?page=2&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B">10.三国游戏 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝正在玩一款游戏。游戏中魏($X$)、蜀($Y$)、吴($Z$)三个国家各自拥有一定数量的士兵$X, Y, Z$（一开始可以认为都为 $0$）。游戏有 $n$ 个可能会发生的事件，每个事件之间相互独立且最多只会发生一次，当第 $i$ 个事件发生时会分别让 $X, Y, Z$ 增加$A_i, B_i,C_i$。</p><p>当游戏结束时（所有事件的发生与否已经确定），如果 $X, Y, Z$ 的其中一个大于另外两个之和，我们认为其获胜。例如，当 $X &gt; Y + Z$ 时，我们认为魏国获胜。小蓝想知道游戏结束时如果有其中一个国家获胜，最多发生了多少个事件?如果不存在任何能让某国获胜的情况，请输出 $-1$。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个整数 $n$。</p><p>第二行包含 $n$ 个整数表示 $A_i$，相邻整数之间使用一个空格分隔。</p><p>第三行包含 $n$ 个整数表示 $B_i$，相邻整数之间使用一个空格分隔。</p><p>第四行包含 $n$ 个整数表示 $C_i$，相邻整数之间使用一个空格分隔。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br>1 2 2<br>2 3 2<br>1 0 7<br></code></pre></td></tr></table></figure><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">2<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定"><a href="#评测用例规模与约定" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40$% 的评测用例，$n \leq 500$；</p><p>对于 $70$% 的评测用例，$n \leq 5000$；</p><p>对于所有评测用例，$1 \leq n \leq 10^5$，$1 \leq A_i, B_i, C_i \leq 10^9$。</p><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 2106  |  总提交次数: 3250  |  通过率: 64.8%</p><p>难度: 困难   标签: 2023, 贪心, 排序, 省赛</p><h3 id="参考答案-2"><a href="#参考答案-2" class="headerlink" title="参考答案"></a>参考答案</h3><p>​    首先明确游戏结束时（所以发事情发生与否已经确定）仅仅只表示一次游戏会发生1，2…n这几件事情。可能在过程中会出现比如X&gt;Y+Z的情况，此时并不表示某魏国获胜了。而是要等到全部事情发生后比对X与Y+Z的情况才能判断。理解后难度就直线下降了。因此可以枚举魏、蜀、吴三个国家想要获胜最多事情数量，然后取最大值即是答案。    假设魏国获胜：令new_X &#x3D;[ Ai - Bi - Ci].  1&lt;&#x3D;i&lt;&#x3D;n    为使发生的事件最多，需要从new_Xi最大的地方开始发生，sum_X +&#x3D; new_Xi    当sum_X&lt;&#x3D;0时，结束。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>A = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>B = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>C = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>new_X = <span class="hljs-built_in">sorted</span>([ A[_] - B[_] - C[_] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) ],reverse=<span class="hljs-literal">True</span>)<br>new_Y = <span class="hljs-built_in">sorted</span>([ B[_] - A[_] - C[_] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) ],reverse=<span class="hljs-literal">True</span>)<br>new_Z = <span class="hljs-built_in">sorted</span>([ C[_] - A[_] - B[_] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) ],reverse=<span class="hljs-literal">True</span>)<br>ans,resX,resY,resZ,sum_X,sum_Y,sum_Z = <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    sum_X,sum_Y,sum_Z =  sum_X + new_X[i], sum_Y + new_Y[i], sum_Z + new_Z[i]<br>    resX = resY = resZ = i + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> sum_X&gt;<span class="hljs-number">0</span>:ans = <span class="hljs-built_in">max</span>(ans,resX)<br>    <span class="hljs-keyword">if</span> sum_Y&gt;<span class="hljs-number">0</span>:ans = <span class="hljs-built_in">max</span>(ans,resY)<br>    <span class="hljs-keyword">if</span> sum_Z&gt;<span class="hljs-number">0</span>:ans = <span class="hljs-built_in">max</span>(ans,resZ)<br>    <span class="hljs-keyword">if</span> sum_X&lt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> sum_Y&lt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> sum_Z&lt;=<span class="hljs-number">0</span>:<span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(ans <span class="hljs-keyword">if</span> ans <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h2 id="0平均-蓝桥云课-lanqiao-cn"><a href="#0平均-蓝桥云课-lanqiao-cn" class="headerlink" title="0平均 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3532/learning/?page=2&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B">0平均 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-3"><a href="#问题描述-3" class="headerlink" title="问题描述"></a>问题描述</h3><p>有一个长度为 $n$ 的数组（$n$ 是 $10$ 的倍数），每个数 $a_i$ 都是区间 $[0, 9]$ 中的整数。小明发现数组里每种数出现的次数不太平均，而更改第 $i$ 个数的代价为 $b_i$，他想更改若干个数的值使得这 $10$ 种数出现的次数相等（都等于 $\frac{n}{10}$），请问代价和最少为多少。</p><h3 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个正整数 $n$。</p><p>接下来 $n$ 行，第 $i$ 行包含两个整数 $a_i, b_i$ ，用一个空格分隔。</p><h3 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个正整数表示答案。</p><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">10</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">6</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">7</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">8</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">9</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">27<br></code></pre></td></tr></table></figure><h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><p>只更改第 $1, 2, 4, 5, 7, 8$ 个数，需要花费代价 $1 + 2 + 4 + 5 + 7 + 8 &#x3D; 27$。</p><h3 id="评测用例规模与约定-1"><a href="#评测用例规模与约定-1" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $20$% 的评测用例，$n \leq 1000$；</p><p>对于所有评测用例，$n \leq 10^5$，$0 &lt; b_i \leq 2 \times 10^5$。</p><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>4s</td><td>512M</td></tr><tr><td>Python3</td><td>5s</td><td>512M</td></tr><tr><td>PyPy3</td><td>5s</td><td>512M</td></tr><tr><td>Go</td><td>5s</td><td>512M</td></tr><tr><td>JavaScript</td><td>5s</td><td>512M</td></tr></tbody></table><h3 id="参考答案-3"><a href="#参考答案-3" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>lst = []<br>num = n / <span class="hljs-number">10</span><br>dic = &#123;&#125;<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    lst.append((a, b))<br>    <span class="hljs-keyword">if</span> a <span class="hljs-keyword">in</span> dic.keys():<span class="hljs-comment">#记录a的数量</span><br>        dic[a] += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        dic[a] = <span class="hljs-number">1</span><br>lst = <span class="hljs-built_in">sorted</span>(lst, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>]) <span class="hljs-comment">#以代价大小进行排序</span><br>value = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    a, b = lst[i]<span class="hljs-comment">#取出最小代价的a</span><br>    <span class="hljs-keyword">if</span> dic.get(a, <span class="hljs-number">0</span>) &gt; num: <span class="hljs-comment">#判断a的数量是否大于num</span><br>        value += b    <br>        dic[a]-=<span class="hljs-number">1</span>  <span class="hljs-comment">#计算完a的数量要减1</span><br><span class="hljs-built_in">print</span>(value)<br></code></pre></td></tr></table></figure><h2 id="1-填充-蓝桥云课-lanqiao-cn"><a href="#1-填充-蓝桥云课-lanqiao-cn" class="headerlink" title="1.填充 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3519/learning/?page=1&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B&name=%E5%A1%AB%E5%85%85">1.填充 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-4"><a href="#问题描述-4" class="headerlink" title="问题描述"></a>问题描述</h3><p>有一个长度为 $n$ 的 $01$ 串，其中有一些位置标记为 $?$，这些位置上可以任意填充 $0$ 或者 $1$，请问如何填充这些位置使得这个 $01$ 串中出现互不重叠的 $00$ 和 $11$ 子串最多，输出子串个数。</p><h3 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含一个字符串。</p><h3 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">1110?0<br></code></pre></td></tr></table></figure><h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">2<br></code></pre></td></tr></table></figure><h3 id="样例说明-1"><a href="#样例说明-1" class="headerlink" title="样例说明"></a>样例说明</h3><p>如果在问号处填 $0$ ，则最多出现一个 $00$ 和一个 $11$：$111000$。</p><h3 id="评测用例规模与约定-2"><a href="#评测用例规模与约定-2" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于所有评测用例，$1 \leq n \leq 10^6$。</p><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 2622  |  总提交次数: 3071  |  通过率: 85.4%</p><p>难度: 中等   标签: 2023, 贪心, 省赛, 动态规划</p><h3 id="参考答案-4"><a href="#参考答案-4" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>s=<span class="hljs-built_in">input</span>()<br>n=<span class="hljs-built_in">len</span>(s)<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">judge=[&#x27;00&#x27;,&#x27;11&#x27;,&#x27;0?&#x27;,&#x27;1?&#x27;,&#x27;?0&#x27;,&#x27;?1&#x27;,&#x27;??&#x27;]</span><br><span class="hljs-string">ans=0</span><br><span class="hljs-string">i=1</span><br><span class="hljs-string">while i&lt;n:</span><br><span class="hljs-string">  if s[i-1:i+1] in judge:</span><br><span class="hljs-string">    ans+=1</span><br><span class="hljs-string">    i+=2</span><br><span class="hljs-string">  else:</span><br><span class="hljs-string">    i+=1</span><br><span class="hljs-string">print(ans)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>f=[<span class="hljs-number">0</span>]*n<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>  <span class="hljs-keyword">if</span> s[i]==s[i-<span class="hljs-number">1</span>] <span class="hljs-keyword">or</span> s[i]==<span class="hljs-string">&#x27;?&#x27;</span> <span class="hljs-keyword">or</span> s[i-<span class="hljs-number">1</span>]==<span class="hljs-string">&#x27;?&#x27;</span>:<br>    f[i]=f[i-<span class="hljs-number">2</span>]+<span class="hljs-number">1</span><br>  <span class="hljs-keyword">else</span>:<br>    f[i]=f[i-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(f[-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h2 id="1-棋盘-蓝桥云课-lanqiao-cn"><a href="#1-棋盘-蓝桥云课-lanqiao-cn" class="headerlink" title="1.棋盘 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3533/learning/?page=1&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B&name=%E6%A3%8B%E7%9B%98">1.棋盘 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-5"><a href="#问题描述-5" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝拥有 $n\times n$ 大小的棋盘，一开始棋盘上全都是白子。小蓝进行了 $m$ 次操作，每次操作会将棋盘上某个范围内的所有棋子的颜色取反（也就是白色棋子变为黑色，黑色棋子变为白色）。请输出所有操作做完后棋盘上每个棋子的颜色。</p><h3 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含两个整数 $n$，$m$，用一个空格分隔，表示棋盘大小与操作数。</p><p>接下来 $m$ 行每行包含四个整数 $x_1$，$y_1$，$x_2$，$y_2$，相邻整数之间使用一个空格分隔，表示将在 $x_1$ 至 $x_2$ 行和 $y_1$ 至 $y_2$ 列中的棋子颜色取反。</p><h3 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出 $n$ 行，每行 $n$ 个 $0$ 或 $1$ 表示该位置棋子的颜色。如果是白色则输出 $0$，否则输出 $1$。</p><h3 id="样例输入-3"><a href="#样例输入-3" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-3"><a href="#样例输出-3" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">001<br>010<br>100<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-3"><a href="#评测用例规模与约定-3" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30$% 的评测用例，$n,m\leq 500$ ；</p><p>对于所有评测用例，$1\leq n,m\leq 2000$，$1\leq x_1\leq x_2\leq n$，$1\leq y_1\leq y_2\leq m$。</p><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>4s</td><td>512M</td></tr><tr><td>Python3</td><td>10s</td><td>512M</td></tr><tr><td>PyPy3</td><td>10s</td><td>512M</td></tr><tr><td>Go</td><td>10s</td><td>512M</td></tr><tr><td>JavaScript</td><td>10s</td><td>512M</td></tr></tbody></table><h3 id="参考答案-5"><a href="#参考答案-5" class="headerlink" title="参考答案"></a>参考答案</h3><p>​第一种方法：（超时） 这部分代码通过输入获取棋盘大小 n 和操作数 m。 然后创建一个 n x n 大小的二维数组 board，并将其所有元素初始化为0。 接下来，执行 m 次操作：对于每次操作，从输入中获取操作的范围 x1, y1, x2, y2。 在指定的范围内，对棋盘上的棋子颜色进行取反操作，即白变黑，黑变白。 最后，遍历 board 中的每一行，并使用 join() 和 map() 将每行中的数字连接成字符串并打印出来，确保数字之间有空格分隔。 整个代码的功能是模拟了对一个棋盘进行了 m 次操作，每次操作对指定范围内的棋子颜色进行了取反，并输出了最终每个位置的棋子颜色。</p><p>​ 第二种方法：（优化） 在这段代码中，可能的性能瓶颈在于对棋盘的操作。对于每次操作，它使用了两层嵌套的循环来更新棋盘范围内的所有棋子颜色。这样的做法在棋盘较大且操作次数较多的情况下可能会导致性能问题。 一种改进方式是尝试避免在每次操作时都对指定范围内的棋子颜色进行更新。你可以考虑使用差分数组（Difference Array）来优化这一过程。 差分数组是一个数组，用于记录相邻两个元素之间的差值。在这个问题中，可以利用差分数组来记录每一行每个位置的颜色变化次数，而不是直接更新整个棋盘。 这段代码中，我们使用了一个 (n + 1) x (n + 1) 大小的二维数组 diff 来表示差分数组。在操作输入时，我们只更新了差分数组中的值，最后根据差分数组的值计算出最终的棋盘状态。这种方式能够减少更新棋盘的次数，从而提高效率。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 这段代码会超时，下面使用差分方法进行优化</span><br><span class="hljs-comment"># n,m = map(int,input().split())</span><br><span class="hljs-comment"># chessboard = [[0]*n for _ in range(n)]</span><br><span class="hljs-comment"># for _ in range(m):</span><br><span class="hljs-comment">#   x1,y1,x2,y2 = map(int,input().split())</span><br><span class="hljs-comment">#   for i in range(x1-1,x2):</span><br><span class="hljs-comment">#     for j in range(y1-1,y2):</span><br><span class="hljs-comment">#       chessboard[i][j] = 1 - chessboard[i][j]</span><br><span class="hljs-comment"># for row in chessboard:</span><br><span class="hljs-comment">#     print(&#x27;&#x27;.join(map(str, row)))</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-comment"># 初始化一个全为0的(n + 1) x (n + 1)的二维数组来表示差分数组</span><br>diff = [[<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)]<br><br><span class="hljs-comment"># 执行m次操作</span><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-comment"># 更新差分数组的操作范围</span><br>    diff[x1][y1] += <span class="hljs-number">1</span><br>    diff[x1][<span class="hljs-built_in">min</span>(y2 + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>)] -= <span class="hljs-number">1</span><br>    diff[<span class="hljs-built_in">min</span>(x2 + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>)][y1] -= <span class="hljs-number">1</span><br>    diff[<span class="hljs-built_in">min</span>(x2 + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>)][<span class="hljs-built_in">min</span>(y2 + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>)] += <span class="hljs-number">1</span><br><br><span class="hljs-comment"># 计算最终棋盘状态</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        diff[i][j] += diff[i][j - <span class="hljs-number">1</span>] + diff[i - <span class="hljs-number">1</span>][j] - diff[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-comment"># 棋盘上该位置为偶数时为0，奇数时为1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> diff[i][j] % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><p>​用差分前缀和的思想，二维转化为一维一维地处理，由于数据量不大，是可以接受的。另外转换棋子可以使用异或的思想，运行可以快一些。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>mp = [[<span class="hljs-number">0</span>] * n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(x1, x2+<span class="hljs-number">1</span>):<br>        mp[i-<span class="hljs-number">1</span>][y1-<span class="hljs-number">1</span>] ^= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> y2 != n: <br>            mp[i-<span class="hljs-number">1</span>][y2] ^= <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        mp[i][j] ^= mp[i][j-<span class="hljs-number">1</span>]<br>    <span class="hljs-built_in">print</span>(*mp[i], sep=<span class="hljs-string">&#x27;&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="2-子矩阵-蓝桥云课-lanqiao-cn"><a href="#2-子矩阵-蓝桥云课-lanqiao-cn" class="headerlink" title="2.子矩阵 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3521/learning/?page=1&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B&name=%E5%AD%90">2.子矩阵 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-6"><a href="#问题描述-6" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个 $n \times m$ （$n$ 行 $m$ 列）的矩阵。设一个</p><p>矩阵的价值为其所有数中的最大值和最小值的乘积。求给定矩阵的所有大小为 $a \times b$ （$a$ 行 $b$ 列）的子矩阵的价值的和。</p><p>答案可能很大，你只需要输出答案对 $998244353$ 取模后的结果。</p><h3 id="输入格式-4"><a href="#输入格式-4" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含四个整数分别表示 $n$，$m$，$a$，$b$，相邻整数之间使用一个空格分隔。接下来</p><p>$n$ 行每行包含 $m$ 个整数，相邻整数之间使用一个空格分隔，表示矩阵中的每个数 $A_{i,j}$。</p><h3 id="输出格式-4"><a href="#输出格式-4" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-4"><a href="#样例输入-4" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>2 </span><span>3</span> <span>1</span> <span>2</span><br><span>1 </span><span>2</span> <span>3</span><br><span>4 </span><span>5</span> <span>6</span></p><h3 id="样例输出-4"><a href="#样例输出-4" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">58<br></code></pre></td></tr></table></figure><h3 id="样例说明-2"><a href="#样例说明-2" class="headerlink" title="样例说明"></a>样例说明</h3><p>$1 \times 2 + 2 \times 3 + 4 \times 5 + 5 \times 6 &#x3D; 58$。</p><h3 id="评测用例规模与约定-4"><a href="#评测用例规模与约定-4" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40$% 的评测用例，$1 \leq n,m \leq 100$；</p><p>对于 $70$% 的评测用例，$1 \leq n,m \leq 500$；</p><p>对于所有评测用例，$1 \leq a \leq n \leq 1000$，$1 \leq b \leq m \leq 1000$，$1 \leq A_{i,j} \leq 10^9$。</p><h3 id="运行限制-6"><a href="#运行限制-6" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>2s</td><td>256M</td></tr><tr><td>C</td><td>2s</td><td>256M</td></tr><tr><td>Java</td><td>4s</td><td>256M</td></tr><tr><td>Python3</td><td>4s</td><td>256M</td></tr><tr><td>PyPy3</td><td>4s</td><td>256M</td></tr><tr><td>Go</td><td>4s</td><td>256M</td></tr><tr><td>JavaScript</td><td>4s</td><td>256M</td></tr></tbody></table><p>总通过次数: 648  |  总提交次数: 1534  |  通过率: 42.2%</p><p>难度: 困难   标签: 2023, 单调队列, 省赛</p><h3 id="参考答案-6"><a href="#参考答案-6" class="headerlink" title="参考答案"></a>参考答案</h3><p>​    暴力是显然不能通过全部测试数据的，需要得到每一个a*b大小的矩阵的最大值和最小值，可以先考虑得到每一行长度为b的窗口中的最大值和最小值，然后在这个基础上求出每一列长度为a的窗口的最大值和最小值。就可以预处理出来每个子矩阵中的最大值和最小值。要求一个滑动窗口中的最大值和最小值是一个基本的单调队列问题。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs py">n, m, a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>s,num_max,num_min,n_max,n_min,res = [[<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)],[],[],[],[],<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    s[i][<span class="hljs-number">1</span>:m + <span class="hljs-number">1</span>] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_min</span>(<span class="hljs-params">a, k, m</span>):<br>    tep,q,hh,tt = [],[<span class="hljs-number">0</span>]*<span class="hljs-number">1010</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> hh &lt;= tt <span class="hljs-keyword">and</span> q[hh] &lt;= i - k: hh += <span class="hljs-number">1</span>  <span class="hljs-comment"># 判断是否出了窗口</span><br>        <span class="hljs-keyword">while</span> hh &lt;= tt <span class="hljs-keyword">and</span> a[i] &lt;= a[q[tt]]: tt -= <span class="hljs-number">1</span><br>        tt,q[tt] = tt + <span class="hljs-number">1</span>,i<br>        <span class="hljs-keyword">if</span> i - k &gt;= <span class="hljs-number">0</span>: tep.append(a[q[hh]])<br>    <span class="hljs-keyword">return</span> tep<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_max</span>(<span class="hljs-params">a, k, m</span>):<br>    tep,q,hh,tt = [],[<span class="hljs-number">0</span>]*<span class="hljs-number">1010</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> hh &lt;= tt <span class="hljs-keyword">and</span> q[hh] &lt;= i - k: hh += <span class="hljs-number">1</span>  <span class="hljs-comment"># 判断是否出了窗口</span><br>        <span class="hljs-keyword">while</span> hh &lt;= tt <span class="hljs-keyword">and</span> a[i] &gt;= a[q[tt]]: tt -= <span class="hljs-number">1</span><br>        tt,q[tt] = tt + <span class="hljs-number">1</span>,i<br>        <span class="hljs-keyword">if</span> i - k &gt;= <span class="hljs-number">0</span>: tep.append(a[q[hh]])<br>    <span class="hljs-keyword">return</span> tep<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    temp = [<span class="hljs-number">0</span>] + get_max(s[i][:m + <span class="hljs-number">1</span>], b, m)<br>    num_max.append(temp)<br>    temp = [<span class="hljs-number">0</span>] + get_min(s[i][:m + <span class="hljs-number">1</span>], b, m)<br>    num_min.append(temp)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m - b + <span class="hljs-number">2</span>):<br>    t1 = [<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        t1.append(num_max[_][i])<br>    t1.append(<span class="hljs-number">0</span>)<br>    temp = get_max(t1, a, n)<br>    n_max.append(temp)<br>    t2 = [<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        t2.append(num_min[_][i])<br>    t2.append(<span class="hljs-number">0</span>)<br>    temp = get_min(t2, a, n)<br>    n_min.append(temp)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(n_max)):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(n_max[<span class="hljs-number">0</span>])):<br>        res += n_max[i][j] * n_min[i][j]<br><span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure><h2 id="1-公因数匹配-蓝桥云课-lanqiao-cn"><a href="#1-公因数匹配-蓝桥云课-lanqiao-cn" class="headerlink" title="1.公因数匹配 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3525/learning/?page=1&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B&name=%E5%85%AC">1.公因数匹配 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-7"><a href="#问题描述-7" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定 $n$ 个正整数 $A_i$，请找出两个数 $i$，$j$ 使得 $i &lt; j$ 且 $A_i$ 和 $A_j$ 存在大于 $1$ 的公因数。</p><p>如果存在多组 $i$，$j$，请输出 $i$ 最小的那组。如果仍然存在多组 $i$，$j$，请输出 $i$ 最小的所有方案中 $j$ 最小的那组。</p><h3 id="输入格式-5"><a href="#输入格式-5" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个整数 $n$。</p><p>第二行包含 $n$ 个整数分别表示 $A_1$，$A_2$，$\ldots$，$A_n$，相邻整数之间使用一个空格分隔。</p><h3 id="输出格式-5"><a href="#输出格式-5" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含两个整数分别表示题目要求的 $i$，$j$，用一个空格分隔。</p><h3 id="样例输入-5"><a href="#样例输入-5" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">5</span><br><span class="hljs-symbol">5 </span><span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">6</span> <span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-5"><a href="#样例输出-5" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-5"><a href="#评测用例规模与约定-5" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40$% 的评测用例，$n \leq 5000$；</p><p>对于所有评测用例，$1 \leq n \leq 10^5$，$1 \leq A_i \leq 10^6$。</p><h3 id="运行限制-7"><a href="#运行限制-7" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>256M</td></tr><tr><td>C</td><td>3s</td><td>256M</td></tr><tr><td>Java</td><td>4s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>PyPy3</td><td>5s</td><td>256M</td></tr><tr><td>Go</td><td>5s</td><td>256M</td></tr><tr><td>JavaScript</td><td>5s</td><td>256M</td></tr></tbody></table><h3 id="参考答案-7"><a href="#参考答案-7" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 核心方法：任何一个正整数都可以等于多个质数的乘积 所以将每一个输入分解成质因数，然后输出质因数相同的最小输入位置 该位置通过一个dict储存</span><br><span class="hljs-comment"># 请在此输入您的代码</span><br>prime=[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">11</span>,<span class="hljs-number">13</span>,<span class="hljs-number">17</span>,<span class="hljs-number">19</span>,<span class="hljs-number">23</span>,<span class="hljs-number">29</span>,<span class="hljs-number">31</span>,<span class="hljs-number">37</span>,<span class="hljs-number">41</span>,<span class="hljs-number">43</span>,<span class="hljs-number">47</span>,<span class="hljs-number">53</span>,<span class="hljs-number">59</span>,<span class="hljs-number">61</span>,<span class="hljs-number">67</span>,<span class="hljs-number">71</span>,<span class="hljs-number">73</span>,<span class="hljs-number">79</span>,<span class="hljs-number">83</span>,<span class="hljs-number">89</span>,<span class="hljs-number">97</span>,<span class="hljs-number">101</span>,<span class="hljs-number">103</span>,<span class="hljs-number">107</span>,<span class="hljs-number">109</span>,<span class="hljs-number">113</span>,<span class="hljs-number">127</span>,<span class="hljs-number">131</span>,<span class="hljs-number">137</span>,<span class="hljs-number">139</span>,<span class="hljs-number">149</span>,<span class="hljs-number">151</span>,<span class="hljs-number">157</span>,<span class="hljs-number">163</span>,<span class="hljs-number">167</span>,<span class="hljs-number">173</span>,<span class="hljs-number">179</span>,<span class="hljs-number">181</span>,<span class="hljs-number">191</span>,<span class="hljs-number">193</span>,<span class="hljs-number">197</span>,<span class="hljs-number">199</span>,<span class="hljs-number">211</span>,<span class="hljs-number">223</span>,<span class="hljs-number">227</span>,<span class="hljs-number">229</span>,<span class="hljs-number">233</span>,<span class="hljs-number">239</span>,<span class="hljs-number">241</span>,<span class="hljs-number">251</span>,<span class="hljs-number">257</span>,<span class="hljs-number">263</span>,<span class="hljs-number">269</span>,<span class="hljs-number">271</span>,<span class="hljs-number">277</span>,<span class="hljs-number">281</span>,<span class="hljs-number">283</span>,<span class="hljs-number">293</span>,<span class="hljs-number">307</span>,<span class="hljs-number">311</span>,<span class="hljs-number">313</span>,<span class="hljs-number">317</span>,<span class="hljs-number">331</span>,<span class="hljs-number">337</span>,<span class="hljs-number">347</span>,<span class="hljs-number">349</span>,<span class="hljs-number">353</span>,<span class="hljs-number">359</span>,<span class="hljs-number">367</span>,<span class="hljs-number">373</span>,<span class="hljs-number">379</span>,<span class="hljs-number">383</span>,<span class="hljs-number">389</span>,<span class="hljs-number">397</span>,<span class="hljs-number">401</span>,<span class="hljs-number">409</span>,<span class="hljs-number">419</span>,<span class="hljs-number">421</span>,<span class="hljs-number">431</span>,<span class="hljs-number">433</span>,<span class="hljs-number">439</span>,<span class="hljs-number">443</span>,<span class="hljs-number">449</span>,<span class="hljs-number">457</span>,<span class="hljs-number">461</span>,<span class="hljs-number">463</span>,<span class="hljs-number">467</span>,<span class="hljs-number">479</span>,<span class="hljs-number">487</span>,<span class="hljs-number">491</span>,<span class="hljs-number">499</span>,<span class="hljs-number">503</span>,<span class="hljs-number">509</span>,<span class="hljs-number">521</span>,<span class="hljs-number">523</span>,<span class="hljs-number">541</span>,<span class="hljs-number">547</span>,<span class="hljs-number">557</span>,<span class="hljs-number">563</span>,<span class="hljs-number">569</span>,<span class="hljs-number">571</span>,<span class="hljs-number">577</span>,<span class="hljs-number">587</span>,<span class="hljs-number">593</span>,<span class="hljs-number">599</span>,<span class="hljs-number">601</span>,<span class="hljs-number">607</span>,<span class="hljs-number">613</span>,<span class="hljs-number">617</span>,<span class="hljs-number">619</span>,<span class="hljs-number">631</span>,<span class="hljs-number">641</span>,<span class="hljs-number">643</span>,<span class="hljs-number">647</span>,<span class="hljs-number">653</span>,<span class="hljs-number">659</span>,<span class="hljs-number">661</span>,<span class="hljs-number">673</span>,<span class="hljs-number">677</span>,<span class="hljs-number">683</span>,<span class="hljs-number">691</span>,<span class="hljs-number">701</span>,<span class="hljs-number">709</span>,<span class="hljs-number">719</span>,<span class="hljs-number">727</span>,<span class="hljs-number">733</span>,<span class="hljs-number">739</span>,<span class="hljs-number">743</span>,<span class="hljs-number">751</span>,<span class="hljs-number">757</span>,<span class="hljs-number">761</span>,<span class="hljs-number">769</span>,<span class="hljs-number">773</span>,<span class="hljs-number">787</span>,<span class="hljs-number">797</span>,<span class="hljs-number">809</span>,<span class="hljs-number">811</span>,<span class="hljs-number">821</span>,<span class="hljs-number">823</span>,<span class="hljs-number">827</span>,<span class="hljs-number">829</span>,<span class="hljs-number">839</span>,<span class="hljs-number">853</span>,<span class="hljs-number">857</span>,<span class="hljs-number">859</span>,<span class="hljs-number">863</span>,<span class="hljs-number">877</span>,<span class="hljs-number">881</span>,<span class="hljs-number">883</span>,<span class="hljs-number">887</span>,<span class="hljs-number">907</span>,<span class="hljs-number">911</span>,<span class="hljs-number">919</span>,<span class="hljs-number">929</span>,<span class="hljs-number">937</span>,<span class="hljs-number">941</span>,<span class="hljs-number">947</span>,<span class="hljs-number">953</span>,<span class="hljs-number">967</span>,<span class="hljs-number">971</span>,<span class="hljs-number">977</span>,<span class="hljs-number">983</span>,<span class="hljs-number">991</span>,<span class="hljs-number">997</span>,<span class="hljs-number">1009</span>]<br>dic=&#123;&#125;<br>le = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>li = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>resi = le <span class="hljs-comment"># i&lt;j</span><br>resj = le<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(le):<br>  a = li[i]  <span class="hljs-comment"># a 为列表第i+1个元素</span><br>  <span class="hljs-keyword">if</span> a == <span class="hljs-number">1</span> : <span class="hljs-comment"># 当第i+1个元素为1时  则输入首位和当前值的位置</span><br>    resi = <span class="hljs-number">1</span><br>    resj = i + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">break</span><br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">if</span> dic.get(a) == <span class="hljs-literal">None</span>: <span class="hljs-comment"># 遍历dict 如果dict里面没有存放此元素则存入位置</span><br>      dic[a] = i + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>: <span class="hljs-comment"># 如果存在此元素则比较其位置和此时位置的大小 此时位置在后面则替换位置</span><br>      <span class="hljs-keyword">if</span> resi &gt; dic[a]:<br>        resi = dic[a]<br>        resj = i + <span class="hljs-number">1</span><span class="hljs-comment"># 将此位置用resj存储</span><br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> prime:<span class="hljs-comment"># 遍历质数表 进行求质因数过程</span><br>    <span class="hljs-keyword">if</span> a &lt; j: <span class="hljs-comment"># 如果当前质数表对象比输入对象大则终止</span><br>      <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span>(a % j == <span class="hljs-number">0</span>): <span class="hljs-comment"># 找到质因数 要除尽此质因数在继续</span><br>      <span class="hljs-keyword">while</span> a % j == <span class="hljs-number">0</span>:<br>        a = a / j<br>      <span class="hljs-keyword">if</span> dic.get(j) == <span class="hljs-literal">None</span>: <span class="hljs-comment"># 同前面一样判断dict里面</span><br>        dic[j] = i + <span class="hljs-number">1</span><br>      <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> resi &gt; dic[j]:<br>          resi = dic[j]<br>          resj = i + <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(resi,resj)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python">N = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span> + <span class="hljs-number">5</span>)<br>index = &#123;&#125;  <span class="hljs-comment"># prime : first index</span><br>a = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><span class="hljs-built_in">len</span> = <span class="hljs-number">0</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">devidePrime</span>(<span class="hljs-params">x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">global</span> index, a, <span class="hljs-built_in">len</span><br>    pos = <span class="hljs-built_in">len</span> + <span class="hljs-number">1</span><br>    n = a[x]<br>    i = <span class="hljs-number">2</span><br>    <span class="hljs-keyword">while</span> (i * i &lt;= n):<br>        <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>):<br>            <span class="hljs-keyword">while</span> (n % i == <span class="hljs-number">0</span>):<br>                n //= i<br>            <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> index.keys()):<br>                <span class="hljs-keyword">if</span> index[i] &lt; pos:<br>                    pos = index[i]<br>            <span class="hljs-keyword">else</span>:<br>                index[i] = x<br>        i += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> (n):<br>        <span class="hljs-keyword">if</span> (n <span class="hljs-keyword">in</span> index.keys()):<br>            <span class="hljs-keyword">if</span> index[n] &lt; pos:<br>                pos = index[n]<br>        <span class="hljs-keyword">else</span>:<br>            index[n] = x<br>    <span class="hljs-keyword">if</span> pos == <span class="hljs-built_in">len</span> + <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> pos<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">solve</span>():<br>    <span class="hljs-keyword">global</span> a, <span class="hljs-built_in">len</span><br>    <span class="hljs-built_in">len</span> = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    a = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split(<span class="hljs-string">&quot; &quot;</span>)]<br>    ansi, ansj = <span class="hljs-built_in">len</span>+<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>+<span class="hljs-number">1</span>):<br>        i = devidePrime(j)<br>        <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">and</span> (i &lt; ansi)):<br>            ansi = i<br>            ansj = j<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(ansi) + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">str</span>(ansj))<br><br><br>solve()<br></code></pre></td></tr></table></figure><h2 id="2-异或和之差-蓝桥云课-lanqiao-cn"><a href="#2-异或和之差-蓝桥云课-lanqiao-cn" class="headerlink" title="2.异或和之差 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3524/learning/?page=1&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B&name=%E5%BC%82%E6%88%96">2.异或和之差 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-8"><a href="#问题描述-8" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个含有 $n$ 个元素的数组 $A_i$，你可以选择两个不相交的子段。求出这两个子段内的数的异或和的差值的最大值。</p><h3 id="输入格式-6"><a href="#输入格式-6" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个整数 $n$。</p><p>第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔。</p><h3 id="输出格式-6"><a href="#输出格式-6" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-6"><a href="#样例输入-6" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">6</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">9</span> <span class="hljs-number">2</span> <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-6"><a href="#样例输出-6" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">14<br></code></pre></td></tr></table></figure><h3 id="样例说明-3"><a href="#样例说明-3" class="headerlink" title="样例说明"></a>样例说明</h3><p>两个子段可以分别选 $1$ 和 $4,9,2$，差值为 $15-1&#x3D;14$。</p><h3 id="评测用例规模与约定-6"><a href="#评测用例规模与约定-6" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40%$ 的评测用例，$n \leq 5000$；</p><p>对于所有评测用例，$2 \leq n \leq 2 \times 10^5$，$0 \leq A_i \leq 2^{20}$。</p><h3 id="运行限制-8"><a href="#运行限制-8" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>10s</td><td>256M</td></tr><tr><td>PyPy3</td><td>10s</td><td>256M</td></tr><tr><td>Go</td><td>10s</td><td>256M</td></tr><tr><td>JavaScript</td><td>10s</td><td>256M</td></tr></tbody></table><h3 id="参考答案-8"><a href="#参考答案-8" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs python">ii = <span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <br>si = <span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">input</span>().split()<br>mi = <span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, si())<br>li = <span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">list</span>(mi())<br><br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br>n = ii()<br>a = li()<br>b_length = <span class="hljs-built_in">max</span>(a).bit_length()+<span class="hljs-number">1</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TrieNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.children = [<span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">int</span></span>):<br>        node = self<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(b_length, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>            bit = (num &gt;&gt; i) &amp; <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node.children[bit]:<br>                node.children[bit] = TrieNode()<br>            node = node.children[bit]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query_max</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        node = self<br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(b_length, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>            bit = (num &gt;&gt; i) &amp; <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> node.children[<span class="hljs-number">1</span> - bit]:<br>                res += (<span class="hljs-number">1</span> &lt;&lt; i)<br>                node = node.children[<span class="hljs-number">1</span> - bit]<br>            <span class="hljs-keyword">else</span>:<br>                node = node.children[bit]<br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query_min</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        node = self<br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(b_length, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>            bit = (num &gt;&gt; i) &amp; <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> node.children[bit]:<br>                node = node.children[bit]<br>            <span class="hljs-keyword">else</span>:<br>                res += (<span class="hljs-number">1</span> &lt;&lt; i)<br>                node = node.children[<span class="hljs-number">1</span> - bit]<br>        <span class="hljs-keyword">return</span> res<br><br>lmax = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>)<br>lmin = [inf] * (n + <span class="hljs-number">2</span>)<br>rmax = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>)<br>rmin = [inf] * (n + <span class="hljs-number">2</span>)<br><br>ltrie = TrieNode()<br>ltrie.insert(<span class="hljs-number">0</span>)<br>ls = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    ls[i] = ls[i - <span class="hljs-number">1</span>] ^ a[i - <span class="hljs-number">1</span>]<br>    lmax[i] = <span class="hljs-built_in">max</span>(lmax[i - <span class="hljs-number">1</span>], ltrie.query_max(ls[i]))<br>    lmin[i] = <span class="hljs-built_in">min</span>(lmin[i - <span class="hljs-number">1</span>], ltrie.query_min(ls[i]))<br>    ltrie.insert(ls[i])<br><br>rtrie = TrieNode()<br>rtrie.insert(<span class="hljs-number">0</span>)<br>rs = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    rs[i] = rs[i + <span class="hljs-number">1</span>] ^ a[i - <span class="hljs-number">1</span>]<br>    rmax[i] = <span class="hljs-built_in">max</span>(rmax[i + <span class="hljs-number">1</span>], rtrie.query_max(rs[i]))<br>    rmin[i] = <span class="hljs-built_in">min</span>(rmin[i + <span class="hljs-number">1</span>], rtrie.query_min(rs[i]))<br>    rtrie.insert(rs[i])<br><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>    ans = <span class="hljs-built_in">max</span>(ans, <span class="hljs-built_in">max</span>(lmax[i] - rmin[i + <span class="hljs-number">1</span>], rmax[i + <span class="hljs-number">1</span>] - lmin[i]))<br><br><span class="hljs-built_in">print</span>(ans)<br><br></code></pre></td></tr></table></figure><p>​01字典树+前缀异或和+后缀异或和 具体实现时：以某一个数字为分界线，分别计算以其为结尾以及以其为起点的最大&#x2F;最小前缀异或和以及最大&#x2F;最小后缀异或和，共四个数组，最后答案就是针对各分界点的左侧最大-右侧最小以及右侧最大-左侧最小之间的最大值 ps：pypy提交能过，但python会超时</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>N, cnt = <span class="hljs-built_in">int</span>(<span class="hljs-number">2e5</span>+<span class="hljs-number">10</span>), <span class="hljs-number">0</span><br>trie = [[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span> * N)]  <span class="hljs-comment"># 建立01字典树</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">global</span> cnt<br>    p = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        y = (x &gt;&gt; i) &amp; <span class="hljs-number">1</span>  <span class="hljs-comment"># 计算二进制形式的x在当前位上是0还是1</span><br>        <span class="hljs-comment"># 任何数与1做与操作，奇数得1，偶数得0</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> trie[p][y]:  <span class="hljs-comment"># 如果当前结点未建立</span><br>            cnt += <span class="hljs-number">1</span><br>            trie[p][y] = cnt<br>        p = trie[p][y]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_max</span>(<span class="hljs-params">x</span>):<br>    p = res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        y = (x &gt;&gt; i) &amp; <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> trie[p][<span class="hljs-keyword">not</span> y]:<br>            res += <span class="hljs-number">2</span> ** i<br>            p = trie[p][<span class="hljs-keyword">not</span> y]<br>        <span class="hljs-keyword">else</span>:<br>            p = trie[p][y]<br>    <span class="hljs-keyword">return</span> res<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_min</span>(<span class="hljs-params">x</span>):<br>    p = res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        y = (x &gt;&gt; i) &amp; <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> trie[p][y]:<br>            p = trie[p][y]<br>        <span class="hljs-keyword">else</span>:<br>            p = trie[p][<span class="hljs-keyword">not</span> y]<br>            res += <span class="hljs-number">2</span> ** i<br>    <span class="hljs-keyword">return</span> res<br><br><br>rmx, rmn = [<span class="hljs-number">0</span>] * N, [<span class="hljs-number">0</span>] * N  <span class="hljs-comment"># 前缀异或和最大值，最小值</span><br>rmn[<span class="hljs-number">0</span>] = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>sumv = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):  <span class="hljs-comment"># j作为枚举量枚举左边界</span><br>    insert(sumv)<br>    sumv ^= nums[j]<br>    rmx[j] = <span class="hljs-built_in">max</span>(rmx[j - <span class="hljs-number">1</span>], query_max(sumv))<br>    rmn[j] = <span class="hljs-built_in">min</span>(rmn[j - <span class="hljs-number">1</span>], query_min(sumv))<br><br>trie = [[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span> * N)]<br>cnt = <span class="hljs-number">0</span><br>lmx, lmn = [<span class="hljs-number">0</span>] * N, [<span class="hljs-number">0</span>] * N<br>lmn[n + <span class="hljs-number">1</span>] = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>sumv = <span class="hljs-number">0</span>  <span class="hljs-comment"># j作为枚举量枚举右边界</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>    insert(sumv)<br>    sumv ^= nums[j]<br>    lmx[j] = <span class="hljs-built_in">max</span>(lmx[j + <span class="hljs-number">1</span>], query_max(sumv))<br>    lmn[j] = <span class="hljs-built_in">min</span>(query_min(sumv), lmn[j + <span class="hljs-number">1</span>])<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>    ans = <span class="hljs-built_in">max</span>(ans, lmx[i] - rmn[i + <span class="hljs-number">1</span>], rmx[i] - lmn[i + <span class="hljs-number">1</span>])<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="1-太阳-蓝桥云课-lanqiao-cn"><a href="#1-太阳-蓝桥云课-lanqiao-cn" class="headerlink" title="1.太阳 - 蓝桥云课 (lanqiao.cn)"></a><a href="https://www.lanqiao.cn/problems/3529/learning/?page=1&first_category_id=1&second_category_id=3&tags=2023,%E7%9C%81%E8%B5%9B&name=%E5%A4%AA%E9%98%B3">1.太阳 - 蓝桥云课 (lanqiao.cn)</a></h2><h3 id="问题描述-9"><a href="#问题描述-9" class="headerlink" title="问题描述"></a>问题描述</h3><p>这天，小蓝在二维坐标系的点 $(X, Y)$ 上放了一个太阳，看做点光源。他拿来了 $n$ 条线段，将它们平行于 $x$ 轴放置在了坐标系中，第 $i$ 条线段的左端点在 $(x_i, y_i)$，长度为 $l_i$。线段之间不会有重合或部分重合的情况（但可能出现端点相交）。小蓝想知道有多少条线段能被太阳照亮（一条线段有长度大于 $0$ 的部分被照亮就算）。</p><h3 id="输入格式-7"><a href="#输入格式-7" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含三个正整数 $n$, $X$, $Y$，相邻整数之间使用一个空格分隔。</p><p>接下来 $n$ 行，第 $i$ 行包含三个整数 $x_i$, $y_i$, $l_i$，相邻整数之间使用一个空格分隔。</p><h3 id="输出格式-7"><a href="#输出格式-7" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个正整数表示答案。</p><h3 id="样例输入-7"><a href="#样例输入-7" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2000000<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>5 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>6 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-7"><a href="#样例输出-7" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">2<br></code></pre></td></tr></table></figure><h3 id="样例说明-4"><a href="#样例说明-4" class="headerlink" title="样例说明"></a>样例说明</h3><p>第一条线段在最上面被照亮，第二条线段被第一条完全挡住，第三条线段左边的一段能被照亮。</p><h3 id="评测用例规模与约定-7"><a href="#评测用例规模与约定-7" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30$% 的评测用例，$n \leq 1000$；</p><p>对于所有评测用例，$1 \leq n \leq 100000$，$0 \leq x_i, X \leq 10^7$，$0 &lt; y_i \leq 10^5$，$0 &lt; l_i \leq 100$，$10^6 &lt; Y \leq 10^7$。</p><h3 id="运行限制-9"><a href="#运行限制-9" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>2s</td><td>256M</td></tr><tr><td>C</td><td>2s</td><td>256M</td></tr><tr><td>Java</td><td>3s</td><td>256M</td></tr><tr><td>Python3</td><td>4s</td><td>256M</td></tr><tr><td>PyPy3</td><td>4s</td><td>256M</td></tr><tr><td>Go</td><td>4s</td><td>256M</td></tr><tr><td>JavaScript</td><td>4s</td><td>256M</td></tr></tbody></table><p>总通过次数: 170  |  总提交次数: 421  |  通过率: 40.4%</p><p>难度: 中等   标签: 2023, 思维, 省赛, 计算几何</p><h3 id="参考答案-9"><a href="#参考答案-9" class="headerlink" title="参考答案"></a>参考答案</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py">n, X, Y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Seg</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y, i</span>):<br>        self.x = x<br>        self.y = y<br>        self.i = i<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):<br>        a = <span class="hljs-number">1</span> * other.y * self.x<br>        b = <span class="hljs-number">1</span> * self.y * other.x<br>        <span class="hljs-keyword">return</span> a &lt; b<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> * other.y * self.x == <span class="hljs-number">1</span> * self.y * other.x<br><br>vec = []<br>vis = [<span class="hljs-literal">False</span>] * (n + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    x, y, l = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    vec.append(Seg(x - X, Y - y, i))<br>    vec.append(Seg(x + l - X, Y - y, -i))<br><br>vec.sort()<br><br>st = <span class="hljs-built_in">set</span>()<br>pre = Seg(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> vec:<br>    <span class="hljs-keyword">if</span> t != pre:<br>        <span class="hljs-keyword">if</span> st:<br>            vis[<span class="hljs-built_in">min</span>(st)[<span class="hljs-number">1</span>]] = <span class="hljs-literal">True</span><br>        pre = t<br>    <span class="hljs-keyword">if</span> t.i &gt; <span class="hljs-number">0</span>:<br>        st.add((t.y, t.i))<br>    <span class="hljs-keyword">else</span>:<br>        st.remove((t.y, -t.i))<br><br>ans = <span class="hljs-built_in">sum</span>(vis)<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法学习笔记</title>
    <link href="/2024/03/31/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/03/31/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h1><p>前缀和是：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sum</span>[i]=a[<span class="hljs-number">0</span>]+a[<span class="hljs-number">1</span>]+……+a[i]<br></code></pre></td></tr></table></figure><h2 id="前缀和的性质"><a href="#前缀和的性质" class="headerlink" title="前缀和的性质"></a>前缀和的性质</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#第一条性质用于处理前缀和</span><br><span class="hljs-built_in">sum</span>[i]=<span class="hljs-built_in">sum</span>[i-<span class="hljs-number">1</span>]+a[i]<br><span class="hljs-comment">#第二条性质可以在O（1）的时间内求出区间和</span><br>a[l]+……+a[r]=<span class="hljs-built_in">sum</span>[r]-<span class="hljs-built_in">sum</span>[l-<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><p>前缀和的目的就是快速求出区间之和</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sum</span>(<span class="hljs-params"><span class="hljs-built_in">sum</span>,l,r</span>):<br>    <span class="hljs-keyword">if</span> l==<span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>[r]<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>[r]-<span class="hljs-built_in">sum</span>[l-<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ASP.NET登录页面验证码实现</title>
    <link href="/2024/03/30/ASP-NET%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E9%AA%8C%E8%AF%81%E7%A0%81%E5%AE%9E%E7%8E%B0/"/>
    <url>/2024/03/30/ASP-NET%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E9%AA%8C%E8%AF%81%E7%A0%81%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ASP-NET登录页面验证码实现"><a href="#ASP-NET登录页面验证码实现" class="headerlink" title="ASP.NET登录页面验证码实现"></a>ASP.NET登录页面验证码实现</h1><h2 id="验证码应该满足的条件："><a href="#验证码应该满足的条件：" class="headerlink" title="验证码应该满足的条件："></a>验证码应该满足的条件：</h2><ul><li><p>（1）验证码应该是图片格式，不能是文字格式，即无法用鼠标选中。</p></li><li><p>（2）验证码上应该有噪点和干扰线条。</p></li><li><p>（3）验证码应该回避相似字符，如“0”和“o”“I”和“1”等。</p></li><li><p>（4）验证码至少是数字和字母（含大小写）的组合，不应该是单纯的数字或字母，可以出现汉字。应该实现输入验证码字母字母“不区分大小写”。验证码中的内容，应该是随机生成。</p></li><li><p>（5）验证码，可以通过点击图片或旁边文字实现“看不清，换一张”的功能。</p></li><li><p>（6）应当有个用于核对验证码输入是否正确的tbx和btn，当点击btn时，弹窗提示验证码输入的是正确或错误。</p></li></ul><h2 id="制作效果："><a href="#制作效果：" class="headerlink" title="制作效果："></a>制作效果：</h2><h2 id="代码实现："><a href="#代码实现：" class="headerlink" title="代码实现："></a>代码实现：</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;BookShopWeb.ConnectionStr&quot;</span>            <span class="hljs-attr">connectionString</span>=<span class="hljs-string">&quot;Server=localhost;Database=mybookshop;Uid=root;Pwd=123456;charset=utf8;pooling=true;&quot;</span></span><br><span class="hljs-tag">           <span class="hljs-attr">providerName</span>=<span class="hljs-string">&quot;System.Data.SqlClient&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/./../images/ASP-NET%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E9%AA%8C%E8%AF%81%E7%A0%81%E5%AE%9E%E7%8E%B0/image-20240424013055784.png" alt="image-20240424013055784"></p>]]></content>
    
    
    <categories>
      
      <category>ASP.NET框架学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ASP.NET</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>力扣59. 螺旋矩阵 II</title>
    <link href="/2024/03/30/%E5%8A%9B%E6%89%A359-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5-II/"/>
    <url>/2024/03/30/%E5%8A%9B%E6%89%A359-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5-II/</url>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.cn/problems/spiral-matrix-ii/">59. 螺旋矩阵 II</a></p><h2 id="题目要求"><a href="#题目要求" class="headerlink" title="题目要求"></a>题目要求</h2><p>给你一个正整数 <code>n</code> ，生成一个包含 <code>1</code> 到 <code>n2</code> 所有元素，且元素按顺时针顺序螺旋排列的 <code>n x n</code> 正方形矩阵 <code>matrix</code> 。</p><p><strong>示例 1：</strong></p><p><img src="/./../imgs/%E5%8A%9B%E6%89%A359-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5-II/spiraln.jpg" alt="img"></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">输入：n = <span class="hljs-number">3</span><br>输出：<span class="hljs-string">[[1,2,3],[8,9,4],[7,6,5]]</span><br></code></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">输入：n = <span class="hljs-number">1</span><br>输出：<span class="hljs-string">[[1]]</span><br></code></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= n &lt;= 20</code></li></ul><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>借鉴了<a href="https://leetcode.cn/u/rocky0429-2/">编程文青李狗蛋</a>的题解思路</p><p>这是文章入口：<a href="https://leetcode.cn/problems/spiral-matrix-ii/solutions/1181844/acm-xuan-shou-tu-jie-leetcode-luo-xuan-j-4ow1">ACM 选手图解 LeetCode 螺旋矩阵Ⅱ | 编程文青李狗蛋</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">res = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>left,right,up,down=<span class="hljs-number">0</span>,n-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,n-<span class="hljs-number">1</span><br>cnt=<span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> cnt &lt;=n**<span class="hljs-number">2</span>:<br>    <span class="hljs-comment">#从左到右</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(left,right+<span class="hljs-number">1</span>):<br>        res[up][i]=cnt<br>        cnt+=<span class="hljs-number">1</span><br>    up+=<span class="hljs-number">1</span><br>    <span class="hljs-comment">#从上到下</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(up,down+<span class="hljs-number">1</span>):<br>        res[i][right]=cnt<br>        cnt+=<span class="hljs-number">1</span><br>    right-=<span class="hljs-number">1</span><br>    <span class="hljs-comment">#从右到左</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(right,left-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>        res[down][i]=cnt<br>        cnt+=<span class="hljs-number">1</span><br>    down-=<span class="hljs-number">1</span><br>    <span class="hljs-comment">#从下到上</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(down,up-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>        res[i][left]=cnt<br>        cnt+=<span class="hljs-number">1</span><br>    left+=<span class="hljs-number">1</span><br><span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
      <tag>力扣</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>力扣704. 二分查找</title>
    <link href="/2024/03/30/%E5%8A%9B%E6%89%A3704-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"/>
    <url>/2024/03/30/%E5%8A%9B%E6%89%A3704-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.cn/problems/binary-search/description/">704. 二分查找 - 力扣（LeetCode）</a></p><h2 id="题目要求"><a href="#题目要求" class="headerlink" title="题目要求"></a>题目要求</h2><p>给定一个 <code>n</code> 个元素有序的（升序）整型数组 <code>nums</code> 和一个目标值 <code>target</code> ，写一个函数搜索 <code>nums</code> 中的 <code>target</code>，如果目标值存在返回下标，否则返回 <code>-1</code>。</p><p><strong>示例 1:</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">输入: nums = [-1,0,3,5,9,12], target = 9</span><br><span class="hljs-section">输出: 4</span><br><span class="hljs-section">解释: 9 出现在 nums 中并且下标为 4</span><br></code></pre></td></tr></table></figure><p><strong>示例 2:</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">输入: nums = [-1,0,3,5,9,12], target = 2</span><br><span class="hljs-section">输出: -1</span><br><span class="hljs-section">解释: 2 不存在 nums 中因此返回 -1</span><br></code></pre></td></tr></table></figure><p><strong>提示：</strong></p><ol><li>你可以假设 <code>nums</code> 中的所有元素是不重复的。</li><li><code>n</code> 将在 <code>[1, 10000]</code>之间。</li><li><code>nums</code> 的每个元素都将在 <code>[-9999, 9999]</code>之间。</li></ol><h2 id="解题代码"><a href="#解题代码" class="headerlink" title="解题代码"></a>解题代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        left=<span class="hljs-number">0</span><br>        right=<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> left&lt;=right:<br>            middle =<span class="hljs-built_in">int</span>(left+((right-left)/<span class="hljs-number">2</span>))<br>            <span class="hljs-keyword">if</span> nums[middle] &gt; target:<br>                right =middle -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> nums[middle] &lt; target:<br>                left=middle+<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> middle<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
      <tag>力扣</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>二分法的两种写法</title>
    <link href="/2024/03/30/%E4%BA%8C%E5%88%86%E6%B3%95%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95/"/>
    <url>/2024/03/30/%E4%BA%8C%E5%88%86%E6%B3%95%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="二分法的使用场景："><a href="#二分法的使用场景：" class="headerlink" title="二分法的使用场景："></a>二分法的使用场景：</h2><p>前提：有序数组，也就是需要排序，且数组中没有重复元素<br>区间的定义：<br>    左闭右闭[left,right]<br>    左闭右开[left,right]<br>针对上面两种区间，以下是两种二分的写法实现</p><h2 id="二分法的第一种写法"><a href="#二分法的第一种写法" class="headerlink" title="二分法的第一种写法"></a>二分法的第一种写法</h2><p>定义target在一个左闭右闭[left,right]区间中<br>满足：<br>    while(left&lt;&#x3D;right)<br>    if(nums[middle]&gt;target)  right要赋值为middle-1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 定义 Solution 类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">self, nums, target</span>):<br>        left = <span class="hljs-number">0</span><br>        right = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> left &lt;= right:<br>            middle = left + (right - left) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> nums[middle] &gt; target:<br>                right = middle - <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> nums[middle] &lt; target:<br>                left = middle + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> middle<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br><span class="hljs-comment"># 创建 Solution 实例</span><br>solution = Solution()<br><br><span class="hljs-comment"># 调用 search 方法进行二分查找</span><br>a = [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]<br>target = <span class="hljs-number">0</span><br>result = solution.search(a, target)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;目标值在列表中的索引为:&quot;</span>, result)<br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">search</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> target)</span> </span>&#123;<br>        <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> right = nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; <span class="hljs-comment">// 定义target在左闭右闭的区间里，[left, right]</span><br>        <span class="hljs-keyword">while</span> (left &lt;= right) &#123; <span class="hljs-comment">// 当left==right，区间[left, right]依然有效，所以用 &lt;=</span><br>            <span class="hljs-type">int</span> middle = left + ((right - left) / <span class="hljs-number">2</span>);<span class="hljs-comment">// 防止溢出 等同于(left + right)/2</span><br>            <span class="hljs-keyword">if</span> (nums[middle] &gt; target) &#123;<br>                right = middle - <span class="hljs-number">1</span>; <span class="hljs-comment">// target 在左区间，所以[left, middle - 1]</span><br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[middle] &lt; target) &#123;<br>                left = middle + <span class="hljs-number">1</span>; <span class="hljs-comment">// target 在右区间，所以[middle + 1, right]</span><br>            &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// nums[middle] == target</span><br>                <span class="hljs-keyword">return</span> middle; <span class="hljs-comment">// 数组中找到目标值，直接返回下标</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// 未找到目标值</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>        <span class="hljs-comment">// 避免当 target 小于nums[0] nums[nums.length - 1]时多次循环运算</span><br>        <span class="hljs-keyword">if</span> (target &lt; nums[<span class="hljs-number">0</span>] || target &gt; nums[nums.length - <span class="hljs-number">1</span>]) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, right = nums.length - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (left &lt;= right) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span> (nums[mid] == target)<br>                <span class="hljs-keyword">return</span> mid;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[mid] &lt; target)<br>                left = mid + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[mid] &gt; target)<br>                right = mid - <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="二分法的第二种写法"><a href="#二分法的第二种写法" class="headerlink" title="二分法的第二种写法"></a>二分法的第二种写法</h2><p>定义target在一个左闭右开[left,right]区间中<br>满足：<br>    while(left&lt;right)<br>    if(nums[middle]&gt;target)  right要赋值为middle</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 定义 Solution 类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">self, nums, target</span>):<br>        left = <span class="hljs-number">0</span><br>        right = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> left &lt; right:<br>            middle = left + (right - left) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> nums[middle] &gt; target:<br>                right = middle<br>            <span class="hljs-keyword">elif</span> nums[middle] &lt; target:<br>                left = middle + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> middle<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br><span class="hljs-comment"># 创建 Solution 实例</span><br>solution = Solution()<br><br><span class="hljs-comment"># 调用 search 方法进行二分查找</span><br>a = [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]<br>target = <span class="hljs-number">0</span><br>result = solution.search(a, target)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;目标值在列表中的索引为:&quot;</span>, result)<br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">search</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> target)</span> </span>&#123;<br>        <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> right = nums.<span class="hljs-built_in">size</span>(); <span class="hljs-comment">// 定义target在左闭右开的区间里，即：[left, right)</span><br>        <span class="hljs-keyword">while</span> (left &lt; right) &#123; <span class="hljs-comment">// 因为left == right的时候，在[left, right)是无效的空间，所以使用 &lt;</span><br>            <span class="hljs-type">int</span> middle = left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span> (nums[middle] &gt; target) &#123;<br>                right = middle; <span class="hljs-comment">// target 在左区间，在[left, middle)中</span><br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[middle] &lt; target) &#123;<br>                left = middle + <span class="hljs-number">1</span>; <span class="hljs-comment">// target 在右区间，在[middle + 1, right)中</span><br>            &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// nums[middle] == target</span><br>                <span class="hljs-keyword">return</span> middle; <span class="hljs-comment">// 数组中找到目标值，直接返回下标</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// 未找到目标值</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, right = nums.length;<br>        <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span> (nums[mid] == target)<br>                <span class="hljs-keyword">return</span> mid;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[mid] &lt; target)<br>                left = mid + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[mid] &gt; target)<br>                right = mid;<br>        &#125;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>二分查找跟遍历查找的区别</title>
    <link href="/2024/03/25/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E8%B7%9F%E9%81%8D%E5%8E%86%E6%9F%A5%E6%89%BE%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2024/03/25/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E8%B7%9F%E9%81%8D%E5%8E%86%E6%9F%A5%E6%89%BE%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h2 id="一、什么是二分查找与遍历查找"><a href="#一、什么是二分查找与遍历查找" class="headerlink" title="一、什么是二分查找与遍历查找"></a>一、什么是<a href="https://so.csdn.net/so/search?q=%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE&spm=1001.2101.3001.7020">二分查找</a>与遍历查找</h2><h3 id="1、二分查找"><a href="#1、二分查找" class="headerlink" title="1、二分查找"></a>1、二分查找</h3><p>当我们谈论二分查找时，实际上是在谈论一种<a href="https://so.csdn.net/so/search?q=%E9%AB%98%E6%95%88%E7%9A%84&spm=1001.2101.3001.7020">高效的</a>搜索算法，特别适用于有序排列的数据。二分查找的核心思想是将查找区间每次减半，从而快速定位目标值。</p><p>想象一下你在一个电话簿中查找某人的电话号码。而电话簿是按照姓氏字母顺序排列的。通常，你不会从第一页开始翻起，而是会打开电话簿的中间位置，根据你寻找的人名的字母顺序来决定接下来去左边还是右边的页面。这样每一次翻页都可以把你寻找的范围缩小一半，直到你找到目标为止。这就是二分查找的思路。</p><p>现在，让我们用一个有趣的例子来进一步理解二分查找。</p><p>假设你是一名特工，你被派遣到一个庞大的迷宫中去寻找宝藏。这个迷宫是按照字母顺序排列的，并且每个房间门上都标有字母。你手上有一张地图，上面标有目标宝藏的位置，而且地图上也按照字母顺序标有每个房间的位置。你不知道整个迷宫的结构，但你可以根据地图上的信息来进行搜索。</p><p>为了查找宝藏，你可以这样做：</p><ol><li>先进入迷宫的中间房间，看看地图上宝藏的位置在左边还是右边。</li><li>如果在左边，那么你就可以放弃右边的所有房间，只需把搜索范围缩小到左边的一半。</li><li>接着，你再进入左半部分的中间房间，然后根据地图继续缩小搜索范围。</li><li>重复这个过程，每次都缩小一半的搜索范围，直到你找到宝藏所在的房间。</li></ol><p>这个例子很好地展示了二分查找的思路：不断缩小搜索范围，直到找到目标。这种方法非常高效，因为每次搜索都可以将候选范围减半。</p><h3 id="2、遍历查找"><a href="#2、遍历查找" class="headerlink" title="2、遍历查找"></a>2、遍历查找</h3><p>遍历查找是一种简单直观的搜索方法，它的核心思想是逐个检查数据，直到找到目标为止。在遍历查找中，我们从数据集的第一个元素开始，逐个与目标值进行比较，直到找到目标或者搜索整个数据集。</p><p>现在，让我们通过一个有趣的例子来更好地理解遍历查找。假设你是一名探险家，被派遣到一个神秘的迷宫中去寻找失落的宝藏。迷宫中布满了各种陷阱和暗道，而你手上有一份简陋的地图，上面标有宝藏可能的位置。</p><p>为了找到宝藏，你可以这样做：</p><ol><li>你开始在迷宫的入口处，从第一个房间开始，逐个检查每个房间，看是否有线索指向宝藏的可能位置。</li><li>如果你没有在第一个房间找到线索，那么你就继续前进到下一个房间，继续检查。</li><li>你可能需要沿着迷宫的各个路径不断前行，直到找到宝藏或者搜索完整个迷宫。</li></ol><p>在这个例子中，你通过逐个检查每个房间，来尝试找到宝藏的可能位置。这种方法非常直接，但在大型迷宫中效率较低，因为需要逐个检查每个房间。</p><h2 id="二、对比遍历查找和二分查找"><a href="#二、对比遍历查找和二分查找" class="headerlink" title="二、对比遍历查找和二分查找"></a>二、对比遍历查找和二分查找</h2><p>二分查找和遍历查找（也叫线性查找）是两种常用的<a href="https://so.csdn.net/so/search?q=%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95&spm=1001.2101.3001.7020">搜索算法</a>，它们在不同的场景和数据集下各有优劣。下表列出了二分查找和遍历查找的对比：<img src="/./../images/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E8%B7%9F%E9%81%8D%E5%8E%86%E6%9F%A5%E6%89%BE%E7%9A%84%E5%8C%BA%E5%88%AB/a524c3dc083c4d558cd57288069aa60d.png" alt="a524c3dc083c4d558cd57288069aa60d.png"></p><p><img src="/./../images/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E8%B7%9F%E9%81%8D%E5%8E%86%E6%9F%A5%E6%89%BE%E7%9A%84%E5%8C%BA%E5%88%AB/2bf9edea036f4ba0be72f54badc89c1b.png" alt="2bf9edea036f4ba0be72f54badc89c1b.png"></p><h2 id="三、程序示例"><a href="#三、程序示例" class="headerlink" title="三、程序示例"></a>三、程序示例</h2><p>现在我们以一个查找数字的简单程序来理解：</p><h3 id="二分查找："><a href="#二分查找：" class="headerlink" title="二分查找："></a>二分查找：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> arr[] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span> &#125;; <span class="hljs-comment">// 升序的数组</span><br>    <span class="hljs-type">int</span> k = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入需要查找的数：&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;k);<br> <br>    <span class="hljs-comment">// 计算数组的长度</span><br>    <span class="hljs-type">int</span> sz = <span class="hljs-built_in">sizeof</span>(arr) / <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]);<br>    <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>; <span class="hljs-comment">// 左边界</span><br>    <span class="hljs-type">int</span> right = sz - <span class="hljs-number">1</span>; <span class="hljs-comment">// 右边界</span><br> <br>  <span class="hljs-comment">// 开始二分查找</span><br>    <span class="hljs-keyword">while</span> (left &lt;= right)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>; <span class="hljs-comment">// 计算中间位置</span><br>        <span class="hljs-keyword">if</span> (arr[mid] == k)<br>        &#123; <span class="hljs-comment">// 如果中间元素等于k</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;找到了，下标是: %d&quot;</span>, mid); <span class="hljs-comment">// 输出找到的位置</span><br>            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 结束循环</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[mid] &lt; k) <br>        &#123; <span class="hljs-comment">// 如果中间元素小于k，则在右半部分查找</span><br>            left = mid + <span class="hljs-number">1</span>; <span class="hljs-comment">// 更新左边界</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[mid] &gt; k) <br>        &#123; <span class="hljs-comment">// 如果中间元素大于k，则在左半部分查找</span><br>            right = mid - <span class="hljs-number">1</span>; <span class="hljs-comment">// 更新右边界</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (left &gt; right) <br>    &#123; <span class="hljs-comment">// 如果左边界大于右边界，表示未找到</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;找不到\n&quot;</span>); <span class="hljs-comment">// 输出未找到</span><br>    &#125;<br> <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">binary_search</span>(<span class="hljs-params">arr, k</span>):  <br>    left = <span class="hljs-number">0</span>  <br>    right = <span class="hljs-built_in">len</span>(arr) - <span class="hljs-number">1</span>  <br>  <br>    <span class="hljs-keyword">while</span> left &lt;= right:  <br>        mid = (left + right) // <span class="hljs-number">2</span>  <br>        <span class="hljs-keyword">if</span> arr[mid] == k:  <br>            <span class="hljs-keyword">return</span> mid  <br>        <span class="hljs-keyword">elif</span> arr[mid] &lt; k:  <br>            left = mid + <span class="hljs-number">1</span>  <br>        <span class="hljs-keyword">else</span>:  <br>            right = mid - <span class="hljs-number">1</span>  <br>  <br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>  <span class="hljs-comment"># 如果未找到，返回-1作为标识  </span><br>  <br><span class="hljs-comment"># 主程序  </span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:  <br>    arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]  <span class="hljs-comment"># 升序的数组  </span><br>    k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入需要查找的数：&quot;</span>))  <br>  <br>    index = binary_search(arr, k)  <br>    <span class="hljs-keyword">if</span> index != -<span class="hljs-number">1</span>:  <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;找到了，下标是:&quot;</span>, index)  <br>    <span class="hljs-keyword">else</span>:  <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;找不到&quot;</span>)<br></code></pre></td></tr></table></figure><p>假设要找到数字7，查找7的过程如下：<br>首先，我们得到初始的左边界（边界为数组下标） left 为0，右边界 right为9（数组的长度-1）。然后算出中间位置 mid 为4&#x3D;（(0+9)&#x2F;2）。中间位置的元素是5&lt;7，因此我们更新左边界为mid + 1，即left为5,此时查找范围变为{5,9}。<br>接着，我们再次计算中间位置 mid 为7 &#x3D;（(5+9)&#x2F;2），中间位置的元素是8，大于7，因此我们更新右边界为mid - 1，即right为6，此时查找范围变为{5,6}。<br>然后我们再次计算中间位置 mid 为5 &#x3D;（5+6）&#x2F;2，中间位置的元素是6，因此我们更新左边界为mid + 1，即left为6，此时查找范围变为{6,6}。</p><p>我们再次计算中间位置 mid 为6&#x3D;（(6+6)&#x2F;2），中间元素为7，arr[mid]&#x3D;&#x3D;k，我们找到了目标数，结束查找，输出找到的位置。综上，找到了数字7进行了4次查找，每次查找之后，查找范围都会缩小。</p><h3 id="遍历查找："><a href="#遍历查找：" class="headerlink" title="遍历查找："></a>遍历查找：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> arr[] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span> &#125;; <span class="hljs-comment">// 升序的数组</span><br>    <span class="hljs-type">int</span> k = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 从用户处输入要查找的数字</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入要查找的数字：&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;k);<br>    <span class="hljs-type">int</span> sz = <span class="hljs-built_in">sizeof</span>(arr) / <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]); <span class="hljs-comment">// 获取数组长度</span><br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 遍历数组查找目标数</span><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123; <span class="hljs-comment">// 循环遍历数组</span><br>        <span class="hljs-keyword">if</span> (arr[i] == k) &#123; <span class="hljs-comment">// 如果找到目标数</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;找到了, 下标是 %d\n&quot;</span>, i); <span class="hljs-comment">// 输出找到的位置</span><br>            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 结束循环</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// 当数据在数组中遍历找不到</span><br>    <span class="hljs-keyword">if</span> (i == sz) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;找不到\n&quot;</span>); <span class="hljs-comment">// 输出未找到</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 主程序  </span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:  <br>    arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]  <span class="hljs-comment"># 升序的数组  </span><br>    k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入要查找的数字：&quot;</span>))  <br>  <br>    <span class="hljs-comment"># 遍历数组查找目标数  </span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)):  <span class="hljs-comment"># 循环遍历数组  </span><br>        <span class="hljs-keyword">if</span> arr[i] == k:  <span class="hljs-comment"># 如果找到目标数  </span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;找到了, 下标是&quot;</span>, i)  <span class="hljs-comment"># 输出找到的位置  </span><br>            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># 结束循环  </span><br>    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 如果循环正常结束（即未找到目标数）  </span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;找不到&quot;</span>)  <span class="hljs-comment"># 输出未找到</span><br></code></pre></td></tr></table></figure><p>在这个代码中，我们假设要查找的数是7。由于数组是升序排列，7位于数组的第6个位置上。因此，即使在最坏的情况下（目标数位于数组的最后一个位置），我们仍然只需要遍历6次就能找到目标数。</p><h2 id="四、代码优化"><a href="#四、代码优化" class="headerlink" title="四、代码优化"></a>四、代码优化</h2><p>使用了一个无限循环 <code>while(1)</code>。该循环会一直执行，直到输入特定值（这里是 <code>-1</code>）结束程序。</p><p>利用了 <code>while(1)</code> 循环和 <code>break</code> 语句的组合，能够实现多次数据输入和在任意时刻结束程序。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> arr[] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span> &#125;; <span class="hljs-comment">// 升序的数组</span><br>    <span class="hljs-type">int</span> k = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 从用户处输入要查找的数字</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入要查找的数字：&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;k);<br>    <span class="hljs-type">int</span> sz = <span class="hljs-built_in">sizeof</span>(arr) / <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]); <span class="hljs-comment">// 获取数组长度</span><br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 遍历数组查找目标数</span><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123; <span class="hljs-comment">// 循环遍历数组</span><br>        <span class="hljs-keyword">if</span> (arr[i] == k) &#123; <span class="hljs-comment">// 如果找到目标数</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;找到了, 下标是 %d\n&quot;</span>, i); <span class="hljs-comment">// 输出找到的位置</span><br>            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 结束循环</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// 当数据在数组中遍历找不到</span><br>    <span class="hljs-keyword">if</span> (i == sz) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;找不到\n&quot;</span>); <span class="hljs-comment">// 输出未找到</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 主程序  </span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:  <br>    <span class="hljs-comment"># 升序的数组  </span><br>    arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]  <br>    <span class="hljs-comment"># 从用户处输入要查找的数字  </span><br>    k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入要查找的数字：&quot;</span>))  <br>      <br>    <span class="hljs-comment"># 遍历数组查找目标数  </span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)):  <span class="hljs-comment"># 循环遍历数组  </span><br>        <span class="hljs-keyword">if</span> arr[i] == k:  <span class="hljs-comment"># 如果找到目标数  </span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;找到了, 下标是&quot;</span>, i)  <span class="hljs-comment"># 输出找到的位置  </span><br>            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># 结束循环  </span><br>    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 如果循环正常结束（即未找到目标数）  </span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;找不到&quot;</span>)  <span class="hljs-comment"># 输出未找到</span><br></code></pre></td></tr></table></figure><p>原文链接：<a href="http://t.csdnimg.cn/rbeG1">http://t.csdnimg.cn/rbeG1</a></p>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥题目汇总41-52</title>
    <link href="/2024/03/22/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB41-52/"/>
    <url>/2024/03/22/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB41-52/</url>
    
    <content type="html"><![CDATA[<h1 id="出差"><a href="#出差" class="headerlink" title="出差"></a>出差</h1><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>$\mathrm{A}$ 国有 $N$ 个城市, 编号为 $1 \ldots N$ 。小明是编号为 1 的城市中一家公司的员 工, 今天突然接到了上级通知需要去编号为 $N$ 的城市出差。</p><p>由于疫情原因, 很多直达的交通方式暂时关闭, 小明无法乘坐飞机直接从 城市 1 到达城市 $N$, 需要通过其他城市进行陆路交通中转。小明通过交通信息 网, 查询到了 $M$ 条城市之间仍然还开通的路线信息以及每一条路线需要花费的 时间。</p><p>同样由于疫情原因, 小明到达一个城市后需要隔离观察一段时间才能离开 该城市前往其他城市。通过网络, 小明也查询到了各个城市的隔离信息。(由于 小明之前在城市 1 , 因此可以直接离开城市 1 , 不需要隔离）</p><p>由于上级要求, 小明希望能够尽快赶到城市 $\mathrm{N}$, 因此他求助于你, 希望你 能帮他规划一条路线, 能够在最短时间内到达城市 $N$ 。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第 1 行: 两个正整数 $N, M, N$ 表示 A 国的城市数量, $M$ 表示末关闭的路 线数量</p><p>第 2 行: $N$ 个正整数, 第 $i$ 个整数 $C_{i}$ 表示到达编号为 $\mathrm{i}$ 的城市后需要隔离 的时间</p><p>第 $3 \ldots M+2$ 行: 每行 3 个正整数, $u, v, c$, 表示有一条城市 $u$ 到城市 $v$ 的 双向路线仍然开通着, 通过该路线的时间为 $c$</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>第 1 行: 1 个正整数, 表示小明从城市 1 出发到达城市 $N$ 的最短时间（到 达城市 $N$, 不需要计算城市 $N$ 的隔离时间）</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">4 4 <br>5 7 3 4<br>1 2 4 <br>1 3 5<br>2 4 3<br>3 4 5<br></code></pre></td></tr></table></figure><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">13<br></code></pre></td></tr></table></figure><h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><p><img src="/./../images/%E7%BC%96%E7%A8%8B41-%E5%87%BA%E5%B7%AE/wm.png" alt="图片描述"></p><h3 id="评测用例规模与约定"><a href="#评测用例规模与约定" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $100 %$ 的数据, $1 \leq N \leq 1000,1 \leq M \leq 10000,1 \leq C_{i} \leq 200,1 \leq u, v \leq$ $N, 1 \leq c \leq 1000$</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>512M</td></tr><tr><td>C</td><td>1s</td><td>512M</td></tr><tr><td>Python3</td><td>1s</td><td>512M</td></tr><tr><td>Java</td><td>1s</td><td>512M</td></tr></tbody></table><h1 id="聪明的猴子"><a href="#聪明的猴子" class="headerlink" title="聪明的猴子"></a>聪明的猴子</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>在一个热带雨林中生存着一群猴子，它们以树上的果子为生。昨天下了一场大雨，现在雨过天晴，但整个雨林的地表还是被大水淹没着，部分植物的树冠露在水面上。猴子不会游泳，但跳跃能力比较强，它们仍然可以在露出水面的不同树冠上来回穿梭，以找到喜欢吃的果实。</p><p>现在，在这个地区露出水面的有 $N$ 棵树，假设每棵树本身的直径都很小，可以忽略不计。我们在这块区域上建立直角坐标系，则每一棵树的位置由其所对应的坐标表示(任意两棵树的坐标都不相同)。</p><p>在这个地区住着的猴子有 $M$ 个，下雨时，它们都躲到了茂密高大的树冠中，没有被大水冲走。由于各个猴子的年龄不同、身体素质不同，它们跳跃的能力不同。有的猴子跳跃的距离比较远(当然也可以跳到较近的树上)，而有些猴子跳跃的距离就比较近。这些猴子非常聪明，它们通过目测就可以准确地判断出自己能否跳到对面的树上。</p><p>现已知猴子的数量及每一个猴子的最大跳跃距离，还知道露出水面的每一棵树的坐标，你的任务是统计有多少个猴子可以在这个地区露出水面的所有树冠上觅食。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>第 $1$ 行为一个整数，表示猴子的个数 $M(2 \leq M \leq 500)$；</p><p>第 $2$ 行为 $M$ 个整数，依次表示猴子的最大跳跃距离（每个整数值在 $1 \sim 1000$之间）；</p><p>第 $3$ 行为一个整数表示树的总棵数 $N(2 \leq N \leq 1000)$；</p><p>第 $4$ 行至第 $N+3$ 行为 $N$ 棵树的坐标（横纵坐标均为整数，范围为：$-1000 \sim 1000$）。</p><p>（同一行的整数间用空格分开）</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示可以在这个地区的所有树冠上觅食的猴子数。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br>1 2 3 4 <br>6<br>0 0 <br>1 0<br>1 2 <br>-1 -1<br>-2 0 <br>2 2<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="通电"><a href="#通电" class="headerlink" title="通电"></a>通电</h1><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p>2015 年，全中国实现了户户通电。作为一名电力建设者，小明正在帮助一带一路上的国家通电。</p><p>这一次，小明要帮助 $n$ 个村庄通电，其中 1 号村庄正好可以建立一个发电站，所发的电足够所有村庄使用。</p><p>现在，这 $n$ 个村庄之间都没有电线相连，小明主要要做的是架设电线连接这些村庄，使得所有村庄都直接或间接的与发电站相通。</p><p>小明测量了所有村庄的位置（坐标）和高度，如果要连接两个村庄，小明需要花费两个村庄之间的坐标距离加上高度差的平方，形式化描述为坐标为($x_1, y_1$) 高度为 $h_1$ 的村庄与坐标为 ($x_2, y_2$) 高度为 $h_2$ 的村庄之间连接的费用为</p><p>$\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}+(h_1-h_2)^2$</p><p>高度的计算方式与横纵坐标的计算方式不同。</p><p>由于经费有限，请帮助小明计算他至少要花费多少费用才能使这 $n$ 个村庄都通电。</p><h3 id="输入描述-1"><a href="#输入描述-1" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $n$ ，表示村庄的数量。</p><p>接下来 $n$ 行，每个三个整数 $x, y,h$，分别表示一个村庄的横、纵坐标和高度，其中第一个村庄可以建立发电站。</p><p>其中，$1   \leq   n  \leq   1000，0   \leq   x, y, h   \leq   10000$。</p><h3 id="输出描述-1"><a href="#输出描述-1" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行，包含一个实数，四舍五入保留 2 位小数，表示答案。</p><h3 id="输入输出样例-1"><a href="#输入输出样例-1" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">4 <br>1 1 3 <br>9 9 7 <br>8 8 6 <br>4 5 4<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">17.41<br></code></pre></td></tr></table></figure><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="机房"><a href="#机房" class="headerlink" title="机房"></a>机房</h1><h3 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h3><p>这天, 小明在机房学习。</p><p>他发现机房里一共有 $n$ 台电脑, 编号为 1 到 $n$, 电脑和电脑之间有网线连 接, 一共有 $n-1$ 根网线将 $n$ 台电脑连接起来使得任意两台电脑都直接或者间 接地相连。</p><p>小明发现每台电脑转发、发送或者接受信息需要的时间取决于这台电脑和 多少台电脑直接相连, 而信息在网线中的传播时间可以忽略。比如如果某台电脑 用网线直接连接了另外 $d$ 台电脑, 那么任何经过这台电脑的信息都会延迟 $d$ 单 位时间 (发送方和接收方也会产生这样的延迟, 当然如果发送方和接收方都是 同一台电脑就只会产生一次延迟)。</p><p>小明一共产生了 $m$ 个疑问: 如果电脑 $u_{i}$ 向电脑 $v_{i}$ 发送信息, 那么信息从 $u_{i}$ 传到 $v_{i}$ 的最短时间是多少?</p><h3 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入共 $n+m$ 行, 第一行为两个正整数 $n, m$ 。</p><p>后面 $n-1$ 行, 每行两个正整数 $x, y$ 表示编号为 $x$ 和 $y$ 的两台电脑用网线 直接相连。</p><p>后面 $m$ 行, 每行两个正整数 $u_{i}, v_{i}$ 表示小明的第 $i$ 个疑问。</p><h3 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出共 $m$ 行, 第 $i$ 行一个正整数表示小明第 $i$ 个疑问的答案。</p><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">4 3 <br>1 2 <br>1 3<br>2 4 <br>2 3<br>3 4<br>3 3<br></code></pre></td></tr></table></figure><h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">5<br>6<br>1<br></code></pre></td></tr></table></figure><h3 id="样例说明-1"><a href="#样例说明-1" class="headerlink" title="样例说明"></a>样例说明</h3><p>这四台电脑各自的延迟分别为 $2,2,1,1$ 。</p><p>对于第一个询问, 从 2 到 3 需要经过 $2,1,3$, 所以时间和为 $2+2+1&#x3D;5$ 。</p><p>对于第二个询问, 从 3 到 4 需要经过 $3,1,2,4$, 所以时间和为 $1+2+2+1&#x3D;6$。</p><p>对于第三个询问, 从 3 到 3 只会产生一次延迟, 所以时间为 1 。</p><h3 id="评测用例规模与约定-1"><a href="#评测用例规模与约定-1" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30 %$ 的数据, 保证 $n, m \leq 1000$;</p><p>对于 $100 %$ 的数据, 保证 $n, m \leq 100000$ 。</p><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>512M</td></tr><tr><td>C</td><td>1s</td><td>512M</td></tr><tr><td>Python3</td><td>1s</td><td>512M</td></tr><tr><td>Java</td><td>1s</td><td>512M</td></tr></tbody></table><h1 id="环境治理"><a href="#环境治理" class="headerlink" title="环境治理"></a>环境治理</h1><h3 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h3><p>LQ 国拥有 $n$ 个城市, 从 0 到 $n-1$ 编号, 这 $n$ 个城市两两之间都有且仅有 一条双向道路连接, 这意味着任意两个城市之间都是可达的。每条道路都有一 个属性 $D$, 表示这条道路的灰尘度。当从一个城市 $A$ 前往另一个城市 $B$ 时, 可 能存在多条路线, 每条路线的灰尘度定义为这条路线所经过的所有道路的灰尘 度之和, LQ 国的人都很讨厌灰尘, 所以他们总会优先选择灰尘度最小的路线。</p><p>LQ 国很看重居民的出行环境, 他们用一个指标 $P$ 来衡量 LQ 国的出行环 境, $P$ 定义为:</p><p>$P&#x3D;\sum_{i&#x3D;0}^{n-1} \sum_{j&#x3D;0}^{n-1} d(i, j)$</p><p>其中 $d(i, j)$ 表示城市 $i$ 到城市 $j$ 之间灰尘度最小的路线对应的灰尘度的值。 为了改善出行环境, 每个城市都要有所作为, 当某个城市进行道路改善时, 会将与这个城市直接相连的所有道路的灰尘度都减少 1 , 但每条道路都有一个 灰尘度的下限值 $L$, 当灰尘度达到道路的下限值时, 无论再怎么改善, 道路的 灰尘度也不会再减小了。</p><p>具体的计划是这样的:</p><p>第 1 天, 0 号城市对与其直接相连的道路环境进行改善;</p><p>第 2 天, 1 号城市对与其直接相连的道路环境进行改善;</p><p>$\cdots$</p><p>第 $n$ 天, $n-1$ 号城市对与其直接相连的道路环境进行改善;</p><p>第 $n+1$ 天, 0 号城市对与其直接相连的道路环境进行改善;</p><p>第 $n+2$ 天, 1 号城市对与其直接相连的道路环境进行改善;</p><p>LQ 国想要使得 $P$ 指标满足 $P \leq Q$ 。请问最少要经过多少天之后, $P$ 指标 可以满足 $P \leq Q$ 。如果在初始时就已经满足条件, 则输出 0 ; 如果永远不可能 满足, 则输出 $-1$ 。</p><h3 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含两个整数 $n, Q$, 用一个空格分隔, 分别表示城市个数和 期望达到的 $P$ 指标。</p><p>接下来 $n$ 行, 每行包含 $n$ 个整数, 相邻两个整数之间用一个空格分隔, 其 中第 $i$ 行第 $j$ 列的值 $D_{i j}\left(D_{i j}&#x3D;D_{j i}, D_{i i}&#x3D;0\right)$ 表示城市 $i$ 与城市 $j$ 之间直接相连 的那条道路的灰尘度。</p><p>接下来 $n$ 行, 每行包含 $n$ 个整数, 相邻两个整数之间用一个空格分隔, 其 中第 $i$ 行第 $j$ 列的值 $L_{i j}\left(L_{i j}&#x3D;L_{j i}, L_{i i}&#x3D;0\right)$ 表示城市 $i$ 与城市 $j$ 之间直接相连的 那条道路的灰尘度的下限值。</p><h3 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答条。</p><h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">3 10 <br>0 2 4 <br>2 0 1<br>4 1 0 <br>0 2 2<br>2 0 0 <br>2 0 0<br></code></pre></td></tr></table></figure><h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">2<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-2"><a href="#评测用例规模与约定-2" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30 %$ 的评测用例, $1 \leq n \leq 10 ， 0 \leq L_{i j} \leq D_{i j} \leq 10$ ；</p><p>对于 $60 %$ 的评测用例, $1 \leq n \leq 50 ， 0 \leq L_{i j} \leq D_{i j} \leq 100000$;</p><p>对于所有评测用例, $1 \leq n \leq 100,0 \leq L_{i j} \leq D_{i j} \leq 100000,0 \leq Q \leq 2^{31}-1$ 。</p><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>10s</td><td>512M</td></tr><tr><td>C</td><td>10s</td><td>512M</td></tr><tr><td>Python3</td><td>10s</td><td>512M</td></tr><tr><td>Java</td><td>10s</td><td>512M</td></tr></tbody></table><h1 id="刷题统计"><a href="#刷题统计" class="headerlink" title="刷题统计"></a>刷题统计</h1><h3 id="问题描述-3"><a href="#问题描述-3" class="headerlink" title="问题描述"></a>问题描述</h3><p>小明决定从下周一开始努力刷题准备蓝桥杯竞赛。他计划周一至周五每天 做 $a$ 道题目, 周六和周日每天做 $b$ 道题目。请你帮小明计算, 按照计划他将在 第几天实现做题数大于等于 $n$ 题?</p><h3 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含三个整数 $a, b$ 和 $n$.</p><h3 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数代表天数。</p><h3 id="样例输入-3"><a href="#样例输入-3" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">10 </span><span class="hljs-number">20</span> <span class="hljs-number">99</span><br></code></pre></td></tr></table></figure><h3 id="样例输出-3"><a href="#样例输出-3" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">8<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-3"><a href="#评测用例规模与约定-3" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $50 %$ 的评测用例, $1 \leq a, b, n \leq 10^{6}$.</p><p>对于 $100 %$ 的评测用例, $1 \leq a, b, n \leq 10^{18}$.</p><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="快速幂"><a href="#快速幂" class="headerlink" title="快速幂"></a>快速幂</h1><h3 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h3><p>输入 $b，p，k$ 的值，求 $b^p \mod k$ 的值。其中 $2 \leq b,p,k \leq 10^9$ 。</p><h3 id="输入描述-2"><a href="#输入描述-2" class="headerlink" title="输入描述"></a>输入描述</h3><p>三个整数 $b,p,k$。</p><h3 id="输出描述-2"><a href="#输出描述-2" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出 $b^p \mod k&#x3D;s$，$s$ 为运算结果。</p><h3 id="输入输出样例-2"><a href="#输入输出样例-2" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 10 9<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">7<br></code></pre></td></tr></table></figure><h3 id="运行限制-6"><a href="#运行限制-6" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="核桃的数量"><a href="#核桃的数量" class="headerlink" title="核桃的数量"></a>核桃的数量</h1><h3 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h3><p>小张是软件项目经理，他带领 3 个开发组。工期紧，今天都在加班呢。为鼓舞士气，小张打算给每个组发一袋核桃（据传言能补脑）。他的要求是：</p><ol><li><p>各组的核桃数量必须相同</p></li><li><p>各组内必须能平分核桃（当然是不能打碎的）</p></li><li><p>尽量提供满足 1,2 条件的最小数量（节约闹革命嘛）</p></li></ol><h3 id="输入描述-3"><a href="#输入描述-3" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行 $a,b,c$，都是正整数，表示每个组正在加班的人数，用空格分开$(a,b,c&lt;30)$。</p><h3 id="输出描述-3"><a href="#输出描述-3" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个正整数，表示每袋核桃的数量。</p><h3 id="输入输出样例-3"><a href="#输入输出样例-3" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 4 5<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">20<br></code></pre></td></tr></table></figure><h3 id="运行限制-7"><a href="#运行限制-7" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>64M</td></tr><tr><td>C</td><td>1s</td><td>64M</td></tr><tr><td>Python3</td><td>1s</td><td>64M</td></tr><tr><td>Java</td><td>1s</td><td>64M</td></tr></tbody></table><h1 id="质数"><a href="#质数" class="headerlink" title="质数"></a>质数</h1><h3 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个正整数 $N$，请你输出 $N$ 以内（不包含 $N$）的质数以及质数的个数。</p><h3 id="输入描述-4"><a href="#输入描述-4" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行，包含一个正整数 $N$。 $1\leq N \leq 10^3$</p><h3 id="输出描述-4"><a href="#输出描述-4" class="headerlink" title="输出描述"></a>输出描述</h3><p>共两行。</p><p>第 $1$ 行包含若干个素数，每两个素数之间用一个空格隔开，素数从小到大输出。</p><p>第 $2$ 行包含一个整数，表示N以内质数的个数。</p><h3 id="输入输出样例-4"><a href="#输入输出样例-4" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">10<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 3 5 7 <br>4<br></code></pre></td></tr></table></figure><h3 id="运行限制-8"><a href="#运行限制-8" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="分割立方体"><a href="#分割立方体" class="headerlink" title="分割立方体"></a>分割立方体</h1><h3 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个立方体，边长为 $n$，现将其分割成 $n×n×n$ 个单位立方体。</p><p>分割后任意两个单位立方体，或者有 $2$ 个公共点，或者有 $4$ 个公共点，或者没有公共点。</p><p>请问，没有公共点和有 $2$ 个公共点的立方体，共有多少对？</p><h3 id="输入描述-5"><a href="#输入描述-5" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行包含一个整数 $n(1\leq n \leq 30)$。</p><h3 id="输出描述-5"><a href="#输出描述-5" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数表示答案。</p><h3 id="输入输出样例-5"><a href="#输入输出样例-5" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">0<br></code></pre></td></tr></table></figure><h4 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">16<br></code></pre></td></tr></table></figure><h4 id="示例3"><a href="#示例3" class="headerlink" title="示例3"></a>示例3</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">297<br></code></pre></td></tr></table></figure><h3 id="运行限制-9"><a href="#运行限制-9" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="糊涂人寄信"><a href="#糊涂人寄信" class="headerlink" title="糊涂人寄信"></a>糊涂人寄信</h1><h3 id="题目描述-6"><a href="#题目描述-6" class="headerlink" title="题目描述"></a>题目描述</h3><p>有一个糊涂人，写了 $n$ 封信和 $n$ 个信封，到了邮寄的时候，把所有的信都装错了信封。求装错信封可能的种类数。</p><h3 id="输入描述-6"><a href="#输入描述-6" class="headerlink" title="输入描述"></a>输入描述</h3><p>有多行读入，每行输入一个正整数 $n$，表示一种情况。($n\leq 20$)</p><h3 id="输出描述-6"><a href="#输出描述-6" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出相应的答案。</p><h3 id="输入输出样例-6"><a href="#输入输出样例-6" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">1<br>3<br>4<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">0 <br>2<br>9<br></code></pre></td></tr></table></figure><h3 id="运行限制-10"><a href="#运行限制-10" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="小蓝吃糖果"><a href="#小蓝吃糖果" class="headerlink" title="小蓝吃糖果"></a>小蓝吃糖果</h1><h3 id="题目描述-7"><a href="#题目描述-7" class="headerlink" title="题目描述"></a>题目描述</h3><p>小蓝有 $n$ 种糖果，每种数量已知。</p><p>小蓝不喜欢连续 $2$ 次吃同样的糖果。问有没有可行的吃糖方案。</p><h3 id="输入描述-7"><a href="#输入描述-7" class="headerlink" title="输入描述"></a>输入描述</h3><p>第一行是整数 $n(0&lt;n&lt;1000000)$。</p><p>第二行包含 $n$ 个数，表示 $n$ 种糖果的数量 $mi$，$0&lt;mi&lt;1000000$。</p><h3 id="输出描述-7"><a href="#输出描述-7" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行，包含一个 <code>Yes</code> 或 <code>No</code>。</p><h3 id="输入输出样例-7"><a href="#输入输出样例-7" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br>4 1 1<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">No<br></code></pre></td></tr></table></figure><h3 id="运行限制-11"><a href="#运行限制-11" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥题目汇总21-40</title>
    <link href="/2024/03/22/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB21-40/"/>
    <url>/2024/03/22/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB21-40/</url>
    
    <content type="html"><![CDATA[<h1 id="大学里到树木要打药"><a href="#大学里到树木要打药" class="headerlink" title="大学里到树木要打药"></a>大学里到树木要打药</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>教室外有 $N$ 棵树（树的编号从 $0\sim N-1$），根据不同的位置和树种，学校要对其上不同的药。</p><p>因为树的排列成线性，且非常长，我们可以将它们看作一条直线给他们编号。</p><p>对于树的药是成区间分布，比如 $3 \sim 5$ 号的树靠近下水道，所以他们要用驱蚊虫的药， $20 \sim 26$ 号的树，他们排水不好，容易涝所以要给他们用点促进根系的药 $\cdots$诸如此类。</p><p>每种不同的药要花不同的钱。</p><p>现在已知共有 $M$ 个这样的区间，并且给你每个区间花的钱，问最后这些树木要花多少药费。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>每组输入的第一行有两个整数 $N$和 $M$。$N$ 代表马路的共计多少棵树，$M$ 代表区间的数目，$N$ 和 $M$ 之间用一个空格隔开。</p><p>接下来的 $M$ 行每行包含三个不同的整数，用一个空格隔开，分别表示一个区域的起始点 $L$ 和终止点 $R$ 的坐标，以及花费。</p><p>$1\leq L\leq R \leq N \leq 10^6,1\leq M\leq 10^5$，保证花费总和不超过 <code>int</code> 范围。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出包括一行，这一行只包含一个整数，所有的花费。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">500 3 <br>150 300 4<br>100 200 20 <br>470 471 19<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2662<br></code></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>xxxxxxxxxx15 1import os2import sys3​4# 请在此输入您的代码5n &#x3D; int(input())6a &#x3D; list(map(int, input().split()))7a.sort()8b &#x3D; []9c &#x3D; []10for i in range(n):11    if a[i] % 2 &#x3D;&#x3D; 0:12        b.append(a[i])13    else:14        c.append(a[i])15print(“ “.join(map(str, c)),” “.join(map(str,b)))python</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h2 id="大学里的树木要维护"><a href="#大学里的树木要维护" class="headerlink" title="大学里的树木要维护"></a>大学里的树木要维护</h2><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p>教室外有 $N$ 棵树（树的编号从 $1\sim N$），根据不同的位置和树种，学校已经对其进行了多年的维护。</p><p>因为树的排列成线性，且非常长，我们可以将它们看作一条直线给他们编号。</p><p>由于已经维护了多年，每一个树都由学校的园艺人员进行了维护费用的统计。</p><p>每棵树的前期维护费用各不相同，但是由于未来需要要打药，所以有些树木的维护费用太高的话，就要重新种植。</p><p>由于维护费用也称区间分布，所以常常需要统一个区间里的树木的维护开销。</p><p>现给定一个长度为 $N$ 的数组 $A$ 以及 $M$ 个查询，$A_i$ 表示第 $i$ 棵树到维护费用。对于每个查询包含一个区间，园艺人员想知道该区间内的树木维护的开销是多少。</p><p>请你编写程序帮帮他！</p><h3 id="输入描述-1"><a href="#输入描述-1" class="headerlink" title="输入描述"></a>输入描述</h3><p>每组输入的第一行有两个整数 $N$和 $M$。$N$ 代表马路的共计多少棵树，$M$ 代表区间的数目，$N$ 和 $M$ 之间用一个空格隔开。</p><p>接下来的一行，包含 $N$ 个数 $A_1,A_2,\cdots,A_N$，分别表示每棵树的维护费用，每个数之间用空格隔开。</p><p>接下来的 $M$ 行每行包含两个不同的整数，用一个空格隔开，表示一个区域的起始点 $L$ 和终止点 $R$ 的坐标。</p><h3 id="输出描述-1"><a href="#输出描述-1" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出包括 $M$ 行，每一行只包含一个整数，表示维护的开销。</p><h3 id="输入输出样例-1"><a href="#输入输出样例-1" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">10 3<br>7 5 6 4 2 5 0 8 5 3<br>1 5<br>2 6<br>3 7<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">24<br>22<br>17<br></code></pre></td></tr></table></figure><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="合根植物"><a href="#合根植物" class="headerlink" title="合根植物"></a>合根植物</h1><h3 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h3><p>$w$ 星球的一个种植园，被分成 $m \times n$ 个小格子（东西方向 $m$ 行，南北方向 $n$ 列）。每个格子里种了一株合根植物。</p><p>这种植物有个特点，它的根可能会沿着南北或东西方向伸展，从而与另一个格子的植物合成为一体。</p><p>如果我们告诉你哪些小格子间出现了连根现象，你能说出这个园中一共有多少株合根植物吗？</p><h3 id="输入描述-2"><a href="#输入描述-2" class="headerlink" title="输入描述"></a>输入描述</h3><p>第一行，两个整数 $m,n$，用空格分开，表示格子的行数、列数（$1  \leq  m,n  \leq  1000$）。</p><p>接下来一行，一个整数 $k$ ($0  \leq  k  \leq  10^5$ )，表示下面还有 $k$ 行数据。</p><p>接下来 $k$ 行，每行两个整数 $a，b$，表示编号为 $a$ 的小格子和编号为 $b$ 的小格子合根了。</p><p>格子的编号一行一行，从上到下，从左到右编号。</p><p>比如：$5 \times 4$ 的小格子，编号：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">1 2 3 4 <br>5 6 7 8<br>9 10 11 12<br>13 14 15 16 <br>17 18 19 20<br></code></pre></td></tr></table></figure><h3 id="输出描述-2"><a href="#输出描述-2" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出植物数量。</p><h3 id="输入输出样例-2"><a href="#输入输出样例-2" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 4<br>16 <br>2 3 <br>1 5<br>5 9<br>4 8 <br>7 8<br>9 10<br>10 11<br>11 12 <br>10 14<br>12 16 <br>14 18<br>17 18<br>15 19<br>19 20<br>9 13<br>13 17<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br></code></pre></td></tr></table></figure><blockquote><p>样例说明</p></blockquote><p>其合根情况参考下图：</p><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB21-40/uid1580206-20210202-1612249467438.png"></p><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>2s</td><td>256M</td></tr><tr><td>C</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>2s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr></tbody></table><h1 id="修改数组"><a href="#修改数组" class="headerlink" title="修改数组"></a>修改数组</h1><h3 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个长度为 $N$ 的数组 $A &#x3D; [A_1,A_2,··· ,A_N]$，数组中有可能有重复出现的整数。</p><p>现在小明要按以下方法将其修改为没有重复整数的数组。小明会依次修改$A_2,A_3,··· ,A_N$。</p><p>当修改 $A_i$ 时，小明会检查 $A_i$ 是否在 $A_1$ ∼ $A_i−1$ 中出现过。如果出现过，则小明会给 $A_i$ 加上 1 ；如果新的 $A_i$ 仍在之前出现过，小明会持续给 $A_i$ 加 1 ，直 到 $A_i$ 没有在 $A_1$ ∼ $A_i−1$ 中出现过。</p><p>当 $A_N$ 也经过上述修改之后，显然 $A$ 数组中就没有重复的整数了。</p><p>现在给定初始的 $A$ 数组，请你计算出最终的 $A$ 数组。</p><h3 id="输入描述-3"><a href="#输入描述-3" class="headerlink" title="输入描述"></a>输入描述</h3><p>第一行包含一个整数 $N$。</p><p>第二行包含 $N$ 个整数 $A_1,A_2,··· ,A_N$。</p><p>其中，$1  \leq  N  \leq  10^5，1  \leq  A_i  \leq  10^6$。</p><h3 id="输出描述-3"><a href="#输出描述-3" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出 $N$ 个整数，依次是最终的 $A_1,A_2,··· ,A_N$。</p><h3 id="输入输出样例-3"><a href="#输入输出样例-3" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 <br>2 1 1 3 4<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 1 3 4 5<br></code></pre></td></tr></table></figure><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="分巧克力"><a href="#分巧克力" class="headerlink" title="分巧克力"></a>分巧克力</h1><h3 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h3><p>儿童节那天有 K 位小朋友到小明家做客。小明拿出了珍藏的巧克力招待小朋友们。</p><p>小明一共有 $N$ 块巧克力，其中第 $i$ 块是 $H_i \times Wi$ 的方格组成的长方形。为了公平起见，</p><p>小明需要从这 $N$ 块巧克力中切出 K 块巧克力分给小朋友们。切出的巧克力需要满足：</p><ol><li><p>形状是正方形，边长是整数;</p></li><li><p>大小相同;</p></li></ol><p>例如一块 6x5 的巧克力可以切出 6 块 2x2 的巧克力或者 2 块 3x3 的巧克力。</p><p>当然小朋友们都希望得到的巧克力尽可能大，你能帮小明计算出最大的边长是多少么？</p><h3 id="输入描述-4"><a href="#输入描述-4" class="headerlink" title="输入描述"></a>输入描述</h3><p>第一行包含两个整数 $N,K$ ($1  \leq  N, K  \leq  10^5$)。</p><p>以下 N 行每行包含两个整数 $H_i,W_i$ ($1  \leq  H_i, W_i  \leq  10^5$)。</p><p>输入保证每位小朋友至少能获得一块 1x1 的巧克力。</p><h3 id="输出描述-4"><a href="#输出描述-4" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出切出的正方形巧克力最大可能的边长。</p><h3 id="输入输出样例-4"><a href="#输入输出样例-4" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 10 <br>6 5<br>5 6<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>2s</td><td>256M</td></tr><tr><td>C</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>2s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr></tbody></table><h1 id="M次方根"><a href="#M次方根" class="headerlink" title="M次方根"></a>M次方根</h1><h3 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h3><p>小$A$最近在学高等数学，他发现了一道题，求三次根号下 $27$。</p><p>现在已知，小$A$开始计算，$1$ 的三次方得 $1$， $2$ 的三次方得 $8$ ，$3$ 的三次方得 $27$，然后他很高兴的填上了 $3$。接着他要求 $5$ 次根号下 $164$。</p><p>然后他开始 $1$ 的三次方得 $1$， $2$ 的三次方得 $8$ ，$3$ 的三次方得$27\cdots$</p><p>直到他算到了秃头，也没有找到答案。</p><p>这时一旁的小$B$看不下去了，说这题答案又不是个整数。</p><p>小$A$震惊，原来如此。</p><p>作为程序高手的小$A$，打算设计一个程序用于求解 $M$ 次跟下 $N$ 的值。</p><p>但是由于要考虑精度范围，答案必须要保留 $7$ 位小数，三次根号下 $27$ 都要掰手指的小$A$又怎么会设计呢。</p><p>请你帮小$A$设计一个程序用于求解 $M$ 次根号 $N$。</p><h3 id="输入描述-5"><a href="#输入描述-5" class="headerlink" title="输入描述"></a>输入描述</h3><p>每组输入的第一行有两个整数 $N$ 和 $M$，数据间用空格隔开。</p><p>$1\leq N \leq 10^5$，$1\leq M \leq 10^2$，$M &lt; N$。</p><h3 id="输出描述-5"><a href="#输出描述-5" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个实数表示答案（请保留小数点后 $7$ 位）。</p><h3 id="输入输出样例-5"><a href="#输入输出样例-5" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">27 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3.0000000<br></code></pre></td></tr></table></figure><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="找零问题"><a href="#找零问题" class="headerlink" title="找零问题"></a>找零问题</h1><h3 id="题目描述-6"><a href="#题目描述-6" class="headerlink" title="题目描述"></a>题目描述</h3><p>蓝桥商店的老板需要找零 $n$ 元钱。</p><p>钱币的面额有：$100$ 元、$50$ 元、$20$ 元、$5$ 元、$1$ 元，问如何找零使得所需钱币的数量最少？</p><p>注意：$n$ 可能为 $0$，也能为几百元（别问，问就是来着里微信提现来了）</p><h3 id="输入描述-6"><a href="#输入描述-6" class="headerlink" title="输入描述"></a>输入描述</h3><p>在第一行给出测试例个数 $N$，代表需要找零的钱数。</p><p>$1\leq N \leq 10^5$。</p><h3 id="输出描述-6"><a href="#输出描述-6" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出共有 $5$ 行，每一行输出数据输出找零的金额与数量，详情看样例。</p><h4 id="示例-6"><a href="#示例-6" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">365<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">100:3 50:1 20:0 5:3 1:0<br></code></pre></td></tr></table></figure><h3 id="运行限制-6"><a href="#运行限制-6" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="小B的宿舍"><a href="#小B的宿舍" class="headerlink" title="小B的宿舍"></a>小B的宿舍</h1><h3 id="题目描述-7"><a href="#题目描述-7" class="headerlink" title="题目描述"></a>题目描述</h3><p>小B的宿舍楼沿着走廊南北向的两边各有 $200$ 个房间，如下所示：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">[房间1][房间3][房间5][房间7][房间9 ]...[房间399]<br>---------------------------------------------- 走廊 ---------------------------------------------- <br>[房间2][房间4][房间6][房间8][房间10]...[房间400]<br></code></pre></td></tr></table></figure><p>最近，由于转专业和专业分流的原因，宿舍将迎来新的调整，以便组成新的班级后方便管理。</p><p>但是由于走廊狭窄，走廊里只能通过一个搬运的物品（可以同向也可以反向），因此必须指定高效的搬运计划。</p><p>老师给了每位同学下达了以下要求，让同学们体现收拾好行李，然后给每位同学 $10$ 分钟的时间搬运。</p><p>当从房间 $i$ 搬运行李到 $j$ 时，$i$ 与 $j$ 之间的走廊都会被占用。所以，$10$ 分钟之内同一段走廊最多 $1$ 个人同时搬运，不重叠的走廊也可以同时搬运。</p><p>小B的老师是个数学老师，经过运筹学一通计算他得到了最优的搬运计划。</p><p>虽然计划不唯一，但是最优值唯一，请问这个最短时间是多少？</p><h3 id="输入描述-7"><a href="#输入描述-7" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入数据有 $T$ 组测试例，在第一行给出测试例个数 $T$。</p><p>每个测试例的第一行是一个整数 $N$（$1\leq N \leq 200$)，表示要搬运行李的人数。</p><p>接下来 $N$ 行，每行两个正整数 $s$ 和 $t$，表示一个人，要将行李是从房间 $s$ 移到到房间 $t$。</p><h3 id="输出描述-7"><a href="#输出描述-7" class="headerlink" title="输出描述"></a>输出描述</h3><p>每组输入都有一行输出数据，为一整数 $Time$，表示完成任务所花费的最小时间。</p><h4 id="示例-7"><a href="#示例-7" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 <br>4<br>10 20<br>30 40<br>50 60<br>70 80 <br>2<br>1 3<br>2 200<br>3<br>10 100 <br>20 80<br>30 50<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">10<br>10<br>20<br></code></pre></td></tr></table></figure><h3 id="运行限制-7"><a href="#运行限制-7" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="数字三角形"><a href="#数字三角形" class="headerlink" title="数字三角形"></a>数字三角形</h1><h3 id="题目描述-8"><a href="#题目描述-8" class="headerlink" title="题目描述"></a>题目描述</h3><p><img src="/./../images/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB21-40/uid1580206-20210224-1614154063705.png" alt="图片描述"></p><p>上图给出了一个数字三角形。从三角形的顶部到底部有很多条不同的路径。对于每条路径，把路径上面的数加起来可以得到一个和，你的任务就是找到最大的和。</p><p>路径上的每一步只能从一个数走到下一层和它最近的左边的那个数或者右 边的那个数。此外，向左下走的次数与向右下走的次数相差不能超过 1。</p><h3 id="输入描述-8"><a href="#输入描述-8" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $N\ (1 \leq N \leq 100)$，表示三角形的行数。</p><p>下面的 $N$ 行给出数字三角形。数字三角形上的数都是 0 至 100 之间的整数。</p><h3 id="输出描述-8"><a href="#输出描述-8" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示答案。</p><h3 id="输入输出样例-6"><a href="#输入输出样例-6" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-8"><a href="#示例-8" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 <br>7 <br>3 8<br>8 1 0<br>2 7 4 4 <br>4 5 2 6 5<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">27<br></code></pre></td></tr></table></figure><h3 id="运行限制-8"><a href="#运行限制-8" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="游戏中的学问"><a href="#游戏中的学问" class="headerlink" title="游戏中的学问"></a>游戏中的学问</h1><h3 id="题目描述-9"><a href="#题目描述-9" class="headerlink" title="题目描述"></a>题目描述</h3><p>大家应该都见过很多人手拉手围着篝火跳舞的场景吧？一般情况下，大家手拉手跳舞总是会围成一个大圈，每个人的左手拉着旁边朋友的右手，右手拉着另一侧朋友的左手。</p><p>不过，如果每一个人都随机的拉住两个不同人的手，然后再慢慢散开，事情就变得有趣多了——此时大家依旧会形成圈，不过却可能会形成多个独立的圈。当然这里我们依然要求一个人的右手只能拉另一个人的左手，反之亦然。</p><p>班里一共有 $N$ 个同学，由 $1$ 到 $N$ 编号。Will 想知道，究竟有多少种本质不同的拉手方案，使得最终大家散开后恰好形成 $k$ 个圈呢？</p><p>给定两种方案，若存在一个人和他的一只手，满足在这两种方案中，拉着这只手的人的编号不同，则这两种方案本质不同。</p><h3 id="输入描述-9"><a href="#输入描述-9" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行包含三个正整数$N,k,P$。</p><p>其中，$3 \leq k \leq  N \leq 3000$，$10^4 \leq  p \leq 2 \times  10^9$。</p><h3 id="输出描述-9"><a href="#输出描述-9" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行一个整数，表示本质不同的方案数对 $p$ 的余数。保证 $p$ 一定是一个质数。</p><h3 id="输入输出样例-7"><a href="#输入输出样例-7" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 1 1000000009<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><h3 id="运行限制-9"><a href="#运行限制-9" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>2s</td><td>128M</td></tr><tr><td>C</td><td>2s</td><td>128M</td></tr><tr><td>Python3</td><td>2s</td><td>128M</td></tr><tr><td>Java</td><td>2s</td><td>128M</td></tr></tbody></table><h1 id="跳跃"><a href="#跳跃" class="headerlink" title="跳跃"></a>跳跃</h1><h3 id="题目描述-10"><a href="#题目描述-10" class="headerlink" title="题目描述"></a>题目描述</h3><p>小蓝在一个 $n$ 行 $m$ 列的方格图中玩一个游戏。</p><p>开始时，小蓝站在方格图的左上角，即第 $1$ 行第 $1$ 列。</p><p>小蓝可以在方格图上走动，走动时，如果当前在第 $r$ 行第 $c$ 列，他不能走到行号比 $r$ 小的行，也不能走到列号比 $c$ 小的列。同时，他一步走的直线距离不超过 $3$。</p><p>例如，如果当前小蓝在第 $3$ 行第 $5$ 列，他下一步可以走到第 $3$ 行第 $6$ 列、第 $3$ 行第 $7$ 列、第 $3$ 行第 $8$ 列、第 $4$ 行第 $5$ 列、第 $4$ 行第 $6$ 列、第 $4$ 行第 $7$ 列、第 $5$ 行第 $5$ 列、第 $5$ 行第 $6$ 列、第 $6$ 行第 $5$ 列之一。</p><p>小蓝最终要走到第 $n$ 行第 $m$ 列。</p><p>在图中，有的位置有奖励，走上去即可获得，有的位置有惩罚，走上去就要接受惩罚。奖励和惩罚最终抽象成一个权值，奖励为正，惩罚为负。</p><p>小蓝希望，从第 $1$ 行第 $1$ 列走到第 $n$ 行第 $m$ 列后，总的权值和最大。请问最大是多少？</p><h3 id="输入描述-10"><a href="#输入描述-10" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含两个整数 $n, m$，表示图的大小。</p><p>接下来 $n$ 行，每行 $m$ 个整数，表示方格图中每个点的权值。</p><p>其中，$1 \leq n \leq 100，-10^4 \leq 权值 \leq 10^4$。</p><h3 id="输出描述-10"><a href="#输出描述-10" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示最大权值和。</p><h3 id="输入输出样例-8"><a href="#输入输出样例-8" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-1"><a href="#示例-1-1" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 5<br>-4 -5 -10 -3 1<br>7 5 -9 3 -10<br>10 -2 6 -10 -4<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">15<br></code></pre></td></tr></table></figure><h3 id="运行限制-10"><a href="#运行限制-10" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="小明的背包1"><a href="#小明的背包1" class="headerlink" title="小明的背包1"></a>小明的背包1</h1><h3 id="题目描述-11"><a href="#题目描述-11" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明有一个容量为 $V$ 的背包。</p><p>这天他去商场购物，商场一共有 $N$ 件物品，第 $i$ 件物品的体积为 $w_i$，价值为 $v_i$。</p><p>小明想知道在购买的物品总体积不超过 $V$ 的情况下所能获得的最大价值为多少，请你帮他算算。</p><h3 id="输入描述-11"><a href="#输入描述-11" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p><p>第 $2\sim N+1$ 行包含 $2$ 个正整数 $w,v$，表示物品的体积和价值。</p><p>$1\leq N\leq10^2$，$1\leq V \leq 10^3$，$1 \leq w_i,v_i \leq10^3$。</p><h3 id="输出描述-11"><a href="#输出描述-11" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行整数表示小明所能获得的最大价值。</p><h3 id="输入输出样例-9"><a href="#输入输出样例-9" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-2"><a href="#示例-1-2" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 20 <br>1 6<br>2 5<br>3 8<br>5 15<br>3 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">37<br></code></pre></td></tr></table></figure><h3 id="运行限制-11"><a href="#运行限制-11" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="小明的背包2"><a href="#小明的背包2" class="headerlink" title="小明的背包2"></a>小明的背包2</h1><h3 id="题目描述-12"><a href="#题目描述-12" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明有一个容量为 $V$ 的背包。</p><p>这天他去商场购物，商场一共有 $N$ 种物品，第 $i$ 种物品的体积为 $w_i$，价值为 $v_i$，每种物品都有无限多个。</p><p>小明想知道在购买的物品总体积不超过 $V$ 的情况下所能获得的最大价值为多少，请你帮他算算。</p><h3 id="输入描述-12"><a href="#输入描述-12" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p><p>第 $2\sim N+1$ 行包含 $2$ 个正整数 $w,v$，表示物品的体积和价值。</p><p>$1\leq N\leq10^3$，$1\leq V \leq 10^3$，$1 \leq w_i,v_i \leq10^3$。</p><h3 id="输出描述-12"><a href="#输出描述-12" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行整数表示小明所能获得的最大价值。</p><h3 id="输入输出样例-10"><a href="#输入输出样例-10" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-3"><a href="#示例-1-3" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 20<br>1 6 <br>2 5<br>3 8<br>5 15 <br>3 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">120<br></code></pre></td></tr></table></figure><h3 id="运行限制-12"><a href="#运行限制-12" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="小明的背包3"><a href="#小明的背包3" class="headerlink" title="小明的背包3"></a>小明的背包3</h1><h3 id="题目描述-13"><a href="#题目描述-13" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明有一个容量为 $V$ 的背包。</p><p>这天他去商场购物，商场一共有 $N$ 种物品，第 $i$ 种物品的体积为 $w_i$，价值为 $v_i$，数量为 $s_i$。</p><p>小明想知道在购买的物品总体积不超过 $V$ 的情况下所能获得的最大价值为多少，请你帮他算算。</p><h3 id="输入描述-13"><a href="#输入描述-13" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p><p>第 $2\sim N+1$ 行包含 $3$ 个正整数 $w,v,s$，表示物品的体积和价值。</p><p>$1\leq N\leq10^2$，$1\leq V \leq 2\times10^2$，$1 \leq w_i,v_i,s_i \leq 2\times10^2$。</p><h3 id="输出描述-13"><a href="#输出描述-13" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行整数表示小明所能获得的最大价值。</p><h3 id="输入输出样例-11"><a href="#输入输出样例-11" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-4"><a href="#示例-1-4" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 30 <br>1 2 3 <br>4 5 6<br>7 8 9<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">39<br></code></pre></td></tr></table></figure><h3 id="运行限制-13"><a href="#运行限制-13" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="蓝肽子序列"><a href="#蓝肽子序列" class="headerlink" title="蓝肽子序列"></a>蓝肽子序列</h1><h3 id="题目描述-14"><a href="#题目描述-14" class="headerlink" title="题目描述"></a>题目描述</h3><p>L 星球上的生物由蛋蓝质组成，每一种蛋蓝质由一类称为蓝肽的物资首尾连接成一条长链后折叠而成。</p><p>生物学家小乔正在研究 L 星球上的蛋蓝质。她拿到两个蛋蓝质的蓝肽序列，想通过这两条蓝肽序列的共同特点来分析两种蛋蓝质的相似性。</p><p>具体的，一个蓝肽可以使用 $1$ 至 $5$ 个英文字母表示，其中第一个字母大写，后面的字母小写。一个蛋蓝质的蓝肽序列可以用蓝肽的表示顺序拼接而成。</p><p>在一条蓝肽序列中，如果选取其中的一些位置，把这些位置的蓝肽取出，并按照它们在原序列中的位置摆放，则称为这条蓝肽的一个子序列。蓝肽的子序列不一定在原序列中是连续的，中间可能间隔着一些未被取出的蓝肽。</p><p>如果第一条蓝肽序列可以取出一个子序列与第二条蓝肽序列中取出的某个子序列相等，则称为一个公共蓝肽子序列。</p><p>给定两条蓝肽序列，找出他们最长的那个公共蓝肽子序列的长度。</p><h3 id="输入描述-14"><a href="#输入描述-14" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入两行，每行包含一个字符串，表示一个蓝肽序列。字符串中间没有空格等分隔字符。</p><p>其中有 ，两个字符串的长度均不超过 $1000$。</p><h3 id="输出描述-14"><a href="#输出描述-14" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示最长的那个公共蓝肽子序列的长度。</p><h3 id="输入输出样例-12"><a href="#输入输出样例-12" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-9"><a href="#示例-9" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">LanQiaoBei <br>LanTaiXiaoQiao<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><h3 id="运行限制-14"><a href="#运行限制-14" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="合唱队形"><a href="#合唱队形" class="headerlink" title="合唱队形"></a>合唱队形</h1><h3 id="题目描述-15"><a href="#题目描述-15" class="headerlink" title="题目描述"></a>题目描述</h3><p>$N$ 位同学站成一排，音乐老师要请其中的 $(N-K)$ 位同学出列，使得剩下的 $K$ 位同学排成合唱队形。</p><p>合唱队形是指这样的一种队形：设 $K$ 位同学从左到右依次编号为 $1，2，\cdots K$，他们的身高分别为 $T_1，T_2，\cdots，T_K$， 则他们的身高满足 $T_1&lt; \cdots &lt; T_i&gt; T_{i+1}&gt; \cdots &gt;T_K(1 \leq i \leq K)$。</p><p>你的任务是，已知所有 $N$ 位同学的身高，计算最少需要几位同学出列，可以使得剩下的同学排成合唱队形。</p><h3 id="输入描述-15"><a href="#输入描述-15" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入两行。</p><p>第一行是一个整数 $N\ (2 \leq N \leq 100)$，表示同学的总数。</p><p>第二行有 $n$ 个整数，用空格分隔，第 $i$ 个整数 $T_i(130 \leq T_i \leq 230)$ 是第 $i$ 位同学的身高(厘米)。</p><h3 id="输出描述-15"><a href="#输出描述-15" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，就是最少需要几位同学出列。</p><h3 id="输入输出样例-13"><a href="#输入输出样例-13" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-5"><a href="#示例-1-5" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">8<br>186 186 150 200 160 130 197 220<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br></code></pre></td></tr></table></figure><h3 id="运行限制-15"><a href="#运行限制-15" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="最优包含"><a href="#最优包含" class="headerlink" title="最优包含"></a>最优包含</h1><h3 id="题目描述-16"><a href="#题目描述-16" class="headerlink" title="题目描述"></a>题目描述</h3><p>我们称一个字符串 $S$ 包含字符串 $T$ 是指 $T$ 是 $S$ 的一个子序列，即可以从字符串 $S$ 中抽出若干个字符，它们按原来的顺序组合成一个新的字符串与 $T$ 完全一样。</p><p>给定两个字符串 $S$ 和 $T$，请问最少修改 $S$ 中的多少个字符，能使 $S$ 包含 $T$ ？</p><p>其中，$1 \leq |T| \leq |S| \leq 1000$。</p><h3 id="输入描述-16"><a href="#输入描述-16" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入两行，每行一个字符串。</p><p>第一行的字符串为 $S$，第二行的字符串为 $T$。</p><p>两个字符串均非空而且只包含大写英文字母。</p><h3 id="输出描述-16"><a href="#输出描述-16" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示答案。</p><h3 id="输入输出样例-14"><a href="#输入输出样例-14" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-10"><a href="#示例-10" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">ABCDEABCD<br>XAABZ<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure><h3 id="运行限制-16"><a href="#运行限制-16" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h1><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>小蓝学习了最短路径之后特别高兴，他定义了一个特别的图，希望找到图 中的最短路径。</p><p>小蓝的图由 2021 个结点组成，依次编号 1 至 2021。</p><p>对于两个不同的结点 a, b，如果 a 和 b 的差的绝对值大于 21，则两个结点 之间没有边相连；如果 a 和 b 的差的绝对值小于等于 21，则两个点之间有一条 长度为 a 和 b 的最小公倍数的无向边相连。</p><p>例如：结点 1 和结点 23 之间没有边相连；结点 3 和结点 24 之间有一条无 向边，长度为 24；结点 15 和结点 25 之间有一条无向边，长度为 75。</p><p>请计算，结点 1 和结点 2021 之间的最短路径长度是多少。</p><p>提示：建议使用计算机编程解决问题。</p><h3 id="运行限制-17"><a href="#运行限制-17" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="蓝桥王国"><a href="#蓝桥王国" class="headerlink" title="蓝桥王国"></a>蓝桥王国</h1><h3 id="题目描述-17"><a href="#题目描述-17" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明是蓝桥王国的王子，今天是他登基之日。</p><p>在即将成为国王之前，老国王给他出了道题，他想要考验小明是否有能力管理国家。</p><p>题目的内容如下：</p><p>蓝桥王国一共有 $N$ 个建筑和 $M$ 条单向道路，每条道路都连接着两个建筑，每个建筑都有自己编号，分别为 $1\sim N$ 。（其中皇宫的编号为 $1$）</p><p>国王想让小明回答从皇宫到每个建筑的最短路径是多少，但紧张的小明此时已经无法思考，请你编写程序帮助小明回答国王的考核。</p><h3 id="输入描述-17"><a href="#输入描述-17" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第一行包含三个正整数 $N,M$。</p><p>第 $2$ 到 $M + 1$ 行每行包含三个正整数 $u,v,w$，表示 $u\rightarrow v$ 之间存在一条距离为 $w$ 的路。</p><p>$1\leq N \leq 3\times10^5$，$1 \leq m \leq 10^6$，$1 \leq u_i, v_i\leq N$，$0 \leq w_i \leq 10 ^ 9$。</p><h3 id="输出描述-17"><a href="#输出描述-17" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出仅一行，共 $N$ 个数，分别表示从皇宫到编号为 $1\sim N$ 建筑的最短距离，两两之间用空格隔开。（如果无法到达则输出 $-1$）</p><h3 id="输入输出样例-15"><a href="#输入输出样例-15" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-6"><a href="#示例-1-6" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 3<br>1 2 1 <br>1 3 5<br>2 3 2<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">0 1 3<br></code></pre></td></tr></table></figure><h3 id="运行限制-18"><a href="#运行限制-18" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>2s</td><td>512M</td></tr><tr><td>C</td><td>2s</td><td>512M</td></tr><tr><td>Python3</td><td>2s</td><td>512M</td></tr><tr><td>Java</td><td>2s</td><td>512M</td></tr></tbody></table><h1 id="随机数据下的最短路问题"><a href="#随机数据下的最短路问题" class="headerlink" title="随机数据下的最短路问题"></a>随机数据下的最短路问题</h1><h3 id="题目描述-18"><a href="#题目描述-18" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定 $N$ 个点和 $M$ 条单向道路，每条道路都连接着两个点，每个点都有自己编号，分别为 $1\sim N$ 。</p><p>问你从 $S$ 点出发，到达每个点的最短路径为多少。</p><h3 id="输入描述-18"><a href="#输入描述-18" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第一行包含三个正整数 $N,M,S$。</p><p>第 $2$ 到 $M + 1$ 行每行包含三个正整数 $u,v,w$，表示 $u\rightarrow v$ 之间存在一条距离为 $w$ 的路。</p><p>$1\leq N \leq 5\times10^3$，$1 \leq M \leq 5\times 10^4$，$1 \leq u_i, v_i\leq N$，$0 \leq w_i \leq 10 ^ 9$。</p><p>本题数据随机生成。</p><h3 id="输出描述-18"><a href="#输出描述-18" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出仅一行，共 $N$ 个数，分别表示从编号 $S$ 到编号为 $1\sim N$ 点的最短距离，两两之间用空格隔开。（如果无法到达则输出 $-1$）</p><h3 id="输入输出样例-16"><a href="#输入输出样例-16" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-7"><a href="#示例-1-7" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 3 1<br>1 2 1 <br>1 3 5<br>2 3 2<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">0 1 3<br></code></pre></td></tr></table></figure><h3 id="运行限制-19"><a href="#运行限制-19" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python内置函数</title>
    <link href="/2024/03/16/python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/"/>
    <url>/2024/03/16/python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>本文将这68个内置函数综合整理为12大类，正在学习Python基础的读者一定不要错过，建议收藏学习！<br>内置函数就是Python给你提供的，拿来直接用的函数，比如print.，input等。<br>截止到python版本3.6.2 ，python一共提供了68个内置函数，具体如下<br>abs() dict() help() min() setattr() all() dir() hex() next() slice() any() divmod() id() object() sorted() ascii() enumerate() input() oct() staticmethod() bin() eval() int() open() str() bool() exec() isinstance() ord() sum() bytearray() ﬁlter() issubclass() pow() super() bytes() ﬂoat() iter() print() tuple() callable() format() len() property() type() chr() frozenset() list() range() vars() classmethod() getattr() locals() repr() zip() compile() globals() map() reversed() __import__() complex() hasattr() max() round() delattr() hash() memoryview() set()<br><strong>和数字相关</strong><br><strong>1. 数据类型</strong>  </p><ul><li>bool : 布尔型(True,False)</li><li>int : 整型(整数)</li><li>float : 浮点型(小数)</li><li>complex : 复数</li></ul><p><strong>2. 进制转换</strong>  </p><ul><li>bin() 将给的参数转换成二进制</li><li>otc() 将给的参数转换成八进制</li><li>hex() 将给的参数转换成十六进制</li></ul><p>print(bin(10)) # 二进制:0b1010 print(hex(10)) # 十六进制:0xa print(oct(10)) # 八进制:0o12<br><strong>3. 数学运算</strong>  </p><ul><li>abs() 返回绝对值</li><li>divmode() 返回商和余数</li><li>round() 四舍五入</li><li>pow(a, b) 求a的b次幂, 如果有三个参数. 则求完次幂后对第三个数取余</li><li>sum() 求和</li><li>min() 求最小值</li><li>max() 求最大值</li></ul><p>print(abs(-2)) # 绝对值:2 print(divmod(20,3)) # 求商和余数:(6,2) print(round(4.50)) # 五舍六入:4 print(round(4.51)) #5 print(pow(10,2,3)) # 如果给了第三个参数. 表示最后取余:1 print(sum([1,2,3,4,5,6,7,8,9,10])) # 求和:55 print(min(5,3,9,12,7,2)) #求最小值:2 print(max(7,3,15,9,4,13)) #求最大值:15<br><strong>和数据结构相关</strong><br><strong>1. 序列</strong><br>（1）列表和元组  </p><ul><li>list() 将一个可迭代对象转换成列表</li><li>tuple() 将一个可迭代对象转换成元组</li></ul><p>print(list((1,2,3,4,5,6))) #[1, 2, 3, 4, 5, 6] print(tuple([1,2,3,4,5,6])) #(1, 2, 3, 4, 5, 6)<br>（2）相关内置函数  </p><ul><li>reversed() 将一个序列翻转, 返回翻转序列的迭代器</li><li>slice() 列表的切片</li></ul><p>lst &#x3D; “你好啊” it &#x3D; reversed(lst) # 不会改变原列表. 返回一个迭代器, 设计上的一个规则 print(list(it)) #[‘啊’, ‘好’, ‘你’] lst &#x3D; [1, 2, 3, 4, 5, 6, 7] print(lst[1:3:1]) #[2,3] s &#x3D; slice(1, 3, 1) # 切片用的 print(lst[s]) #[2,3]<br>（3）字符串  </p><ul><li>str() 将数据转化成字符串</li></ul><p>print(str(123)+’456’) #123456 format() 与具体数据相关, 用于计算各种小数, 精算等. s &#x3D; “hello world!” print(format(s, “^20”)) #剧中 print(format(s, “&lt;20”)) #左对齐 print(format(s, “&gt;20”)) #右对齐 # hello world! # hello world! # hello world! print(format(3, ‘b’ )) # 二进制:11 print(format(97, ‘c’ )) # 转换成unicode字符:a print(format(11, ‘d’ )) # ⼗进制:11 print(format(11, ‘o’ )) # 八进制:13 print(format(11, ‘x’ )) # 十六进制(⼩写字母):b print(format(11, ‘X’ )) # 十六进制(大写字母):B print(format(11, ‘n’ )) # 和d⼀样:11 print(format(11)) # 和d⼀样:11 print(format(123456789, ‘e’ )) # 科学计数法. 默认保留6位小数:1.234568e+08 print(format(123456789, ‘0.2e’ )) # 科学计数法. 保留2位小数(小写):1.23e+08 print(format(123456789, ‘0.2E’ )) # 科学计数法. 保留2位小数(大写):1.23E+08 print(format(1.23456789, ‘f’ )) # 小数点计数法. 保留6位小数:1.234568 print(format(1.23456789, ‘0.2f’ )) # 小数点计数法. 保留2位小数:1.23 print(format(1.23456789, ‘0.10f’)) # 小数点计数法. 保留10位小数:1.2345678900 print(format(1.23456789e+3, ‘F’)) # 小数点计数法. 很大的时候输出INF:1234.567890  </p><ul><li>bytes() 把字符串转化成bytes类型</li></ul><p>bs &#x3D; bytes(“今天吃饭了吗”, encoding&#x3D;”utf-8”) print(bs) #b’\xe4\xbb\x8a\xe5\xa4\xa9\xe5\x90\x83\xe9\xa5\xad\xe4\xba\x86\xe5\x90\x97’ bytearray() 返回一个新字节数组. 这个数字的元素是可变的, 并且每个元素的值得范围是[0,256) ret &#x3D; bytearray(“alex” ,encoding &#x3D;’utf-8’) print(ret[0]) #97 print(ret) #bytearray(b’alex’) ret[0] &#x3D; 65 #把65的位置A赋值给ret[0] print(str(ret)) #bytearray(b’Alex’)  </p><ul><li>ord() 输入字符找带字符编码的位置</li><li>chr() 输入位置数字找出对应的字符</li><li>ascii() 是ascii码中的返回该值 不是就返回u</li></ul><p>print(ord(‘a’)) # 字母a在编码表中的码位:97 print(ord(‘中’)) # ‘中’字在编码表中的位置:20013 print(chr(65)) # 已知码位,求字符是什么:A print(chr(19999)) #丟 for i in range(65536): #打印出0到65535的字符 print(chr(i), end&#x3D;” “) print(ascii(“@”)) #‘@’  </p><ul><li>repr() 返回一个对象的string形式</li></ul><p>s &#x3D; “今天\n吃了%s顿\t饭” % 3 print(s)#今天# 吃了3顿 饭 print(repr(s)) # 原样输出,过滤掉转义字符 \n \t \r 不管百分号% #’今天\n吃了3顿\t饭’<br><strong>2. 数据集合</strong>  </p><ul><li>字典：dict 创建一个字典</li><li>集合：set 创建一个集合</li></ul><p>frozenset() 创建一个冻结的集合，冻结的集合不能进行添加和删除操作。<br><strong>3. 相关内置函数</strong>  </p><ul><li>len() 返回一个对象中的元素的个数</li><li>sorted() 对可迭代对象进行排序操作 (lamda)</li></ul><p>语法：sorted(Iterable, key&#x3D;函数(排序规则), reverse&#x3D;False)  </p><ul><li>Iterable: 可迭代对象</li><li>key: 排序规则(排序函数), 在sorted内部会将可迭代对象中的每一个元素传递给这个函数的参数. 根据函数运算的结果进行排序</li><li>reverse: 是否是倒叙. True: 倒叙, False: 正序</li></ul><p>lst &#x3D; [5,7,6,12,1,13,9,18,5] lst.sort() # sort是list里面的一个方法 print(lst) #[1, 5, 5, 6, 7, 9, 12, 13, 18] ll &#x3D; sorted(lst) # 内置函数. 返回给你一个新列表 新列表是被排序的 print(ll) #[1, 5, 5, 6, 7, 9, 12, 13, 18] l2 &#x3D; sorted(lst,reverse&#x3D;True) #倒序 print(l2) #[18, 13, 12, 9, 7, 6, 5, 5, 1] #根据字符串长度给列表排序 lst &#x3D; [‘one’, ‘two’, ‘three’, ‘four’, ‘five’, ‘six’] def f(s): return len(s) l1 &#x3D; sorted(lst, key&#x3D;f, ) print(l1) #[‘one’, ‘two’, ‘six’, ‘four’, ‘five’, ‘three’]  </p><ul><li>enumerate() 获取集合的枚举对象</li></ul><p>lst &#x3D; [‘one’,’two’,’three’,’four’,’five’] for index, el in enumerate(lst,1): # 把索引和元素一起获取,索引默认从0开始. 可以更改 print(index) print(el) # 1 # one # 2 # two # 3 # three # 4 # four # 5 # five  </p><ul><li>all() 可迭代对象中全部是True, 结果才是True</li><li>any() 可迭代对象中有一个是True, 结果就是True</li></ul><p>print(all([1,’hello’,True,9])) #True print(any([0,0,0,False,1,’good’])) #True  </p><ul><li>zip() 函数用于将可迭代的对象作为参数, 将对象中对应的元素打包成一个元组, 然后返回由这些元组组成的列表. 如果各个迭代器的元素个数不一致, 则返回列表长度与最短的对象相同</li></ul><p>lst1 &#x3D; [1, 2, 3, 4, 5, 6] lst2 &#x3D; [‘醉乡民谣’, ‘驴得水’, ‘放牛班的春天’, ‘美丽人生’, ‘辩护人’, ‘被嫌弃的松子的一生’] lst3 &#x3D; [‘美国’, ‘中国’, ‘法国’, ‘意大利’, ‘韩国’, ‘日本’] print(zip(lst1, lst1, lst3)) #&lt;zip object at 0x00000256CA6C7A88&gt; for el in zip(lst1, lst2, lst3): print(el) # (1, ‘醉乡民谣’, ‘美国’) # (2, ‘驴得水’, ‘中国’) # (3, ‘放牛班的春天’, ‘法国’) # (4, ‘美丽人生’, ‘意大利’) # (5, ‘辩护人’, ‘韩国’) # (6, ‘被嫌弃的松子的一生’, ‘日本’)  </p><ul><li>fiter() 过滤 (lamda)</li></ul><p>语法：fiter(function. Iterable)<br>function: 用来筛选的函数. 在ﬁlter中会自动的把iterable中的元素传递给function. 然后根据function返回的True或者False来判断是否保留留此项数据 , Iterable: 可迭代对象<br>def func(i): # 判断奇数 return i % 2 &#x3D;&#x3D; 1 lst &#x3D; [1,2,3,4,5,6,7,8,9] l1 &#x3D; filter(func, lst) #l1是迭代器 print(l1) #&lt;filter object at 0x000001CE3CA98AC8&gt; print(list(l1)) #[1, 3, 5, 7, 9]  </p><ul><li>map() 会根据提供的函数对指定序列列做映射(lamda)</li></ul><p>语法 : map(function, iterable)<br>可以对可迭代对象中的每一个元素进行映射. 分别去执行 function<br>def f(i): return i lst &#x3D; [1,2,3,4,5,6,7,] it &#x3D; map(f, lst) # 把可迭代对象中的每一个元素传递给前面的函数进行处理. 处理的结果会返回成迭代器print(list(it)) #[1, 2, 3, 4, 5, 6, 7]<br><strong>和作用域相关</strong>  </p><ul><li>locals() 返回当前作用域中的名字</li><li>globals() 返回全局作用域中的名字</li></ul><p>def func(): a &#x3D; 10 print(locals()) # 当前作用域中的内容 print(globals()) # 全局作用域中的内容 print(“今天内容很多”) func() # {‘a’: 10} # {‘__name__‘: ‘__main__‘, ‘__doc__‘: None, ‘__package__‘: None, ‘__loader__‘: # &lt;_frozen_importlib_external.SourceFileLoader object at 0x0000026F8D566080&gt;, # ‘__spec__‘: None, ‘__annotations__‘: {}, ‘__builtins__‘: &lt;module ‘builtins’ # (built-in)&gt;, ‘__file__‘: ‘D:&#x2F;pycharm&#x2F;练习&#x2F;week03&#x2F;new14.py’, ‘__cached__‘: None, # ‘func’: &lt;function func at 0x0000026F8D6B97B8&gt;} # 今天内容很多<br><strong>和迭代器生成器相关</strong>  </p><ul><li>range() 生成数据</li><li>next() 迭代器向下执行一次, 内部实际使⽤用了__ next__()⽅方法返回迭代器的下一个项目</li><li>iter() 获取迭代器, 内部实际使用的是__ iter__()⽅方法来获取迭代器</li></ul><p>for i in range(15,-1,-5): print(i) # 15 # 10 # 5 # 0 lst &#x3D; [1,2,3,4,5] it &#x3D; iter(lst) # __iter__()获得迭代器 print(it.__next__()) #1 print(next(it)) #2 __next__() print(next(it)) #3 print(next(it)) #4<br><strong>字符串类型代码的执行</strong>  </p><ul><li>eval() 执行字符串类型的代码. 并返回最终结果</li><li>exec() 执行字符串类型的代码</li><li>compile() 将字符串类型的代码编码. 代码对象能够通过exec语句来执行或者eval()进行求值</li></ul><p>s1 &#x3D; input(“请输入a+b:”) #输入:8+9 print(eval(s1)) # 17 可以动态的执行代码. 代码必须有返回值 s2 &#x3D; “for i in range(5): print(i)” a &#x3D; exec(s2) # exec 执行代码不返回任何内容 # 0 # 1 # 2 # 3 # 4 print(a) #None # 动态执行代码 exec(“”” def func(): print(“ 我是周杰伦”) “”” ) func() #我是周杰伦 code1 &#x3D; “for i in range(3): print(i)” com &#x3D; compile(code1, “”, mode&#x3D;”exec”) # compile并不会执行你的代码.只是编译 exec(com) # 执行编译的结果 # 0 # 1 # 2 code2 &#x3D; “5+6+7” com2 &#x3D; compile(code2, “”, mode&#x3D;”eval”) print(eval(com2)) # 18 code3 &#x3D; “name &#x3D; input(‘请输入你的名字:’)” #输入:hello com3 &#x3D; compile(code3, “”, mode&#x3D;”single”) exec(com3) print(name) #hello<br><strong>输入输出</strong>  </p><ul><li>print() : 打印输出</li><li>input() : 获取用户输出的内容</li></ul><p>print(“hello”, “world”, sep&#x3D;”*“, end&#x3D;”@”) # sep:打印出的内容用什么连接,end:以什么为结尾 #hello*world@<br><strong>内存相关</strong><br>hash() : 获取到对象的哈希值(int, str, bool, tuple). hash算法:(1) 目的是唯一性 (2) dict 查找效率非常高, hash表.用空间换的时间 比较耗费内存<br>s &#x3D; ‘alex’print(hash(s)) #-168324845050430382lst &#x3D; [1, 2, 3, 4, 5]print(hash(lst)) #报错,列表是不可哈希的 id() : 获取到对象的内存地址s &#x3D; ‘alex’print(id(s)) #2278345368944<br><strong>文件操作相关</strong>  </p><ul><li>open() : 用于打开一个文件, 创建一个文件句柄</li></ul><p>f &#x3D; open(‘file’,mode&#x3D;’r’,encoding&#x3D;’utf-8’) f.read() f.close()<br><strong>模块相关</strong>  </p><ul><li>__ import__() : 用于动态加载类和函数</li></ul><p># 让用户输入一个要导入的模块 import os name &#x3D; input(“请输入你要导入的模块:”) __import__(name) # 可以动态导入模块<br><strong>帮 助</strong>  </p><ul><li>help() : 函数用于查看函数或模块用途的详细说明</li></ul><p>print(help(str)) #查看字符串的用途<br><strong>调用相关</strong>  </p><ul><li>callable() : 用于检查一个对象是否是可调用的. 如果返回True, object有可能调用失败, 但如果返回False. 那调用绝对不会成功</li></ul><p>a &#x3D; 10 print(callable(a)) #False 变量a不能被调用 # def f(): print(“hello”) print(callable(f)) # True 函数是可以被调用的<br><strong>查看内置属性</strong>  </p><ul><li>dir() : 查看对象的内置属性, 访问的是对象中的__dir__()方法</li></ul><p>print(dir(tuple)) #查看元组的方法</p><p><strong>我是猿子，一起加油！</strong></p><p><img src="/./../images/python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/v2-65d3d47b28450bebb6c5d80e4455f1e4_b.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥题目汇总1-20</title>
    <link href="/2024/03/15/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB1-20/"/>
    <url>/2024/03/15/%E8%93%9D%E6%A1%A5%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB1-20/</url>
    
    <content type="html"><![CDATA[<h1 id="门牌制作"><a href="#门牌制作" class="headerlink" title="门牌制作"></a>门牌制作</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>小蓝要为一条街的住户制作门牌号。</p><p>这条街一共有 $2020$ 位住户，门牌号从 $1$ 到 $2020$ 编号。</p><p>小蓝制作门牌的方法是先制作 $0$ 到 $9$ 这几个数字字符，最后根据需要将字符粘贴到门牌上，例如门牌 1017 需要依次粘贴字符 $1、0、1、7$，即需要 $1$ 个字符 $0$，$2$ 个字符 $1$，$1$ 个字符 $7$。</p><p>请问要制作所有的 $1$ 到 $2020$ 号门牌，总共需要多少个字符 $2$？</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><h3 id="常规思路"><a href="#常规思路" class="headerlink" title="常规思路"></a>常规思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">s=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2021</span>):<br>    s.append(i)<br>s=<span class="hljs-built_in">str</span>(s)<br><span class="hljs-built_in">print</span>(s.count(<span class="hljs-string">&quot;2&quot;</span>))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">s=<span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2021</span>):s+=<span class="hljs-built_in">str</span>(i)<br><span class="hljs-built_in">print</span>(s.count(<span class="hljs-string">&quot;2&quot;</span>))<br></code></pre></td></tr></table></figure><p>似乎熟悉了python之后，用python求解也很快。</p><h3 id="简单方法"><a href="#简单方法" class="headerlink" title="简单方法"></a>简单方法</h3><h4 id="使用excel的功能"><a href="#使用excel的功能" class="headerlink" title="使用excel的功能"></a>使用excel的功能</h4><p><img src="/./../images/%E7%BC%96%E7%A8%8B1-%E9%97%A8%E7%89%8C%E5%88%B6%E4%BD%9C/image-20240312203337676.png" alt="image-20240312203337676"></p><h5 id="使用序列"><a href="#使用序列" class="headerlink" title="使用序列"></a>使用序列</h5><p><img src="/./../images/%E7%BC%96%E7%A8%8B1-%E9%97%A8%E7%89%8C%E5%88%B6%E4%BD%9C/image-20240312203422558.png" alt="image-20240312203422558"></p><p>使用快捷键CTRL+H，唤出替换，替换所有的2。</p><p><img src="/./../images/%E7%BC%96%E7%A8%8B1-%E9%97%A8%E7%89%8C%E5%88%B6%E4%BD%9C/image-20240312203629711.png" alt="image-20240312203629711"></p><p>可以快速得到结果624，准确又省时间。</p><h1 id="迷宫"><a href="#迷宫" class="headerlink" title="迷宫"></a>迷宫</h1><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>X 星球的一处迷宫游乐场建在某个小山坡上。它是由 $10 \times 10$ 相互连通的小房间组成的。</p><p>房间的地板上写着一个很大的字母。我们假设玩家是面朝上坡的方向站立，则：</p><ul><li>$L$ 表示走到左边的房间，</li><li>$R$ 表示走到右边的房间，</li><li>$U$ 表示走到上坡方向的房间，</li><li>$D$ 表示走到下坡方向的房间。</li></ul><p>X 星球的居民有点懒，不愿意费力思考。他们更喜欢玩运气类的游戏。这个游戏也是如此！</p><p>开始的时候，直升机把 $100$ 名玩家放入一个个小房间内。玩家一定要按照地上的字母移动。</p><p>迷宫地图如下：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">UDDLUULRUL  </span><br><span class="hljs-attribute">UURLLLRRRU  </span><br><span class="hljs-attribute">RRUURLDLRD  </span><br><span class="hljs-attribute">RUDDDDUUUU  </span><br><span class="hljs-attribute">URUDLLRRUU  </span><br><span class="hljs-attribute">DURLRLDLRL  </span><br><span class="hljs-attribute">ULLURLLRDU  </span><br><span class="hljs-attribute">RDLULLRDDD  </span><br><span class="hljs-attribute">UUDDUDUDLL  </span><br><span class="hljs-attribute">ULRDLUURRR</span>  <br></code></pre></td></tr></table></figure><p>请你计算一下，最后，有多少玩家会走出迷宫，而不是在里边兜圈子？</p><p>如果你还没明白游戏规则，可以参看下面一个简化的 4x4 迷宫的解说图：</p><p><img src="/./../images/%E7%BC%96%E7%A8%8B1-%E9%97%A8%E7%89%8C%E5%88%B6%E4%BD%9C/uid1580206-20210317-1615963493412.png" alt="图片描述"></p><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">str</span>=<span class="hljs-string">&#x27;UDDLUULRULUURLLLRRRURRUURLDLRDRUDDDDUUUUURUDLLRRUUDURLRLDLRLULLURLLRDURDLULLRDDDUUDDUDUDLLULRDLUURRR&#x27;</span><br><span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span> <span class="hljs-comment">#计算有几个人出来</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):<br>  a=i//<span class="hljs-number">10</span> <span class="hljs-comment">#一个点的坐标（a，b）</span><br>  b=i%<span class="hljs-number">10</span><br>  c = [&#123;a:b&#125;] <span class="hljs-comment">#用于存放经过的点，若重复经过，说明走不出去了</span><br>  <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">str</span>[a*<span class="hljs-number">10</span>+b]==<span class="hljs-string">&#x27;U&#x27;</span>):<br>      a=a-<span class="hljs-number">1</span><br>    <span class="hljs-keyword">elif</span> (<span class="hljs-built_in">str</span>[a*<span class="hljs-number">10</span>+b]==<span class="hljs-string">&#x27;D&#x27;</span>):<br>      a=a+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">elif</span> (<span class="hljs-built_in">str</span>[a*<span class="hljs-number">10</span>+b]==<span class="hljs-string">&#x27;L&#x27;</span>):<br>      b=b-<span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>      b=b+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span>(&#123;a:b&#125; <span class="hljs-keyword">in</span> c):<br>      <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span>(&#123;a:b&#125; <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> c):<br>      c.append(&#123;a:b&#125;)<br>    <span class="hljs-keyword">if</span>(a&lt;<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> a&gt;<span class="hljs-number">9</span> <span class="hljs-keyword">or</span> b&lt;<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> b&gt;<span class="hljs-number">9</span>):<br>      <span class="hljs-built_in">sum</span>+=<span class="hljs-number">1</span><br>      <span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>)<br></code></pre></td></tr></table></figure><p>DFS解法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-keyword">if</span> <span class="hljs-number">0</span>&lt;=x&lt;<span class="hljs-number">10</span> <span class="hljs-keyword">and</span> <span class="hljs-number">0</span>&lt;=y&lt;<span class="hljs-number">10</span>: <br>    <span class="hljs-keyword">if</span> v[x][y] == <span class="hljs-number">0</span>:<br>      v[x][y] = <span class="hljs-number">1</span>   <span class="hljs-comment">#打上标识，证明此处已走过</span><br>      <span class="hljs-keyword">if</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&#x27;U&#x27;</span>:<br>        flag = dfs(x-<span class="hljs-number">1</span>,y)<br>      <span class="hljs-keyword">elif</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&#x27;D&#x27;</span>:<br>        flag = dfs(x+<span class="hljs-number">1</span>,y)<br>      <span class="hljs-keyword">elif</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&#x27;L&#x27;</span>:<br>        flag = dfs(x,y-<span class="hljs-number">1</span>)<br>      <span class="hljs-keyword">elif</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&#x27;R&#x27;</span>:<br>        flag = dfs(x,y+<span class="hljs-number">1</span>)<br>      v[x][y] = <span class="hljs-number">0</span>  <span class="hljs-comment">#按层返回，清除标识</span><br>      <span class="hljs-keyword">return</span> flag  <br>    <span class="hljs-keyword">else</span>:  <span class="hljs-comment">#如果回到已经走过的地方，说明发生循环，直接返回0标识走不出去</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>  <span class="hljs-keyword">else</span>:      <span class="hljs-comment">#超限说明走出去了  返回1</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br>n = <span class="hljs-number">0</span><br><span class="hljs-built_in">map</span> = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>()) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)] <span class="hljs-comment">#读入迷宫</span><br>v = [[<span class="hljs-number">0</span>]*<span class="hljs-number">10</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]  <span class="hljs-comment">#列表v用来标识该点是否重复经过，避免循环</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    n += dfs(i,j)   <span class="hljs-comment">#对每一个人进行走出迷宫的模拟，n记录最后能走出的人的总数</span><br><span class="hljs-built_in">print</span>(n)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#深度dfs递归</span><br><span class="hljs-built_in">map</span> = [<span class="hljs-string">&#x27;UDDLUULRUL&#x27;</span>,<br>       <span class="hljs-string">&#x27;UURLLLRRRU&#x27;</span>,<br>       <span class="hljs-string">&#x27;RRUURLDLRD&#x27;</span>,<br>       <span class="hljs-string">&#x27;RUDDDDUUUU&#x27;</span>,<br>       <span class="hljs-string">&#x27;URUDLLRRUU&#x27;</span>,<br>       <span class="hljs-string">&#x27;DURLRLDLRL&#x27;</span>,<br>       <span class="hljs-string">&#x27;ULLURLLRDU&#x27;</span>,<br>       <span class="hljs-string">&#x27;RDLULLRDDD&#x27;</span>,<br>       <span class="hljs-string">&#x27;UUDDUDUDLL&#x27;</span>,<br>       <span class="hljs-string">&#x27;ULRDLUURRR&#x27;</span>]<span class="hljs-comment">#这里字符串元素要用单引号括起，用双引号，后面会提示数组越界</span><br>count = <span class="hljs-number">0</span><br>tablist = [[<span class="hljs-number">0</span>] * <span class="hljs-number">10</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> x &gt; <span class="hljs-number">9</span> <span class="hljs-keyword">or</span> y &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> y &gt; <span class="hljs-number">9</span>:  <span class="hljs-comment"># 走出迷宫</span><br>        <span class="hljs-keyword">global</span> count<br>        count += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    <span class="hljs-keyword">if</span> tablist[x][y] == <span class="hljs-number">1</span>:  <span class="hljs-comment"># 已走过</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    tablist[x][y] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 若之前没走过，则标记走过</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&quot;U&quot;</span>:<br>        find(x - <span class="hljs-number">1</span>, y)<span class="hljs-comment">#递归</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&quot;D&quot;</span>:<br>        find(x + <span class="hljs-number">1</span>, y)<br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&quot;L&quot;</span>:<br>        find(x, y - <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">map</span>[x][y] == <span class="hljs-string">&quot;R&quot;</span>:<br>        find(x, y + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)):<br>        tablist = [[<span class="hljs-number">0</span>] * <span class="hljs-number">10</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<span class="hljs-comment">#遍历每个坐标起点开始前都先清零</span><br>        find(i, j)<br><br><span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><h1 id="星期一"><a href="#星期一" class="headerlink" title="星期一"></a>星期一</h1><h3 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>整个 $20$ 世纪（$1901$ 年 $1$ 月 $1$ 日至 $2000$ 年 $12$ 月 $31$ 日之间），一共有多少个星期一？(不要告诉我你不知道今天是星期几)</p><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h3 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h3><p>直接用 Python datetime 库求解，第 6 行可以输出某个日期是星期几。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span>* <br>dt1=datetime(<span class="hljs-number">1901</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <br>dt2=datetime(<span class="hljs-number">2000</span>,<span class="hljs-number">12</span>,<span class="hljs-number">31</span>) <br><span class="hljs-built_in">print</span>(dt1.weekday()) <span class="hljs-comment"># 周一为0，周二为1... </span><br>td=dt2-dt1 <br><span class="hljs-built_in">print</span>(td.days//<span class="hljs-number">7</span>)<br></code></pre></td></tr></table></figure><h1 id="乘积尾零"><a href="#乘积尾零" class="headerlink" title="乘积尾零"></a>乘积尾零</h1><h3 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>如下的 $10$ 行数据，每行有 $10$ 个整数，请你求出它们的乘积的末尾有多少个零？</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5650 4542 3554 473 946 4114 3871 9073 90 4329 2758 7949 6113 5659 5245 7432 3051 4434 6704 3594 9937 1173 6866 3397 4759 7557 3070 2287 1453 9899 1486 5722 3135 1170 4014 5510 5120 729 2880 9019 2049 698 4582 4346 4427 646 9742 7340 1230 7683 5693 7015 6887 7381 4172 4341 2909 2027 7355 5649 6701 6645 1671 5978 2704 9926 295 3125 3878 6785 2066 4247 4800 1578 6652 4616 1113 6205 3264 2915 3966 5291 2904 1285 2193 1428 2265 8730 9436 7074 689 5510 8243 6114 337 4096 8199 7313 3685 211<br></code></pre></td></tr></table></figure><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h3 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h3><p>将字符串转换成表格，先计算乘积，然后结果由int整数型转换成str字符型，再存入列表中，这时候使用pop方法和列表切片，简单的遍历一下，就能得到结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">s=<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">5650 4542 3554 473 946 4114 3871 9073 90 4329 </span><br><span class="hljs-string">2758 7949 6113 5659 5245 7432 3051 4434 6704 3594 </span><br><span class="hljs-string">9937 1173 6866 3397 4759 7557 3070 2287 1453 9899 </span><br><span class="hljs-string">1486 5722 3135 1170 4014 5510 5120 729 2880 9019 </span><br><span class="hljs-string">2049 698 4582 4346 4427 646 9742 7340 1230 7683 </span><br><span class="hljs-string">5693 7015 6887 7381 4172 4341 2909 2027 7355 5649 </span><br><span class="hljs-string">6701 6645 1671 5978 2704 9926 295 3125 3878 6785 </span><br><span class="hljs-string">2066 4247 4800 1578 6652 4616 1113 6205 3264 2915 </span><br><span class="hljs-string">3966 5291 2904 1285 2193 1428 2265 8730 9436 7074 </span><br><span class="hljs-string">689 5510 8243 6114 337 4096 8199 7313 3685 211 </span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>cnt=<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s.split():cnt*=<span class="hljs-built_in">int</span>(i)<br>cnt,res = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">str</span>(cnt)),<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> cnt[::-<span class="hljs-number">1</span>]:<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-string">&#x27;0&#x27;</span>:<br>        cnt.pop()<br>        res+=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure><p>当然，也可以不使用列表</p><p><img src="/./../images/%E7%BC%96%E7%A8%8B1-%E9%97%A8%E7%89%8C%E5%88%B6%E4%BD%9C/236f300ccb9673d4fc3b0c7790de774a-0.png" alt="图片描述"></p><h1 id="付账问题"><a href="#付账问题" class="headerlink" title="付账问题"></a>付账问题</h1><h3 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h3><p>几个人一起出去吃饭是常有的事。但在结帐的时候，常常会出现一些争执。</p><p>现在有 $n$ 个人出去吃饭，他们总共消费了 $S$ 元。其中第 $i$ 个人带了 $a_i$元。幸运的是，所有人带的钱的总数是足够付账的，但现在问题来了：每个人分别要出多少钱呢？</p><p>为了公平起见，我们希望在总付钱量恰好为 $S$ 的前提下，最后每个人付的钱的标准差最小。这里我们约定，每个人支付的钱数可以是任意非负实数，即可以不是 1 分钱的整数倍。你需要输出最小的标准差是多少。</p><p>标准差的介绍：标准差是多个数与它们平均数差值的平方平均数，一般用于刻画这些数之间的”偏差有多大”。形式化地说，设第 $i$ 个人付的钱为 $b_i$ 元，那么标准差为 :</p><p>$S&#x3D;\sqrt{\frac{1}{n}\sum_{i&#x3D;1}^{n}(b_i-\frac{1}{n}\sum_{i&#x3D;1}^{n}b_i)^{2}}$</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>第一行包含两个整数 $n、S$；</p><p>第二行包含 $n$ 个非负整数 $a_1, \cdots, a_n$。</p><p>其中，$n  \leq  5 \times 10^5, 0  \leq  a_i  \leq  10^9$ 。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出最小的标准差，四舍五入保留 4 位小数。</p><p>保证正确答案在加上或减去 $10^{−9}$ 后不会导致四舍五入的结果发生变化。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 2333 <br>666 666 666 666 666<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">0.0000<br></code></pre></td></tr></table></figure><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> *<br>n, s = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>a.sort()<br>avg = s/n<br><span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>     <span class="hljs-keyword">if</span> a[i]*(n-i) &lt; s:<br>          <span class="hljs-built_in">sum</span> += <span class="hljs-built_in">pow</span>(a[i]-avg,<span class="hljs-number">2</span>)<br>          s -= a[i]<br>     <span class="hljs-keyword">else</span>:<br>          cur_avg = s/(n-i);      <span class="hljs-comment">#更新平均出钱数</span><br>          <span class="hljs-built_in">sum</span> += <span class="hljs-built_in">pow</span>(cur_avg-avg,<span class="hljs-number">2</span>)*(n-i)<br>          <span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:.4f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(sqrt(<span class="hljs-built_in">sum</span>/(n))))<br></code></pre></td></tr></table></figure><h1 id="数字三角形"><a href="#数字三角形" class="headerlink" title="数字三角形"></a>数字三角形</h1><h3 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h3><p><img src="/./../images/%E7%BC%96%E7%A8%8B1-%E9%97%A8%E7%89%8C%E5%88%B6%E4%BD%9C/wm.png" alt="图片描述"></p><p>上图给出了一个数字三角形。从三角形的顶部到底部有很多条不同的路径。对于每条路径，把路径上面的数加起来可以得到一个和，你的任务就是找到最大的和（路径上的每一步只可沿左斜线向下或右斜线向下走）。</p><h3 id="输入描述-1"><a href="#输入描述-1" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $N\ (1 \leq N \leq 100)$，表示三角形的行数。</p><p>下面的 $N$ 行给出数字三角形。数字三角形上的数都是 $0$ 至 $99$ 之间的整数。</p><h3 id="输出描述-1"><a href="#输出描述-1" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示答案。</p><h3 id="输入输出样例-1"><a href="#输入输出样例-1" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 <br>7 <br>3 8<br>8 1 0<br>2 7 4 4<br>4 5 2 6 5<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">30<br></code></pre></td></tr></table></figure><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="42点问题"><a href="#42点问题" class="headerlink" title="42点问题"></a>42点问题</h1><h3 id="题目描述-6"><a href="#题目描述-6" class="headerlink" title="题目描述"></a>题目描述</h3><p>请你设计一个程序对该问题进行解答。</p><p>众所周知在扑克牌中，有一个老掉牙的游戏叫做 $24$ 点，选取 $4$ 张牌进行加减乘除，看是否能得出 $24$ 这个答案。</p><p>现在小蓝同学发明了一个新游戏，他从扑克牌中依次抽出6张牌，注意不是一次抽出，进行计算，看是否能够组成 $42$ 点,满足输出 <code>YES</code>，反之输出 <code>NO</code>。</p><p>最先抽出来的牌作为第一个操作数，抽出牌做第二个操作数，运算结果再当作第一个操作数，继续进行操作。</p><p>注：除不尽的情况保留整数，而且扑克牌的四张 $10$ 都丢了，不会出现 $10$。</p><p>请设计一个程序对该问题进行解答。</p><h3 id="输入描述-2"><a href="#输入描述-2" class="headerlink" title="输入描述"></a>输入描述</h3><p>输出仅一行包含 $6$ 个字符。</p><p>保证字符 $\in$ <code>3 4 5 6 7 8 9 10 J Q K A 2</code>。</p><h3 id="输出描述-2"><a href="#输出描述-2" class="headerlink" title="输出描述"></a>输出描述</h3><p>若给出到字符能够组成 $42$ 点 , 满足输出 <code>YES</code>，反之输出 <code>NO</code>。</p><h3 id="输入输出样例-2"><a href="#输入输出样例-2" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">K A Q 6 2 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">YES<br></code></pre></td></tr></table></figure><h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><ul><li>$K\times  A&#x3D;K$ 即 $13\times 1&#x3D;13$</li><li>$13&#x2F;12&#x3D;1$ 保留整数</li><li>$1+6&#x3D;7$</li><li>$7*2&#x3D;14$</li><li>$14*3&#x3D;42$</li></ul><h3 id="运行限制-6"><a href="#运行限制-6" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="数的划分"><a href="#数的划分" class="headerlink" title="数的划分"></a>数的划分</h1><h3 id="题目描述-7"><a href="#题目描述-7" class="headerlink" title="题目描述"></a>题目描述</h3><p>将整数 $n$ 分成 $k$ 份，且每份不能为空，任意两份不能相同(不考虑顺序)。</p><p>例如：$n&#x3D;7，k&#x3D;3$，下面三种分法被认为是相同的。</p><p>$1，1，5; 1，5，1; 5，1，1;$</p><p>问有多少种不同的分法。</p><h3 id="输入描述-3"><a href="#输入描述-3" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行，$2$ 个整数 $n,k\ (6 \leq n  \leq  200，2  \leq  k  \leq  6)$。</p><h3 id="输出描述-3"><a href="#输出描述-3" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，即不同的分法。</p><h3 id="输入输出样例-3"><a href="#输入输出样例-3" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">7 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br></code></pre></td></tr></table></figure><h3 id="运行限制-7"><a href="#运行限制-7" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="数的计算"><a href="#数的计算" class="headerlink" title="数的计算"></a>数的计算</h1><h3 id="题目描述-8"><a href="#题目描述-8" class="headerlink" title="题目描述"></a>题目描述</h3><p>输入一个自然数 $n\ (n \leq 1000)$，我们对此自然数按照如下方法进行处理:</p><ol><li><p>不作任何处理;</p></li><li><p>在它的左边加上一个自然数,但该自然数不能超过原数的一半;</p></li><li><p>加上数后,继续按此规则进行处理,直到不能再加自然数为止。</p></li></ol><p>问总共可以产生多少个数。</p><h3 id="输入描述-4"><a href="#输入描述-4" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一个正整数 $n$。</p><h3 id="输出描述-4"><a href="#输出描述-4" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示答案。</p><h3 id="输入输出样例-4"><a href="#输入输出样例-4" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-1"><a href="#示例-1-1" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">6<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">6<br></code></pre></td></tr></table></figure><h3 id="运行限制-8"><a href="#运行限制-8" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="N皇后问题"><a href="#N皇后问题" class="headerlink" title="N皇后问题"></a>N皇后问题</h1><h3 id="题目描述-9"><a href="#题目描述-9" class="headerlink" title="题目描述"></a>题目描述</h3><p>在 $N\times N$ 的方格棋盘放置了 $N$ 个皇后，使得它们不相互攻击（即任意 $2$ 个皇后不允许处在同一排，同一列，也不允许处在与棋盘边框成 $45$ 角的斜线上。你的任务是，对于给定的 $N$，求出有多少种合法的放置方法。</p><h3 id="输入描述-5"><a href="#输入描述-5" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入中有一个正整数 $N≤10$，表示棋盘和皇后的数量</p><h3 id="输出描述-5"><a href="#输出描述-5" class="headerlink" title="输出描述"></a>输出描述</h3><p>为一个正整数，表示对应输入行的皇后的不同放置数量。</p><h3 id="输入输出样例-5"><a href="#输入输出样例-5" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-2"><a href="#示例-1-2" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">10<br></code></pre></td></tr></table></figure><h3 id="运行限制-9"><a href="#运行限制-9" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="路径之谜"><a href="#路径之谜" class="headerlink" title="路径之谜"></a>路径之谜</h1><h3 id="题目描述-10"><a href="#题目描述-10" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明冒充 $X$ 星球的骑士，进入了一个奇怪的城堡。</p><p>城堡里边什么都没有，只有方形石头铺成的地面。</p><p>假设城堡地面是 $n \times n$ 个方格。如下图所示。</p><p><img src="/./../images/%E7%BC%96%E7%A8%8B1-%E9%97%A8%E7%89%8C%E5%88%B6%E4%BD%9C/uid1580206-20210202-1612248935564.png" alt="图1"></p><p>按习俗，骑士要从西北角走到东南角。可以横向或纵向移动，但不能斜着走，也不能跳跃。每走到一个新方格，就要向正北方和正西方各射一箭。（城堡的西墙和北墙内各有 $n$ 个靶子）同一个方格只允许经过一次。但不必走完所有的方格。如果只给出靶子上箭的数目，你能推断出骑士的行走路线吗？有时是可以的，比如上图中的例子。</p><p>本题的要求就是已知箭靶数字，求骑士的行走路径（测试数据保证路径唯一）</p><h3 id="输入描述-6"><a href="#输入描述-6" class="headerlink" title="输入描述"></a>输入描述</h3><p>第一行一个整数 $N$ ($0  \leq  N  \leq  20$)，表示地面有 $N \times N$ 个方格。</p><p>第二行 $N$ 个整数，空格分开，表示北边的箭靶上的数字（自西向东）</p><p>第三行 $N$ 个整数，空格分开，表示西边的箭靶上的数字（自北向南）</p><h3 id="输出描述-6"><a href="#输出描述-6" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行若干个整数，表示骑士路径。</p><p>为了方便表示，我们约定每个小格子用一个数字代表，从西北角开始编号: 0,1,2,3 $\cdots$</p><p>比如，上图中的方块编号为：</p><p>0 1 2 3</p><p>4 5 6 7</p><p>8 9 10 11</p><p>12 13 14 15</p><h3 id="输入输出样例-6"><a href="#输入输出样例-6" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br>2 4 3 4<br>4 3 3 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">0 4 5 1 2 3 7 11 10 9 13 14 15<br></code></pre></td></tr></table></figure><h3 id="运行限制-10"><a href="#运行限制-10" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>5s</td><td>256M</td></tr><tr><td>C</td><td>5s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>Java</td><td>5s</td><td>256M</td></tr></tbody></table><h1 id="最大数字"><a href="#最大数字" class="headerlink" title="最大数字"></a>最大数字</h1><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个正整数 $N$ 。你可以对 $N$ 的任意一位数字执行任意次以下 2 种操 作：</p><ol><li><p>将该位数字加 1 。如果该位数字已经是 9 , 加 1 之后变成 0 。</p></li><li><p>将该位数字减 1 。如果该位数字已经是 0 , 减 1 之后变成 9 。</p></li></ol><p>你现在总共可以执行 1 号操作不超过 $A$ 次, 2 号操作不超过 $B$ 次。 请问你最大可以将 $N$ 变成多少?</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行包含 3 个整数: $N, A, B$ 。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>一个整数代表答案。</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">123 1 2<br></code></pre></td></tr></table></figure><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">933<br></code></pre></td></tr></table></figure><h3 id="样例说明-1"><a href="#样例说明-1" class="headerlink" title="样例说明"></a>样例说明</h3><p>对百位数字执行 2 次 2 号操作, 对十位数字执行 1 次 1 号操作。</p><h3 id="评测用例规模与约定"><a href="#评测用例规模与约定" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30 %$ 的数据, $1 \leq N \leq 100 ; 0 \leq A, B \leq 10$。</p><p>对于 $100 %$ 的数据, $1 \leq N \leq 10^{17} ; 0 \leq A, B \leq 100$</p><h3 id="运行限制-11"><a href="#运行限制-11" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>512M</td></tr><tr><td>C</td><td>1s</td><td>512M</td></tr><tr><td>Python3</td><td>1s</td><td>512M</td></tr><tr><td>Java</td><td>1s</td><td>512M</td></tr></tbody></table><h1 id="长草"><a href="#长草" class="headerlink" title="长草"></a>长草</h1><h3 id="题目描述-11"><a href="#题目描述-11" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明有一块空地，他将这块空地划分为 $n$ 行 $m$ 列的小块，每行和每列的长度都为 1。</p><p>小明选了其中的一些小块空地，种上了草，其他小块仍然保持是空地。</p><p>这些草长得很快，每个月，草都会向外长出一些，如果一个小块种了草，则它将向自己的上、下、左、右四小块空地扩展，</p><p>这四小块空地都将变为有草的小块。请告诉小明，$k$ 个月后空地上哪些地方有草。</p><h3 id="输入描述-7"><a href="#输入描述-7" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含两个整数 $n, m$。</p><p>接下来 $n$ 行，每行包含 $m$ 个字母，表示初始的空地状态，字母之间没有空格。如果为小数点，表示为空地，如果字母为 $g$，表示种了草。</p><p>接下来包含一个整数 $k$。 其中，$2   \leq   n, m   \leq   1000，1   \leq   k   \leq   1000$。</p><h3 id="输出描述-7"><a href="#输出描述-7" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出 $n$ 行，每行包含 $m$ 个字母，表示 $k$ 个月后空地的状态。如果为小数点，表示为空地，如果字母为 $g$，表示长了草。</p><h3 id="输入输出样例-7"><a href="#输入输出样例-7" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">4 5 <br>.g...<br>.....<br>..g..<br>.....<br>2<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">gggg.<br>gggg.<br>ggggg <br>.ggg.<br></code></pre></td></tr></table></figure><h3 id="运行限制-12"><a href="#运行限制-12" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="走迷宫"><a href="#走迷宫" class="headerlink" title="走迷宫"></a>走迷宫</h1><h3 id="题目描述-12"><a href="#题目描述-12" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个 $N\times M$ 的网格迷宫 $G$。$G$ 的每个格子要么是道路，要么是障碍物（道路用 $1$ 表示，障碍物用 $0$ 表示）。</p><p>已知迷宫的入口位置为 $(x_1,y_1)$，出口位置为 $(x_2 , y_2)$。问从入口走到出口，最少要走多少个格子。</p><h3 id="输入描述-8"><a href="#输入描述-8" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第 $1$ 行包含两个正整数 $N,M$，分别表示迷宫的大小。</p><p>接下来输入一个 $N\times M$ 的矩阵。若 $G_{i,j}&#x3D;1$ 表示其为道路，否则表示其为障碍物。</p><p>最后一行输入四个整数 $x_1,y_1,x_2,y_2$，表示入口的位置和出口的位置。</p><p>$1\leq N,M\leq10^2$，$0\leq G_{i,j}\leq 1$，$1\leq x_1,x_2\leq N$，$1\leq y_1,y_2\leq M$。</p><h3 id="输出描述-8"><a href="#输出描述-8" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出仅一行，包含一个整数表示答案。</p><p>若无法从入口到出口，则输出 $-1$。</p><h3 id="输入输出样例-8"><a href="#输入输出样例-8" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-3"><a href="#示例-1-3" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 5<br>1 0 1 1 0 <br>1 1 0 1 1 <br>0 1 0 1 1 <br>1 1 1 1 1 <br>1 0 0 0 1<br>1 1 5 5<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">8<br></code></pre></td></tr></table></figure><h3 id="运行限制-13"><a href="#运行限制-13" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="迷宫-1"><a href="#迷宫-1" class="headerlink" title="迷宫"></a>迷宫</h1><h3 id="题目描述-13"><a href="#题目描述-13" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>下图给出了一个迷宫的平面图，其中标记为 $1$ 的为障碍，标记为 $0$ 的为可以通行的地方。</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">010000 <br>000100<br>001001 <br>110000<br></code></pre></td></tr></table></figure><p>迷宫的入口为左上角，出口为右下角，在迷宫中，只能从一个位置走到这 个它的上、下、左、右四个方向之一。</p><p>对于上面的迷宫，从入口开始，可以按 <code>DRRURRDDDR</code> 的顺序通过迷宫， 一共 $10$ 步。其中 $D、U、L、R$ 分别表示向下、向上、向左、向右走。 对于下面这个更复杂的迷宫（$30$ 行 $50$ 列），请找出一种通过迷宫的方式，其使用的步数最少，在步数最少的前提下，请找出字典序最小的一个作为答案。</p><p>请注意在字典序中 $D&lt;L&lt;R&lt;U$。</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs txt">01010101001011001001010110010110100100001000101010 <br>00001000100000101010010000100000001001100110100101 <br>01111011010010001000001101001011100011000000010000 <br>01000000001010100011010000101000001010101011001011 <br>00011111000000101000010010100010100000101100000000 <br>11001000110101000010101100011010011010101011110111 <br>00011011010101001001001010000001000101001110000000 <br>10100000101000100110101010111110011000010000111010 <br>00111000001010100001100010000001000101001100001001 <br>11000110100001110010001001010101010101010001101000 <br>00010000100100000101001010101110100010101010000101 <br>11100100101001001000010000010101010100100100010100 <br>00000010000000101011001111010001100000101010100011 <br>10101010011100001000011000010110011110110100001000 <br>10101010100001101010100101000010100000111011101001 <br>10000000101100010000101100101101001011100000000100 <br>10101001000000010100100001000100000100011110101001 <br>00101001010101101001010100011010101101110000110101 <br>11001010000100001100000010100101000001000111000010 <br>00001000110000110101101000000100101001001000011101 <br>10100101000101000000001110110010110101101010100001 <br>00101000010000110101010000100010001001000100010101 <br>10100001000110010001000010101001010101011111010010 <br>00000100101000000110010100101001000001000000000010 <br>11010000001001110111001001000011101001011011101000 <br>00000110100010001000100000001000011101000000110011 <br>10101000101000100010001111100010101001010000001000 <br>10000010100101001010110000000100101010001011101000 <br>00111100001000010000000110111000000001000000001011 <br>10000001100111010111010001000110111010101101111000<br></code></pre></td></tr></table></figure><h3 id="运行限制-14"><a href="#运行限制-14" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table><h1 id="公共抽签"><a href="#公共抽签" class="headerlink" title="公共抽签"></a>公共抽签</h1><h3 id="题目描述-14"><a href="#题目描述-14" class="headerlink" title="题目描述"></a>题目描述</h3><p>小$A$的学校，蓝桥杯的参赛名额非常有限，只有 $m$ 个名额，但是共有 $n$ 个人报名。</p><p>作为老师非常苦恼，他不知道该让谁去，他在寻求一个绝对公平的方式。</p><p>于是他准备让大家抽签决定，即 $m$ 个签是去，剩下的是不去。</p><p>小 $A$ 非常想弄明白最后的抽签结果会有多少种不同到情况，请你设计一个程序帮帮小 $A$！</p><h3 id="输入描述-9"><a href="#输入描述-9" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第一行包含两个字符 $n,m$，其含义如题所述。</p><p>接下来第二行到第 $n+1$ 行每行包含一个字符串 $S$ ，表示个人名。</p><p>$1\leq m\leq n\leq 15$。</p><h3 id="输出描述-9"><a href="#输出描述-9" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出共若干行，每行包含 $m$ 个字符串，表示该结果被选中到人名（需按字符串的输入顺序大小对结果进行排序）。</p><h3 id="输入输出样例-9"><a href="#输入输出样例-9" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 2 <br>xiaowang<br>xiaoA <br>xiaoli<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">xiaowang xiaoA<br>xiaowang xiaoli<br>xiaoA xiaoli<br></code></pre></td></tr></table></figure><h3 id="运行限制-15"><a href="#运行限制-15" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="座次问题"><a href="#座次问题" class="headerlink" title="座次问题"></a>座次问题</h1><h3 id="题目描述-15"><a href="#题目描述-15" class="headerlink" title="题目描述"></a>题目描述</h3><p>小 $A$ 的学校，老师好不容易解决了蓝桥杯的报名问题，现在老师又犯愁了。</p><p>现在有 $N$ 位同学参加比赛，但是老师想给他们排座位，但是排列方式太多了。</p><p>老师非常想弄明白最后的排座次的结果是什么样子的，到底有多少种结果。</p><p>请设计一个程序帮助老师。</p><p>最后输出各种情况的人名即可，一行一种情况，每种情况的名字按照报名即输入顺序排序。</p><h3 id="输入描述-10"><a href="#输入描述-10" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第一行包含一个整数 $N$。</p><p>接下来 $N$ 行每行包含一个字符串 $S_i$，表示人名。</p><p>$1\leq N \leq 10$，$\sum\limits_{i&#x3D;1}^{N} |S_i| \leq 10^2$。</p><h3 id="输出描述-10"><a href="#输出描述-10" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出共若干行，每行输出各种情况的人名。一行一种情况，每种情况的名字按照报名即输入顺序排序。</p><h3 id="输入输出样例-10"><a href="#输入输出样例-10" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-6"><a href="#示例-6" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 <br>xiaowang<br>xiaoA <br>xiaoli<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">xiaowang xiaoA xiaoli<br>xiaowang xiaoli xiaoA <br>xiaoA xiaowang xiaoli<br>xiaoA xiaoli xiaowang <br>xiaoli xiaowang xiaoA<br>xiaoli xiaoA xiaowang<br></code></pre></td></tr></table></figure><h3 id="运行限制-16"><a href="#运行限制-16" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="CLZ银行问题"><a href="#CLZ银行问题" class="headerlink" title="CLZ银行问题"></a>CLZ银行问题</h1><h3 id="题目描述-16"><a href="#题目描述-16" class="headerlink" title="题目描述"></a>题目描述</h3><p>$CLZ$ 银行只有两个接待窗口，$VIP$ 窗口和普通窗口，$VIP$ 用户进入 $VIP$ 窗口排队，剩下的进入普通窗口排队。现有 $M$ 次操作，操作有四种类型，如下：</p><ul><li><code>IN name V</code>：表示一名叫 <code>name</code> 的用户到 $VIP$ 窗口排队</li><li><code>OUT V</code>：表示 $VIP$ 窗口队头的用户离开排队</li><li><code>IN name N</code>：表示一名叫 <code>name</code> 的用户到普通窗口排队</li><li><code>OUT N</code>：表示普通窗口队头的用户离开排队</li></ul><p>求 $M$ 次操作结束后 $VIP$ 窗口队列和普通窗口队列中的姓名。</p><h3 id="输入描述-11"><a href="#输入描述-11" class="headerlink" title="输入描述"></a>输入描述</h3><p>第一行是一个整数 $M（1\leq M \leq 1000）$，表示一共有 $M$ 次操作。</p><p>第二行到第 $M+1$ 行输入操作，格式如下：</p><ul><li><code>IN name V</code></li><li><code>OUT V</code></li><li><code>IN name N</code></li><li><code>OUT N</code></li></ul><h3 id="输出描述-11"><a href="#输出描述-11" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出 $M$ 次操作后 $VIP$ 窗口队列和普通窗口队列中的姓名（从头到尾），先输出 $VIP$ 窗口队列后输出普通窗口队列。</p><h3 id="输入输出样例-11"><a href="#输入输出样例-11" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1-4"><a href="#示例-1-4" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 <br>IN xiaoming N <br>IN Adel V <br>IN laozhao N<br>OUT N <br>IN CLZ V<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">Adel<br>CLZ<br>laozhao<br></code></pre></td></tr></table></figure><h3 id="运行限制-17"><a href="#运行限制-17" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>1s</td><td>128M</td></tr><tr><td>Java</td><td>1s</td><td>128M</td></tr></tbody></table><h1 id="费里的语言"><a href="#费里的语言" class="headerlink" title="费里的语言"></a>费里的语言</h1><h3 id="题目描述-17"><a href="#题目描述-17" class="headerlink" title="题目描述"></a>题目描述</h3><p>小发明家弗里想创造一种新的语言，众所周知，发明一门语言是非常困难的，首先你就要克服一个困难就是，有大量的单词需要处理，现在弗里求助你帮他写一款程序，判断是否出现重复的两个单词。</p><h3 id="输入描述-12"><a href="#输入描述-12" class="headerlink" title="输入描述"></a>输入描述</h3><p>第 $1$ 行，输入 $N$，代表共计创造了多少个单词。</p><p>第 $2$ 行至第 $N+1$ 行，输入 $N$ 个单词。</p><p>$1\leq N \leq 10^4$，保证字符串的总输入量不超过 $10^6$。</p><h3 id="输出描述-12"><a href="#输出描述-12" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出仅一行。若有重复的单词，就输出重复单词，没有重复单词，就输出 <code>NO</code>，多个重复单词输出最先出现的。</p><h3 id="输入输出样例-12"><a href="#输入输出样例-12" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">6<br>1fagas <br>dsafa32j <br>lkiuopybncv<br>hfgdjytr <br>cncxfg <br>sdhrest<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">NO<br></code></pre></td></tr></table></figure><h4 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 <br>sdfggfds<br>fgsdhsdf<br>dsfhsdhr <br>sdfhdfh <br>sdfggfds<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">sdfggfds<br></code></pre></td></tr></table></figure><h3 id="运行限制-18"><a href="#运行限制-18" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>3s</td><td>512M</td></tr><tr><td>C</td><td>3s</td><td>512M</td></tr><tr><td>Python3</td><td>3s</td><td>512M</td></tr><tr><td>Java</td><td>3s</td><td>512M</td></tr></tbody></table><h1 id="快递分拣"><a href="#快递分拣" class="headerlink" title="快递分拣"></a>快递分拣</h1><h3 id="题目描述-18"><a href="#题目描述-18" class="headerlink" title="题目描述"></a>题目描述</h3><p>蓝桥王国的每个快递都包含两个参数：1.快递单号 2.快递城市。</p><p>小李是蓝桥王国的一名快递员，每天的快递分拣让他苦不堪言。</p><p>于是他想要你帮他设计一个程序用于快递的分拣（将不同快递按城市信息分开）。</p><h3 id="输入描述-13"><a href="#输入描述-13" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第一行包含一个整数 $N$,表示快递的个数。</p><p>接下来第 $2 \sim N+1$ 行每行包含一个字符串 $S$ 和一个字符串 $P$，分别快递单号以及快递对应的城市。</p><p>$1\leq N \leq 10^3$，保证数据量不超过 $10^6$。</p><h3 id="输出描述-13"><a href="#输出描述-13" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出共若干行。按城市的输入顺序依次输出城市的名称以及城市的快递个数，以及该城市的所有快递单号（单号按照输入顺序排序）。</p><h3 id="输入输出样例-13"><a href="#输入输出样例-13" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-7"><a href="#示例-7" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs txt">10 <br>10124214 北京<br>12421565 上海<br>sdafasdg213 天津<br>fasdfga124 北京 <br>145252 上海 <br>235wtdfsg 济南 <br>3242356fgdfsg 成都<br>23423 武汉 <br>23423565f 沈阳 <br>1245dfwfs 成都<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs txt">北京 2 <br>10124214 fasdfga124 <br>上海 2 <br>12421565 145252 <br>天津 1 <br>sdafasdg213<br>济南 1 <br>235wtdfsg <br>成都 2 <br>3242356fgdfsg <br>1245dfwfs <br>武汉 1 <br>23423 <br>沈阳 1 <br>23423565f<br></code></pre></td></tr></table></figure><h3 id="运行限制-19"><a href="#运行限制-19" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Python3</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>1s</td><td>256M</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>刷题</category>
      
      <category>蓝桥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>案例：学生信息查询系统</title>
    <link href="/2024/03/13/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F/"/>
    <url>/2024/03/13/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>案例：员工管理系统</title>
    <link href="/2024/03/12/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <url>/2024/03/12/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="员工管理系统-Employee-management-system"><a href="#员工管理系统-Employee-management-system" class="headerlink" title="员工管理系统(Employee management system)"></a>员工管理系统(Employee management system)</h1><h2 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h2><p><img src="/./../images/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/ebec0d3ab5b7ec1e7ed5ea0f0880c0c.jpg" alt="ebec0d3ab5b7ec1e7ed5ea0f0880c0c"></p><p><img src="/./../images/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/c6f87b6db465ad9e17a8c374d02bf04.jpg" alt="c6f87b6db465ad9e17a8c374d02bf04"></p><h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><p>需求包括增删改查，可以使用mybatis框架快速满足需求</p><h4 id="创建一个maven项目Ems-Employee-management-system"><a href="#创建一个maven项目Ems-Employee-management-system" class="headerlink" title="创建一个maven项目Ems(Employee management system)"></a>创建一个maven项目Ems(Employee management system)</h4><p><img src="/./../images/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20240312205526482.png" alt="image-20240312205526482"></p><h4 id="修改pom-xml配置"><a href="#修改pom-xml配置" class="headerlink" title="修改pom.xml配置"></a>修改pom.xml配置</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.zdx-1<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>Ems<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.18<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="建立对应的文件目录"><a href="#建立对应的文件目录" class="headerlink" title="建立对应的文件目录"></a>建立对应的文件目录</h4><p><img src="/./../images/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20240312205838163.png" alt="image-20240312205838163"></p><h4 id="使用MySql建立数据库连接"><a href="#使用MySql建立数据库连接" class="headerlink" title="使用MySql建立数据库连接"></a>使用MySql建立数据库连接</h4><p><img src="/./../images/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20240312205955975.png" alt="image-20240312205955975"></p><h5 id="新建数据库Ems，新建表employee，添加几条数据"><a href="#新建数据库Ems，新建表employee，添加几条数据" class="headerlink" title="新建数据库Ems，新建表employee，添加几条数据"></a>新建数据库Ems，新建表employee，添加几条数据</h5><p><img src="/./../images/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/image-20240312210254584.png" alt="image-20240312210254584"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">use ems;<br>create table employee(<br>    id int primary key auto_increment,<br>    name varchar(20),<br>    age int,<br>    position varchar(20)<br>);<br>insert into employee (name, age, position)<br>VALUES<br>    (&#x27;John&#x27;, 20, &#x27;developer&#x27;),<br>    (&#x27;Bob&#x27;, 21, &#x27;developer&#x27;),<br>    (&#x27;测试员01&#x27;, 22, &#x27;developer&#x27;);<br></code></pre></td></tr></table></figure><h4 id="在resources中添加项目连接配置"><a href="#在resources中添加项目连接配置" class="headerlink" title="在resources中添加项目连接配置"></a>在resources中添加项目连接配置</h4><p><strong>mybatis-config.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybaties.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;mysql.driver&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;mysql.url&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;mysql.username&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;mysql.password&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;mapper/UserMapper.xml&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/example/mapper/StudentMapper.xml&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/example/mapper/CustomerMapper.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>db.properties</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">mysql.driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-attr">mysql.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/Ems?serverTimezone=UTC&amp;characterEncoding=utf8&amp;useUnicode=true&amp;useSSL=false</span><br><span class="hljs-attr">mysql.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">mysql.password</span>=<span class="hljs-string">123456</span><br></code></pre></td></tr></table></figure><h4 id="编写一个utils文件MyBatisUtils-java"><a href="#编写一个utils文件MyBatisUtils-java" class="headerlink" title="编写一个utils文件MyBatisUtils.java"></a>编写一个utils文件MyBatisUtils.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zdx.utils;<br><br><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.Reader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisUtils</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory=<span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            Reader reader= Resources.getResourceAsReader(<span class="hljs-string">&quot;mybatis-config.xml&quot;</span>);<br>            sqlSessionFactory=<span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(reader);<br>        &#125;<span class="hljs-keyword">catch</span> (IOException e)&#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title function_">getSession</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>这段代码是MyBatisUtils工具类的实现，用于提供SqlSession的获取方法，从而方便地进行数据库操作。具体来说：</p><ol><li>这个类首先定义了一个静态的SqlSessionFactory变量sqlSessionFactory，用于存储SqlSessionFactory对象，它是MyBatis的核心对象，可以创建SqlSession实例。</li><li>在静态代码块中，通过Resources类的getResourceAsReader方法读取mybatis-config.xml配置文件，并使用SqlSessionFactoryBuilder的build方法构建SqlSessionFactory对象。</li><li>定义了一个公共的静态方法getSession，该方法返回一个SqlSession对象。通过调用sqlSessionFactory的openSession方法来创建SqlSession实例，从而可以执行MyBatis的SQL语句。</li></ol><p>总结：这段代码的作用是通过MyBatisUtils工具类简化获取SqlSession的过程，使得开发者能够更加方便地进行数据库操作。</p><h4 id="在pojo中创建employee实体类"><a href="#在pojo中创建employee实体类" class="headerlink" title="在pojo中创建employee实体类"></a>在pojo中创建employee实体类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zdx.pojo;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">employee</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String position;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPosition</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> position;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPosition</span><span class="hljs-params">(String position)</span> &#123;<br>        <span class="hljs-built_in">this</span>.position = position;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">employee</span><span class="hljs-params">(<span class="hljs-type">int</span> id, String name, <span class="hljs-type">int</span> age, String position)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.position = position;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">employee</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>    <span class="hljs-comment">//构造方法</span><br>    <span class="hljs-comment">//重写toString方法</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="在Mapper编写对应的查询条件"><a href="#在Mapper编写对应的查询条件" class="headerlink" title="在Mapper编写对应的查询条件"></a>在Mapper编写对应的查询条件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;htttp://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.zdx.mapper.EmployeeMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.zdx.pojo.Employee&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;EmployeeMap&quot;</span>&gt;</span><br>        select * from employee where id=1<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.zdx.pojo.Employee&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;EmployeeMap&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;name&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;age&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;position&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;position&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findById&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;EmployeeMap&quot;</span>&gt;</span><br>        select * from employee where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insert&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.zdx.pojo.Employee&quot;</span> &gt;</span><br>        insert into employee(name,age,position) values(#&#123;name&#125;,#&#123;age&#125;,#&#123;position&#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.zdx.pojo.Employee&quot;</span>&gt;</span><br>        update employee set name=#&#123;name&#125;,age=#&#123;age&#125;,position=#&#123;position&#125; where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="在test-java中编写测试类EmployeeTest"><a href="#在test-java中编写测试类EmployeeTest" class="headerlink" title="在test&#x2F;java中编写测试类EmployeeTest"></a>在test&#x2F;java中编写测试类EmployeeTest</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.zdx.pojo.Employee;<br><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><span class="hljs-keyword">import</span> org.junit.After;<br><span class="hljs-keyword">import</span> org.junit.Before;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.Reader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeTest</span> &#123;<br>    <span class="hljs-keyword">private</span> SqlSessionFactory sqlSessionFactory;<br>    <span class="hljs-keyword">private</span> SqlSession sqlSession;<br>    <span class="hljs-meta">@Before</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">resources</span> <span class="hljs-operator">=</span><span class="hljs-string">&quot;mybatis-config.xml&quot;</span>;<br>        Reader reader=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            reader= Resources.getResourceAsReader(resources);<br>            SqlSessionFactory sqlMapper=<span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(reader);<br>            sqlSession=sqlMapper.openSession();<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectAll</span><span class="hljs-params">()</span>&#123;<br>        Employee employee=sqlSession.selectOne(<span class="hljs-string">&quot;com.zdx.mapper.EmployeeMapper.findAll&quot;</span>);<br>        System.out.println(employee);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span>&#123;<br>        Employee employee=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;manager&quot;</span>);<br>        sqlSession.delete(<span class="hljs-string">&quot;com.zdx.mapper.EmployeeMapper.delete&quot;</span>,employee);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsert</span><span class="hljs-params">()</span>&#123;<br>        Employee employee=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;manager&quot;</span>);<br>        sqlSession.insert(<span class="hljs-string">&quot;com.zdx.mapper.EmployeeMapper.insert&quot;</span>,employee);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span>&#123;<br>        Employee employee=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;manager&quot;</span>);<br>        sqlSession.update(<span class="hljs-string">&quot;com.zdx.mapper.EmployeeMapper.update&quot;</span>,employee);<br>        System.out.println(employee.getName().toString());<br>    &#125;<br>    <span class="hljs-meta">@After</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span>&#123;<br>        sqlSession.commit();<br>        sqlSession.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>其余实现基本同上面一致，故不再记录。</p><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>代码仓库：<a href="https://github.com/zdx-1/JavaEE-Learn">https://github.com/zdx-1/JavaEE-Learn</a></p>]]></content>
    
    
    <categories>
      
      <category>Java EE 开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MyBatis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>组合数学</title>
    <link href="/2024/03/11/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/"/>
    <url>/2024/03/11/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/</url>
    
    <content type="html"><![CDATA[<h2 id="组合数学"><a href="#组合数学" class="headerlink" title="组合数学"></a>组合数学</h2><h2 id="计数原理：加法原理"><a href="#计数原理：加法原理" class="headerlink" title="计数原理：加法原理"></a>计数原理：加法原理</h2><ul><li><p>加法原理： 集合 $S$ 被分成两两不相交的部分 $S_1, S_2, S_3, …, S_m$，那么 $S$ 的对象数目等于：$|S| &#x3D; |S_1| + |S_2| + |S_3| + … + |S_m|$</p></li><li><p>例： 一个学生想学一门数学课，一门文化课，但不能同时选，现在从 $4$ 门数学课和 $4$ 门文化课中选，一共有 $4 + 4 &#x3D; 8$ 种方法选一门课。</p></li><li><p>加法原理的关键是将计数分解为若干个独立（不相容）的部分，保证既不重复也不遗漏地进行计数。 加法原理是利用完备事件组的一个体现，我们可以利用一个集合的补记做题。</p></li></ul><h3 id="例题：分割立方体-lanqiaoOJ-题号-1620"><a href="#例题：分割立方体-lanqiaoOJ-题号-1620" class="headerlink" title="例题：分割立方体 lanqiaoOJ 题号 1620"></a>例题：分割立方体 lanqiaoOJ 题号 1620</h3><p><strong>题目描述：</strong> 一个立方体，边长为 $n$，分割成 $n × n × n$ 个单位立方体。任意两个单位立方体，或者有 $2$ 个公共点，或者有 $4$ 个公共点，或者没有公共点。请问，没有公共点和有 $2$ 个公共点的立方体，共有多少对？</p><p><strong>输入描述：</strong> 一个整数 $n，1 \leq n \leq 30$</p><p><strong>思路：</strong> 反过来计算，先算出有 $4$ 个公共点的立方体有多少对，然后用总对数减去。分几种情况讨论：</p><ol><li>正方体和周围 $3$ 个正方体相邻，这种情况共有 $8$ 个，就是顶角上的 $8$ 个，总个数 $3 \times 8$；</li><li>正方体和周围 $4$ 个正方体相邻，这种情况共有 $(n-2) \times 12$ 个 （棱）总个数 $4 \times (n-2) \times 12$；</li><li>正方体和周围 $5$ 个正方体相邻，这种情况共有 $6 \times (n \times n - 4 \times n + 4)$ 个，总个数 $5 \times 6 \times (n \times n - 4 \times n + 4)$；</li><li>正方体和周围 $6$ 个正方体相邻，这种情况共有 $(n \times n \times n - n \times n \times 6 + n \times 12 - 8)$ 个，总个数 $6 \times (n \times n \times n - n \times n \times 6 + n \times 12 - 8)$； 最后把这 $4$ 个情况求和再除以 $2$。</li></ol><p>正方体一共 $n^3$ 个，共有 $\frac{n^3(n^3 - 1)}{2}$ 种关系</p><ol><li>正方体和周围 $3$ 个正方体相邻，总个数 $3 \times 8$；</li><li>正方体和周围 $4$ 个正方体相邻，总个数 $4 \times (n-2) \times 12$；</li><li>正方体和周围 $5$ 个正方体相邻，总个数 $5 \times 6 \times (n \times n - 4 \times n + 4)$；</li><li>正方体和周围 $6$ 个正方体相邻，总个数 $6 \times (n \times n \times n - n \times n \times 6 + n \times 12 - 8)$；</li><li>最后把这 $4$ 个情况求和再除以 $2$。</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> n; cin &gt;&gt; n;<br>    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">1</span>)&#123;             <span class="hljs-comment">// 边长为 1 时特判</span><br>        cout &lt;&lt; <span class="hljs-number">0</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> sum = n * n * n * (n * n * n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;     <span class="hljs-comment">//总数</span><br>    <span class="hljs-type">int</span> edge3 = <span class="hljs-number">8</span>;<br>    <span class="hljs-type">int</span> ans3 = <span class="hljs-number">3</span> * edge3;<br>    <span class="hljs-type">int</span> edge4 = (n - <span class="hljs-number">2</span>) * <span class="hljs-number">12</span>;<br>    <span class="hljs-type">int</span> ans4 = <span class="hljs-number">4</span> * edge4;<br>    <span class="hljs-type">int</span> edge5 = n * n - <span class="hljs-number">4</span> * n + <span class="hljs-number">4</span>;<br>    <span class="hljs-type">int</span> ans5 = <span class="hljs-number">5</span> * <span class="hljs-number">6</span> * edge5;<br>    <span class="hljs-type">int</span> edge6 = n * n * n - n * n * <span class="hljs-number">6</span> + n * <span class="hljs-number">12</span> - <span class="hljs-number">8</span>;<br>    <span class="hljs-type">int</span> ans6 = <span class="hljs-number">6</span> * edge6;<br>    cout &lt;&lt; sum - (ans3 + ans4 + ans5 + ans6) / <span class="hljs-number">2</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>: <span class="hljs-comment"># 边长为 1 时特判</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">sum</span> = n * n * n * (n * n * n - <span class="hljs-number">1</span>) // <span class="hljs-number">2</span> <span class="hljs-comment"># 总数</span><br>    edge3 = <span class="hljs-number">8</span><br>    ans3 = <span class="hljs-number">3</span> * edge3<br>    edge4 = (n - <span class="hljs-number">2</span>) * <span class="hljs-number">12</span><br>    ans4 = <span class="hljs-number">4</span> * edge4<br>    edge5 = n * n - <span class="hljs-number">4</span> * n + <span class="hljs-number">4</span><br>    ans5 = <span class="hljs-number">5</span> * <span class="hljs-number">6</span> * edge5<br>    edge6 = n * n * n - n * n * <span class="hljs-number">6</span> + n * <span class="hljs-number">12</span> - <span class="hljs-number">8</span><br>    ans6 = <span class="hljs-number">6</span> * edge6<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span> - (ans3 + ans4 + ans5 + ans6) // <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> sc.nextInt();<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 边长为 1 时特判</span><br>            System.out.println(<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> (<span class="hljs-type">long</span>) n * n * n * (n * n * n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>; <span class="hljs-comment">// 总数</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">edge3</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans3</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span> * edge3;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">edge4</span> <span class="hljs-operator">=</span> (n - <span class="hljs-number">2</span>) * <span class="hljs-number">12</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans4</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span> * edge4;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">edge5</span> <span class="hljs-operator">=</span> n * n - <span class="hljs-number">4</span> * n + <span class="hljs-number">4</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> * <span class="hljs-number">6</span> * edge5;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">edge6</span> <span class="hljs-operator">=</span> n * n * n - n * n * <span class="hljs-number">6</span> + n * <span class="hljs-number">12</span> - <span class="hljs-number">8</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans6</span> <span class="hljs-operator">=</span> <span class="hljs-number">6</span> * edge6;<br>        System.out.println(sum - (ans3 + ans4 + ans5 + ans6) / <span class="hljs-number">2</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="计数原理：乘法原理"><a href="#计数原理：乘法原理" class="headerlink" title="计数原理：乘法原理"></a><strong>计数原理：乘法原理</strong></h2><p>令 $S$ 是对象的有序对 $(a, b)$ 的集合，其中第一个对象 $a$ 来自大小为 $p$ 的一个集合，对于对象 $a$ 的每个选择，对象 $b$ 有 $q$ 个选择，那么 $S$ 的大小：$|S| &#x3D; p \times q$</p><p>例：中性笔的长度有 $3$ 种，颜色有 $4$ 种，直径有 $5$ 种。不同种类的中性笔有：$3 \times 4 \times 5 &#x3D; 60$ 种。</p><p>例：$34 \times 55 \times 72 \times 113$ 的正整数因子有多少？答：这是算数基本定理的概念。$3$ 有 $0$ ~ $4$ 这 $5$ 种选择，$5$ 有 $6$ 个选择，$7$ 有 $3$ 个选择，$11$ 有 $4$ 个选择，因子总数是 $5 \times 6 \times 3 \times 4 &#x3D; 360$ 种。</p><h2 id="排列数"><a href="#排列数" class="headerlink" title="排列数"></a>排列数</h2><p>排列是有序的。</p><p>不可重复排列数：从 $n$ 个不同的物品中取出 $r$ 个，排列数为：</p><p>$\mathrm{A_{n}^{r}&#x3D;n(n-1)(n-2)…(n-r+1)&#x3D;\frac{n!}{(n-r)!}}$</p><p>可重复排列数，从 $n$ 个不同的物品中可重复地取出 $r$ 个的排列数为：$n^r$。</p><h2 id="组合数"><a href="#组合数" class="headerlink" title="组合数"></a>组合数</h2><p>排列是有序的，组合是无序的。</p><p>如果 $S$ 中的元素都不相同，组合数：</p><p>$\mathrm{C_{n}^{r}&#x3D;{\binom{n}{r}}&#x3D;{\frac{A_{n}^{r}}{r!}}&#x3D;{\frac{n!}{r!(n-r)!}}}$</p><h2 id="糊涂人寄信-lanqiaoOJ-题号-1622"><a href="#糊涂人寄信-lanqiaoOJ-题号-1622" class="headerlink" title="糊涂人寄信 lanqiaoOJ 题号 1622"></a>糊涂人寄信 lanqiaoOJ 题号 1622</h2><p><strong>题目描述：</strong> 有一个糊涂人，写了 $n$ 封信和 $n$ 个信封，到了邮寄的时候，把所有的信都装错了信封。求装错信封可能的种类数。</p><p><strong>输入描述：</strong> 每行输入一个正整数 $n$，表示一种情况。$(n \leq 20)$</p><p><strong>输出描述：</strong> 输出相应的答案。</p><h3 id="解题思路："><a href="#解题思路：" class="headerlink" title="解题思路："></a>解题思路：</h3><p>题目建模为：有 $1 \sim n$ 个数字，分别放在 $n$ 个位置，问都放错的情况有多少种。</p><p>用 DP 来做。定义 $dp[]$，$dp[i]$ 表示数字 $1 \sim i$ 都放错的种类数。$dp[n]$ 是答案。</p><p>下面考虑状态转移方程，从 $1 \sim i$ 递推到 $i$。</p><p>数字 $i$ 如果放错，有 $i-1$ 个位置可以放，假设其放在第 $k$ 个位置。对于数字 $k$，可以放在 $i$ 位置也可以不放在 $i$ 位置。</p><p>如果 $k$ 放在 $i$ 位置，那么对于剩下 $i-2$ 个数字放的次数，就是 $i-2$ 个数字都放错的方法数 $dp[i-2]$。</p><p>如果 $k$ 不放在 $i$ 位置，和 $i-1$ 个数字放错的情况相同，为 $dp[i-1]$。</p><p>状态转移方程：$dp[i] &#x3D; (i-1) \times (dp[i-1] + dp[i-2])$</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br>ll dp[<span class="hljs-number">30</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    dp[<span class="hljs-number">1</span>]= dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>    dp[<span class="hljs-number">2</span>]=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">3</span>;i&lt;=<span class="hljs-number">22</span>;i++) dp[i]=(i<span class="hljs-number">-1</span>)*(dp[i<span class="hljs-number">-1</span>]+dp[i<span class="hljs-number">-2</span>]);<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">while</span>(cin&gt;&gt;n) cout&lt;&lt;dp[n]&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> n==<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">elif</span> n==<span class="hljs-number">2</span>:  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:  <span class="hljs-keyword">return</span> (n-<span class="hljs-number">1</span>)*(f(n-<span class="hljs-number">1</span>)+f(n-<span class="hljs-number">2</span>))<br><span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> sys.stdin:   <span class="hljs-comment">#读入n，和C++代码的while(cin&gt;&gt;n)功能一样</span><br>    n = <span class="hljs-built_in">int</span>(n)<br>    <span class="hljs-built_in">print</span>(f(n))<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[<span class="hljs-number">30</span>];<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        dp[<span class="hljs-number">1</span>] = dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; i &lt;= <span class="hljs-number">22</span>; i++) &#123;<br>            dp[i] = (i - <span class="hljs-number">1</span>) * (dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]);<br>        &#125;<br>        <span class="hljs-keyword">while</span> (sc.hasNext()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> sc.nextInt();<br>            System.out.println(dp[n]);<br>        &#125;<br>        sc.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="鸽巢原理"><a href="#鸽巢原理" class="headerlink" title="鸽巢原理"></a>鸽巢原理</h2><p>鸽巢原理，又称抽屉原理。</p><p><strong>鸽巢原理：</strong> 把 $n+1$ 个物体放进 $n$ 个盒子，至少有一个盒子包含 $2$ 个或更多的物体。</p><ul><li>例：在 $370$ 人中，至少有 $2$ 人生日相同；</li><li>例：$n$ 个人互相握手，一定有 $2$ 个人握手次数相同。</li></ul><p>例：$n$ 个人互相握手，一定有 $2$ 个人握手次数相同。 每人跟其他人握手，最少可以是 $0$ 次，最多可以是$n-1$次。 如果握手最少的是 $0$ 次，那么剩下的$n-1$人中，握手最多的人不会超过$n-2$次。$0 \sim n-2$ 共$n-1$种情况。 如果握手最少的张三是 $1$ 次，那么剩下的$n-1$人中，握手最多的李四除了跟张三握手一次，跟其他$n-2$人最多握手$n-2$次，李四最多握手$n-1$次。$1 \sim n-1$ 共$n-1$种情况。 如果握手最少的张三是 $2$ 次，那么剩下的$n-1$人中，握手最多的李四除了跟张三握手一次，跟其他$n-2$人最多握手$n-2$次，李四最多握手$n-1$次。$2 \sim n-1$ 共$n-2$种情况。 …… 所以握手次数最多有$n-1$种情况，最少只有 $1$ 种情况。 把最多的$n-1$种情况看成$n-1$个抽屉，$n$个人放进这$n-1$个抽屉，至少有一个抽屉里面有 $2$ 人。</p><h2 id="例题：小蓝吃糖果-lanqiaoOJ-题号-1624"><a href="#例题：小蓝吃糖果-lanqiaoOJ-题号-1624" class="headerlink" title="例题：小蓝吃糖果 lanqiaoOJ 题号 1624"></a>例题：小蓝吃糖果 lanqiaoOJ 题号 1624</h2><p><strong>题目描述：</strong> Gardon 有 $n$ 种糖果，每种数量已知。Gardon 不喜欢连续 $2$ 次吃同样的糖果。问有没有可行的吃糖方案。</p><p><strong>输入：</strong> 第一行是整数 N，$0 &lt; n &lt; 1000000$，第二行是 $n$ 个数，表示 $n$ 种糖果的数量 $m_i$，$0 &lt; m_i &lt; 1000000$</p><p><strong>输出：</strong> 输出一行，包含一个 “Yes” 或 “no”。</p><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>继续处理格式，鸽巢原理，用“隔板法”求解。</p><p>找出最多的一种糖果，把它的数量 $K$ 看成 $K$ 个隔板，隔成 $K$ 个空间（把每个隔板的右边看成一个空间）；其它所有糖果的数量为 $S$。</p><p>最多的一种糖果，把它的数量 $K$ 看成 $K$ 个隔板，隔成 $K$ 个空间（把每个隔板的右边看成一个空间）；其它所有糖果的数量为 $S$。</p><ul><li>（1）如果 $S &lt; K-1$，把 $S$ 个糖果放到隔板之间，这 $K$ 个隔板不够放，必然至少有 2 个隔板之间没有糖果，由于这 2 个隔板是同一种糖果，所以无解。</li><li>（2）$S \geq K-1$ 时，肯定有解。其中一个解是：把 $S$ 个糖果排成一个长队，其中同种类的糖果是挨在一起的，然后每次取 $K$ 个糖果，按顺序一个一个地放进 $K$ 个空间。由于隔板数量比每一种糖果的数量都多，所以不可能有 $2$ 个同样的糖果被放进一个空间里。把 $S$ 个糖果放完，就是一个解，一些隔板里面可能放好几种糖果。</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> a[<span class="hljs-number">1005000</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> Max=<span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> n; <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;a[i]);<br>        sum += a[i];              <span class="hljs-comment">//所有糖果数量</span><br>        <span class="hljs-keyword">if</span>(a[i]&gt;Max)  Max=a[i];   <span class="hljs-comment">//最多的一种糖果</span><br>    &#125;<br>    <span class="hljs-keyword">if</span>(sum-Max+<span class="hljs-number">1</span>&gt;=Max) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Yes\n&quot;</span>);<br>    <span class="hljs-keyword">else</span>               <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;No\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>(a)-<span class="hljs-built_in">max</span>(a) &lt; <span class="hljs-built_in">max</span>(a)-<span class="hljs-number">1</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">input</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> input.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> input.nextInt();<br>            sum += x;<br>            <span class="hljs-keyword">if</span> (x &gt; max) &#123;<br>                max = x;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (sum - max + <span class="hljs-number">1</span> &gt;= max) &#123;<br>            System.out.println(<span class="hljs-string">&quot;Yes&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;No&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="二项式定理和杨辉三角"><a href="#二项式定理和杨辉三角" class="headerlink" title="二项式定理和杨辉三角"></a>二项式定理和杨辉三角</h2><p>杨辉三角：排列成如下三角形的数字</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">      1<br>    1   1<br>   1  2  1<br> 1   3  3  1<br>1  4   6  4  1<br></code></pre></td></tr></table></figure><p>每个数是它上面 $2$ 个数的和。</p><p>求杨辉三角第 $n$ 行的数字，可以模拟这个推导过程，逐级递推，复杂度 $O(n^2)$。</p><p>用数学公式计算，可以直接得到结果，这个公式是$(1 + x)n$。</p><p><img src="/./../images/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/163bed9e512b94d13ac8e09f824ca2ad-0.png" alt="图片描述"></p><p>二项式系数就是$(1 + x)^n$ 展开后第 $r$ 项的系数。</p><p>$\mathrm{C_{n}^{r}&#x3D;{\binom{n}{r}}&#x3D;\frac{n!}{r!(n-r)!}}$</p><p>对应杨辉三角的第 $n$ 行第 $r$ 个数是</p><p>例：杨辉三角的第 $4$ 行是“$1 3 3 1$”，</p><p>$\mathrm{C_{n-1}^{r-1}&#x3D;C_{4-1}^{1-1}&#x3D;C_3^0&#x3D;1、C_3^1&#x3D;3、C_3^2&#x3D;3、C_3^3&#x3D;1}$</p><p>理解：$(1 + x)^n$ 的第 $r$ 项，就是从 $n$ 个 $x$ 中选出 $r$ 个，这就是组合数的定义</p><p>当 n 较大，且需要取模时，二项式系数有两种计算方法：</p><p>（1）递推公式：$\mathrm{C_{n}^{r}&#x3D;C_{n-1}^{r}+C_{n-1}^{r-1}}$</p><p>公式是杨辉三角的定义，即“每个数是它上面 $2$ 个数的和”。计算复杂度是 $O(n^2)$。</p><p>（2）用逆直接计算</p><p>因为输出取模，那么不用递推公式，直接用公式计算更快。不过，由于除法不能直接取模，需要用到逆。用逆计算二项式系数，有：</p><p>$\mathrm{C_{n}^{r}&#x3D;{\binom{n}{r}}&#x3D;\frac{n!}{r!(n-r)!}}$</p><p>$\mathrm{C_{r}^{n}\bmod m&#x3D;\frac{n!}{r!(n-r)!}\bmod m&#x3D;(n!\bmod m)((r!)^{-1}\bmod m)(((n-r)!)^{-1}\bmod m)\bmod m}$</p><p>用逆计算二项式系数，复杂度是 $O(n)$​ 的。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>组合数学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>简单数论</title>
    <link href="/2024/03/11/%E7%AE%80%E5%8D%95%E6%95%B0%E8%AE%BA/"/>
    <url>/2024/03/11/%E7%AE%80%E5%8D%95%E6%95%B0%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="1-模运算"><a href="#1-模运算" class="headerlink" title="1 模运算"></a>1 模运算</h2><ul><li>定义：模运算为 a 除以 m 的余数，记为 a mod m，有 a mod m &#x3D; a % m。</li><li>模运算是大数运算中的常用操作。</li><li>如果一个数太大，无法直接输出，或者不需要直接输出，可以把它取模后，缩小数值再输出。</li><li>Python 虽然能直接计算大数，不用担心数据溢出，但是大数乘法太耗时，所以也常用取模来缩小数值。</li><li>一个简单应用，判断奇偶：a%2&#x3D;0，a 是偶数；a%2&#x3D;1，a 是奇数</li></ul><h3 id="例题：刷题统计-2022-年第十三届省赛，lanqiaoOJ-题号-2098"><a href="#例题：刷题统计-2022-年第十三届省赛，lanqiaoOJ-题号-2098" class="headerlink" title="例题：刷题统计 2022 年第十三届省赛，lanqiaoOJ 题号 2098"></a>例题：刷题统计 2022 年第十三届省赛，lanqiaoOJ 题号 2098</h3><p>【问题描述】 小明决定从下周一开始努力刷题准备蓝桥杯竞赛。他计划周一至周五每天做 a 道题目，周六和周日每天做 b 道题目。请你帮小明计算，按照计划他将在第几天实现做题数大于等于 n 题？</p><p>【输入格式】 输入一行包含三个整数 a, b 和 n。</p><p>【输出格式】 输出一个整数代表天数。</p><p>【评测用例规模与约定】 对于 50%的评测用例，1 ≤ a, b, n ≤ 106106；对于 100%的评测用例，1 ≤ a, b, n ≤ 10181018。</p><h3 id="题目解析"><a href="#题目解析" class="headerlink" title="题目解析"></a>题目解析</h3><p>求余数的简单题，利用求余，把计算复杂度降为 O(1)。</p><p><strong>C++ 代码：</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    ll a,b,n; <span class="hljs-built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;n;<br>    ll week = a*<span class="hljs-number">5</span>+b*<span class="hljs-number">2</span>;     <span class="hljs-comment">//每周做题</span><br>    ll days = (n/week)*<span class="hljs-number">7</span>;  <span class="hljs-comment">//周数</span><br>    n %= week;             <span class="hljs-comment">//剩下的做题数</span><br>    <span class="hljs-keyword">if</span>(n&lt;=a*<span class="hljs-number">5</span>) days += n/a+(n%a?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>);  <span class="hljs-comment">//在周一到周五内</span><br>    <span class="hljs-keyword">else</span>&#123;                  <span class="hljs-comment">//周六和周日</span><br>        days += <span class="hljs-number">5</span>, n -= a*<span class="hljs-number">5</span>;<br>        days += n/b+(n%b?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>);<br>    &#125;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;days;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Java 代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> sc.nextLong(), b = sc.nextLong(), n = sc.nextLong();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">week</span> <span class="hljs-operator">=</span> a * <span class="hljs-number">5</span> + b * <span class="hljs-number">2</span>;  <span class="hljs-comment">//每周做题</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">days</span> <span class="hljs-operator">=</span> (n / week) * <span class="hljs-number">7</span>; <span class="hljs-comment">//周数*7天</span><br>        n %= week;                  <span class="hljs-comment">//余下不够一周的做题数</span><br>        <span class="hljs-keyword">if</span> (n &lt;= a * <span class="hljs-number">5</span>)<br>            days += n / a + (n % a != <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>); <span class="hljs-comment">//在周一到周五内</span><br>        <span class="hljs-keyword">else</span> &#123;                       <span class="hljs-comment">//周六和周日</span><br>            days += <span class="hljs-number">5</span>;<br>            n -= a * <span class="hljs-number">5</span>;<br>            days += n / b + (n % b != <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>        &#125;<br>        System.out.println(days);<br>        sc.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 代码：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">a, b, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>week = a * <span class="hljs-number">5</span> + b * <span class="hljs-number">2</span>  <span class="hljs-comment">#每周做题</span><br>days = (n // week) * <span class="hljs-number">7</span>  <span class="hljs-comment">#天数</span><br>n %= week  <span class="hljs-comment">#余数</span><br><span class="hljs-keyword">if</span> n &lt;= a * <span class="hljs-number">5</span>:<br>    days += n // a + (n % a != <span class="hljs-number">0</span>)  <span class="hljs-comment">#在周一到周五内</span><br><span class="hljs-keyword">else</span>:  <span class="hljs-comment">#周六和周日</span><br>    days += <span class="hljs-number">5</span><br>    n -= a * <span class="hljs-number">5</span><br>    days += n // b + (n % b != <span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(days)<br></code></pre></td></tr></table></figure><h2 id="2-快速幂"><a href="#2-快速幂" class="headerlink" title="2 快速幂"></a>2 快速幂</h2><p>幂运算 an，当 n 很大时，如果一个个乘，时间是 O(n) 的，速度很慢，此时可以用快速幂，在 O(logn) 的时间内算出来。 快速幂的一个解法：分治法，算 a2，然后再算(a2) 2，…，一直算到 an，代码也容易写。</p><ul><li>标准的快速幂：用位运算实现。</li><li>基于位运算的快速幂，原理是倍增。</li></ul><h3 id="快速幂原理"><a href="#快速幂原理" class="headerlink" title="快速幂原理"></a>快速幂原理</h3><p>以 a11a11 为例说明如何用倍增法做快速幂。</p><p>（1）幂次与二进制的关系。把 a11a11 分解成幂 a8、a2、a1a8、a2、a1 的乘积：a11&#x3D;a8+2+1&#x3D;a8×a2×a1a11&#x3D;a8+2+1&#x3D;a8×a2×a1。其中a1、a2、a4、a8…a1、a2、a4、a8…的幂次都是 2 的倍数，所有的幂 aiai 都是倍乘关系，逐级递推，代码： a *&#x3D; a</p><p>（2）幂次用二进制分解。如何把 11 分解为 8+2+1？利用数的二进制的特征，n &#x3D; 1110 &#x3D; 10112 &#x3D; 23+21+20 &#x3D; 8+2+1，把 n 按二进制处理就可以。</p><p>（3）如何跳过那些没有的幂次？例如 1011 需要跳过 a4a4。做个判断，用二进制的位运算实现：</p><ul><li>n &amp; 1 取 n 的最后一位，并且判断这一位是否需要跳过。</li><li>n &gt;&gt;&#x3D; 1 把 n 右移一位，目的是把刚处理过的 n 的最后一位去掉。 幂运算的结果往往很大，一般会先取模再输出。 根据取模的性质有：an mod m&#x3D;(a mod m)n mod manmodm&#x3D;(amodm)nmodm</li></ul><h3 id="例题：快速幂-lanqiaoOJ-题号-1514"><a href="#例题：快速幂-lanqiaoOJ-题号-1514" class="headerlink" title="例题：快速幂 lanqiaoOJ 题号 1514"></a>例题：快速幂 lanqiaoOJ 题号 1514</h3><p>【题目描述】给定 b, p, k，求(bp) mod k。其中 2≤b, p, k≤109。 【输入描述】三个整数 b，p，k。 【输出描述】输出(bp) mod k。</p><h3 id="题目解析-1"><a href="#题目解析-1" class="headerlink" title="题目解析"></a>题目解析</h3><p><strong>C++ 代码：</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;     <span class="hljs-comment">//变量改用较大的long long</span><br>ll <span class="hljs-title function_">fastPow</span><span class="hljs-params">(ll a, ll n, ll mod)</span>&#123;<br>    ll ans = <span class="hljs-number">1</span>;<br>    a %= mod;          <span class="hljs-comment">//重要，防止下面的ans*a越界</span><br>    <span class="hljs-keyword">while</span>(n) &#123;<br>        <span class="hljs-keyword">if</span>(n &amp; <span class="hljs-number">1</span>)   ans = (ans*a) % mod;   <span class="hljs-comment">//取模</span><br>        a = a*a % mod;                     <span class="hljs-comment">//取模</span><br>        n &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    ll b,p,k;    <span class="hljs-built_in">cin</span>&gt;&gt;b&gt;&gt;p&gt;&gt;k;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; fastPow(b,p,k);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Java 代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-title function_">fastPow</span><span class="hljs-params">(<span class="hljs-type">long</span> a, <span class="hljs-type">long</span> n, <span class="hljs-type">long</span> mod)</span> &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        a %= mod;   <span class="hljs-comment">//重要，防止下面的ans*a越界</span><br>        <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">if</span> ((n &amp; <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>) &#123;<br>                ans = (ans * a) % mod;  <span class="hljs-comment">//取模</span><br>            &#125;<br>            a = (a * a) % mod;  <span class="hljs-comment">//取模</span><br>            n &gt;&gt;= <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> sc.nextLong(), p = sc.nextLong(), k = sc.nextLong();<br>        System.out.println(fastPow(b, p, k));<br>        sc.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 代码：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fast_pow</span>(<span class="hljs-params">a, n, mod</span>):<br>    ans = <span class="hljs-number">1</span><br>    a %= mod  <span class="hljs-comment">#重要，防止下面的ans*a越界</span><br>    <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">if</span> n &amp; <span class="hljs-number">1</span> == <span class="hljs-number">1</span>:<br>            ans = (ans * a) % mod  <span class="hljs-comment">#取模</span><br>        a = (a * a) % mod  <span class="hljs-comment">#取模</span><br>        n &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> ans<br><br>b, p, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-built_in">print</span>(fast_pow(b, p, k))<br></code></pre></td></tr></table></figure><h2 id="GCD-定义、性质"><a href="#GCD-定义、性质" class="headerlink" title="GCD 定义、性质"></a>GCD 定义、性质</h2><p>最大公约数 Greatest Common Divisor(GCD)：整数 a 和 b 的 GCD 是指能同时整除 a 和 b  的最大整数，记为 gcd(a, b)。由于-a 的因子和 a 的因子相同，因此 gcd(a, b) &#x3D; gcd(|a|,  |b|)。编码时只关注正整数的最大公约数。 性质： （1）gcd(a, b) &#x3D; gcd(a, a+b) &#x3D; gcd(a, k·a+b) （2）gcd(ka, kb) &#x3D; k·gcd(a, b) （3）定义多个整数的最大公约数：gcd(a, b, c) &#x3D; gcd(gcd(a, b), c)。 （4）若 gcd(a, b) &#x3D; d，则 gcd(a&#x2F;d, b&#x2F;d) &#x3D; 1，即 a&#x2F;d 与 b&#x2F;d 互素。这个定理很重要。 （5）gcd(a+cb, b) &#x3D; gcd(a, b)</p><p><strong>C++福利：</strong> c++函数 std::__gcd()，可以返回负数，可以带多个参数。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;__gcd(<span class="hljs-number">15</span>, <span class="hljs-number">81</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;    <span class="hljs-comment">// 输出  3</span><br>    cout&lt;&lt;__gcd(<span class="hljs-number">0</span>, <span class="hljs-number">44</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;     <span class="hljs-comment">// 输出  44</span><br>    cout&lt;&lt;__gcd(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;      <span class="hljs-comment">// 输出  0</span><br>    cout&lt;&lt;__gcd(<span class="hljs-number">-6</span>, <span class="hljs-number">-15</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// 输出  -3</span><br>    cout&lt;&lt;__gcd(<span class="hljs-number">-17</span>,<span class="hljs-number">289</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// 输出  -17</span><br>    cout&lt;&lt;__gcd(<span class="hljs-number">17</span>,<span class="hljs-number">-289</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// 输出  17</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="手写-GCD-代码"><a href="#手写-GCD-代码" class="headerlink" title="手写 GCD 代码"></a>手写 GCD 代码</h3><p>手写 gcd 函数，常用欧几里得算法。 辗转相除法求 gcd： <code>gcd(a, b) = gcd(b, a mod b)</code> 这是最常用的方法，极为高效。 设 a &gt; b，辗转相除法的计算复杂度为O((log2a)3)O((log2a)3)。</p><p>可输出负数，和库函数一样:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>&#123;     <span class="hljs-keyword">return</span> b? gcd(b, a%b):a; &#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;gcd(<span class="hljs-number">15</span>, <span class="hljs-number">81</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;    <span class="hljs-comment">// 输出  3</span><br>    <span class="hljs-built_in">cout</span>&lt;&lt;gcd(<span class="hljs-number">0</span>, <span class="hljs-number">44</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;     <span class="hljs-comment">// 输出  44</span><br>    <span class="hljs-built_in">cout</span>&lt;&lt;gcd(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;      <span class="hljs-comment">// 输出  0</span><br>    <span class="hljs-built_in">cout</span>&lt;&lt;gcd(<span class="hljs-number">-6</span>, <span class="hljs-number">-15</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// 输出  -3</span><br>    <span class="hljs-built_in">cout</span>&lt;&lt;gcd(<span class="hljs-number">-17</span>,<span class="hljs-number">289</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// 输出  -17</span><br>    <span class="hljs-built_in">cout</span>&lt;&lt;gcd(<span class="hljs-number">17</span>,<span class="hljs-number">-289</span>)&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// 输出  17</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">// 或者使用如下编码方式：</span><br><span class="hljs-comment">// int GCD(int a,int b)</span><br><span class="hljs-comment">// &#123;</span><br><span class="hljs-comment">//     if(b==0)</span><br><span class="hljs-comment">//         return a;</span><br><span class="hljs-comment">//     return GCD(b,a%b);</span><br><span class="hljs-comment">// &#125;</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> &#123;</span><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> b == <span class="hljs-number">0</span> ? a : gcd(b, a % b);<br>    &#125;<br><br>    public <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(gcd(<span class="hljs-number">15</span>, <span class="hljs-number">81</span>));   <span class="hljs-comment">// 输出  3</span><br>        System.out.println(gcd(<span class="hljs-number">0</span>, <span class="hljs-number">44</span>));    <span class="hljs-comment">// 输出  44</span><br>        System.out.println(gcd(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>));     <span class="hljs-comment">// 输出  0</span><br>        System.out.println(gcd(<span class="hljs-number">-6</span>, <span class="hljs-number">-15</span>));  <span class="hljs-comment">// 输出  -3</span><br>        System.out.println(gcd(<span class="hljs-number">-17</span>, <span class="hljs-number">289</span>)); <span class="hljs-comment">// 输出  17</span><br>        System.out.println(gcd(<span class="hljs-number">17</span>, <span class="hljs-number">-289</span>)); <span class="hljs-comment">// 输出  17</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// 或者使用如下编码方式：</span><br><span class="hljs-comment">// static int GCD(int a,int b)</span><br><span class="hljs-comment">// &#123;</span><br><span class="hljs-comment">//     if(b==0)</span><br><span class="hljs-comment">//         return a;</span><br><span class="hljs-comment">//     return GCD(b,a%b);</span><br><span class="hljs-comment">// &#125;</span><br>def <span class="hljs-title function_">gcd</span><span class="hljs-params">(a, b)</span>:<br>    <span class="hljs-keyword">return</span> a <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> gcd(b, a % b)<br><br>print(gcd(<span class="hljs-number">15</span>, <span class="hljs-number">81</span>))   # 输出  <span class="hljs-number">3</span><br>print(gcd(<span class="hljs-number">0</span>, <span class="hljs-number">44</span>))    # 输出  <span class="hljs-number">44</span><br>print(gcd(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))     # 输出  <span class="hljs-number">0</span><br>print(gcd(<span class="hljs-number">-6</span>, <span class="hljs-number">-15</span>))  # 输出  <span class="hljs-number">-3</span><br>print(gcd(<span class="hljs-number">-17</span>, <span class="hljs-number">289</span>)) # 输出  <span class="hljs-number">17</span><br>print(gcd(<span class="hljs-number">17</span>, <span class="hljs-number">-289</span>)) # 输出  <span class="hljs-number">17</span><br><br># 或者使用如下编码方式：<br><span class="hljs-meta"># def GCD(a,b):</span><br><br><span class="hljs-meta">#     <span class="hljs-keyword">if</span> b==0:</span><br><span class="hljs-meta">#         return a</span><br><span class="hljs-meta">#     return GCD(b,a%b)</span><br></code></pre></td></tr></table></figure><h2 id="LCM"><a href="#LCM" class="headerlink" title="LCM"></a>LCM</h2><p>最小公倍数 LCM (the Least Common Multiple) 。· a 和 b 的最小公倍数 lcm(a,b)(a,b),从算术基本定理推理得到。 算术基本定理：任何大于 1 的正整数 n 都可以唯一分解为有限个素数的乘积：</p><p>n&#x3D;p1c1p2c2…pmcm\rm{n}&#x3D;\rm{p}_1^{c1}\rm{p}_2^{c2}\ldots\rm{p}<em>m^{cm}n&#x3D;p1c1p2c2…pmcm,其中c1c1 都是正整数，pi\rm{p}</em>{\rm{i}}pi 都是素数且从小到大。</p><p>推导 LCM： 设:a&#x3D;p1c1p2c2…pmcm,b&#x3D;p1f1p2f2…pmfm:a&#x3D;p1c1p2c2…pmcm,b&#x3D;p1f1p2f2…pmfm</p><p>那么：gcd(a, b)&#x3D;p1min⁡c1,f1p2min⁡c2,f2…pmmin⁡cm,fmb)&#x3D;p1minc1,f1p2minc2,f2…pmmincm,fm</p><p>Icm(a,b)&#x3D;p1max⁡c1,f1p2max⁡c2,f2…pmmax⁡cm,fm(a,b)&#x3D;p1maxc1,f1p2maxc2,f2…pmmaxcm,fm</p><p>推出：gcd(a, b)<em>lcm(a, b)&#x3D;a</em>b</p><p>即：</p><p>lcm(a,b):&#x3D;:a∗b&#x2F;gcd(a,b):&#x3D;:a&#x2F;gcd(a,:b)∗b.lcm(a,b):&#x3D;:a∗b&#x2F;gcd(a,b):&#x3D;:a&#x2F;gcd(a,:b)∗b.</p><h3 id="lcm-手写代码"><a href="#lcm-手写代码" class="headerlink" title="lcm()手写代码"></a>lcm()手写代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//c or c++</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">lcm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>&#123;    <span class="hljs-comment">//需要的时候把int改成long long</span><br>   <span class="hljs-keyword">return</span> a / gcd(a, b) * b;  <span class="hljs-comment">//先做除法再做乘法，防止先做乘法溢出</span><br>&#125;<br><br># Python<br>def <span class="hljs-title function_">lcm</span><span class="hljs-params">(a, b)</span>:<br>    <span class="hljs-keyword">return</span> a <span class="hljs-comment">// gcd(a, b) * b  #先做除法再做乘法，防止先做乘法溢出</span><br><br><span class="hljs-comment">//java</span><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lcm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>    <span class="hljs-keyword">return</span> a / gcd(a, b) * b; <span class="hljs-comment">//先做除法再做乘法，防止先做乘法溢出</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="核桃的数量-2013-年第四届省赛-lanqiaoOJ-题号-210"><a href="#核桃的数量-2013-年第四届省赛-lanqiaoOJ-题号-210" class="headerlink" title="核桃的数量 2013 年第四届省赛 lanqiaoOJ 题号 210"></a>核桃的数量 2013 年第四届省赛 lanqiaoOJ 题号 210</h3><p>【题目描述】小张是软件项目经理，他带领 3  个开发组。工期紧，今天都在加班呢。为鼓舞士气，小张打算给每个组发一袋核桃（据传言能补脑）。他的要求是： 1.各组的核桃数量必须相同  2.各组内必须能平分核桃（当然是不能打碎的） 3.尽量提供满足 1, 2 条件的最小数量（节约闹革命嘛） 【输入格式】输入三个正整数 a, b, c，表示每个组正在加班的人数，用空格分开（a,b,c&lt; 30）<br>【输出格式】输出一个正整数，表示每袋核桃的数量。</p><h3 id="题目解析-2"><a href="#题目解析-2" class="headerlink" title="题目解析"></a>题目解析</h3><p>简单题，答案就是三个数字的最小公倍数。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">lcm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>&#123; <span class="hljs-keyword">return</span> a / __gcd(a, b) * b;&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">int</span> a,b,c;    <span class="hljs-built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;<br>    <span class="hljs-type">int</span> k = lcm(a,b);<br>    <span class="hljs-built_in">cout</span>&lt;&lt;lcm(k,c)&lt;&lt;<span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>import java.util.Scanner;<br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> &#123;</span><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> b == <span class="hljs-number">0</span> ? a : gcd(b, a % b);<br>    &#125;<br><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lcm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> a / gcd(a, b) * b;<br>    &#125;<br><br>    public <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Scanner sc = new Scanner(System.in);<br>        <span class="hljs-type">int</span> a = sc.nextInt();<br>        <span class="hljs-type">int</span> b = sc.nextInt();<br>        <span class="hljs-type">int</span> c = sc.nextInt();<br>        <span class="hljs-type">int</span> k = lcm(a, b);<br>        System.out.println(lcm(k, c));<br>        sc.close();<br>    &#125;<br>&#125;<br>def <span class="hljs-title function_">gcd</span><span class="hljs-params">(a, b)</span>:<br>    <span class="hljs-keyword">return</span> a <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> gcd(b, a % b)<br><br>def lcm(a, b):<br>    <span class="hljs-keyword">return</span> a <span class="hljs-comment">// gcd(a, b) * b</span><br><br>a, b, c = <span class="hljs-built_in">map</span>(<span class="hljs-type">int</span>, input().split())<br>k = lcm(a, b)<br>print(lcm(k, c))<br></code></pre></td></tr></table></figure><h2 id="5-素数的判断"><a href="#5-素数的判断" class="headerlink" title="5 素数的判断"></a>5 素数的判断</h2><p>素数定义：只能被 1 和自己整除的正整数。注：1 不是素数，最小素数是 2。</p><p>判断一个数 n 是不是素数：当n≤1014n≤1014时，用试除法；n &gt; 1014 时，试除法不够用，需 要用高级算法，例如 Miller Rabin 算法。</p><p><strong>试除法：</strong> 用[2,n-1]内的所有数去试着除 n，如果都不能整除，就是素数。 优化：把[2,n-1]缩小到[2,n][2,n]。证明：若 n &#x3D; axb, 设 a≤nn ,则 b≥nn,如果 a 是 n 的因子，说明 n 不是素数，b 不用再试且 b 一定也是。</p><h3 id="C-实现："><a href="#C-实现：" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_prime</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(n &lt;= <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// 1不是素数</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">long</span> <span class="hljs-type">long</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-built_in">sqrt</span>(n); i++)<br>        <span class="hljs-keyword">if</span>(n % i == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// 能整除，不是素数</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// 全不能整除，是素数</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> number = <span class="hljs-number">29</span>; <span class="hljs-comment">// 例子：要检查是否为素数的数值</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">is_prime</span>(number))<br>        std::cout &lt;&lt; number &lt;&lt; <span class="hljs-string">&quot; 是素数。&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-keyword">else</span><br>        std::cout &lt;&lt; number &lt;&lt; <span class="hljs-string">&quot; 不是素数。&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Java-实现："><a href="#Java-实现：" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isPrime</span><span class="hljs-params">(<span class="hljs-type">long</span> n)</span> &#123;<br>        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// 1不是素数</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= Math.sqrt(n); i++)<br>            <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// 能整除，不是素数</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// 全不能整除，是素数</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.print(<span class="hljs-string">&quot;输入一个要检查是否为素数的数值：&quot;</span>);<br>        <span class="hljs-type">long</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> scanner.nextLong(); <span class="hljs-comment">// 例子：要检查是否为素数的数值</span><br><br>        <span class="hljs-keyword">if</span> (isPrime(number))<br>            System.out.println(number + <span class="hljs-string">&quot; 是素数。&quot;</span>);<br>        <span class="hljs-keyword">else</span><br>            System.out.println(number + <span class="hljs-string">&quot; 不是素数。&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Python-实现："><a href="#Python-实现：" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_prime</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># 1不是素数</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(n ** <span class="hljs-number">0.5</span>) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> n % i == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># 能整除，不是素数</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>  <span class="hljs-comment"># 全不能整除，是素数</span><br><br>number = <span class="hljs-number">29</span>  <span class="hljs-comment"># 例子：要检查是否为素数的数值</span><br><span class="hljs-keyword">if</span> is_prime(number):<br>    <span class="hljs-built_in">print</span>(number, <span class="hljs-string">&quot;是素数。&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(number, <span class="hljs-string">&quot;不是素数。&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="6-素数筛"><a href="#6-素数筛" class="headerlink" title="6 素数筛"></a>6 素数筛</h2><p>素数的筛选：给定 n，求 2~n 内所有的素数。 一个个地判断很慢，所以用“筛子”筛所有的整数，把非素数筛掉，剩下的就是素数。 常用两种筛法：埃氏筛、欧拉筛。</p><p><strong>埃氏筛:</strong></p><p>初始队列{2、3，4，5，6，7，8，9，10，11，12，13，…，n}，操作步骤： （1）输出最小的素数 2，筛掉 2 的倍数，得{2，3，4，5，6，7，8，9，10，11，12，13，…} （2）输出最小的素数 3，筛掉 3 的倍数，得{2，3，4，5，6，7，8，9，10，11，12，13，…} （3）输出最小的素数 5，筛掉 5 的倍数，得{2，3，4，5，6，7，8，9，10，11，12，13，…} 继续以上步骤，直到队列为空。</p><h3 id="C-实现：-1"><a href="#C-实现：-1" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> primes[N],cnt;<br><span class="hljs-type">bool</span> bprime[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getPrime</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span>&#123;<br>    <span class="hljs-built_in">memset</span>(bprime,<span class="hljs-literal">false</span>,<span class="hljs-built_in">sizeof</span>(bprime));<br>    bprime[<span class="hljs-number">0</span>]=<span class="hljs-literal">true</span>;<br>    bprime[<span class="hljs-number">1</span>]=<span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-keyword">if</span>(!bprime[i])&#123;<br>            prime[cnt++]=i;<br>            <span class="hljs-keyword">for</span>(LL j=i*<span class="hljs-number">2</span>;j&lt;=n;j+=i)<br>                bprime[j]=<span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Java-实现：-1"><a href="#Java-实现：-1" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] primes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-type">boolean</span>[] bprime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N];<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">getPrimes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    Arrays.fill(bprime, <span class="hljs-literal">false</span>);<br>    bprime[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;<br>    bprime[<span class="hljs-number">1</span>] = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (!bprime[i]) &#123;<br>            primes[cnt++] = i;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i * <span class="hljs-number">2</span>; j &lt;= n; j += i) &#123;<br>                bprime[j] = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Python-实现：-1"><a href="#Python-实现：-1" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">primes = [<span class="hljs-number">0</span>] * N<br>cnt = <span class="hljs-number">0</span><br>bprime = [<span class="hljs-literal">False</span>] * N<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getPrimes</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">global</span> cnt, primes, bprime<br>    bprime[<span class="hljs-number">0</span>] = <span class="hljs-literal">True</span><br>    bprime[<span class="hljs-number">1</span>] = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> bprime[i]:<br>            primes[cnt] = i<br>            cnt += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i*<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>, i):<br>                bprime[j] = <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p><strong>但是埃氏筛法的缺点：例如 6 会被 3 整除，6 会被 2 整除，会被筛两次，所以我们再给出欧氏线性筛法：</strong></p><h3 id="C-实现：-2"><a href="#C-实现：-2" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> primes[N],cnt;<br><span class="hljs-type">bool</span> bPrime[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getPrimes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span>&#123;<br>    <span class="hljs-built_in">memset</span>(bPrime,<span class="hljs-literal">false</span>,<span class="hljs-built_in">sizeof</span>(bPrime));<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-keyword">if</span>(!bPrime[i])<br>            primes[cnt++]=i;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;cnt&amp;&amp;i*primes[j]&lt;n;j++)&#123;<br>            bPrime[i*primes[j]]=<span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span>(i%primes[j]==<span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Java-实现：-2"><a href="#Java-实现：-2" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] primes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], bPrime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br><span class="hljs-keyword">static</span> <span class="hljs-type">int</span> cnt;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getPrimes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    Arrays.fill(bPrime, <span class="hljs-number">0</span>, n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (bPrime[i] == <span class="hljs-number">0</span>)<br>            primes[cnt++] = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; cnt &amp;&amp; i * primes[j] &lt;= n; j++) &#123;<br>            bPrime[i * primes[j]] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % primes[j] == <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Python-实现：-2"><a href="#Python-实现：-2" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">N = <span class="hljs-number">1000005</span><br>primes = [<span class="hljs-number">0</span>] * N<br>bprime = [<span class="hljs-literal">False</span>] * N<br>cnt = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getPrimes</span>(<span class="hljs-params">n: <span class="hljs-built_in">int</span></span>):<br>    <span class="hljs-keyword">global</span> cnt<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> bprime[i]:<br>            primes[cnt] = i<br>            cnt += <span class="hljs-number">1</span><br>        j = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> j &lt; cnt <span class="hljs-keyword">and</span> i * primes[j] &lt;= n:<br>            bprime[i * primes[j]] = <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> i % primes[j] == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">break</span><br>            j += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="例题：质数-lanqiaoOJ-题号-1557"><a href="#例题：质数-lanqiaoOJ-题号-1557" class="headerlink" title="例题：质数 lanqiaoOJ 题号 1557"></a>例题：质数 lanqiaoOJ 题号 1557</h3><p>【题目描述】给定一个正整数 N，请你输出 N 以内（不包含 N）的质数以及质数的个数。 【输入描述】一个正整数 N，n&lt;1000 【输出描述】两行，第 1 行包含若干个素数，从小到大输出，用空格分开。第 2 行一个整数，表示素数个数。</p><p>输入： 10</p><p>输出： 2 3 5 7 4</p><p>题目为模板题目，实现方式如下，其中：</p><ul><li>bprime[i]记录数 i 的状态，若 bprime [i]&#x3D;1，表示它被筛掉，不是素数。</li><li>用 primes[]存放素数，prime[0]是第一个素数 2。</li><li>Cnt 是素数个数计数</li></ul><h3 id="C-实现：-3"><a href="#C-实现：-3" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span>;<br><span class="hljs-type">int</span> primes[N],cnt;<br><span class="hljs-type">bool</span> bprime[N]; <span class="hljs-comment">//true表示被筛掉，不是素数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getPrimes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span>&#123; <span class="hljs-comment">//埃氏筛，计算[2, n]内的素数</span><br>        <span class="hljs-built_in">memset</span>(bprime,<span class="hljs-literal">false</span>,<span class="hljs-built_in">sizeof</span>(bprime));<br>        bprime[<span class="hljs-number">0</span>]=<span class="hljs-literal">true</span>;<br>        bprime[<span class="hljs-number">1</span>]=<span class="hljs-literal">true</span>;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>            <span class="hljs-keyword">if</span>(!bprime[i])&#123;<br>                primes[cnt++]=i;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i*<span class="hljs-number">2</span>;j&lt;=n;j+=i)<br>                    bprime[j]=<span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt;n;<br>    <span class="hljs-built_in">getPrimes</span>(n<span class="hljs-number">-1</span>);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;cnt;i++)  cout &lt;&lt; primes[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    cout &lt;&lt; endl;<br>    cout &lt;&lt; cnt;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Java-实现：-3"><a href="#Java-实现：-3" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000000</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] primes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>[] bprime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> cnt;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getPrimes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>        bprime[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;<br>        bprime[<span class="hljs-number">1</span>] = <span class="hljs-literal">true</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (!bprime[i]) &#123;<br>                primes[cnt++] = i;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i * <span class="hljs-number">2</span>; j &lt;= n; j += i) &#123;<br>                    bprime[j] = <span class="hljs-literal">true</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> sc.nextInt();<br>        getPrimes(n - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cnt; i++) &#123;<br>            System.out.print(primes[i] + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>        System.out.println();<br>        System.out.println(cnt);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Python-实现：-3"><a href="#Python-实现：-3" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python">N = <span class="hljs-number">10</span>**<span class="hljs-number">6</span><br>primes = []<br>bprime = [<span class="hljs-literal">False</span>] * N<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getPrimes</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">global</span> primes<br>    <span class="hljs-keyword">global</span> cnt<br><br>    bprime[<span class="hljs-number">0</span>] = <span class="hljs-literal">True</span><br>    bprime[<span class="hljs-number">1</span>] = <span class="hljs-literal">True</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> bprime[i]:<br>            primes.append(i)<br>            cnt += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i*<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>, i):<br>                bprime[j] = <span class="hljs-literal">True</span><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>cnt = <span class="hljs-number">0</span><br>getPrimes(n-<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> primes:<br>    <span class="hljs-built_in">print</span>(p, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-built_in">print</span>()<br><br><span class="hljs-built_in">print</span>(cnt)<br></code></pre></td></tr></table></figure><h2 id="7-分解质因子"><a href="#7-分解质因子" class="headerlink" title="7 分解质因子"></a>7 分解质因子</h2><p>任何一个正整数 n 都可以唯一地分解为有限个素数的乘积：n&#x3D;p1c1p2c2…pmcmn&#x3D;p1c1p2c2…pmcm,其中cici都是正整数，p*i 都是素数且从小到大。 分解质因子也可以用试除法。求 n 的质因子：</p><ol><li>第一步，求最小质因子p1p1。逐个检查从2到 nn 的所有素数，如果它能整除 n，就是最小质因子。然后连续用 p1p1除 n，目的是去掉 n 中的 p1p1,得到 n1n1。</li><li>第二步，再找 n1n1的最小质因子。逐个检查从 p1p1 到 n1n1 的所有素数。从 p1p1开始试除， 是因为 n1n1没有比 p1p1小的素因子，而且 n1n1的因子也是 n 的因子。</li><li>继续以上步骤，直到找到所有质因子。</li></ol><p>我们直接看一个例题：</p><p>【题目描述】求出区间[a,b]中所有整数的质因数分解。 【输入描述】输入一行，包含 2 个整数 a，b。2&lt;&#x3D;a&lt;&#x3D;b&lt;&#x3D;10000 【输出描述】每行输出一个数的分解，形如 k&#x3D;a1×a2×a3×…，k 从小到大，a 从小到大。</p><p>输入： 3 10</p><p>输出： 3&#x3D;34&#x3D;2×25&#x3D;56&#x3D;2×37&#x3D;78&#x3D;2×2×29&#x3D;3×310&#x3D;2×5\begin{aligned} &amp;\text{3&#x3D;} \text{3}  \ &amp;\text{4&#x3D;} 2\times2  \ &amp;\text{5&#x3D;}  \text{5}  \ &amp;6&#x3D;2\times3 \ &amp;\text{7&#x3D;7} \  &amp;8&#x3D;2\times2\times2 \ &amp;9&#x3D;3\times3 \ &amp;10&#x3D;2\times5  \end{aligned}3&#x3D;34&#x3D;2×25&#x3D;56&#x3D;2×37&#x3D;78&#x3D;2×2×29&#x3D;3×310&#x3D;2×5</p><p>直接对每个数进行分解，然后打印出它的因数。</p><h3 id="C-实现：-4"><a href="#C-实现：-4" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> p[<span class="hljs-number">20</span>];  <span class="hljs-comment">//p[]记录因子，p[1]是最小因子。一个int数的质因子最多有10几个</span><br><span class="hljs-type">int</span> c[<span class="hljs-number">40</span>];  <span class="hljs-comment">//c[i]记录第i个因子的个数。一个因子的个数最多有30几个</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">factor</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span>&#123;<br>    <span class="hljs-type">int</span> m = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-built_in">sqrt</span>(n); i++)<br>        <span class="hljs-keyword">if</span>(n%i == <span class="hljs-number">0</span>)&#123;<br>            p[++m] = i, c[m] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>(n%i == <span class="hljs-number">0</span>)            <span class="hljs-comment">//把n中重复的因子去掉</span><br>                n/=i, c[m]++;<br>        &#125;<br>    <span class="hljs-keyword">if</span>(n&gt;<span class="hljs-number">1</span>)                           <span class="hljs-comment">//没有被除尽，是素数</span><br>        p[++m] = n, c[m] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> m;                         <span class="hljs-comment">//共m个因子</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a,b;   cin&gt;&gt;a&gt;&gt;b;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a;i&lt;=b;i++)&#123;<br>        <span class="hljs-type">int</span> m = <span class="hljs-built_in">factor</span>(i);<br>        cout&lt;&lt;i&lt;&lt;<span class="hljs-string">&quot;=&quot;</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=m;j++)&#123; <span class="hljs-comment">//第j个因子</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>;k&lt;=c[j];k++)&#123;    <span class="hljs-comment">//第j个因子的个数</span><br>                cout &lt;&lt;p[j];<br>                <span class="hljs-keyword">if</span>(k&lt;c[j]) cout &lt;&lt;<span class="hljs-string">&quot;*&quot;</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(j&lt;m) cout &lt;&lt;<span class="hljs-string">&quot;*&quot;</span>;<br>        &#125;<br>        cout&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Java-实现：-4"><a href="#Java-实现：-4" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">20</span>];  <span class="hljs-comment">// p[] 记录因子，p[1] 是最小因子。一个 int 数的质因子最多有 10 几个</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">40</span>];  <span class="hljs-comment">// c[i] 记录第 i 个因子的个数。一个因子的个数最多有 30 几个</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">factor</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= Math.sqrt(n); i++) &#123;<br>            <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>) &#123;<br>                p[++m] = i;<br>                c[m] = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">while</span> (n % i == <span class="hljs-number">0</span>) &#123;<br>                    n /= i;<br>                    c[m]++;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">1</span>) &#123;<br>            p[++m] = n;<br>            c[m] = <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> m;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> sc.nextInt(), b = sc.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> a; i &lt;= b; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> factor(i);<br>            System.out.print(i + <span class="hljs-string">&quot;=&quot;</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; k &lt;= c[j]; k++) &#123;<br>                    System.out.print(p[j]);<br>                    <span class="hljs-keyword">if</span> (k &lt; c[j]) &#123;<br>                        System.out.print(<span class="hljs-string">&quot;*&quot;</span>);<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (j &lt; m) &#123;<br>                    System.out.print(<span class="hljs-string">&quot;*&quot;</span>);<br>                &#125;<br>            &#125;<br>            System.out.println();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Python-实现：-4"><a href="#Python-实现：-4" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><br>p = [<span class="hljs-number">0</span>] * <span class="hljs-number">20</span>  <span class="hljs-comment"># p[] 记录因子，p[1] 是最小因子。一个 int 数的质因子最多有 10 几个</span><br>c = [<span class="hljs-number">0</span>] * <span class="hljs-number">40</span>  <span class="hljs-comment"># c[i] 记录第 i 个因子的个数。一个因子的个数最多有 30 几个</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">factor</span>(<span class="hljs-params">n</span>):<br>    m = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(math.sqrt(n)) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> n % i == <span class="hljs-number">0</span>:<br>            m += <span class="hljs-number">1</span><br>            p[m], c[m] = i, <span class="hljs-number">0</span><br>            <span class="hljs-keyword">while</span> n % i == <span class="hljs-number">0</span>:<br>                n //= i<br>                c[m] += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> n &gt; <span class="hljs-number">1</span>:<br>        m += <span class="hljs-number">1</span><br>        p[m], c[m] = n, <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> m<br><br>a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(a, b+<span class="hljs-number">1</span>):<br>    m = factor(i)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;i&#125;</span>=&#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, c[j]+<span class="hljs-number">1</span>):<br>            <span class="hljs-built_in">print</span>(p[j], end=<span class="hljs-string">&#x27;&#x27;</span>)<br>            <span class="hljs-keyword">if</span> k &lt; c[j]:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;*&#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>        <span class="hljs-keyword">if</span> j &lt; m:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;*&#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><p><a href="https://www.lanqiao.cn/courses/31015/learning/?id=1927004&compatibility=false">15 届蓝桥杯 14 天省赛冲刺营 1 期 - 简单数论 - 蓝桥云课 (lanqiao.cn)</a></p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>简单数论</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>图论入门</title>
    <link href="/2024/03/11/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/"/>
    <url>/2024/03/11/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h2><p>本章节为图论最基本的内容，要求每位同学都要尽量掌握。</p><h2 id="图的基本概念"><a href="#图的基本概念" class="headerlink" title="图的基本概念"></a>图的基本概念</h2><p>图：由点(<code>node</code>，或者 <code>vertex</code>)和连接点的边(<code>edge</code>)组成。图是点和边构成的网。</p><p>树：特殊的图</p><p>树，即连通无环图树的结点从根开始，层层扩展子树，是一种层次关系，这种层次关系，保证了树上不会出现环路。两点之间的路径：有且仅有一条路径。最近公共祖先。</p><h3 id="图的种类"><a href="#图的种类" class="headerlink" title="图的种类"></a>图的种类</h3><p>（1）无向无权图，边没有权值、没有方向； （2）有向无权图，边有方向、无权值； （3）加权无向图，边有权值，但没有方向； （4）加权有向图； （5）有向无环图（Directed Acyclic Graph，DAG）。</p><h3 id="图算法的时间分析"><a href="#图算法的时间分析" class="headerlink" title="图算法的时间分析"></a>图算法的时间分析</h3><p>图算法的复杂度和边的数量 E、点的数量 V 相关。$O(V+E)$：几乎是图问题中能达到的最好程度。$O(V\log E)$、$O(E\log V)$：很好的算法。$O(V^2)$、$O(E^2)$或更高：不算是好的算法。</p><h2 id="图的存储"><a href="#图的存储" class="headerlink" title="图的存储"></a>图的存储</h2><p>能快速访问：图的存储，能让程序很快定位结点 <code>u</code> 和 <code>v</code> 的边<code>(u, v)</code> 。</p><ul><li>数组存边：简单、空间使用最少；无法快递定位</li><li>邻接矩阵：简单、空间使用最大；定位最快 <code>dis[a][b]</code></li><li>邻接表：空间很少，定位较快</li><li>链式前向星：空间更少，定位较快</li></ul><p><strong>注： 存储方式跟题目相匹配，占用空间少定位快也不一定是问题的最优存储方式。</strong></p><h3 id="数组存边"><a href="#数组存边" class="headerlink" title="数组存边"></a>数组存边</h3><p>优点：简单、最省空间。 缺点：无法定位某条边。 应用：<code>bellman-ford</code> 算法、最小生成树的 <code>kruskal</code> 算法</p><ul><li>C++</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// c/c++实现</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Edge</span>&#123;</span><br>    <span class="hljs-type">int</span> from,to,dis;<br>&#125;e[M]; <span class="hljs-comment">//结构体数组存边</span><br><br><span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;++i)<br>    <span class="hljs-built_in">cin</span>&gt;&gt;e[i].from&gt;&gt;e[i].to&gt;&gt;e[i].dis;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Java实现</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span> &#123; <span class="hljs-type">int</span> from; <span class="hljs-type">int</span> to; <span class="hljs-type">int</span> dis;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Edge</span><span class="hljs-params">(<span class="hljs-type">int</span> from, <span class="hljs-type">int</span> to, <span class="hljs-type">int</span> dis)</span> &#123;<br>        <span class="hljs-built_in">this</span>.from = from;<br>        <span class="hljs-built_in">this</span>.to = to;<br>        <span class="hljs-built_in">this</span>.dis = dis;<br>    &#125;<br><br>&#125;<br><br>Edge[] e = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Edge</span>[M];<br><br><span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> sc.nextInt();<br><span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> sc.nextInt();<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; ++i)<br>&#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">from</span> <span class="hljs-operator">=</span> sc.nextInt();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">to</span> <span class="hljs-operator">=</span> sc.nextInt();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">dis</span> <span class="hljs-operator">=</span> sc.nextInt();<br>    e[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Edge</span>(from, to, dis);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#python实现</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">self, f, t, d</span>):<br>        self.<span class="hljs-keyword">from</span> = f<br>        self.to = t<br>        self.dis = d<br><br>e = [Edge(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(M)]<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>    e[i].<span class="hljs-keyword">from</span>, e[i].to, e[i].dis = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br></code></pre></td></tr></table></figure><h3 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h3><p>二维数组： $graph[NUM ][NUM ]$ 无向图： $graph[i][j]&#x3D;graph[j][i]。$ 有向图： $graph[i][j]\neq graph[j][i]。$ 权值： $graph[i][j]存结点i到j的边的权值。$ 例如 $graph[1][2]&#x3D; 3，graph[2][1] &#x3D; 5等等。$ 用 $graph[i][j]&#x3D; INF表示i，j之间无边。$</p><p>优点：</p><ul><li>适合稠密图；</li><li>编码非常简短；</li><li>对边的存储、查询、更新等操作又快又简单。</li></ul><p>缺点：</p><ul><li>存储复杂度 $O(V^2)$太高。V&#x3D;10000 时，空间 100M。</li><li>不能存储重边。</li></ul><h3 id="邻接表和链式前向星"><a href="#邻接表和链式前向星" class="headerlink" title="邻接表和链式前向星"></a>邻接表和链式前向星</h3><p>邻接表（指针或数组下标）和链式前向星（容器模拟）的思路一样，只是表达方式不同。</p><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/29bc6278e9e147f9597ba0c263fc1903-0.png" alt="图片描述"></p><ul><li>C++</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">edge</span>&#123;</span><br>    <span class="hljs-type">int</span> from, to; <span class="hljs-type">long</span> <span class="hljs-type">long</span> w; <span class="hljs-comment">//起点，终点，权值。起点from并没有用到，e[i]的i就是from</span><br>    edge(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b,<span class="hljs-type">long</span> <span class="hljs-type">long</span> c)&#123;from=a; to=b; w=c;&#125;<br>&#125;;<br><span class="hljs-built_in">vector</span>&lt;edge&gt;e[N];          <span class="hljs-comment">//用于存储图</span><br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span> &#123;<br>    <span class="hljs-type">int</span> from, to;<br>    <span class="hljs-type">long</span> w;<br><br>    Edge(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">long</span> c) &#123;<br>        from = a;<br>        to = b;<br>        w = c;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">static</span> ArrayList&lt;Edge&gt;[] e = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N];<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs undefined">class Edge:<br>    def __init__(self, fr, to, w):<br>        self.fr = fr<br>        self.to = to<br>        self.w = w<br><br>e = [[] for _ in range(N)]<br></code></pre></td></tr></table></figure><p>我们会在使用的时候进行讲解。</p><h2 id="最短路问题"><a href="#最短路问题" class="headerlink" title="最短路问题"></a>最短路问题</h2><p>最广为人知的图论问题就是最短路径问题。</p><p>简单图的最短路径</p><ul><li>树上的路径：任意 $2$ 点之间</li></ul><p>只有一条路径</p><ul><li>所有边长都为 $1$ 的图：用 <code>BFS</code> 搜最短路径，复杂度 $O(n+m)$</li></ul><p>普通图的最短路径</p><ul><li>边长：不一定等于 $1$，而且可能为负数</li><li>算法：<code>Floyd</code>、<code>Dijkstra</code>、<code>SPFA</code> 等，各有应用场景，不可互相替代</li></ul><h3 id="最短路算法比较"><a href="#最短路算法比较" class="headerlink" title="最短路算法比较"></a>最短路算法比较</h3><table><thead><tr><th>问题</th><th>边权</th><th>算法</th><th>时间复杂度</th></tr></thead><tbody><tr><td>一个起点，一个终点</td><td>非负数；无边权（或边权为 1）</td><td>A*</td><td>&lt; $O((m+n)\log n)$</td></tr><tr><td></td><td></td><td>双向广搜</td><td>&lt; $O((m+n)\log n)$</td></tr><tr><td></td><td></td><td>贪心最优搜索</td><td>&lt; $O(m+n)$</td></tr><tr><td>一个起点到其他所有点</td><td>无边权（或边权为 1）</td><td>BFS</td><td>$O(m+n)$</td></tr><tr><td></td><td>非负数</td><td>Dijkstra(堆优化优先队列)</td><td>$O((m+n)\log n)$</td></tr><tr><td></td><td>允许有负数</td><td>SPFA</td><td>&lt; $O(mn)$</td></tr><tr><td>所有点对之间</td><td>允许有负数</td><td>Floyd-Warshall</td><td>$O(n^3)$</td></tr></tbody></table><p>什么算法也不能解决存在负环图的最短路的问题！最多是判断是否存在，或者找到负环。</p><p>网站推荐：<a href="https://csacademy.com/app/graph_editor/?tdsourcetag=s_pctim_aiomsg">CSAcademy Graph Editor</a></p><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/5c77aaf44a27ba24fd4dfee6aa36a8ce-0.png" alt="图片描述"></p><p>方便图论的学习。</p><h3 id="Floyd-算法"><a href="#Floyd-算法" class="headerlink" title="Floyd 算法"></a>Floyd 算法</h3><ul><li>最简单的最短路径算法，代码仅有 $4$ 行</li><li>存图：最简单的矩阵存图</li><li>易懂，比暴力的搜索更简单易懂。</li><li>效率不高，不能用于大图在某些场景下有自己的优势，难以替代。能做传递闭包问题（离散数学）</li></ul><p>C++、Java</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//java 和 c++</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>; k&lt;=n; k++)         <span class="hljs-comment">//floyd的三重循环</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=n; j++)      <span class="hljs-comment">// k循环在i、j循环外面</span><br>            dp[i][j] = min(dp[i][j], dp[i][k] + dp[k][j]);<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#python</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>): <span class="hljs-comment">#floyd的三重循环</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>): <span class="hljs-comment"># k循环在i、j循环外面</span><br>            dp[i][j] = <span class="hljs-built_in">min</span>(dp[i][j], dp[i][k] + dp[k][j])<br></code></pre></td></tr></table></figure><p><code>Floyd算法</code>：<code>多源</code>最短路算法，一次计算能得到图中每一对结点之间（<code>多对多</code>）的最短路径。 <code>Dijkstra</code>、<code>Bellman-Ford</code>、<code>SPFA</code>算法：<code>单源</code>最短路径算法（<code>Single source shortest path algorithm</code>），一次计算能得到一个起点到其他所有点（<code>一对多</code>）的最短路径。在截止目前的蓝桥杯大赛中，<code>Floyd</code>算法是最常见的最短路径算法。 以上统计包括国赛和省赛，所以另外两种仍然要进行学习。</p><h4 id="Floyd-算法思想：动态规划"><a href="#Floyd-算法思想：动态规划" class="headerlink" title="Floyd 算法思想：动态规划"></a>Floyd 算法思想：动态规划</h4><p>下面为 <code>Floyd</code> 算法的原理，不看背代码也可以。</p><ul><li>动态规划：求图上两点 <code>i</code>、<code>j</code> 之间的最短距离，按“从小图到全图”的步骤，在逐步扩大图的过程中计算和更新最短路。</li><li>定义状态：<code>dp[k][i][j]，i、j、k</code>是点的编号，范围 <code>1 ~ n</code>。状态<code>dp[k][i][j]</code>表示在包含 <code>1 ~ k</code> 点的子图上，点对 <code>i、j</code> 之间的最短路。</li><li>状态转移方程：从子图 <code>1 ~ k-1</code> 扩展到子图 <code>1 ~ k</code> $dp[k][i][j] &#x3D; min(dp[k-1][i][j], dp[k-1][i][k] + dp[k-1][k][j])$</li></ul><p>首先是包含 <code>1 ~ k-1</code> 点的子图。 $dp[k-1][i][j]$：不包含 <code>k</code> 点子图内的点对 <code>i、j</code> 的最短路； $dp[k-1][i][k] + dp[k-1][k][j]$：经过 k 点的新路径的长度，即这条路径从 <code>i</code> 出发，先到 <code>k</code>，再从 <code>k</code> 到终点 <code>j</code>。 比较：不经过 <code>k</code> 的最短路径$dp[k-1][i][j]$和经过 <code>k</code> 的新路径，较小者就是新的$dp[k][i][j]$。</p><p>所以 <code>Floyd</code> 的原理就是每次引入一个新的点，用它去更新其他点的最短距离。</p><p><code>k</code> 从 <code>1</code> 逐步扩展到 <code>n</code>：最后得到的$dp[n][i][j]$是点对 <code>i、j</code> 之间的最短路径长度。 初值$dp[0][i][j]$：若 <code>i、j</code> 是直连的，就是它们的边长；若不直连，赋值为无穷大。 <code>i、j</code> 是任意点对：计算结束后得到了所有点对之间的最短路。</p><p>$dp[k][i][j] &#x3D; min(dp[k-1][i][j], dp[k-1][i][k] + dp[k-1][k][j])$ 用滚动数组简化： $dp[i][j] &#x3D; min(dp[i][j], dp[i][k] + dp[k][j])$</p><p><strong>特点：</strong></p><ul><li>在一次计算后求得所有结点之间的最短距离。</li><li>代码极其简单，是最简单的最短路算法。</li><li>效率低下，计算复杂度是 $O(n^3)$，只能用于 $n &lt; 300$ 的小规模的图。</li><li>存图用邻接矩阵 <code>dp[][]</code> 。因为 <code>Floyd</code> 算法计算的结果是所有点对之间的最短路，本身就需要 <code>n^2</code> 的空间，用矩阵存储最合适。</li><li>能判断负圈。 负圈：若图中有权值为负的边，某个经过这个负边的环路，所有边长相加的总长度也是负数，这就是负圈。在这个负圈上每绕一圈，总长度就更小，从而陷入在负圈上兜圈子的死循环。 <code>Floyd</code> 算法很容易判断负圈，只要在算法运行过程出现任意一个 <code>dp[i][i] &lt; 0</code> 就说明有负圈。因为 <code>dp[i][i]</code> 是从 <code>i</code> 出发，经过其他中转点绕一圈回到自己的最短路径，如果小于零，就存在负圈。</li></ul><h3 id="Dijkstra-算法"><a href="#Dijkstra-算法" class="headerlink" title="Dijkstra 算法"></a>Dijkstra 算法</h3><ul><li>Dijkstra：单源最短路径问题。</li><li>优点：非常高效而且稳定。</li><li>缺点：只能处理不含有负权边的图。</li><li>思路：贪心思想+优先队列。</li></ul><h4 id="算法思想"><a href="#算法思想" class="headerlink" title="算法思想"></a>算法思想</h4><p><code>Dijkstra</code> 算法算是贪心思想实现的，首先把起点到所有点的距离存下来找个最短的，然后松弛一次再找出最短的，所谓的松弛操作就是，遍历一遍看通过刚刚找到的距离最短的点作为中转站会不会更近，如果更近了就更新距离，这样把所有的点找遍之后就存下了起点到其他所有点的最短距离。</p><p><strong>为什么是每次都是找最小的？</strong></p><p>因为最小边的不会被其它的点松弛，只有可能最小边去松弛别人。 如果存在一个点 $K$ 能够松弛 $ab$ 的话那么一定有 $ak$ 距离加上 $kb$ 的距离小于 $ab$，已知 $ab$ 最短，所以不存在 $ak + kb &lt; ab$。</p><p><code>Dijkstra</code> 算法应用了贪心法的思想，即“抄近路走，肯定能找到最短路径”。</p><p>算法高效稳定：</p><ul><li><code>Dijkstra</code> 的每次迭代，只需要检查上次已经确定最短路径的那些结点的邻居，检查范围很小，算法是高效的；</li><li>每次迭代，都能得到至少一个结点的最短路径，算法是稳定的</li></ul><p>优先队列实现：</p><ul><li>每次往队列中放新数据时，按从小到大的顺序放，采用小顶堆的方式，复杂度是 $O(logn)$，保证最小的数总在最前面；</li><li>找最小值，直接取 <code>B</code> 的第一个数，复杂度是 $O(1)$。</li><li>复杂度：用优先队列时，<code>Dijkstra</code> 算法的复杂度是 $O(mlogn)$，是最高效的最短路算法。</li></ul><p>维护两个集合：已确定最短路径的结点集合 <code>A</code>、这些结点向外扩散的邻居结点集合 <code>B</code>。</p><ol><li>把起点 <code>s</code> 放到 <code>A</code> 中，把 <code>s</code> 所有的邻居放到 <code>B</code> 中。此时，邻居到 <code>s</code> 的距离就是直连距离。</li><li>从 <code>B</code> 中找出距离起点 <code>s</code> 最短的结点 <code>u</code>，放到 <code>A</code> 中。</li><li>把 <code>u</code> 所有的新邻居放到 <code>B</code> 中。显然，<code>u</code> 的每一条边都连接了一个邻居，每个新邻居都要加进去。其中 <code>u</code> 的一个新邻居 <code>v</code>，它到 <code>s</code> 的距离 <code>dis(s, v)</code> 等于 <code>dis(s, u) + dis(u, v)</code>。</li><li>重复(2)、(3)，直到 <code>B</code> 为空时，结束。</li></ol><p><strong>Dijkstra 的局限性是边的权值不能为负数：</strong></p><p>Dijkstra 基于 <code>BFS</code>，计算过程是从起点 <code>s</code> 逐步往外扩散的过程，每扩散一次就用贪心得到到一个点的最短路。 扩散要求路径越来越长，如果遇到一个负权边，会导致路径变短，使扩散失效。</p><p>Dijkstra 模板如下：</p><ul><li>C++</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>LL;<br><span class="hljs-comment">//这样定义INF的好处是: INF &lt;= INF+x</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N= <span class="hljs-number">3e5</span>+<span class="hljs-number">2</span>;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">edge</span>&#123;</span><br>    <span class="hljs-type">int</span> from, to; <span class="hljs-type">long</span> <span class="hljs-type">long</span> w; <span class="hljs-comment">//起点，终点，权值。起点from并没有用到，e[i]的i就是from</span><br>    edge(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b,<span class="hljs-type">long</span> <span class="hljs-type">long</span> c)&#123;from=a; to=b; w=c;&#125;<br>&#125;;<br><span class="hljs-built_in">vector</span>&lt;edge&gt;e[N];          <span class="hljs-comment">//用于存储图</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">s_node</span>&#123;</span><br>    <span class="hljs-type">int</span> id; <span class="hljs-type">long</span> <span class="hljs-type">long</span> n_dis;   <span class="hljs-comment">//id：结点；n_dis：这个结点到起点的距离</span><br>    s_node(<span class="hljs-type">int</span> b,<span class="hljs-type">long</span> <span class="hljs-type">long</span> c)&#123;id=b; n_dis=c;&#125;<br>    <span class="hljs-type">bool</span> operator &lt; (<span class="hljs-type">const</span> s_node &amp; a) <span class="hljs-type">const</span><br>    &#123; <span class="hljs-keyword">return</span> n_dis &gt; a.n_dis;&#125;<br>&#125;;<br><span class="hljs-type">int</span> n,m;<br><span class="hljs-type">int</span> pre[N];                                <span class="hljs-comment">//记录前驱结点，用于生成路径</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">print_path</span><span class="hljs-params">(<span class="hljs-type">int</span> s, <span class="hljs-type">int</span> t)</span> &#123;            <span class="hljs-comment">//打印从s到t的最短路</span><br>    <span class="hljs-keyword">if</span>(s==t)&#123; <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, s); <span class="hljs-keyword">return</span>; &#125;  <span class="hljs-comment">//打印起点</span><br>    print_path(s, pre[t]);                 <span class="hljs-comment">//先打印前一个点</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, t);                      <span class="hljs-comment">//后打印当前点。最后打印的是终点t</span><br>&#125;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span>  dis[N];         <span class="hljs-comment">//记录所有结点到起点的距离</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">dijkstra</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">int</span> s = <span class="hljs-number">1</span>;             <span class="hljs-comment">//起点s是1</span><br>    <span class="hljs-type">bool</span> done[N]; <span class="hljs-comment">//done[i]=true表示到结点i的最短路径已经找到</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) &#123;dis[i]=INF; done[i]=<span class="hljs-literal">false</span>; &#125;    <span class="hljs-comment">//初始化</span><br>    dis[s]=<span class="hljs-number">0</span>;                           <span class="hljs-comment">//起点到自己的距离是0</span><br>    <span class="hljs-built_in">priority_queue</span> &lt;s_node&gt; Q;          <span class="hljs-comment">//优先队列，存结点信息</span><br>    Q.push(s_node(s, dis[s]));          <span class="hljs-comment">//起点进队列</span><br>    <span class="hljs-keyword">while</span> (!Q.empty())   &#123;<br>        s_node u = Q.top();             <span class="hljs-comment">//pop出距起点s距离最小的结点u</span><br>        Q.pop();<br>        <span class="hljs-keyword">if</span>(done[u.id])  <span class="hljs-keyword">continue</span>;       <span class="hljs-comment">//丢弃已经找到最短路径的结点。即集合A中的结点            </span><br>        done[u.id]= <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;e[u.id].size(); i++) &#123;  <span class="hljs-comment">//检查结点u的所有邻居</span><br>            edge y = e[u.id][i];         <span class="hljs-comment">//u.id的第i个邻居是y.to</span><br>            <span class="hljs-keyword">if</span>(done[y.to])  <span class="hljs-keyword">continue</span>;    <span class="hljs-comment">//丢弃已经找到最短路径的邻居结点                </span><br>            <span class="hljs-keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;<br>                dis[y.to] = y.w + u.n_dis;<br>                Q.push(s_node(y.to, dis[y.to]));  <span class="hljs-comment">//扩展新的邻居，放到优先队列中</span><br>                pre[y.to]=u.id;  <span class="hljs-comment">//如果有需要，记录路径</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// print_path(s,n);          //如果有需要，打印路径: 起点1，终点n</span><br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)    e[i].clear();<br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-type">int</span> u,v,w;  <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%lld&quot;</span>,&amp;u,&amp;v,&amp;w);<br>        e[u].push_back(edge(u,v,w));<br>     <span class="hljs-comment">// e[v].push_back(edge(v,u,w));    //本题是单向道路</span><br>    &#125;<br>    dijkstra();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-keyword">if</span>(dis[i]&gt;=INF)  <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;-1 &quot;</span>;<br>        <span class="hljs-keyword">else</span>   <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld &quot;</span>, dis[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">INF</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x3f3f3f3f3f3f3f3fL</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">300005</span>;<br>    <span class="hljs-keyword">static</span> ArrayList&lt;Edge&gt;[] e = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] pre = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] dis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>[] done = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N];<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span> &#123;<br>        <span class="hljs-type">int</span> from, to;<br>        <span class="hljs-type">long</span> w;<br><br>        Edge(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">long</span> c) &#123;<br>            from = a;<br>            to = b;<br>            w = c;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SNode</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;SNode&gt; &#123;<br>        <span class="hljs-type">int</span> id;<br>        <span class="hljs-type">long</span> n_dis;<br><br>        SNode(<span class="hljs-type">int</span> b, <span class="hljs-type">long</span> c) &#123;<br>            id = b;<br>            n_dis = c;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(SNode o)</span> &#123;<br>            <span class="hljs-keyword">return</span> Long.compare(n_dis, o.n_dis);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printPath</span><span class="hljs-params">(<span class="hljs-type">int</span> s, <span class="hljs-type">int</span> t)</span> &#123;<br>        <span class="hljs-keyword">if</span> (s == t) &#123;<br>            System.out.print(s + <span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        printPath(s, pre[t]);<br>        System.out.print(t + <span class="hljs-string">&quot; &quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dijkstra</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        PriorityQueue&lt;SNode&gt; Q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;();<br>        Arrays.fill(dis, INF);<br>        dis[s] = <span class="hljs-number">0</span>;<br>        Q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SNode</span>(s, dis[s]));<br>        <span class="hljs-keyword">while</span> (!Q.isEmpty()) &#123;<br>            <span class="hljs-type">SNode</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> Q.poll();<br>            <span class="hljs-keyword">if</span> (done[u.id])<br>                <span class="hljs-keyword">continue</span>;<br>            done[u.id] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">for</span> (Edge y : e[u.id]) &#123;<br>                <span class="hljs-keyword">if</span> (done[y.to])<br>                    <span class="hljs-keyword">continue</span>;<br>                <span class="hljs-keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;<br>                    dis[y.to] = y.w + u.n_dis;<br>                    Q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SNode</span>(y.to, dis[y.to]));<br>                    pre[y.to] = u.id;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// printPath(s, n);</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>        <span class="hljs-type">StringTokenizer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringTokenizer</span>(br.readLine());<br>        n = Integer.parseInt(st.nextToken());<br>        m = Integer.parseInt(st.nextToken());<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            e[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringTokenizer</span>(br.readLine());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> Integer.parseInt(st.nextToken());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> Integer.parseInt(st.nextToken());<br>            <span class="hljs-type">long</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> Long.parseLong(st.nextToken());<br>            e[u].add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Edge</span>(u, v, w));<br>            <span class="hljs-comment">// e[v].add(new Edge(v, u, w)); //本题是单向道路</span><br>        &#125;<br>        dijkstra();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (dis[i] &gt;= INF)<br>                System.out.print(<span class="hljs-string">&quot;-1 &quot;</span>);<br>            <span class="hljs-keyword">else</span><br>                System.out.print(dis[i] + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs undefined">import heapq<br><br>INF = 0x3f3f3f3f3f3f3f3f<br>N = 300002<br><br>class Edge:<br>    def __init__(self, fr, to, w):<br>        self.fr = fr<br>        self.to = to<br>        self.w = w<br><br>class SNode:<br>    def __init__(self, id, n_dis):<br>        self.id = id<br>        self.n_dis = n_dis<br><br>    def __lt__(self, other):<br>        return self.n_dis &lt; other.n_dis<br><br>def print_path(s, t):<br>    if s == t:<br>        print(s, end=&quot; &quot;)<br>        return<br>    print_path(s, pre[t])<br>    print(t, end=&quot; &quot;)<br><br>def dijkstra():<br>    s = 1<br>    done = [False] * N<br>    dis = [INF] * N<br>    pre = [-1] * N<br>    dis[s] = 0<br>    pq = []<br>    heapq.heappush(pq, SNode(s, dis[s]))<br>    while pq:<br>        u = heapq.heappop(pq)<br>        if done[u.id]:<br>            continue<br>        done[u.id] = True<br>        for y in e[u.id]:<br>            if done[y.to]:<br>                continue<br>            if dis[y.to] &gt; y.w + u.n_dis:<br>                dis[y.to] = y.w + u.n_dis<br>                heapq.heappush(pq, SNode(y.to, dis[y.to]))<br>                pre[y.to] = u.id<br>    for i in range(1, n+1):<br>        if dis[i] &gt;= INF:<br>            print(&quot;-1&quot;, end=&quot; &quot;)<br>        else:<br>            print(dis[i], end=&quot; &quot;)<br><br>n, m = map(int, input().split())<br>e = [[] for _ in range(N)]<br>for i in range(m):<br>    u, v, w = map(int, input().split())<br>    e[u].append(Edge(u, v, w))<br><br>dijkstra()<br></code></pre></td></tr></table></figure><h3 id="Bellman-Ford-算法"><a href="#Bellman-Ford-算法" class="headerlink" title="Bellman-Ford 算法"></a>Bellman-Ford 算法</h3><p>BFS 的扩散思想，每个人都去问自己的相邻节点到 <code>S</code> 点的距离最近是多少。</p><p>第一轮至少有一个点得到了到 <code>S</code> 的最短距离，即与 <code>S</code> 相邻的节点，标记为 <code>T1</code></p><p>重复以上操作，那么必然至少又有一个节点找到了与 <code>S</code> 的最短距离，即与 <code>T1</code> 相邻的节点，标记为 <code>T2</code></p><p><strong>一共需要几轮操作？</strong></p><p>每一轮操作，都至少有一个新的结点得到了到 <code>S</code> 的最短路径。所以，最多只需要 <code>n</code> 轮操作，就能完成 <code>n</code> 个结点。在每一轮操作中，需要检查所有 <code>m</code> 个边，更新最短距离。</p><p>Bellman-Ford 算法的复杂度：<code>O(nm)</code>。</p><p><strong>Bellman-Ford 能判断负圈：</strong></p><p>没有负圈时，只需要 <code>n</code> 轮就结束。</p><p>如果超过 <code>n</code> 轮，最短路径还有变化，那么肯定有负圈。</p><h4 id="SPFA-算法"><a href="#SPFA-算法" class="headerlink" title="SPFA 算法"></a>SPFA 算法</h4><p>队列优化版的 Bellman-Ford</p><p>SPFA &#x3D; 队列处理+Bellman-Ford。</p><p>Bellman-Ford 算法有很多低效或无效的操作。其核心内容，是在每一轮操作中，更新所有结点到起点 <code>S</code> 的最短距离。 计算和调整一个结点 <code>U</code> 到 <code>S</code> 的最短距离后，如果紧接着调整 <code>U</code> 的邻居结点，这些邻居肯定有新的计算结果；而如果漫无目的地计算不与 <code>U</code> 相邻的结点，很可能毫无变化，所以这些操作是低效的。</p><p><strong>改进：</strong> 计算结点 <code>U</code> 之后，下一步只计算和调整它的邻居，能加快收敛的过程。 这些步骤用队列进行操作，这就是 SPFA。</p><p>（1）起点 <code>S</code> 入队，计算它所有邻居到 <code>S</code> 的最短距离。把 <code>S</code> 出队，状态有更新的邻居入队，没更新的不入队。 （2）现在队列的头部是 <code>S</code> 的一个邻居 <code>U</code>。弹出 <code>U</code>，更新它所有邻居的状态，把其中有状态变化的邻居入队列。 （3）继续以上过程，直到队列空。这也意味着，所有结点的状态都不再更新。最后的状态就是到起点 <code>S</code> 的最短路径。</p><p>弹出 <code>U</code> 之后，在后面的计算中，<code>U</code> 可能会再次更新状态（后来发现，<code>U</code> 借道别的结点去 <code>S</code>，路更近）。所以，<code>U</code> 可能需要重新入队列。 有可能只有很少结点重新进入队列，也有可能很多。这取决于图的特征。</p><p><strong>所以，SPFA 是不稳定的,所以根据题目的类型，我们要选择合适的算法。</strong></p><p><strong>SPFA 模板如下：</strong></p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e3</span>+<span class="hljs-number">10</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">edge</span>&#123;<br>    <span class="hljs-type">int</span> to;    <span class="hljs-type">long</span> <span class="hljs-type">long</span> w;<br>    <span class="hljs-built_in">edge</span>(<span class="hljs-type">int</span> tt,<span class="hljs-type">long</span> <span class="hljs-type">long</span> ww) &#123;to = tt; w = ww;&#125;<br>&#125;;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> dist[N];<br><span class="hljs-type">int</span> inq[N];<br>vector&lt;edge&gt; e[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">spfa</span><span class="hljs-params">(<span class="hljs-type">int</span> s)</span></span>&#123;<br>    <span class="hljs-built_in">memset</span>(dist,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(dist));<br>    dist[s] = <span class="hljs-number">0</span>;      <span class="hljs-comment">//起点到自己的距离是0</span><br>    queue&lt;<span class="hljs-type">int</span>&gt; q;<br>    q.<span class="hljs-built_in">push</span>(s);        <span class="hljs-comment">//从s开始，s进队列</span><br>    inq[s] = <span class="hljs-number">1</span>;       <span class="hljs-comment">//起点在队列中</span><br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>()) &#123;<br>        <span class="hljs-type">int</span> u = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        inq[u] = <span class="hljs-number">0</span>;   <span class="hljs-comment">//u已经不在队列中</span><br>        <span class="hljs-keyword">if</span>(dist[u] == INF)     <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; e[u].<span class="hljs-built_in">size</span>();i++) &#123;   <span class="hljs-comment">//遍历u的邻居</span><br>            <span class="hljs-type">int</span> v = e[u][i].to;<br>            <span class="hljs-type">long</span> <span class="hljs-type">long</span> w = e[u][i].w;<br>            <span class="hljs-keyword">if</span>(dist[v] &gt; dist[u]+w) &#123;         <span class="hljs-comment">//u的第i个邻居v，它借道u，到s更近</span><br>                dist[v] = dist[u]+w;          <span class="hljs-comment">//更新邻居v到s的距离</span><br>                <span class="hljs-keyword">if</span>(!inq[v]) &#123;      <span class="hljs-comment">//邻居v更新状态了，但v不在队列中，放进队列</span><br>                    q.<span class="hljs-built_in">push</span>(v);<br>                    inq[v] = <span class="hljs-number">1</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> n,m,s;cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= m;i++)    &#123;<br>        <span class="hljs-type">int</span> u,v; <span class="hljs-type">long</span> <span class="hljs-type">long</span> w;<br>        cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;<br>        e[u].<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">edge</span>(v,w));<br>    &#125;<br>    <span class="hljs-built_in">spfa</span>(s);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= n;i++) &#123;<br>        <span class="hljs-keyword">if</span>(dist[i]==INF)  cout &lt;&lt; <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">else</span>              cout &lt;&lt; dist[i];<br>        <span class="hljs-keyword">if</span>(i != n)        cout &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        <span class="hljs-keyword">else</span>              cout &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">INF</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x3f3f3f3f3f3f3f3fL</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">5010</span>;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] dist = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] inq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> List&lt;edge&gt;[] e = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N];<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">edge</span> &#123;<br>        <span class="hljs-type">int</span> to;<br>        <span class="hljs-type">long</span> w;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">edge</span><span class="hljs-params">(<span class="hljs-type">int</span> tt, <span class="hljs-type">long</span> ww)</span> &#123;<br>            to = tt;<br>            w = ww;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">spfa</span><span class="hljs-params">(<span class="hljs-type">int</span> s)</span> &#123;<br>        Arrays.fill(dist, INF);<br>        dist[s] = <span class="hljs-number">0</span>;<br>        Queue&lt;Integer&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>        q.add(s);<br>        inq[s] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (!q.isEmpty()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> q.poll();<br>            inq[u] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">if</span> (dist[u] == INF) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; e[u].size(); i++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> e[u].get(i).to;<br>                <span class="hljs-type">long</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> e[u].get(i).w;<br>                <span class="hljs-keyword">if</span> (dist[v] &gt; dist[u] + w) &#123;<br>                    dist[v] = dist[u] + w;<br>                    <span class="hljs-keyword">if</span> (inq[v] == <span class="hljs-number">0</span>) &#123;<br>                        q.add(v);<br>                        inq[v] = <span class="hljs-number">1</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            e[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> in.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> in.nextInt();<br>            <span class="hljs-type">long</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> in.nextLong();<br>            e[u].add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">edge</span>(v, w));<br>        &#125;<br>        spfa(s);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (dist[i] == INF) System.out.print(<span class="hljs-string">&quot;-1 &quot;</span>);<br>            <span class="hljs-keyword">else</span> System.out.print(dist[i] + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br>INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span><br>N = <span class="hljs-number">5010</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, to, w</span>):<br>        self.to = to<br>        self.w = w<br><br>dist = [INF] * N<br>inq = [<span class="hljs-number">0</span>] * N<br>e = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">spfa</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-keyword">global</span> dist<br>    <span class="hljs-keyword">global</span> inq<br>    dist = [INF] * N<br>    dist[s] = <span class="hljs-number">0</span><br>    q = []<br>    heapq.heappush(q, s)<br>    inq[s] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> q:<br>        u = heapq.heappop(q)<br>        inq[u] = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> dist[u] == INF:<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(e[u])):<br>            v = e[u][i].to<br>            w = e[u][i].w<br>            <span class="hljs-keyword">if</span> dist[v] &gt; dist[u] + w:<br>                dist[v] = dist[u] + w<br>                <span class="hljs-keyword">if</span> inq[v] == <span class="hljs-number">0</span>:<br>                    heapq.heappush(q, v)<br>                    inq[v] = <span class="hljs-number">1</span><br><br>n, m, s = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    e[u].append(Edge(v, w))<br>spfa(s)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> dist[i] == INF:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-1&quot;</span>, end=<span class="hljs-string">&quot; &quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(dist[i], end=<span class="hljs-string">&quot; &quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>Dijkstra：适用于权值为非负的图的单源最短路径，用斐波那契堆的复杂度 <code>O(E+VlgV)</code> BellmanFord：适用于权值有负值的图的单源最短路径，并且能够检测负圈，复杂度 <code>O(VE)</code> SPFA：适用于权值有负值，且没有负圈的图的单源最短路径。论文中的复杂度为 <code>O(kE)</code>, 其中 <code>k</code> 为每个节点进入队列的次数，且 <code>k</code> 一般 <code>&lt;=2</code>，但此处的复杂度证明是有问题的，其实 SPFA 的最坏情况应该是 <code>O(VE)</code>。 Floyd：每对节点之间的最短路径。</p><p><strong>所以：</strong></p><p>单源最短路 (1)当权值为非负时，用 <code>Dijkstra</code>。 (2)当权值有负值，且没有负圈，则用 <code>SPFA</code>。<code>SPFA</code> 能检测负圈，但是不能输出负圈。 (3)当权值有负值，而且可能存在负圈需要输出，则用 <code>BellmanFord</code>。能够检测并输出负圈。 多源最短路使用 <code>Floyd</code></p><h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><p>在无向图中，连通而且不含有圈（环路）的图，称为树。 最小生成树 MST：一个有 <code>n</code> 个结点的连通图的生成树是原图的极小连通子图，包含原图中的所有 <code>n</code> 个结点，并且边的权值之和最小。</p><h3 id="Prim-算法"><a href="#Prim-算法" class="headerlink" title="Prim 算法"></a>Prim 算法</h3><p>对点进行贪心操作：“最近的邻居一定在 MST 上”。 从任意一个点 <code>u</code> 开始，把距离它最近的点 <code>v</code> 加入到 MST 中；下一步，把距离 {<code>u, v</code>} 最近的点 <code>w</code> 加入到 MST 中；继续这个过程，直到所有点都在 MST 中。</p><ul><li>C++</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1005</span>;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; demo;<br><span class="hljs-type">int</span> closest[MAXN],lowcost[MAXN],m,n;<span class="hljs-comment">//m为节点的个数，n为边的数量</span><br><span class="hljs-type">int</span> G[MAXN][MAXN];<span class="hljs-comment">//邻接矩阵</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">prim</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)<br>    &#123;<br>        lowcost[i] = INF;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)<br>    &#123;<br>        closest[i] = <span class="hljs-number">0</span>;<br>    &#125;<br>    closest[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<span class="hljs-comment">//加入第一个点，-1表示该点在集合U中，否则在集合V中</span><br>    <span class="hljs-type">int</span> num = <span class="hljs-number">0</span>,ans = <span class="hljs-number">0</span>,e = <span class="hljs-number">0</span>;<span class="hljs-comment">//e为最新加入集合的点</span><br>    <span class="hljs-keyword">while</span> (num &lt; m<span class="hljs-number">-1</span>)<span class="hljs-comment">//加入m-1条边</span><br>    &#123;<br>        <span class="hljs-type">int</span> micost = INF,miedge = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)<br>        <span class="hljs-keyword">if</span>(closest[i] != <span class="hljs-number">-1</span>)<br>        &#123;<br>            <span class="hljs-type">int</span> temp = G[e][i];<br>            <span class="hljs-keyword">if</span>(temp &lt; lowcost[i])<br>            &#123;<br>                lowcost[i] = temp;<br>                closest[i] = e;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(lowcost[i] &lt; micost)<br>            micost = lowcost[miedge=i];<br>        &#125;<br>        ans += micost;<br>        demo.push_back(micost);<br>        closest[e = miedge] = <span class="hljs-number">-1</span>;<br>        num++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;m, &amp;n);<br>    <span class="hljs-built_in">memset</span>(G,INF,<span class="hljs-keyword">sizeof</span>(G));<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)<br>    &#123;<br>       <span class="hljs-type">int</span> a,b,c;<br>       <span class="hljs-built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;<br><br>       G[b][a]=G[a][b]=c;<br><br>    &#125;<br><br>    <span class="hljs-built_in">cout</span>&lt;&lt;prim()&lt;&lt;<span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m<span class="hljs-number">-1</span>;i++) <span class="hljs-built_in">cout</span>&lt;&lt;demo[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INF</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x3f3f3f3f</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAXN</span> <span class="hljs-operator">=</span> <span class="hljs-number">1005</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] closest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[MAXN];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] lowcost = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[MAXN];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] G = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[MAXN][MAXN];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> m;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">List</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        m = scanner.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            G[b][a] = G[a][b] = c;<br>        &#125;<br><br>        System.out.println(prim());<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m - <span class="hljs-number">1</span>; i++) &#123;<br>            System.out.print(demo.get(i) + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">prim</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            lowcost[i] = INF;<br>            closest[i] = <span class="hljs-number">0</span>;<br>        &#125;<br><br>        closest[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span>;<span class="hljs-comment">//加入第一个点，-1表示该点在集合U中，否则在集合V中</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, ans = <span class="hljs-number">0</span>, e = <span class="hljs-number">0</span>;<span class="hljs-comment">//e为最新加入集合的点</span><br><br>        <span class="hljs-keyword">while</span> (num &lt; m - <span class="hljs-number">1</span>)<span class="hljs-comment">//加入m-1条边</span><br>        &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">micost</span> <span class="hljs-operator">=</span> INF, miedge = -<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>                <span class="hljs-keyword">if</span> (closest[i] != -<span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> G[e][i];<br>                    <span class="hljs-keyword">if</span> (temp &lt; lowcost[i]) &#123;<br>                        lowcost[i] = temp;<br>                        closest[i] = e;<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (lowcost[i] &lt; micost) &#123;<br>                        micost = lowcost[miedge = i];<br>                    &#125;<br>                &#125;<br>            &#125;<br>            ans += micost;<br>            demo.add(micost);<br>            closest[e = miedge] = -<span class="hljs-number">1</span>;<br>            num++;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python">INF = <span class="hljs-number">0x3f3f3f3f</span><br>MAXN = <span class="hljs-number">1005</span><br>closest = [<span class="hljs-number">0</span>] * MAXN<br>lowcost = [<span class="hljs-number">0</span>] * MAXN<br>G = [[INF] * MAXN <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(MAXN)]<br>demo = []<br><br>m,n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    a,b,c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[b][a]=G[a][b]=c<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">prim</span>():<br>    <span class="hljs-keyword">global</span> closest, lowcost, G, m<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        lowcost[i] = INF<br>        closest[i] = <span class="hljs-number">0</span><br><br>    closest[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span><br>    num = <span class="hljs-number">0</span><br>    ans = <span class="hljs-number">0</span><br>    e = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">while</span> num &lt; m-<span class="hljs-number">1</span>:<br>        micost = INF<br>        miedge = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-keyword">if</span> closest[i] != -<span class="hljs-number">1</span>:<br>                temp = G[e][i]<br>                <span class="hljs-keyword">if</span> temp &lt; lowcost[i]:<br>                    lowcost[i] = temp<br>                    closest[i] = e<br>                <span class="hljs-keyword">if</span> lowcost[i] &lt; micost:<br>                    miedge=i<br>                    micost = lowcost[miedge]<br>        ans += micost<br>        demo.append(micost)<br>        e = miedge<br>        closest[e] = -<span class="hljs-number">1</span><br>        num += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-built_in">print</span>(prim())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m - <span class="hljs-number">1</span>): <span class="hljs-built_in">print</span>(demo[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="kruskal-算法"><a href="#kruskal-算法" class="headerlink" title="kruskal 算法"></a>kruskal 算法</h3><p>对边进行贪心操作：“最短的边一定在 <code>MST</code> 上”。 从最短的边开始，把它加入到 <code>MST</code> 中；在剩下的边中找最短的边，加入到 <code>MST</code> 中；继续这个过程，直到所有点都在 <code>MST</code> 中。</p><p><code>kruskal</code> 算法的 2 个关键技术： （1）对边进行排序。 （2）判断圈，即处理连通性问题。这个问题用并查集简单而高效，并查集是 <code>kruskal</code> 算法的实现基础。</p><p>初始时最小生成树 <code>MST</code> 为空。开始的时候，每个点属于独立的集。</p><p>按边长从小到大进行边的遍历操作：</p><p>尝试将最小边加入最小生成树：</p><ul><li>如果边的两个端点属于同一个集合，就说明这两个点已经被加入最小生成树。则不能将边加入，否则就会生成一个环。</li><li>如果两个端点不属于同一个集合，就说明该点还未纳入最小生成树，此边可以加入。</li></ul><p>重复上述操作，直到加入 <code>n-1</code> 条边。</p><p><code>kruskal</code> 算法的复杂度包括两部分：对边的排序 <code>O(ElogE)</code>，并查集的操作 <code>O(E)</code>，一共是 <code>O(ElogE + E)</code>，约等于 <code>O(ElogE)</code>，时间主要花在排序上。</p><p>如果图的边很多，<code>kruskal</code> 的复杂度要差一些。<code>kruskal</code> 适用于稀疏图，<code>prim</code> 适合稠密图。</p><p><strong>模板如下：</strong></p><ul><li>C++</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> n,m;<br><span class="hljs-type">int</span> father[<span class="hljs-number">1100000</span>];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">int</span> x;<br>    <span class="hljs-type">int</span> y;<br>    <span class="hljs-type">int</span> k;<br>&#125; Q[<span class="hljs-number">1100000</span>];<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (father[x] == x)<br>        <span class="hljs-keyword">return</span> x;<br>    <span class="hljs-keyword">return</span> father[x] = find(father[x]);<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-title function_">cmp</span><span class="hljs-params">(node a, node b)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> a.k &lt; b.k;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);<br><br>    <span class="hljs-type">int</span> cont = <span class="hljs-number">0</span>,<br>        sum = <span class="hljs-number">0</span>, st = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d %d&quot;</span>, &amp;Q[i].x, &amp;Q[i].y, &amp;Q[i].k);<br>        cont += Q[i].k;<br>    &#125;<br>    sort(Q, Q + m, cmp);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        father[i] = i;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> tx = find(Q[i].x);<br>        <span class="hljs-type">int</span> ty = find(Q[i].y);<br>        <span class="hljs-keyword">if</span> (tx != ty)<br>        &#123;<br>            sum += Q[i].k;<br>            st++;<br>            father[tx] = ty;<br>            <span class="hljs-keyword">if</span> (st == n - <span class="hljs-number">1</span>)<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, sum);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] father;<br>    <span class="hljs-keyword">static</span> Node[] Q;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br>        <span class="hljs-type">int</span> x;<br>        <span class="hljs-type">int</span> y;<br>        <span class="hljs-type">int</span> k;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> k)</span> &#123;<br>            <span class="hljs-built_in">this</span>.x = x;<br>            <span class="hljs-built_in">this</span>.y = y;<br>            <span class="hljs-built_in">this</span>.k = k;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = scanner.nextInt();<br>        m = scanner.nextInt();<br><br>        father = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>];<br>        Q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[m];<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">cont</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, sum = <span class="hljs-number">0</span>, st = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            Q[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(x, y, k);<br>            cont += k;<br>        &#125;<br>        Arrays.sort(Q, (a, b) -&gt; a.k - b.k);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            father[i] = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> find(Q[i].x);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ty</span> <span class="hljs-operator">=</span> find(Q[i].y);<br>            <span class="hljs-keyword">if</span> (tx != ty) &#123;<br>                sum += Q[i].k;<br>                st++;<br>                father[tx] = ty;<br>                <span class="hljs-keyword">if</span> (st == n - <span class="hljs-number">1</span>)<br>                    <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        System.out.println(sum);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span> (father[x] == x)<br>            <span class="hljs-keyword">return</span> x;<br>        <span class="hljs-keyword">return</span> father[x] = find(father[x]);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>father = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br>Q = []<br><br>cont = <span class="hljs-number">0</span><br><span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br>st = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    x, y, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Q.append(&#123;<span class="hljs-string">&#x27;x&#x27;</span>: x, <span class="hljs-string">&#x27;y&#x27;</span>: y, <span class="hljs-string">&#x27;k&#x27;</span>: k&#125;)<br>    cont += k<br><br>Q.sort(key=<span class="hljs-keyword">lambda</span> x:x[<span class="hljs-string">&#x27;k&#x27;</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br><br>    <span class="hljs-keyword">if</span> father[x] == x :<br>        <span class="hljs-keyword">return</span> x<br>    father[x] = find(father[x])<br>    <span class="hljs-keyword">return</span> father[x]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    tx = find(Q[i][<span class="hljs-string">&#x27;x&#x27;</span>])<br>    ty = find(Q[i][<span class="hljs-string">&#x27;y&#x27;</span>])<br>    <span class="hljs-keyword">if</span> tx != ty:<br>        <span class="hljs-built_in">sum</span> += Q[i][<span class="hljs-string">&#x27;k&#x27;</span>]<br>        st += <span class="hljs-number">1</span><br>        father[tx] = ty<br>        <span class="hljs-keyword">if</span> st == n - <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>)<br></code></pre></td></tr></table></figure><h2 id="图论例题"><a href="#图论例题" class="headerlink" title="图论例题"></a>图论例题</h2><h2 id="蓝桥王国-lanqiaoOJ-题号-1122"><a href="#蓝桥王国-lanqiaoOJ-题号-1122" class="headerlink" title="蓝桥王国 lanqiaoOJ 题号 1122"></a>蓝桥王国 lanqiaoOJ 题号 1122</h2><p><strong>题目描述</strong></p><p>蓝桥王国一共有 $N$ 个建筑和 $M$ 条单向道路，每条道路都连接着两个建筑，每个建筑都有自己编号，分别为 $1 \sim N$。（其中皇宫的编号为 1）国王想让小明回答从皇宫到每个建筑的最短路径是多少，但紧张的小明此时已经无法思考，请你编写程序帮助小明回答国王的考核。</p><p><strong>输入描述</strong></p><p>输入第一行包含 2 个正整数 $N,M$。第 2 到 $M+1$ 行每行包含三个正整数 $u,v,w$，表示 $u \to v$ 之间存在一条距离为 $w$ 的路。$1 \leq N \leq 3 \times 10^5$，$1 \leq M \leq 10^6$，$1 \leq u_i , v_i \leq N$，$0 \leq w_i \leq 10^9$。</p><p><strong>输出描述</strong></p><p>输出仅一行，共 $N$ 个数，分别表示从皇宫到编号为 $1 \sim N$ 建筑的最短距离，两两之间用空格隔开。（如果无法到达则输出 −1）</p><p><strong>解题思路:</strong></p><p>本题为单源最短路的模板题，直接套模板即可，本题我们采用 Dijkstra。</p><p>C++ 语言描述:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>LL;<br><span class="hljs-comment">//这样定义INF的好处是: INF &lt;= INF+x</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N= <span class="hljs-number">3e5</span>+<span class="hljs-number">2</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">edge</span>&#123;<br>    <span class="hljs-type">int</span> from, to; <span class="hljs-type">long</span> <span class="hljs-type">long</span> w; <span class="hljs-comment">//起点，终点，权值。起点from并没有用到，e[i]的i就是from</span><br>    <span class="hljs-built_in">edge</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b,<span class="hljs-type">long</span> <span class="hljs-type">long</span> c)&#123;from=a; to=b; w=c;&#125;<br>&#125;;<br>vector&lt;edge&gt;e[N];          <span class="hljs-comment">//用于存储图</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">s_node</span>&#123;<br>    <span class="hljs-type">int</span> id; <span class="hljs-type">long</span> <span class="hljs-type">long</span> n_dis;   <span class="hljs-comment">//id：结点；n_dis：这个结点到起点的距离</span><br>    <span class="hljs-built_in">s_node</span>(<span class="hljs-type">int</span> b,<span class="hljs-type">long</span> <span class="hljs-type">long</span> c)&#123;id=b; n_dis=c;&#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> s_node &amp; a) <span class="hljs-type">const</span><br>    &#123; <span class="hljs-keyword">return</span> n_dis &gt; a.n_dis;&#125;<br>&#125;;<br><span class="hljs-type">int</span> n,m;<br><span class="hljs-type">int</span> pre[N];                                <span class="hljs-comment">//记录前驱结点，用于生成路径</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_path</span><span class="hljs-params">(<span class="hljs-type">int</span> s, <span class="hljs-type">int</span> t)</span> </span>&#123;            <span class="hljs-comment">//打印从s到t的最短路</span><br>    <span class="hljs-keyword">if</span>(s==t)&#123; <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, s); <span class="hljs-keyword">return</span>; &#125;  <span class="hljs-comment">//打印起点</span><br>    <span class="hljs-built_in">print_path</span>(s, pre[t]);                 <span class="hljs-comment">//先打印前一个点</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, t);                      <span class="hljs-comment">//后打印当前点。最后打印的是终点t</span><br>&#125;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span>  dis[N];         <span class="hljs-comment">//记录所有结点到起点的距离</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dijkstra</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> s = <span class="hljs-number">1</span>;             <span class="hljs-comment">//起点s是1</span><br>    <span class="hljs-type">bool</span> done[N]; <span class="hljs-comment">//done[i]=true表示到结点i的最短路径已经找到</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) &#123;dis[i]=INF; done[i]=<span class="hljs-literal">false</span>; &#125;    <span class="hljs-comment">//初始化</span><br>    dis[s]=<span class="hljs-number">0</span>;                           <span class="hljs-comment">//起点到自己的距离是0</span><br>    priority_queue &lt;s_node&gt; Q;          <span class="hljs-comment">//优先队列，存结点信息</span><br>    Q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">s_node</span>(s, dis[s]));          <span class="hljs-comment">//起点进队列</span><br>    <span class="hljs-keyword">while</span> (!Q.<span class="hljs-built_in">empty</span>())   &#123;<br>        s_node u = Q.<span class="hljs-built_in">top</span>();             <span class="hljs-comment">//pop出距起点s距离最小的结点u</span><br>        Q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">if</span>(done[u.id])  <span class="hljs-keyword">continue</span>;       <span class="hljs-comment">//丢弃已经找到最短路径的结点。即集合A中的结点</span><br>        done[u.id]= <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;e[u.id].<span class="hljs-built_in">size</span>(); i++) &#123;  <span class="hljs-comment">//检查结点u的所有邻居</span><br>            edge y = e[u.id][i];         <span class="hljs-comment">//u.id的第i个邻居是y.to</span><br>            <span class="hljs-keyword">if</span>(done[y.to])  <span class="hljs-keyword">continue</span>;    <span class="hljs-comment">//丢弃已经找到最短路径的邻居结点</span><br>            <span class="hljs-keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;<br>                dis[y.to] = y.w + u.n_dis;<br>                Q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">s_node</span>(y.to, dis[y.to]));  <span class="hljs-comment">//扩展新的邻居，放到优先队列中</span><br>                pre[y.to]=u.id;  <span class="hljs-comment">//如果有需要，记录路径</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// print_path(s,n);          //如果有需要，打印路径: 起点1，终点n</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)    e[i].<span class="hljs-built_in">clear</span>();<br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-type">int</span> u,v,w;  <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%lld&quot;</span>,&amp;u,&amp;v,&amp;w);<br>        e[u].<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">edge</span>(u,v,w));<br>     <span class="hljs-comment">// e[v].push_back(edge(v,u,w));    //本题是单向道路</span><br>    &#125;<br>    <span class="hljs-built_in">dijkstra</span>();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-keyword">if</span>(dis[i]&gt;=INF)  cout&lt;&lt;<span class="hljs-string">&quot;-1 &quot;</span>;<br>        <span class="hljs-keyword">else</span>   <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld &quot;</span>, dis[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br>INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span><br>N = <span class="hljs-number">300002</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, fr, to, w</span>):<br>        self.fr = fr<br>        self.to = to<br>        self.w = w<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, <span class="hljs-built_in">id</span>, n_dis</span>):<br>        self.<span class="hljs-built_in">id</span> = <span class="hljs-built_in">id</span><br>        self.n_dis = n_dis<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> self.n_dis &lt; other.n_dis<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_path</span>(<span class="hljs-params">s, t</span>):<br>    <span class="hljs-keyword">if</span> s == t:<br>        <span class="hljs-built_in">print</span>(s, end=<span class="hljs-string">&quot; &quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    print_path(s, pre[t])<br>    <span class="hljs-built_in">print</span>(t, end=<span class="hljs-string">&quot; &quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>():<br>    s = <span class="hljs-number">1</span><br>    done = [<span class="hljs-literal">False</span>] * N<br>   <br><br> dis = [INF] * N<br>    pre = [-<span class="hljs-number">1</span>] * N<br>    dis[s] = <span class="hljs-number">0</span><br>    pq = []<br>    heapq.heappush(pq, SNode(s, dis[s]))<br>    <span class="hljs-keyword">while</span> pq:<br>        u = heapq.heappop(pq)<br>        <span class="hljs-keyword">if</span> done[u.<span class="hljs-built_in">id</span>]:<br>            <span class="hljs-keyword">continue</span><br>        done[u.<span class="hljs-built_in">id</span>] = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> e[u.<span class="hljs-built_in">id</span>]:<br>            <span class="hljs-keyword">if</span> done[y.to]:<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">if</span> dis[y.to] &gt; y.w + u.n_dis:<br>                dis[y.to] = y.w + u.n_dis<br>                heapq.heappush(pq, SNode(y.to, dis[y.to]))<br>                pre[y.to] = u.<span class="hljs-built_in">id</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> dis[i] &gt;= INF:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-1&quot;</span>, end=<span class="hljs-string">&quot; &quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(dis[i], end=<span class="hljs-string">&quot; &quot;</span>)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>e = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    e[u].append(Edge(u, v, w))<br><br>dijkstra()<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">INF</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x3f3f3f3f3f3f3f3fL</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">300005</span>;<br>    <span class="hljs-keyword">static</span> ArrayList&lt;Edge&gt;[] e = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] pre = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] dis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>[] done = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N];<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span> &#123;<br>        <span class="hljs-type">int</span> from, to;<br>        <span class="hljs-type">long</span> w;<br><br>        Edge(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">long</span> c) &#123;<br>            from = a;<br>            to = b;<br>            w = c;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SNode</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;SNode&gt; &#123;<br>        <span class="hljs-type">int</span> id;<br>        <span class="hljs-type">long</span> n_dis;<br><br>        SNode(<span class="hljs-type">int</span> b, <span class="hljs-type">long</span> c) &#123;<br>            id = b;<br>            n_dis = c;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(SNode o)</span> &#123;<br>            <span class="hljs-keyword">return</span> Long.compare(n_dis, o.n_dis);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printPath</span><span class="hljs-params">(<span class="hljs-type">int</span> s, <span class="hljs-type">int</span> t)</span> &#123;<br>        <span class="hljs-keyword">if</span> (s == t) &#123;<br>            System.out.print(s + <span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        printPath(s, pre[t]);<br>        System.out.print(t + <span class="hljs-string">&quot; &quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dijkstra</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        PriorityQueue&lt;SNode&gt; Q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;();<br>        Arrays.fill(dis, INF);<br>        dis[s] = <span class="hljs-number">0</span>;<br>        Q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SNode</span>(s, dis[s]));<br>        <span class="hljs-keyword">while</span> (!Q.isEmpty()) &#123;<br>            <span class="hljs-type">SNode</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> Q.poll();<br>            <span class="hljs-keyword">if</span> (done[u.id])<br>                <span class="hljs-keyword">continue</span>;<br>            done[u.id] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">for</span> (Edge y : e[u.id]) &#123;<br>                <span class="hljs-keyword">if</span> (done[y.to])<br>                    <span class="hljs-keyword">continue</span>;<br>                <span class="hljs-keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;<br>                    dis[y.to] = y.w + u.n_dis;<br>                    Q.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SNode</span>(y.to, dis[y.to]));<br>                    pre[y.to] = u.id;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// printPath(s, n);</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>        <span class="hljs-type">StringTokenizer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringTokenizer</span>(br.readLine());<br>        n = Integer.parseInt(st.nextToken());<br>        m = Integer.parseInt(st.nextToken());<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            e[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringTokenizer</span>(br.readLine());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> Integer.parseInt(st.nextToken());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> Integer.parseInt(st.nextToken());<br>            <span class="hljs-type">long</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> Long.parseLong(st.nextToken());<br>            e[u].add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Edge</span>(u, v, w));<br>            <span class="hljs-comment">// e[v].add(new Edge(v, u, w)); //本题是单向道路</span><br>        &#125;<br>        dijkstra();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (dis[i] &gt;= INF)<br>                System.out.print(<span class="hljs-string">&quot;-1 &quot;</span>);<br>            <span class="hljs-keyword">else</span><br>                System.out.print(dis[i] + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="随机数据下的最短路问题-lanqiaoOJ-题号-1366"><a href="#随机数据下的最短路问题-lanqiaoOJ-题号-1366" class="headerlink" title="随机数据下的最短路问题 lanqiaoOJ 题号 1366"></a>随机数据下的最短路问题 lanqiaoOJ 题号 1366</h2><p><strong>题目描述</strong></p><p>给定 $N$ 个点和 $M$ 条单向道路，每条道路都连接着两个点，每个点都有自己编号，分别为 $1 \sim N$。问你从 $S$ 点出发，到达每个点的最短路径为多少。</p><p><strong>输入描述</strong></p><p>输入第一行包含三个正整数 $N,M,S$。第 2 到 $M+1$ 行每行包含三个正整数 $u,v,w$，表示 $u \to v$ 之间存在一条距离为 $w$ 的路。$1 \leq N \leq 5 \times 10^3$，$1 \leq M \leq 5 \times 10^4$，$1 \leq u_i, v_i \leq N$，$0 \leq w_i \leq 10^9$。</p><p><strong>输出描述</strong></p><p>输出仅一行，共 $N$ 个数，分别表示从编号 $S$ 到编号为 $1 \sim N$ 点的最短距离，两两之间用空格隔开。（如果无法到达则输出 −1）</p><p><strong>解题思路:</strong></p><p>本题为单源最短路的模板题，直接套模板即可，本题我们采用 SPFA。</p><p>C++ 语言描述:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e3</span>+<span class="hljs-number">10</span>;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">edge</span>&#123;</span><br>    <span class="hljs-type">int</span> to;    <span class="hljs-type">long</span> <span class="hljs-type">long</span> w;<br>    edge(<span class="hljs-type">int</span> tt,<span class="hljs-type">long</span> <span class="hljs-type">long</span> ww) &#123;to = tt; w = ww;&#125;<br>&#125;;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> dist[N];<br><span class="hljs-type">int</span> inq[N];<br><span class="hljs-built_in">vector</span>&lt;edge&gt; e[N];<br><span class="hljs-type">void</span> <span class="hljs-title function_">spfa</span><span class="hljs-params">(<span class="hljs-type">int</span> s)</span>&#123;<br>    <span class="hljs-built_in">memset</span>(dist,<span class="hljs-number">0x3f</span>,<span class="hljs-keyword">sizeof</span>(dist));<br>    dist[s] = <span class="hljs-number">0</span>;      <span class="hljs-comment">//起点到自己的距离是0</span><br>    <span class="hljs-built_in">queue</span>&lt;<span class="hljs-type">int</span>&gt; q;<br>    q.push(s);        <span class="hljs-comment">//从s开始，s进队列</span><br>    inq[s] = <span class="hljs-number">1</span>;       <span class="hljs-comment">//起点在队列中</span><br>    <span class="hljs-keyword">while</span>(!q.empty()) &#123;<br>        <span class="hljs-type">int</span> u = q.front();<br>        q.pop();<br>        inq[u] = <span class="hljs-number">0</span>;   <span class="hljs-comment">//u已经不在队列中</span><br>        <span class="hljs-keyword">if</span>(dist[u] == INF)     <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; e[u].size();i++) &#123;   <span class="hljs-comment">//遍历u的邻居</span><br>            <span class="hljs-type">int</span> v = e[u][i].to;<br>            <span class="hljs-type">long</span> <span class="hljs-type">long</span> w = e[u][i].w;<br>            <span class="hljs-keyword">if</span>(dist[v] &gt; dist[u]+w) &#123;         <span class="hljs-comment">//u的第i个邻居v，它借道u，到s更近</span><br>                dist[v] = dist[u]+w;          <span class="hljs-comment">//更新邻居v到s的距离</span><br>                <span class="hljs-keyword">if</span>(!inq[v]) &#123;      <span class="hljs-comment">//邻居v更新状态了，但v不在队列中，放进队列</span><br>                    q.push(v);<br>                    inq[v] = <span class="hljs-number">1</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">int</span> n,m,s;<span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;s;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= m;i++)    &#123;<br>        <span class="hljs-type">int</span> u,v; <span class="hljs-type">long</span> <span class="hljs-type">long</span> w;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;u&gt;&gt;v&gt;&gt;w;<br>        e[u].push_back(edge(v,w));<br>    &#125;<br>    spfa(s);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= n;i++) &#123;<br>        <span class="hljs-keyword">if</span>(dist[i]==INF)  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">else</span>              <span class="hljs-built_in">cout</span> &lt;&lt; dist[i];<br>        <span class="hljs-keyword">if</span>(i != n)        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        <span class="hljs-keyword">else</span>              <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br>INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span><br>N = <span class="hljs-number">5010</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, to, w</span>):<br>        self.to = to<br>        self.w = w<br><br>dist = [INF] * N<br>inq = [<span class="hljs-number">0</span>] * N<br>e = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">spfa</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-keyword">global</span> dist<br>    <span class="hljs-keyword">global</span> inq<br>    dist = [INF] * N<br>    dist[s] = <span class="hljs-number">0</span><br>    q = []<br>    heapq.heappush(q, s)<br>    inq[s] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> q:<br>        u = heapq.heappop(q)<br>        inq[u] = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> dist[u] == INF:<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(e[u])):<br>            v = e[u][i].to<br>            w = e[u][i].w<br>            <span class="hljs-keyword">if</span> dist[v] &gt; dist[u] + w:<br>                dist[v] = dist[u] + w<br>                <span class="hljs-keyword">if</span> inq[v] == <span class="hljs-number">0</span>:<br>                    heapq.heappush(q, v)<br>                    inq[v] = <span class="hljs-number">1</span><br><br>n, m, s = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    e[u].append(Edge(v, w))<br>spfa(s)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> dist[i] == INF:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-1&quot;</span>, end=<span class="hljs-string">&quot; &quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(dist[i], end=<span class="hljs-string">&quot; &quot;</span>)<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">INF</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x3f3f3f3f3f3f3f3fL</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">5010</span>;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[] dist = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] inq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> List&lt;edge&gt;[] e = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>[N];<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">edge</span> &#123;<br>        <span class="hljs-type">int</span> to;<br>        <span class="hljs-type">long</span> w;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">edge</span><span class="hljs-params">(<span class="hljs-type">int</span> tt, <span class="hljs-type">long</span> ww)</span> &#123;<br>            to = tt;<br>            w = ww;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">spfa</span><span class="hljs-params">(<span class="hljs-type">int</span> s)</span> &#123;<br>        Arrays.fill(dist, INF);<br>        dist[s] = <span class="hljs-number">0</span>;<br>        Queue&lt;Integer&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>        q.add(s);<br>        inq[s] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (!q.isEmpty()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> q.poll();<br>            inq[u] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">if</span> (dist[u] == INF) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; e[u].size(); i++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> e[u].get(i).to;<br>                <span class="hljs-type">long</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> e[u].get(i).w;<br>                <span class="hljs-keyword">if</span> (dist[v] &gt; dist[u] + w) &#123;<br>                    dist[v] = dist[u] + w;<br>                    <span class="hljs-keyword">if</span> (inq[v] == <span class="hljs-number">0</span>) &#123;<br>                        q.add(v);<br>                        inq[v] = <span class="hljs-number">1</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            e[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> in.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> in.nextInt();<br>            <span class="hljs-type">long</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> in.nextLong();<br>            e[u].add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">edge</span>(v, w));<br>        &#125;<br>        spfa(s);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (dist[i] == INF) System.out.print(<span class="hljs-string">&quot;-1 &quot;</span>);<br>            <span class="hljs-keyword">else</span> System.out.print(dist[i] + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="路径-OJ-编号-1460"><a href="#路径-OJ-编号-1460" class="headerlink" title="路径 OJ 编号 1460"></a>路径 OJ 编号 1460</h2><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/e77a71de068da604d1245d5231201326-0.png" alt="图片描述"></p><p><strong>解题思路:</strong></p><p>填空题对时间没有要求，用最简单的 floyd</p><p>C++ 语言描述:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">3000</span>;<br><span class="hljs-type">const</span> ll INF = <span class="hljs-number">1e18</span>;<br>ll mp[N][N];<br><span class="hljs-type">void</span> <span class="hljs-title function_">floyd</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>;k &lt;= n;k++)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= n;i++)<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>;j &lt;= n;j++)<br>                mp[i][j] = min(mp[i][j], mp[i][k] + mp[k][j]);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">2021</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= n;i++)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>;j &lt;= n;j++)&#123;<br>            <span class="hljs-keyword">if</span>(i == j) mp[i][j] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">abs</span>(i - j)&lt;=<span class="hljs-number">21</span>) mp[i][j]=mp[j][i]=i*j/__gcd(i, j);<br>            <span class="hljs-keyword">else</span> mp[i][j] = mp[j][i] = INF;<br>        &#125;<br>    &#125;<br>    floyd(n);<br>    <span class="hljs-built_in">cout</span> &lt;&lt; mp[<span class="hljs-number">1</span>][<span class="hljs-number">2021</span>];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lcm</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(a * b / math.gcd(a, b))<br><br>n = <span class="hljs-number">2021</span><br>g = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">2</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">2</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> i == j:<br>            g[i][j] = g[j][i] = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">elif</span> <span class="hljs-built_in">abs</span>(i - j) &lt;= <span class="hljs-number">21</span>:<br>            g[i][j] = g[j][i] = lcm(i, j)<br>        <span class="hljs-keyword">else</span>:<br>            g[i][j] = <span class="hljs-number">1000000000</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> g[i][j] &gt; g[i][k] + g[k][j]:<br>                g[i][j] = g[i][k] + g[k][j]<br><span class="hljs-built_in">print</span>(g[<span class="hljs-number">1</span>][n])<br><br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">2021</span>;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> b == <span class="hljs-number">0</span> ? a : gcd(b, a % b);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lcm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> a * b / gcd(a, b);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span>[][] floyd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n][n];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; n &amp;&amp; j &lt; i + <span class="hljs-number">22</span>; j++)<br>                floyd[i][j] = floyd[j][i] = lcm(i + <span class="hljs-number">1</span>, j + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &lt; n; k++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++)<br>                    <span class="hljs-keyword">if</span> (floyd[i][k] != <span class="hljs-number">0</span> &amp;&amp; floyd[k][j] != <span class="hljs-number">0</span> &amp;&amp; (floyd[i][j] == <span class="hljs-number">0</span> || floyd[i][k] + floyd[k][j] &lt; floyd[i][j]))<br>                        floyd[i][j] = floyd[i][k] + floyd[k][j];<br>        System.out.println(floyd[<span class="hljs-number">0</span>][n - <span class="hljs-number">1</span>]);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="出差"><a href="#出差" class="headerlink" title="出差"></a>出差</h2><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/6fab239959de9ee1ffb4d57d7654fabf-0.png" alt="图片描述"></p><p><strong>解题思路:</strong></p><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/a28b434cf3a3579931db1586e3d0d710-0.png" alt="图片描述"></p><p>我们这里给大家一个朴素的 dijkstra 的模板，大家感受一下，优先队列到底优化的那一部分。</p><p>C++ 语言描述:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1010</span>;<br><br><span class="hljs-comment">//邻接矩阵</span><br><span class="hljs-type">int</span> gra[N][N];<br><span class="hljs-type">int</span> dist[N];<br><span class="hljs-type">int</span> g[N];<br><span class="hljs-type">bool</span> st[N];<br><span class="hljs-type">int</span> n,m;<br><span class="hljs-comment">//朴素版dijkstra</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dijkstra</span><span class="hljs-params">()</span><br>&#123;<br>     <span class="hljs-built_in">memset</span>(dist, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span> dist);<br>    dist[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i ++ )<br>    &#123;<br>        <span class="hljs-type">int</span> t = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j ++ )<br>            <span class="hljs-keyword">if</span> (!st[j] &amp;&amp; (t == <span class="hljs-number">-1</span> || dist[t] &gt; dist[j]))<br>                t = j;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j ++ )<br>            dist[j] = min(dist[j], dist[t] + gra[t][j]);<br>        st[t] = <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dist[n];<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) <span class="hljs-built_in">cin</span>&gt;&gt;g[i];<br>    g[n]=<span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">memset</span>(gra, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span> gra);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;++i)&#123;<br>        <span class="hljs-type">int</span> u,v,c;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;u&gt;&gt;v&gt;&gt;c;<br>        gra[u][v]=g[v]+c;<br>        gra[v][u]=g[u]+c;<br>    &#125;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;dijkstra()&lt;&lt;<span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-comment"># 邻接矩阵</span><br>gra = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>dist = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n+<span class="hljs-number">1</span>)<br>g = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>g[n] = <span class="hljs-number">0</span><br>st = [<span class="hljs-literal">False</span>] * (n+<span class="hljs-number">1</span>)<br><br><span class="hljs-comment"># 朴素版 Dijkstra</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>() -&gt; <span class="hljs-built_in">int</span>:<br>    dist[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>        t = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> st[j] <span class="hljs-keyword">and</span> (t == -<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> dist[t] &gt; dist[j]):<br>                t = j<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            dist[j] = <span class="hljs-built_in">min</span>(dist[j], dist[t] + gra[t][j])<br>        st[t] = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">return</span> dist[n]<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    gra[u][v] = g[v] + c<br>    gra[v][u] = g[u] + c<br><br><span class="hljs-built_in">print</span>(dijkstra())<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">1010</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] gra = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N][N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] dist = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>[] st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scan</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = scan.nextInt();<br>        m = scan.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>            g[i] = scan.nextInt();<br>        &#125;<br>        g[n] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; i &lt; N ; i ++) Arrays.fill(gra[i], <span class="hljs-number">0x3f3f3f</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; ++i) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> scan.nextInt(), v = scan.nextInt(), c = scan.nextInt();<br>            gra[u][v] = g[v] + c;<br>            gra[v][u] = g[u] + c;<br>        &#125;<br>        System.out.println(dijkstra());<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">dijkstra</span><span class="hljs-params">()</span> &#123;<br>        Arrays.fill(dist, <span class="hljs-number">10000000</span>);<br>        dist[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>                <span class="hljs-keyword">if</span>(!st[j] &amp;&amp; (t == -<span class="hljs-number">1</span> || dist[t] &gt; dist[j])) &#123;<br>                    t = j;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(t == -<span class="hljs-number">1</span>) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>                dist[j] = Math.min(dist[j], dist[t] + gra[t][j]);<br>            &#125;<br>            st[t] = <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dist[n];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="聪明的猴子"><a href="#聪明的猴子" class="headerlink" title="聪明的猴子"></a>聪明的猴子</h2><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/ceeb52dc7e8b316134f2c9c7b74b1c11-0.png" alt="图片描述"></p><hr><p><strong>解题思路:</strong></p><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/f77dcab941517e1b3648b7cb3c2fa740-0.png" alt="图片描述"></p><p>C++ 语言描述:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">int</span> a[<span class="hljs-number">5005</span>], x[<span class="hljs-number">5005</span>], y[<span class="hljs-number">5005</span>], f[<span class="hljs-number">5005</span>];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Edge</span>&#123;</span><br>    <span class="hljs-type">int</span> x;<br>    <span class="hljs-type">int</span> y;<br>    <span class="hljs-type">double</span> w;<br>&#125;edge[<span class="hljs-number">1000005</span>];<br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span>&#123;<br>    <span class="hljs-keyword">if</span> (x == f[x])<br>        <span class="hljs-keyword">return</span> x;<br>    f[x] = find(f[x]);<br>    <span class="hljs-keyword">return</span> f[x];<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">cmp</span><span class="hljs-params">(Edge a, Edge b)</span>&#123;<br>    <span class="hljs-keyword">return</span> a.w &lt; b.w;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span>&#123;<br>    <span class="hljs-type">int</span> xx = find(x);<br>    <span class="hljs-type">int</span> yy = find(y);<br>    <span class="hljs-keyword">if</span> (xx != yy)<br>        f[yy] = xx;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>        <span class="hljs-built_in">cin</span> &gt;&gt; a[i];<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-built_in">cin</span> &gt;&gt; x[i] &gt;&gt; y[i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        f[i] = i;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt;= n; j++)&#123;<br>            <span class="hljs-type">double</span> w = <span class="hljs-built_in">sqrt</span>((x[i] - x[j])*(x[i] - x[j]) + (y[i] - y[j])*(y[i] - y[j]));<br>            edge[++cnt] = &#123;i, j, w&#125;;<br>        &#125;<br>    &#125;<br>    sort(edge + <span class="hljs-number">1</span>, edge + cnt + <span class="hljs-number">1</span>, cmp);<br>    <span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">double</span> max = <span class="hljs-number">0.0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= cnt; i++)&#123;<br>        <span class="hljs-keyword">if</span> (find(edge[i].x)!=find(edge[i].y))&#123;<br>            merge(edge[i].x, edge[i].y);<br>            num++;<br>            max = max&gt;=edge[i].w?max:edge[i].w;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (num == n - <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>        <span class="hljs-keyword">if</span> (a[i] &gt;= max)<br>            ans++;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span>:<br>    x = <span class="hljs-number">0</span><br>    y = <span class="hljs-number">0</span><br>    w = <span class="hljs-number">0.0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y, w</span>):<br>        self.x = x<br>        self.y = y<br>        self.w = w<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> f[x]==x:<br>        <span class="hljs-keyword">return</span> f[x]<br>    <span class="hljs-keyword">else</span>:<br>        f[x] = find(f[x])<br>        <span class="hljs-keyword">return</span> f[x]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">x,y</span>):<br>    xx = find(x)<br>    yy = find(y)<br>    <span class="hljs-keyword">if</span> xx!=yy:<br>        f[yy] = xx<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    x = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)]<br>    y = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        b = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>        x[i + <span class="hljs-number">1</span>] = b[<span class="hljs-number">0</span>]<br>        y[i + <span class="hljs-number">1</span>] = b[<span class="hljs-number">1</span>]<br>    edge_list = []<br>    maxvalue = <span class="hljs-number">0</span><br>    num = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            w = math.sqrt((x[i] - x[j]) * (x[i] - x[j]) + (y[i] - y[j]) * (y[i] - y[j]))<br>            edge =  Edge(i, j, w)<br>            edge_list.append(edge)<br><br>    edge_list.sort(key=<span class="hljs-keyword">lambda</span> x: x.w)<br>    f = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> edge_list:<br>        <span class="hljs-keyword">if</span> find(i.x)!=find(i.y):<br>            merge(i.x,i.y)<br>            maxvalue = <span class="hljs-built_in">max</span>(maxvalue,i.w)<br>            num+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> num==n-<span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">break</span><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        <span class="hljs-keyword">if</span> a[i]&gt;=maxvalue:<br>            ans+=<span class="hljs-number">1</span><br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.io.OutputStreamWriter;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collections;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] a;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> m;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] x;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] y;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> max;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] f;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(System.out));<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException&#123;<br>        m = Integer.parseInt(in.readLine().trim());<br>        a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[m];<br>        String[] s = in.readLine().trim().split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)<br>            a[i] = Integer.parseInt(s[i]);<br>        n = Integer.parseInt(in.readLine().trim());<br>        x = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) &#123;<br>            s = in.readLine().trim().split(<span class="hljs-string">&quot; &quot;</span>);<br>            x[i] = Integer.parseInt(s[<span class="hljs-number">0</span>]);<br>            y[i] = Integer.parseInt(s[<span class="hljs-number">1</span>]);<br>        &#125;<br>        ArrayList&lt;Edge&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n-<span class="hljs-number">1</span>;i++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>;j&lt;n;j++) &#123;<br>                <span class="hljs-type">double</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> Math.sqrt((x[i]-x[j])*(x[i]-x[j])+(y[i]-y[j])*(y[i]-y[j]));<br>                <span class="hljs-type">Edge</span> <span class="hljs-variable">edge</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Edge</span>(i, j, l);<br>                list.add(edge);<br>            &#125;<br>        &#125;<br>        Collections.sort(list);<br>        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>            f[i] = i;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();i++) &#123;<br>            <span class="hljs-type">Edge</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> list.get(i);<br>            <span class="hljs-keyword">if</span>(find(e.x)!=find(e.y)) &#123;<br>                merge(e.x,e.y);<br>                max = Math.max(max, e.w);<br>                num++;<br>                <span class="hljs-keyword">if</span>(num==n-<span class="hljs-number">1</span>)<br>                    <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)<br>            <span class="hljs-keyword">if</span>(a[i]&gt;=max)<br>                ans++;<br>        System.out.println(ans);<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span>(f[x] == x)<br>            <span class="hljs-keyword">return</span> f[x];<br>        f[x] = find(f[x]);<br>        <span class="hljs-keyword">return</span> f[x];<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">xx</span> <span class="hljs-operator">=</span> find(x);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">yy</span> <span class="hljs-operator">=</span> find(y);<br>        <span class="hljs-keyword">if</span>(xx!=yy)<br>            f[yy] = xx;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Edge</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;Edge&gt;&#123;<br>    <span class="hljs-type">int</span> x;<br>    <span class="hljs-type">int</span> y;<br>    <span class="hljs-type">double</span> w;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Edge</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">double</span> w)</span> &#123;<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.x = x;<br>        <span class="hljs-built_in">this</span>.y = y;<br>        <span class="hljs-built_in">this</span>.w = w;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Edge o)</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.w&gt;o.w?<span class="hljs-number">1</span>:-<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="通电"><a href="#通电" class="headerlink" title="通电"></a>通电</h2><p><img src="/./../images/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/e0bde279d708165b220cfdf8848e1467-0.png" alt="图片描述"></p><p><strong>解题思路:</strong></p><p>给了你 <code>n</code> 个节点，又给了你 <code>n</code> 个基点之间相互连接需要多少钱，现在要 <code>n</code> 个村庄都通电，只需要保证 <code>n</code> 个节点构成连通子图即可。</p><p>最小的连通子图是树，也就是构造一棵树，那么在图上构造一棵最最少花费的树的问题即为最小生成树。</p><p>C++ 语言描述:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1005</span>;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; demo;<br><span class="hljs-type">double</span> closest[MAXN], lowcost[MAXN];<br><span class="hljs-type">int</span> m, n;             <span class="hljs-comment">// m为节点的个数，n为边的数量</span><br><span class="hljs-type">double</span> G[MAXN][MAXN]; <span class="hljs-comment">// 邻接矩阵</span><br><span class="hljs-type">double</span> <span class="hljs-title function_">prim</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>    &#123;<br>        lowcost[i] = INF;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>    &#123;<br>        closest[i] = <span class="hljs-number">0</span>;<br>    &#125;<br>    closest[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;             <span class="hljs-comment">// 加入第一个点，-1表示该点在集合U中，否则在集合V中</span><br>    <span class="hljs-type">int</span> num = <span class="hljs-number">0</span>,  e = <span class="hljs-number">0</span>; <span class="hljs-comment">// e为最新加入集合的点</span><br>    <span class="hljs-type">double</span> ans=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (num &lt; m - <span class="hljs-number">1</span>)          <span class="hljs-comment">// 加入m-1条边</span><br>    &#123;<br>        <span class="hljs-type">int</span> miedge = <span class="hljs-number">-1</span>;<br>        <span class="hljs-type">double</span> micost = INF;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>            <span class="hljs-keyword">if</span> (closest[i] != <span class="hljs-number">-1</span>)<br>            &#123;<br>                <span class="hljs-type">double</span> temp = G[e][i];<br>                <span class="hljs-keyword">if</span> (temp &lt; lowcost[i])<br>                &#123;<br>                    lowcost[i] = temp;<br>                    closest[i] = e;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (lowcost[i] &lt; micost)<br>                    micost = lowcost[miedge = i];<br>            &#125;<br>        ans += micost;<br>        demo.push_back(micost);<br>        closest[e = miedge] = <span class="hljs-number">-1</span>;<br>        num++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">double</span> x, y, h;<br>&#125; dis[MAXN];<br><br><span class="hljs-type">double</span> <span class="hljs-title function_">getDistance</span><span class="hljs-params">(node a, node b)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(<span class="hljs-built_in">pow</span>(a.x - b.x, <span class="hljs-number">2</span>) + <span class="hljs-built_in">pow</span>(a.y - b.y, <span class="hljs-number">2</span>)) + <span class="hljs-built_in">pow</span>(a.h - b.h, <span class="hljs-number">2</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;m);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lf%lf%lf&quot;</span>, &amp;dis[i].x, &amp;dis[i].y, &amp;dis[i].h);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m - <span class="hljs-number">1</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt; m; j++)<br>        &#123;<br>            G[i][j] = getDistance(dis[i], dis[j]);<br>            G[j][i] = G[i][j];<br>        &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.2lf&quot;</span>, prim());<br>    <span class="hljs-comment">// for (int i = 0; i &lt; m - 1; i++)</span><br>    <span class="hljs-comment">//     cout &lt;&lt; demo[i] &lt;&lt; &quot; &quot;;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">caculate</span>(<span class="hljs-params">x1,y1,h1,x2,y2,h2</span>):<br>    <span class="hljs-keyword">return</span> math.sqrt( (x1-x2)**<span class="hljs-number">2</span>+(y1-y2)**<span class="hljs-number">2</span>)+(h1-h2)**<span class="hljs-number">2</span>\<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x!=ufs[x]:<br>        ufs[x]=find(ufs[x])<br>    <span class="hljs-keyword">return</span> ufs[x]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">kruskal</span>():<br>    <span class="hljs-keyword">global</span> ufs<br>    ufs=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br>    my_brige.sort(key=<span class="hljs-keyword">lambda</span> x:x[<span class="hljs-number">2</span>])<br>    ans=<span class="hljs-number">0</span><br>    cnt=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> a,b,w <span class="hljs-keyword">in</span> my_brige:<br>        x=find(a)<br>        y=find(b)<br>        <span class="hljs-keyword">if</span> x==y:<br>            <span class="hljs-keyword">continue</span><br>        cnt+=<span class="hljs-number">1</span><br>        ans+=w<br>        ufs[x]=y<br><br>        <span class="hljs-keyword">if</span> cnt==n-<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> ans<br><br><br><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>brige=[[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    x,y,h=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    brige[i]=(x,y,h)<br><br><br>my_brige=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        x1,y1,h1=brige[i]<br>        x2,y2,h2=brige[j]<br>        w=caculate(x1,y1,h1,x2,y2,h2)<br>        my_brige.append((i,j,w))<br>ans=kruskal()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(ans))<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">1010</span>;<br>    <span class="hljs-keyword">static</span> List&lt;Node&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] x = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N], z = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br>    <span class="hljs-comment">//并查集数组</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[N];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = sc.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            x[i] = sc.nextInt();<br>            y[i] = sc.nextInt();<br>            z[i] = sc.nextInt();<br>        &#125;<br>        <span class="hljs-comment">//建边  任意两个村庄都要建边</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; n; j++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> x[i] - x[j];<br>                <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> y[i] - y[j];<br>                <span class="hljs-type">double</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> z[i] - z[j];<br>                <span class="hljs-comment">// i 村庄 到  j 村庄的 距离</span><br>                <span class="hljs-type">double</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> Math.sqrt(l * l + r * r) + c * c;<br>                list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(i, j, s));<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// 核心：按权值排序</span><br>        list.sort(Comparator.comparingDouble(a -&gt; a.w));<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            q[i] = i;<br>        &#125;<br>        <span class="hljs-comment">//记录权重之和，答案</span><br>        <span class="hljs-type">double</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> list.get(i).a;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> list.get(i).b;<br>            <span class="hljs-type">double</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> list.get(i).w;<br>            a = find(a);<br>            b = find(b);<br>            <span class="hljs-keyword">if</span> (a != b) &#123;<br>                q[a] = b;<br>                res += w;<br>            &#125;<br>        &#125;<br>        System.out.printf(<span class="hljs-string">&quot;%.2f&quot;</span>, res);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span> (q[x] != x) q[x] = find(q[x]);<br>        <span class="hljs-keyword">return</span> q[x];<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br>        <span class="hljs-type">int</span> a, b;<br>        <span class="hljs-type">double</span> w;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">double</span> w)</span> &#123;<br>            <span class="hljs-built_in">this</span>.a = a;<br>            <span class="hljs-built_in">this</span>.b = b;<br>            <span class="hljs-built_in">this</span>.w = w;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="机房"><a href="#机房" class="headerlink" title="机房"></a>机房</h2><p>这天, 小明在机房学习。</p><p>他发现机房里一共有 $n$ 台电脑, 编号为 1 到 $n$, 电脑和电脑之间有网线连 接, 一共有 $n-1$ 根网线将 $n$ 台电脑连接起来使得任意两台电脑都直接或者间 接地相连。</p><p>小明发现每台电脑转发、发送或者接受信息需要的时间取决于这台电脑和 多少台电脑直接相连, 而信息在网线中的传播时间可以忽略。比如如果某台电脑 用网线直接连接了另外 $d$ 台电脑, 那么任何经过这台电脑的信息都会延迟 $d$ 单 位时间 (发送方和接收方也会产生这样的延迟, 当然如果发送方和接收方都是 同一台电脑就只会产生一次延迟)。</p><p>小明一共产生了 $m$ 个疑问: 如果电脑 $u_{i}$ 向电脑 $v_{i}$ 发送信息, 那么信息从 $u_{i}$ 传到 $v_{i}$ 的最短时间是多少?</p><p><strong>解题思路:</strong></p><p>还是一道比较明显的求<code>LCA</code>(最近公共祖先)模型的题目,我们可以使用多种方法来解决该问题，这里我们使用更好写的离线的<code>tarjan</code>算法来解决该问题。</p><p>除去<code>tarjan</code>算法必用的基础数组，我们还有一个数组<code>d[]</code>,<code>d[i]</code>记录的是每个点的出度，也就是它的延迟时间，以及数组<code>w[]</code>,<code>w[i]</code>的含义是点<code>i</code>到根节点的延迟时间。在通过<code>dfs</code>求出每个点<code>i</code>的<code>w[i]</code>以后，在<code>tarjan</code>中我们该如何求出两点的延迟时间呢？</p><p>我们设点<code>i</code>到<code>j</code>的延迟时间为$f(x)$,当我们求得<code>i</code>与<code>j</code>的最近公共祖先为<code>anc</code>，我们首先让$f(x)&#x3D;w[i]+w[j]$,但很明显，我们多加了两遍$w[anc]$，所以我们需要减去两倍的$w[anc]$，但延迟时间还包括经过<code>anc</code>的时间，所以还得加上一个$d[anc]$。<strong>此处请结合<code>w[]</code>和<code>d[]</code>的含义理解。</strong> 最后能得出式子:$f(x)&#x3D;w[i]+w[h]-w[anc]*2+d[anc]$ 我们利用这个式子在<code>tarjan</code>函数中就能得出每个询问的答案，当然对于起始和结束都在同一个节点的情况下,它的答案就是当前节点的出度，我们可以进行特判一下。输入输出较多，建议使用<code>scanf</code>和<code>printf</code>进行输入输出。</p><p><strong>时间复杂度</strong>:<code>dfs</code>：每个点遍历一次,复杂度级别$O(n)$,<code>tarjan</code>算法复杂度接近 $O(n+m)$。</p><p>C++ 语言描述:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; PII;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">100010</span>;<br><br><span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; gra;<br><span class="hljs-type">int</span> n,m;<br><span class="hljs-comment">//单个点的出度</span><br><span class="hljs-type">int</span> d[N];<br><span class="hljs-comment">//记录点i到根节点的延迟</span><br><span class="hljs-type">int</span> w[N];<br><span class="hljs-comment">//并查集数组</span><br><span class="hljs-type">int</span> q[N];<br><span class="hljs-comment">//记录答案</span><br><span class="hljs-type">int</span> res[N];<br><span class="hljs-type">int</span> st[N];<br><span class="hljs-comment">//存下查询</span><br><span class="hljs-built_in">vector</span>&lt;PII&gt;    query[N];<br><span class="hljs-comment">//并查集查询</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span>&#123;<br>    <span class="hljs-keyword">if</span>(x!=q[x]) q[x]=find(q[x]);<br>    <span class="hljs-keyword">return</span> q[x];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u,<span class="hljs-type">int</span> fa)</span><br>&#123;<br>    w[u]+=d[u];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> g:gra[u])&#123;<br>        <span class="hljs-keyword">if</span>(g==fa) <span class="hljs-keyword">continue</span>;<br>        w[g]+=w[u];<br>        dfs(g,u);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">tarjan</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span><br>&#123;<br>    st[u]=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> j:gra[u])&#123;<br>        <span class="hljs-keyword">if</span>(!st[j])<br>        &#123;<br>            tarjan(j);<br>            q[j]=u;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> item: query[u])&#123;<br>        <span class="hljs-type">int</span> y=item.first,id=item.second;<br>        <span class="hljs-keyword">if</span>(st[y]==<span class="hljs-number">2</span>)&#123;<br>            <span class="hljs-type">int</span> anc=find(y);<br>            res[id]=w[y]+w[u]-w[anc]*<span class="hljs-number">2</span>+d[anc];<br>        &#125;<br>    &#125;<br>    st[u]=<span class="hljs-number">2</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n<span class="hljs-number">-1</span>;++i)&#123;<br>        <span class="hljs-type">int</span> a,b;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);<br>        gra[a].push_back(b);<br>        gra[b].push_back(a);<br>        d[a]++,d[b]++;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;++i)&#123;<br>        <span class="hljs-type">int</span> a,b;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);<br>        <span class="hljs-keyword">if</span>(a!=b)&#123;<br>            query[a].push_back(&#123;b,i&#125;);<br>            query[b].push_back(&#123;a,i&#125;);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            res[i]=d[a];<br>        &#125;<br>    &#125;<br>    dfs(<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) q[i]=i;<br>    tarjan(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;++i) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,res[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>gra = defaultdict(<span class="hljs-built_in">list</span>)<br>d = [<span class="hljs-number">0</span>] * <span class="hljs-number">100010</span><br>w = [<span class="hljs-number">0</span>] * <span class="hljs-number">100010</span><br>q = [<span class="hljs-number">0</span>] * <span class="hljs-number">100010</span><br>res = [<span class="hljs-number">0</span>] * <span class="hljs-number">100010</span><br>st = [<span class="hljs-number">0</span>] * <span class="hljs-number">100010</span><br>query = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100010</span>)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x != q[x]:<br>        q[x] = find(q[x])<br>    <span class="hljs-keyword">return</span> q[x]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, fa</span>):<br>    w[u] += d[u]<br>    <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> gra[u]:<br>        <span class="hljs-keyword">if</span> g == fa:<br>            <span class="hljs-keyword">continue</span><br>        w[g] += w[u]<br>        dfs(g, u)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tarjan</span>(<span class="hljs-params">u</span>):<br>    st[u] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> gra[u]:<br>        <span class="hljs-keyword">if</span> st[j] == <span class="hljs-number">0</span>:<br>            tarjan(j)<br>            q[j] = u<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> query[u]:<br>        y, <span class="hljs-built_in">id</span> = item<br>        <span class="hljs-keyword">if</span> st[y] == <span class="hljs-number">2</span>:<br>            anc = find(y)<br>            res[<span class="hljs-built_in">id</span>] = w[y] + w[u] - w[anc] * <span class="hljs-number">2</span> + d[anc]<br>    st[u] = <span class="hljs-number">2</span><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    gra[a].append(b)<br>    gra[b].append(a)<br>    d[a] += <span class="hljs-number">1</span><br>    d[b] += <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> a != b:<br>        query[a].append((b, i))<br>        query[b].append((a, i))<br>    <span class="hljs-keyword">else</span>:<br>        res[i] = d[a]<br><br>dfs(<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    q[i] = i<br>tarjan(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    <span class="hljs-built_in">print</span>(res[i])<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pair</span> &#123;<br>        <span class="hljs-type">int</span> first, second;<br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Pair</span><span class="hljs-params">(<span class="hljs-type">int</span> first, <span class="hljs-type">int</span> second)</span> &#123;<br>            <span class="hljs-built_in">this</span>.first = first;<br>            <span class="hljs-built_in">this</span>.second = second;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> Map&lt;Integer, List&lt;Integer&gt;&gt; gra = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100010</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] w = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100010</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100010</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100010</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100010</span>];<br>    <span class="hljs-keyword">static</span> List&lt;Pair&gt;[] query = <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>[<span class="hljs-number">100010</span>];<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span> (x != q[x]) q[x] = find(q[x]);<br>        <span class="hljs-keyword">return</span> q[x];<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> fa)</span> &#123;<br>        w[u] += d[u];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> g : gra.get(u)) &#123;<br>            <span class="hljs-keyword">if</span> (g == fa) <span class="hljs-keyword">continue</span>;<br>            w[g] += w[u];<br>            dfs(g, u);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tarjan</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span> &#123;<br>        st[u] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j : gra.get(u)) &#123;<br>            <span class="hljs-keyword">if</span> (st[j] == <span class="hljs-number">0</span>) &#123;<br>                tarjan(j);<br>                q[j] = u;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (Pair item : query[u]) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> item.first, id = item.second;<br>            <span class="hljs-keyword">if</span> (st[y] == <span class="hljs-number">2</span>) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">anc</span> <span class="hljs-operator">=</span> find(y);<br>                res[id] = w[y] + w[u] - w[anc] * <span class="hljs-number">2</span> + d[anc];<br>            &#125;<br>        &#125;<br>        st[u] = <span class="hljs-number">2</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            gra.put(i, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());<br>            query[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            gra.get(a).add(b);<br>            gra.get(b).add(a);<br>            d[a]++;<br>            d[b]++;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> scanner.nextInt();<br>            <span class="hljs-keyword">if</span> (a != b) &#123;<br>                query[a].add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(b, i));<br>                query[b].add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Pair</span>(a, i));<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                res[i] = d[a];<br>            &#125;<br>        &#125;<br>        dfs(<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>           q[i] = i;<br>        &#125;<br>        tarjan(<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            System.out.println(res[i]);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="环境治理"><a href="#环境治理" class="headerlink" title="环境治理"></a>环境治理</h2><p>LQ 国拥有 $n$ 个城市, 从 0 到 $n-1$ 编号, 这 $n$ 个城市两两之间都有且仅有 一条双向道路连接, 这意味着任意两个城市之间都是可达的。每条道路都有一 个属性 $D$, 表示这条道路的灰尘度。当从一个城市 $A$ 前往另一个城市 $B$ 时, 可 能存在多条路线, 每条路线的灰尘度定义为这条路线所经过的所有道路的灰尘 度之和, LQ 国的人都很讨厌灰尘, 所以他们总会优先选择灰尘度最小的路线。</p><p>LQ 国很看重居民的出行环境, 他们用一个指标 $P$ 来衡量 LQ 国的出行环 境, $P$ 定义为:</p><p>$P&#x3D;\sum*{i&#x3D;0}^{n-1} \sum*{j&#x3D;0}^{n-1} d(i, j)$</p><p>其中 $d(i, j)$ 表示城市 $i$ 到城市 $j$ 之间灰尘度最小的路线对应的灰尘度的值。 为了改善出行环境, 每个城市都要有所作为, 当某个城市进行道路改善时, 会将与这个城市直接相连的所有道路的灰尘度都减少 1 , 但每条道路都有一个 灰尘度的下限值 $L$, 当灰尘度达到道路的下限值时, 无论再怎么改善, 道路的 灰尘度也不会再减小了。</p><p>具体的计划是这样的:</p><p>第 1 天, 0 号城市对与其直接相连的道路环境进行改善;</p><p>第 2 天, 1 号城市对与其直接相连的道路环境进行改善;</p><p>$\cdots$</p><p>第 $n$ 天, $n-1$ 号城市对与其直接相连的道路环境进行改善;</p><p>第 $n+1$ 天, 0 号城市对与其直接相连的道路环境进行改善;</p><p>第 $n+2$ 天, 1 号城市对与其直接相连的道路环境进行改善;</p><p>LQ 国想要使得 $P$ 指标满足 $P \leq Q$ 。请问最少要经过多少天之后, $P$ 指标 可以满足 $P \leq Q$ 。如果在初始时就已经满足条件, 则输出 0 ; 如果永远不可能 满足, 则输出 $-1$ 。</p><p><strong>解题思路:</strong></p><p>首先，对于求解<code>P</code>指的公式，我们要清楚，是每个点到其他所有点的最短路径之和相加，这种涉及到任意两点的最短路，加上 $n$ 的最大范围只有<code>100</code>，很明显我们需要想到<code>Floyd</code>算法求任意两点的最短路。</p><p>我们并没有一个直观的算法直接求得答案，所以，我们考虑<strong>二分答案。</strong> 如果改善<code>x</code>天是符合要求的，那么大于<code>x</code>的天数也一定符合，但小于<code>x</code>的天数不一定，所以满足二段性，我们可以二分。</p><p>我们用<code>g[][]</code>记录初始道路的灰尘度,<code>m[][]</code>记录每条道路的最低灰尘度,<code>f[][]</code>记录的是在改善<code>x</code>天后的每条道路的环境。这样我们就可以使用二分+<code>Floyd</code>的做法得到答案。</p><p>当然这里有一些需要注意的细节问题，当我们改变<code>f[i][j]</code>的值时，相应的也要改变<code>f[j][i]</code>的值，因为任意两点只存在一条双向道路，所以这两个状态应该表示的是同一条道路。每次<code>check</code>时，别忘记将<code>f[][]</code>重置回<code>g[][]</code>，再去减去对于的天数。<code>floyd</code>函数每次跑完后，计算并返回此时的<code>P</code>值。</p><p>最开始时我们可以判断每条道路都是最低复杂度的情况下，计算出来的<code>P</code>是否大于<code>Q</code>，如果大于说明肯定无解，直接返回<code>-1</code>即可。二分对于<code>r</code>的上限也需要注意，最多<code>100</code>个点，每个点最大<code>1e5</code>，所以理论上我们只要开到大于<code>1e7</code>以上就不会有问题，否则样例过大时可能会出错。</p><p>时间复杂度：$O(n^3log(n*m))$。</p><p>C++ 语言描述:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">110</span>;<br><br>LL g[N][N];<br>LL m[N][N];<br>LL f[N][N];<br>LL n,q;<br>LL <span class="hljs-title function_">floyd</span><span class="hljs-params">()</span><br>&#123;<br>    LL a=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= n; k ++ )<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ )<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j ++ )<br>                f[i][j] = min(f[i][j], f[i][k] + f[k][j]);<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)<br>            a+=f[i][j];<br>    <span class="hljs-keyword">return</span> a;<br>&#125;<br><span class="hljs-comment">//改善X天</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">check</span><span class="hljs-params">(LL x)</span>&#123;<br>    <span class="hljs-built_in">memcpy</span>(f,g,<span class="hljs-keyword">sizeof</span>(g));<br>    LL h=x/n;<br>    LL s=x%n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)&#123;<br>            <span class="hljs-keyword">if</span>(i==j) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span>(i&lt;=s) f[i][j]=max(m[i][j],f[i][j]-h<span class="hljs-number">-1</span>);<br>            <span class="hljs-keyword">else</span> f[i][j]=max(m[i][j],f[i][j]-h);<br>            f[j][i]=f[i][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> floyd()&lt;=q;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">solve</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;q;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)&#123;<br>            <span class="hljs-built_in">cin</span>&gt;&gt;g[i][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)&#123;<br>            <span class="hljs-built_in">cin</span>&gt;&gt;m[i][j];<br>            f[i][j]=m[i][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(floyd()&gt;q)&#123;<br>        <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-number">-1</span>&lt;&lt;<span class="hljs-built_in">endl</span>;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    LL l=<span class="hljs-number">0</span>,r=<span class="hljs-number">1000000000</span>;<br>    <span class="hljs-keyword">while</span>(l&lt;r)&#123;<br>        <span class="hljs-type">int</span> mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span>(check(mid)) r=mid;<br>        <span class="hljs-keyword">else</span> l=mid+<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;r&lt;&lt;<span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    solve();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> copy<br>N=<span class="hljs-number">110</span><br>g=[[<span class="hljs-number">0</span>]*N <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>m=[[<span class="hljs-number">0</span>]*N <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>f=[[<span class="hljs-number">0</span>]*N <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>n,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">floyd</span>(<span class="hljs-params">f</span>):<br>    a=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>                f[i][j]=<span class="hljs-built_in">min</span>(f[i][j],f[i][k]+f[k][j])<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>            a=a+f[i][j]<br>    <span class="hljs-keyword">return</span> a<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">x,g</span>):<br>    f=copy.deepcopy(g)<br>    h=x//n<br>    s=x%n<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i==j:<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">if</span> i&lt;=s:<br>                f[i][j]=<span class="hljs-built_in">max</span>(m[i][j],f[i][j]-h-<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">else</span>:<br>                f[i][j]=<span class="hljs-built_in">max</span>(m[i][j],f[i][j]-h)<br>            f[j][i]=f[i][j]<br>    <span class="hljs-keyword">return</span>  floyd(f)&lt;=q<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">solve</span>():<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        l=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>            g[i][j]=l[j-<span class="hljs-number">1</span>]<span class="hljs-comment">#灰尘度</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        l = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>            m[i][j]=l[j-<span class="hljs-number">1</span>]<span class="hljs-comment">#灰尘度的下限值</span><br>            f[i][j]=m[i][j]<br>    <span class="hljs-keyword">if</span> floyd(f)&gt;q:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span><br>    l,r=<span class="hljs-number">0</span>,<span class="hljs-number">10000000</span><br>    <span class="hljs-keyword">while</span> (l &lt; r):<br>        mid=(l+r)&gt;&gt;<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (check(mid,g)):<br>            r=mid<br>        <span class="hljs-keyword">else</span>:<br>            l=mid+<span class="hljs-number">1</span><br>    <span class="hljs-built_in">print</span>(r)<br>solve()<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> N=<span class="hljs-number">110</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span>[][] g=<span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N][N],m=<span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N][N],f=<span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[N][N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> n,q;<br>    <span class="hljs-keyword">static</span> BufferedReader br=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>    <span class="hljs-keyword">static</span> PrintWriter  out=<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(System.out));<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        String[] s=br.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>        n=Long.parseLong(s[<span class="hljs-number">0</span>]);<br>        q=Long.parseLong(s[<span class="hljs-number">1</span>]);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>            s=br.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)&#123;<br>                g[i][j]=Long.parseLong(s[j-<span class="hljs-number">1</span>]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>            s=br.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)&#123;<br>                m[i][j]=Long.parseLong(s[j-<span class="hljs-number">1</span>]);<br>                f[i][j]=m[i][j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(floyd()&gt;q)&#123;<br>            out.println(-<span class="hljs-number">1</span>);<br>            out.flush();<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-type">long</span> l=<span class="hljs-number">0</span>,r=<span class="hljs-number">1000000000</span>;<br>        <span class="hljs-keyword">while</span>(l&lt;r)&#123;<br>            <span class="hljs-type">long</span> mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span>(check(mid)) r=mid;<br>            <span class="hljs-keyword">else</span> l=mid+<span class="hljs-number">1</span>;<br>        &#125;<br>        out.println(r);<br>        out.flush();<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-title function_">floyd</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">long</span> a=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; k &lt;= n; k ++ )<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i ++ )<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j ++ )<br>                    f[i][j] =Math.min(f[i][j], f[i][k] + f[k][j]);<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)<br>                a+=f[i][j];<br>        <span class="hljs-keyword">return</span> a;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">long</span> x)</span>&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j) f[i][j]=g[i][j];<br>        &#125;<br>        <span class="hljs-type">long</span> h=x/n;<br>        <span class="hljs-type">long</span> s=x%n;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)&#123;<br>                <span class="hljs-keyword">if</span>(i==j) <span class="hljs-keyword">continue</span>;<br>                <span class="hljs-keyword">if</span>(i&lt;=s) f[i][j]=Math.max(m[i][j],f[i][j]-h-<span class="hljs-number">1</span>);<br>                <span class="hljs-keyword">else</span> f[i][j]=Math.max(m[i][j],f[i][j]-h);<br>                f[j][i]=f[i][j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> floyd()&lt;=q;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>图论入门</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>动态规划</title>
    <link href="/2024/03/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    <url>/2024/03/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
    
    <content type="html"><![CDATA[<h2 id="动态规划（Dynamic-Programming）"><a href="#动态规划（Dynamic-Programming）" class="headerlink" title="动态规划（Dynamic Programming）"></a>动态规划（Dynamic Programming）</h2><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本节课我们进入动态规划课程的学习，动态规划是一种多阶段的决策过程最优化的问题。</p><p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 $3$ 个章节进行动态规划问题的讲解。</p><p>今天的课程是动态规划系列的第一个章节。</p><h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul><li>动态规划的基本思想</li><li>动态规划问题的基本套路与步骤</li></ul><h2 id="为什么使用动态规划算法"><a href="#为什么使用动态规划算法" class="headerlink" title="为什么使用动态规划算法"></a>为什么使用动态规划算法</h2><p>我们先回忆一下贪心问题。</p><p>贪心又称贪婪算法。是一种在每一步选择中都采取在当前状态下最好或最优（即最有利）的选择，从而使得问题得到全局最优解。</p><p><strong>它的特点：</strong></p><p>贪心选择性质是指所求问题的整体最优解可以通过一系列局部最优的选择，即贪心选择来达到。</p><p>这是贪心算法可行的第一个基本要素，也是贪心算法与动态规划算法的主要区别。</p><p>贪心选择性质就是，该问题的每一步选择都在选择最优的情况下能够导致最终问题的答案也是最优。</p><p>其实贪心和动态规划的区别，你可以理解为一个是正推，一眼就能看出来最优子结构，依次按照最优子结构选择每个过程最优选择即可。</p><p>而动态规划是没办法按照题目的意思直接得到最有优子结构，如下文所述:</p><h4 id="多阶段决策过程最优化问题"><a href="#多阶段决策过程最优化问题" class="headerlink" title="多阶段决策过程最优化问题"></a>多阶段决策过程最优化问题</h4><p>动态规划问题，是运筹学的一个分支，动态规划主要用于求解以时间划分阶段的动态过程的优化问题。</p><p>在实际生活中，动态规划问题与贪心问题相似，都是完成某一事件的过程可以划分成多个阶段。</p><p>但是与贪心不同的是动态规划的每个状态之间都会相互影响和相互干涉，也就是说在某一阶段做出的决策会影响整个事件的最终结果。</p><p>因为阶段是有先后的，所以某一阶段的选取受之前阶段的影响，他也会影响后面的阶段。</p><p><strong>多阶段决策问题：</strong></p><p>多阶段决策过程问题，就是一类在每一阶段都需要做出选择，且某一阶段的决策受前面所有阶段决策后的状态影响，他的决策又会影响后续的决策。</p><p>这样一类问题就是多阶段决策问题。</p><p><strong>多阶段决策过程最优化问题：</strong></p><p>在多阶段决策问题中，各个阶段采取的决策，通常与时间相关，但有时又与其他的线性的变量相关。</p><p>我们前面说到，某个阶段的决策是在前面做完了的决策引发的某一个状态开始进行决策的。</p><p>而现在做的决策又会使得状态进行转移，那么又影响了下次进行决策的状态。</p><p>所以说作决策时的状态是动态的，规划是解决最优化问题的方式，所以解决这种多阶段决策过程最优化的方法叫做动态规划。</p><h4 id="动态规划中的术语解释"><a href="#动态规划中的术语解释" class="headerlink" title="动态规划中的术语解释"></a>动态规划中的术语解释</h4><ul><li><p>阶段： 把所给求解问题的过程恰当地分成若干个相互联系的阶段，以便于求解，过程不同，阶段数就可能不同</p></li><li><p>状态： 述事物的性质，不同事物有不同的性质，因而用不同的状态来刻画。对问题的求解状态的描述是分阶段的</p></li><li><p>决策： 根据题意要求，对每个阶段所做出的某种选择性操作</p></li><li><p>策略： 由每个阶段的决策组成的序列称为策略</p></li><li><p>状态转移方程： 用数学公式描述与阶段相关的状态间的演变规律</p></li></ul><h4 id="能采用动态规划求解的问题的性质"><a href="#能采用动态规划求解的问题的性质" class="headerlink" title="能采用动态规划求解的问题的性质"></a>能采用动态规划求解的问题的性质</h4><ul><li><p>最优化原理：</p><p>如果问题的最优解所包含的子问题的解也是最优的，就称该问题具有最优子结构，即满足最优化原理。</p></li><li><p>无后效性：</p><p>即某阶段状态一旦确定，就不受这个状态以后决策的影响。也就是说，某状态以后的过程不会影响以前的状态，只与当前状态有关。</p></li><li><p>有重叠子问题：</p><p>即子问题之间是不独立的，一个子问题在下一阶段决策中可能被多次使用到。（该性质并不是动态规划适用的必要条件，但是如果没有这条性质，动态规划算法同其他算法相比就不具备优势）</p></li></ul><h4 id="解题步骤"><a href="#解题步骤" class="headerlink" title="解题步骤"></a>解题步骤</h4><ul><li>拆分问题</li><li>定义状态(并找出初状态)</li><li>找到状态转移</li><li>逆推找最优子结构</li><li>写出 DP 状态转移方程。</li></ul><h4 id="一般的模型方法"><a href="#一般的模型方法" class="headerlink" title="一般的模型方法"></a>一般的模型方法</h4><ul><li>递归搜索法</li><li>记忆化搜索(记忆化暴力)</li><li>递推式法</li></ul><h4 id="经典例题数塔问题"><a href="#经典例题数塔问题" class="headerlink" title="经典例题数塔问题"></a>经典例题数塔问题</h4><p>我们先来回顾一下我们之前讲过的数塔问题：</p><p><strong>题目描述:</strong></p><p><img src="/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/06b8663e2aceb6c87e0913d2fe0710f2-0.png" alt="图片描述"></p><p>如图数字三角形。如下所示为一个数字三角形。请编一个程序计算从顶到底的某处的一条路径，使该路径所经过的数字总和最大。只要求输出总和。</p><ol><li>一步可沿左斜线向下或右斜线向下走；</li><li>三角形行数小于等于 $100$；</li><li>三角形中的数字为 $0，1，…，99$；</li></ol><p>测试数据通过键盘逐行输入。</p><p>如上例数据应以样例所示格式输入：</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>5<br>7<br>3 8<br>8 1 0<br>2 7 4 4<br>4 5 2 6 5<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出：<br><br>30<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目分析:</strong></p><ol><li><p>定义状态 假设 <code>dp[i][j]</code> 为处理 <code>a[i][j]</code> 后能达到的最大值。</p></li><li><p>找出状态转移</p><p><code>dp[i][j]</code>怎么转移呢？按照题意他有两条路径可以转移</p><p><code>dp[i+1][j]=dp[i][j]+a[i+1][j]</code> 向下走</p><p><code>dp[i+1][j+1]=dp[i][j]+a[i+1][j+1]</code> 向右下走</p><p>我们有办法知道这两条路径哪条更优吗？</p><p>不能！因为通向了两个不同的决策过程。为什么贪心可以知道，因为贪心处理完之后通向的是同一个决策过程，这里<code>dp[i+1][j]和dp[i+1][j+1]</code>明显他们两个所能达到的状态是完全不同的，这就是动态规划和贪心的不同之处。</p><p>那我们怎样处理呢，我们要做的就是达到同一个状态我们才能够判断那个是最优的，这就是最优子结构。</p></li><li><p>逆推找最优子结构</p><p>虽然我们进行了逆推，但是实际上不是因为我们逆推做了什么，只是因为我们找最优子结构的过程中恰好做了逆推的过程。</p><p>我们要找最优子结构，我们刚才说了，要找到达同一状态的转移才能比较。那我们就考虑什么状态能够转移得到<code>dp[i][j]</code>，这时候我们直接看也能看出来是这两条路径<code>dp[i+1][j]+a[i][j],dp[i+1][j+1]+a[i][j]</code>。</p></li><li><p>写出状态转移方程</p></li></ol><p>$dp[i][j] &#x3D; max{dp[i+1][j]+a[i][j],dp[i+1][j+1]+a[i][j]}$</p><p>空间优化，已知 <code>dp[i][j]</code> 的值只会被覆盖前使用一次，所以可以合并 <code>dp[i][j]</code> 和 <code>a[i][j]</code> 那么就变成了。</p><p>$a[i][j] &#x3D; max{a[i][j]+a[i+1][j],a[i][j]+a[i+1][j+1]}$</p><p>则 逆推到出发点 <code>a[1][1]</code> 为题目所求答案，即第一层到第 <code>N</code> 层的最大值。</p><p><strong>答案解析：</strong></p><p><strong>C++ 解题代码:</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//n层</span><br>    <span class="hljs-type">int</span> a[<span class="hljs-number">101</span>][<span class="hljs-number">101</span>]; <span class="hljs-comment">//路径矩阵</span><br>    cin&gt;&gt;n;<br><br>    <span class="hljs-comment">//输入数字三角形的值</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>        &#123;<br><br>        cin&gt;&gt;a[i][j]; <span class="hljs-comment">//输入原始数据</span><br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//递推开始</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>; i&gt;=<span class="hljs-number">1</span>; i--)<span class="hljs-comment">//从最后一层逆推</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>        &#123;<br><br>            <span class="hljs-keyword">if</span> (a[i+<span class="hljs-number">1</span>][j]&gt;=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>])<br>                a[i][j]+=a[i+<span class="hljs-number">1</span>][j];     <span class="hljs-comment">//路径选择</span><br><br>            <span class="hljs-keyword">else</span><br>                a[i][j]+=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br><br>    cout&lt;&lt;a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [[<span class="hljs-number">0</span>] * <span class="hljs-number">101</span>] * <span class="hljs-number">101</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>  n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>  <span class="hljs-comment"># 输入数字三角形的值</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>      a[i] = <span class="hljs-built_in">input</span>().split()<br>      a[i] = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, a[i]))  <span class="hljs-comment"># split 分割后都是 字符 这里是转化成数字</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># for i in range(1, n + 1):</span><br>  <span class="hljs-comment">#     print(a[i])</span><br><br> <span class="hljs-comment"># a = list(map(int, a)) # split 分割后都是 字符 这里是转化成数字</span><br><br>  <span class="hljs-comment"># 递推开始</span><br><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>      <span class="hljs-comment"># 最后一层逆推</span><br>      <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, i):<br><br>          <span class="hljs-comment"># 路径选择</span><br>          <span class="hljs-keyword">if</span> a[i + <span class="hljs-number">1</span>][j] &gt;= a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]:<br>              a[i][j] += a[i + <span class="hljs-number">1</span>][j]<br><br>          <span class="hljs-keyword">else</span>:<br>              a[i][j] += a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]<br><br>  <span class="hljs-comment"># for i in range(1, n + 1):</span><br>  <span class="hljs-comment">#     print(a[i])</span><br><br>  <span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> [][]a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">101</span>][<span class="hljs-number">101</span>];<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">int</span> n;<br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n = in.nextInt();<br><br>      <span class="hljs-comment">//输入数字三角形的值</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>      &#123;<br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>          &#123;<br>              a[i][j]=in.nextInt(); <span class="hljs-comment">//输入原始数据</span><br>          &#125;<br>      &#125;<br><br>      <span class="hljs-comment">//递推开始</span><br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=n-<span class="hljs-number">1</span>; i&gt;=<span class="hljs-number">1</span>; i--)<span class="hljs-comment">//从最后一层逆推</span><br>      &#123;<br><br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>          &#123;<br>              <span class="hljs-keyword">if</span> (a[i+<span class="hljs-number">1</span>][j]&gt;=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>])<br>                  a[i][j]+=a[i+<span class="hljs-number">1</span>][j];     <span class="hljs-comment">//路径选择</span><br><br>              <span class="hljs-keyword">else</span>  a[i][j]+=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>];<br>          &#125;<br>      &#125;<br>      System.out.println(a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>其实我们在讲这道题目中所用到的思想就是动态规划。</p><p>我们换种方式在理解一遍。</p><p>在用动态规划考虑数塔问题时可以自顶向下的分析，自底向上的计算。</p><p>从顶点出发时到底向左走还是向右走应取决于是从左走能取到最大值还是从右走能取到最大值，只要左右两道路径上的最大值求出来了才能作出决策。</p><p>同样的道理下一层的走向又要取决于再下一层上的最大值是否已经求出才能决策。</p><p>这样一层一层推下去，直到倒数第二层时就非常明了。</p><p>所以第一步对第五层的 $8$ 个数据，做如下四次决策：</p><ul><li><p>如果经过第四层 $2$，则在第五层的 $4$ 和 $5$ 中，决策选择的肯定是 $19$</p></li><li><p>如果经过第四层 $7$，则在第五层的 $5$ 和 $2$ 中，决策选择的肯定是 $10$</p></li><li><p>如果经过第四层第一个 $4$，则在第五层的 $2$ 和 $6$ 中，决策选择的肯定是 $6$</p></li><li><p>如果经过第四层第二个 $4$，则在第五层的 $6$ 和 $5$ 中肯定是 $6$</p></li></ul><p>经过一次决策，问题降了一阶。$5$ 层数塔问题转换成 $4$ 层数塔问题，经过如此的决策，就将原来问题转换为一阶数塔问题。</p><p>于是我们可以用我们上面的递推求解。</p><p>这就是递推式法模型。</p><p>我们通过这道简单的例题，大家首先要去找感觉，去分解问题的状态，去找决策，去找状态转移，而笔者认为动态规划问题，感觉是最重要的。</p><p>有的人 $10$ 道题就能找到感觉，有的人 $100$ 道题也找不到感觉。</p><h4 id="游戏中的学问"><a href="#游戏中的学问" class="headerlink" title="游戏中的学问"></a>游戏中的学问</h4><p>难度: 简单 标签: DP, JSOI, 2013</p><p>题目链接：<a href="https://www.lanqiao.cn/problems/1436/learning/">https://www.lanqiao.cn/problems/1436/learning/</a></p><p><strong>题目描述：</strong></p><p>大家应该都见过很多人手拉手围着篝火跳舞的场景吧？</p><p>一般情况下，大家手拉手跳舞总是会围成一个大圈，每个人的左手拉着旁边朋友的右手，右手拉着另一侧朋友的左手。</p><p>不过，如果每一个人都随机的拉住两个不同人的手，然后再慢慢散开，事情就变得有趣多了——此时大家依旧会形成圈，不过却可能会形成多个独立的圈。</p><p>当然这里我们依然要求一个人的右手只能拉另一个人的左手，反之亦然。</p><p>班里一共有 $N$ 个同学，由 $1$ 到 $N$ 编号。Will 想知道，究竟有多少种本质不同的拉手方案，使得最终大家散开后恰好形成 $k$ 个圈呢？</p><p>给定两种方案，若存在一个人和他的一只手，满足在这两种方案中，拉着这只手的人的编号不同，则这两种方案本质不同。</p><p><strong>输入描述：</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><br>输入一行包含三个正整数 N k P<br><br><span class="hljs-number">3</span>&lt;=<span class="hljs-number">3</span>k&lt;=N&lt;=<span class="hljs-number">3000</span>，<span class="hljs-number">10</span>^<span class="hljs-number">4</span>&lt;=p&lt;=<span class="hljs-number">2</span>×<span class="hljs-number">10</span>^<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><p><strong>输出描述：</strong></p><p>输出一行一个整数，表示本质不同的方案数对 p 的余数。保证 p 一定是一个质数。</p><p><strong>输入输出样例：</strong></p><ul><li><p>样例 1： Input：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>3 1 1000000009<br></code></pre></td></tr></table></figure><p>output：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure></li></ul><p><strong>答案解析：</strong></p><p>题目是说随即的拉住右手，共计 N 个人形成 k 个独立环的可能的情况有多少种。</p><p>我们举个例子，A B C 三个人：</p><p><img src="/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/4e9534885e67b5c512405e7d1d5c182b-0.png" alt="图片描述"></p><p>A 的左手是 C A 的右手是 B B 的左手是 A B 的右手是 C C 的左手是 B C 的右手是 A</p><p><img src="/./../images/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/a0502745d207f9d9d3dfdb4bc2ad841d-0.png" alt="图片描述"></p><p>A 的左手是 B A 的右手是 C B 的左手是 C B 的右手是 A C 的左手是 A C 的右手是 B</p><p>这两种是不同的。</p><p>最后对 P 取模。</p><p>这道题目可以说是记忆化搜索，也可以说是递推法模型。</p><p><strong>定义状态：</strong></p><p>我们设 dp{i,j} 是 i 个人组成 j 个圈有多少种情况的状态</p><p><strong>找初始状态：</strong></p><p>由于最少是三个人围成 1 个圈</p><p>所以 dp{3,1}&#x3D;2</p><p><strong>找状态转移：</strong></p><p>我们考虑 <code>dp&#123;4,1&#125;</code> 的时候： 由于一开始三个人之间共计 3 个空位置，它可以见缝插针，所以就有 $3 \times$ dp {$3,1$}，dp{$4,1$} &#x3D; $3 \times$ dp{$3,1$}</p><p>接着考虑 <code>dp&#123;x+1,y&#125;</code> 和 <code>dp&#123;x,y&#125;</code> 的关系：</p><p>假设 <code>X</code> 个人分成了 <code>y</code> 个环后每个环得人数是 <code>X1 X2 ... Xy</code></p><p>对于第一个环 <code>X1</code> 来说共有 <code>X1</code> 个空</p><p>对于第二个环 <code>X2</code> 来说共有 <code>X2</code> 个空</p><p>共计 <code>X1+X2+...+Xy=X</code></p><p>所以共有 <code>X</code> 个空，那么第 <code>X+1</code> 个人就用 <code>X</code> 种选择可以做。</p><p>所以 dp{$x+1,y$} &#x3D; $x \times$ dp{$x,y$}，即 dp{$i,j$}&#x3D;$(i-1) \times$ dp{$i-1,j$}</p><p>考虑 dp{$6,1$} 和 dp{$6,2$} ：</p><p>大家考虑以下我们划分阶段得方式是什么，是圈数吗？</p><p>如果是圈数，我们发现好像{$6,1$} 和 {$6,2$} 两个状态之间没有什么关系？</p><p>单纯的圈数不存在关系。</p><p>我们思考一下，至少需要 <code>3</code> 个人才能组成一个圈。</p><p>所以第 <code>i</code> 个人加入时，要在前 <code>i-1</code> 个人中抽出两个人才能组成一个新圈。</p><p>所以原本的 dp{$i-1,j$} 的状态就变成了，dp{$i-3,j$}了。</p><p>由于是从 <code>i-1</code> 个人中抽出 <code>2</code> 个人所以，共计$C_{i-1}^{2}$的抽取方式，<code>3</code> 个人我们已知能组成两种方案。</p><p>根据组合数求方案数的方式</p><p>$2\times C_{i-1}^{2}&#x3D;2\times \frac{(i-1)!}{(i-3)!\times2}$</p><p>$2\times C_{i-1}^{2}&#x3D;(i-1)!&#x2F;(i-3)!&#x3D;(i-1)*(i-2)$</p><p>所以 <code>dp&#123;i,j+1&#125;=dp&#123;i-3,j&#125;×(i-1)×(i-2)</code></p><p>即 <code>dp&#123;i,j&#125;=dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></p><p>就此我们得到状态转移方程</p><ul><li><code>dp&#123;i,j&#125;=dp&#123;i-1,j&#125;×(i-1)</code></li><li><code>dp&#123;i,j&#125;=dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></li></ul><p>除此之外，我们还有要考虑的情况，即建不建立新圈都是 <code>dp&#123;i,j&#125;</code>的情况，所以这里不是等于，而是求和:</p><p><code>dp&#123;i,j&#125;=dp&#123;i-1,j&#125;×(i-1)</code></p><p><code>dp&#123;i,j&#125;=dp&#123;i,j&#125;+dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></p><p>比如：</p><p><code>dp&#123;7,2&#125;</code>可以由 <code>dp&#123;6,2&#125;</code>转移而来</p><p><code>dp&#123;7,2&#125;</code>也可以由 <code>dp&#123;4,1&#125;</code>转移而来</p><p>为什么这两种情况没有重叠，而是绝对异构的：</p><p><code>dp&#123;6,2&#125;</code>由 <code>dp&#123;3,1&#125;</code>转移而来</p><p><code>dp&#123;4,1&#125;</code>由 <code>dp&#123;3,1&#125;</code>转移而来</p><p><code>dp&#123;4,1&#125;</code>中 <code>1-4</code> 号是在同一个圈内的。</p><p><code>dp&#123;6,2&#125;</code>中 两个圈中的任意 <code>3</code> 个在一个圈内</p><p>不可能出现 <code>1-4</code> 在一个圈里的这种情况。</p><p>所以推导 <code>dp&#123;i,j&#125;</code></p><p><code>dp&#123;i,j&#125;</code>由 <code>dp&#123;i-i,j&#125;</code>转移而来 <code>dp&#123;i,j&#125;</code>也可以由 <code>dp&#123;i-3,j-1&#125;</code> 转移而来</p><p><code>dp&#123;i-i,j&#125;</code>可以由 <code>dp&#123;i-2,j&#125;</code>或者 <code>dp&#123;i-4,j-1&#125;</code> <code>dp&#123;i-3,j-1&#125;</code>可以由 <code>dp&#123;i-4,j-1&#125;</code>或者 <code>dp&#123;i-6,j-2&#125;</code></p><p>最终还是会到 <code>3,1</code>。</p><p>所以通过 <code>3</code>，通过两种方式走向了完全不同的方向。</p><p>至此我们轻松写出代码。</p><p>C++ 描述：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br>LL DP[<span class="hljs-number">3100</span>][<span class="hljs-number">3100</span>],mod;<br><span class="hljs-type">int</span> n,k;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n&gt;&gt;k&gt;&gt;mod;<br>    DP[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">4</span>;i&lt;=n;i++)<br>    &#123;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;<span class="hljs-number">3</span>*j&lt;=i&amp;&amp;j&lt;=k;j++)<br>        &#123;<br>            DP[i][j]=DP[i<span class="hljs-number">-1</span>][j]*(i<span class="hljs-number">-1</span>)%mod;<br><br>            DP[i][j]=(DP[i][j]+DP[i<span class="hljs-number">-3</span>][j<span class="hljs-number">-1</span>]*(i<span class="hljs-number">-1</span>)*(i<span class="hljs-number">-2</span>))%mod;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;DP[n][k];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>n, k, mod = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>DP=[[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">3100</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">3100</span>) ]<br><br>DP[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">2</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>,n+<span class="hljs-number">1</span>):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>):<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-number">3</span>*j&gt;i:<br>            <span class="hljs-keyword">break</span><br><br>        DP[i][j]=DP[i-<span class="hljs-number">1</span>][j]*(i-<span class="hljs-number">1</span>)%mod<br><br>        DP[i][j]=(DP[i][j]+DP[i-<span class="hljs-number">3</span>][j-<span class="hljs-number">1</span>]*(i-<span class="hljs-number">1</span>)*(i-<span class="hljs-number">2</span>))%mod<br><br><br><span class="hljs-built_in">print</span>(DP[n][k])<br></code></pre></td></tr></table></figure><p>java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-comment">// 1:无需package</span><br><span class="hljs-comment">// 2: 类名必须Main, 不可修改</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> DP[][]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span> [<span class="hljs-number">3100</span>][<span class="hljs-number">3100</span>];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n,k;<br><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> java.lang.Exception<br> &#123;<br>     <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>     n=in.nextInt();<br><br>     k=in.nextInt();<br><br>    <span class="hljs-type">long</span> mod=in.nextLong();<br><br>     DP[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">4</span>;i&lt;=n;i++)<br>        &#123;<br><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;<span class="hljs-number">3</span>*j&lt;=i&amp;&amp;j&lt;=k;j++)<br>            &#123;<br>                DP[i][j]=DP[i-<span class="hljs-number">1</span>][j]*(i-<span class="hljs-number">1</span>)%mod;<br><br>                DP[i][j]=(DP[i][j]+DP[i-<span class="hljs-number">3</span>][j-<span class="hljs-number">1</span>]*(i-<span class="hljs-number">1</span>)*(i-<span class="hljs-number">2</span>))%mod;<br>            &#125;<br>        &#125;<br>  System.out.println(DP[n][k]);<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="跳跃"><a href="#跳跃" class="headerlink" title="跳跃"></a>跳跃</h4><p>难度: 简单 标签: 动态规划, 搜索, 2021, 模拟赛</p><p>题目链接：<a href="https://www.lanqiao.cn/problems/553/learning/">https://www.lanqiao.cn/problems/553/learning/</a></p><p><strong>题目描述：</strong> 开始时，小蓝站在方格图的左上角，即第 $1$ 行第 $1$ 列。</p><p>小蓝可以在方格图上走动，走动时，如果当前在第 $r$ 行第 $c$ 列，他不能走到行号比 $r$ 小的行，也不能走到列号比 $c$ 小的列。</p><p>同时，他一步走的直线距离不超过 $3$。</p><p>例如，如果当前小蓝在第 $3$ 行第 $5$ 列，他下一步可以走到</p><p>第 $3$ 行第 $6$ 列 第 $3$ 行第 $7$ 列 第 $3$ 行第 $8$ 列 第 $4$ 行第 $5$ 列 第 $4$ 行第 $6$ 列 第 $4$ 行第 $7$ 列 第 $5$ 行第 $5$ 列 第 $5$ 行第 $6$ 列 第 $6$ 行第 $5$ 列 小蓝最终要走到第 $n$ 行第 $m$ 列。</p><p>在图中，有的位置有奖励，走上去即可获得，有的位置有惩罚，走上去就要接受惩罚。奖励和惩罚最终抽象成一个权值，奖励为正，惩罚为负。</p><p>小蓝希望，从第 $1$ 行第 $1$ 列走到第 $n$ 行第 $m$ 列后，总的权值和最大。请问最大是多少？</p><p><strong>输入描述：</strong></p><p>输入的第一行包含两个整数 $n, m$，表示图的大小。</p><p>接下来 $n$ 行，每行 $m$ 个整数，表示方格图中每个点的权值。</p><p>其中，$1\leq n\leq 100$，$-10^4\leq$权值$\leq 10^4$。</p><p><strong>输出描述：</strong></p><p>输出一个整数，表示最大权值和。</p><p><strong>输入输出样例：</strong></p><ul><li><p>样例 1： Input：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>3 5<br>-4 -5 -10 -3 1<br>7 5 -9 3 -10<br>10 -2 6 -10 -4<br></code></pre></td></tr></table></figure><p>output：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>15<br></code></pre></td></tr></table></figure></li></ul><p><strong>运行限制:</strong></p><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><p><strong>答案解析：</strong></p><p>由于这道题目数据较弱，大家可以使用搜索把所有情况都搜索到，每次到终点就保存最大值，知道遍历完所有的情况，然后输出最大值。</p><p>大家一定要写一遍 <code>DFS</code> 然后在看后边的 <code>DP</code> ,有时动态规划要从状态出发，有时动态规划又可以看成暴力搜索的剪枝。</p><p>我们先看一下搜索的解法：</p><p>因为只能向右下方移动，不存再走回头路的情况，所以不需要设置 <code>Vis</code> 数组。</p><p>C++ 语言描述：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 105</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n, m, sum = <span class="hljs-number">-0x3f3f3f3f</span>;<br><span class="hljs-type">int</span> map[MAX][MAX];<br><span class="hljs-type">int</span> nextt[<span class="hljs-number">9</span>][<span class="hljs-number">2</span>] = &#123; &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">3</span>&#125;,&#123;<span class="hljs-number">3</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&#125; &#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y,<span class="hljs-type">int</span> value)</span></span><br><span class="hljs-function"></span>&#123;<br>    value += map[x][y];<br>    <span class="hljs-keyword">if</span> (x == n &amp;&amp; y == m)<br>    &#123;<br>        sum=<span class="hljs-built_in">max</span>(sum,value);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> tx = x + nextt[i][<span class="hljs-number">0</span>];<br>        <span class="hljs-type">int</span> ty = y + nextt[i][<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">if</span> (tx &lt;= n &amp;&amp; ty &lt;= m)<br>            <span class="hljs-built_in">dfs</span>(tx, ty, value);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>            cin &gt;&gt; map[i][j];<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    cout &lt;&lt; sum;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Python 语言描述：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().strip().split())<br><br>mapTable = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().strip().split())) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>nextt = [[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]] <span class="hljs-comment">#9种走的方式</span><br><br>Sum=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;-inf&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x,y,value</span>):<br><br>    <span class="hljs-keyword">global</span> Sum<br><br>    value+=mapTable[x][y]<br>    <span class="hljs-keyword">if</span> x==n-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y==m-<span class="hljs-number">1</span> :<br>        Sum=<span class="hljs-built_in">max</span>(Sum,value)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">9</span>):<br>        tx = x+nextt[i][<span class="hljs-number">0</span>]<br>        ty = y+nextt[i][<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span>  tx&lt;n <span class="hljs-keyword">and</span>  ty&lt;m :<br><br>            dfs(tx,ty,value)<br>dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(Sum)<br></code></pre></td></tr></table></figure><p>Java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br># 请在此输入您的代码<br>n,m = map(<span class="hljs-type">int</span>,input().strip().split())<br><br>mapTable = [list(map(<span class="hljs-type">int</span>,input().strip().split())) <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(n)</span>]<br><br>nextt = [[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]] #<span class="hljs-number">9</span>种走的方式<br><br>Sum=<span class="hljs-type">float</span>(<span class="hljs-string">&#x27;-inf&#x27;</span>)<br><br>def <span class="hljs-title function_">dfs</span><span class="hljs-params">(x,y,value)</span>:<br><br>    global Sum<br><br>    value+=mapTable[x][y]<br>    <span class="hljs-keyword">if</span> x==n-<span class="hljs-number">1</span> and y==m-<span class="hljs-number">1</span> :<br>        Sum=max(Sum,value)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(<span class="hljs-number">9</span>)</span>:<br>        tx = x+nextt[i][<span class="hljs-number">0</span>]<br>        ty = y+nextt[i][<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span>  tx&lt;n and  ty&lt;m :<br><br>            dfs(tx,ty,value)<br>dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>print(Sum)<br></code></pre></td></tr></table></figure><p>我们再来看一下 DP 怎么解这个问题。</p><p><strong>定义状态：</strong></p><p>我们设 dp{$i,j$} 当走到第 $i$ 行第 $j$ 列的值。</p><p><strong>找初始状态：</strong></p><p>dp{$1,1$}</p><p><strong>找状态转移：</strong></p><p>对于dp{$i,j$} 会有 $9$ 种不同的状态转移，我们很难知道当前的选择去怎样影响后续的值，这就是上边的搜索问题，我们难以找到一种 DP 思路去求解这个问题，但是我们反向考虑，既然dp{$i,j$} 会有 $9$ 种转移方式，那么当这 $9$ 种状态的值为从这九种状态到达终点的最优解（最大值）时，那么我们就能轻易得到dp{$i,j$} 的最大值为这九种最优解的最大值。</p><p>继续消解子问题，那么我们得到这 $9$ 种最优子状态，继续根据同样的原理得到这 $9$ 种最优的子状态的最优子状态。</p><p>持续消解，发现只有到了 dp{$n,m$} 采用终止，这就是一个递归的过程。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><br>value[n+<span class="hljs-number">5</span>][m+<span class="hljs-number">5</span>]<br><br>dp(x,y)<br>&#123;<br>    <span class="hljs-keyword">if</span>(x==n&amp;&amp;y==m)<br>        <span class="hljs-keyword">return</span> value[n][m]<br><br>    <span class="hljs-keyword">if</span>(越界)<br>        <span class="hljs-keyword">return</span> 负无穷<br><br>    value[x][y]=value[x][y]+max(dp(x+<span class="hljs-number">1</span>,y)......,dp(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">return</span> dp(x,y)<br><br>&#125;<br></code></pre></td></tr></table></figure><p>这个过程是正推，根据递归写出递推来就变成了逆推，其实并不是根据动态规划写出来的逆推式，而是用正推递归变递推变来的，当然有的同学一眼看出来，那是非常优秀的。</p><p>这个题目数据量较小，用递归写不会爆，大家可以根据我的伪代码写写试试。</p><p>正推也是可以写出递推式，大家有兴趣可以尝试下。</p><p>C++ 语言描述：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 105</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n, m, sum = <span class="hljs-number">-0x3f3f3f3f</span>;<br><span class="hljs-type">int</span> map[MAX][MAX];<br><span class="hljs-type">int</span> nextt[<span class="hljs-number">9</span>][<span class="hljs-number">2</span>] = &#123; &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">3</span>&#125;,&#123;<span class="hljs-number">3</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&#125; &#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>            cin &gt;&gt; map[i][j];<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n;i&gt;=<span class="hljs-number">1</span>;i--)<br>    &#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=m;j&gt;=<span class="hljs-number">1</span>;j--)<br>      &#123;<br>        <span class="hljs-keyword">if</span>(i==n&amp;&amp;j==m) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-type">int</span> maxTemp=<span class="hljs-number">-0x3f3f3f3f</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">9</span>; k++)<br>        &#123;<br>          <span class="hljs-type">int</span> tx = i + nextt[k][<span class="hljs-number">0</span>];<br>          <span class="hljs-type">int</span> ty = j + nextt[k][<span class="hljs-number">1</span>];<br>          <span class="hljs-keyword">if</span> (tx &gt; n || ty &gt; m) <span class="hljs-keyword">continue</span>;<br>          maxTemp=<span class="hljs-built_in">max</span>(maxTemp,map[tx][ty]);<br>        &#125;<br>        map[i][j]+=maxTemp;<br>      &#125;<br>    &#125;<br>        <span class="hljs-comment">// for (int i = 1; i &lt;= n; i++)&#123;</span><br>        <span class="hljs-comment">//   for (int j = 1; j &lt;= m; j++)</span><br>        <span class="hljs-comment">//   cout &lt;&lt; map[i][j]&lt;&lt;&quot; &quot;;</span><br><br>        <span class="hljs-comment">//   cout&lt;&lt;endl;</span><br>        <span class="hljs-comment">// &#125;</span><br>          cout &lt;&lt; map[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">nextt = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">1</span>]]  <span class="hljs-comment"># 9种走的方式</span><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>DP = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> i == n - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> j == m - <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">continue</span><br><br>        maxTemp = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;-inf&#x27;</span>)<br><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">9</span>):<br>            tx = i + nextt[k][<span class="hljs-number">0</span>]<br>            ty = j + nextt[k][<span class="hljs-number">1</span>]<br><br>            <span class="hljs-keyword">if</span> tx &gt;= n <span class="hljs-keyword">or</span> ty &gt;= m:<br>                <span class="hljs-keyword">continue</span><br><br>            maxTemp = <span class="hljs-built_in">max</span>(maxTemp, DP[tx][ty])<br><br>        DP[i][j] += maxTemp<br><br><span class="hljs-built_in">print</span>(DP[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p>java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span><br>&#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m, Sum = -<span class="hljs-number">0x3f3f3f3f</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> [][] mapTable=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">105</span>][<span class="hljs-number">105</span>];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> nextt[][] =&#123; &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">3</span>&#125;,&#123;<span class="hljs-number">3</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&#125; &#125;;<br><br><br><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> java.lang.Exception<br> &#123;<br><br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n=in.nextInt();<br>      m=in.nextInt();<br>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++)<br>                    mapTable[i][j]=in.nextInt();<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n;i&gt;=<span class="hljs-number">1</span>;i--)<br>    &#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=m;j&gt;=<span class="hljs-number">1</span>;j--)<br>      &#123;<br>        <span class="hljs-keyword">if</span>(i==n&amp;&amp;j==m) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-type">int</span> maxTemp=-<span class="hljs-number">0x3f3f3f3f</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">9</span>; k++)<br>        &#123;<br>          <span class="hljs-type">int</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> i + nextt[k][<span class="hljs-number">0</span>];<br>          <span class="hljs-type">int</span> <span class="hljs-variable">ty</span> <span class="hljs-operator">=</span> j + nextt[k][<span class="hljs-number">1</span>];<br>          <span class="hljs-keyword">if</span> (tx &gt; n || ty &gt; m) <span class="hljs-keyword">continue</span>;<br>          maxTemp=Math.max(maxTemp,mapTable[tx][ty]);<br>        &#125;<br>        mapTable[i][j]+=maxTemp;<br>      &#125;<br>    &#125;<br><br>  System.out.println(mapTable[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="动态规划背包问题"><a href="#动态规划背包问题" class="headerlink" title="动态规划背包问题"></a>动态规划背包问题</h2><h2 id="实验介绍-1"><a href="#实验介绍-1" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本节课我们进入动态规划课程的学习，动态规划是一种多阶段的决策过程最优化的问题。</p><p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 $3$ 个章节进行动态规划问题的讲解。</p><p>今天的课程是动态规划系列的第二个章节。</p><h3 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h3><ul><li>0-1 背包</li><li>完全背包</li><li>多重背包问题</li></ul><h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h2><p>我们上一章课程讲解了动态规划算法的基本原理，包括动态规划的“为什么使用动态规划算法”、“多阶段决策过程最优化问题”、“动态规划中的术语解释”，“可解动态鬼规划的性质”等知识点。</p><p>今天我们来讲一下，动态规划中的背包问题，背包问题，是比赛中常考的问题，也是动态规划入门的问题，其实动态规划并没有套路，只是这类问题有着明确的特点，如果你做的题足够多的话，你会发现很多问题都会有模板。</p><p>背包问题基本都是不可拆分背包，因为可拆分背包是贪心去求解的问题。我们今天讲三种背包的基本模型：1.0-1 背包、2.完全背包、3.多重背包问题。</p><h4 id="0-1-背包问题"><a href="#0-1-背包问题" class="headerlink" title="0-1 背包问题"></a>0-1 背包问题</h4><p>0-1 背包是背包问题的入门的问题。但是背包问题的模板也是最简单的。</p><p><strong>0-1 背包的问题是什么呢？</strong></p><p>其问题的简单表述为，有 N 件物品，每件物品只有一件。每个物品都有一个价值$w_i$，每件物品都有一个占一个部分空间$c_i$,已知你的背包共计可承重 C(Contains),现在让你求你的背包最多装得下多少$w_{Max}$，即求你背包中物品的最大价值$w_{Max}$。</p><p><strong>对于这个问题我们有以下模板:</strong></p><p>1.定义变量并输入</p><p>C++ 语言描述：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// 定义V,W用于保存价值和质量</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><span class="hljs-type">int</span> c[Maxn],w[Maxn];<br><br><span class="hljs-type">int</span> C;<br><br><span class="hljs-comment">// 输入</span><br><br><span class="hljs-type">int</span> n;<br><br><span class="hljs-built_in">cin</span>&gt;&gt; n;<br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>&#123;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;c[i]&gt;&gt;w[i];<br>&#125;<br><br><span class="hljs-built_in">cin</span>&gt;&gt;C;<br><br><span class="hljs-comment">//创建动态规划数组</span><br><br><span class="hljs-type">int</span> dp[Maxn];<br></code></pre></td></tr></table></figure><p>Python 语言描述：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>c = []<br>w = []<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>        tempC, tempW = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>        c.append(tempC)<br><br>        w.append(tempW)<br></code></pre></td></tr></table></figure><p>java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br><br>   <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> C;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n=in.nextInt();<br><br>       C=in.nextInt();<br><br>       c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br><br>       w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br><br>       dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>             c[i]=in.nextInt();<br>             w[i]=in.nextInt();;<br>        &#125;<br><br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2.执行算法</p><p>我们先去找到状态转移方程</p><p><code>dp[i][j]=max(dp[i][j],dp[i−1]j−c[i]]+w[i])</code></p><p>含义，选到第 i 件物品，且背包现在重量为 j。</p><p>那么考虑这个状态会由什么状态转移而来，肯定是选到第 i-1 件的时候。</p><p>如果选了第 i 件，那么就是由 <code>dp[i−1]j−c[i]]</code>转移而来。</p><p>如果不选第 i 件，那么就是由 <code>dp[i][j]</code>转移而来。</p><p>那么已知 <code>dp[i−1]j−c[i]]和 dp[i][j]</code>都为各自最优的状态，那我们直接取最优状态即可。</p><p>C++ 描述：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])<br>            dp[i][j]=max(dp[i][j],dp[i<span class="hljs-number">-1</span>][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(C+<span class="hljs-number">1</span>):<br><br>        dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-c[i]]+w[i])<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure><p>Java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])<br>            dp[i][j]=max(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br><br><br>        System.out.println(dp[C]);<br></code></pre></td></tr></table></figure><p>空间优化：</p><p>因为状态转移每次只与上一层有关，所以用一个一维数组就可以。</p><p>为什么从大到小遍历， 看 $dp[j]&#x3D;dp[j-c[i]]+w[i]$ 这一状态转移，是根据小的改大的，如果先把小的改了，那小的还会被用到，数据就不对了，所以从小到大。</p><p>C++ 描述；</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) <span class="hljs-comment">//遍历每一件物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=C;j&gt;=c[i];j--)<br>    <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j]=max(dp[j-c[i]]+w[i],dp[j]);<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>        dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure><p>Java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>&#123;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> C; j &gt;= c[i]; j--)<br>        <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>&#125;<br><br><br>System.out.println(dp[C]);<br></code></pre></td></tr></table></figure><p>初始化细节：</p><ul><li>装满 $dp[0]&#x3D;0$，其余赋值 $-INF$；</li><li>不装满全初始化为 $0$；</li></ul><p>C++ 语言描述：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-comment">//装满</span><br><span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(dp));<br><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//不装满</span><br><br><span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">-0x3f</span>, <span class="hljs-keyword">sizeof</span>(dp));<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 装满</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br><br>    dp.append(-<span class="hljs-number">0x3f3f3f3f</span>)<br><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span><br><br><span class="hljs-comment"># 不装满</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br><br>    dp.append(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>Java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-comment">//装满</span><br>Arrays.fill(dp, -<span class="hljs-number">0x3f3f3f3f</span>);<br><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//不装满</span><br><br>memset(dp, -<span class="hljs-number">0x3f</span>, sizeof(dp));<br></code></pre></td></tr></table></figure><p><strong>题目描述:</strong></p><p>题目链接：<a href="https://www.lanqiao.cn/problems/1174/learning/">https://www.lanqiao.cn/problems/1174/learning/</a></p><p>小明有一个容量为 $V$ 的背包。</p><p>这天他去商场购物，商场一共有 $N$ 件物品，第 $i$ 件物品的体积为 $w$ ，价值为 $v$，每种物品都只有一个。</p><p>小明想知道在购买的物品总体积不超过 $V$ 的情况下所能获得的最大价值为多少，请你帮他算算。</p><p><strong>输入描述:</strong></p><p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p><p>第 $2∼N+1$ 行包含 $2$ 个正整数 $w,v$，表示物品的体积和价值。</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>5 20<br>1 6<br>2 5<br>3 8<br>5 15<br>3 3<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出： 37<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>答案解析：</strong></p><p><strong>C++ 解题代码</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><br><span class="hljs-type">int</span> c[Maxn], w[Maxn];<br><span class="hljs-type">int</span> dp[Maxn];<br><span class="hljs-type">int</span> C;<br><br><span class="hljs-comment">// 输入</span><br><br><span class="hljs-type">int</span> n;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>    cin &gt;&gt; n;<br><br>    cin &gt;&gt; C;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>        cin &gt;&gt; c[i] &gt;&gt; w[i];<br>    &#125;<br><br><br>    <span class="hljs-type">int</span> dp[Maxn];<br><br>    <span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(dp)); <span class="hljs-comment">//不装满</span><br><br>    <span class="hljs-comment">//创建动态规划数组</span><br><br><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>    &#123;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = C; j &gt;= c[i]; j--)<br>            <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br>    &#125;<br><br>    cout &lt;&lt; dp[C] &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>c = []<br>w = []<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        tempC, tempW = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>        c.append(tempC)<br>        w.append(tempW)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br>        dp.append(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br><br>    <span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> C;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n=in.nextInt();<br>        C=in.nextInt();<br>        c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>             c[i]=in.nextInt();<br>             w[i]=in.nextInt();;<br>        &#125;<br><br>        Arrays.fill(dp, <span class="hljs-number">0</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>        &#123;<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> C; j &gt;= c[i]; j--)<br>                <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>                dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>        &#125;<br>        System.out.println(dp[C]);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="完全背包问题"><a href="#完全背包问题" class="headerlink" title="完全背包问题"></a>完全背包问题</h4><p>完全背包是背包问题的入门的问题。</p><p>根据 <code>0-1</code> 背包写出模板也是很简单的。</p><p><strong>完全背包的问题是什么呢？</strong></p><p>其问题的简单表述为，有 $N$ 件物品，每件物品有无数件。每个物品都有一个价值$w_i$，每件物品都有一个占一个部分空间$c_i$,已知你的背包共计可承重 $C(Contains)$,现在让你求你的背包最多装得下多少$w_{Max}$，即求你背包中物品的最大价值$w_{Max}$。</p><p><strong>对于这个问题我们有以下模板:</strong></p><p>1.定义变量并输入</p><p>参考 0-1 背包。</p><p>2.执行算法</p><p>我们先去找到状态转移方程</p><p><code>dp[i][j]=max(dp[i][j],dp[i]j−c[i]]+w[i])</code></p><p>含义，选到第 $i$ 件物品，且背包现在重量为 $j$。</p><p>那么考虑这个状态会由什么状态转移而来，肯定是选到第 $i-1$ 件的时候,或者选了若干次第 $i$ 件。</p><p>如果不选第 $i$ 种，那么就是由 <code>dp[i-1][j]</code>转移而来。</p><p>如果选了第 $i$ 件，那么就是由 <code>dp[i−1]j−c[i]]</code>转移而来。</p><p>或者在某一刻，不在选第 $i$ 件了，那么就是有 <code>dp[i][j]</code>转移而来。</p><p>那么已知 <code>dp[i]j−c[i]]</code>和 <code>dp[i][j]</code>都为各自最优的状态，那我们直接取最优状态即可。</p><p>C++ 描述：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)&#123;<br>        dp[i][j]=dp[i<span class="hljs-number">-1</span>][j];<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])  dp[i][j]=max(dp[i][j],dp[i][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br><span class="hljs-built_in">cout</span>&lt;&lt;dp[n][C]&lt;&lt;<span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C+<span class="hljs-number">1</span>):<br>        dp[i][j]=dp[i-<span class="hljs-number">1</span>][j];<br>        dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i][j-c[i]]+w[i])<br><span class="hljs-built_in">print</span>(dp[n][C])<br></code></pre></td></tr></table></figure><p>Java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=C;j++)&#123;<br>        dp[i][j]=dp[i-<span class="hljs-number">1</span>][j];<br>        <span class="hljs-keyword">if</span>(j&gt;=c[i])dp[i][j]=max(dp[i][j],dp[i][j-c[i]]+w[i]);<br>    &#125;<br>&#125;<br> System.out.println(dp[n][C]);<br></code></pre></td></tr></table></figure><p>空间优化：</p><p>因为状态转移每次只与上一层有关，所以用一个一维数组就可以。</p><p>为什么从小到大遍历， 看 $dp[j]&#x3D;dp[j-c[i]]+w[i]$ 这一状态转移，是根据小的改大的，而此时的含义为选了 <code>x</code> 件后的容量与质量，跟 <code>01</code> 背包类似，但含义不同，处理方式上也有本质区别，处理完一件后在处理下件。</p><p>C++ 描述；</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) <span class="hljs-comment">//遍历每一件物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>    <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j]=max(dp[j-c[i]]+w[i],dp[j]);<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>):<br>        dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure><p>Java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>        <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>        dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>&#125;<br><br><br>System.out.println(dp[C]);<br></code></pre></td></tr></table></figure><p>初始化细节：</p><p>与 <code>0 - 1</code>背包相同。</p><ul><li>装满 $dp[0]&#x3D;0$，其余赋值$-INF$；</li><li>不装满全初始化为 $0$；</li></ul><p><strong>题目描述:</strong></p><p>题目链接：<a href="https://www.lanqiao.cn/problems/1175/learning/">https://www.lanqiao.cn/problems/1175/learning/</a></p><p>小明有一个容量为 $V$ 的背包。</p><p>这天他去商场购物，商场一共有 $N$ 件物品，第 $i$ 件物品的体积为 $w$ ，价值为 $v$，每种物品都有无限多个。</p><p>xxxxxxxxxx68 1import java.io.*;2​3public class Main {4    static int N&#x3D;110;5    static long[][] g&#x3D;new long[N][N],m&#x3D;new long[N][N],f&#x3D;new long[N][N];6    static long n,q;7    static BufferedReader br&#x3D;new BufferedReader(new InputStreamReader(System.in));8    static PrintWriter  out&#x3D;new PrintWriter(new OutputStreamWriter(System.out));9    public static void main(String[] args) throws IOException {10        String[] s&#x3D;br.readLine().split(“ “);11        n&#x3D;Long.parseLong(s[0]);12        q&#x3D;Long.parseLong(s[1]);13        for(int i&#x3D;1;i&lt;&#x3D;n;++i){14            s&#x3D;br.readLine().split(“ “);15            for(int j&#x3D;1;j&lt;&#x3D;n;++j){16                g[i][j]&#x3D;Long.parseLong(s[j-1]);17            }18        }19        for(int i&#x3D;1;i&lt;&#x3D;n;++i){20            s&#x3D;br.readLine().split(“ “);21            for(int j&#x3D;1;j&lt;&#x3D;n;++j){22                m[i][j]&#x3D;Long.parseLong(s[j-1]);23                f[i][j]&#x3D;m[i][j];24            }25        }26        if(floyd()&gt;q){27            out.println(-1);28            out.flush();29            return;30        }31        long l&#x3D;0,r&#x3D;1000000000;32        while(l&lt;r){33            long mid&#x3D;l+r&gt;&gt;1;34            if(check(mid)) r&#x3D;mid;35            else l&#x3D;mid+1;36        }37        out.println(r);38        out.flush();39    }40    static long floyd(){41        long a&#x3D;0;42        for (int k &#x3D; 1; k &lt;&#x3D; n; k ++ )43            for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )44                for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )45                    f[i][j] &#x3D;Math.min(f[i][j], f[i][k] + f[k][j]);46​47        for(int i&#x3D;1;i&lt;&#x3D;n;++i)48            for(int j&#x3D;1;j&lt;&#x3D;n;++j)49                a+&#x3D;f[i][j];50        return a;51    }52    static boolean check(long x){53        for(int i&#x3D;1;i&lt;&#x3D;n;++i){54            for(int j&#x3D;1;j&lt;&#x3D;n;++j) f[i][j]&#x3D;g[i][j];55        }56        long h&#x3D;x&#x2F;n;57        long s&#x3D;x%n;58        for(int i&#x3D;1;i&lt;&#x3D;n;++i){59            for(int j&#x3D;1;j&lt;&#x3D;n;++j){60                if(i&#x3D;&#x3D;j) continue;61                if(i&lt;&#x3D;s) f[i][j]&#x3D;Math.max(m[i][j],f[i][j]-h-1);62                else f[i][j]&#x3D;Math.max(m[i][j],f[i][j]-h);63                f[j][i]&#x3D;f[i][j];64            }65        }66        return floyd()&lt;&#x3D;q;67    }68}java</p><p><strong>输入描述:</strong></p><p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p><p>第 $2∼N+1$ 行包含 $2$ 个正整数 $w,v$，表示物品的体积和价值。</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>5 20<br>1 6<br>2 5<br>3 8<br>5 15<br>3 3<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出： 120<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>答案解析：</strong></p><p><strong>C++ 解题代码</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><span class="hljs-type">int</span> c[Maxn], w[Maxn];<br><span class="hljs-type">int</span> dp[Maxn];<br><span class="hljs-type">int</span> C;<br><span class="hljs-comment">// 输入</span><br><br><span class="hljs-type">int</span> n;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>    cin &gt;&gt; n;<br>    cin &gt;&gt; C;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>        cin &gt;&gt; c[i] &gt;&gt; w[i];<br>    &#125;<br><br>    <span class="hljs-type">int</span> dp[Maxn];<br><br>    <span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(dp)); <span class="hljs-comment">//不装满</span><br>    <span class="hljs-comment">//创建动态规划数组</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>            <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);<br>    &#125;<br>    cout &lt;&lt; dp[C] &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>c = []<br>w = []<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        tempC, tempW = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>        c.append(tempC)<br>        w.append(tempW)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br>        dp.append(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>):<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - c[i]] + w[i], dp[j])<br><br>    <span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> C;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n=in.nextInt();<br>        C=in.nextInt();<br>        c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>             c[i]=in.nextInt();<br>             w[i]=in.nextInt();;<br>        &#125;<br>        Arrays.fill(dp, <span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-comment">//遍历每一件物品</span><br>        &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=c[i];j&lt;=C;j++)<br>                <span class="hljs-comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span><br>                dp[j] = max(dp[j - c[i]] + w[i], dp[j]);<br>        &#125;<br>        System.out.println(dp[C])<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h4><p>多重背包是背包问题的入门的问题。 根据 0-1 背包写出模板也是很简单的。</p><p><strong>多重背包的问题是什么呢？</strong></p><p>其问题的简单表述为，有 N 件物品，每件物品有$s_i$件。每个物品都有一个价值$w_i$，每件物品都有一个占一个部分空间$c_i$,已知你的背包共计可承重 C(Contains),现在让你求你的背包最多装得下多少$w_{Max}$，即求你背包中物品的最大价值$w_{Max}$。</p><p><strong>对于这个问题我们有以下模板:</strong></p><p>1.定义变量并输入</p><p>参考 <code>0-1</code> 背包。</p><p>2.执行算法</p><p>这次我们直接空间优化，不再讲解二维做法：</p><p>多重背包是可以不选，也可以选 <code>1</code> 个，可以选多个，而 <code>0-1</code> 背包只能选 <code>0</code> 个或者 <code>1</code>个。</p><p>那就直接把种物品分开，即可比如：</p><p>每个盘子 <code>3</code> 块钱，我有 <code>2</code> 个。每双筷子 <code>1</code> 块钱，我有 <code>10</code> 双，每对刀叉 <code>3</code> 块钱，我有 <code>3</code> 个。</p><p>那么我就可以拆成，有 <code>2</code> 个三块的盘子，每个可以选也可以不选，就变成了 <code>0-1</code> 背包。</p><p>也就是说，对于每种是可以选多个，那就直接拆分成独立的个体就可以了。</p><p>C++ 描述；</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=s[i];j++)<br>    <span class="hljs-comment">//遍历物品的数量</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=C;k&gt;=c[i];k--)<br>        <span class="hljs-comment">//当做01背包来处理</span><br>        &#123;<br>            <span class="hljs-comment">//取01背包情况的dp[k]和dp[k-c[i]]+w[i]的最大值</span><br>            dp[k]=max( dp[k],dp[k-c[i]]+w[i] );<br>        &#125;<br><br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>            dp[k]=<span class="hljs-built_in">max</span>( dp[k],dp[k-c[i]]+w[i] )<br><br><span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure><p>Java 语言描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=s[i];j++)<br>    <span class="hljs-comment">//遍历物品的数量</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=C;k&gt;=c[i];k--)<br>        <span class="hljs-comment">//当做01背包来处理</span><br>        &#123;<br>            <span class="hljs-comment">//取01背包情况的dp[k]和dp[k-c[i]]+w[i]的最大值</span><br>            dp[k]=max( dp[k],dp[k-c[i]]+w[i] );<br>        &#125;<br><br><br>System.out.println(dp[C]);<br></code></pre></td></tr></table></figure><p>不顾这样做大概率会超时，我们换一种理解方式：</p><p>在这两种问题中，我们需要考虑每个物品选择取或不取的情况，通过动态规划来求解最优解。</p><p>$01$背包问题中，对于每个物品$i$，我们有两个选择：选取或不选取。状态转移方程为： $dp[j] &#x3D; \max(dp[j], dp[j - v[i]] + w[i])$</p><p>多重背包问题中，对于每个物品i，我们可以选择取$0$个、$1$个、$2$个…直到$s[i]$个。状态转移方程为： $dp[j] &#x3D; \max(dp[j], dp[j - v[i] \cdot k] + w[i] \cdot k)$ 其中，k 的取值范围是$0, 1, 2, …, s[i]$。</p><p>这两个问题的解决思路相似，都是通过填充一个二维的动态规划数组$dp$，其中$dp[j]$表示背包容量为j时的最优解。在状态转移时，我们考虑了每个物品的选择情况，求解最终的最优解。</p><p>初始化细节：</p><p>与 $0 - 1$ 背包相同。</p><ul><li>装满 $dp[0]&#x3D;0$，其余赋值$-INF$；</li><li>不装满全初始化为 $0$；</li></ul><p><strong>题目描述:</strong></p><p>题目链接：<a href="https://www.lanqiao.cn/problems/1176/learning/">https://www.lanqiao.cn/problems/1176/learning/</a></p><p>小明有一个容量为 $V$的背包。</p><p>这天他去商场购物，商场一共有 $N$ 件物品，第 $i$ 件物品的体积为 $w$，价值为 $v$，每种物品都有$s$个。</p><p>小明想知道在购买的物品总体积不超过 $V$ 的情况下所能获得的最大价值为多少，请你帮他算算。</p><p><strong>输入描述:</strong></p><p>输入第 $1$ 行包含两个正整数 $N,V$，表示商场物品的数量和小明的背包容量。</p><p>第 $2∼N+1$ 行包含 $3$ 个正整数 $w,vs$,表示物品的体积、价值和数量。</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>3 30<br>1 2 3<br>4 5 6<br>7 8 9<br><br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出： 39<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>答案解析：</strong></p><p><strong>C++ 解题代码</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Maxn 5000</span><br><br><span class="hljs-type">int</span> c[Maxn], w[Maxn], s[Maxn];<br><span class="hljs-type">int</span> dp[Maxn];<br><span class="hljs-type">int</span> C;<br><br><span class="hljs-comment">// 输入</span><br><span class="hljs-type">int</span> n;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>    cin &gt;&gt; n;<br>    cin &gt;&gt; C;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        cin &gt;&gt; c[i] &gt;&gt; w[i] &gt;&gt; s[i];<br>    &#125;<br><br><br>    <span class="hljs-type">int</span> dp[Maxn];<br>    <span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(dp)); <span class="hljs-comment">//不装满</span><br><br>    <span class="hljs-comment">//创建动态规划数组</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=C;j&gt;=c[i];j--)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>;k&lt;=s[i] &amp;&amp; j&gt;=k*c[i];k++)<br>                <span class="hljs-comment">//遍历物品的数量</span><br>                dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-k*c[i]]+w[i]*k);<br>        &#125;<br>    &#125;<br><br>    cout &lt;&lt; dp[C] &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python">c = []<br>w = []<br>s=[]<br>dp = []<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>        tempC, tempW ,tempS= <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>        c.append(tempC)<br>        w.append(tempW)<br>        s.append(tempS)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(C + <span class="hljs-number">50</span>):<br>        dp.append(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(c[i],C+<span class="hljs-number">1</span>)):<br>            <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]+<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">if</span> j&lt;k*c[i]:<br>                    <span class="hljs-keyword">break</span>;<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - k * c[i]] + w[i] * k)<br><br>    <span class="hljs-built_in">print</span>(dp[C])<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.max;<br><br><span class="hljs-keyword">public</span>  <span class="hljs-keyword">class</span>  <span class="hljs-title class_">Main</span>&#123;<br><br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []c;<br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []w;<br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []s;<br>        <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dp[];<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>        &#123;<br>            <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>            <span class="hljs-type">int</span> n=in.nextInt();<br>            <span class="hljs-type">int</span> C=in.nextInt();<br>            c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>            w=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>            s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">50</span>];<br>            dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [C+<span class="hljs-number">50</span>];<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>                c[i]=in.nextInt();<br>                w[i]=in.nextInt();<br>                s[i]=in.nextInt();<br>            &#125;<br><br>            Arrays.fill(dp, <span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br><span class="hljs-comment">//遍历每一个物品</span><br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=C;j&gt;=c[i];j--)<br>                &#123;<br>                    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>;k&lt;=s[i] &amp;&amp; j&gt;=k*c[i];k++)<br>                        <span class="hljs-comment">//遍历物品的数量</span><br>                        dp[j]=max(dp[j],dp[j-k*c[i]]+w[i]*k);<br>                &#125;<br>            &#125;<br><br>            System.out.println(dp[C]);<br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="动态规划线性-DP"><a href="#动态规划线性-DP" class="headerlink" title="动态规划线性 DP"></a>动态规划线性 DP</h2><h2 id="实验介绍-2"><a href="#实验介绍-2" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 $3$ 个章节进行动态规划问题的讲解。</p><p>今天的课程是动态规划系列的第 $3$ 个章节。</p><h3 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h3><ul><li>讲解很多经典的动态规划问题，对动态规划初步掌握。</li></ul><h2 id="普通线性-DP"><a href="#普通线性-DP" class="headerlink" title="普通线性 DP"></a>普通线性 DP</h2><p>线性 <code>DP</code> 是动态规划问题中的一类问题，指状态之间有线性关系的动态规划问题。</p><p>这类问题不像是我们讲的背包等问题有固定的模板。</p><p>少数常见的线性 <code>DP</code> 问题也有模板，比如我们讲的 $LIS$ 和 $LCS$ 问题。</p><p>大部分还是需要根据题目进行推导，基本没有什么规律可循。</p><p>大部分线性规划的问题，都需要自己首先定义状态，找到决策，推导状态转移方程。</p><p>我们再讲解几个题目，让大家找找做最普遍 <code>DP</code> 问题的感觉。</p><h4 id="蓝肽子序列"><a href="#蓝肽子序列" class="headerlink" title="蓝肽子序列"></a>蓝肽子序列</h4><p>题目链接：<a href="https://www.lanqiao.cn/problems/1030/learning/">蓝肽子序列</a></p><p><strong>题目描述:</strong></p><p>L 星球上的生物由蛋蓝质组成，每一种蛋蓝质由一类称为蓝肽的物资首尾连接成一条长链后折叠而成。</p><p>生物学家小乔正在研究 L 星球上的蛋蓝质。她拿到两个蛋蓝质的蓝肽序列，想通过这两条蓝肽序列的共同特点来分析两种蛋蓝质的相似性。</p><p>具体的，一个蓝肽可以使用 $1$ 至 $5$ 个英文字母表示，其中第一个字母大写，后面的字母小写。一个蛋蓝质的蓝肽序列可以用蓝肽的表示顺序拼接而成。</p><p>在一条蓝肽序列中，如果选取其中的一些位置，把这些位置的蓝肽取出，并按照它们在原序列中的位置摆放，则称为这条蓝肽的一个子序列。蓝肽的子序列不一定在原序列中是连续的，中间可能间隔着一些未被取出的蓝肽。</p><p>如果第一条蓝肽序列可以取出一个子序列与第二条蓝肽序列中取出的某个子序列相等，则称为一个公共蓝肽子序列。</p><p>给定两条蓝肽序列，找出他们最长的那个公共蓝肽子序列的长度。</p><p><strong>输入描述:</strong></p><p>输入两行，每行包含一个字符串，表示一个蓝肽序列。字符串中间没有空格等分隔字符。</p><p>其中有 ，两个字符串的长度均不超过 $1000$。</p><p><strong>输出描述:</strong></p><p>输出一个整数，表示最长的那个公共蓝肽子序列的长度。</p><p><strong>输入输出样例:</strong></p><p><strong>示例:</strong></p><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">LanQiaoBei LanTaiXiaoQiao<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><p><strong>答案解析：</strong></p><p>该题目是 $LCS$ 的变形，由原来的一个字符或者一个数字的匹配变成了，一个单词的匹配。</p><p>这个题目为先划分字符串变成基本的比较单位。</p><p>然后再套用 $LCS$ 模板</p><p>即可完成这道题目。</p><p><strong>C++ 解题代码</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1005</span>][<span class="hljs-number">1005</span>];<br>string s1, s2;<br>string a[<span class="hljs-number">1005</span>], b[<span class="hljs-number">1005</span>];<br><span class="hljs-type">int</span> n=<span class="hljs-number">0</span>, m=<span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; s1 &gt;&gt; s2;<br>    <span class="hljs-type">int</span> d1 = s1.<span class="hljs-built_in">length</span>(), d2 = s2.<span class="hljs-built_in">length</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; d1;)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (s1[i] &gt;= <span class="hljs-string">&#x27;A&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>)<br>        &#123;<br>            a[n] += s1[i++];<br>            <span class="hljs-keyword">while</span> (s1[i] &gt;= <span class="hljs-string">&#x27;a&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="hljs-string">&#x27;z&#x27;</span>)<br>            &#123;<br>                a[n] += s1[i++];<br>            &#125;<br>        &#125;<br>        n++;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; d2;)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (s2[i] &gt;= <span class="hljs-string">&#x27;A&#x27;</span> &amp;&amp; s2[i] &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>)<br>        &#123;<br>            b[m] += s2[i++];<br>            <span class="hljs-keyword">while</span> (s2[i] &gt;= <span class="hljs-string">&#x27;a&#x27;</span> &amp;&amp; s2[i] &lt;= <span class="hljs-string">&#x27;z&#x27;</span>)<br>            &#123;<br>                b[m] += s2[i++];<br>            &#125;<br><br>        &#125;<br>        m++;<br>    &#125;<br>     dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++)<br>        &#123;<br><br>            <span class="hljs-keyword">if</span> (a[i] == b[j])<br>            &#123;<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j] + <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]=<span class="hljs-built_in">max</span>(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>]);<br>            &#125;<br>        &#125;<br>    cout &lt;&lt; dp[n][m] &lt;&lt; endl;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python">Maxn = <span class="hljs-number">1005</span><br>dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Maxn)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Maxn)]<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    s1 = <span class="hljs-built_in">input</span>()<br>    s2 = <span class="hljs-built_in">input</span>()<br>    a = []<br>    b = []<br>    temp = <span class="hljs-string">&#x27;&#x27;</span><br><br>    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> s1:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;A&#x27;</span> &lt;= word &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>:<br>            <span class="hljs-keyword">if</span> temp != <span class="hljs-string">&#x27;&#x27;</span>:<br>                a.append(temp)<br>            temp = <span class="hljs-string">&#x27;&#x27;</span><br>        temp += word<br>    a.append(temp)<br><br>    temp = <span class="hljs-string">&#x27; &#x27;</span><br><br>    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> s2:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;A&#x27;</span> &lt;= word &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>:<br>            <span class="hljs-keyword">if</span> temp != <span class="hljs-string">&#x27;&#x27;</span>:<br>                b.append(temp)<br>            temp = <span class="hljs-string">&#x27;&#x27;</span><br>        temp += word<br>    b.append(temp)<br><br>    n = <span class="hljs-built_in">len</span>(a)<br>    m = <span class="hljs-built_in">len</span>(b)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(a)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(b)):<br>            <span class="hljs-keyword">if</span> a[i] == b[j]:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j] + <span class="hljs-number">1</span><br><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">if</span> dp[i + <span class="hljs-number">1</span>][j] &gt; dp[i][j + <span class="hljs-number">1</span>]:<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i + <span class="hljs-number">1</span>][j]<br><br>                <span class="hljs-keyword">else</span>:<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>])<br><br>    <span class="hljs-built_in">print</span>(dp[n][m])<br><br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] dp;<br>    <span class="hljs-keyword">static</span> String s1;<br>    <span class="hljs-keyword">static</span> String s2;<br>    <span class="hljs-keyword">static</span> String []a;<br>    <span class="hljs-keyword">static</span> String []b;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">int</span> n=<span class="hljs-number">0</span>,m=<span class="hljs-number">0</span>;<br><br>        s1=in.next();<br>        s2=in.next();<br><br>        a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">1005</span>];<br>        b=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">1005</span>];<br><br>        <span class="hljs-type">int</span> d1=s1.length();<br>        <span class="hljs-type">int</span> d2=s2.length();<br><br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1005</span>][<span class="hljs-number">1005</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; d1;n++)<br>        &#123;<br><br><br>            <span class="hljs-keyword">if</span> (s1.charAt(i) - <span class="hljs-string">&#x27;A&#x27;</span>&gt;=<span class="hljs-number">0</span> &amp;&amp; s1.charAt(i) - <span class="hljs-string">&#x27;Z&#x27;</span>&lt;=<span class="hljs-number">0</span>)<br>            &#123;<br>                a[n] += s1.charAt(i++);<br>                <span class="hljs-keyword">while</span> (i &lt; d1&amp;&amp;s1.charAt(i) -<span class="hljs-string">&#x27;a&#x27;</span>&gt;=<span class="hljs-number">0</span> &amp;&amp; s1.charAt(i)-<span class="hljs-string">&#x27;z&#x27;</span> &lt;=<span class="hljs-number">0</span>)<br>                &#123;<br>                    a[n] += s1.charAt(i++);<br>                &#125;<br><br>            &#125;<br><br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; d2;m++)<br>        &#123;<br><br>            <span class="hljs-keyword">if</span> (s2.charAt(i) - <span class="hljs-string">&#x27;A&#x27;</span>&gt;=<span class="hljs-number">0</span> &amp;&amp; s2.charAt(i) - <span class="hljs-string">&#x27;Z&#x27;</span>&lt;=<span class="hljs-number">0</span>)<br>            &#123;<br>                b[m] += s2.charAt(i++);<br>                <span class="hljs-keyword">while</span> (i &lt; d2&amp;&amp;s2.charAt(i) -<span class="hljs-string">&#x27;a&#x27;</span>&gt;=<span class="hljs-number">0</span>&amp;&amp; s2.charAt(i)-<span class="hljs-string">&#x27;z&#x27;</span> &lt;= <span class="hljs-number">0</span>)<br>                &#123;<br>                    b[m] += s2.charAt(i++);<br>                &#125;<br><br>            &#125;<br><br>        &#125;<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-type">int</span> Maxn=Math.max(n,m)+<span class="hljs-number">50</span>;<br>        dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[Maxn][Maxn];<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m; j++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (a[i].equals( b[j]))<br>                &#123;<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j] + <span class="hljs-number">1</span>;<br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]=Math.max(dp[i + <span class="hljs-number">1</span>][j], dp[i][j + <span class="hljs-number">1</span>]);<br>                &#125;<br>            &#125;<br>        System.out.println(dp[n][m]);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="合唱队形"><a href="#合唱队形" class="headerlink" title="合唱队形"></a>合唱队形</h4><p>题目链接：<a href="https://www.lanqiao.cn/problems/742/learning/">https://www.lanqiao.cn/problems/742/learning/</a></p><p><strong>题目描述:</strong></p><p>$N$ 位同学站成一排，音乐老师要请其中的 $(N-K)$ 位同学出列，使得剩下的 $K$ 位同学排成合唱队形。</p><p>合唱队形是指这样的一种队形：设 $K$ 位同学从左到右依次编号为 $1，2，\cdots K$，他们的身高分别为 $T_1，T_2，\cdots，T_K$， 则他们的身高满足 $T_1&lt; \cdots &lt; T_i&gt; T_{i+1}&gt; \cdots &gt;T_K(1 \leq i \leq K)$。</p><p>你的任务是，已知所有 $N$ 位同学的身高，计算最少需要几位同学出列，可以使得剩下的同学排成合唱队形。</p><p><strong>输入描述:</strong></p><p>输入两行。</p><p>第一行是一个整数 $N\ (2 \leq N \leq 100)$，表示同学的总数。</p><p>第二行有 $n$ 个整数，用空格分隔，第 $i$ 个整数 $T_i(130 \leq T_i \leq 230)$ 是第 $i$ 位同学的身高(厘米)。</p><p><strong>输出描述:</strong></p><p>输出一个整数，就是最少需要几位同学出列。</p><p><strong>输入输出样例:</strong></p><p><strong>示例:</strong> 1</p><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">8 186 186 150 200 160 130 197 220<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br></code></pre></td></tr></table></figure><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><p><strong>答案解析：</strong></p><p>要使得出列最少，那么就要留下最多的，我们想到了 $LIS$ ，但是 $LIS$ 只能处理单调序列最长，所以并不能直接用。</p><p>我们看到，这里是两头低，中间高的一种情况。</p><p>在这种情况下，最多的话那么就是最高的那个人的左侧加上右侧最高。</p><p>到这，我们发现。</p><p>在中间那个人左侧，从左到右做了一遍 $LIS$ 。</p><p>在那个人的右侧，从右到左的做了一遍 $LIS$ 。</p><p>至此，我们好像找了策略。</p><p>通过枚举中间那个人，然后看他左侧的 $LIS$ 和他右侧的$LIS$ 的值之和的大小，就能将这道题目解出。</p><p><strong>C++ 解题代码</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> dp1[<span class="hljs-number">105</span>],dp2[<span class="hljs-number">105</span>],a[<span class="hljs-number">105</span>],s[<span class="hljs-number">105</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        cin&gt;&gt;a[i];<br>        dp2[i]=<span class="hljs-number">1</span>;<br>        dp1[i]=<span class="hljs-number">1</span>;<br>    &#125;<span class="hljs-comment">//输入并赋初值</span><br><br>    <span class="hljs-comment">//预处理，从右往左LIS</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">1</span>;i--)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>;j&lt;=n;j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(a[i]&gt;a[j]&amp;&amp;dp2[i]&lt;=dp2[j]+<span class="hljs-number">1</span>)<br>            &#123;<br>                dp2[i]=dp2[j]+<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//预处理，从左往右LIS</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;i;j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(a[i]&gt;a[j]&amp;&amp;dp1[i]&lt;=dp1[j]+<span class="hljs-number">1</span>)<br>            &#123;<br>                dp1[i]=dp1[j]+<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">int</span> maxx=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        s[i]=dp2[i]+dp1[i]<span class="hljs-number">-1</span>;<br>        <span class="hljs-comment">//自己算了两次，所以-1</span><br><br><br>        <span class="hljs-keyword">if</span>(s[i]&gt;maxx)<br>        &#123;<br>            maxx=s[i];<br>        &#125;<br>    &#125;<br><br>    cout&lt;&lt;n-maxx;<span class="hljs-comment">//是求出列的人数</span><br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br><br>    <span class="hljs-comment"># 输入并赋初值</span><br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>().strip())<br><br>    t = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br>    dp1 = [<span class="hljs-number">1</span>] * n<br>    dp2 = [<span class="hljs-number">1</span>] * n<br><br>    <span class="hljs-comment"># 预处理，从左往右LIS</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i):<br>            <span class="hljs-keyword">if</span> t[i] &gt; t[j]:<br>                dp1[i] = <span class="hljs-built_in">max</span>(dp1[i], dp1[j] + <span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment"># 预处理，从右往左LIS</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, i, -<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> t[i] &gt; t[j]:<br>                dp2[i] = <span class="hljs-built_in">max</span>(dp2[i], dp2[j] + <span class="hljs-number">1</span>)<br><br><br>    maxx = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        maxx = <span class="hljs-built_in">max</span>(maxx, dp1[i] + dp2[i] - <span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># 自己算了两次，所以-1</span><br><br>    <span class="hljs-built_in">print</span>(n - maxx)<br><br><br><br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br><br>        <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span>[] dp1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span>[] dp2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            a[i] = in.nextInt();<br>            dp2[i]=<span class="hljs-number">1</span>;<br>            dp1[i]=<span class="hljs-number">1</span>;<br>        &#125;<span class="hljs-comment">//输入并赋初值</span><br><br><br>        <span class="hljs-comment">//预处理，从左往右LIS</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; i; j++) &#123;<br>                <span class="hljs-keyword">if</span> (a[i] &gt; a[j] &amp;&amp; dp1[j] + <span class="hljs-number">1</span> &gt; dp1[i]) &#123;<br>                    dp1[i] = dp1[j] + <span class="hljs-number">1</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//预处理，从右往左LIS</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>; j &gt; i; j--) &#123;<br>                <span class="hljs-keyword">if</span> (a[i] &gt; a[j] &amp;&amp; dp2[j] + <span class="hljs-number">1</span> &gt; dp2[i]) &#123;<br>                    dp2[i] = dp2[j] + <span class="hljs-number">1</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            maxx = Math.max(maxx, dp1[i] + dp2[i]-<span class="hljs-number">1</span>);<br>            <span class="hljs-comment">//自己算了两次，所以-1</span><br>        &#125;<br><br>        <span class="hljs-comment">// 是求出列的人数</span><br>        System.out.println(n - maxx );<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="最优包含"><a href="#最优包含" class="headerlink" title="最优包含"></a>最优包含</h4><p>题目链接：<a href="https://www.lanqiao.cn/problems/239/learning/">https://www.lanqiao.cn/problems/239/learning/</a></p><p><strong>题目描述:</strong> 我们称一个字符串 $S$ 包含字符串 $T$ 是指 $T$ 是 $S$ 的一个子序列，即可以从字符串 $S$ 中抽出若干个字符，它们按原来的顺序组合成一个新的字符串与 $T$ 完全一样。</p><p>给定两个字符串 $S$ 和 $T$，请问最少修改 $S$ 中的多少个字符，能使 $S$ 包含 $T$ ？</p><p>其中，$1 \leq |T| \leq |S| \leq 1000$。</p><p><strong>输入描述:</strong></p><p>输入两行，每行一个字符串。</p><p>第一行的字符串为 $S$，第二行的字符串为 $T$。</p><p>两个字符串均非空而且只包含大写英文字母。</p><p><strong>输出描述:</strong></p><p>输出一个整数，表示答案。</p><p><strong>输入输出样例:</strong></p><p><strong>示例:</strong></p><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">ABCDEABCD XAABZ<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure><p><strong>运行限制</strong></p><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><p><strong>答案解析：</strong></p><p>个题目是线性 <code>DP</code> 中比较经典的题目。</p><p>这个类型就做编辑距离，可以通过 <code>DFS</code> 解决，也可以通过 <code>DP</code> 解决。</p><p><code>DP</code> 的时间复杂度低。</p><p>我们先来讲一下，编辑距离。</p><p>编辑距离为两个字符串，$a$ 和 $b$ 通过多少次变换，使得 $a$ 变成 $b$。</p><p>我们可以做出 $3$ 种操作。</p><p>$1.$ 删除操作，将 $a[i]$ 从 $a$ 中移除 $2.$ 插入操作，在 $a[i]$ 后加上 $b[j]$ $3.$ 替换操作，将 $a[i]$ 修改为 $b[j]$</p><p>编辑距离的状态转移类似 LCS ，但有有很大的差别。</p><p>初始状态，$i&#x3D;j&#x3D;0$，都在字符串的开头。</p><p>然后开始判断 $a[i]&#x3D;?b[j]$</p><ul><li><p>如果相同，那么就不需要修改，所以$dp[i+1][j+1]&#x3D;dp[i][j]$</p><p>所以在$a[i-1]$等于$b[j-1]$时，$dp[i][j]$这个状态由$dp[i-1][j-1]$转移而来。</p><p>$dp[i][j]&#x3D;dp[i-1][j-1]$</p></li><li><p>如果不同，那就需要进行三种可能的操作</p></li></ul><ol><li><p>修改操作：</p><p>$a[i]$ 修改为 $b[j]$， 因为编辑了一次，所以$+1$</p><p>$dp[i+1][j+1]&#x3D;dp[i][j]+1$</p><p>所以在$a[i-1]$不等于$b[j-1]$时，$dp[i][j]$这个状态由$dp[i-1][j-1]$转移而来。</p><p>$dp[i][j]&#x3D;dp[i-1][j-1]$</p></li><li><p>删除操作，直接把 $a[i]$ 删除，此时转移到 $dp[i][j+1]$ ，因为 $a[i]$ 被删除，但是下一个字符到了 $a[i]$ 的位置，而对应比较的位置到了$b[j+1]$。</p><p>所以此时状态转移到了$dp[i][j+1]$</p><p>$dp[i][j+1]&#x3D;dp[i][j]+1$</p><p>因为编辑了一次，所以$+1$</p><p>所以在$a[i-1]$不等于$b[j-1]$时，$dp[i][j]$就有可能通过$dp[i-1][j]$转移而来。</p></li><li><p>插入操作，在$a[i]$后添加一个$b[j]$，那么此时$a[i+1]$和$b[j]$对应，因为加了一个字符就变成了$a[i+1]$,而且跟$b[j]$对应，那么下一个状态转移到了$dp[i+1][j]$</p><p>$dp[i+1][j]&#x3D;dp[i][j]+1$</p><p>此时状态转移到了 $dp[i+1][j]&#x3D;dp[i][j]+1$</p><p>因为编辑了一次，所以$+1$</p><p>所以在$a[i-1]$不等于$b[j-1]$时，$dp[i][j]$就有可能通过$dp[i][j-1]$转移而来。</p></li></ol><p>那么不同时，我们选择他们的最小值即可。</p><p>由此我们可以写出模板：</p><p><strong>C++ 解题代码：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF 99999999</span><br>string s, t;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1010</span>][<span class="hljs-number">1010</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) dp[<span class="hljs-number">0</span>][j] = INF;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; s &gt;&gt; t;<br><br>    <span class="hljs-built_in">init</span>();<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) &#123;<br>            <span class="hljs-keyword">if</span> (s[i - <span class="hljs-number">1</span>] == t[j - <span class="hljs-number">1</span>]) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">else</span><br>                dp[i][j] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>],<span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>])) + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; dp[s.<span class="hljs-built_in">size</span>()][t.<span class="hljs-built_in">size</span>()];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">s,t</span>):<br><br>    dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>):<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>):<br>        dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">999999</span><br><br>    <span class="hljs-keyword">return</span> dp<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    s = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br>    t = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br><br>    dp=init(s,t)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t)):<br>            <span class="hljs-keyword">if</span> s[i] == t[j]:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j]<br>            <span class="hljs-keyword">else</span>:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(dp[i][j] + <span class="hljs-number">1</span>, dp[i][j + <span class="hljs-number">1</span>])<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>( dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] ,dp[j+<span class="hljs-number">1</span>][i]+<span class="hljs-number">1</span>)<br><br>    <span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br><br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>   <span class="hljs-type">int</span> dp[][];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n,<span class="hljs-type">int</span> m)</span>&#123;<br><br>        dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>][m+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">99999</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> in.nextLine();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> in.nextLine();<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> t.length();<br><br>        init(n,m);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                <span class="hljs-keyword">if</span> (s.charAt(i - <span class="hljs-number">1</span>) == t.charAt(j - <span class="hljs-number">1</span>)) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">else</span>  dp[i][j] = min(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>],min(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>])) + <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br><br>        System.out.println(dp[n][m]);<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>这道题目也比较简单，由于是包含关系，并不是相等关系，所以当 <code>S</code> 多余 <code>T</code> 是，不需要进行删除操作。</p><p>所以这个题目不考虑删除的那个状态转移即可。</p><p><strong>C++ 解题代码</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF 99999999</span><br>string s, t;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1010</span>][<span class="hljs-number">1010</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) dp[<span class="hljs-number">0</span>][j] = INF;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; s &gt;&gt; t;<br><br>    <span class="hljs-built_in">init</span>();<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= s.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= t.<span class="hljs-built_in">size</span>(); j++) &#123;<br>            <span class="hljs-keyword">if</span> (s[i - <span class="hljs-number">1</span>] == t[j - <span class="hljs-number">1</span>]) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">else</span> dp[i][j] = <span class="hljs-built_in">min</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>, dp[i - <span class="hljs-number">1</span>][j]);<br><br>        &#125;<br>    &#125;<br>    cout &lt;&lt; dp[s.<span class="hljs-built_in">size</span>()][t.<span class="hljs-built_in">size</span>()];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">s,t</span>):<br><br>    dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>):<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(t) + <span class="hljs-number">1</span>):<br>        dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">999999</span><br><br>    <span class="hljs-keyword">return</span> dp<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    s = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br>    t = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br><br>    dp=init(s,t)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t)):<br>            <span class="hljs-keyword">if</span> s[i] == t[j]:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = dp[i][j]<br>            <span class="hljs-keyword">else</span>:<br>                dp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(dp[i][j] + <span class="hljs-number">1</span>, dp[i][j + <span class="hljs-number">1</span>])<br><br>    <span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br><br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>   <span class="hljs-type">int</span> dp[][];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n,<span class="hljs-type">int</span> m)</span>&#123;<br><br>        dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>][m+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; i++) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">99999</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> in.nextLine();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> in.nextLine();<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> t.length();<br><br>        init(n,m);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                <span class="hljs-keyword">if</span> (s.charAt(i - <span class="hljs-number">1</span>) == t.charAt(j - <span class="hljs-number">1</span>)) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">else</span> dp[i][j] = Math.min(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>, dp[i - <span class="hljs-number">1</span>][j]);<br><br>            &#125;<br>        &#125;<br><br>        System.out.println(dp[n][m]);<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>动态规划的学习是痛苦的，也是快乐，而且是非常重要的。</p><p>希望大家努力克服，动态规划都学会了还有什么学不会呢。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>动态规划</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>贪心算法</title>
    <link href="/2024/03/11/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/"/>
    <url>/2024/03/11/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="贪心算法"><a href="#贪心算法" class="headerlink" title="贪心算法"></a>贪心算法</h2><p>贪心算法（Greedy algorithm），又称贪婪算法。是一种在每一步选择中都采取在当前状态下最好或最优（即最有利）的选择，从而使得问题得到全局最优解。</p><p>贪心的算法的设计就是要遵循某种规则，不断地选取当前最优解的算法设计方法。这节实验将会通过多个问题的来讲解贪心算法。</p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>贪心算法的基本概念</li><li>贪心算法的适用范围</li><li>贪心算法的设计步骤</li><li>贪心算法的题目讲解</li></ul><h2 id="贪心算法基本概念"><a href="#贪心算法基本概念" class="headerlink" title="贪心算法基本概念"></a>贪心算法基本概念</h2><p>贪心算法与枚举法的不同之处在于每个子问题都选择最优的情况，然后向下继续进行，且不能回溯。枚举法是将所有情况都考虑然后选出最优的情况。</p><p>贪心算法，在解决问题时，不从整体考虑，而是采用一种一眼看到局部最优解的选择方式。并且，贪心算法没有固定的模板可以遵循，每个题目都有不同的贪心策略，所以算法设计的关键在于贪心策略的选择。</p><p>贪心算法有一个必须注意的事情。贪心算法对于问题的要求是，所有的选择必须是无后效性的，<strong>即当前的选择不能影响后续选择对于结果的影响</strong>。</p><p>贪心算法主要适用于最优化问题，例如：最小生成树问题。有时候贪心算法并不能得到最优答案，但是能得到精确答案的近似结果。有时可以辅助其他算法得到不那么精确的结果。</p><h3 id="适用范围"><a href="#适用范围" class="headerlink" title="适用范围"></a>适用范围</h3><p><strong>符合贪心策略：</strong></p><p>所谓贪心选择性质是指所求问题的整体最优解可以通过一系列局部最优的选择，即贪心选择来达到。这是贪心算法可行的第一个基本要素，也是贪心算法与动态规划算法的主要区别。</p><p>贪心选择性质就是指，该问题的每一步选择都在选择最优的情况下能够导致最终问题的答案也是最优。</p><p>或者说是无后效性，如果该问题的每一步选择都对后续的选择没有影响，就可以应用贪心算法。</p><h3 id="贪心算法的设计步骤"><a href="#贪心算法的设计步骤" class="headerlink" title="贪心算法的设计步骤"></a>贪心算法的设计步骤</h3><p>按照定义设计：</p><ol><li>证明原问题的最优解之一可以由贪心选择得到。</li><li>将最优化问题转化为这样一个问题，即先做出选择，再解决剩下的一个子问题。</li><li>对每一子问题一一求解，得到子问题的局部最优解；</li><li>将子问题的解局部最优解合成原问题的一个解。</li></ol><p><strong>伪代码：</strong></p><p>关于 Question Q：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">while</span>(Q.hasNextStep)<br>&#123;<br>    Select(Q.nowBestSelect);<br>    Q.NextStep<br>&#125;<br><br>Select(Q.nowBestSelect);<br></code></pre></td></tr></table></figure><h3 id="贪心相关题目讲解"><a href="#贪心相关题目讲解" class="headerlink" title="贪心相关题目讲解"></a>贪心相关题目讲解</h3><p>我们在正式将题目前，聊一个大家都懂的常见的知识，也是一个常见的题目。</p><h4 id="找零问题"><a href="#找零问题" class="headerlink" title="找零问题"></a>找零问题</h4><p>题目如下：</p><p>假设商店老板需要找零 $n$ 元钱。</p><p>钱币的面额有：$100$ 元、$50$ 元、$20$ 元、$5$ 元、$1$ 元、如何找零使得所需钱币的数量最少？</p><p>注意：$n$ 可能为 $0$，也能为几百元（别问，问就是来着里微信提现来了）</p><p><strong>输入:</strong></p><p>输入解法:</p><p>在第一行给出测试例个数 $N$。</p><p>代表需要找零的钱数。</p><p>输入样例：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">365<br></code></pre></td></tr></table></figure><p><strong>输出：</strong></p><p>输出解法</p><p>有 $5$ 行输出数据，每一行输出数据输出找零的金额与数量，详情看样例。</p><p>输出样例：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">100:3<br>50:1<br>20:0<br>5:3<br>1:0<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s<br>最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>关于这个题，如果是正常人都知道从大的钱开始找钱。这就是一种贪心的思想，将大问题转化为一个个小的子问题，每次选择最大的钱数使得总量最小。</p><p>其实再生活中贪心思想的例子还有很多，像是“自助餐“这种的都是贪心算法的印证。贪心算法其实离我们很近，掌握不会很困难的。</p><p>我们先看一下上一道题目的代码题解是什么。</p><p><strong>答案解析：</strong></p><p>C++ 解法：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//面值</span><br><span class="hljs-type">int</span> t[<span class="hljs-number">5</span>]=&#123;<span class="hljs-number">100</span>, <span class="hljs-number">50</span>, <span class="hljs-number">20</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>&#125;;<br><br><span class="hljs-comment">//张数</span><br><span class="hljs-type">int</span> m[<span class="hljs-number">5</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">change</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;i++)<br>    &#123;<br>        m[i]=n/t[i];<br><br>        n=n%t[i];<br><br>        <span class="hljs-comment">//print(&quot;%d&quot;,n);</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> N;<br><br>    cin&gt;&gt;N;<br><br>    <span class="hljs-built_in">change</span>(N);<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d:%d\n&quot;</span>,t[i],m[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python">t = [<span class="hljs-number">100</span>, <span class="hljs-number">50</span>, <span class="hljs-number">20</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 钱的面值</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">change</span>(<span class="hljs-params">t, n</span>):<br>  <span class="hljs-comment"># m是张数</span><br>  m = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(t))]<br>  <span class="hljs-comment"># print(m) #[0, 0, 0, 0]</span><br>  <span class="hljs-keyword">for</span> i, money <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(t):<br>      <span class="hljs-comment"># print(i) #0 1 2 3</span><br>      <span class="hljs-comment"># print(money)</span><br>      <span class="hljs-comment"># i是当前的编号  举个例子 n是376 money是100</span><br>      m[i] = n // money  <span class="hljs-comment"># 商3</span><br>      <span class="hljs-comment"># n还剩多少取余</span><br>      n = n % money  <span class="hljs-comment"># 取余76 76不够100的</span><br>      <span class="hljs-comment"># print(m)</span><br>      <span class="hljs-comment"># print(n)</span><br>  <span class="hljs-keyword">return</span> m<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>  N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>  m = change(t,N)<br><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(m)):<br>      <span class="hljs-built_in">print</span>(t[i], end=<span class="hljs-string">&#x27;:&#x27;</span>)<br><br>      <span class="hljs-built_in">print</span>(m[i])<br></code></pre></td></tr></table></figure><p><strong>Java 解法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Integer.max;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br><br>  <span class="hljs-comment">//面值</span><br>  <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> t[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">100</span>, <span class="hljs-number">50</span>, <span class="hljs-number">20</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>&#125;;<br><br>  <span class="hljs-comment">//张数</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> m[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">5</span>];<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">change</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>          m[i] = n / t[i];<br><br>          n = n % t[i];<br><br>          <span class="hljs-comment">//print(&quot;%d&quot;,n);</span><br>      &#125;<br><br>  &#125;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">int</span> N;<br><br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>      N = in.nextInt();<br><br>      change(N);<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>          System.out.println(String.format(<span class="hljs-string">&quot;%d:%d&quot;</span>, t[i], m[i]));<br>      &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="蓝桥大学的小-B-同学宿舍"><a href="#蓝桥大学的小-B-同学宿舍" class="headerlink" title="蓝桥大学的小 B 同学宿舍"></a>蓝桥大学的小 B 同学宿舍</h3><p><strong>题目如下:</strong></p><p>小 <code>B</code> 的宿舍楼沿着走廊南北向的两边各有 $200$ 个房间。</p><p>如图所示：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">[房间1][房间3][房间5][房间7][房间9 ]...[房间399]<br>----------------------------------------------<br>                   走廊<br>----------------------------------------------<br>[房间2][房间4][房间6][房间8][房间10]...[房间400]<br></code></pre></td></tr></table></figure><p>最近，由于转专业和专业分流的原因，宿舍将迎来新的调整，以便组成新的班级后方便管理。</p><p>但是由于走廊狭窄，走廊里只能通过一个搬运的物品（可以同向也可以反向），因此必须指定高效的搬运计划。</p><p>老师给了每位同学下达了以下要求，让同学们体现收拾好行李，然后给每位同学 $10$ 分钟的时间搬运。</p><p>当房间 $i$ 搬运行李到 $j$ 时，$i$ 与 $j$ 之间的走廊都会被占用。所以，$10$ 分钟之内同一段走廊最多$1$个人同时搬运，不重叠的走廊也可以同时搬运。</p><p>小 $B$ 的老师是个数学老师，经过运筹学一通计算他得到了最优的搬运计划。</p><p>虽然计划不唯一，但是最优值唯一，请问这个最短时间是多少？</p><p><strong>输入:</strong></p><p>输入解法:</p><p>输入数据有 $T$ 组测试例，在第一行给出测试例个数 $T$。</p><p>每个测试例的第一行是一个整数 $N$（$1≤N≤200$)，表示要搬运行李的人数。接下来 $N$ 行，每行两个正整数 $s$ 和 $t$，表示一个人，将行李是从房间号码 $s$ 移到到房间号码 $t$。</p><p>输入样例:</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br>4<br>10 20<br>30 40<br>50 60<br>70 80<br>2<br>1 3<br>2 200<br>3<br>10 100<br>20 80<br>30 50<br></code></pre></td></tr></table></figure><p><strong>输出：</strong></p><p>输出解法</p><p>每组输入都有一行输出数据，为一整数 $T$，表示完成任务所花费的最小时间。</p><p>输出样例:</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">10<br>20<br>30<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>不难发现，相对应的两个房间其实是占用一段走廊的，我们可以将将房间号映射为走廊号，然后再考虑上面的解析。</p><p>该题属于贪心算法，因为它尽可能使搬运办公桌同时进行，以便使单独安排的搬运次数最少。这样用的时间最少，即所用最少时间为不能同时搬运桌子的次数，即某一段走廊使用次数最多（贪心标准）即为即为最少搬运时间。 <strong>答案解析：</strong></p><p>C++ 解法：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> move[<span class="hljs-number">200</span>];<br><span class="hljs-comment">//搬运次数</span><br>    <span class="hljs-type">int</span> N;<br>    <span class="hljs-type">int</span> T;<br>    cin&gt;&gt;T;<br>    <span class="hljs-keyword">while</span>(T--)<br>    &#123;<br>        <span class="hljs-comment">//每次搬运的起点和终点</span><br>        <span class="hljs-type">int</span> from, to;<br>        <span class="hljs-type">int</span> maxAns=<span class="hljs-number">0</span>;<br><br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;N);<br>        <span class="hljs-built_in">memset</span>(move, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(move));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;from, &amp;to);<br><span class="hljs-comment">//将房间号映射为走廊号</span><br>            from = (from - <span class="hljs-number">1</span>)/<span class="hljs-number">2</span>;<br>            to = (to - <span class="hljs-number">1</span>)/<span class="hljs-number">2</span>;<br><span class="hljs-comment">//确保from&lt;to，C++使用：swap(from, to)</span><br>            <span class="hljs-keyword">if</span>(from &gt; to)<br>            &#123;<br>                <span class="hljs-type">int</span> temp = from;<br>                from = to;<br>                to = temp;<br>            &#125;<br><span class="hljs-comment">//统计占用走廊情况，并统计最大值</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = from; j &lt;= to; j++)<br>            &#123;<br>                move[j]++;<br>                maxAns=<span class="hljs-built_in">max</span>(maxAns,move[j]);<br>            &#125;<br>        &#125;<br>        cout&lt;&lt;maxAns*<span class="hljs-number">10</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#include &lt;cstdio&gt;</span><br><span class="hljs-comment">#include &lt;iostream&gt;</span><br><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br><br><span class="hljs-built_in">int</span> main()<br>&#123;<br>    <span class="hljs-built_in">int</span> move[<span class="hljs-number">200</span>];<br>//搬运次数<br>    <span class="hljs-built_in">int</span> N;<br>    <span class="hljs-built_in">int</span> T;<br>    cin&gt;&gt;T;<br>    <span class="hljs-keyword">while</span>(T--)<br>    &#123;<br>        //每次搬运的起点和终点<br>        <span class="hljs-built_in">int</span> <span class="hljs-keyword">from</span>, to;<br>        <span class="hljs-built_in">int</span> maxAns=<span class="hljs-number">0</span>;<br><br>        scanf(<span class="hljs-string">&quot;%d&quot;</span>, &amp;N);<br>        memset(move, <span class="hljs-number">0</span>, sizeof(move));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        &#123;<br>            scanf(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;<span class="hljs-keyword">from</span>, &amp;to);<br>//将房间号映射为走廊号<br>            <span class="hljs-keyword">from</span> = (<span class="hljs-keyword">from</span> - <span class="hljs-number">1</span>)/<span class="hljs-number">2</span>;<br>            to = (to - <span class="hljs-number">1</span>)/<span class="hljs-number">2</span>;<br>//确保<span class="hljs-keyword">from</span>&lt;to，C++使用：swap(<span class="hljs-keyword">from</span>, to)<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">from</span> &gt; to)<br>            &#123;<br>                <span class="hljs-built_in">int</span> temp = <span class="hljs-keyword">from</span>;<br>                <span class="hljs-keyword">from</span> = to;<br>                to = temp;<br>            &#125;<br>//统计占用走廊情况，并统计最大值<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j = <span class="hljs-keyword">from</span>; j &lt;= to; j++)<br>            &#123;<br>                move[j]++;<br>                maxAns=<span class="hljs-built_in">max</span>(maxAns,move[j]);<br>            &#125;<br>        &#125;<br>        cout&lt;&lt;maxAns*<span class="hljs-number">10</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Java 解法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Integer.max;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><span class="hljs-comment">//搬运次数</span><br>      <span class="hljs-type">int</span> N;<br>      <span class="hljs-type">int</span> T;<br>      T = in.nextInt();<br>      <span class="hljs-keyword">while</span> (T &gt; <span class="hljs-number">0</span>) &#123;<br>          T--;<br><br>          <span class="hljs-comment">//每次搬运的起点和终点</span><br>          <span class="hljs-type">int</span> from, to;<br>          <span class="hljs-type">int</span> <span class="hljs-variable">maxAns</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>          N = in.nextInt();<br>          <span class="hljs-type">int</span>[] move = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">205</span>];<br><br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>              from=in.nextInt();<br>              to=in.nextInt();<br><span class="hljs-comment">//将房间号映射为走廊号</span><br>              from = (from - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>              to = (to - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br><span class="hljs-comment">//确保from&lt;to，C++使用：swap(from, to)</span><br>              <span class="hljs-keyword">if</span> (from &gt; to) &#123;<br>                  <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> from;<br>                  from = to;<br>                  to = temp;<br>              &#125;<br><span class="hljs-comment">//统计占用走廊情况，并统计最大值</span><br>              <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> from; j &lt;= to; j++) &#123;<br>                  move[j]++;<br>                  maxAns = max(maxAns, move[j]);<br>              &#125;<br>          &#125;<br>          System.out.println( maxAns * <span class="hljs-number">10</span>);<br>      &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="可拆分背包问题之贪心的自助餐"><a href="#可拆分背包问题之贪心的自助餐" class="headerlink" title="可拆分背包问题之贪心的自助餐"></a>可拆分背包问题之贪心的自助餐</h3><p><strong>题目如下:</strong></p><p>小 $B$ 同学呢，想去吃自助餐，但是他是那种比较节俭的的人，既不想浪费食物，又想尽可能吃的贵一点，他于是私下里做了调查。</p><p>小蓝餐厅的自助餐有 $n$ 种食材，每种食材都有它的价格。</p><p>而且也能估计出每一份的重量，所以他列了一个表格。</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs txt">红烧牛肉  30元    300g<br>油闷大虾  8元     5g<br>四喜丸子  4元     8g<br>三文鱼    5元     3g<br>排骨      18元    200g<br>麻辣兔头  20元    120g<br>高汤海参  40元    70g<br>扇贝粉丝  8元     32g<br>牛排      79元    240g<br>...<br></code></pre></td></tr></table></figure><p>现在小 $B$ 想知道在他到底最多吃多少钱的菜品。</p><p>假设自助餐厅的菜品供应同样的菜品每个人只能取一份。</p><p>小B的饭量假设为 $C$，单位为 $g$。</p><p>现在请你设计一个程序帮助小 $B$ 计算他的最多吃了多少钱。</p><p><strong>输入:</strong></p><p>输入解法</p><p>第一行输入 $n,C（0&lt;&#x3D;n&lt;&#x3D;1000）（0&lt;&#x3D;C&lt;&#x3D;10000）$</p><p>其中 $n$ 为菜品数量，$C$ 为小 $B$ 的肚子容量。</p><p>第二行输入两个数 $V，W$</p><p>第一个数 $V[i]$ 是第 $i$ 个菜品的价值$（0&lt;&#x3D;v[i]&lt;&#x3D;10000）$</p><p>第二个数 $V[i]$ 是第 $i$ 个菜品的质量$（0&lt;&#x3D;w[i]&lt;&#x3D;10000）$</p><p>输入样例:</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs txt">20 1000<br>1 22<br>2 43<br>123 214<br>12 2<br>123 432<br>21 223<br>22 16<br>77 49<br>34 78<br>34 9<br>43 677<br>21 34<br>23 23<br>12 56<br>332 56<br>21 99<br>123 545<br>389 33<br>12 999<br>23 88<br></code></pre></td></tr></table></figure><p><strong>输出：</strong></p><p>输出一行数据，表示最大的价值，保留三位小数。</p><p>输出样例：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1204.114<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>可拆分背包的一般解法为：</p><p>这里有 n 种不同值 $v[i]$ 和权重 $w[i]$ 的对象（如果选择该对象的 $w[i]$ 可以获得值 $v[i]$）。</p><p>你有一个容器来挑选它们。你可以根据自己的需要把它们分成任意大小的碎片。可以拾取的对象的最大重量给定为 $w$。请计算您能得到的最大值。</p><p>就像是这个题目，要想吃回本就要捡着贵的吃，但是贵只是一方面，人会饱，所以用价格除以质量所获的价格商才是贪心准则，应按照价格商优先进行选取。</p><p>于是这个题，就要用的我们之前学的知识了。这里因为要整体排序，所以要先创建一个类，然后自定义 <code>cmp</code> 函数，在使用 <code>sort</code> 排序。</p><p><strong>答案解析：</strong></p><p>C++ 解法：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//需要一个结构体，通过性价比，能够查找到重量和价值。</span><br><br><span class="hljs-comment">//做一个排序，需要将性价比由高到底排序，排序的过程中重量和（价值）要对应上</span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Food</span><br>&#123;<br>    <span class="hljs-type">double</span> w;<br>    <span class="hljs-type">double</span> v;<br>    <span class="hljs-type">double</span> aver;<br><br>&#125;;<br><span class="hljs-comment">//C++一般用 struct，因为默认都是public的</span><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(Food a, Food b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a.aver &gt; b.aver;<br>    <span class="hljs-comment">//助记大于号就是从大到小排序，小于号就是从小到大排序</span><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Food foods[<span class="hljs-number">1009</span>];<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-type">double</span> C;<br>    <span class="hljs-type">double</span> Value = <span class="hljs-number">0</span>;<br>    cin &gt;&gt; n &gt;&gt; C;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        cin &gt;&gt; foods[i].v&gt;&gt;foods[i].w;<br>        <span class="hljs-comment">//求性价比</span><br>        foods[i].aver = foods[i].v / foods[i].w;<br>        <span class="hljs-comment">//cout &lt;&lt; foods[i].aver &lt;&lt; endl;</span><br><br>    &#125;<br><br><br>    <span class="hljs-comment">//性价比排序</span><br>    <span class="hljs-built_in">sort</span>(foods, foods + n, cmp);<br><br>    <span class="hljs-comment">//当背包（肚子）能装下所有物品（菜）时，直接输出所有的物品（菜品）价值之和</span><br>    <span class="hljs-comment">//</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        sum += foods[i].w;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (sum &lt;= C)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)<br>            Value += foods[j].v;<br>        <span class="hljs-comment">//V = floor(V * 1000.0) / 1000.0;</span><br>        cout &lt;&lt; <span class="hljs-built_in">setiosflags</span>(ios::fixed) &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">3</span>) &lt;&lt;Value &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//当背包（肚子）不能装下所有物品时应该由性价比的顺序，选择装入的物品</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (foods[i].w &lt;= C)<br>        &#123;<br>            Value =Value + foods[i].v;<br>            C = C - foods[i].w;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-comment">//直接将剩余的C加入即可</span><br>            Value =Value + C * foods[i].aver;<br>            C = <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (C == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-comment">//V = floor(V * 1000.0) / 1000.0;</span><br>    cout &lt;&lt; <span class="hljs-built_in">setiosflags</span>(ios::fixed) &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">3</span>) &lt;&lt;Value &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Food</span>:<br><br>   <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, w, v, aver</span>):<br>       self.w = w<br>       self.v = v<br>       self.aver = aver<br><br>   <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):<br>       <span class="hljs-comment"># print(11)</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-built_in">repr</span>((self.w, self.v, self.aver))<br><br><span class="hljs-comment"># def cmp(foodA: Food, foodB: Food):</span><br><span class="hljs-comment">#     if foodA.aver &gt;= foodB.aver:</span><br><span class="hljs-comment">#         return True</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#     else:</span><br><span class="hljs-comment">#         return False</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 当然 python 的 sort 是不需要写 cmp 函数的，这里我们使用 sorted 就不用 cmp 函数了</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>   foods = []<br>   C = <span class="hljs-number">0.0</span><br>   Value = <span class="hljs-number">0.0</span><br>   n, C = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>   <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>       food = Food(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>       food.v, food.w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>       food.aver = food.v / food.w<br>       foods.append(food)<br>       <span class="hljs-comment"># print(food.aver)</span><br>       <span class="hljs-comment"># print(foods)</span><br>   <span class="hljs-comment"># 性价比排序</span><br>   foods.sort(key=<span class="hljs-keyword">lambda</span> f: f.aver, reverse=<span class="hljs-literal">True</span>)<br>   <span class="hljs-comment"># for i in range(n):</span><br>   <span class="hljs-comment">#     print(foods[i].aver)</span><br>   <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span><br>   <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>       <span class="hljs-built_in">sum</span>+= foods[i].w<br>   <span class="hljs-comment"># 当背包（肚子）能装下所有物品（菜）时，直接输出所有的物品（菜品）价值之和</span><br>   <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>&lt;=C :<br>       <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>           Value+=foods[i].v;<br>       <span class="hljs-built_in">print</span>(Value)<br>   <span class="hljs-comment"># 当背包（肚子）不能装下所有物品时应该由性价比的顺序，选择装入的物品</span><br>   <span class="hljs-keyword">else</span>:<br>       <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br><br>           <span class="hljs-keyword">if</span> foods[i].w&lt;=C:<br>               Value=Value+foods[i].v<br>               C=C-foods[i].w<br>           <span class="hljs-comment">#     直接将剩余的C加入即可</span><br>           <span class="hljs-keyword">else</span>:<br>               Value+=C*foods[i].aver<br>               C=<span class="hljs-number">0</span><br><br>           <span class="hljs-keyword">if</span> C==<span class="hljs-number">0</span>:<br>               <span class="hljs-keyword">break</span><br><br>       <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%.3f&quot;</span> % Value)<br></code></pre></td></tr></table></figure><p><strong>Java 解法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Food</span>:<br><br>   def <span class="hljs-title function_">__init__</span><span class="hljs-params">(self, w, v, aver)</span>:<br>       self.w = w<br>       self.v = v<br>       self.aver = aver<br><br>   def <span class="hljs-title function_">__repr__</span><span class="hljs-params">(self)</span>:<br>       # print(<span class="hljs-number">11</span>)<br>       <span class="hljs-keyword">return</span> repr((self.w, self.v, self.aver))<br><br># def <span class="hljs-title function_">cmp</span><span class="hljs-params">(foodA: Food, foodB: Food)</span>:<br>#     <span class="hljs-keyword">if</span> foodA.aver &gt;= foodB.aver:<br>#         <span class="hljs-keyword">return</span> True<br>#<br>#     <span class="hljs-keyword">else</span>:<br>#         <span class="hljs-keyword">return</span> False<br>#<br>#<br># 当然 python 的 sort 是不需要写 cmp 函数的，这里我们使用 sorted 就不用 cmp 函数了<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>   foods = []<br>   C = <span class="hljs-number">0.0</span><br>   Value = <span class="hljs-number">0.0</span><br>   n, C = map(<span class="hljs-type">int</span>, input().split())<br>   <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(n)</span>:<br>       food = Food(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>       food.v, food.w = map(<span class="hljs-type">int</span>, input().split())<br>       food.aver = food.v / food.w<br>       foods.append(food)<br>       # print(food.aver)<br>       # print(foods)<br>   # 性价比排序<br>   foods.sort(key=lambda f: f.aver, reverse=True)<br>   # <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(n)</span>:<br>   #     print(foods[i].aver)<br>   sum=<span class="hljs-number">0</span><br>   <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(n)</span>:<br>       sum+= foods[i].w<br>   # 当背包（肚子）能装下所有物品（菜）时，直接输出所有的物品（菜品）价值之和<br>   <span class="hljs-keyword">if</span> sum&lt;=C :<br>       <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(n)</span>:<br>           Value+=foods[i].v;<br>       print(Value)<br>   # 当背包（肚子）不能装下所有物品时应该由性价比的顺序，选择装入的物品<br>   <span class="hljs-keyword">else</span>:<br>       <span class="hljs-keyword">for</span> i in <span class="hljs-title function_">range</span><span class="hljs-params">(n)</span>:<br><br>           <span class="hljs-keyword">if</span> foods[i].w&lt;=C:<br>               Value=Value+foods[i].v<br>               C=C-foods[i].w<br>           #     直接将剩余的C加入即可<br>           <span class="hljs-keyword">else</span>:<br>               Value+=C*foods[i].aver<br>               C=<span class="hljs-number">0</span><br><br>           <span class="hljs-keyword">if</span> C==<span class="hljs-number">0</span>:<br>               <span class="hljs-keyword">break</span><br><br>       <span class="hljs-title function_">print</span><span class="hljs-params">(<span class="hljs-string">&quot;%.3f&quot;</span> % Value)</span><br></code></pre></td></tr></table></figure><h4 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h4><p>贪心算法的最主要的特征就是无后效性，就像是自助餐那个题目，如果说吃了某一样食物，就不能吃另一个食物了，那么这就有了后效性，那就不能使用贪心算法进行解决问题了。</p><p>本节课举了三个贪心算法的例子进行讲解，贪心算法是算法竞赛中最入门的算法。没接触过感觉很深奥，接触过了也就那样，简单的贪心伸伸手就可以写出来，其实非常简单，大家也不要过分的担心。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>贪心算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>二分算法</title>
    <link href="/2024/03/11/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/"/>
    <url>/2024/03/11/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="二分查找算法"><a href="#二分查找算法" class="headerlink" title="二分查找算法"></a>二分查找算法</h2><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>二分查找原理讲解</li><li>在单调递增序列 <code>a</code> 中查找 <code>x</code> 或 <code>x</code> 的后继</li><li>在单调递增序列 <code>a</code> 中查找 <code>x</code> 或 <code>x</code> 的前驱</li></ul><h2 id="二分查找算法讲解"><a href="#二分查找算法讲解" class="headerlink" title="二分查找算法讲解"></a>二分查找算法讲解</h2><p>枚举查找即顺序查找，实现原理是逐个比较数组 <code>a[0:n-1]</code> 中的元素，直到找到元素 <code>x</code> 或搜索整个数组后确定 <code>x</code> 不在其中。最坏情况下需要比较 <code>N</code> 次，时间复杂度是 <code>O(n)</code>，属于线性阶算法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;  <br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, right = nums.length;  <br>        <span class="hljs-keyword">while</span> (left &lt; right) &#123;  <br>            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>); <span class="hljs-comment">// 无符号右移等同于除以2取整  </span><br>            <span class="hljs-keyword">if</span> (nums[mid] == target)  <br>                <span class="hljs-keyword">return</span> mid;  <br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[mid] &lt; target)  <br>                left = mid + <span class="hljs-number">1</span>;  <br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[mid] &gt; target)  <br>                right = mid - <span class="hljs-number">1</span>; <span class="hljs-comment">// 修改这里，应该是 mid - 1  </span><br>        &#125;  <br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>; <span class="hljs-comment">// 如果循环结束还没有找到，说明目标值不存在于数组中  </span><br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p><strong>折半查找的基本思想：</strong></p><p>在有序表中（<code>low, high, low&lt;=high</code>），取中间记录即 <code>a[(high+low)/2]</code> 作为比较对象。</p><ul><li>若给定值与中间记录的关键码相等，则查找成功。</li><li>若给定值小于中间记录的关键码，则在中间记录的左半区继续查找。</li><li>若给定值大于中间记录的关键码，则在中间记录的右半区继续查找。</li></ul><p>不断重复上述过程，直到查找成功或所查找的区域无记录，查找失败。</p><p><strong>二分查找的特征：</strong></p><ol><li>答案具有单调性。</li><li>二分答案的问题往往有固定的问法，例如：令最大值最小（最小值最大），求满足条件的最大（小）值等。</li></ol><p><strong>折半查找一般过程：</strong></p><p><img src="/./../images/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/83f052e54f7e7907738ba7730a9b3297-0.png" alt="图片描述"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Step 1:<br><br>假设存在一个有序数组：<br>下标[ 0   1   2   3   4   5   6   7   8    9    10   11   12 ]<br>数据[ 7   14  18  21  23  29  31  35   38   42   46   49  52 ]<br>      ↑                                                   ↑<br>    low=0                                              high=12<br><br>                            mid=(low+high)/2<br>                            mid=(0+12)/2<br>                            mid=6<br>                            [mid]=31 &gt; 14，所以选择左半部分<br><br>操作：<br>    此时令low不变，high=mid-1=5<br><br>Step 2:<br><br>下标[ 0   1   2   3   4   5   6   7   8    9    10   11   12 ]<br>数据[ 7   14  18  21  23  29  31  35   38   42   46   49  52 ]<br>      ↑                   ↑<br>   low=0                 high=5<br><br>            mid=(low+high)/2<br>            mid=(0+6)/2<br>            mid=3<br>            [mid]=21 &gt; 14，所以选择左半部分<br><br>操作：<br>    此时令low不变，high=mid-1=2<br><br>Step 3:<br><br>下标[ 0   1   2   3   4   5   6   7   8    9    10   11   12 ]<br>数据[ 7   14  18  21  23  29  31  35   38   42   46   49  52 ]<br>      ↑       ↑<br>   low=0    high=2<br><br>            mid=(low+high)/2<br>            mid=(0+2)/2<br>            mid=1<br>            [mid]=14 = 14  找到答案<br><br>操作：<br>    返回下标<br></code></pre></td></tr></table></figure><p>这个文本看起来更加清晰，修正了一些不规范的表达。</p><h3 id="整数二分法常用算法模板"><a href="#整数二分法常用算法模板" class="headerlink" title="整数二分法常用算法模板"></a>整数二分法常用算法模板</h3><h4 id="C-语言描述"><a href="#C-语言描述" class="headerlink" title="C++ 语言描述"></a>C++ 语言描述</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// 在单调递增序列a中查找&gt;=x的数中最小的一个（即x或x的后继）</span><br><span class="hljs-keyword">while</span> (low &lt; high)<br>&#123;<br>    <span class="hljs-type">int</span> mid = (low + high) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (a[mid] &gt;= x)<br>        high = mid;<br><br>    <span class="hljs-keyword">else</span><br>        low = mid + <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 在单调递增序列a中查找&lt;=x的数中最大的一个（即x或x的前驱）</span><br><span class="hljs-keyword">while</span> (low &lt; high)<br>&#123;<br>    <span class="hljs-type">int</span> mid = (low + high + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br><br>    <span class="hljs-keyword">if</span> (a[mid] &lt;= x)<br>        low = mid;<br><br>    <span class="hljs-keyword">else</span><br>        high = mid - <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 语言描述</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#在单调递增序列a中查找&gt;=x的数中最小的一个（即x或x的后继）</span><br><span class="hljs-keyword">while</span> low&lt;high:<br><br>  mid=(low+high)/<span class="hljs-number">2</span><br><br>  <span class="hljs-keyword">if</span>(a[mid]&gt;=x):<br>      high=mid<br><br>  <span class="hljs-keyword">else</span>:<br>      low=mid+<span class="hljs-number">1</span><br><br><span class="hljs-comment">#在单调递增序列a中查找&lt;=x的数中最大的一个（即x或x的前驱）</span><br><span class="hljs-keyword">while</span> low&lt;high:<br><br>  mid=(low+high+<span class="hljs-number">1</span>)/<span class="hljs-number">2</span><br><br>  <span class="hljs-keyword">if</span>(a[mid]&lt;=x):<br>      low=mid<br><br>  <span class="hljs-keyword">else</span>:<br>      high = mid-<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><strong>Java 语言描述</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 在单调递增序列a中查找&gt;=x的数中最小的一个（即x或x的后继）</span><br><span class="hljs-keyword">while</span> (low &lt; high) &#123;<br><br>    <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (low + high) / <span class="hljs-number">2</span>;<br><br>    <span class="hljs-keyword">if</span> (a[mid] &gt;= x)<br>      high= mid;<br><br>  <span class="hljs-keyword">else</span><br>      low = mid + <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 在单调递增序列a中查找&lt;=x的数中最大的一个（即x或x的前驱）</span><br><span class="hljs-keyword">while</span> (low &lt; high) &#123;<br><br>    <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (low + high + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br><br>    <span class="hljs-keyword">if</span> (a[mid] &lt;= x)<br>      low = mid;<br><br>  <span class="hljs-keyword">else</span><br>      high = mid - <span class="hljs-number">1</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>此处我们先分整数的二分查找法的常用模版，关于实数的部分，我们后面再讲。</p><blockquote><p>下面可能会有同学会疑问道：为什么采用这一套代码的而不是采用查找等于的 X？</p><p>是因为这样的适用范围更广，当有 X 时这套代码就返回 X 的位置。如果没有 X，就返回 &lt;&#x3D;x 的数中最大的一个或者 &gt;&#x3D;x 的数中最小的一个。</p></blockquote><h3 id="分巧克力"><a href="#分巧克力" class="headerlink" title="分巧克力"></a>分巧克力</h3><p><a href="https://www.lanqiao.cn/problems/99/learning/">2017 年省赛真题链接</a>。</p><p><strong>题目描述:</strong> 儿童节那天有 K 位小朋友到小明家做客。小明拿出了珍藏的巧克力招待小朋友们。</p><p>小明一共有 $N$ 块巧克力，其中第 $i$ 块是 $H_i \times Wi$ 的方格组成的长方形。为了公平起见，</p><p>小明需要从这 $N$ 块巧克力中切出 K 块巧克力分给小朋友们。切出的巧克力需要满足：</p><ol><li>形状是正方形，边长是整数;</li><li>大小相同;</li></ol><p>例如一块 6x5 的巧克力可以切出 6 块 2x2 的巧克力或者 2 块 3x3 的巧克力。</p><p>当然小朋友们都希望得到的巧克力尽可能大，你能帮小明计算出最大的边长是多少么？</p><p><strong>输入描述:</strong></p><p>第一行包含两个整数 $N,K$ ($1  \leq  N, K  \leq  10^5$)。</p><p>以下 N 行每行包含两个整数 $H_i,W_i$ ($1  \leq  H_i, W_i  \leq  10^5$)。</p><p>输入保证每位小朋友至少能获得一块 1x1 的巧克力。</p><p><strong>输出描述:</strong></p><p>输出切出的正方形巧克力最大可能的边长。</p><p><strong>输入输出样例:</strong></p><p><strong>示例:</strong></p><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 10 6 5 5 6<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><ul><li>最大运行时间：2s</li><li>最大运行内存: 256M</li></ul><p>注意：</p><ol><li>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…”的多余内容。</li><li>不要调用依赖于编译环境或操作系统的特殊函数。</li><li>所有依赖的函数必须明确地在源文件中</li><li>不能通过工程设置而省略常用头文件。</li></ol><h4 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h4><p>简单思路，边长的最大规模为 $100000$；我们可以枚举出所有的情况。按从大到小的顺序进行切割，直到找到满足要求的巧克力边长。</p><p>在判断边长是否满足条件时：求一块长方形$（h * w）$最多被分成的正方形$（len * len）$巧克力个数为：</p><p>$cnt &#x3D; (h &#x2F; len) * (w &#x2F; len)$</p><p>xxxxxxxxxx43 1import os2import sys3​4import heapq5​6a &#x3D; []7b &#x3D; []8​9n,k &#x3D; map(int,input().split())10​11for _ in range(n):12  x,y &#x3D; map(int,input().split())13  a.append(x)14  b.append(y)15​16​17q &#x3D; []18​19for i in range(n-1):20  heapq.heappush(q,(a[i],i))21​22​23t &#x3D; k24​25ans &#x3D; 026​27while t &gt; 0:28  w,i &#x3D; heapq.heappop(q)29​30  heapq.heappush(q,(b[i],i))31  ans +&#x3D; w32  t -&#x3D; 133​34​35ans2 &#x3D; 036if k &gt;&#x3D; n:37  ans2 +&#x3D; sum(a) + (k-n) * min(b)38​39​40if k &gt;&#x3D; n:41  print(min(ans,ans2))42else:43  print(ans)python</p><p>即用在单调递增序列 $a$ 中查找 $&lt;&#x3D;x$ 的数中最大的一个（即 $x$ 或 $x$ 的前驱）即可，原本这里的条件是 $&lt;&#x3D;x$ ，我们将其换成验证即可。</p><h4 id="代码解答"><a href="#代码解答" class="headerlink" title="代码解答"></a>代码解答</h4><p>C++ 实现：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN=<span class="hljs-number">100010</span>;<br><span class="hljs-type">int</span> n,k;<br><span class="hljs-type">int</span> h[MAXN],w[MAXN];<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> l)</span><br>&#123;<br>    <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        sum+=(h[i]/l)*(w[i]/l);<br>        <span class="hljs-keyword">if</span>(sum&gt;=k)<br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;k;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>        <span class="hljs-built_in">cin</span>&gt;&gt;h[i]&gt;&gt;w[i];<br><br>    <span class="hljs-comment">//找到二分查找的上界</span><br>    <span class="hljs-type">int</span> high=<span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        high=max(high,h[i]);<br>        high=max(high,w[i]);<br>    &#125;<br>    <span class="hljs-comment">// 二分下届由题意可得至少为1</span><br>    <span class="hljs-type">int</span> low=<span class="hljs-number">1</span>;<br><br>    <span class="hljs-comment">// 由于本题目就是求符合要求的Mid 值所以要将mid定义在二分查找外边</span><br>    <span class="hljs-type">int</span> mid=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(low&lt;high)<br>    &#123;<br><br>        mid = (low + high+<span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span>(pd(mid))<br>            low=mid;<br>        <span class="hljs-keyword">else</span><br>            high = mid - <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">//        cout&lt;&lt;low&lt;&lt;&quot; &quot;&lt;&lt;high&lt;&lt;endl;</span><br>    &#125;<br><br>    <span class="hljs-comment">//因为low=high所以输出哪一个都一样</span><br>    <span class="hljs-built_in">cout</span>&lt;&lt;low;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>查找上界这里可以直接输入的时候查询，这道题实际上是可以少次操作的，代码如下。</p><p><strong>Python 实现</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python">N=K=<span class="hljs-number">0</span><br>h=[]<br>w=[]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">l</span>):<br><br> sum1=<span class="hljs-number">0</span><br> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br><br>   sum1+= (h[i]//l)* (w[i]//l)<br>   <span class="hljs-comment"># Java C++ 的除法都是自己取整，Python会换成小数，Python的取整除法是//</span><br><br>   <span class="hljs-keyword">if</span> sum1&gt;=K :<br>       <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br> <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>   inFor = <span class="hljs-built_in">input</span>().split()<br><br>   N=<span class="hljs-built_in">int</span>(inFor[<span class="hljs-number">0</span>])<br>   K=<span class="hljs-built_in">int</span>(inFor[<span class="hljs-number">1</span>])<br><br>   <span class="hljs-comment">#找到二分查找的上界</span><br>   high=<span class="hljs-number">0</span><br><br>   <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>       wi, hi = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>       w.append(wi)<br>       h.append(hi)<br>       high=<span class="hljs-built_in">max</span>(high,<span class="hljs-built_in">max</span>((hi,wi)))<br><br>   <span class="hljs-comment"># 二分下届由题意可得至少为1</span><br>   low=<span class="hljs-number">1</span><br>   <span class="hljs-comment">#由于本题目就是求符合要求的Mid 值所以要将mid定义在二分查找外边</span><br>   mid=<span class="hljs-number">0</span><br><br>   <span class="hljs-keyword">while</span> low&lt;high :<br><br>       mid= <span class="hljs-built_in">int</span> ( (low+high+<span class="hljs-number">1</span>)//<span class="hljs-number">2</span>)<br>       <span class="hljs-keyword">if</span> pd(mid):<br>           low=mid<br>       <span class="hljs-keyword">else</span>:<br>           high=mid-<span class="hljs-number">1</span><br><br>   <span class="hljs-comment">#因为low=high所以输出哪一个都一样</span><br>   <span class="hljs-built_in">print</span>(low)<br></code></pre></td></tr></table></figure><p><strong>Java 实现</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Integer.max;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, k;<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> h[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100005</span>];<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> w[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100005</span>];<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> l)</span> &#123;<br>      <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>          sum += (h[i] / l) * (w[i] / l);<br>          <span class="hljs-keyword">if</span> (sum &gt;= k) &#123;<br>              <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>          &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n = in.nextInt();<br>      k = in.nextInt();<br>      <span class="hljs-comment">//找到二分查找的上界</span><br>      <span class="hljs-type">int</span> <span class="hljs-variable">high</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>          h[i] = in.nextInt();<br>          w[i] = in.nextInt();<br>          high = max(high, h[i]);<br>          high = max(high, w[i]);<br>      &#125;<br><br>      <span class="hljs-comment">// 二分下届由题意可得至少为1</span><br>      <span class="hljs-type">int</span> <span class="hljs-variable">low</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>      <span class="hljs-comment">// 由于本题目就是求符合要求的Mid 值所以要将mid定义在二分查找外边</span><br>      <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>      <span class="hljs-keyword">while</span> (low &lt; high) &#123;<br>          mid = (low + high + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>          <span class="hljs-keyword">if</span> (pd(mid))<br>              low = mid;<br>          <span class="hljs-keyword">else</span><br>              high = mid - <span class="hljs-number">1</span>;<br>          <span class="hljs-comment">//        cout&lt;&lt;low&lt;&lt;&quot; &quot;&lt;&lt;high&lt;&lt;endl</span><br>      &#125;<br>      <span class="hljs-comment">//因为low=high所以输出哪一个都一样</span><br>      System.out.println(low);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>模板中的 &lt;&#x3D; 和 &#x3D;&gt; 都可以换成其他判定条件，像上面根据题目分析即可。</strong></p><h2 id="M-次方根"><a href="#M-次方根" class="headerlink" title="M 次方根"></a>M 次方根</h2><p><strong>题目描述:</strong></p><p>小 A 最近在学高等数学，他发现了一道题，求$\sqrt[3]{27}$ 。现在已知，小 A 开始计算，$1$ 的三次方得$1$，$2$ 的三次方得$8$，$3$ 的三次方得$27$，然后他很高兴的填上了$3$。</p><p>接着他要求$\sqrt[5]{164}$ 。然后他开始$1$ 的三次方得$1$，$2$ 的三次方得$8$，$3$ 的三次方得$27$…</p><p>直到他算到了秃头，也没有找到答案。</p><p>这时一旁的小 B 看不下去了，说这题答案又不是个整数。小 A 震惊，原来如此。作为程序高手的小 A，打算设计一个程序用于求解 $M$ 次根下$N$的值。</p><p>但是由于要考虑精度范围，答案必须要保留 $7$ 位小数，连三次根号下$27$都要掰手指的小 A 又怎么会设计呢。请你帮小 A 设计一个程序用于求解 $M$ 次根号$N$。</p><p>数据范围：</p><p>$1 \leq N \leq 1e5$ $1 \leq M \leq 100$ 且 $M &lt; N$</p><p><strong>要求输入:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入描述:<br><br>第一行输入整数 N 和 M，数据间用空格隔开。<br></code></pre></td></tr></table></figure><p><strong>要求输出：</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出描述: 输出一个整数，并保留 7 位小数。<br></code></pre></td></tr></table></figure><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入样例：<br><br>27 3<br><br>输出样例：<br><br>3.000000<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s<br>最大运行内存: 256M<br><br>注意：<br>1. 请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。<br>2. 不要调用依赖于编译环境或操作系统的特殊函数。<br>3. 所有依赖的函数必须明确地在源文件中。<br>4. 不能通过工程设置而省略常用头文件。<br></code></pre></td></tr></table></figure><h4 id="题目分析-1"><a href="#题目分析-1" class="headerlink" title="题目分析"></a>题目分析</h4><p>前面讲的都是整数二分，其实二分法还是可以用于实数。这个题目比较难，很多同学可能想不明白，想不明白就多读题，写写画画理解一下。这个题还有很多解法，现在告诉你了这道理用二分可以解答，请设计一个二分程序。</p><p>首先是这道题我们怎么下手：</p><p>根据前面的知识，我们要找到一个具有单调性的数列，去二分。这个题的关键是我们要去二分什么，这里可以二分的是 $a^M$ 中的 $a$，所以我们要先想办法设计出用于处理实数二分的代码。</p><p>这里给大家两个模板，都可以大家选择一个使用即可：</p><p>C++ 模版：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//模版一：实数域二分，设置eps法</span><br><br><span class="hljs-comment">//令 eps 为小于题目精度一个数即可。比如题目说保留4位小数，0.0001 这种的。那么 eps 就可以设置为五位小数的任意一个数 0.00001- 0.00009 等等都可以。</span><br><br><span class="hljs-comment">//一般为了保证精度我们选取精度/100 的那个小数，即设置 eps= 0.0001/100 =1e-6</span><br><br><span class="hljs-keyword">while</span> (l + eps &lt; r)<br>&#123;<br>    <span class="hljs-type">double</span> mid = (l + r) / <span class="hljs-number">2</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">pd</span>(mid))<br>        r = mid;<br>    <span class="hljs-keyword">else</span><br>        l = mid;<br>&#125;<br><br><span class="hljs-comment">//模版二：实数域二分，规定循环次数法</span><br><span class="hljs-comment">//通过循环一定次数达到精度要求，这个一般 log2N &lt; 精度即可。N 为循环次数，在不超过时间复杂度的情况下，可以选择给 N 乘一个系数使得精度更高。</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)<br>&#123;<br><br>    <span class="hljs-type">double</span> mid = (l + r) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">pd</span>(mid))<br>        r = mid;<br>    <span class="hljs-keyword">else</span><br>        l = mid;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 模版:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 实数域二分，设置eps法</span><br><span class="hljs-comment"># 令eps 为小于题目精度一个数即可，比如题目说保留4位小数，0.0001 这种的。那么eps 就可以设置为五位小数的任意一个数 0.00001- 0.00009 等等都可以。一般为了保证精度我们选取精度/100 的那个小数</span><br><br>eps = <span class="hljs-number">1e-6</span><br><span class="hljs-keyword">while</span> l + eps &lt; r:<br>  mid = (l + r) / <span class="hljs-number">2</span><br>  <span class="hljs-keyword">if</span> (pd(mid)):<br>      r = mid<br>  <span class="hljs-keyword">else</span>:<br>      l = mid<br><br><span class="hljs-comment"># 实数域二分，规定循环次数法</span><br><span class="hljs-comment"># 通过循环一定次数达到精度要求，这个一般 log2N&lt; 精度即可。N 为循环次数，在不超过时间复杂度的情况下，可以选择给N乘一个系数使得精度更高。</span><br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):<br>  mid = (l + r) / <span class="hljs-number">2</span><br>  <span class="hljs-keyword">if</span> (pd(mid)):<br>      r = mid<br>  <span class="hljs-keyword">else</span>:<br>      l = mid<br></code></pre></td></tr></table></figure><p><strong>Java 模版:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//令eps 为小于题目精度一个数即可。</span><br><br><span class="hljs-comment">//比如题目说保留4位小数，0.0001 这种的。那么eps 就可以设置为五位小数的任意一个数 0.00001- 0.00009 等等都可以。一般为了保证精度我们选取精度 /100 的那个小数，即设置  eps= 0.0001/100 =1e-6。</span><br><br><span class="hljs-keyword">while</span> (l + eps &lt; r) &#123;<br>    <span class="hljs-type">double</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (l + r) / <span class="hljs-number">2</span>;<br><br>    <span class="hljs-keyword">if</span> (pd(mid))<br>      r = mid;<br>  <span class="hljs-keyword">else</span><br>      l = mid;<br>&#125;<br><br><span class="hljs-comment">// 实数域二分，规定循环次数法</span><br><br><span class="hljs-comment">//通过循环一定次数达到精度要求，这个一般log2N&lt; 精度即可。N为循环次数，在不超过时间复杂度的情况下，可以选择给N乘一个系数使得精度更高。</span><br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br><br>    <span class="hljs-type">double</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (l + r) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (pd(mid))<br>      r = mid;<br>  <span class="hljs-keyword">else</span><br>      l = mid;<br>&#125;<br></code></pre></td></tr></table></figure><p>模板讲完了，然后我们就要考虑判定条件了，怎样判定是否存在满足大于平均值的区间。当然这个题你可以使用语言中自带开方软件，但是我们还是联系一下实数的二分代码。</p><p>关于判定条件，我们应该设计一个代码用于比较 $a^m$ 和 $N$ 的大小关系。</p><p>在我们代码中：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">pd</span>(mid))<br>    r = mid;<br><span class="hljs-keyword">else</span><br>    l = mid;<br></code></pre></td></tr></table></figure><p>$pd$ 成功的情况，一定是 $pd$ 的 $mid$ 符合条件，且小于 $mid$ 的一定符合条件。因此我们要在大于 $mid$ 中继续查找，找到更大的 $mid$。</p><p>所以我们可以设计出如下判定条件:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">pd</span><span class="hljs-params">(<span class="hljs-type">double</span> a,<span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">double</span> c=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        c=c*a;<br>        m--;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(c&gt;=n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="代码解答-1"><a href="#代码解答-1" class="headerlink" title="代码解答"></a>代码解答</h4><p>C++ 实现：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iomanip&gt;</span> <span class="hljs-comment">//用于浮点数输出</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">double</span> n,l,r,mid;<br><span class="hljs-type">double</span> eps=<span class="hljs-number">1e-8</span>;<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">double</span> a,<span class="hljs-type">int</span> m)</span><br>&#123;<br>    <span class="hljs-type">double</span> c=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        c=c*a;<br>        m--;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(c&gt;=n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> m;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br><span class="hljs-comment">//设置二分边界</span><br>    l=<span class="hljs-number">0</span>,r=n;<br><span class="hljs-comment">//实数二分</span><br>    <span class="hljs-keyword">while</span> (l + eps &lt; r)<br>    &#123;<br>        <span class="hljs-type">double</span> mid = (l + r) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (pd(mid,m))<br>            r = mid;<br>        <span class="hljs-keyword">else</span><br>            l = mid;<br>    &#125;<br><br>    <span class="hljs-built_in">cout</span>&lt;&lt;fixed&lt;&lt;setprecision(<span class="hljs-number">7</span>)&lt;&lt;l;<br>    <span class="hljs-comment">//一般使用print</span><br>    <span class="hljs-comment">//printf(&quot;%x.yf&quot;,n)</span><br>    <span class="hljs-comment">//其中X是固定整数长度，小数点前的整数位数不够，会在前面补0</span><br>    <span class="hljs-comment">//y是保留小数位数，不够补零</span><br>    <span class="hljs-comment">//printf(&quot;%.7f&quot;,l);</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>查找上界这里可以直接输入的时候查询，这道题实际上是可以少次操作的，代码如下。</p><p><strong>Python 实现</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-number">0.0</span><br>m = <span class="hljs-number">0</span><br>l = <span class="hljs-number">0.0</span><br>r = <span class="hljs-number">0.0</span><br>mid = <span class="hljs-number">0.0</span><br>eps = <span class="hljs-number">0.00000001</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">a, m</span>):<br>  c = <span class="hljs-number">1.0</span><br>  cnt = <span class="hljs-built_in">int</span>(m)<br><br>  <span class="hljs-keyword">while</span> cnt &gt; <span class="hljs-number">0</span>:<br>      c = c * a<br>      cnt -= <span class="hljs-number">1</span><br><br>  <span class="hljs-keyword">if</span> c &gt;= n:<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>  <span class="hljs-keyword">else</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>  n, m = <span class="hljs-built_in">input</span>().split()<br><br>  l = <span class="hljs-number">0</span><br>  r=n=<span class="hljs-built_in">int</span>(n)<br><br>  <span class="hljs-keyword">while</span> l + eps &lt; r:<br>      mid = (l + r) / <span class="hljs-number">2</span><br>      <span class="hljs-keyword">if</span> (pd(mid, m)):<br>          r = mid<br>      <span class="hljs-keyword">else</span>:<br>          l = mid<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%.7f&quot;</span> % l)<br></code></pre></td></tr></table></figure><p><strong>Java 实现</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> n, l, r, mid;<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-variable">eps</span> <span class="hljs-operator">=</span> <span class="hljs-number">1e-8</span>;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">int</span> m)</span> &#123;<br>      <span class="hljs-type">double</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">while</span> (m &gt; <span class="hljs-number">0</span>) &#123;<br>          c = c * a;<br>          m--;<br>      &#125;<br><br>      <span class="hljs-keyword">if</span> (c &gt;= n)<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>      <span class="hljs-keyword">else</span><br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">int</span> m;<br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n=in.nextDouble();<br>      m=in.nextInt();<br><span class="hljs-comment">//设置二分边界</span><br>      l = <span class="hljs-number">0</span>;<br>      r = n;<br><span class="hljs-comment">//实数二分</span><br>      <span class="hljs-keyword">while</span> (l + eps &lt; r) &#123;<br>          <span class="hljs-type">double</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (l + r) / <span class="hljs-number">2</span>;<br>          <span class="hljs-keyword">if</span> (pd(mid, m))<br>              r = mid;<br>          <span class="hljs-keyword">else</span><br>              l = mid;<br>      &#125;<br>      System.out.println(String.format(<span class="hljs-string">&quot;%.7f&quot;</span>,l));<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">   关于string.format 的应用</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  double num = 123.4567899;</span><br><span class="hljs-comment">  System.out.print(String.format(&quot;%f %n&quot;, num)); // 123.456790</span><br><span class="hljs-comment">  System.out.print(String.format(&quot;%a %n&quot;, num)); // 0x1.edd3c0bb46929p6</span><br><span class="hljs-comment">  System.out.print(String.format(&quot;%g %n&quot;, num)); // 123.457</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  可用标识：</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        -，在最小宽度内左对齐,不可以与0标识一起使用。</span><br><span class="hljs-comment">        0，若内容长度不足最小宽度，则在左边用0来填充。</span><br><span class="hljs-comment">        #，对8进制和16进制，8进制前添加一个0,16进制前添加0x。</span><br><span class="hljs-comment">        +，结果总包含一个+或-号。</span><br><span class="hljs-comment">        空格，正数前加空格，负数前加-号。</span><br><span class="hljs-comment">        ,，只用与十进制，每3位数字间用,分隔。</span><br><span class="hljs-comment">        (，若结果为负数，则用括号括住，且不显示符号。</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  可用转换符：</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        b，布尔类型，只要实参为非false的布尔类型，均格式化为字符串true，否则为字符串false。</span><br><span class="hljs-comment">        n，平台独立的换行符, 也可通过System.getProperty(&quot;line.separator&quot;)获取。</span><br><span class="hljs-comment">        f，浮点数型（十进制）。显示9位有效数字，且会进行四舍五入。如99.99。</span><br><span class="hljs-comment">        a，浮点数型（十六进制）。</span><br><span class="hljs-comment">        e，指数类型。如9.38e+5。</span><br><span class="hljs-comment">        g，浮点数型（比%f，%a长度短些，显示6位有效数字，且会进行四舍五入）</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">   */</span><br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>二分的题目主要是必须要求是单调的，一般会有条件等字眼。做这种题目主要还是找到递增或者递减的序列，然后关于序列的判定条件。或者通过观察时间复杂度来看是否可以使用二分，二分法的题目相对来说比较明显，设计起来也比较简单，模板不用死记硬背，理解一下，很快就可以独立写出来。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>二分算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>并查集</title>
    <link href="/2024/03/11/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    <url>/2024/03/11/%E5%B9%B6%E6%9F%A5%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><p>并查集是我认为最巧妙优雅的一种数据结构，他主要适用于解决元素分组和不相交集合的合并和查询问题。</p><p>并查集也非常简单，但是，并查集在比赛中非常常用，能够极大的降低算法复杂度得数据结构，是必须要掌握熟练的。</p><p>本节课的难度相对较低，无论是实现方式还是算法原理。</p><h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><p>1.并查集的原理与实现方式 2.并查集的路径压缩 3.启发式合并</p><h4 id="并查集-1"><a href="#并查集-1" class="headerlink" title="并查集"></a>并查集</h4><p>并查集是大量的树（单个节点也算是树）经过合并生成一系列家族森林的过程。</p><p>每个集合也就是每棵树都是由根节点确定，也可以理解为每个家族的族长就是根节点。</p><p>举个数字和字母的例子如下。</p><p><strong>初始森林：</strong> <img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/8d24aa87dbdd7a5823ff707ccd72b82a-0.jpeg" alt="图片描述"></p><p><strong>经过的一系列合并后的状态（不唯一，举个栗子）：</strong></p><p><img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/626f64ab4d60b09b29e811ff903f10c6-0.jpeg" alt="图片描述"></p><p><strong>最终合并后的状态：</strong></p><p>注：示意图的位置与存储物理位置无关，只代表逻辑关系。</p><p><img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/f4ba4e2ff16c8ffb15e361188d5c71b7-0.jpeg" alt="图片描述"></p><h4 id="并查集的存储结构"><a href="#并查集的存储结构" class="headerlink" title="并查集的存储结构"></a>并查集的存储结构</h4><p>并查集采用数组表示整个森林，初始时每个森林的树根为自己。</p><p>C++ 存储与初始化：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-meta"># <span class="hljs-keyword">define</span> Maxn 200</span><br><br><span class="hljs-comment">// 假设所需数量为200</span><br><br><span class="hljs-type">int</span> fa[Maxn+<span class="hljs-number">1</span>]<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i =<span class="hljs-number">0</span>;i&lt;=Maxn; i++)<br>        fa[i]=i;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 存储与初始化：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>Maxn = <span class="hljs-number">200</span><br><br><span class="hljs-comment"># 假设所需的数量为200</span><br><br>fa = []<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Maxn + <span class="hljs-number">1</span>):<br><br>        fa.append(i)<br></code></pre></td></tr></table></figure><p>Java 存储与初始化：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">Maxn</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br><br><span class="hljs-keyword">static</span> <span class="hljs-type">int</span> fa[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[Maxn+<span class="hljs-number">1</span>];<br><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span> ;i&lt;=Maxn;i++)<br><br>        fa[i]=i;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>一般用递归法实现对代表元素的查询：递归访问父节点，直至根节点（根节点的标志就是父节点是本身）。</p><p>根节点相同的两个元素属于同一个集合，上面也说到了。所以判断 <code>A</code>，<code>B</code> 是否属于一个集合直接判断 <code>find(A)</code>和 <code>find(B)</code>是否相同即可。</p><p>由于代码比较简单，我们先给出查询的代码：</p><p>C++ 查询：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(fa[x] == x)<br>        <span class="hljs-keyword">return</span> x;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> find(fa[x]);<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 查询：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br><br>    <span class="hljs-keyword">if</span> fa[x] == x:<br>        <span class="hljs-keyword">return</span> x<br><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> find(fa[x])<br></code></pre></td></tr></table></figure><p>Java 查询：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-type">static</span>  <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(fa[x] == x)<br>        <span class="hljs-keyword">return</span> x;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> find(fa[x]);<br>&#125;<br><br></code></pre></td></tr></table></figure><p>我们这里有一个问题，当树的链很长时，比如：</p><p><img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/567d8282a596647b92af905396d88ee4-0.jpeg" alt="图片描述"></p><p>如果每次都查询最后一个，那么他就要经过多次递归，非常消耗时间，这时候我们就要引入路径压缩。</p><h4 id="路径压缩"><a href="#路径压缩" class="headerlink" title="路径压缩"></a>路径压缩</h4><p>路径压缩是为了解决当树的高度过高的时候，提高查询时效的方法。</p><p>解决方式也很简单，在递归的同时将路径压缩，那么上面的图经过一次查询后的效果如下。</p><p><img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/58877fc5b4c8482c0c5c44ef1aeb8adf-0.jpeg" alt="图片描述"></p><p>其实，实现方式也非常简单，只需要将查询代码修改即可，代码如下：</p><p>C++ 查询带路径压缩：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(x == fa[x])<br>        <span class="hljs-keyword">return</span> x;<br><br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        fa[x] = find(fa[x]);<br>        <span class="hljs-comment">//父节点设为根节点</span><br><br>        <span class="hljs-keyword">return</span> fa[x];<br>        <span class="hljs-comment">//返回父节点</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 查询带路径压缩：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br><br>    <span class="hljs-keyword">if</span> fa[x] == x:<br>        <span class="hljs-keyword">return</span> x<br><br>    <span class="hljs-keyword">else</span>:<br><br>        fa[x] = find(fa[x]);<br>        <span class="hljs-comment">#父节点设为根节点</span><br><br>        <span class="hljs-keyword">return</span>  fa[x]<br>        <span class="hljs-comment"># 返回父节点</span><br><br></code></pre></td></tr></table></figure><p>Java 查询带路径压缩：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-type">static</span>  <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(x == fa[x])<br>        <span class="hljs-keyword">return</span> x;<br><br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        fa[x] = find(fa[x]);<br>        <span class="hljs-comment">//父节点设为根节点</span><br><br>        <span class="hljs-keyword">return</span> fa[x];<br>        <span class="hljs-comment">//返回父节点</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h4><p>合并的方式很简单，就是把一颗树的根节点设置为另一棵树的根节点即可。</p><p>还有一种方式是按秩合并，但是我们使用路径压缩时间复杂度就已经很低了，如果在引入 <code>rank</code> 相对会有些复杂。而且对于我们的使用路径压缩一种方式就已经足够。并且路径压缩和按秩合并一起使用时会影响 <code>rank</code> 准确性，所以我们采用普通的合并与优化后的查找即可。</p><p><img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/15fd5c72e7f73740bd1cc2ab4c0e3bf7-0.jpeg" alt="图片描述"></p><p>合并后：</p><p><img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/29a76e16a78eec6765c066f0158b236b-0.jpeg" alt="图片描述"></p><p>C++ 合并：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-type">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span><br>&#123;<br>    fa[find(i)] = find(j);<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 合并：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">x,y</span>):<br><br>    fa[find(x)] = find(y)<br><br></code></pre></td></tr></table></figure><p>Java 合并：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span><br>&#123;<br>    fa[find(i)] = find(j);<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>合并优化：</strong></p><p>除此之外还有一个优化是启发式合并，其实这个启发式是泛指有很多的合并算法都叫启发式合并，我们这里讲其中一种常用的启发式合并。合并时，选择哪棵树的根节点作为新树的根节点会影响未来操作的复杂度。我们可以按照子树大小去合并，小的合并到大的，以免发生退化。所以启发式合并的原理是在集合合并时将小的集合合并到大的集合里，也可以使 <code>find</code> 操作复杂度降低到  $O(logn)$，在集合合并时还要增加一个更新集合大小的操作。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c">C++<br><span class="hljs-type">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><span class="hljs-comment">//启发式合并</span><br>&#123;<br>    x=find(x);<br>    y=find(y);<br>    <span class="hljs-keyword">if</span>(x!=y)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(sz[x]&lt;sz[y])<br>            swap(x,y);<br>        sz[x]+=sz[y];<br>        fa[y]=x;<br>    &#125;<br>&#125;<br><br><br>Java<br>    public <span class="hljs-type">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        x = find(x);<br>        y = find(y);<br>        <span class="hljs-keyword">if</span> (x != y) &#123;<br>            <span class="hljs-keyword">if</span> (sz[x] &lt; sz[y]) &#123;<br>                swap(x, y);<br>            &#125;<br>            sz[x] += sz[y];<br>            fa[y] = x;<br>        &#125;<br>    &#125;<br><br>python<br><br>def <span class="hljs-title function_">merge</span><span class="hljs-params">(x, y, sz, fa)</span>:<br>    x = find(x, fa)<br>    y = find(y, fa)<br>    <span class="hljs-keyword">if</span> x != y:<br>        <span class="hljs-keyword">if</span> sz[x] &lt; sz[y]:<br>            swap(x, y, fa)<br>        sz[x] += sz[y]<br>        fa[y] = x<br></code></pre></td></tr></table></figure><p>如果是一般的并查集题目用路径压缩就可以了，当然两种优化都用的话复杂度可以降得更低。两种优化都使用的话单次操作的复杂度才是  $O(α)$</p><h3 id="并查集相关题目讲解"><a href="#并查集相关题目讲解" class="headerlink" title="并查集相关题目讲解"></a>并查集相关题目讲解</h3><h4 id="合根植物"><a href="#合根植物" class="headerlink" title="合根植物"></a>合根植物</h4><p><a href="https://www.lanqiao.cn/problems/110/learning/">题目链接</a></p><p>难度: 简单</p><p>标签: 并查集, 2017, 国赛</p><p><strong>题目描述:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>w 星球的一个种植园，被分成 m×n 个小格子（东西方向 m 行，南北方向 n 列）。每个格子里种了一株合根植物。<br><br>这种植物有个特点，它的根可能会沿着南北或东西方向伸展，从而与另一个格子的植物合成为一体。<br><br>如果我们告诉你哪些小格子间出现了连根现象，你能说出这个园中一共有多少株合根植物吗？<br></code></pre></td></tr></table></figure><p><strong>输入描述:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>第一行，两个整数 m,n，用空格分开，表示格子的行数、列数（1≤m,n≤1000）。<br><br>接下来一行，一个整数 k (0≤k≤105 )，表示下面还有 k 行数据。<br><br>接下来 k 行，每行两个整数 a，b，表示编号为 a 的小格子和编号为 b 的小格子合根了。<br><br>格子的编号一行一行，从上到下，从左到右编号。<br><br>比如：5×4 的小格子，编号：<br></code></pre></td></tr></table></figure><table><thead><tr><th>行列</th><th>①</th><th>②</th><th>③</th><th>④</th></tr></thead><tbody><tr><td>①</td><td>1</td><td>2</td><td>3</td><td>4</td></tr><tr><td>②</td><td>5</td><td>6</td><td>7</td><td>8</td></tr><tr><td>③</td><td>9</td><td>10</td><td>11</td><td>12</td></tr><tr><td>④</td><td>13</td><td>14</td><td>15</td><td>16</td></tr><tr><td>⑤</td><td>17</td><td>18</td><td>19</td><td>20</td></tr></tbody></table><p><strong>输出描述:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出植物数量。<br></code></pre></td></tr></table></figure><p><strong>输入输出样例:</strong></p><p><strong>示例:</strong></p><p><strong>输入:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>5 4<br>16<br>2 3<br>1 5<br>5 9<br>4 8<br>7 8<br>9 10<br>10 11<br>11 12<br>10 14<br>12 16<br>14 18<br>17 18<br>15 19<br>19 20<br>9 13<br>13 17<br><br></code></pre></td></tr></table></figure><p><strong>输出:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br></code></pre></td></tr></table></figure><p>样例图例如下：</p><p><img src="/./../images/%E5%B9%B6%E6%9F%A5%E9%9B%86/uid1580206-20210202-1612249467438.png" alt="图片描述"></p><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 256M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>这个题就是一个模板并查集的题目，每次合根就是一次 <code>Merge</code>。</p><p>最后答案就是看有多少个根即可，那么就是看有多少个<code>fa[x]=x</code>即可。</p><p>直接按照题目编写即可，部分解析直接写进题目。</p><p><strong>答案解析：</strong></p><p>C++ 描述：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta"># <span class="hljs-keyword">define</span> Maxn 2000000</span><br><br><span class="hljs-comment">// 假设所需数量为200</span><br><span class="hljs-type">int</span> fa[Maxn+<span class="hljs-number">1</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i =<span class="hljs-number">0</span>; i&lt;=Maxn; i++)<br>        fa[i]=i;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(x == fa[x])<br>        <span class="hljs-keyword">return</span> x;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        fa[x] = <span class="hljs-built_in">find</span>(fa[x]);<br>        <span class="hljs-comment">//父节点设为根节点</span><br>        <span class="hljs-keyword">return</span> fa[x];<br>        <span class="hljs-comment">//返回父节点</span><br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span></span><br><span class="hljs-function"></span>&#123;<br>    fa[<span class="hljs-built_in">find</span>(i)] = <span class="hljs-built_in">find</span>(j);<br>&#125;<br><span class="hljs-type">int</span> n,m; <span class="hljs-comment">//n行，m列</span><br><span class="hljs-type">int</span> k; <span class="hljs-comment">//k次合根</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">init</span>();<br>    cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;<br>    <span class="hljs-type">int</span> a,b;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=k; i++)<br>    &#123;<br>        cin&gt;&gt;a&gt;&gt;b;<br>        <span class="hljs-built_in">merge</span>(a,b); <span class="hljs-comment">//合根</span><br>    &#125;<br><br>    <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n*m; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(fa[i]==i) <span class="hljs-comment">//找根节点</span><br>        &#123;<br>            ans++;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;ans;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Python 描述：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>Maxn = <span class="hljs-number">2000000</span><br><span class="hljs-comment"># 假设所需的数量为200</span><br>fa = []<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Maxn + <span class="hljs-number">1</span>):<br>        fa.append(i)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br><br>    <span class="hljs-keyword">if</span> fa[x] == x:<br>        <span class="hljs-keyword">return</span> x<br>    <span class="hljs-keyword">else</span>:<br><br>        fa[x] = find(fa[x])<br>        <span class="hljs-comment">#父节点设为根节点</span><br>        <span class="hljs-keyword">return</span>  fa[x]<br>        <span class="hljs-comment"># 返回父节点</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">x,y</span>):<br><br>    fa[find(x)] = find(y)<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n,m=<span class="hljs-built_in">input</span>().split()<br>    k=<span class="hljs-built_in">input</span>()<br>    n=<span class="hljs-built_in">int</span>(n)<br>    m=<span class="hljs-built_in">int</span>(m)<br>    k=<span class="hljs-built_in">int</span>(k)<br>    Maxn=m*n+<span class="hljs-number">100</span><br>    init()<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>        a,b= <span class="hljs-built_in">input</span>().split()<br>        a=<span class="hljs-built_in">int</span>(a)<br>        b=<span class="hljs-built_in">int</span>(b)<br>        merge(a,b)<br>    ans=<span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m*n): <span class="hljs-comment">#从0开始</span><br>        index=i+<span class="hljs-number">1</span> <span class="hljs-comment">#调整一下，应该是从1开始</span><br>        <span class="hljs-keyword">if</span>(fa[index]==index):<br>            ans+=<span class="hljs-number">1</span><br><br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>Java 描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> Maxn;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> fa[];<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span> ;i&lt;=Maxn;i++)<br>            fa[i]=i;<br><br>    &#125;<br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(x == fa[x])<br>            <span class="hljs-keyword">return</span> x;<br><br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            fa[x] = find(fa[x]);<br>            <span class="hljs-comment">//父节点设为根节点</span><br>            <span class="hljs-keyword">return</span> fa[x];<br>            <span class="hljs-comment">//返回父节点</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span><br>    &#123;<br>        fa[find(i)] = find(j);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n,m; <span class="hljs-comment">//n行，m列</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> k; <span class="hljs-comment">//k次合根</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n=in.nextInt();<br>        m=in.nextInt();<br>        k=in.nextInt();<br>        Maxn=m*n;<br>        fa=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[Maxn+<span class="hljs-number">100</span>];<br>        init();<br>        <span class="hljs-type">int</span> a,b;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=k; i++)<br>        &#123;<br>            a=in.nextInt();<br>            b=in.nextInt();<br>            merge(a,b);<br>        &#125;<br><br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n*m; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(fa[i]==i)<br>            &#123;<br>                ans++;<br>            &#125;<br>        &#125;<br>        System.out.println(ans);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="修改数组"><a href="#修改数组" class="headerlink" title="修改数组"></a>修改数组</h4><p><a href="https://www.lanqiao.cn/problems/185/learning/">题目链接</a></p><p>难度: 中等</p><p>标签: 并查集, 2019, 省赛</p><p><strong>题目描述:</strong> 给定一个长度为 $N$ 的数组 $A &#x3D; [A_1,A_2,··· ,A_N]$，数组中有可能有重复出现的整数。</p><p>现在小明要按以下方法将其修改为没有重复整数的数组。小明会依次修改$A_2,A_3,··· ,A_N$。</p><p>当修改 $A_i$ 时，小明会检查 $A_i$ 是否在 $A_1$ ∼ $A_i−1$ 中出现过。如果出现过，则小明会给 $A_i$ 加上 1 ；如果新的 $A_i$ 仍在之前出现过，小明会持续给 $A_i$ 加 1 ，直 到 $A_i$ 没有在 $A_1$ ∼ $A_i−1$ 中出现过。</p><p>当 $A_N$ 也经过上述修改之后，显然 $A$ 数组中就没有重复的整数了。</p><p>现在给定初始的 $A$ 数组，请你计算出最终的 $A$ 数组。</p><p><strong>输入:</strong></p><p>第一行包含一个整数 $N$。</p><p>第二行包含 $N$ 个整数 $A_1,A_2,··· ,A_N$。</p><p>其中，$1  \leq  N  \leq  10^5，1  \leq  A_i  \leq  10^6$。</p><p><strong>输出：</strong></p><p>输出 $N$ 个整数，依次是最终的 $A_1,A_2,··· ,A_N$。</p><p><strong>输入输出样例:</strong></p><p>输入</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br>2 1 1 3 4<br></code></pre></td></tr></table></figure><p>输出</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 1 3 4 5<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>第一步，先初始化并查集。</p><p>第二步，读入数组并作如下处理：</p><p>如果这数字在之前没出现过那么他的值应该就是自己，并将其加入集合，此后再出现这个数字那么就要输出这个数字加 $1$，所以将这个数字的根节点设置为这个数字$+1$ 即可。</p><p>如果这个数字之前出现过那么这个数字应该变成根节点的值，根节点的值是之前出现过的值加$+1$。</p><p>然后重复简单的逻辑即可，现在是维护一个之前出现过的集合，每个出现过的数字会把根节点设置为比他大 $1$ 的数字，重复这个过程即可完成题意。</p><p>我们之前说过，因为输入输出是分开的，这里直接输出就行，不必在使用数组存储。</p><p>比如样例：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>2 1 1 3 4<br><br>首先因为 2 没出现过现在，所以初始化后的 fa[2] 等于2<br><br>所以直接输出2 即可。<br><br>此时 2 已经出现过了，下次遇见2就要输出3，所以这里我们使fa[2]等于3<br><br>或者使用merge(2,3);<br><br>然后输入1，因为1 也没有出现过，所以重复 2 的操作即可。<br><br>输出fa[1]。<br><br>令fa[1]=2，但是fa[2]=3,因为2也出现过<br><br>这样fa[1]=fa[2]=3<br><br>当然这里只需要执行merge(2,3)<br><br><br>然后输入1，因为1 之前出现过，而且他的值我们之前也处理好了，直接输出即可。<br><br>输出fa[1],即3。<br><br>使用merge(3,4)<br><br>然后重复上述过程，代码如下：<br><br>        输入X :Input(X)<br><br>        找到根节点: X=find(X);<br><br>        输出应该是多少：Print(X)<br><br>        将根节点加+1处理：merge(X,X+1);<br></code></pre></td></tr></table></figure><p><strong>答案解析：</strong></p><p>C++ 描述：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br> <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-meta"># <span class="hljs-keyword">define</span> Maxn 2000000</span><br><span class="hljs-comment">// 假设所需数量为2000000</span><br><br><span class="hljs-type">int</span> fa[Maxn+<span class="hljs-number">1</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i =<span class="hljs-number">0</span>; i&lt;=Maxn; i++)<br>        fa[i]=i;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(x == fa[x])<br>        <span class="hljs-keyword">return</span> x;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        fa[x] = <span class="hljs-built_in">find</span>(fa[x]);<br>        <span class="hljs-comment">//父节点设为根节点</span><br>        <span class="hljs-keyword">return</span> fa[x];<br>        <span class="hljs-comment">//返回父节点</span><br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span></span><br><span class="hljs-function"></span>&#123;<br>    fa[<span class="hljs-built_in">find</span>(i)] = <span class="hljs-built_in">find</span>(j);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> t;<br>        cin&gt;&gt;t;<br>        t=<span class="hljs-built_in">find</span>(t);<br>        cout&lt;&lt;t&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>        <span class="hljs-built_in">merge</span>(t,t+<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 描述：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>Maxn = <span class="hljs-number">2000000</span><br><span class="hljs-comment"># 假设所需的数量为200</span><br>fa = []<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Maxn + <span class="hljs-number">1</span>):<br>        fa.append(i)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> fa[x] == x:<br>        <span class="hljs-keyword">return</span> x<br>    <span class="hljs-keyword">else</span>:<br>        fa[x] = find(fa[x]);<br>        <span class="hljs-comment">#父节点设为根节点</span><br>        <span class="hljs-keyword">return</span>  fa[x]<br>        <span class="hljs-comment"># 返回父节点</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">x,y</span>):<br>    fa[find(x)] = find(y)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n=<span class="hljs-built_in">input</span>()<br>    A=<span class="hljs-built_in">input</span>().split()<br>    A=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,A))<br>    Maxn=<span class="hljs-built_in">len</span>(A)+<span class="hljs-number">100</span><br>    init()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(A)):<br><br>        t=find(A[i])<br>        <span class="hljs-built_in">print</span>(t,end=<span class="hljs-string">&quot; &quot;</span>)<br>        merge(t,t+<span class="hljs-number">1</span>)<br><br></code></pre></td></tr></table></figure><p>Java 描述：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> Maxn=<span class="hljs-number">1000005</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> fa[];<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span> ;i&lt;=Maxn;i++)<br>            fa[i]=i;<br>    &#125;<br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(x == fa[x])<br>            <span class="hljs-keyword">return</span> x;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            fa[x] = find(fa[x]);<br>            <span class="hljs-comment">//父节点设为根节点</span><br>            <span class="hljs-keyword">return</span> fa[x];<br>            <span class="hljs-comment">//返回父节点</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span><br>    &#123;<br>        fa[find(i)] = find(j);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n,m; <span class="hljs-comment">//n行，m列</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> k; <span class="hljs-comment">//k次合根</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n=in.nextInt();<br>        fa=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[Maxn+<span class="hljs-number">100</span>];<br>        init();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> t;<br>            t=in.nextInt();<br>            t=find(t);<br>            System.out.print(t+<span class="hljs-string">&quot; &quot;</span>);<br>            merge(t,t+<span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>并查集的思想非常简单，但是我们也看到了题目有点复杂，稍微一点改变就是另一种方向。并查集代码实现非常简单，但重点还是看对于题目的把握，这个数据结构不仅直接出题目，并且也会杂糅到别的算法里面，所以他的应用非常广泛，需要我们牢牢地掌握。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>并查集</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>差分与前缀和</title>
    <link href="/2024/03/11/%E5%B7%AE%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/"/>
    <url>/2024/03/11/%E5%B7%AE%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/</url>
    
    <content type="html"><![CDATA[<h2 id="差分与前缀和"><a href="#差分与前缀和" class="headerlink" title="差分与前缀和"></a>差分与前缀和</h2><p>差分与前缀和是一对互逆的操作，常常用于处理区间问题，差分法是解决区间加减问题，前缀和是解决区间求和问题的常用办法。</p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>差分算法</li><li>前缀和算法</li></ul><h2 id="差分法"><a href="#差分法" class="headerlink" title="差分法"></a>差分法</h2><p>差分法的应用主要是用于处理区间问题。当某一个数组要在很多不确定的区间，加上相同的一个数。我们如果每个都进行加法操作的话，那么复杂度 $O(nm)$ 是平方阶的，非常消耗时间。</p><p>如果我们采用差分法，将数组拆分，构造出一个新的拆分数组，通过对数组区间的端点进行加减操作，最后将数组和并就能完成原来的操作。</p><p>这样处理后，时间复杂度降低为 $O(N)$，虽然感觉操作变得更加复杂了，但是只用对边界操作确实比操作一整个区间的方法要优秀的多。</p><p>听到这里也是吊足了胃口，那到底怎么对区间操作呢，请大家跟随我的讲解，慢慢理解。</p><p><strong>差分法的特点：</strong></p><ol><li>将对于区间的加减操作转化为对于端点的操作；</li><li>时间复杂度为 $O(n)$；</li><li>用于维护区间的增减但不能维护乘除；</li><li>差分后的序列比原来的数组序列多一个数。</li></ol><p><strong>差分算法解题的基本思路：</strong></p><ol><li>设定 $b[1]&#x3D;a[1]$；</li><li>对于第 2 项到第 n 项，利用差分式 $b[i]&#x3D;a[i]-a[i-1]$；</li><li>对于区间端点进行加减操作；</li><li>进行差分还原（即前缀和）；</li><li>注意，这里从 1 开始。如果从 0 开始，还需讨论 $i&#x3D;0$ 的情况。使用 1 的话，$b[1]&#x3D;a[1]-a[0]&#x3D;a[1]$。</li></ol><p><strong>差分法的一般步骤：</strong></p><p>假设有一个数组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">a = [1, 2, 3, 4, 5, 7, 2]<br></code></pre></td></tr></table></figure><p>差分后：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">b = [1, 1, 1, 1, 1, 2, -5]<br></code></pre></td></tr></table></figure><p>一般应用场景是对区间 $[l,r]$ 进行 $N$ 次加减操作。例如：</p><ul><li>从第二个元素到第五个元素每个加 $3$</li><li>从第二个元素到第四个元素每个减 $2$</li><li>从第一个元素到第三个元素每个加 $1$</li></ul><p>对于每个 $[l,r]$ 区间的加减操作都可转化为对端点 $l$ 和 $r+1$ 的操作。例如，从第二个元素到第五个元素每个加 $3$，可转化为 $[l]$ 加 $3$ 且 $[r+1]$ 减 $3$。</p><p>原序列变成了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1 1 1 1 1 2 -5<br>1 4 1 1 1 -1 -5<br></code></pre></td></tr></table></figure><p>然后按照 $b[i]&#x3D;b[i]+b[i-1]$ 复原：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1 5 6 7 8 7 2<br></code></pre></td></tr></table></figure><p>去掉最后一项，跟原序列对比：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1 2 3 4 5 7 2<br>1 5 6 7 8 7 2<br></code></pre></td></tr></table></figure><p>确实是都加上了 $3$。</p><p>继续操作：</p><p>从第二个元素到第四个元素每个减 $2$，可转化为 $[l]$ 减 $2$ 且 $[r+1]$ 加 $2$。</p><p>序列变成了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1 4 1 1 1 -1 -5<br>1 2 1 1 3 -1 -5<br></code></pre></td></tr></table></figure><p>然后按照 $b[i]&#x3D;b[i]+b[i-1]$ 复原：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1 3 4 5 8 7 2<br></code></pre></td></tr></table></figure><p>与上次复原后对比：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1 5 6 7 8 7 2 <br>1 3 4 5 8 7 2<br></code></pre></td></tr></table></figure><p>确实是按照操作执行了。</p><p>注意，不需要每次都复原，只需在最后一次复原即可。</p><p>最后直接做三次，最后还原：</p><ul><li>从第二个元素到第五个元素每个加 $3$</li><li>从第二个元素到第四个元素每个减 $2$</li><li>从第一个元素到第三个元素每个加 $1$</li></ul><p>原序列差分后：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">b = [1 1 1 1 1 2 -5]<br></code></pre></td></tr></table></figure><ul><li>第 2 个元素加 3</li><li>第 6 个元素减 3</li><li>第 2 个元素减 2</li><li>第 5 个元素加 2</li><li>第 1 个元素加 1</li><li>第 4 个元素减 1</li></ul><p>差分序列变成：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">2 2 1 0 3 -1 -5<br></code></pre></td></tr></table></figure><p>复原后：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">2 4 5 5 8 7 5<br></code></pre></td></tr></table></figure><p>与原序列对比：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1 2 3 4 5 7 2 <br>2 4 5 5 8 7 5<br></code></pre></td></tr></table></figure><p>所以，差分算法是非常方便快捷的。</p><p>差分与前缀和是逆操作，常在一起出现，但是先做差分还是先做前缀和就是两种不同的算法，做不做另一种操作也决定了算法不同，所以大家要根据题目分析，具体学会使用。</p><h3 id="大学里的树木要打药"><a href="#大学里的树木要打药" class="headerlink" title="大学里的树木要打药"></a>大学里的树木要打药</h3><p><strong>题目描述:</strong></p><p>教室外有 N 棵树，根据不同的位置和树种，学校要对其上不同的药。</p><p>因为树的排列成线性，且非常长，我们可以将它们看作一条直线给他们编号。</p><p>树的编号从 $0$ ~ $N-1$ 且 $N&lt;1e6$。</p><p>对于树的药是成区间分布，比如 $3 - 5$ 号的树靠近下水道，所以他们要用驱蚊虫的药， $20 - 26$ 号的树，他们排水不好，容易涝所以要给他们用点促进根系的药。</p><p>诸如此类，每种不同的药要花不同的钱。</p><p>现在已知共有 $M$ 个这样的区间，并且给你每个区间花的钱，请问最后，这些树木花了多少药费。</p><p><strong>输入:</strong></p><p>输入描述:</p><p>每组输入的第一行有两个整数 $N（1 &lt;&#x3D; N&lt;&#x3D; 1000000）$和 $M（1 &lt;&#x3D; M &lt;&#x3D; 100000）$。</p><p>$N$ 代表马路的共计多少棵树，$M$代表区间的数目，$N$ 和 $M$ 之间用一个空格隔开。</p><p>接下来的 $M$ 行每行包含三个不同的整数，用一个空格隔开，表示一个区域的起始点 $L$ 和终止点 $R$ 的坐标，以及花费。</p><p>输入样例:</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">500 3<br>150 300 4<br>100 200 20<br>470 471 19<br></code></pre></td></tr></table></figure><p><strong>输出描述:</strong></p><p>输出包括一行，这一行只包含一个整数，所有的花费。</p><p><strong>输出样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2662<br></code></pre></td></tr></table></figure><p><strong>样例:</strong></p><p><strong>输入样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs txt">3000 8<br>150 1130 2<br>1020 1200 3<br>470 2071 1<br>1123  211 6<br>12 222 2<br>13 23 2<br>1  213 4<br>1232  2523 6<br></code></pre></td></tr></table></figure><p><strong>输出样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2662<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><ol><li><p>利用$b[i]&#x3D;a[i]-a[i-1]$ 差分式。</p><p>这里由于开始时都是 $0$，可以用，但是用完都还是 $0$，所以没有意义，所以直接跳过即可。</p></li><li><p>依次读入区间的值，然后将对于区间的操作转化为对于区间端点操作加减。 由于我们从 $1$ 开始，所以数目整体区间要右移 $1$ 位。</p><p>对于每个 $[l,r]$ 区间的加减操作都转化为对端点 $l,r+1$ 的操作。</p></li><li><p>差分还原(前缀和)。</p></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++)<br>     b[i] = a[i] - a[i - <span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><p>差分算法解决区间加减问题通用框架如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//读入原始数据 n,m,a</span><br><br>输入n,<span class="hljs-function">m</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-title">for</span><span class="hljs-params">(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)</span></span>&#123;<br><br>    输入a[i]<br>&#125;<br><br><span class="hljs-comment">//差分</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><br>    b[i]=a[i]-a[i<span class="hljs-number">-1</span>]<br><br><span class="hljs-comment">//区间操作</span><br><span class="hljs-keyword">while</span>(m--)<br>&#123;<br>    输入l,r,value<br>    b[l]+value<br>    b[r+<span class="hljs-number">1</span>]-value<br>&#125;<br><br><span class="hljs-comment">//前缀和还原</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++)<br><br>    b[i]=b[i]+b[i<span class="hljs-number">-1</span>]<br></code></pre></td></tr></table></figure><h4 id="答案解析"><a href="#答案解析" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> b[<span class="hljs-number">100005</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//n层</span><br>    <span class="hljs-type">int</span> m; <span class="hljs-comment">// m个区间</span><br>    cin &gt;&gt; n &gt;&gt; m;<br><br>    <span class="hljs-keyword">while</span> (m--)<br>    &#123;<br>        <span class="hljs-type">int</span> l, r, value;<br>        cin &gt;&gt; l &gt;&gt; r &gt;&gt; value;<br>        b[l+<span class="hljs-number">1</span>] += value;<br>        b[r + <span class="hljs-number">1</span>+<span class="hljs-number">1</span>] -= value;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        b[i] = b[i] + b[i - <span class="hljs-number">1</span>];<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        sum += b[i];<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    也可以一次性搞定</span><br><span class="hljs-comment">    int sum=b[1];</span><br><span class="hljs-comment">    for(int i=1; i&lt;=n; i++)&#123;</span><br><span class="hljs-comment">    b[i]=b[i]+b[i-1];</span><br><span class="hljs-comment">    sum+=b[i]</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    */</span><br>    cout &lt;&lt; sum &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><p>递推算法代码：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs py">b = [<span class="hljs-number">0</span>] * <span class="hljs-number">100005</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    nm = <span class="hljs-built_in">input</span>().split()<br>    n = <span class="hljs-built_in">int</span>(nm[<span class="hljs-number">0</span>])<br>    m = <span class="hljs-built_in">int</span>(nm[<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">while</span> (m &gt; <span class="hljs-number">0</span>):<br>        m -= <span class="hljs-number">1</span><br>        lrv = <span class="hljs-built_in">input</span>().split()<br>        l = <span class="hljs-built_in">int</span>(lrv[<span class="hljs-number">0</span>])<br>        r = <span class="hljs-built_in">int</span>(lrv[<span class="hljs-number">1</span>])<br>        value = <span class="hljs-built_in">int</span>(lrv[<span class="hljs-number">2</span>])<br>        b[l+<span class="hljs-number">1</span>] += value<br>        b[r + <span class="hljs-number">1</span>+<span class="hljs-number">1</span>] -= value<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        b[i] = b[i - <span class="hljs-number">1</span>] + b[i]<br>    <span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-built_in">sum</span> += b[i]<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>)<br><br>    <span class="hljs-comment">#或者一次性解决</span><br>    <span class="hljs-comment"># sum = a[0]</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># for i in range(1, n+1):</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#     a[i] = a[i - 1] + a[i]</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#     sum += a[0]</span><br>    <span class="hljs-comment"># print(sum)</span><br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> b[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">100005</span>];<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      <span class="hljs-type">int</span> n; <span class="hljs-comment">//n层</span><br>      <span class="hljs-type">int</span> m; <span class="hljs-comment">// m个区间</span><br>      n = in.nextInt();<br>      m = in.nextInt();<br>      <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)<br>      &#123;<br>          m--;<br>          <span class="hljs-type">int</span> l,r,value ;<br>          l = in.nextInt();<br>          r = in.nextInt();<br>          value = in.nextInt();<br>          b[l+<span class="hljs-number">1</span>]+=value;<br>          b[r+<span class="hljs-number">1</span>+<span class="hljs-number">1</span>]-=value;<br>      &#125;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>          b[i]=b[i]+b[i-<span class="hljs-number">1</span>];<br><br>      <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>          sum+=b[i];<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  也可以一次性搞定</span><br><span class="hljs-comment">  int sum=a[0];</span><br><span class="hljs-comment">  for(int i=1; i&lt;n; i++)&#123;</span><br><span class="hljs-comment">  a[i]=a[i]+a[i-1];</span><br><span class="hljs-comment">  sum+=a[i]</span><br><span class="hljs-comment">  &#125;</span><br><span class="hljs-comment">  */</span><br>      System.out.println(sum);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h2><p>前缀和法的应用主要也是用于处理区间问题。</p><p>前缀和是指某序列的前 $n$ 项和，可以把它理解为数学上的数列的前 $n$ 项和。当对于某一数组区间进行多次询问，$[L,r]$ 的和时，如果正常处理，那么我们每次都要 $[l,r]$。查询 $N$ 次，那么时间复杂度也是 $O(nm)$ 也是平方阶的。</p><p>如果我们采用前缀和，构造出一个前缀和数组，通过对于端点的值的减法操作就能 $O(1)$ 的求出 $[l,r]$ 的和。然后 $N$ 次查询的，就将复杂度降低为 $O(n)$。</p><p>同差分一样，感觉操作变得更加复杂了，但是只用对端点值的操作确实比一整个区间相加的方法要优秀的多。听到这里大家很期待了，我们接着进行讲解。</p><p><strong>前缀和的特点：</strong></p><ol><li>将对于区间的求和操作转化为对于端点值的减法的操作；</li><li>区间求和操作的时间复杂度为 $O(1)$；</li><li>数组存放时要从 $1$ 开始；</li><li>前缀和数组比原来的数组序列多一个数，第 $0$ 个元素为 $0$。</li></ol><p><strong>前缀和算法解题的基本思路：</strong></p><ol><li>利用 $\text{sum}[i]&#x3D;a[i]+\text{sum}[i-1]$ 差分式；</li><li>从第 1 项到 $n$ 项，且第 $0$ 项无数据默认为 $0$；</li><li>对于区间求和的操作转化为端点值相减。</li></ol><p><strong>前缀和的一般解题过程：</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs txt">首先假设有一个数组：<br><br>1 2 3 4 5 7 2<br><br>前缀和后：<br><br>0 1 3 6 10 15 22 24<br><br>一般应用场景：<br><br>让你对区间 [l,r] 求和操作N次<br><br>如：<br><br>从第二个元素到第五个元素的和<br>从第二个元素到第四个元素的和<br>从第一个元素到第三个元素的和<br>....<br><br>这里我们先演示前三个：<br><br>对于每个 [l,r] 区间的求和操作转化为区间端点的加减操作<br><br>sum[l,r] =[r]-[l-1]<br><br>从第二个元素到第五个元素的和：<br><br>转化为：[5]-[1]<br><br>那么Sum[2,5]=[5]-[1]=14<br><br>且 2+3+4+5=14<br><br>确实是相等的，就是这么神奇。<br><br>我们继续操作：<br><br>从第二个元素到第四个元素的和<br><br>转化为：[4]-[1]<br><br>那么Sum[2,4]=[4]-[1]=9<br><br>且 2+3+4=9<br><br>我们继续操作：<br><br>从第一个元素到第三个元素的和<br><br>转化为：[3]-[0]<br><br>那么Sum[1,3]=[3]-[0]=6<br><br>且 1+2+3=6<br><br>符合题意，验证结束，咱么做个题目看一看<br></code></pre></td></tr></table></figure><h3 id="大学里的树木要维护"><a href="#大学里的树木要维护" class="headerlink" title="大学里的树木要维护"></a>大学里的树木要维护</h3><p><strong>题目描述:</strong></p><p>教室外有 $N$ 棵树，根据不同的位置和树种，学校已经对其进行了多年的维护。因为树的排列成线性，且非常长，我们可以将它们看作一条直线给他们编号。</p><p>树的编号从 $1-N$ 且 $N&lt;1e6$。由于已经维护了多年，每一个树都由学校的园艺人员进行了维护费用的统计。</p><p>每棵树的前期维护费用各不相同，但是由于未来需要要打药，所以有些树木的维护费用太高的话，就要重新种植。由于维护费用也称区间分布，所以常常需要统一个区间里的树木的维护开销。</p><p>现在园艺人员想知道，某个区间内的树木维护开销是多少。共计 $M$ 个区间需要查询。</p><p><strong>输入描述:</strong></p><p>每组输入的第一行有两个整数 $N（1 &lt;&#x3D; N&lt;&#x3D; 1000000）$和 $M（1 &lt;&#x3D; M &lt;&#x3D; 100000）$。</p><p>$N$ 代表马路的共计多少棵树，$M$ 代表区间的数目，$N$ 和 $M$ 之间用一个空格隔开。接下来的一行，包含 $N$ 个数，每个数之间用空格隔开。</p><p>接下来的$M$行每行包含两个不同的整数，用一个空格隔开，表示一个区域的起始点$L$和终止点$R$的坐标。</p><p><strong>输入样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">10 3<br>7 5 6 4 2 5 0 8 5 3<br>1 5<br>2 6<br>3 7<br></code></pre></td></tr></table></figure><p><strong>输出描述:</strong></p><p>输出包括 $M$ 行，每一行只包含一个整数，所有的花费。</p><p><strong>输出样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">24<br>22<br>17<br></code></pre></td></tr></table></figure><p><strong>样例:</strong></p><p>输入样例</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs txt">30 28<br>172 723 580 822 718 798 941 625 450 716 540 252 16 666 115 679 274 323 875 233 99 538 881 486 610 462 319 878 930 735<br>6 22<br>7 21<br>3 16<br>7 20<br>9 17<br>0 21<br>13 27<br>7 19<br>10 23<br>2 14<br>21 22<br>15 17<br>6 13<br>16 23<br>21 21<br>11 15<br>5 12<br>9 11<br>8 22<br>10 16<br>3 8<br>15 27<br>5 16<br>4 8<br>0 27<br>4 8<br>7 21<br>20 21<br></code></pre></td></tr></table></figure><p>输出样例</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs txt">8140<br>6804<br>7918<br>6705<br>3708<br>10617<br>6576<br>6472<br>6207<br>7847<br>637<br>1068<br>4338<br>3902<br>99<br>1589<br>5040<br>1706<br>6401<br>2984<br>4484<br>5894<br>6516<br>3904<br>13913<br>3904<br>6804<br>332<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s<br>2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><ol><li>利用$sum[i]&#x3D;a[i]+sum[i-1]$ 前缀和式在输入时求出前缀和；</li><li>依次读入区间的值，然后将对于区间的求和操作转化为对于区间端点操作加减，对于每个 [l,r] 区间的求和操作都转化为对端点[r]-[l-1]的操作。</li><li>输出答案。</li></ol><p><strong>前缀和一般解题过程：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp">输 入 N 和 M<br><br>输入 N 个值 并计算前缀和<br><span class="hljs-keyword">for</span>( <span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=N;i++)<br>    输入a[i]<br>    并计算sum[i]=sum[i<span class="hljs-number">-1</span>]+a[i]<br><br>输入 M 个区间，计算结果<br><br><span class="hljs-keyword">while</span>(M)<br>    M-=<span class="hljs-number">1</span><br>    输入 L , R<br>    计算 [r]-[l<span class="hljs-number">-1</span>]，并输出<br></code></pre></td></tr></table></figure><h4 id="答案解析-1"><a href="#答案解析-1" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> a[<span class="hljs-number">100005</span>];<br><span class="hljs-type">int</span> sum[<span class="hljs-number">100005</span>];<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-type">int</span> m;<br>    cin &gt;&gt; n &gt;&gt; m;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cin &gt;&gt; a[i];<br>        sum[i] = a[i] + sum[i - <span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (m &gt; <span class="hljs-number">0</span>)<br>    &#123;<br>        m -= <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> l, r;<br>        cin &gt;&gt; l &gt;&gt; r;<br>        cout &lt;&lt; sum[r] - sum[l - <span class="hljs-number">1</span>] &lt;&lt; endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个代码有个问题，虽然是能通过的，但是他是一个输入对应一个输出的，我们之前讲过，这对大部分的测评机是没问题。</p><p>终端输出：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs txt">10 3<br>7 5 6 4 2 5 0 8 5 3<br>1 5<br>24<br>2 6<br>22<br>3 7<br>17<br><br>Process returned 0 (0x0)   execution time : 1.741 s<br>Press any key to continue.<br></code></pre></td></tr></table></figure><p>但是如果有想要规规矩矩的处理，或者说题目要求必须全部读入后输出。我们可这样操作。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> a[<span class="hljs-number">100005</span>];<br><span class="hljs-type">int</span> sum[<span class="hljs-number">100005</span>];<br>vector&lt;<span class="hljs-type">int</span>&gt;ss;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-type">int</span> n ;<br>    <span class="hljs-type">int</span> m;<br>    cin&gt;&gt;n&gt;&gt;m;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        cin&gt;&gt;a[i];<br>        sum[i]=a[i]+sum[i<span class="hljs-number">-1</span>];<br><br>    &#125;<br><br>    <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        m-=<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> l,r;<br>        cin&gt;&gt;l&gt;&gt;r;<br>        ss.<span class="hljs-built_in">push_back</span>(sum[r]-sum[l<span class="hljs-number">-1</span>]);<br>    &#125;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> sss:ss) cout&lt;&lt;sss&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>终端输出：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs txt">10 3<br>7 5 6 4 2 5 0 8 5 3<br>1 5<br>2 6<br>3 7<br>24<br>22<br>17<br><br>Process returned 0 (0x0)   execution time : 6.235 s<br>Press any key to continue.<br></code></pre></td></tr></table></figure><p>都可以，大家看自己需求和心情选择即可。</p><p><strong>Python 解题代码</strong></p><p>普通代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [<span class="hljs-number">0</span>] * <span class="hljs-number">100005</span><br>sum1 = [<span class="hljs-number">0</span>] * <span class="hljs-number">100005</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    nm = <span class="hljs-built_in">input</span>().split()<br>    n = <span class="hljs-built_in">int</span>(nm[<span class="hljs-number">0</span>])<br>    m = <span class="hljs-built_in">int</span>(nm[<span class="hljs-number">1</span>])<br>    a = <span class="hljs-built_in">input</span>().split()<br>    a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, a))<br>    <span class="hljs-comment"># split 分割后都是 字符 这里是转化成数字</span><br>    <span class="hljs-comment">#print(a)</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># print(i)</span><br>        sum1[i] = sum1[i - <span class="hljs-number">1</span>]<br>        sum1[i] += a[i - <span class="hljs-number">1</span>]  <span class="hljs-comment"># 分割完后，a[]是从0开始,所以要减1</span><br><br>    <span class="hljs-keyword">while</span> m &gt; <span class="hljs-number">0</span>:<br><br>        m -= <span class="hljs-number">1</span><br>        lrv = <span class="hljs-built_in">input</span>().split()<br>        l = <span class="hljs-built_in">int</span>(lrv[<span class="hljs-number">0</span>])<br>        r = <span class="hljs-built_in">int</span>(lrv[<span class="hljs-number">1</span>])<br>        <span class="hljs-built_in">print</span>(sum1[r] - sum1[l - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><p>特殊代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [<span class="hljs-number">0</span>] * <span class="hljs-number">100005</span><br>sum1 = [<span class="hljs-number">0</span>] * <span class="hljs-number">100005</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    nm = <span class="hljs-built_in">input</span>().split()<br>    n = <span class="hljs-built_in">int</span>(nm[<span class="hljs-number">0</span>])<br>    m = <span class="hljs-built_in">int</span>(nm[<span class="hljs-number">1</span>])<br>    a = <span class="hljs-built_in">input</span>().split()<br><br>    a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, a))<br>    <span class="hljs-comment"># split 分割后都是 字符 这里是转化成数字</span><br>    <span class="hljs-comment"># print(a)</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># print(i)</span><br>        sum1[i] = sum1[i - <span class="hljs-number">1</span>]<br>        sum1[i] += a[i - <span class="hljs-number">1</span>]  <span class="hljs-comment"># 分割完后，a[]是从0开始,所以要减1</span><br><br>    ans = []<br>    <span class="hljs-keyword">while</span> m &gt; <span class="hljs-number">0</span>:<br><br>        m -= <span class="hljs-number">1</span><br>        lrv = <span class="hljs-built_in">input</span>().split()<br>        l = <span class="hljs-built_in">int</span>(lrv[<span class="hljs-number">0</span>])<br>        r = <span class="hljs-built_in">int</span>(lrv[<span class="hljs-number">1</span>])<br>        ans.append(sum1[r] - sum1[l - <span class="hljs-number">1</span>])<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ans:<br>        <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><p>普通算法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> a[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">100005</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> sum[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">100005</span>];<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> n; <span class="hljs-comment">//n层</span><br>        <span class="hljs-type">int</span> m; <span class="hljs-comment">// m个区间</span><br>        n = in.nextInt();<br>        m = in.nextInt();<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>        &#123;<br>            a[i]= in.nextInt();<br>            sum[i]=a[i]+sum[i-<span class="hljs-number">1</span>];<br><br>        &#125;<br><br>        <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)<br>        &#123;<br>            m--;<br>            <span class="hljs-type">int</span> l,r;<br>            l = in.nextInt();<br>            r = in.nextInt();<br>            System.out.println((sum[r]-sum[l-<span class="hljs-number">1</span>]));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>特殊代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> a[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">100005</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> sum[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">100005</span>];<br>    <span class="hljs-keyword">static</span> Vector ans=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;Integer&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        <span class="hljs-type">int</span> n; <span class="hljs-comment">//n层</span><br>        <span class="hljs-type">int</span> m; <span class="hljs-comment">// m个区间</span><br>        n = in.nextInt();<br>        m = in.nextInt();<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>        &#123;<br>             a[i]= in.nextInt();<br>            sum[i]=a[i]+sum[i-<span class="hljs-number">1</span>];<br><br>        &#125;<br><br>        <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)<br>        &#123;<br>            m--;<br>            <span class="hljs-type">int</span> l,r;<br>            l = in.nextInt();<br>            r = in.nextInt();<br>            ans.addElement(sum[r]-sum[l-<span class="hljs-number">1</span>]);<br>        &#125;<br><br>        <span class="hljs-keyword">for</span>(Object ab:ans)&#123;<br>            System.out.println(ab);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>我们这节课讲了差分和前缀和的知识点，并且也讲了怎样使用差分，怎样使前缀和，也讲了差分和前缀和最常见的两种情况。</p><p>差分和前缀和是很多思维题的解题技巧，必须要掌握熟练才能拿到简单题目的全部分数。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>差分与前缀和</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>工具函数模板</title>
    <link href="/2024/03/11/%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/"/>
    <url>/2024/03/11/%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/</url>
    
    <content type="html"><![CDATA[<h2 id="内置模板"><a href="#内置模板" class="headerlink" title="内置模板"></a>内置模板</h2><p>我们前面讲了很多数据结构相关的知识，本节课程，我们主要讲解怎么不自己定义，而是使用我们所使用的编程语言中，已经定义好的数据结构。</p><p>之前我们在栈那一节已经讲过栈的内置数据结构的使用，我们本章就不再进行讲解，我们这节课仍然采用那种方式进行讲解。</p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>迭代器讲解</li><li>线性表的使用</li><li>队列的使用</li><li>集合（set）的使用</li><li>映射（map）的使用</li></ul><h3 id="迭代器（Iterator）"><a href="#迭代器（Iterator）" class="headerlink" title="迭代器（Iterator）"></a>迭代器（Iterator）</h3><p>首先，明确一点迭代器是 <code>C++</code> 的知识，并不适用于 <code>Java</code> 和 <code>Python</code> 这两种语言，但是下面讲容器就要用到这一点，所以我们必须要提前讲一下。迭代器的知识点很复杂，了解即可，当然有余力可以深究，了解就能做题，实现方式看容器讲解。</p><p>对于数组我们可以采用指针进行访问，但是对于其他的存储空间连续的数据结构或者说是存储单元我们就需要找到另一种方式来替代指针的行为作用，从而达到对于非数组的数据结构的访问和遍历，于是我们定义了一种新的变量叫做迭代器。</p><p><strong>定义：</strong></p><p>迭代器是一种检查容器内元素并遍历元素的数据类型。</p><p>迭代器提供对一个容器中的对象的访问方法，并且定义了容器中对象的范围。</p><p><strong>迭代器和指针的区别：</strong></p><p>容器和<code>string</code>有迭代器类型同时拥有返回迭代器的成员。</p><p>如：容器有成员 <code>.begin()</code> 和 <code>.end()</code>，其中 <code>.begin()</code> 成员复制返回指向第一个元素的迭代器，即指向第一个元素的“地址”，而 <code>.end()</code> 成员返回指向容器尾元素的下一个位置的迭代器。</p><p>即 <code>.begin()</code> 指向的是第一个合法元素的位置，<code>.end()</code> 指向是容器后第一个不合法元素的地址。</p><p>相应的还有容器反向迭代器成员 <code>.rbegin()</code> <code>.rend()</code>，<code>.rbegin()</code> 返回容器的元素前最后一个不合法的地址，<code>rend()</code> 返回容器的最后一个合法地址。</p><h4 id="容器迭代器的使用"><a href="#容器迭代器的使用" class="headerlink" title="容器迭代器的使用"></a>容器迭代器的使用</h4><p>每种容器类型都定义了自己的迭代器类型：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">如 vector：vector&lt;int&gt;::iterator iter;//定义一个名为iter的变量<br></code></pre></td></tr></table></figure><p>数据类型是由 <code>vector&lt;int&gt;</code> 定义的 <code>iterator</code> 类型。简单说就是容器类定义了自己的 <code>iterator</code> 类型，用于访问容器内的元素。每个容器定义了一种名为 <code>iterator</code> 的类型，这种类型支持迭代器的各种行为。</p><p>我么们先讲一下各种迭代器的类型，在讲容器所用的迭代器类型，就可以明白怎么操作。</p><h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><p>写在前面，由于 <code>Python</code> 的语言的特点，所有的数据结构大部分都需要自己实现，但是其 <code>List</code> 功能较强，用起来比较简单，当然我们也会再说一遍怎么实现。</p><p>在 <code>Java</code> 中各种数据结构都是继承于 <code>list</code>，所以 <code>Java</code> 的 <code>list</code> 功能也很强，它的功能有很多，由于篇幅原因我们会挑比较重要的讲解，其他的还需要同学们多去使用。</p><h3 id="Vector-容器（类）"><a href="#Vector-容器（类）" class="headerlink" title="Vector 容器（类）"></a>Vector 容器（类）</h3><p>线性表中有 <code>Vector</code> 和 <code>list</code>，两者作用比较相似。</p><p><code>Vector</code> 的主要作用就是可变长度的数组，就把他当成数组使用即可。</p><p>至于为什么我们选择讲 <code>Vector</code> 而不是 <code>List</code>，因为 <code>Vector</code> 可以当作数组使用，用起来非常简单，也非常方便。</p><p>我们先讲解一下 C++ 的 <code>Vector</code> 使用：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span>   <span class="hljs-comment">//头文件</span></span><br>vector&lt;<span class="hljs-type">int</span>&gt; a;      <span class="hljs-comment">//定义了一个int类型的vector容器a</span><br>vector&lt;<span class="hljs-type">int</span>&gt; b[<span class="hljs-number">100</span>]; <span class="hljs-comment">//定义了一个int类型的vector容器b组</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">rec</span><br>&#123;<br>    ···<br>&#125;;<br>vector&lt;rec&gt; c;            <span class="hljs-comment">//定义了一个rec类型的vector容器c</span><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator it; <span class="hljs-comment">//vector的迭代器，与指针类似</span><br></code></pre></td></tr></table></figure><p>具体操作如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp">a.<span class="hljs-built_in">size</span>()           <span class="hljs-comment">//返回实际长度（元素个数），O(1)复杂度</span><br>a.<span class="hljs-built_in">empty</span>()      <span class="hljs-comment">//容器为空返回1，否则返回0，O(1)复杂度</span><br>a.<span class="hljs-built_in">clear</span>()      <span class="hljs-comment">//把vector清空</span><br>a.<span class="hljs-built_in">begin</span>()      <span class="hljs-comment">//返回指向第一个元素的迭代器，*a.begin()与a[0]作用相同</span><br>a.<span class="hljs-built_in">end</span>()        <span class="hljs-comment">//越界访问，指向vector尾部，指向第n个元素再往后的边界</span><br>a.<span class="hljs-built_in">front</span>()      <span class="hljs-comment">//返回第一个元素的值，等价于*a.begin和a[0]</span><br>a.<span class="hljs-built_in">back</span>()       <span class="hljs-comment">//返回最后一个元素的值，等价于*--a.end()和a[size()-1]</span><br>a.<span class="hljs-built_in">push_back</span>(x) <span class="hljs-comment">//把元素x插入vector尾部</span><br>a.<span class="hljs-built_in">pop_back</span>()   <span class="hljs-comment">//删除vector中最后一个元素</span><br></code></pre></td></tr></table></figure><p>遍历的方式有两种：</p><ol><li>迭代器使用与指针类似，可如下遍历整个容器。</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> ( vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=a.<span class="hljs-built_in">begin</span>() ; it!=a.<span class="hljs-built_in">end</span>() ; it++ )<br>cout&lt;&lt;*iterator&lt;&lt;endl;<br></code></pre></td></tr></table></figure><ol start="2"><li>当成数组使用。</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>( <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;a.size();i++) <span class="hljs-built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure><p>Java 中我们一般使用 List，相信大家已经非常熟悉了，我们这里给大家补充一下 Vector 的用法，与 List 的使用方式非常的类似。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//第一种构造方法创建一个默认的向量，默认大小为 10：</span><br>Vector()<br><span class="hljs-comment">//第二种构造方法创建指定大小的向量。</span><br>Vector(<span class="hljs-type">int</span> size)<br><span class="hljs-comment">//第三种构造方法创建指定大小的向量，并且增量用 incr 指定。增量表示向量每次增加的元素数目。</span><br>Vector(<span class="hljs-type">int</span> size,<span class="hljs-type">int</span> incr)<br><span class="hljs-comment">//第四种构造方法创建一个包含集合 c 元素的向量：</span><br>Vector(Collection c)<br></code></pre></td></tr></table></figure><p>以下为 <code>Java Vector</code> 的 <code>Api</code>。</p><table><thead><tr><th><strong>修饰符和类型</strong></th><th><strong>方法和说明</strong></th></tr></thead><tbody><tr><td>boolean</td><td>add(E e)将指定的元素附加到此 Vector 的末尾。</td></tr><tr><td>void</td><td>add(int index, E element)在此 Vector 的指定位置插入指定元素。</td></tr><tr><td>boolean</td><td>addAll(Collection&lt;? extends E&gt; c)将指定集合中的所有元素追加到末尾 这个向量，按照它们由指定的返回的顺序 集合的迭代器。</td></tr><tr><td>boolean</td><td>addAll(int index, Collection&lt;? extends E&gt; c)将指定 Collection 中的所有元素插入到此 指定位置的向量。</td></tr><tr><td>void</td><td>addElement(E obj)将指定的组件添加到此向量的末尾， 将其大小增加一。</td></tr><tr><td>int</td><td>capacity()返回此向量的当前容量。</td></tr><tr><td>void</td><td>clear()从此 Vector 中删除所有元素。</td></tr><tr><td>Object</td><td>clone()返回此向量的克隆。</td></tr><tr><td>boolean</td><td>contains(Object o)退货 true 如果此向量包含指定的元素。</td></tr><tr><td>boolean</td><td>containsAll(Collection&lt;?&gt; c)如果此 Vector 包含所有元素，则返回 true 指定的集合。</td></tr><tr><td>void</td><td>copyInto $Object$ [ ] $anArray$将此向量的分量复制到指定的数组中。</td></tr><tr><td>E</td><td>elementAt(int index)返回指定索引处的组件。</td></tr><tr><td>Enumeration</td><td>elements()返回此向量的组件的枚举。</td></tr><tr><td>void</td><td>ensureCapacity(int minCapacity)如有必要，增加此向量的容量，以确保它至少可以容纳由指定的组件数量最小容量参数。</td></tr><tr><td>boolean</td><td>equals(Object o)比较指定的 Object 与此 Vector 是否相等。</td></tr><tr><td>E</td><td>firstElement()返回第一个组件（索引处的项目 0） 的这个向量。</td></tr><tr><td>E</td><td>get(int index)返回此 Vector 中指定位置的元素。</td></tr><tr><td>int</td><td>hashCode()返回此 Vector 的哈希码值。</td></tr><tr><td>int</td><td>indexOf(Object o)返回指定元素第一次出现的索引 在此向量中，如果此向量不包含该元素，则为 -1。</td></tr><tr><td>int</td><td>indexOf(Object o,int index)返回指定元素第一次出现的索引这个向量，从 index, 或返回 -1 如果 未找到该元素。</td></tr><tr><td>void</td><td>insertElementAt(E obj, int index)将指定对象作为组件插入此向量中的 指定的 index.</td></tr><tr><td>boolean</td><td>isEmpty()测试此向量是否没有组件。</td></tr><tr><td>Iterator</td><td>iterator()以适当的顺序返回此列表中元素的迭代器</td></tr><tr><td>E</td><td>lastElement()返回向量的最后一个组件。</td></tr><tr><td>int</td><td>lastIndexOf(Object o)返回指定元素最后一次出现的索引在此向量中，如果此向量不包含该元素，则为 -1。</td></tr><tr><td>int</td><td>lastIndexOf(Object o, int index)返回指定元素最后一次出现的索引这个向量，从 index, 或返回 -1 如果 未找到该元素。</td></tr><tr><td>ListIterator</td><td>listIterator()返回此列表中元素的列表迭代器（在适当的顺序）。</td></tr><tr><td>ListIterator</td><td>listIterator(int index)返回此列表中元素的列表迭代器（在适当的序列），从列表中的指定位置开始。</td></tr><tr><td>E</td><td>remove(int index)移除此 Vector 中指定位置的元素。</td></tr><tr><td>boolean</td><td>remove(Object o)移除此 Vector 中第一次出现的指定元素如果 Vector 不包含该元素，则它保持不变。</td></tr><tr><td>boolean</td><td>removeAll(Collection&lt;?&gt; c)从此 Vector 中删除其包含在指定的集合。</td></tr><tr><td>void</td><td>removeAllElements()从此向量中删除所有组件并将其大小设置为零。</td></tr><tr><td>boolean</td><td>removeElement(Object obj)删除参数的第一个（最低索引）出现从这个向量。</td></tr><tr><td>void</td><td>removeElementAt(int index)删除指定索引处的组件。</td></tr><tr><td>protected void</td><td>removeRange(int fromIndex, int toIndex)从此列表中删除索引介于两者之间的所有元素 fromIndex，包括在内，和 toIndex， 独家的。</td></tr><tr><td>boolean</td><td>retainAll(Collection&lt;?&gt; c)仅保留此 Vector 中包含在指定的集合。</td></tr><tr><td>E</td><td>set(int index, E element)将此 Vector 中指定位置的元素替换为指定的元素。</td></tr><tr><td>void</td><td>setElementAt(E obj,int index)将组件设置在指定的位置 index 这个的向量是指定的对象。</td></tr><tr><td>void</td><td>setSize(int newSize)设置此向量的大小。</td></tr><tr><td>int</td><td>size()返回此向量中的组件数。</td></tr><tr><td>List</td><td>subList(int fromIndex,int toIndex)返回此列表中 fromIndex 之间的部分的视图</td></tr><tr><td>Object[]</td><td>toArray()返回一个包含此 Vector 中所有元素的数组以正确的顺序。</td></tr><tr><td>T[]</td><td>$toArray\ T$[] 返回一个包含此 Vector 中所有元素的数组正确的顺序; 返回数组的运行时类型指定数组。</td></tr><tr><td>String</td><td>toString()返回此 Vector 的字符串表示形式，包含 每个元素的字符串表示。</td></tr><tr><td>void</td><td>trimToSize()将此向量的容量修剪为向量的电流 尺寸。</td></tr></tbody></table><p>遍历 Vector</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Enumeration</span> <span class="hljs-variable">vEnum</span> <span class="hljs-operator">=</span> v.elements();<br><span class="hljs-keyword">while</span> (vEnum.hasMoreElements())<br>    System.out.print(vEnum.nextElement() + <span class="hljs-string">&quot; &quot;</span>);<br></code></pre></td></tr></table></figure><p><strong>Python 中，我们直接使用 list 即可来实现。</strong></p><h2 id="题目解析"><a href="#题目解析" class="headerlink" title="题目解析"></a>题目解析</h2><p>快递员需要对快递进行分拣，现在小李是一名快递员，他想要你帮他设计一个程序用于快递的分拣，按城市分开。</p><p>现在有以下输入：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">单号 省份<br><br>请你将单号按照城市分开，并输出。<br><br>城市按照输入顺序排序<br><br>单号按照输入顺序排序<br></code></pre></td></tr></table></figure><p>样例如下：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入<br><br>10<br><br>10124214 北京<br>12421565  上海<br>sdafasdg213 天津<br>fasdfga124 北京<br>145252  上海<br>235wtdfsg 济南<br>3242356fgdfsg 成都<br>23423 武汉<br>23423565f 沈阳<br>1245dfwfs 成都<br><br>输出<br><br>北京 2<br>10124214<br>fasdfga124<br>上海 2<br>12421565<br>145252<br>天津 1<br>sdafasdg213<br>济南 1<br>235wtdfsg<br>成都 2<br>3242356fgdfsg<br>1245dfwfs<br>武汉 1<br>23423<br>沈阳 1<br>23423565f<br></code></pre></td></tr></table></figure><p>下面我们来分析一下解题思路。</p><p>首先我们要知道中国城市肯定在 $1000$ 个以内，但是单号我们不确定，我们不可能每个数组开 $10000$ 个，那样内存不够，所以这时候我们就用到了我们的 $vector$，他的容量是动态申请的，在比赛中我们可以理解为无限制。</p><ul><li>第一步：我们创建一个 $vector$ 用于保存地址</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">vector&lt;string&gt; city;<br></code></pre></td></tr></table></figure><ul><li>第二步：我们创建一个 $vector$ 组用于存放单号</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">vector&lt;string&gt; dig[<span class="hljs-number">1000</span>];<br></code></pre></td></tr></table></figure><ul><li><p>第三步：我们定义一个映射函数，因为你的城市可能会再次出现，你需要知道之前有没有。</p></li><li><p>第四步：我们开始读入操作并按照顺序进行存放</p></li></ul><h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><p>C++ 解题代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br>vector&lt;string&gt; city;<br>vector&lt;string&gt; dig[<span class="hljs-number">1000</span>];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Myfind</span><span class="hljs-params">(string s)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;city.<span class="hljs-built_in">size</span>();i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(city[i]==s) <span class="hljs-keyword">return</span> i;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        string d,c;<br>        cin&gt;&gt;d&gt;&gt;c;<br>        <span class="hljs-type">int</span> flag=<span class="hljs-built_in">Myfind</span>(c);<br>        <span class="hljs-keyword">if</span>(flag==<span class="hljs-number">-1</span>)&#123;<br>            city.<span class="hljs-built_in">push_back</span>(c);<br>            dig[city.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>].<span class="hljs-built_in">push_back</span>(d);<br>        &#125;<br>        <span class="hljs-keyword">else</span>  dig[flag].<span class="hljs-built_in">push_back</span>(d);<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;city.<span class="hljs-built_in">size</span>();i++)<br>    &#123;<br>        cout&lt;&lt;city[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>&lt;&lt;dig[i].<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;dig[i].<span class="hljs-built_in">size</span>();j++)<br>            cout&lt;&lt;dig[i][j]&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> Vector city=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;String&gt;();<br>  <span class="hljs-keyword">static</span> Vector &lt;Vector&lt;String&gt;&gt; dig= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span> &lt;Vector&lt;String&gt;&gt;();<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">Myfind</span><span class="hljs-params">(String s)</span><br>  &#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;city.size();i++)<br>      &#123;<br>          <span class="hljs-keyword">if</span>(city.get(i).equals(s)) &#123;<br>              <span class="hljs-keyword">return</span> i;<br>          &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-type">int</span> n;<br>      Scanner in=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n=in.nextInt();<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>      &#123;<br>          String d,c;<br>          d=in.next();<br>          c=in.next();<br>          <span class="hljs-type">int</span> flag=Myfind(c);<br>          <span class="hljs-keyword">if</span>(flag==-<span class="hljs-number">1</span>)&#123;<br>              city.addElement(c);<br>              dig.addElement(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;String&gt;());<br>              dig.get(city.size()-<span class="hljs-number">1</span>).addElement(d);<br><br>          &#125;<br>          <span class="hljs-keyword">else</span>   dig.get(flag).addElement(d);<br>      &#125;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;city.size();i++)<br>      &#123;<br>          System.out.println(city.get(i)+<span class="hljs-string">&quot; &quot;</span>+dig.get(i).size());<br>          <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j&lt; dig.get(i).size(); j++)<br>              System.out.println(dig.get(i).get(j));<br>      &#125;<br>  &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 实现方式:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">city=[]<br>dig = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">s</span>):<br>   <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(city)):<br>       <span class="hljs-keyword">if</span> (city[i]==s):<br>           <span class="hljs-keyword">return</span> i<br>   <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>   n=<span class="hljs-built_in">int</span> (<span class="hljs-built_in">input</span>())<br>   <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n):<br>       d=<span class="hljs-built_in">input</span>().split()<br>       <span class="hljs-comment">#print(d[1]        )</span><br>       flag=find(d[<span class="hljs-number">1</span>])<br>       <span class="hljs-keyword">if</span>(flag==-<span class="hljs-number">1</span>):<br>           city.append(d[<span class="hljs-number">1</span>])<br>           dig[<span class="hljs-built_in">len</span>(city)-<span class="hljs-number">1</span>].append(d[<span class="hljs-number">0</span>])<br>       <span class="hljs-keyword">else</span>:<br>           dig[flag].append(d[<span class="hljs-number">0</span>])<br><br>   <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(city)):<br>       <span class="hljs-built_in">print</span>(city[i],<span class="hljs-built_in">len</span>(dig[i]))<br>       <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(dig[i])):<br>           <span class="hljs-built_in">print</span>(dig[i][j])<br></code></pre></td></tr></table></figure><h3 id="队列-Queue"><a href="#队列-Queue" class="headerlink" title="队列 Queue"></a>队列 Queue</h3><p>队列的讲解在之前的课程中已经讲过了，忘记的快回去复习。</p><p>我们直接开始看操作吧。</p><h4 id="C-中的队列"><a href="#C-中的队列" class="headerlink" title="C++ 中的队列"></a>C++ 中的队列</h4><p>定义方式：在 C++ 里所有容器的定义方式基本一致。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>&gt; myqueue;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-type">int</span>&gt; myqueue_int;<br></code></pre></td></tr></table></figure><p>成员函数:</p><ul><li><code>front()</code>：返回 <code>queue</code> 中第一个元素的引用。</li><li><code>back()</code>：返回 <code>queue</code> 中最后一个元素的引用。</li><li><code>push(const T&amp; obj)</code>：在 <code>queue</code> 的尾部添加一个元素的副本。</li><li><code>pop()</code>：删除 <code>queue</code> 中的第一个元素。</li><li><code>size()</code>：返回 <code>queue</code> 中元素的个数。</li><li><code>empty()</code>：如果 <code>queue</code> 中没有元素的话，返回 true。</li></ul><p><strong>Java 中的队列:</strong></p><p>定义方式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Queue&lt;String&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;String&gt;();<br></code></pre></td></tr></table></figure><p>部分成员函数（包括继承的）：</p><ul><li><code>add()</code>: 增加一个元索,如果队列已满，则抛出一个异常</li><li><code>remove()</code>:移除并返回队列头部的元素，如果队列为空，则抛出一个异常</li><li><code>element()</code>:返回队列头部的元素，如果队列为空，则抛出一个异常</li><li><code>offer()</code>:添加一个元素并返回 <code>true</code>，如果队列已满，则返回 <code>false</code></li><li><code>poll()</code>: 移除并返问队列头部的元素，如果队列为空，则返回 <code>null</code></li><li><code>peek()</code>: 返回队列头部的元素，如果队列为空，则返回 <code>null</code></li><li><code>put()</code>: 添加一个元素， 如果队列满，则阻塞</li><li><code>take()</code>: 移除并返回队列头部的元素，如果队列为空，则阻塞</li><li><code>size()</code>: 返回队列长度。</li></ul><p><strong>Python 中的队列</strong></p><p>定义方式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br><span class="hljs-comment">## maxsize设置队列中，数据上限，小于或等于0则不限制，容器中大于这个数则阻塞，直到队列中的数据被消掉</span><br>q = Queue(maxsize=<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>成员函数：</p><ul><li><p><code>Queue.qsize()</code> 返回队列的大致大小。</p></li><li><p><code>Queue.empty()</code> 如果队列为空，返回 <code>True</code> 否则返回 <code>False</code></p></li><li><p><code>Queue.full()</code> 如果队列是满的返回 <code>True</code> ，否则返回 <code>False</code></p></li><li><p><code>Queue.put(item, block=True, timeout=None)</code></p><ul><li>常用时忽略默认参数，即使用 <code>Queue.put(item)</code>。</li><li>将 <code>item</code> 放入队列，如果可选参数 <code>block</code> 是 <code>true</code> 并且 <code>timeout</code> 是 <code>None</code> (默认)，则在必要时阻塞至有空闲插槽可用。</li><li>如果 <code>timeout</code> 是个正数，将最多阻塞 <code>timeout</code> 秒，如果在这段时间没有可用的空闲插槽，将引发 <code>Full</code> 异常。</li><li>反之 (<code>block</code> 是 <code>false</code>)，如果空闲插槽立即可用，则把 <code>item</code> 放入队列，否则引发 <code>Full</code> 异常 ( 在这种情况下，<code>timeout</code> 将被忽略)。</li></ul></li><li><p><code>Queue.get(block=True, timeout=None)</code></p><ul><li>常用时忽略默认参数，即使用 <code>Queue.get()</code>。</li><li>从队列中移除并返回一个项目。如果可选参数 <code>block</code> 是 <code>true</code> 并且 <code>timeout</code> 是 <code>None</code> (默认值)，则在必要时阻塞至项目可得到。</li><li>如果 <code>timeout</code> 是个正数，将最多阻塞 <code>timeout</code> 秒，如果在这段时间内项目不能得到，将引发 <code>Empty</code> 异常。反之 (<code>block</code> 是 <code>false</code>)，如果一个项目立即可得到，则返回一个项目，否则引发 <code>Empty</code> 异常 (这种情况下，<code>timeout</code> 将被忽略)。</li></ul></li></ul><h4 id="题目回顾"><a href="#题目回顾" class="headerlink" title="题目回顾"></a>题目回顾</h4><blockquote><p>CLZ 的银行。</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs txt">第一行 M 次操作（M&lt;1000）<br><br>第二行 到 第M+1行 输入操作<br><br>格式：   IN name V<br>        OUT V<br>        IN name2 N<br>        OUT N<br>        即 第一个字符串为操作 是IN进入排队和OUT 出队<br>            IN 排队 跟着两个字符串为姓名和权限V或N<br>            OUT 为出队即完成操作，V和N代表那个窗口完成了操作<br><br>输出：M次操作后V队列和N队列中姓名，先输出V队列后输出N队列。<br><br>样例：<br><br>输入：<br><br>5<br>IN xiaoming N<br>IN Adel V<br>IN laozhao N<br>OUT N<br>IN CLZ V<br><br>输出：<br><br>Adel<br>CLZ<br>laozhao<br></code></pre></td></tr></table></figure><p>具体的题目讲解，我们之前就已经讲解过了，这里我们主要是来看一下预置代码的方便性。</p><h4 id="完整代码-1"><a href="#完整代码-1" class="headerlink" title="完整代码"></a>完整代码</h4><p>C++实现：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br>queue&lt;string&gt; V;<br>queue&lt;string&gt; N;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> M;<br>    cin&gt;&gt;M;<br><br>    <span class="hljs-keyword">while</span>(M--) <span class="hljs-comment">//</span><br>    &#123;<br>        string op,name,type;<br>        cin&gt;&gt;op;<br>        <span class="hljs-keyword">if</span>(op==<span class="hljs-string">&quot;IN&quot;</span>)<br>        &#123;<br>            cin&gt;&gt;name&gt;&gt;type;<br><br>            <span class="hljs-keyword">if</span>(type==<span class="hljs-string">&quot;V&quot;</span>)<br>                V.<span class="hljs-built_in">push</span>(name);<br><br>            <span class="hljs-keyword">else</span><br>                N.<span class="hljs-built_in">push</span>(name);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            cin&gt;&gt;type;<br><br>            <span class="hljs-keyword">if</span>(type==<span class="hljs-string">&quot;V&quot;</span>)<br>                V.<span class="hljs-built_in">pop</span>();<br>            <span class="hljs-keyword">else</span><br>                N.<span class="hljs-built_in">pop</span>();<br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span>(V.<span class="hljs-built_in">size</span>())<br>    &#123;<br>        cout&lt;&lt;V.<span class="hljs-built_in">front</span>()&lt;&lt;endl;<br>        V.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    <span class="hljs-keyword">while</span>(N.<span class="hljs-built_in">size</span>())<br>    &#123;<br>        cout&lt;&lt;N.<span class="hljs-built_in">front</span>()&lt;&lt;endl;<br>        N.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Java 实现</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><span class="hljs-keyword">import</span> java.util.Queue;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> Queue&lt;String&gt; V=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;String&gt;();<br><br>    <span class="hljs-keyword">static</span> Queue&lt;String&gt; N=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;String&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">int</span> M;<br>        Scanner in=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        M=in.nextInt();<br>        <span class="hljs-keyword">while</span>(M&gt;<span class="hljs-number">0</span>) <span class="hljs-comment">//</span><br>        &#123;<br>            M--;<br>            String op,name,type;<br>            op=in.next();<br>            <span class="hljs-comment">// System.out.println(&quot;op&quot;+op);</span><br>            <span class="hljs-keyword">if</span>(op.contains(<span class="hljs-string">&quot;IN&quot;</span>))<br>            &#123;<br>                name=in.next();<br>                type=in.next();<br>                <span class="hljs-keyword">if</span>(type.contains(<span class="hljs-string">&quot;V&quot;</span>)) &#123;<br>                    V.offer(name);<br>                &#125;<br>                <span class="hljs-keyword">else</span> &#123;<br>                    N.offer(name);<br>                &#125;<br>                <span class="hljs-comment">// System.out.println(&quot;name:&quot;+name+&quot;type:&quot;+type);</span><br><br>                <span class="hljs-comment">// System.out.println(Vqueue);</span><br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                type=in.next();<br>                <span class="hljs-keyword">if</span>(type.contains(<span class="hljs-string">&quot;V&quot;</span>))&#123;<br>                    V.poll();<br>                &#125;<br>                <span class="hljs-keyword">else</span> &#123;<br>                    N.poll();<br>                &#125;<br>                <span class="hljs-comment">// System.out.println(&quot;type&quot;+type);</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">while</span>(V.size()!=<span class="hljs-number">0</span>)<br>        &#123;<br>            System.out.println(V.poll());<br>        &#125;<br>        <span class="hljs-keyword">while</span>(N.size()!=<span class="hljs-number">0</span>)<br>        &#123;<br>            System.out.println(N.poll());<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 实现</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> queue<br><br>V = queue.Queue()<br>N = queue.Queue()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>  M = <span class="hljs-number">0</span><br>  M = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>  <span class="hljs-keyword">while</span> M &gt; <span class="hljs-number">0</span>:<br>      M -= <span class="hljs-number">1</span><br>      op = <span class="hljs-built_in">input</span>().split()<br><br>      <span class="hljs-comment"># print(op[0])</span><br><br>      <span class="hljs-keyword">if</span> op[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;IN&#x27;</span>:<br>          <span class="hljs-keyword">if</span> op[<span class="hljs-number">2</span>] == <span class="hljs-string">&quot;V&quot;</span>:<br>              V.put(op[<span class="hljs-number">1</span>])<br>          <span class="hljs-keyword">else</span>:<br>              N.put(op[<span class="hljs-number">1</span>])<br>      <span class="hljs-keyword">else</span>:<br>          <span class="hljs-keyword">if</span> op[<span class="hljs-number">1</span>] == <span class="hljs-string">&quot;V&quot;</span>:<br>              V.get()<br>          <span class="hljs-keyword">else</span>:<br>              N.get()<br>          <span class="hljs-comment"># print(&#x27;out&#x27;)</span><br>      <span class="hljs-comment"># print(&quot;VVVVV&quot;,Vqueue)</span><br>      <span class="hljs-comment"># print(&quot;NNNN&quot;,Nqueue)</span><br>      <span class="hljs-comment"># print(M)</span><br><br><br>  <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> (V.empty()):<br>      <span class="hljs-built_in">print</span>(V.get())<br><br>  <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> (N.empty()):<br>      <span class="hljs-built_in">print</span>(N.get())<br></code></pre></td></tr></table></figure><h3 id="Map-映射"><a href="#Map-映射" class="headerlink" title="Map 映射"></a>Map 映射</h3><p>在之前我们学习散列表的时候我们就接触过了映射，这里我们要讲的是一种类似的数据结构。</p><p><code>map</code> 是一个关联容器，它提供一对一的 <code>hash</code>。</p><ul><li>第一个可以称为关键字(<code>key</code>)，每个关键字只能在 <code>map</code> 中出现一次</li><li>第二个可能称为该关键字的值(<code>value</code>)</li></ul><p><code>map</code> 以模板（泛型）方式实现，可以存储任意类型的数据，包括使用者自定义的数据类型。<code>Map</code> 主要用于资料一对一映射（<code>one-to-one</code>）的情況，<code>map</code> 在 <code>C++</code> 的內部的实现自建一颗红黑树，这颗树具有对数据自动排序的功能。在 <code>map</code> 内部所有的数据都是有序的。</p><p>比如，像是管理班级内的学生，<code>Key</code> 值为学号，<code>Value</code> 放其他信息的结构体或者类。</p><h4 id="C-中的-map"><a href="#C-中的-map" class="headerlink" title="C++ 中的 map"></a>C++ 中的 map</h4><p>定义方式：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">map&lt;<span class="hljs-type">char</span>, <span class="hljs-type">int</span>&gt; mymap1;<br>map&lt;string, <span class="hljs-type">int</span>&gt; mymap2;<br></code></pre></td></tr></table></figure><p>一般用法：</p><ol><li>看容量。</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> map.<span class="hljs-built_in">size</span>();<span class="hljs-comment">//查询map中有多少对元素</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">// 查询map是否为空</span><br></code></pre></td></tr></table></figure><ol start="2"><li>插入。</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">map</span>.insert(<span class="hljs-built_in">make_pair</span>(key,value));<br><span class="hljs-comment">//或者</span><br><span class="hljs-built_in">map</span>.insert(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">char</span>, <span class="hljs-type">int</span>&gt;(key, value))<br><span class="hljs-comment">//或者</span><br><span class="hljs-built_in">map</span>[key]=value<br></code></pre></td></tr></table></figure><ol start="3"><li>取值。</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">map&lt;<span class="hljs-type">int</span>, string&gt; map;<br><br><span class="hljs-comment">//如果map中没有关键字2233，使用[]取值会导致插入</span><br><span class="hljs-comment">//因此，下面语句不会报错，但会使得输出结果结果为空</span><br>cout&lt;&lt;map[<span class="hljs-number">2233</span>]&lt;&lt;endl;<br><br><span class="hljs-comment">//但是使用使用at会进行关键字检查，因此下面语句会报错</span><br>map.<span class="hljs-built_in">at</span>(<span class="hljs-number">2016</span>) = <span class="hljs-string">&quot;Bob&quot;</span>;<br></code></pre></td></tr></table></figure><ol start="4"><li>遍历操作</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp">map&lt;string, string&gt;::iterator it;<br><span class="hljs-keyword">for</span> (it = mapSet.<span class="hljs-built_in">begin</span>(); it != mapSet.<span class="hljs-built_in">end</span>(); ++it)<br>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;key&quot;</span> &lt;&lt; it-&gt;first &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;value&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="5"><li>查找操作</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">m.<span class="hljs-built_in">count</span>(key)：<span class="hljs-comment">//由于map不包含重复的key，因此m.count(key)取值为0，或者1，表示是否包含。</span><br>m.<span class="hljs-built_in">find</span>(key)：<span class="hljs-comment">//返回迭代器，判断是否存在。</span><br></code></pre></td></tr></table></figure><p><strong>Java 中的 map</strong></p><p>定义方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Map</span> <span class="hljs-variable">m1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>();<br></code></pre></td></tr></table></figure><p>这里我们讲的是排序的 <code>map</code> 还有不排序的 <code>map</code>，<code>java</code> 里面叫 <code>hashmap</code>，<code>C++</code> 里叫 <code>unordered_map</code>，除了不排序，用法和功能都一样。</p><p>二者相差无几，大家如果不需要排序可以直接使用。</p><p>成员方法</p><table><thead><tr><th>方法名</th><th>方法描述</th></tr></thead><tbody><tr><td>void clear( )</td><td>从此映射中移除所有映射关系（可选操作）。</td></tr><tr><td>boolean containsKey(Object k)</td><td>如果此映射包含指定键的映射关系，则返回 true。</td></tr><tr><td>boolean containsValue(Object v)</td><td>如果此映射将一个或多个键映射到指定值，则返回 true。</td></tr><tr><td>boolean equals(Object obj)</td><td>比较指定的对象与此映射是否相等。</td></tr><tr><td>Object get(Object k)</td><td>返回指定键所映射的值；如果此映射不包含该键的映射关系，则返回 null。</td></tr><tr><td>int hashCode( )</td><td>返回此映射的哈希码值。</td></tr><tr><td>boolean isEmpty( )</td><td>如果此映射未包含键-值映射关系，则返回 true。</td></tr><tr><td>Set keySet( )</td><td>返回此映射中包含的键的 Set 视图。</td></tr><tr><td>Object put(Object k, Object v)</td><td>将指定的值与此映射中的指定键关联</td></tr><tr><td>Object remove(Object k)</td><td>如果存在一个键的映射关系，则将其从此映射中移除（可选操作）。</td></tr><tr><td>int size( )</td><td>返回此映射中的键-值映射关系数。</td></tr><tr><td>Collection values( )</td><td>返回此映射中包含的值的 Collection 视图。</td></tr></tbody></table><p><strong>Python 字典</strong></p><p>在 <code>Python</code> 中我们不叫映射，也不叫 <code>map</code>，我们称作字典。用法跟 <code>Java</code> 和 <code>c++</code> 都是有一定区别的。</p><ol><li>字典的创建。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">massege=&#123;<span class="hljs-string">&#x27;小李&#x27;</span>:<span class="hljs-string">&#x27;123124543643&#x27;</span>,<span class="hljs-string">&#x27;xiaohua&#x27;</span>:<span class="hljs-string">&#x27;17855666&#x27;</span>,<span class="hljs-string">&#x27;LiMing&#x27;</span>:<span class="hljs-string">&#x27;1249699859456&#x27;</span>&#125;<br><br><span class="hljs-comment">#或者创建空的字典</span><br>empty_dict = &#123;&#125;<br><span class="hljs-comment">#或者使用元组作为key</span><br>group_dict = &#123;(<span class="hljs-number">60</span>, <span class="hljs-number">99</span>):<span class="hljs-string">&#x27;good&#x27;</span>, <span class="hljs-number">100</span>:<span class="hljs-string">&#x27;nice&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>字典的添加。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 如果字典内不含有相应的Key值，则会执行添加操作</span><br><span class="hljs-built_in">dict</span>[key]=value<br></code></pre></td></tr></table></figure><ol start="3"><li>字典的修改。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 如果字典内含有相应的Key值，则会执行更新操作</span><br><span class="hljs-built_in">dict</span>[key]=new_value<br><br><span class="hljs-comment"># 使用update()修改</span><br><span class="hljs-comment"># update() 方法可使用一个字典所包含的 key-value 对来更新己有的字典。如果有就修改，没有就添加。</span><br><span class="hljs-built_in">dict</span>.update(&#123;<span class="hljs-string">&#x27;key&#x27;</span>:<span class="hljs-number">123</span>,<span class="hljs-string">&#x27;key2&#x27;</span>:<span class="hljs-number">234</span>&#125;)<br></code></pre></td></tr></table></figure><ol start="4"><li>字典的删除。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">del</span> <span class="hljs-built_in">dict</span>[<span class="hljs-string">&#x27;key&#x27;</span>]  <span class="hljs-comment"># 删除键是&#x27;key&#x27;的条目</span><br><span class="hljs-built_in">dict</span>.clear()      <span class="hljs-comment"># 清空字典所有条目</span><br><span class="hljs-keyword">del</span> <span class="hljs-built_in">dict</span>          <span class="hljs-comment"># 删除字典</span><br></code></pre></td></tr></table></figure><ol start="5"><li>字典的访问。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">dict</span> = &#123;<span class="hljs-string">&#x27;Name&#x27;</span>: <span class="hljs-string">&#x27;Zara&#x27;</span>, <span class="hljs-string">&#x27;Age&#x27;</span>: <span class="hljs-string">&#x27;7&#x27;</span>&#125;<br><span class="hljs-built_in">print</span> (<span class="hljs-built_in">dict</span>[<span class="hljs-string">&#x27;Name&#x27;</span>])<br><br><span class="hljs-comment">#当然如果key值不存在，将会抛出异常</span><br><span class="hljs-comment">#也可以是用get()方法,不存在会返回None，但不会抛出异常</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">dict</span>.get(<span class="hljs-string">&#x27;Name&#x27;</span>))<br></code></pre></td></tr></table></figure><h3 id="题目演练"><a href="#题目演练" class="headerlink" title="题目演练"></a>题目演练</h3><blockquote><p>《弗里石的的语言》</p><p>小发明家弗里想创造一种新的语言，众所周知，发明一门语言是非常困难的，首先你就要克服一个困难就是，有大量的单词需要处理，现在弗里求助你帮他写一款程序，判断是否出现重复的两个单词。</p><p>有重复就输出重复单词，重复就输出 <code>NO</code>，多个重复输出最先出现的哪一个。</p></blockquote><p>输入：</p><p>第 $1$ 行，输入 $N$，代表共计创造了多少个单词 第 $2$ 行至第 $N+1$ 行，输入 $N$ 个单词</p><p>格式：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">fjsdfgdfsg<br>fdfsgsdfg<br>bcvxbxfyres<br></code></pre></td></tr></table></figure><p>现在有以下样例输入：</p><p>样例 1</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>6<br>1fagas<br>dsafa32j<br>lkiuopybncv<br>hfgdjytr<br>cncxfg<br>sdhrest<br><br>输出：<br><br>NO<br></code></pre></td></tr></table></figure><p>样例 2</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>输入：<br><br>5<br>sdfggfds<br>fgsdhsdf<br>dsfhsdhr<br>sdfhdfh<br>sdfggfds<br><br>输出：<br><br>sdfggfds<br></code></pre></td></tr></table></figure><p>这个题的思路在前面我们已经讲过了，这里我们换一种方式解题。</p><p>使用映射和字典解题，是的原来的代码减少了超过一半，但是思路还是一样，可以说是非常的巧妙且省力。</p><h4 id="C-解法"><a href="#C-解法" class="headerlink" title="C++ 解法"></a>C++ 解法</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"> <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br> <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br>map&lt;string,<span class="hljs-type">bool</span>&gt; mp;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-type">int</span> n;<br>    string ans=<span class="hljs-string">&quot;NO&quot;</span>;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        string word;<br>        cin&gt;&gt;word;<br>        <span class="hljs-keyword">if</span>(mp.<span class="hljs-built_in">count</span>(word))&#123;<br>            ans=word;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">else</span> mp[word]=<span class="hljs-number">1</span>;<br>    &#125;<br>    cout&lt;&lt;ans&lt;&lt;endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Java 解法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.TreeMap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> Map mp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>();<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>  &#123;<br><br>      <span class="hljs-type">int</span> n;<br>      <span class="hljs-type">boolean</span> flag=<span class="hljs-literal">false</span>;<br>      Scanner in=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      String ans=<span class="hljs-string">&quot;NO&quot;</span>;<br>      n=in.nextInt();<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>      &#123;<br>          String word;<br>          word=in.next();<br>          <span class="hljs-comment">// System.out.println(Hx(word));</span><br>          <span class="hljs-keyword">if</span>(flag) <span class="hljs-keyword">continue</span>;<br><br>          <span class="hljs-keyword">if</span>(mp.containsKey(word))&#123;<br>              flag=<span class="hljs-literal">true</span>;<br>              ans=word;<br>          &#125;<br>          <span class="hljs-keyword">else</span> &#123;<br>              mp.put(word,<span class="hljs-literal">true</span>);<br><br>          &#125;<br>      &#125;<br>      System.out.println(ans);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-built_in">dict</span>=&#123;&#125;<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br><br>  N=<span class="hljs-built_in">int</span> (<span class="hljs-built_in">input</span>())<br>  ans = <span class="hljs-string">&#x27;NO&#x27;</span><br>  flag = <span class="hljs-literal">False</span><br>  <span class="hljs-keyword">while</span> N&gt;<span class="hljs-number">0</span>:<br>      N-=<span class="hljs-number">1</span><br>      word=<span class="hljs-built_in">input</span>()<br>      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span>(flag)) :<br><br>          <span class="hljs-keyword">if</span>(<span class="hljs-built_in">dict</span>.get(word)!=<span class="hljs-literal">None</span>):<br>              flag=<span class="hljs-literal">True</span><br>              ans=word<br>          <span class="hljs-keyword">else</span>:<br>              <span class="hljs-built_in">dict</span>[word]=<span class="hljs-literal">True</span><br>  <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>工具函数模板</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>枚举法与尺取法</title>
    <link href="/2024/03/11/%E6%9E%9A%E4%B8%BE%E6%B3%95%E4%B8%8E%E5%B0%BA%E5%8F%96%E6%B3%95/"/>
    <url>/2024/03/11/%E6%9E%9A%E4%B8%BE%E6%B3%95%E4%B8%8E%E5%B0%BA%E5%8F%96%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>在之前的课程中，我们深入讨论了打表法与模拟法的暴力解法。提到暴力，我们通常会首先想到枚举。然而，枚举实际上是一门技术，要确保能够穷尽所有可能的情况并不容易。因此，在本节课中，我们将详细介绍枚举法的技巧，以确保能够完整地列举出所有情况，不漏一种。</p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>枚举法<ul><li>简单型枚举</li><li>组合型枚举</li><li>排列型枚举</li><li>指数型枚举</li></ul></li><li>尺取算法</li></ul><h2 id="枚举法"><a href="#枚举法" class="headerlink" title="枚举法"></a>枚举法</h2><p><strong>枚举算法的思想：</strong></p><p>枚举算法的核心思想是将问题的所有可能成为答案的解一一列举，然后根据问题给定的条件判断这些解是否合适。对于符合条件的解，保留；反之则舍弃。</p><p><strong>枚举算法解题的基本思路：</strong></p><ol><li><strong>确定枚举解的范围和判断条件：</strong> 在开始解题之前，需要明确枚举的解范围，并定义问题的判断条件。</li><li><strong>选取合适的枚举方法：</strong> 选择适当的枚举方式进行逐一枚举，确保覆盖所有可能的解。避免遗漏任何真正的解，同时注意防止重复。</li><li><strong>使用判断条件检验解：</strong> 在枚举过程中，应用事先确定的判断条件验证每个解的合法性，保留符合要求的解。</li></ol><p><strong>枚举算法的一般步骤：</strong></p><ol><li><strong>确定范围和枚举方式：</strong> 根据题目确定枚举的范围，并选择合适的枚举方式。确保不遗漏任何真正的解，同时避免重复。</li><li><strong>优化解空间：</strong> 查看是否存在优化的可能性，以缩小可能成为解的答案范围，提高解决问题的效率。</li><li><strong>定义准确验证条件：</strong> 根据问题找到准确、易编码的验证条件，用于检验每个可能的解。</li><li><strong>枚举和判断：</strong> 逐一枚举解并验证是否符合事先确定的条件，保留符合条件的解。</li><li><strong>输出结果：</strong> 按照要求输出枚举过程中留下的符合条件的解。</li></ol><p>枚举法包含多种技巧和方法，本节课将深入探讨其中几种方法。</p><h3 id="简单型枚举"><a href="#简单型枚举" class="headerlink" title="简单型枚举"></a>简单型枚举</h3><p>简单型枚举是通过简单的 <code>for</code> 循环嵌套解决的问题类型。在之前的课程中，我们所讨论的题目通常属于简单型枚举的范畴。因此，简单型枚举是一种相对简单且大家接触最多的枚举方式。</p><p>这种枚举方式没有特定的固定枚举模式，而且相对简单。只需按照题目的要求设计代码即可完成解题。</p><p>让我们通过一个示例题目来复习一下。</p><h3 id="42-点问题"><a href="#42-点问题" class="headerlink" title="42 点问题"></a>42 点问题</h3><p><strong>题目描述:</strong></p><p>众所周知在扑克牌中，有一个老掉牙的游戏叫做 2424 点，选取 44 张牌进行加减乘除，看是否能得出 2424 这个答案。</p><p>现在小蓝同学发明了一个新游戏，他从扑克牌中依次抽出 66 张牌，注意不是一次抽出，进行计算，看是否能够组成 4242 点，满足输出 ���<em>Y<strong>E</strong>S</em>，反之输出 ��<em>N**O</em>。</p><p>最先抽出来的牌作为第一个操作数，抽出牌做第二个操作数，运算结果在当作第一个操作数，继续进行操作。</p><p>除不尽的情况保留整数。</p><p>请设计一个程序对该问题进行解答。</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>K A Q 6 2 3<br><br>输出：<br><br>YES<br></code></pre></td></tr></table></figure><p>对于上面的样例我们进行了如下计算；</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. K*A=K 即 13*1=13<br>2. 13/12=1 保留整数<br>3. 1+6=7<br>4. 7*2=14<br>5. 14*3=42<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s<br>最大运行内存: 128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>这个题目我们可以依次枚举数字，然后在枚举数字间的符号即可。由于到结果之间进行了三步计算，所以我们这里需要进行一个递归操作，利用了上节课讲解的知识。</p><p>两重循环即可解决问题，伪代码如下：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs txt">op1 赋值为 第一个数<br><br>op(op[1] op[2])<br>&#123;<br><br>    for op in [+ - * /]<br>       ans = 第一个操作数op1 操作 第二个操作数op2<br><br>        如果是第六个操作数，就检验是否符合要要求 ==42？ 如果是就返回True<br><br>        如果op(ans , op[3]) 返回 True，就返回True 因为找到了答案，否则就继续进行<br><br>    没有找到答案返回False<br>&#125;<br></code></pre></td></tr></table></figure><p>但是这样写，思路感觉很清晰，写起来却非常的复杂，我们使用我们讲过的 <code>Vector</code> 来优化这个枚举方式。</p><p>我们创建 5 个 <code>Vector</code> ，分别用来存放 1−51−5 次的运算结果，非常简单。我们答案就采用这种方式。</p><h4 id="答案解析"><a href="#答案解析" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> a[<span class="hljs-number">10</span>];<br>vector &lt;<span class="hljs-type">int</span>&gt; ans[<span class="hljs-number">10</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">6</span>; i++)<br>    &#123;<br>        <span class="hljs-type">char</span> c;<br>        cin&gt;&gt;c;<br>        <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;A&#x27;</span>)<br>            a[i]=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;J&#x27;</span>)<br>            a[i]=<span class="hljs-number">11</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;Q&#x27;</span>)<br>            a[i]=<span class="hljs-number">12</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;K&#x27;</span>)<br>            a[i]=<span class="hljs-number">13</span>;<br>        <span class="hljs-keyword">else</span><br>            a[i]=(c-<span class="hljs-string">&#x27;0&#x27;</span>);<br>        <span class="hljs-comment">//cout&lt;&lt;a[i]&lt;&lt;endl;</span><br>    &#125;<br>    ans[<span class="hljs-number">0</span>].<span class="hljs-built_in">push_back</span>(a[<span class="hljs-number">0</span>]);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">5</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>; j&lt;ans[i<span class="hljs-number">-1</span>].<span class="hljs-built_in">size</span>(); j++)<br>        &#123;<br>            ans[i].<span class="hljs-built_in">push_back</span>(ans[i<span class="hljs-number">-1</span>][j]+a[i]);<br>            ans[i].<span class="hljs-built_in">push_back</span>(ans[i<span class="hljs-number">-1</span>][j]-a[i]);<br>            ans[i].<span class="hljs-built_in">push_back</span>(ans[i<span class="hljs-number">-1</span>][j]*a[i]);<br>            ans[i].<span class="hljs-built_in">push_back</span>(ans[i<span class="hljs-number">-1</span>][j]/a[i]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//cout&lt;&lt;ans[5].size()&lt;&lt;endl;</span><br>    <span class="hljs-type">int</span> flag=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;ans[<span class="hljs-number">5</span>].<span class="hljs-built_in">size</span>(); i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(ans[<span class="hljs-number">5</span>][i]==<span class="hljs-number">42</span>)<br>        &#123;<br>            flag=<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(flag==<span class="hljs-number">1</span>)<br>        cout&lt;&lt;<span class="hljs-string">&quot;YES&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-keyword">else</span><br>        cout&lt;&lt;<span class="hljs-string">&quot;NO&quot;</span>&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python">ans = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br>a = [<span class="hljs-string">&#x27;0&#x27;</span>]*<span class="hljs-number">10</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>c = <span class="hljs-built_in">input</span>().split()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>):<br>    <span class="hljs-keyword">if</span> c[i] == <span class="hljs-string">&#x27;A&#x27;</span>:<br>        a[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">elif</span> c[i] == <span class="hljs-string">&#x27;J&#x27;</span>:<br>        a[i] = <span class="hljs-number">11</span><br>    <span class="hljs-keyword">elif</span> c[i] == <span class="hljs-string">&#x27;Q&#x27;</span>:<br>        a[i] = <span class="hljs-number">12</span><br>    <span class="hljs-keyword">elif</span> c[i] == <span class="hljs-string">&#x27;K&#x27;</span>:<br>        a[i] = <span class="hljs-number">13</span><br>    <span class="hljs-keyword">else</span>:<br>        a[i] = <span class="hljs-built_in">ord</span>(c[i]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;0&#x27;</span>)<br><br>ans[<span class="hljs-number">0</span>].append(a[<span class="hljs-number">0</span>])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ans[i - <span class="hljs-number">1</span>])):<br>        ans[i].append(ans[i - <span class="hljs-number">1</span>][j] + a[i])<br>        ans[i].append(ans[i - <span class="hljs-number">1</span>][j] - a[i])<br>        ans[i].append(ans[i - <span class="hljs-number">1</span>][j] * a[i])<br>        ans[i].append(<span class="hljs-built_in">int</span>(ans[i - <span class="hljs-number">1</span>][j] / a[i]))<br>flag = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ans[<span class="hljs-number">5</span>])):<br>    <span class="hljs-keyword">if</span> ans[<span class="hljs-number">5</span>][j] == <span class="hljs-number">42</span>:<br>        flag = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">break</span><br><span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">10</span>];<br>  <span class="hljs-keyword">static</span> Vector&lt;Vector&lt;Integer&gt;&gt; ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;Vector&lt;Integer&gt;&gt;();<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++) &#123;<br><br>          String c;<br>          c = in.next();<br><br><span class="hljs-comment">//            System.out.println(c);</span><br><br>          <span class="hljs-keyword">if</span> (c.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">&#x27;A&#x27;</span>)<br>              a[i] = <span class="hljs-number">1</span>;<br>          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">&#x27;J&#x27;</span>)<br>              a[i] = <span class="hljs-number">11</span>;<br>          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">&#x27;Q&#x27;</span>)<br>              a[i] = <span class="hljs-number">12</span>;<br>          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">&#x27;K&#x27;</span>)<br>              a[i] = <span class="hljs-number">13</span>;<br>          <span class="hljs-keyword">else</span><br>              a[i] = (c.charAt(<span class="hljs-number">0</span>) - <span class="hljs-string">&#x27;0&#x27;</span>);<br><span class="hljs-comment">//            System.out.println(a[i]);</span><br>      &#125;<br>      ans.addElement(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;Integer&gt;());<br>      ans.get(<span class="hljs-number">0</span>).addElement(a[<span class="hljs-number">0</span>]);<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">5</span>; i++)<br>      &#123;<br>          ans.addElement(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;Integer&gt;());<br>          <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j&lt; ans.get(i - <span class="hljs-number">1</span>).size(); j++)<br>          &#123;<br>              ans.get(i).addElement(ans.get(i - <span class="hljs-number">1</span>).get(j) +a[i]);<br>              ans.get(i).addElement(ans.get(i - <span class="hljs-number">1</span>).get(j)-a[i]);<br>              ans.get(i).addElement(ans.get(i - <span class="hljs-number">1</span>).get(j)*a[i]);<br>              ans.get(i).addElement(ans.get(i - <span class="hljs-number">1</span>).get(j)/a[i]);<br>          &#125;<br>      &#125;<br>      <span class="hljs-comment">//cout&lt;&lt;ans[5].size()&lt;&lt;endl;</span><br>      <span class="hljs-type">int</span> flag=<span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i&lt; ans.get(<span class="hljs-number">5</span>).size(); i++)<br>      &#123;<br>          <span class="hljs-keyword">if</span>(ans.get(<span class="hljs-number">5</span>).get(i)==<span class="hljs-number">42</span>)<br>          &#123;<br>              flag=<span class="hljs-number">1</span>;<br>              <span class="hljs-keyword">break</span>;<br>          &#125;<br>      &#125;<br>      <span class="hljs-keyword">if</span>(flag==<span class="hljs-number">1</span>)<br>          System.out.println(<span class="hljs-string">&quot;YES&quot;</span>);<br>      <span class="hljs-keyword">else</span><br>          System.out.println(<span class="hljs-string">&quot; NO&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="组合型枚举"><a href="#组合型枚举" class="headerlink" title="组合型枚举"></a>组合型枚举</h3><p>排列组合是大家都接触过的概念，而组合型枚举则是在 �<em>n</em> 个元素中随机选出 �<em>m</em> 个元素的问题。对于每一种可能的选择方案，我们需要确定选择了哪 �<em>m</em> 个元素，这就                                                                                                                                   是组合型枚举。</p><p>具体而言，组合型枚举解决的是 ���<em>C<strong>n</strong>m</em> 问题，即从 �<em>n</em> 个元素中选择 �<em>m</em> 个元素的组合数量。</p><p>组合型枚举有一套固定的流程和算法模板，需要大家进行记忆。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs python">chosen = []<br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(chosen) &gt; m:<br>      <span class="hljs-keyword">return</span><br>  <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(chosen) + n - x + <span class="hljs-number">1</span> &lt; m:<br>      <span class="hljs-keyword">return</span><br>  <span class="hljs-keyword">if</span> x == n + <span class="hljs-number">1</span>:<br>      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> chosen:<br>          <span class="hljs-built_in">print</span>(i,end=<span class="hljs-string">&#x27; &#x27;</span>)<br>      <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>      <span class="hljs-keyword">return</span><br><br>  chosen.append(x)<br>  calc(x + <span class="hljs-number">1</span>)<br>  chosen.pop()<br>  calc(x + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>  tem = <span class="hljs-built_in">input</span>().split()<br>  n = <span class="hljs-built_in">int</span>(tem[<span class="hljs-number">0</span>])<br>  m = <span class="hljs-built_in">int</span>(tem[<span class="hljs-number">1</span>])<br>  calc(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br>public <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    static  <span class="hljs-built_in">int</span> n;<br>    static <span class="hljs-built_in">int</span> m;//选m个数<br>    static Vector&lt;Integer&gt; chosen = new Vector&lt;Integer&gt;();<br>    static  void calc(<span class="hljs-built_in">int</span> x) &#123;<br>        <span class="hljs-keyword">if</span> (chosen.size() &gt; m || chosen.size() + (n - x + <span class="hljs-number">1</span>) &lt; m) //剪枝<br>            <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">if</span> (x == n + <span class="hljs-number">1</span>) &#123; //选够了m个数输出<br>            String ansTem = <span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; chosen.size(); i++)<br>                System.out.<span class="hljs-built_in">print</span>(chosen.get(i)+<span class="hljs-string">&quot; &quot;</span>);<br>            System.out.println(<span class="hljs-string">&quot;&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        chosen.addElement(x);<br>        calc(x + <span class="hljs-number">1</span>);<br>        chosen.remove((Object)x);<br>        calc(x + <span class="hljs-number">1</span>);<br>    &#125;<br>    public static void main(String[] args) &#123;<br>        Scanner <span class="hljs-keyword">in</span> = new Scanner(System.<span class="hljs-keyword">in</span>);<br>        n = <span class="hljs-keyword">in</span>.nextInt();<br>        m = <span class="hljs-keyword">in</span>.nextInt();<br>        calc(<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br><span class="hljs-built_in">int</span> n;//共计N个数<br><span class="hljs-built_in">int</span> m;//选m个数<br>vector&lt;<span class="hljs-built_in">int</span>&gt; chosen;<br>string s[<span class="hljs-number">1000</span>];<br>void calc(<span class="hljs-built_in">int</span> x) &#123;<br>    <span class="hljs-keyword">if</span> (chosen.size() &gt; m || chosen.size() + (n - x + <span class="hljs-number">1</span>) &lt; m) //剪枝<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (x == n + <span class="hljs-number">1</span>) &#123; //选够了m个数输出<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; chosen.size(); i++)<br>            cout&lt;&lt; s[chosen[i]]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;//也可以不输出，存放起来也是可以的，主要是看题目。<br>        puts(<span class="hljs-string">&quot;&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    chosen.push_back(x);<br>    calc(x + <span class="hljs-number">1</span>);<br>    chosen.pop_back();//消除痕迹<br>    calc(x + <span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-built_in">int</span> main()<br>&#123;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        cin&gt;&gt;s[i];<br>    &#125;<br>    calc(<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>大家有个疑虑，我这里全是数字而且是从 11 开始的能好用吗，我题目要是字母怎么办，那么请看下面的题目。</p><h3 id="公平抽签"><a href="#公平抽签" class="headerlink" title="公平抽签"></a>公平抽签</h3><p><strong>题目描述:</strong></p><p>小 A 的学校，蓝桥杯的参赛名额非常有限，只有 �<em>m</em> 个名额，但是共有 �<em>n</em> 个人报名，其中 �≤�<em>m</em>≤<em>n</em>。作为老师非常苦恼，他不知道该让谁去，他在寻求一个绝对公平的方式。于是他准备让大家抽签决定，即 �<em>m</em> 个签是去，剩下的是不去。</p><p>小 A 非常想弄明白最后的抽签结果是什么样子的，到底有多少种结果。</p><p>请设计一个程序帮助小 A。最后输出各种情况的人名即可，一行一种情况，每种情况的名字按照报名即输入顺序排序。</p><p>第一行 输入 �,�<em>N</em>,<em>M</em>。</p><p>第二行 到 第 �+1<em>N</em>+1 行 共输入 �<em>N</em> 个人名</p><p>每种情况输出 �<em>M</em> 个人名，空格隔开。</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>3  2<br>xiaowang<br>xiaoA<br>xiaoli<br>输出：<br><br>xiaowang xiaoA<br>xiaowang xiaoli<br>xiaoA xiaoli<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s<br>2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>实际上还是组合型枚举，但是输出元素为人名，我们可以将人名存起来，输出的时候，根据数字下标找到提前存好的人名，直接输出即可。</p><h4 id="答案解析-1"><a href="#答案解析-1" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n; <span class="hljs-comment">//共计N个数</span><br><span class="hljs-type">int</span> m; <span class="hljs-comment">//选m个数</span><br>vector&lt;string&gt; name;<br>vector&lt;string&gt; ans;<br>vector&lt;<span class="hljs-type">int</span>&gt; chosen;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">if</span> (chosen.<span class="hljs-built_in">size</span>() &gt; m || chosen.<span class="hljs-built_in">size</span>() + (n - x + <span class="hljs-number">1</span>) &lt; m) <span class="hljs-comment">//剪枝</span><br>        <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-keyword">if</span> (x == n + <span class="hljs-number">1</span>)<br>    &#123; <span class="hljs-comment">//选够了m个数输出</span><br>        string ansTem = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; chosen.<span class="hljs-built_in">size</span>(); i++)<br>            ansTem += name[chosen[i] - <span class="hljs-number">1</span>] + <span class="hljs-string">&quot; &quot;</span>;<br><br>        ans.<span class="hljs-built_in">push_back</span>(ansTem);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    chosen.<span class="hljs-built_in">push_back</span>(x);<br>    <span class="hljs-built_in">calc</span>(x + <span class="hljs-number">1</span>);<br><br>    chosen.<span class="hljs-built_in">pop_back</span>(); <span class="hljs-comment">//消除痕迹</span><br>    <span class="hljs-built_in">calc</span>(x + <span class="hljs-number">1</span>);<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        string s;<br>        cin &gt;&gt; s;<br>        name.<span class="hljs-built_in">push_back</span>(s);<br>    &#125;<br>    <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i =<span class="hljs-number">0</span>; i &lt; ans.<span class="hljs-built_in">size</span>(); i++)<br>        cout &lt;&lt; ans[i] &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py">name = []<br>ans = []<br>chosen = []<br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(chosen) &gt; m:<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(chosen) + n - x + <span class="hljs-number">1</span> &lt; m:<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">if</span> x == n + <span class="hljs-number">1</span>:<br>        ansTem = <span class="hljs-string">&quot;&quot;</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> chosen:<br>            ansTem = ansTem + name[i - <span class="hljs-number">1</span>] + <span class="hljs-string">&#x27; &#x27;</span><br>        <span class="hljs-comment"># print(ansTem)</span><br>        ans.append(ansTem)<br>        <span class="hljs-keyword">return</span><br>    chosen.append(x)<br>    calc(x + <span class="hljs-number">1</span>)<br>    chosen.pop()<br>    calc(x + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    tem = <span class="hljs-built_in">input</span>().split()<br>    n = <span class="hljs-built_in">int</span>(tem[<span class="hljs-number">0</span>])<br>    m = <span class="hljs-built_in">int</span>(tem[<span class="hljs-number">1</span>])<br>    <span class="hljs-comment"># print(n,&quot; &quot;,m)</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        s = <span class="hljs-built_in">input</span>()<br>        name.append(s)<br><br>    <span class="hljs-comment"># print(name)</span><br>    calc(<span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(ans)):<br>        <span class="hljs-built_in">print</span>(ans[i])<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> n;<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> m;<span class="hljs-comment">//选m个数</span><br>  <span class="hljs-keyword">static</span> Vector&lt;String&gt; name = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;String&gt;();<br>  <span class="hljs-keyword">static</span> Vector&lt;String&gt; ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;String&gt;();<br>  <span class="hljs-keyword">static</span> Vector&lt;Integer&gt; chosen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;Integer&gt;();<br><br>  <span class="hljs-keyword">static</span> &lt;object&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br><br>      <span class="hljs-keyword">if</span> (chosen.size() &gt; m || chosen.size() + (n - x + <span class="hljs-number">1</span>) &lt; m) <span class="hljs-comment">//剪枝</span><br>          <span class="hljs-keyword">return</span>;<br><br>      <span class="hljs-keyword">if</span> (x == n + <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">//选够了m个数输出</span><br>          <span class="hljs-type">String</span> <span class="hljs-variable">ansTem</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; chosen.size(); i++)<br>              ansTem += name.get(chosen.get(i) - <span class="hljs-number">1</span>) + <span class="hljs-string">&quot; &quot;</span>;<br>          ans.addElement(ansTem);<br>          <span class="hljs-keyword">return</span>;<br>      &#125;<br>      chosen.addElement(x);<br>      calc(x + <span class="hljs-number">1</span>);<br>      chosen.remove((Object)x);<br>      calc(x + <span class="hljs-number">1</span>);<br>  &#125;<br><br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n = in.nextInt();<br>      m = in.nextInt();<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>         String s;<br>         s=in.next();<br>         name.addElement(s);<br>      &#125;<br>      calc(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span><span class="hljs-number">0</span>; i &lt; ans.size(); i++)<br>          System.out.println(ans.get(i) );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="排列型枚举"><a href="#排列型枚举" class="headerlink" title="排列型枚举"></a>排列型枚举</h3><p>上面说过，组合型枚举就是让你在 �<em>n</em> 个中，随机选出 �<em>m</em> 个 ，问你有多少种方案，而且每一种方案选择了哪 $m ￥ 个，这就是组合型枚举。</p><p>而排列型枚举相对组合型枚举就简单了一点，就是 �<em>n</em> 个的全排列，即从 �<em>n</em> 个中选取 �<em>n</em> 个但是关心内部的顺序。</p><p>相比较组合只关心有多少个集合，而排列是关心集合内的排列方式。即排列型枚举就是寻找 ���<em>A<strong>n</strong>n</em> 问题。</p><p>而且排列型枚举也是有着比较成熟的模板需要大家进行记忆。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> n; <span class="hljs-comment">//共计N个数</span><br><span class="hljs-type">int</span> order[<span class="hljs-number">20</span>];<br><span class="hljs-type">bool</span> chosen[<span class="hljs-number">20</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (k == n + <span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            cout &lt;&lt; order[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>        <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (chosen[i])<br>            <span class="hljs-keyword">continue</span>;<br>        order[k] = i;<br>        chosen[i] = <span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">calc</span>(k + <span class="hljs-number">1</span>);<br>        chosen[i] = <span class="hljs-number">0</span>;<br>        order[k] = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n;<br>    <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 写法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">order = [<span class="hljs-number">0</span>] * <span class="hljs-number">20</span><br>chosen = [<span class="hljs-number">0</span>] * <span class="hljs-number">20</span><br>n = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">if</span> x == n + <span class="hljs-number">1</span>:<br>      ansTem = <span class="hljs-string">&#x27;&#x27;</span><br>      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>          <span class="hljs-built_in">print</span>(order[i],end=<span class="hljs-string">&#x27; &#x27;</span>)<br>      <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>      <span class="hljs-keyword">return</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span>(chosen[i]==<span class="hljs-number">1</span>) :<br>          <span class="hljs-keyword">continue</span><br>      order[x]=i<br>      chosen[i]=<span class="hljs-number">1</span><br>      calc(x+<span class="hljs-number">1</span>)<br>      chosen[i]=<span class="hljs-number">0</span><br>      order[x]=<span class="hljs-number">0</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>  n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>  <span class="hljs-comment"># print(name)</span><br>  calc(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><strong>Java 写法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> n;<br><span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] order =<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">20</span>];<br><span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>[] chosen =<span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[<span class="hljs-number">20</span>];<br><span class="hljs-keyword">static</span> &lt;object&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (x == n + <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">//选够了m个数输出</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">ansTem</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;=n ; i++)<br>            System.out.println(order[i]);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (chosen[i]) <span class="hljs-keyword">continue</span>;<br>        order[x] = i;<br>        chosen[i] =<span class="hljs-literal">true</span>;<br>        calc(x + <span class="hljs-number">1</span>);<br>        chosen[i] = <span class="hljs-literal">false</span>;<br>        order[x] = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>    n = in.nextInt();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>       String s;<br>        s=in.next();<br>        name.addElement(s);<br>    &#125;<br>    calc(<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>不少同学问我 2020 够不够，排列问题是阶乘阶的时间复杂度，如果超过这个复杂度，那么这个题也就不用做了，算不出来。</p><p>所以肯定够用。</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br>1 2 3 4<br>1 2 4 3<br>1 3 2 4<br>1 3 4 2<br>1 4 2 3<br>1 4 3 2<br>2 1 3 4<br>2 1 4 3<br>2 3 1 4<br>2 3 4 1<br>2 4 1 3<br>2 4 3 1<br>3 1 2 4<br>3 1 4 2<br>3 2 1 4<br>3 2 4 1<br>3 4 1 2<br>3 4 2 1<br>4 1 2 3<br>4 1 3 2<br>4 2 1 3<br>4 2 3 1<br>4 3 1 2<br>4 3 2 1<br></code></pre></td></tr></table></figure><p>44 的排列就已经这么多了，大家可以尝试跑一下 1010。</p><p>同样，我们再来看一个的问题来进行加深理解。</p><h3 id="座次问题"><a href="#座次问题" class="headerlink" title="座次问题"></a>座次问题</h3><p><strong>题目描述:</strong></p><p>小 �<em>A</em> 的学校，老师好不容易解决了蓝桥杯的报名问题，现在老师又犯愁了。现在有 �<em>N</em> 位同学参加比赛，但是老师想给他们排座位，但是排列方式太多了。老师非常想弄明白最后的排座次的结果是什么样子的，到底有多少种结果。</p><p>请设计一个程序帮助老师。</p><p>最后输出各种情况的人名即可，一行一种情况，每种情况的名字按照报名即输入顺序排序。</p><p>第一行 输入 �<em>N</em>； 第二行 到 第 �+1<em>N</em>+1 行 共输入 �<em>N</em> 个人名。</p><p>由于小 A 学校承办能力实在有限，所以其中 �<em>N</em> 小于等于 1010 人。</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>3<br>xiaowang<br>xiaoA<br>xiaoli<br>输出：<br><br>xiaowang xiaoA xiaoli<br>xiaowang xiaoli xiaoA<br>xiaoA xiaowang xiaoli<br>xiaoA xiaoli xiaowang<br>xiaoli xiaowang xiaoA<br>xiaoli xiaoA xiaowang<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s<br>2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>实际上还是排列型枚举，但是输出元素为人名，我们可以将人名存起来，输出的时候，根据数字下标找到提前存好的人名，就是按照上一道题的方式处理即可。</p><h4 id="答案解析-2"><a href="#答案解析-2" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n; <span class="hljs-comment">//共计N个数</span><br>vector&lt;string&gt; name;<br><span class="hljs-type">int</span> order[<span class="hljs-number">20</span>];<br><span class="hljs-type">bool</span> chosen[<span class="hljs-number">20</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (k == n + <span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            cout &lt;&lt; name[order[i] - <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>        <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (chosen[i])<br>            <span class="hljs-keyword">continue</span>;<br>        order[k] = i;<br>        chosen[i] = <span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">calc</span>(k + <span class="hljs-number">1</span>);<br>        chosen[i] = <span class="hljs-number">0</span>;<br>        order[k] = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    cin &gt;&gt; n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        string s;<br>        cin &gt;&gt; s;<br>        name.<span class="hljs-built_in">push_back</span>(s);<br>    &#125;<br>    <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">name = []<br><br>order = [<span class="hljs-number">0</span>] * <span class="hljs-number">20</span><br>chosen = [<span class="hljs-number">0</span>] * <span class="hljs-number">20</span><br>n = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">x</span>):<br><br>  <span class="hljs-keyword">if</span> x == n + <span class="hljs-number">1</span>:<br>      ansTem = <span class="hljs-string">&#x27;&#x27;</span><br><br>      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>          ansTem = ansTem + name[order[i]-<span class="hljs-number">1</span>] + <span class="hljs-string">&#x27; &#x27;</span><br><br>      <span class="hljs-built_in">print</span>(ansTem)<br><br>      <span class="hljs-keyword">return</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span>(chosen[i]==<span class="hljs-number">1</span>) :<br>          <span class="hljs-keyword">continue</span><br><br>      order[x]=i<br>      chosen[i]=<span class="hljs-number">1</span><br>      calc(x+<span class="hljs-number">1</span>)<br>      chosen[i]=<span class="hljs-number">0</span><br>      order[x]=<span class="hljs-number">0</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>  n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>      s = <span class="hljs-built_in">input</span>()<br><br>      name.append(s)<br><br>  <span class="hljs-comment"># print(name)</span><br>  calc(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company;<br><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> n;<br>  <span class="hljs-keyword">static</span> Vector&lt;String&gt; name = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;String&gt;();<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] order =<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">20</span>];<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>[] chosen =<span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[<span class="hljs-number">20</span>];<br><br>  <span class="hljs-keyword">static</span> &lt;object&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br><br>      <span class="hljs-keyword">if</span> (x == n + <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">//选够了m个数输出</span><br>          <span class="hljs-type">String</span> <span class="hljs-variable">ansTem</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br><br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;=n ; i++)<br><br>              ansTem += name.get(order[i]-<span class="hljs-number">1</span>) + <span class="hljs-string">&quot; &quot;</span>;<br><br>          System.out.println(ansTem);<br>          <span class="hljs-keyword">return</span>;<br>      &#125;<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>          <span class="hljs-keyword">if</span> (chosen[i]) <span class="hljs-keyword">continue</span>;<br>          order[x] = i;<br>          chosen[i] =<span class="hljs-literal">true</span>;<br>          calc(x + <span class="hljs-number">1</span>);<br>          chosen[i] = <span class="hljs-literal">false</span>;<br>          order[x] = <span class="hljs-number">0</span>;<br>      &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>      n = in.nextInt();<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br><br>         String s;<br>          s=in.next();<br>          name.addElement(s);<br>      &#125;<br>      calc(<span class="hljs-number">1</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="尺取法"><a href="#尺取法" class="headerlink" title="尺取法"></a>尺取法</h2><p>尺取法（双指针法、two pointers）是一种常用的优化技巧，特别适用于解决序列的区间问题。它的操作简单，易于编程，是一种线性高效的算法。</p><p>尺取法的核心思想是维护一个区间（�,�<em>L</em>,<em>R</em>），其中 �<em>L</em> 为起点，�<em>R</em> 为终点，该区间是序列内以 �<em>L</em> 为起点的最短合法区间。关键在于 �<em>R</em> 随着 �<em>L</em> 的增大而增大。通过不断枚举 �<em>L</em>，同时求解相应的 �<em>R</em>，可以高效地解决问题。</p><p>具体的实现步骤是，不断移动 �<em>L</em> 指针，同时更新 �<em>R</em> 指针，直到 �<em>R</em> 随着 �<em>L</em> 的增大而增大。因为 �<em>R</em> 随着 �<em>L</em> 的增大而增大，所以总的时间复杂度为 �(�)<em>O</em>(<em>n</em>)。</p><p>通过维护两个指针，即左指针 �<em>l</em> 和右指针 �<em>r</em>。通过不断确定区间的左端点，让右指针 �<em>r</em> 不断向右移动，直到满足条件停下，然后维护答案。这个过程重复进行，直到左指针 �<em>l</em> 超过右指针 �<em>r</em> 或满足其他特定情况（根据题目而定）。</p><p>尺取法的应用范围广泛，特别适用于需要寻找满足某种条件的连续子序列的问题。通过灵活运用尺取法，可以在保持算法简洁的同时，提高解题效率。</p><h3 id="例题-奇怪的的动物园"><a href="#例题-奇怪的的动物园" class="headerlink" title="例题 奇怪的的动物园"></a>例题 奇怪的的动物园</h3><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>动物园正在展出由世上最受欢迎的 �<em>m</em> 种动物组成的精彩展览。</p><p>游客在购买门票时必须说明两个数字，�<em>a</em> 和 �<em>b</em>，代表他们希望观看的展览范围，从第 �<em>a</em> 种动物到第 �<em>b</em> 种动物（包含 �,�<em>a</em>,<em>b</em>）。门票的价格是按照观看的动物数量计算的，即每种动物一元。</p><p>小明希望在最小化购票花费的同时，能够欣赏到所有受欢迎的动物。</p><p>请计算他应该选择哪些动物范围，即 �<em>a</em> 和 �<em>b</em>。</p><p>若存在多组解，输出其中 �<em>a</em> 最小的那组。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含两个整数 �<em>n</em> 和 �<em>m</em>，分别表示动物园内的动物总数以及受欢迎的动物种类数量。</p><p>第二行包含 �<em>n</em> 个整数 ��<em>a**i</em>，表示第 �<em>i</em> 种动物的种类。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>一行包含两个整数 �,�<em>a</em>,<em>b</em>。</p><p>样例输入</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">12 5<br>2 5 3 1 3 2 4 1 1 5 4 3<br></code></pre></td></tr></table></figure><p>样例输出</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 7<br></code></pre></td></tr></table></figure><h3 id="思路与算法"><a href="#思路与算法" class="headerlink" title="思路与算法"></a>思路与算法</h3><p>这是一道使用尺取法（Two Pointers）的题目。我们维护两个指针 <code>l</code> 和 <code>r</code>，分别表示当前选择区间的左右端点。通过不断调整右指针 <code>r</code>，保证区间内包含所有受欢迎的动物。在滑动窗口的过程中，记录最小购票范围。</p><p>具体的实现细节如下：</p><ol><li>使用 <code>I</code> 函数加入第 <code>x</code> 种动物的画，同时更新相应的计数和唯一动物数量。</li><li>使用 <code>D</code> 函数删除第 <code>x</code> 种动物的画，同时更新相应的计数和唯一动物数量。</li><li>不断移动右指针 <code>r</code>，并在保证区间内包含所有受欢迎的动物的前提下，更新最小购票范围。</li><li>移动左指针 <code>l</code>，直到无法再删除动物，保证区间仍然包含所有受欢迎的动物。</li></ol><h4 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h4><p>由于每个动物最多被插入和删除一次，算法的时间复杂度为 �(�)<em>O</em>(<em>n</em>)，其中 �<em>n</em> 是动物的数量。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1000005</span>;<br><br><span class="hljs-type">int</span> n, m, a[MAXN], b[MAXN], cnt, ans, ansl, ansr;<br><br><span class="hljs-comment">// 加入第x种动物</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">I</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (b[x] == <span class="hljs-number">0</span>) cnt++; <span class="hljs-comment">// 如果该动物没有在当前区间中出现过，增加唯一动物数量</span><br>    b[x]++; <span class="hljs-comment">// 动物x的数量加1</span><br>&#125;<br><br><span class="hljs-comment">// 删除第x种动物</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">D</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (b[x] == <span class="hljs-number">1</span>) cnt--; <span class="hljs-comment">// 如果删除后该动物不再在当前区间中出现，减少唯一动物数量</span><br>    b[x]--; <span class="hljs-comment">// 动物x的数量减1</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]); <span class="hljs-comment">// 读取每种动物的种类</span><br><br>    ans = n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> r = <span class="hljs-number">1</span>, l = <span class="hljs-number">1</span>; r &lt;= n; r++) &#123;<br>        <span class="hljs-built_in">I</span>(a[r]); <span class="hljs-comment">// 首先插入a[r]的动物</span><br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-built_in">D</span>(a[l]); <span class="hljs-comment">// 先删a[l]的动物</span><br>            <span class="hljs-keyword">if</span> (cnt == m) l++; <span class="hljs-comment">// 如果删了没事，加l</span><br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-built_in">I</span>(a[l]);<br>                <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 删了有事，还留着</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (cnt == m &amp;&amp; r - l + <span class="hljs-number">1</span> &lt; ans) &#123;<br>            ans = r - l + <span class="hljs-number">1</span>;<br>            ansl = l;<br>            ansr = r;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (ansl != <span class="hljs-number">0</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, ansl, ansr);<br>    <span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;1 %d&quot;</span>, n); <span class="hljs-comment">// 输出+特判：选择任意一个≤n的区间不满足要求，则只好选择区间[1,n]</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>MAXN = <span class="hljs-number">1000005</span><br>a = [<span class="hljs-number">0</span>]*MAXN<br>b = [<span class="hljs-number">0</span>]*MAXN<br>cnt=<span class="hljs-number">0</span><br>ansl=<span class="hljs-number">0</span><br>ansr=<span class="hljs-number">0</span><br><br>def <span class="hljs-built_in">I</span>(x):<br>    global cnt<br>    <span class="hljs-keyword">if</span> b[x] == <span class="hljs-number">0</span>:<br>        cnt += <span class="hljs-number">1</span><br>    b[x] += <span class="hljs-number">1</span><br><br>def <span class="hljs-built_in">D</span>(x):<br>    global cnt<br>    <span class="hljs-keyword">if</span> b[x] == <span class="hljs-number">1</span>:<br>        cnt -= <span class="hljs-number">1</span><br>    b[x] -= <span class="hljs-number">1</span><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-type">int</span>, <span class="hljs-built_in">input</span>().<span class="hljs-built_in">split</span>())<br>a[<span class="hljs-number">1</span>:n+<span class="hljs-number">1</span>] = <span class="hljs-built_in">map</span>(<span class="hljs-type">int</span>, <span class="hljs-built_in">input</span>().<span class="hljs-built_in">split</span>())<br><br>ans = n<br>l = <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> r in <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">I</span>(a[r])<br>    <span class="hljs-keyword">while</span> True:<br>        <span class="hljs-built_in">D</span>(a[l])<br>        <span class="hljs-keyword">if</span> cnt == m:<br>            l += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">I</span>(a[l])<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> cnt == m <span class="hljs-keyword">and</span> r - l + <span class="hljs-number">1</span> &lt; ans:<br>        ans = r - l + <span class="hljs-number">1</span><br>        ansl = l<br>        ansr = r<br><br><span class="hljs-keyword">if</span> ansl != <span class="hljs-number">0</span>:<br>    <span class="hljs-built_in">print</span>(ansl, ansr)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-number">1</span>, n)<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1000005</span>;<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span>[] a ;<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span>[] b;<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">I</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (b[x] == <span class="hljs-number">0</span>) cnt++;<br>        b[x]++;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">D</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (b[x] == <span class="hljs-number">1</span>) cnt--;<br>        b[x]--;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Scanner scanner = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> n = scanner.<span class="hljs-built_in">nextInt</span>();<br>        a=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[n+<span class="hljs-number">10</span>];<br>        b=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[n+<span class="hljs-number">10</span>];<br>        <span class="hljs-type">int</span> m = scanner.<span class="hljs-built_in">nextInt</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) a[i] = scanner.<span class="hljs-built_in">nextInt</span>();<br><br>        <span class="hljs-type">int</span> ans = n;<br>        <span class="hljs-type">int</span> ansl = <span class="hljs-number">0</span>, ansr = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> r = <span class="hljs-number">1</span>, l = <span class="hljs-number">1</span>; r &lt;= n; r++) &#123;<br>            <span class="hljs-built_in">I</span>(a[r]);<br>            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>                <span class="hljs-built_in">D</span>(a[l]);<br>                <span class="hljs-keyword">if</span> (cnt == m) l++;<br>                <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-built_in">I</span>(a[l]);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (cnt == m &amp;&amp; r - l + <span class="hljs-number">1</span> &lt; ans) &#123;<br>                ans = r - l + <span class="hljs-number">1</span>;<br>                ansl = l;<br>                ansr = r;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (ansl != <span class="hljs-number">0</span>) System.out.<span class="hljs-built_in">println</span>(ansl + <span class="hljs-string">&quot; &quot;</span> + ansr);<br>        <span class="hljs-keyword">else</span> System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;1 &quot;</span> + n);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个算法通过维护两个指针，实现了在 �(�)<em>O</em>(<em>n</em>) 的时间复杂度内找到最小购票范围的目标。尺取法的思想在滑动窗口的过程中，通过不断调整左右指针来满足特定条件。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>枚举与尺取法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搜索算法</title>
    <link href="/2024/03/10/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/"/>
    <url>/2024/03/10/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="深度优先搜索"><a href="#深度优先搜索" class="headerlink" title="深度优先搜索"></a>深度优先搜索</h2><p>Depth First Search 即 DFS，意为深度优先搜索，是所有的搜索手段之一。它是从某个状态开始，不断进行状态转移，直到不能转移后，向后回退，一直到遍历完所有的状态。</p><p>本章题目难度较大，请大家仔细研读讲解和代码。</p><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1.DFS 算法设计原理与实现方法 2.经典题型精讲</p><h2 id="深度优先搜索基本概念"><a href="#深度优先搜索基本概念" class="headerlink" title="深度优先搜索基本概念"></a>深度优先搜索基本概念</h2><p>作为搜索算法的一种，DFS 主要是用于解决 <code>NP</code> 完全问题。但是，深度优先搜索算法的时间复杂度较高，深度优先搜索是 $O(n!)$ 的阶乘级算法，它的效率非常低，在数据规模变大时，此算法就难以解决当前的问题了。</p><p>所以搜索算法使用于状态节点较小规模的问题。</p><h2 id="DFS-的设计步骤"><a href="#DFS-的设计步骤" class="headerlink" title="DFS 的设计步骤"></a>DFS 的设计步骤</h2><p>按照定义设计：</p><ol><li><p>确定该题目的状态（包括边界）</p></li><li><p>找到状态转移方式</p></li><li><p>找到问题的出口，计数或者某个状态</p></li><li><p>设计搜索</p></li></ol><p>伪代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">check</span><span class="hljs-params">(参数)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(满足条件)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(参数)</span>&#123;<br>    相应操作<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> step)</span><br>&#123;<br>        判断边界pd()<br>        &#123;<br>            不在边界内，即回溯<br>        &#125;<br>        尝试每一种可能<br>        &#123;<br>               满足check条件<br><br>               标记<br><br>               继续下一步dfs(step+<span class="hljs-number">1</span>)<br><br>               恢复初始状态（回溯的时候要用到）<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="DFS-题目讲解"><a href="#DFS-题目讲解" class="headerlink" title="DFS 题目讲解"></a>DFS 题目讲解</h2><h3 id="状态搜索代表：-N-皇后问题"><a href="#状态搜索代表：-N-皇后问题" class="headerlink" title="状态搜索代表： N 皇后问题"></a>状态搜索代表： N 皇后问题</h3><p><a href="https://www.lanqiao.cn/problems/1508/learning/">题目链接</a></p><p>难度: 简单</p><p>标签: DFS</p><p><strong>题目描述:</strong></p><p>在 $N\times N$ 的方格棋盘放置了 $N$ 个皇后，使得它们不相互攻击（即任意 $2$ 个皇后不允许处在同一排，同一列，也不允许处在与棋盘边框成 $45$ 角的斜线上。你的任务是，对于给定的 $N$，求出有多少种合法的放置方法。</p><p><strong>输入描述:</strong></p><p>输入中有一个正整数 $N≤10$，表示棋盘和皇后的数量</p><p><strong>输出描述:</strong></p><p>为一个正整数，表示对应输入行的皇后的不同放置数量。</p><p><strong>输入输出样例:</strong></p><p><strong>示例:</strong></p><p><strong>输入:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br></code></pre></td></tr></table></figure><p><strong>输出:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">10<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 256M<br></code></pre></td></tr></table></figure><p><strong>解题思路:</strong></p><p>下面是用递归的深度优先搜索求解 $n$ 皇后问题的算法描述：</p><p>这里用一个 $N \times N$ 的矩阵来表示棋盘，但是我们不需要定义这样的数组，只要心中有 $N \times N$ 的期盼即可。</p><ol><li><p><strong>算法开始：</strong></p><p>当前行设为第一行，当前列设为第一列，从第一行第一列开始搜索，即只能让皇后从第一行放到第 $n$ 行。</p><p>这样在每次判断是否满足情况时我们不用去判断是否皇后在相同行。</p><p>我们只用判断之前的 $1$ 到 $a-1$ 个皇后的位置和当前第 $a$ 个皇后的位置是否属于同一列或者斜线，判断是否同一列。</p></li><li><p><strong>判断边界：</strong></p><p>在当前行，当前列的位置上判断是否满足条件(即保证经过这一点的行,列与斜线上都没有两个皇后)，若不满足，跳到第 $5$ 步，即不符合边界条件。</p><p>首先说一下，什么叫不符合边界条件，不只是跳出了搜索范围，剪枝也可以从这里开始，比如这里不满足条件，向下继续搜索也不会再有结果。</p><p>这可以理解为超出边界的剪枝，我们的边界只得可能存在解的范围，这里已经超出有解的范围，必然要被踢出。</p><p>判断条件：</p><p>我们用数组 $x[a]&#x3D;i$ 来表示第 $a$ 个皇后的位置在第 $a$ 行第 $i$ 列，我们不用考虑是否在同一行的问题你，我们只用判断之前的 $1$ 到 $a-1$ 个皇后的位置和当前第 $a$ 个皇后的位置是否属于同一列或者斜线。</p><p>判断是否属于同一列： 就判断 $x[a]$ 是否等于 $x[i]$; 判断是否属于同一斜线：等同于判断行之差是否等于列之差也，即 $abs(x[k]-x[i]) \neq abs(k-i)$。</p></li><li><p><strong>搜索过程：</strong></p><p>调用 <code>Check</code> 函数。</p><p>如果 边界条件，就继续调用放下一个皇后的位置</p></li><li><p><strong><code>Check</code> 函数:</strong></p><p>如果当搜索到第 $N+1$ 行的时候，即代表前 $N$ 行已经搜索完了，所以这个时候正好求出了一个解，记录加一。</p></li><li><p>在当前位置上不满足条件的情形，进行回溯。</p></li></ol><p>C++ 语言描述:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> x[<span class="hljs-number">15</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> sum,n;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">PD</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;k; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">abs</span>(k-i)==<span class="hljs-built_in">abs</span>(x[k]-x[i]))<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x[k]==x[i])<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span><br>        <span class="hljs-comment">//所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span><br>        <span class="hljs-comment">//行数不需要判断，因为他们本身的i就代表的是行数</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">if</span>(a&gt;n)<br>        sum++;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">check</span>(a))<br>        <span class="hljs-keyword">return</span> ;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            x[a]=i;<br>                <span class="hljs-comment">//第a个皇后放的列数</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">PD</span>(a))<br>                    <span class="hljs-comment">//判断是否能放这步</span><br>                <span class="hljs-built_in">DFS</span>(a+<span class="hljs-number">1</span>);<br>                    <span class="hljs-comment">//能的话进行下一个皇后的放置</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">continue</span> ;<br>                    <span class="hljs-comment">//不能就下一列</span><br>        &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n;<br>    <span class="hljs-comment">//表示几个皇后</span><br>    <span class="hljs-built_in">DFS</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-comment">//每次都从第一个皇后开始</span><br>    cout&lt;&lt;sum&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs py"> x = [<span class="hljs-number">0</span>] * <span class="hljs-number">15</span><br>n = <span class="hljs-number">0</span><br><span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">k</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(k - i) == <span class="hljs-built_in">abs</span>(x[k] - x[i]):<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">elif</span> x[k] == x[i]:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-comment"># 即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span><br>        <span class="hljs-comment"># 所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span><br>        <span class="hljs-comment"># 行数不需要判断，因为他们本身的i就代表的是行数</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">a</span>):<br>    <span class="hljs-keyword">if</span> a &gt; n:<br>        <span class="hljs-keyword">global</span> <span class="hljs-built_in">sum</span><br>        <span class="hljs-built_in">sum</span> += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">DFS</span>(<span class="hljs-params">a</span>):<br><br>    <span class="hljs-keyword">if</span> check(a):<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            x[a] = i<br>            <span class="hljs-comment"># 第a个皇后放的列数</span><br>            <span class="hljs-keyword">if</span> pd(a):<br>                <span class="hljs-comment"># 判断是否能放这步</span><br>                DFS(a + <span class="hljs-number">1</span>)<br>                <span class="hljs-comment"># 能的话进行下一个皇后的放置</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">continue</span><br>                <span class="hljs-comment">#   不能就下一列</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-comment"># 不能就下一列</span><br>    DFS(<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 每次都从第一个皇后开始</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>)<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> x[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">15</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> sum, n;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">PD</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; k; i++) &#123;<br>            <span class="hljs-keyword">if</span> (abs(k - i) == abs(x[k] - x[i]))<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x[k] == x[i])<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span><br>            <span class="hljs-comment">//所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span><br>            <span class="hljs-comment">//行数不需要判断，因为他们本身的i就代表的是行数</span><br><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br><br>        <span class="hljs-keyword">if</span> (a &gt; n)<br>            sum++;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">DFS</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>        <span class="hljs-keyword">if</span> (check(a))<br>            <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                x[a] = i;<br>                <span class="hljs-comment">//第a个皇后放的列数</span><br>                <span class="hljs-keyword">if</span> (PD(a))<br>                    <span class="hljs-comment">//判断是否能放这步</span><br>                    DFS(a + <span class="hljs-number">1</span>);<br>                    <span class="hljs-comment">//能的话进行下一个皇后的放置</span><br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">continue</span>;<br>                <span class="hljs-comment">//不能就下一列</span><br>            &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        <span class="hljs-comment">//表示几个皇后</span><br>        DFS(<span class="hljs-number">1</span>);<br>        <span class="hljs-comment">//每次都从第一个皇后开始</span><br>        System.out.println(sum);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="图的路径搜索代表-路径之谜"><a href="#图的路径搜索代表-路径之谜" class="headerlink" title="图的路径搜索代表-路径之谜"></a>图的路径搜索代表-路径之谜</h3><p><a href="https://www.lanqiao.cn/problems/89/learning/">题目链接</a></p><p>难度: 中等</p><p>标签: DFS, 2016, 国赛</p><p><strong>题目描述:</strong></p><p>小明冒充 $X$ 星球的骑士，进入了一个奇怪的城堡。</p><p>城堡里边什么都没有，只有方形石头铺成的地面。</p><p>假设城堡地面是 $n \times n$ 个方格。如下图所示。</p><p><img src="/./../images/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/uid1580206-20210202-1612248935564.png" alt="地图"></p><p>按习俗，骑士要从西北角走到东南角。可以横向或纵向移动，但不能斜着走，也不能跳跃。每走到一个新方格，就要向正北方和正西方各射一箭。（城堡的西墙和北墙内各有 $n$ 个靶子）同一个方格只允许经过一次。但不必走完所有的方格。如果只给出靶子上箭的数目，你能推断出骑士的行走路线吗？有时是可以的，比如上图中的例子。</p><p>本题的要求就是已知箭靶数字，求骑士的行走路径（测试数据保证路径唯一）</p><p><strong>输入:</strong></p><p>第一行一个整数 $N$ ($0  \leq  N  \leq  20$)，表示地面有 $N \times N$ 个方格。</p><p>第二行 $N$ 个整数，空格分开，表示北边的箭靶上的数字（自西向东）</p><p>第三行 $N$ 个整数，空格分开，表示西边的箭靶上的数字（自北向南）</p><p><strong>输出：</strong></p><p>输出一行若干个整数，表示骑士路径。</p><p>为了方便表示，我们约定每个小格子用一个数字代表，从西北角开始编号: 0,1,2,3 $\cdots$</p><p><strong>输入输出样例：</strong></p><p>输入</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br>2 4 3 4<br>4 3 3 3<br></code></pre></td></tr></table></figure><p>比如，上图中的方块编号为：</p><table><thead><tr><th>箭靶</th><th>2</th><th>4</th><th>3</th><th>4</th></tr></thead><tbody><tr><td>4</td><td>0</td><td>1</td><td>2</td><td>3</td></tr><tr><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr><tr><td>3</td><td>8</td><td>9</td><td>10</td><td>11</td></tr><tr><td>3</td><td>12</td><td>13</td><td>14</td><td>15</td></tr></tbody></table><p>输出</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">0 4 5 1 2 3 7 11 10 9 13 14 15<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 128M<br></code></pre></td></tr></table></figure><p><strong>解题思路:</strong></p><p>这里用一个 $N \times N$ 的矩阵来表示城堡的位置，横向、纵向标号 $1-N$。</p><p>我们采用逆推法，既然原题目是走到哪里射一支箭，那我们就走到那里之后拔一支箭，如果最后得到所有的靶子上都没有箭了，由于题目的路径唯一，那就证明我们找到了题目所要求的路径。</p><ol><li><p>算法开始：</p><p>当前行设为第一行，当前列设为第一列，从第一行第一列开始搜索。</p><p>然后从左上角初始位置，按照题目意思进行寻路。</p></li><li><p>判断边界：</p><p>在当前行，当前列的位置上判断是否满足条件，若不满足，跳到第 $5$ 步，即不符合边界条件。 判断条件如下：</p><ul><li>$flag[x][y]$=&#x3D;1 标记数组已经被标记,已被走过，不能再走，超出边界</li><li>$x&lt;1$ 从左侧走出方格。</li><li>$x&gt;n$ 从右侧走出方格。</li><li>$y&lt;1$ 从上侧走出方格。</li><li>$y&gt;n$ 从下侧走出方格。</li><li>$col[x]&lt;&#x3D;0$ 没走到右下角，箭用完了。</li><li>$rol[y]&lt;&#x3D;0$ 没走到右下角，箭用完了</li></ul></li><li><p>搜索过程：</p><p>调用 <code>Check</code> 函数。 如果边界条件满足，就继续调用搜索，找到下一步的位置</p></li><li><p>check(参数):</p><p>如果当搜索到 $x&#x3D;n,y&#x3D;n$ 时，且靶子上的箭都没了，按就找到了答案。</p><p>按照题目输出即可。</p></li><li><p>在当前位置上不满足条件的情形，进行回溯，并还原现场</p></li></ol><p>C++ 语言描述:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PII</span><br>&#123;<br>    <span class="hljs-type">int</span> first;<br>    <span class="hljs-type">int</span> second;<br>&#125;;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">30</span>;<br><span class="hljs-type">int</span> rol[N];<br><span class="hljs-type">int</span> col[N];<br><span class="hljs-type">int</span> n;<span class="hljs-comment">//格子数 长宽从1到n</span><br><span class="hljs-type">bool</span> flag[N][N]; <span class="hljs-comment">//用来标记是否走过</span><br>vector&lt;PII&gt; res;<br><br><br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;;<br><br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br><span class="hljs-comment">//--------------------------------------------</span><br><br><span class="hljs-function"><span class="hljs-type">bool</span>  <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> <span class="hljs-comment">//判断走过的路径的箭靶数是否与目标相同</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(x==n &amp;&amp; y==n)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(col[i]!=<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(rol[i]!=<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;res.<span class="hljs-built_in">size</span>(); i++)<br>        &#123;<br>            <span class="hljs-type">int</span> x=res[i].first;<br>            <span class="hljs-comment">//x 轴坐标</span><br>            <span class="hljs-type">int</span> y=res[i].second;<br>            <span class="hljs-comment">//y 轴坐标</span><br>            <span class="hljs-type">int</span> sum=n*(x<span class="hljs-number">-1</span>)+y<span class="hljs-number">-1</span> ;<br>            <span class="hljs-comment">// 通过计算的到为题目要求的坐标系</span><br>            cout &lt;&lt;sum&lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-comment">// 成功终止</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">//继续搜索</span><br>    <span class="hljs-comment">//关于终止还是继续我们交给判定即可</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x2,<span class="hljs-type">int</span> y2)</span> <span class="hljs-comment">//边界判断</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(flag[x2][y2]==<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//已被走过，不能再走，超出边界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从左侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从右侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从上侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从下侧走出方格</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(col[x2]&lt;=<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(rol[y2]&lt;=<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">//符合边界条件，可以继续执行搜索</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">check</span>(x,y))<br>    &#123;<br>        <span class="hljs-keyword">return</span> ;<br>        <span class="hljs-comment">//包含不符合规则的地方，回溯，用于剪枝</span><br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> xt=dx[i]+x;<br>            <span class="hljs-type">int</span> yt=dy[i]+y;<br>            <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">pd</span>(xt,yt))<br>            &#123;<br>                <span class="hljs-keyword">continue</span> ;<br>                <span class="hljs-comment">//不符合要求继续换方向搜索</span><br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-comment">//因为要进行位置转移，我们给它起个名字，叫作案现场</span><br>                <span class="hljs-comment">//比如向下移动</span><br>                flag[xt][yt]=<span class="hljs-literal">true</span>;<br>                col[xt]--;<br>                rol[yt]--;<br>                res.<span class="hljs-built_in">push_back</span>(&#123;xt,yt&#125;);<br>                <span class="hljs-built_in">dfs</span>(xt,yt);<br>                <span class="hljs-comment">//搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span><br>                res.<span class="hljs-built_in">pop_back</span>();<br>                flag[xt][yt]=<span class="hljs-literal">false</span>;<br>                col[xt]++;<br>                rol[yt]++;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        cin &gt;&gt; rol[i];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        cin &gt;&gt; col[i];<br>    flag[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-literal">true</span>;<br>    col[<span class="hljs-number">1</span>]--;<br>    rol[<span class="hljs-number">1</span>]--;<br>    res.<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;);<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>n = <span class="hljs-number">0</span><br>flag = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">26</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">27</span>)]<br>resX = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]<br>resY = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]<br>resCount = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># ---------图的路径搜索常用方向移动表示-------</span><br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">#      1------------------&gt; x</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      ↓</span><br><span class="hljs-comment">#      y</span><br><br><span class="hljs-comment"># dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment"># dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><span class="hljs-comment"># --------------------------------------------</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">global</span> n<br>    <span class="hljs-keyword">if</span> x == n &amp; y == n:<br>        <span class="hljs-comment"># print(&quot;check point1&quot;)</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> (col[i] != <span class="hljs-number">0</span>):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>                <span class="hljs-comment"># 如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> (rol[i] != <span class="hljs-number">0</span>):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, resCount):<br>            x2 = resX[i]<br>            <span class="hljs-comment"># x 轴坐标</span><br>            y2 = resY[i]<br>            <span class="hljs-comment"># y 轴坐标</span><br>            <span class="hljs-built_in">sum</span> = n * (x2 - <span class="hljs-number">1</span>) + y2 - <span class="hljs-number">1</span><br>            <span class="hljs-comment"># 通过计算的到为题目要求的坐标系</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>, end=<span class="hljs-string">&quot; &quot;</span>)<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-comment"># 成功终止</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>  <span class="hljs-comment"># 继续搜索</span><br>        <span class="hljs-comment"># 关于终止还是继续我们交给判定即可</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x2, y2</span>):<br>    <span class="hljs-keyword">global</span> n<br>    <span class="hljs-comment"># print(&quot;x2 :&quot;, x2,&quot;y2 :&quot;, y2, &quot; n &quot;, n)</span><br>    <span class="hljs-keyword">if</span> flag[x2][y2] == <span class="hljs-number">1</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint3&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-comment"># 已被走过，不能再走，超出边界</span><br>    <span class="hljs-keyword">elif</span> x2 &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint5&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从左侧走出方格</span><br>    <span class="hljs-keyword">elif</span> x2 &gt; n:<br>        <span class="hljs-comment"># print(&quot;checkPoint6&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从右侧走出方格</span><br>    <span class="hljs-keyword">elif</span> col[x2] &lt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint8&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">elif</span> y2 &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint7&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从上侧走出方格</span><br>    <span class="hljs-keyword">elif</span> y2 &gt; n:<br>        <span class="hljs-comment"># print(&quot;y2 :&quot;,y2,&quot; n &quot;,n)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 从下侧走出方格</span><br>    <span class="hljs-keyword">elif</span> rol[y2] &lt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># print(&quot;checkPoint9&quot;)</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 没走到右下角，箭用完了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><span class="hljs-comment"># 符合边界条件，可以继续执行搜索</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> check(x, y):<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-comment"># 包含不符合规则的地方，回溯，用于剪枝</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>):<br>            xt = dx[i] + x<br>            yt = dy[i] + y<br>            <span class="hljs-comment"># print(xt, yt)</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pd(xt, yt):<br>                <span class="hljs-comment"># print(&quot;CheckPoint&quot;, xt, yt)</span><br>                <span class="hljs-keyword">continue</span><br>                <span class="hljs-comment"># 不符合要求继续换方向搜索</span><br><br>            <span class="hljs-keyword">else</span>:<br><br>                <span class="hljs-comment"># 因为要进行位置转移，我们给它起个名字，叫作案现场</span><br>                <span class="hljs-comment"># 比如向下移动</span><br>                col[xt] -= <span class="hljs-number">1</span><br>                rol[yt] -= <span class="hljs-number">1</span><br>                flag[xt][yt] = <span class="hljs-number">1</span><br>                <span class="hljs-keyword">global</span> resCount<br>                resX[resCount] = xt<br>                resY[resCount] = yt<br>                resCount += <span class="hljs-number">1</span><br>                <span class="hljs-comment"># print(&quot;---------123-------&quot;)</span><br>                <span class="hljs-comment"># print(flag)</span><br>                <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>                dfs(xt, yt)<br><br>                <span class="hljs-comment"># 搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span><br><br>                resCount -= <span class="hljs-number">1</span><br>                flag[xt][yt] = <span class="hljs-number">0</span><br>                <span class="hljs-comment"># print(&quot;--------321--------&quot;)</span><br>                <span class="hljs-comment"># print(flag)</span><br>                <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>                col[xt] += <span class="hljs-number">1</span><br>                rol[yt] += <span class="hljs-number">1</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    <span class="hljs-comment"># print(flag)</span><br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    rol = <span class="hljs-built_in">input</span>().split()<br>    rol = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, rol))<br>    rol = [<span class="hljs-number">0</span>] + rol<br>    col = <span class="hljs-built_in">input</span>().split()<br>    col = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, col))<br>    col = [<span class="hljs-number">0</span>] + col<br>    flag[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    <span class="hljs-comment"># print(flag)</span><br>    <span class="hljs-comment"># print(&quot;----------------&quot;)</span><br>    col[<span class="hljs-number">1</span>] -= <span class="hljs-number">1</span><br>    rol[<span class="hljs-number">1</span>] -= <span class="hljs-number">1</span><br>    resX[resCount] = <span class="hljs-number">1</span><br>    resY[resCount] = <span class="hljs-number">1</span><br>    resCount += <span class="hljs-number">1</span><br>    dfs(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br><br></code></pre></td></tr></table></figure><p>然而需要注意的是上面代码会超时，我们要对其进行优化，因为同样的计算 Python 运行时间相比 C++ 要长很多，这里给 C++ 和 Python 相同的时间，确实是难为 Python 了。 因为上面是为了给大家系统的将一个框架，而这道题目的时间复杂度相对较高，Python 的运行时间是 C++ 10 倍甚至几十倍，这个题目，同样的复杂度，Python 给的时间是不好通过这个题目的，我优化了十几遍，确实通过不了。</p><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Vector;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> rol[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> col[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<span class="hljs-comment">//格子数 长宽从1到n</span><br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">boolean</span> flag[][]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N][N]; <span class="hljs-comment">//用来标记是否走过</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> resX[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">1000</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> resY[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">1000</span>];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> resCount=<span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dx[]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> dy[]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>&#125;;<br><br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br><span class="hljs-comment">//--------------------------------------------</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span>  <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> <span class="hljs-comment">//判断走过的路径的箭靶数是否与目标相同</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(x==n &amp;&amp; y==n)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>            &#123;<br><br>                <span class="hljs-keyword">if</span>(col[i]!=<span class="hljs-number">0</span>)<br>                &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>                <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>            &#125;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(rol[i]!=<span class="hljs-number">0</span>)<br>                &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>                <span class="hljs-comment">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><br>            &#125;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;resCount; i++)<br>            &#123;<br>                <span class="hljs-type">int</span> x2= resX[i];<br>                <span class="hljs-comment">//x 轴坐标</span><br>                <span class="hljs-type">int</span> y2=resY[i];<br>                <span class="hljs-comment">//y 轴坐标</span><br>                <span class="hljs-type">int</span> sum=n*(x2-<span class="hljs-number">1</span>)+y2-<span class="hljs-number">1</span> ;<br>                <span class="hljs-comment">// 通过计算的到为题目要求的坐标系</span><br>                System.out.print(sum+<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            System.out.println();<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">// 成功终止</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">//继续搜索</span><br>        <span class="hljs-comment">//关于终止还是继续我们交给判定即可</span><br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x2,<span class="hljs-type">int</span> y2)</span> <span class="hljs-comment">//边界判断</span><br>    &#123;<br><br>        <span class="hljs-keyword">if</span>(flag[x2][y2] )<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//已被走过，不能再走，超出边界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从左侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x2&gt;n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从右侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从上侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y2&gt;n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//从下侧走出方格</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(col[x2]&lt;=<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//没走到右下角，箭用完了</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(rol[y2]&lt;=<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//没走到右下角，箭用完了</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">//符合边界条件，可以继续执行搜索</span><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><br>    &#123;<br><br>        <span class="hljs-keyword">if</span>(!check(x,y))<br>        &#123;<br>            <span class="hljs-keyword">return</span> ;<br>            <span class="hljs-comment">//包含不符合规则的地方，回溯，用于剪枝</span><br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>            &#123;<br>                <span class="hljs-type">int</span> xt=dx[i]+x;<br>                <span class="hljs-type">int</span> yt=dy[i]+y;<br><br>                <span class="hljs-keyword">if</span>(!pd(xt,yt))<br>                &#123;<br>                    <span class="hljs-keyword">continue</span> ;<br>                    <span class="hljs-comment">//不符合要求继续换方向搜索</span><br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    <span class="hljs-comment">//因为要进行位置转移，我们给它起个名字，叫作案现场</span><br>                    <span class="hljs-comment">//比如向下移动</span><br>                    flag[xt][yt]=<span class="hljs-literal">true</span>;<br>                    col[xt]--;<br>                    rol[yt]--;<br>                    resX[resCount]=xt;<br>                    resY[resCount++]=yt;<br>                    dfs(xt,yt);<br>                    <span class="hljs-comment">//搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span><br>                    resCount--;<br>                    flag[xt][yt]=<span class="hljs-literal">false</span>;<br>                    col[xt]++;<br>                    rol[yt]++;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>            rol[i]=in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>             col[i]=in.nextInt();<br>        flag[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-literal">true</span>;<br>        col[<span class="hljs-number">1</span>]--;<br>        rol[<span class="hljs-number">1</span>]--;<br>        resX[resCount]=<span class="hljs-number">1</span>;<br>        resY[resCount++]=<span class="hljs-number">1</span>;<br>        dfs(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="最大数字"><a href="#最大数字" class="headerlink" title="最大数字"></a>最大数字</h3><p>给定一个正整数 $N$ 。你可以对 $N$ 的任意一位数字执行任意次以下 $2$ 种操 作：</p><ol><li><p>将该位数字加 $1$ 。如果该位数字已经是 $9$ , 加 $1$ 之后变成 $0$ 。</p></li><li><p>将该位数字减 $1$ 。如果该位数字已经是 $0$ , 减 $1$ 之后变成 $9$ 。</p></li></ol><p>你现在总共可以执行 $1$ 号操作不超过 $A$ 次, $2$ 号操作不超过 $B$ 次。 请问你最大可以将 $N$ 变成多少?</p><p><strong>解题思路:</strong></p><p>看上去 $N$ 的范围貌似很大，达到了 <code>1e17</code> 的范围，但其实我们最多只需要考虑这最多 <code>17</code> 位数，所以可以想到爆搜得到答案。</p><p>一个数的大小是从左到右依次判断，所以我们从最左边开始枚举，我们无需关注后面的数，要利用自己的 <code>1</code> 号操作和 <code>2</code> 号操作 <strong>保证当前这个数位的数一定要尽可能最大</strong></p><p>然后分别考虑两种操作，首先两种操作不可能混用，因为它们是抵消的效果，所以要么对这个数全使用 <code>1</code> 操作，要么 <code>2</code> 操作。假设某个数位的值为 <code>x</code>,首先考虑 <code>1</code> 号操作，使用后可以让该数位变大，出于<strong>贪心</strong>考虑，我们想让它变成 <code>9</code>，那么需要进行 <code>9-x</code> 次 <code>1</code> 号操作，当然可能此时 <code>1</code> 号操作并不足以让我们将 <code>x</code> 变成 <code>9</code>，但我们还是使用剩余的全部的次数将其变大，所以每次考虑 <code>1</code> 号操作应该使用的操作数 <code>t</code> 应该为 <code>t=min(n,9-x)</code>,此时 <code>x</code> 将变为 <code>x+t</code>，然后进行下一位的判断。</p><p>其次我们考虑 <code>2</code> 号操作，这个的判断比较简单，它是让某个值减小，唯一能让某个数变大的机会就是将其减到 <code>0</code> 后再减就会变成 <code>9</code>。那么这样操作需要的次数就是 <code>x+1</code>，如果操作次数不够，那我们宁愿不使用，因为这只会让这个数位变得更小。</p><p>在深搜 <code>dfs</code> 的过程中，参数记录遍历到第几个数位以及此时累计的和，当搜索完所有数位后，将此时的和与答案进行一个取 <code>max</code>，最后的值则为答案。</p><p>C++ 语言描述：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><br><span class="hljs-type">char</span> c[<span class="hljs-number">20</span>];<br>LL ans=<span class="hljs-number">0</span>;<br><span class="hljs-comment">//n:1号操作剩余次数  m:2号操作剩余次数</span><br><span class="hljs-type">int</span> n,m;<br><span class="hljs-type">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> i,LL v)</span>&#123;<br>    <span class="hljs-type">int</span> x=c[i]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">if</span>(c[i])&#123;<br>        <span class="hljs-comment">//应该使用的操作次数</span><br>        <span class="hljs-type">int</span> t=min(n,<span class="hljs-number">9</span>-x);<br>        n-=t;<br>        dfs(i+<span class="hljs-number">1</span>,v*<span class="hljs-number">10</span>+x+t);<br>        <span class="hljs-comment">//回溯</span><br>        n+=t;<br>        <span class="hljs-comment">//考虑操作2是否能够使用</span><br>        <span class="hljs-keyword">if</span>(m&gt;x)&#123;<br>            m-=x+<span class="hljs-number">1</span>;<br>            dfs(i+<span class="hljs-number">1</span>,v*<span class="hljs-number">10</span>+<span class="hljs-number">9</span>);<br>            <span class="hljs-comment">//回溯</span><br>            m+=x+<span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-comment">//答案取max</span><br>        ans=max(ans,v);<br>    &#125;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s%d%d&quot;</span>,c,&amp;n,&amp;m);<br>    dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(System.out));<br>    <span class="hljs-keyword">static</span> String t;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> a, b, m;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// i 表示考虑到第i位  v表示当前的值是多少</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">long</span> v)</span> &#123;<br>        <span class="hljs-keyword">if</span> (i == m) &#123;<br>            ans = Math.max(ans, v);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> t.charAt(i) - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-comment">//考虑第一种使用</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">g</span> <span class="hljs-operator">=</span> Math.min(a, <span class="hljs-number">9</span> - c);<br>        a -= g;<br>        dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + c + g);<br>        <span class="hljs-comment">//回溯</span><br>        a += g;<br>        <span class="hljs-comment">//考虑第二种使用   我一定要减到9  只有b&gt;c 才能减到9</span><br>        <span class="hljs-keyword">if</span> (b &gt; c) &#123;<br>            b -= c + <span class="hljs-number">1</span>;<br>            dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + <span class="hljs-number">9</span>);<br>            <span class="hljs-comment">//回溯</span><br>            b += c + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        String[] s = br.readLine().trim().split(<span class="hljs-string">&quot; &quot;</span>);<br>        t = s[<span class="hljs-number">0</span>];<br>        m = t.length();<br>        a = Integer.parseInt(s[<span class="hljs-number">1</span>]);<br>        b = Integer.parseInt(s[<span class="hljs-number">2</span>]);<br>        dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>        out.println(ans);<br>        out.flush();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br>t = <span class="hljs-string">&quot;&quot;</span><br>a = <span class="hljs-number">0</span><br>b = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>ans = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">i, v</span>):<br>    <span class="hljs-keyword">global</span> ans, a, b, t<br>    <span class="hljs-keyword">if</span> i == m:<br>        ans = <span class="hljs-built_in">max</span>(ans, v)<br>        <span class="hljs-keyword">return</span><br>    c = <span class="hljs-built_in">int</span>(t[i])<br>    <span class="hljs-comment"># 考虑第一种使用</span><br>    g = <span class="hljs-built_in">min</span>(a, <span class="hljs-number">9</span> - c)<br>    a -= g<br>    dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + c + g)<br>    <span class="hljs-comment"># 回溯</span><br>    a += g<br>    <span class="hljs-comment"># 考虑第二种使用   我一定要减到9  只有b&gt;c 才能减到9</span><br>    <span class="hljs-keyword">if</span> b &gt; c:<br>        b -= c + <span class="hljs-number">1</span><br>        dfs(i + <span class="hljs-number">1</span>, v * <span class="hljs-number">10</span> + <span class="hljs-number">9</span>)<br>        <span class="hljs-comment"># 回溯</span><br>        b += c + <span class="hljs-number">1</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">global</span> ans, a, b, t, m<br>    line = sys.stdin.readline().strip()<br>    s = line.split()<br>    t = s[<span class="hljs-number">0</span>]<br>    m = <span class="hljs-built_in">len</span>(t)<br>    a = <span class="hljs-built_in">int</span>(s[<span class="hljs-number">1</span>])<br>    b = <span class="hljs-built_in">int</span>(s[<span class="hljs-number">2</span>])<br>    dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>    <span class="hljs-built_in">print</span>(ans)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>DFS 是一种非常重要的回溯算法，它是通过递归设计转移状态，再加上边界判断，与结果检查，构成的基本搜索框架。</p><p>DFS 最重要的就是设计回溯，所谓回溯就是还原现场，保证在执行另一分支的时候能够确保所有的改变只受当前状态的影响，所以在一条路走不通时就要修改。特殊的修改可以达到特殊的回溯效果，回溯时剪枝，回溯时调整路线，都是可以的。</p><p>DFS 是算法学习的基础工具，很重要，必须要学会。</p><hr><p>show: step version: 1.0 enable_checker: true</p><hr><h2 id="广度优先搜索"><a href="#广度优先搜索" class="headerlink" title="广度优先搜索"></a>广度优先搜索</h2><p>BFS，其英文全称是 Breadth First Search，意为广度优先搜索，是所有的搜索手段之一。它是从某个状态开始，将所有节点加入一个先进先出的队列，然后一层一层进行状态转移，并且展开节点。</p><p>本章题目难度较大，请大家仔细研读讲解和代码。</p><h2 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h2><p>1.BFS 算法设计原理与实现方法 2.经典题型精讲</p><h2 id="广度优先搜索基本概念"><a href="#广度优先搜索基本概念" class="headerlink" title="广度优先搜索基本概念"></a>广度优先搜索基本概念</h2><p>作为搜索算法的一种，BFS 相较于 DFS 而言，BFS 是一层一层展开的，那么对于有多个终态时，最先找到的一定是最短的。</p><h2 id="广度优先搜索算法的设计步骤"><a href="#广度优先搜索算法的设计步骤" class="headerlink" title="广度优先搜索算法的设计步骤"></a>广度优先搜索算法的设计步骤</h2><p>按照定义设计：</p><ol><li><p>确定该题目的状态（包括边界）</p></li><li><p>找到状态转移方式</p></li><li><p>找到问题的出口，计数或者某个状态</p></li><li><p>设计搜索</p></li></ol><p>会发现我们前期要找到的参数基本一致，所以在一般情况下 BFS 和 DFS 可以相互转换。</p><p>伪代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">check</span><span class="hljs-params">(参数)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(满足条件)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(参数)</span>&#123;<br>    相应操作<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">bfs</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-number">1.</span> 把根节点放入队列尾端<br>    <span class="hljs-number">2.</span> 每次从队列中取出一个节点<br>    <span class="hljs-number">3.</span> Check 判断是不是答案，如果是结束算法 <span class="hljs-keyword">return</span>;<br>    <span class="hljs-number">4.</span> 把当前取出的节点扩展，如果扩展后的节点经Pd()后符合要求，就放入队列，不符合就不放。<br>    <span class="hljs-number">5.</span> 转到步骤<span class="hljs-number">2</span>，循环执行<br>&#125;<br><br>如果所有节点被扩展完了，没有找到答案就无解。<br></code></pre></td></tr></table></figure><h3 id="长草"><a href="#长草" class="headerlink" title="长草"></a>长草</h3><p><a href="https://www.lanqiao.cn/problems/149/learning/">题目链接</a></p><p>难度: 简单</p><p>标签: 模拟, BFS, 2020, 省模拟赛</p><p><strong>题目描述:</strong></p><p>小明有一块空地，他将这块空地划分为 $n$ 行 $m$ 列的小块，每行和每列的长度都为 1。</p><p>小明选了其中的一些小块空地，种上了草，其他小块仍然保持是空地。</p><p>这些草长得很快，每个月，草都会向外长出一些，如果一个小块种了草，则它将向自己的上、下、左、右四小块空地扩展，</p><p>这四小块空地都将变为有草的小块。请告诉小明，$k$ 个月后空地上哪些地方有草。</p><p><strong>输入描述:</strong></p><p>输入的第一行包含两个整数 $n, m$。</p><p>接下来 $n$ 行，每行包含 $m$ 个字母，表示初始的空地状态，字母之间没有空格。如果为小数点，表示为空地，如果字母为 $g$，表示种了草。</p><p>接下来包含一个整数 $k$。 其中，$2   \leq   n, m   \leq   1000，1   \leq   k   \leq   1000$。</p><p><strong>输出描述:</strong></p><p>输出 $n$ 行，每行包含 $m$ 个字母，表示 $k$ 个月后空地的状态。如果为小数点，表示为空地，如果字母为 $g$，表示长了草。</p><p><strong>输入输出样例:</strong></p><p><strong>示例:</strong></p><p><strong>输入:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>4 5<br>.g...<br>.....<br>..g..<br>.....<br>2<br></code></pre></td></tr></table></figure><p><strong>输出:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt"><br>gggg.<br>gggg.<br>ggggg<br>.ggg.<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 256M<br></code></pre></td></tr></table></figure><p><strong>解题思路:</strong></p><p>这个题目简直就是为了广度优先搜索设置模板题，由于这个题目时输出广度优先搜索 <code>K</code> 次扩展后的终态，那我们就不用设置 <code>Check</code> 函数。</p><p>这里用一个 $N\times M$ 的矩阵来表示草地。</p><ol><li><p>算法开始：</p><p>将字母为 <code>g</code> 的草地的位置加入队列，然后向下执行</p></li><li><p>判断边界：</p><p>判断是否已经长了草，判断是否超出边界范围</p></li><li><p>搜索过程：</p><p>不断从队列取出一个节点，进行上下左右的扩展，执行 <code>2</code> 判断边界，符合就放入队列，不符合就跳过。</p><p>执行 K 次扩展，输出草地状态。</p></li><li><p>check(参数)：</p><p>这里不需要进行 <code>Check</code></p></li></ol><p>C++ 语言描述:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M = <span class="hljs-number">1005</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PII</span><br>&#123;<br>    <span class="hljs-type">int</span> first;<br>    <span class="hljs-type">int</span> second;<br>&#125;;<br><span class="hljs-comment">// C++ 有个数据类型叫 pair 上面的就可以定义为 pair&lt;int,int&gt; 用起来比较方便。</span><br>PII tempPair;<span class="hljs-comment">//临时结点</span><br><span class="hljs-type">char</span> Map[M][M];<br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;;<br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br><span class="hljs-type">int</span> n;<span class="hljs-comment">// n 行</span><br><span class="hljs-type">int</span> m;<span class="hljs-comment">// m 列</span><br><span class="hljs-type">int</span> k;<span class="hljs-comment">// k 次</span><br><br>queue&lt;PII &gt; q; <span class="hljs-comment">//广度优先搜索所用的队列</span><br><br><span class="hljs-type">int</span> len;<span class="hljs-comment">//记录节点数量方便后续k的计算</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(x&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// /x 轴坐标 左侧越界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//x 轴坐标 右侧越界</span><br>    <span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span>(y&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//y 轴坐标 上侧越界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&gt;m)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//y 轴坐标 下侧越界</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(Map[x][y]==<span class="hljs-string">&#x27;g&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//已经长草了</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 在范围内，且没长草</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BFS</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//BFS</span><br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>()&amp;&amp;k&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        tempPair = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-comment">//这两步是取出队首的节点</span><br><br>        <span class="hljs-type">int</span> x = tempPair.first;<span class="hljs-comment">//横坐标</span><br>        <span class="hljs-type">int</span> y = tempPair.second;<span class="hljs-comment">//纵坐标</span><br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> nowx = x+dx[i]; <span class="hljs-comment">//扩展后的横坐标</span><br>            <span class="hljs-type">int</span> nowy = y+dy[i]; <span class="hljs-comment">//扩展后的纵坐标</span><br><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">pd</span>(nowx,nowy))<br>            &#123;<br>                q.<span class="hljs-built_in">push</span>(&#123;nowx,nowy&#125;);<br>                Map[nowx][nowy]=<span class="hljs-string">&#x27;g&#x27;</span>;<br>            &#125;<br>            <span class="hljs-comment">//符合要求执行扩展，不符合要求，忽略即可。</span><br>        &#125;<br><br>        len--; <span class="hljs-comment">//没取出一个节点len  -1</span><br>        <span class="hljs-keyword">if</span>(len==<span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-comment">//当len =0 时，代表当前层扩展完了，那么就代表第一个月扩展完了</span><br>            k--; <span class="hljs-comment">// 所以k--</span><br>            len = q.<span class="hljs-built_in">size</span>(); <span class="hljs-comment">// 当前层扩展完了，那就该扩展下一层了，所以len又被赋值为下一层的节点数目的值</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>        &#123;<br>            cin&gt;&gt;Map[i][j];<br>            <span class="hljs-keyword">if</span>(Map[i][j]==<span class="hljs-string">&#x27;g&#x27;</span>)<br>            &#123;<br>                tempPair.first=i;<br>                tempPair.second=j;<br>               <span class="hljs-comment">// cout&lt;&lt;i&lt;&lt;&quot;&quot;&lt;&lt;j&lt;&lt;endl;</span><br>                q.<span class="hljs-built_in">push</span>(tempPair);<span class="hljs-comment">//将初始有树的结点加入队列</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    len = q.<span class="hljs-built_in">size</span>();<span class="hljs-comment">//记录第一层的节点数量方便后续k的计算</span><br>    cin&gt;&gt;k;<br>    <span class="hljs-built_in">BFS</span>();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>        &#123;<br>            cout&lt;&lt;Map[i][j];<br>        &#125;<br><br>        cout&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">#      1------------------&gt; x</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      ↓</span><br><span class="hljs-comment">#      y</span><br><br><span class="hljs-comment"># dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment"># dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br>Map = []<br><br>q = Queue()<br><br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>k = <span class="hljs-number">0</span><br><br>length = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">global</span> n, m, Map<br>    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标左侧越界</span><br>    <span class="hljs-keyword">elif</span> x &gt;= n:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标右侧越界</span><br>    <span class="hljs-keyword">elif</span> y &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y轴坐标上侧越界</span><br>    <span class="hljs-keyword">elif</span> y &gt;= m:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y 轴坐标下侧越界</span><br>    <span class="hljs-keyword">elif</span> Map[x][y] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 已经长草了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># 在范围内，且没长草</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>():<br><br>    <span class="hljs-keyword">global</span> k, q, n, m, Map, length<br>    <span class="hljs-keyword">while</span> k &gt; <span class="hljs-number">0</span> &amp; (<span class="hljs-keyword">not</span> q.empty()):<br>        tempPair = q.get()<br>        x = tempPair[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 横坐标</span><br>        y = tempPair[<span class="hljs-number">1</span>]  <span class="hljs-comment"># 纵坐标</span><br>        nowx=x+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(nowx, y)):<br>            q.put((nowx, y))<br>            Map[nowx][y] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        nowx=x-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(nowx, y)):<br>            q.put((nowx, y))<br>            Map[nowx][y] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        nowy=y+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(x, nowy)):<br>            q.put((nowx, nowy))<br>            Map[x][nowy] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        nowy=y-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> (pd(x, nowy)):<br>            q.put((nowx, nowy))<br>            Map[x][nowy] = <span class="hljs-string">&#x27;g&#x27;</span><br><br>        length -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> length == <span class="hljs-number">0</span>:<br>            k -= <span class="hljs-number">1</span><br>            length = q.qsize()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        input_ = <span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            Map[i][j] = input_[j]<br>            <span class="hljs-keyword">if</span> Map[i][j] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>                q.put((i, j))<br><br>    k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    length = q.qsize()<br>    BFS()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        str_temp = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            str_temp += Map[i][j]<br>        <span class="hljs-built_in">print</span>(str_temp)<br></code></pre></td></tr></table></figure><p><strong>重点:</strong></p><p>Python 的 Queue 非常耗费时间，强烈建议大家使用 list 进行模拟</p><p>下面是用 List 模拟，使用 Queue 耗时 3000 ms , 使用 list 模拟仅消耗 54 ms 所以大家使用 Python 编写代码的时候还是使用 List 尽量避免 Queue 的使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">#      1------------------&gt; x</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      |</span><br><span class="hljs-comment">#      ↓</span><br><span class="hljs-comment">#      y</span><br><br><span class="hljs-comment"># dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment"># dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br>Map = []<br><br>q = []<br>qfront = <span class="hljs-number">0</span><br>qend = <span class="hljs-number">0</span><br><br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>k = <span class="hljs-number">0</span><br><br>length = <span class="hljs-number">0</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标左侧越界</span><br>    <span class="hljs-keyword">elif</span> x &gt;= n:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标右侧越界</span><br>    <span class="hljs-keyword">elif</span> y &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y轴坐标上侧越界</span><br>    <span class="hljs-keyword">elif</span> y &gt;= m:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y 轴坐标下侧越界</span><br>    <span class="hljs-keyword">elif</span> Map[x][y] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 已经长草了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># 在范围内，且没长草</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>():<br>    <span class="hljs-keyword">global</span> k, q, n, m, Map, length, qend, qfront<br>    <span class="hljs-comment"># print(&quot;K Length&quot;, k, length)</span><br>    <span class="hljs-keyword">while</span> k &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> length &gt; <span class="hljs-number">0</span>:<br>        tempPair = q[qfront]<br>        qfront += <span class="hljs-number">1</span><br>        x = tempPair[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 横坐标</span><br>        y = tempPair[<span class="hljs-number">1</span>]  <span class="hljs-comment"># 纵坐标</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br><br>            nowx = x + dx[i]  <span class="hljs-comment"># 扩展后的横坐标</span><br>            nowy = y + dy[i]  <span class="hljs-comment"># 扩展后的纵坐标</span><br><br>            <span class="hljs-keyword">if</span> (pd(nowx, nowy)):<br>                q.append((nowx,nowy))<br>                qend += <span class="hljs-number">1</span><br>                Map[nowx][nowy] = <span class="hljs-string">&#x27;g&#x27;</span><br>        length -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> length == <span class="hljs-number">0</span>:<br>            k -= <span class="hljs-number">1</span><br>            length = qend - qfront<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        input_ = <span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            Map[i][j] = input_[j]<br>            <span class="hljs-keyword">if</span> Map[i][j] == <span class="hljs-string">&#x27;g&#x27;</span>:<br>                q.append((i,j))<br>                qend += <span class="hljs-number">1</span><br><br>    k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    length = qend - qfront<br>    BFS()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        str_temp = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            str_temp += Map[i][j]<br>        <span class="hljs-built_in">print</span>(str_temp)<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.concurrent.LinkedBlockingQueue;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">M</span> <span class="hljs-operator">=</span> <span class="hljs-number">1005</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PII</span><br>    &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> first;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> second;<br>    &#125;;<br><br>    <span class="hljs-keyword">static</span> String Map[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[M];<br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dx[]= &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> dy[]= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>&#125;;<br><br><span class="hljs-comment">// 两两组合形成上下左右四个方向</span><br><span class="hljs-comment">//      1------------------&gt; x</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      |</span><br><span class="hljs-comment">//      ↓</span><br><span class="hljs-comment">//      y</span><br><br><span class="hljs-comment">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><br><span class="hljs-comment">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><br><span class="hljs-comment">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><br><span class="hljs-comment">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<span class="hljs-comment">// n 行</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> m;<span class="hljs-comment">// m 列</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> k;<span class="hljs-comment">// k 次</span><br><br>    <span class="hljs-keyword">static</span> Queue&lt;PII &gt; q= <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;();<br>    <span class="hljs-comment">//广度优先搜索所用的队列</span><br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> len;<span class="hljs-comment">//记录节点数量方便后续k的计算</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span><br>    &#123;<br><br>        <span class="hljs-keyword">if</span>(x&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">// /x 轴坐标 左侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x&gt;n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//x 轴坐标 右侧越界</span><br>        <span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span>(y&lt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 上侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&gt;m)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 下侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(Map[x].charAt(y)==<span class="hljs-string">&#x27;g&#x27;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//已经长草了</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">// 在范围内，且没长草</span><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">BFS</span><span class="hljs-params">()</span><br>    &#123;<br>        <span class="hljs-comment">//BFS</span><br>        <span class="hljs-keyword">while</span>(q.size()!=<span class="hljs-number">0</span>&amp;&amp;k&gt;<span class="hljs-number">0</span>)<br>        &#123;<br>            PII tempPair= q.peek();<br>            q.poll();<br>            <span class="hljs-comment">//这两步是取出队首的节点</span><br><span class="hljs-comment">//            System.out.println(q.size());</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> tempPair.first;<span class="hljs-comment">//横坐标</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> tempPair.second;<span class="hljs-comment">//纵坐标</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)<br>            &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">nowx</span> <span class="hljs-operator">=</span> x+dx[i]; <span class="hljs-comment">//扩展后的横坐标</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">nowy</span> <span class="hljs-operator">=</span> y+dy[i]; <span class="hljs-comment">//扩展后的纵坐标</span><br>                <span class="hljs-keyword">if</span>(pd(nowx,nowy))<br>                &#123;<br>                    PII tempPair2=<span class="hljs-keyword">new</span> <span class="hljs-title class_">PII</span>();<span class="hljs-comment">//临时结点</span><br>                    tempPair2.first=nowx;<br>                    tempPair2.second=nowy;<br>                    q.add(tempPair2);<br>                    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">strBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(Map[nowx]);<br>                    strBuilder.setCharAt(nowy, <span class="hljs-string">&#x27;g&#x27;</span>);<br>                    Map[nowx]=strBuilder.toString();<br>                &#125;<br>                <span class="hljs-comment">//符合要求执行扩展，不符合要求，忽略即可。</span><br>            &#125;<br>            len--; <span class="hljs-comment">//没取出一个节点len  -1</span><br>            <span class="hljs-keyword">if</span>(len==<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-comment">//当len =0 时，代表当前层扩展完了，那么就代表第一个月扩展完了</span><br>                k--; <span class="hljs-comment">// 所以k--</span><br>                len = q.size(); <span class="hljs-comment">// 当前层扩展完了，那就该扩展下一层了，所以len又被赋值为下一层的节点数目的值</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        m = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            Map[i]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot; &quot;</span> +in.next());<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>            &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">temChar</span> <span class="hljs-operator">=</span> Map[i].charAt(j);<br>                <span class="hljs-keyword">if</span>(temChar==<span class="hljs-string">&#x27;g&#x27;</span>)<br>                &#123;<br>                    PII tempPair=<span class="hljs-keyword">new</span> <span class="hljs-title class_">PII</span>();<span class="hljs-comment">//临时结点</span><br>                    tempPair.first=i;<br>                    tempPair.second=j;<br>                    q.offer(tempPair);<span class="hljs-comment">//将初始有草的结点加入队列</span><br>                &#125;<br>            &#125;<br>        &#125;<br><br>        len = q.size();<span class="hljs-comment">//记录第一层的节点数量方便后续k的计算</span><br>        k= in.nextInt();<br>        BFS();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        &#123;<br>            System.out.println(Map[i]);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="走迷宫"><a href="#走迷宫" class="headerlink" title="走迷宫"></a>走迷宫</h3><p><a href="https://www.lanqiao.cn/problems/1216/learning/">题目链接</a></p><p>难度: 简单</p><p>标签: BFS</p><p><strong>题目描述:</strong></p><p>给定一个 $N\times M$ 的网格迷宫 $G$。$G$ 的每个格子要么是道路，要么是障碍物（道路用 $1$ 表示，障碍物用 $0$ 表示）。</p><p>已知迷宫的入口位置为 $(x_1,y_1)$，出口位置为 $(x_2 , y_2)$。问从入口走到出口，最少要走多少个格子。</p><p><strong>输入:</strong></p><p>输入第 $1$ 行包含两个正整数 $N,M$，分别表示迷宫的大小。</p><p>接下来输入一个 $N\times M$ 的矩阵。若 $G_{i,j}&#x3D;1$ 表示其为道路，否则表示其为障碍物。</p><p>最后一行输入四个整数 $x_1,y_1,x_2,y_2$，表示入口的位置和出口的位置。</p><p>$1\leq N,M\leq10^2$，$0\leq G_{i,j}\leq 1$，$1\leq x_1,x_2\leq N$，$1\leq y_1,y_2\leq M$。</p><p><strong>输出：</strong></p><p>输出仅一行，包含一个整数表示答案。</p><p>若无法从入口到出口，则输出 $-1$。</p><p><strong>输入输出样例：</strong></p><p>输入</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 5<br>1 0 1 1 0<br>1 1 0 1 1<br>0 1 0 1 1<br>1 1 1 1 1<br>1 0 0 0 1<br>1 1 5 5<br></code></pre></td></tr></table></figure><p>输出</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">8<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">最大运行时间：1s 最大运行内存: 128M<br></code></pre></td></tr></table></figure><p><strong>解题思路:</strong></p><ol><li><p><strong>算法开始：</strong></p><p>我们以起点开始做 BFS ，将入口压入栈开始执行 BFS 算法</p></li><li><p><strong>判断边界：</strong></p><p>在当前行，当前列的位置上判断是否满足条件，若不满足，跳到第 5 步，即不符合边界条件。 判断条件如下：</p><ol><li><p>$vis[x][y]$ &gt;&#x3D; 1 标记数组已经被标记，已被走过，不能再走，超出边界</p></li><li><p>$x &lt; 1$ 从左侧走出方格</p></li><li><p>$x &gt; n$ 从右侧走出方格</p></li><li><p>$y &lt; 1$ 从上侧走出方格</p></li><li><p>$y &gt; n$ 从下侧走出方格</p></li><li><p>$map[x][y]$ !&#x3D; 1 没有路不能走</p></li></ol></li><li><p><strong>搜索过程：</strong></p><p>调用 Check 函数。</p><p>如果边界条件满足，就继续调用搜索，找到下一步的位置</p><p>每次找到下一个位置的时候，令其 $Vis[nextx][nexty]$ &#x3D; 当前 $Vis + 1$</p><p>这样既能用 $vis$ 数组标记又能使用 $vis$ 数组存步数，从 $1$ 开始，即开始节点是 $1$ ，所以最后要减去 $1$ 。</p></li><li><p><strong>check(参数)：</strong></p><p>如果当搜索到 $x &#x3D; 终点 x$, $y &#x3D; 终点 y$ 时，就找到了终点，此时他的 $Vis$ 数组就存储了他的步数，但是是从 $1$ 开始的。</p></li></ol><p>C++ 语言描述:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> vis[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>]; <span class="hljs-comment">//用于存储是否访问过，并且存储长度</span><br><br><span class="hljs-type">char</span> G[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>]; <span class="hljs-comment">//用于存储题目给出的地图</span><br><br><span class="hljs-type">int</span> n,m,ans=<span class="hljs-number">0</span>;<br><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">1</span>&#125;;<br><br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-comment">//上下左右移动，不会的看前面的代码</span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> x;<br>    <span class="hljs-type">int</span> y;<br>&#125;;<br><br>node Start,End;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br><br><br>    <span class="hljs-keyword">if</span>(x&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从左侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x&gt;n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从右侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&lt;<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从上侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(y&gt;m)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//从下侧走出方格</span><br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( vis[x][y]!=<span class="hljs-number">0</span>)<br>        <span class="hljs-comment">//已经访问了</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(G[x][y]!=<span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//不是路不能走</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span>  <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">if</span>(x == End.x&amp;&amp; y == End.y)   <span class="hljs-comment">//找到终点，把距离给他</span><br>    &#123;<br>        ans  =  vis[x][ y];<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">else</span>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;node&gt;q;<br><br>    node now,next;<br><br>    q.<span class="hljs-built_in">push</span>(Start);     <span class="hljs-comment">//将起点压人队列中</span><br><br>    vis[Start.x][Start.y] = <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        now = q.<span class="hljs-built_in">front</span>();<br><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">check</span>(now.x,now.y))<br>            <span class="hljs-keyword">return</span> ;<br><br>        q.<span class="hljs-built_in">pop</span>();     <span class="hljs-comment">//将队列最前面的弹出。</span><br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)  <span class="hljs-comment">//四个方向</span><br>        &#123;<br><br>            <span class="hljs-type">int</span> nextx = now.x + dx[i];<br>            <span class="hljs-type">int</span> nexty = now.y + dy[i];<br><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">pd</span>(nextx,nexty))  <span class="hljs-comment">//判断是否符合条件</span><br>            &#123;<br><br>                next.x=nextx;<br>                next.y=nexty;<br><br>                q.<span class="hljs-built_in">push</span>(next);<br><br>                vis[nextx][nexty] = vis[now.x][now.y]+<span class="hljs-number">1</span>; <span class="hljs-comment">//步数+1</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-comment">//memset(vis,0,sizeof(vis));</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; j++)<br>        &#123;<br>            cin&gt;&gt;G[i][j];<br>        &#125;<br>    &#125;<br><br>    cin&gt;&gt;Start.x&gt;&gt;Start.y&gt;&gt;End.x&gt;&gt;End.y;<br><br>    ans = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-built_in">bfs</span>();<br>    cout&lt;&lt;ans<span class="hljs-number">-1</span>&lt;&lt;endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><br>dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br><br>dy = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br>G = []<br><br>Vis = []<br><br><span class="hljs-comment"># --------队列模拟-----------</span><br>q = []                   <span class="hljs-comment"># |</span><br>                         <span class="hljs-comment"># |</span><br>qfront = <span class="hljs-number">0</span>               <span class="hljs-comment"># |</span><br>                         <span class="hljs-comment"># |</span><br>qend = <span class="hljs-number">0</span>                 <span class="hljs-comment"># |</span><br><span class="hljs-comment"># --------队列模拟-----------</span><br><br><br>n = <span class="hljs-number">0</span><br>m = <span class="hljs-number">0</span><br>ans = <span class="hljs-number">0</span><br><br>startX=<span class="hljs-number">0</span><br>startY=<span class="hljs-number">0</span><br><br>endX=<span class="hljs-number">0</span><br>endY=<span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pd</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-comment"># x 轴坐标左侧越界</span><br><br>    <span class="hljs-keyword">elif</span> x &gt; n:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># x 轴坐标右侧越界</span><br><br>    <span class="hljs-keyword">elif</span> y &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y轴坐标上侧越界</span><br><br>    <span class="hljs-keyword">elif</span> y &gt; m:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># y 轴坐标下侧越界</span><br><br>    <span class="hljs-keyword">elif</span> Vis[x][y]!=<span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment">#已经访问了</span><br>    <span class="hljs-keyword">elif</span> G[x][y] != <span class="hljs-string">&#x27;1&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 已经访问了</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    <span class="hljs-comment"># 在范围内，且没长草</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params"> x,  y</span>):<br><br>    <span class="hljs-keyword">global</span> ans<br>    <span class="hljs-keyword">if</span> x == endX <span class="hljs-keyword">and</span> y == endY :  <span class="hljs-comment">#找到终点，把距离给他</span><br><br>        ans  =  Vis[x][y];<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>;<br><br>    <span class="hljs-keyword">else</span>   :<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>():<br><br><br>    <span class="hljs-keyword">global</span> qend ,qfront<br><br>    q.append((startX,startY))<br><br>    qend+=<span class="hljs-number">1</span><br><br>    Vis[startX][startY]=<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">while</span> qend-qfront!=<span class="hljs-number">0</span>:<br><br>        tempPair = q[qfront]<br>        qfront+=<span class="hljs-number">1</span><br><br>        x = tempPair[<span class="hljs-number">0</span>]  <span class="hljs-comment"># 横坐标</span><br><br>        y = tempPair[<span class="hljs-number">1</span>]  <span class="hljs-comment"># 纵坐标</span><br>        <span class="hljs-keyword">if</span> check(x,y):<br>            <span class="hljs-keyword">return</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br><br>            nowx = x + dx[i]  <span class="hljs-comment"># 扩展后的横坐标</span><br><br>            nowy = y + dy[i]  <span class="hljs-comment"># 扩展后的纵坐标</span><br><br>            <span class="hljs-keyword">if</span> (pd(nowx, nowy)):<br><br>                q.append((nowx,nowy))<br>                qend+=<span class="hljs-number">1</span><br><br>                Vis[nowx][nowy] = Vis[x][ y] + <span class="hljs-number">1</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    G = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m+<span class="hljs-number">10</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">10</span>)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br><br>    Vis = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m+<span class="hljs-number">10</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">10</span>)]  <span class="hljs-comment"># Python 动态开数组会减少运行时间</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        input_ = <span class="hljs-built_in">input</span>().split()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            G[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>] = input_[j]<br><br>    startX ,startY , endX ,endY = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    BFS()<br><br>    <span class="hljs-built_in">print</span>(ans-<span class="hljs-number">1</span>)<br><br><br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.concurrent.LinkedBlockingQueue;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.abs;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">M</span> <span class="hljs-operator">=</span> <span class="hljs-number">1005</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">node</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> x;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> y;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">node</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>            <span class="hljs-built_in">this</span>.x = x;<br>            <span class="hljs-built_in">this</span>.y = y;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n, m, ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> vis[][] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>]; <span class="hljs-comment">//用于存储是否访问过，并且存储长度</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> G[][] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">150</span>][<span class="hljs-number">150</span>];  <span class="hljs-comment">//用于存储题目给出的地图</span><br>    <span class="hljs-keyword">static</span> node Start, End;<br><span class="hljs-comment">//---------图的路径搜索常用方向移动表示-------</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dx[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> dy[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>&#125;;<br>    <span class="hljs-keyword">static</span> Queue&lt;node&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;();<br>    <span class="hljs-comment">//广度优先搜索所用的队列</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br><br>        <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">// /x 轴坐标 左侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x &gt; n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//x 轴坐标 右侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y &lt; <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 上侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y &gt; m)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//y 轴坐标 下侧越界</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (vis[x][y] != <span class="hljs-number">0</span>)<br>            <span class="hljs-comment">//已经访问了</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (G[x][y] != <span class="hljs-number">1</span>)<br>            <span class="hljs-comment">//不能走</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">// 在范围内，且没长草</span><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">if</span> (x == End.x &amp;&amp; y == End.y)   <span class="hljs-comment">//找到终点，把距离给他</span><br>        &#123;<br>            ans = vis[x][y];<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">BFS</span><span class="hljs-params">()</span> &#123;<br>        q.add(Start);<br>        vis[Start.x][Start.y] = <span class="hljs-number">1</span>;<br>        node now, next;<br>        <span class="hljs-keyword">while</span> (q.size() != <span class="hljs-number">0</span>) &#123;<br>            now = q.peek();<br>            <span class="hljs-keyword">if</span> (check(now.x, now.y))<br>                <span class="hljs-keyword">return</span>;<br>            q.poll();<br>            <span class="hljs-comment">//这两步是取出队首的节点</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++)  <span class="hljs-comment">//四个方向</span><br>            &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">nextx</span> <span class="hljs-operator">=</span> now.x + dx[i];<br>                <span class="hljs-type">int</span> <span class="hljs-variable">nexty</span> <span class="hljs-operator">=</span> now.y + dy[i];<br>                <span class="hljs-keyword">if</span> (pd(nextx, nexty))  <span class="hljs-comment">//判断是否符合条件</span><br>                &#123;<br>                    next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">node</span>(nextx, nexty);<br>                    q.add(next);<br>                    vis[nextx][nexty] = vis[now.x][now.y] + <span class="hljs-number">1</span>; <span class="hljs-comment">//步数+1</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n = in.nextInt();<br>        m = in.nextInt();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                G[i][j] = in.nextInt();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">startX</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">startY</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">endX</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">endY</span> <span class="hljs-operator">=</span> in.nextInt();<br><br>        Start=<span class="hljs-keyword">new</span> <span class="hljs-title class_">node</span>(startX,startY);<br>        End=<span class="hljs-keyword">new</span> <span class="hljs-title class_">node</span>(endX,endY);<br>        BFS();<br><br>        System.out.println(ans-<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="迷宫"><a href="#迷宫" class="headerlink" title="迷宫"></a>迷宫</h3><p>下图给出了一个迷宫的平面图，其中标记为 $1$ 的为障碍，标记为 $0$ 的为可以通行的地方。</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">010000<br>000100<br>001001<br>110000<br></code></pre></td></tr></table></figure><p>迷宫的入口为左上角，出口为右下角，在迷宫中，只能从一个位置走到这个它的上、下、左、右四个方向之一。</p><p>对于上面的迷宫，从入口开始，可以按 <code>DRRURRDDDR</code> 的顺序通过迷宫， 一共 $10$ 步。其中 $D、U、L、R$ 分别表示向下、向上、向左、向右走。 对于下面这个更复杂的迷宫（$30$ 行 $50$ 列），请找出一种通过迷宫的方式，其使用的步数最少，在步数最少的前提下，请找出字典序最小的一个作为答案。</p><p>请注意在字典序中 $D&lt;L&lt;R&lt;U$。</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs txt">01010101001011001001010110010110100100001000101010<br>00001000100000101010010000100000001001100110100101<br>01111011010010001000001101001011100011000000010000<br>01000000001010100011010000101000001010101011001011<br>00011111000000101000010010100010100000101100000000<br>11001000110101000010101100011010011010101011110111<br>00011011010101001001001010000001000101001110000000<br>10100000101000100110101010111110011000010000111010<br>00111000001010100001100010000001000101001100001001<br>11000110100001110010001001010101010101010001101000<br>00010000100100000101001010101110100010101010000101<br>11100100101001001000010000010101010100100100010100<br>00000010000000101011001111010001100000101010100011<br>10101010011100001000011000010110011110110100001000<br>10101010100001101010100101000010100000111011101001<br>10000000101100010000101100101101001011100000000100<br>10101001000000010100100001000100000100011110101001<br>00101001010101101001010100011010101101110000110101<br>11001010000100001100000010100101000001000111000010<br>00001000110000110101101000000100101001001000011101<br>10100101000101000000001110110010110101101010100001<br>00101000010000110101010000100010001001000100010101<br>10100001000110010001000010101001010101011111010010<br>00000100101000000110010100101001000001000000000010<br>11010000001001110111001001000011101001011011101000<br>00000110100010001000100000001000011101000000110011<br>10101000101000100010001111100010101001010000001000<br>10000010100101001010110000000100101010001011101000<br>00111100001000010000000110111000000001000000001011<br>10000001100111010111010001000110111010101101111000<br></code></pre></td></tr></table></figure><p><strong>解题思路:</strong></p><p>本题是一道简单的搜索题，需要注意的是要按照题目给定的字典序进行搜索，最后输出路径。</p><p>我们使用 $BFS$ 搜索记录路径，用 $DFS$ 打印路径。</p><p>C++ 语言描述：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> maxn 2000</span><br><br><span class="hljs-built_in">string</span> maze[maxn]= &#123;<br>                  <span class="hljs-string">&quot;01010101001011001001010110010110100100001000101010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000100000101010010000100000001001100110100101&quot;</span>,<br>                  <span class="hljs-string">&quot;01111011010010001000001101001011100011000000010000&quot;</span>,<br>                  <span class="hljs-string">&quot;01000000001010100011010000101000001010101011001011&quot;</span>,<br>                  <span class="hljs-string">&quot;00011111000000101000010010100010100000101100000000&quot;</span>,<br>                  <span class="hljs-string">&quot;11001000110101000010101100011010011010101011110111&quot;</span>,<br>                  <span class="hljs-string">&quot;00011011010101001001001010000001000101001110000000&quot;</span>,<br>                  <span class="hljs-string">&quot;10100000101000100110101010111110011000010000111010&quot;</span>,<br>                  <span class="hljs-string">&quot;00111000001010100001100010000001000101001100001001&quot;</span>,<br>                  <span class="hljs-string">&quot;11000110100001110010001001010101010101010001101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00010000100100000101001010101110100010101010000101&quot;</span>,<br>                  <span class="hljs-string">&quot;11100100101001001000010000010101010100100100010100&quot;</span>,<br>                  <span class="hljs-string">&quot;00000010000000101011001111010001100000101010100011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010011100001000011000010110011110110100001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010100001101010100101000010100000111011101001&quot;</span>,<br>                  <span class="hljs-string">&quot;10000000101100010000101100101101001011100000000100&quot;</span>,<br>                  <span class="hljs-string">&quot;10101001000000010100100001000100000100011110101001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101001010101101001010100011010101101110000110101&quot;</span>,<br>                  <span class="hljs-string">&quot;11001010000100001100000010100101000001000111000010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000110000110101101000000100101001001000011101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100101000101000000001110110010110101101010100001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101000010000110101010000100010001001000100010101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100001000110010001000010101001010101011111010010&quot;</span>,<br>                  <span class="hljs-string">&quot;00000100101000000110010100101001000001000000000010&quot;</span>,<br>                  <span class="hljs-string">&quot;11010000001001110111001001000011101001011011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00000110100010001000100000001000011101000000110011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101000101000100010001111100010101001010000001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10000010100101001010110000000100101010001011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00111100001000010000000110111000000001000000001011&quot;</span>,<br>                  <span class="hljs-string">&quot;10000001100111010111010001000110111010101101111000&quot;</span>&#125;;<br><span class="hljs-type">bool</span> vis[maxn][maxn];<span class="hljs-comment">//标记</span><br><span class="hljs-type">int</span> dir[<span class="hljs-number">4</span>][<span class="hljs-number">2</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;&#125;;<span class="hljs-comment">//D L R U</span><br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">in</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> x&lt;<span class="hljs-number">30</span>&amp;&amp;x&gt;=<span class="hljs-number">0</span>&amp;&amp;y&gt;=<span class="hljs-number">0</span>&amp;&amp;y&lt;<span class="hljs-number">50</span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">int</span> x,y,d;<br>    <span class="hljs-type">char</span> pos;<span class="hljs-comment">//存储D L R U</span><br>&#125;;<br><br>node father[maxn][maxn];<span class="hljs-comment">//当前节点的父节点</span><br>node now,nex;<span class="hljs-comment">//指向当前和下一个位置</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><span class="hljs-comment">//递归打印</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(x==<span class="hljs-number">0</span>&amp;&amp;y==<span class="hljs-number">0</span>)<span class="hljs-comment">//找到起点开始正向打印路径</span><br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">else</span><br>        dfs(father[x][y].x,father[x][y].y);<br><br>    <span class="hljs-built_in">cout</span>&lt;&lt;father[x][y].pos;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">bfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><br>&#123;<br>    <span class="hljs-built_in">queue</span>&lt;node&gt; q;<br><br>    now.x=x;<br>    now.y=y;<br>    now.d=<span class="hljs-number">0</span>;<br>    q.push(now);<br><br>    vis[x][y]=<span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">while</span>(!q.empty())<br>    &#123;<br>        now=q.front();<br>        q.pop();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)<span class="hljs-comment">//走下左右上按字典序的四个方向</span><br>        &#123;<br>            <span class="hljs-type">int</span> tx=now.x+dir[i][<span class="hljs-number">0</span>];<br>            <span class="hljs-type">int</span> ty=now.y+dir[i][<span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">if</span>(in(tx,ty)&amp;&amp;!vis[tx][ty]&amp;&amp;maze[tx][ty]!=<span class="hljs-string">&#x27;1&#x27;</span>)<span class="hljs-comment">//判断是否超出范围，是否用过，是否为1</span><br>            &#123;<br>                vis[tx][ty]=<span class="hljs-literal">true</span>;<span class="hljs-comment">//标记为用过</span><br><br>                nex.x=tx;<br>                nex.y=ty;<br>                nex.d=now.d+<span class="hljs-number">1</span>;<br>                q.push(nex);<span class="hljs-comment">//压入队列</span><br><br>                father[tx][ty].x=now.x;<span class="hljs-comment">//存储父节点坐标</span><br>                father[tx][ty].y=now.y;<br>                <span class="hljs-keyword">if</span>(i==<span class="hljs-number">0</span>)<span class="hljs-comment">//存储路径</span><br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;D&#x27;</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i==<span class="hljs-number">1</span>)<br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;L&#x27;</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i==<span class="hljs-number">2</span>)<br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;R&#x27;</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i==<span class="hljs-number">3</span>)<br>                    father[tx][ty].pos=<span class="hljs-string">&#x27;U&#x27;</span>;<br><br><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><br>    bfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>    dfs(<span class="hljs-number">29</span>,<span class="hljs-number">49</span>);<span class="hljs-comment">//打印路径</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Java 语言描述:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String[] nn= &#123;<br>                  <span class="hljs-string">&quot;01010101001011001001010110010110100100001000101010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000100000101010010000100000001001100110100101&quot;</span>,<br>                  <span class="hljs-string">&quot;01111011010010001000001101001011100011000000010000&quot;</span>,<br>                  <span class="hljs-string">&quot;01000000001010100011010000101000001010101011001011&quot;</span>,<br>                  <span class="hljs-string">&quot;00011111000000101000010010100010100000101100000000&quot;</span>,<br>                  <span class="hljs-string">&quot;11001000110101000010101100011010011010101011110111&quot;</span>,<br>                  <span class="hljs-string">&quot;00011011010101001001001010000001000101001110000000&quot;</span>,<br>                  <span class="hljs-string">&quot;10100000101000100110101010111110011000010000111010&quot;</span>,<br>                  <span class="hljs-string">&quot;00111000001010100001100010000001000101001100001001&quot;</span>,<br>                  <span class="hljs-string">&quot;11000110100001110010001001010101010101010001101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00010000100100000101001010101110100010101010000101&quot;</span>,<br>                  <span class="hljs-string">&quot;11100100101001001000010000010101010100100100010100&quot;</span>,<br>                  <span class="hljs-string">&quot;00000010000000101011001111010001100000101010100011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010011100001000011000010110011110110100001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10101010100001101010100101000010100000111011101001&quot;</span>,<br>                  <span class="hljs-string">&quot;10000000101100010000101100101101001011100000000100&quot;</span>,<br>                  <span class="hljs-string">&quot;10101001000000010100100001000100000100011110101001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101001010101101001010100011010101101110000110101&quot;</span>,<br>                  <span class="hljs-string">&quot;11001010000100001100000010100101000001000111000010&quot;</span>,<br>                  <span class="hljs-string">&quot;00001000110000110101101000000100101001001000011101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100101000101000000001110110010110101101010100001&quot;</span>,<br>                  <span class="hljs-string">&quot;00101000010000110101010000100010001001000100010101&quot;</span>,<br>                  <span class="hljs-string">&quot;10100001000110010001000010101001010101011111010010&quot;</span>,<br>                  <span class="hljs-string">&quot;00000100101000000110010100101001000001000000000010&quot;</span>,<br>                  <span class="hljs-string">&quot;11010000001001110111001001000011101001011011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00000110100010001000100000001000011101000000110011&quot;</span>,<br>                  <span class="hljs-string">&quot;10101000101000100010001111100010101001010000001000&quot;</span>,<br>                  <span class="hljs-string">&quot;10000010100101001010110000000100101010001011101000&quot;</span>,<br>                  <span class="hljs-string">&quot;00111100001000010000000110111000000001000000001011&quot;</span>,<br>                  <span class="hljs-string">&quot;10000001100111010111010001000110111010101101111000&quot;</span>&#125;;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">char</span>[][] tu=<span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">30</span>][<span class="hljs-number">50</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] dis=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">30</span>][<span class="hljs-number">50</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[][] step= &#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;&#125;;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">char</span>[] direction= &#123;<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;L&#x27;</span>,<span class="hljs-string">&#x27;R&#x27;</span>,<span class="hljs-string">&#x27;U&#x27;</span>&#125;;<br><span class="hljs-comment">//    保存经过的每一个点位置信息，采用(x)*m+y的公式表示(x,y);x,y从0开始，位置也是从来开始。m:大于最长边的随便一个数</span><br><span class="hljs-comment">//    起点:0;终点:29*50-49</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Queue&lt;Integer&gt; location=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;Integer&gt;();<br><span class="hljs-comment">//    广度优先遍历求每一个位置到终点的距离，并存放在dis中</span><br><span class="hljs-comment">//    广度优先遍历寻找所有从终点到起点的路线</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bfs</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//x,y当前位置;</span><br>        <span class="hljs-type">int</span> x,y;<span class="hljs-comment">//当前位置坐标</span><br>        <span class="hljs-comment">//不为空，继续循环</span><br>        <span class="hljs-keyword">while</span>(!location.isEmpty()) &#123;<br>            <span class="hljs-type">int</span> l=location.poll();<span class="hljs-comment">//获取当前位置的坐标</span><br>            x=l/<span class="hljs-number">50</span>;<span class="hljs-comment">//获取当前位置x</span><br>            y=l%<span class="hljs-number">50</span>;<span class="hljs-comment">//获取当前位置y</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++) &#123;<span class="hljs-comment">//探索四个方向</span><br>                <span class="hljs-type">int</span> xx=x+step[i][<span class="hljs-number">0</span>];<br>                <span class="hljs-type">int</span> yy=y+step[i][<span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span>(xx&gt;=<span class="hljs-number">0</span>&amp;&amp;xx&lt;<span class="hljs-number">30</span>&amp;&amp;yy&gt;=<span class="hljs-number">0</span>&amp;&amp;yy&lt;<span class="hljs-number">50</span>&amp;&amp;tu[xx][yy]==<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;dis[xx][yy]==<span class="hljs-number">0</span>) &#123;<br>                    dis[xx][yy]=dis[x][y]+<span class="hljs-number">1</span>;<span class="hljs-comment">//当前位置的距离+1等于本次探索位置的距离</span><br>                    location.add(xx*<span class="hljs-number">50</span>+yy);<br>                    <span class="hljs-keyword">if</span>(xx==<span class="hljs-number">0</span>&amp;&amp;yy==<span class="hljs-number">0</span>) &#123;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br><br>        &#125;<br>    &#125;<br><span class="hljs-comment">//    深度优先遍历，从起点到终点</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">dfs</span><span class="hljs-params">()</span> &#123;<br>        dis[<span class="hljs-number">29</span>][<span class="hljs-number">49</span>]=<span class="hljs-number">0</span>;<br><span class="hljs-comment">//        起点</span><br>        <span class="hljs-type">int</span> x=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> y=<span class="hljs-number">0</span>;<br>        String route=<span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span>(x!=<span class="hljs-number">29</span>||y!=<span class="hljs-number">49</span>) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++) &#123;<br>                <span class="hljs-type">int</span> xx=x+step[i][<span class="hljs-number">0</span>];<br>                <span class="hljs-type">int</span> yy=y+step[i][<span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span>(xx&gt;=<span class="hljs-number">0</span>&amp;&amp;xx&lt;<span class="hljs-number">30</span>&amp;&amp;yy&gt;=<span class="hljs-number">0</span>&amp;&amp;yy&lt;<span class="hljs-number">50</span>&amp;&amp;tu[xx][yy]==<span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>                    <span class="hljs-keyword">if</span>(dis[x][y]==dis[xx][yy]+<span class="hljs-number">1</span>) &#123;<br>                        x=xx;<br>                        y=yy;<br>                        route+=direction[i];<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> route;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">long</span> num=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">30</span>;i++) &#123;<br>            tu[i]=nn[i].toCharArray();<br>        &#125;<br>        location.add(<span class="hljs-number">29</span>*<span class="hljs-number">50</span>+<span class="hljs-number">49</span>);<br>        bfs();<br>        String route=dfs();<br>        System.out.println(route);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Python 语言描述:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>n,m=<span class="hljs-number">30</span>,<span class="hljs-number">50</span><br>M=[[<span class="hljs-built_in">int</span>(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>()]<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>vis=[[<span class="hljs-number">0</span>]*m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>go=[[<span class="hljs-string">&#x27;&#x27;</span>]*m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>q=deque([(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)])<br>vis[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> q:<br>    x,y=q.popleft()<br>    <span class="hljs-keyword">if</span> x==n-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y==m-<span class="hljs-number">1</span>:<br>        <span class="hljs-built_in">print</span>(go[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">for</span> i,j,k <span class="hljs-keyword">in</span> [[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&#x27;D&#x27;</span>],[<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;L&#x27;</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;R&#x27;</span>],[-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&#x27;U&#x27;</span>]]:<br>        a,b=x+i,y+j<br>        <span class="hljs-keyword">if</span> <span class="hljs-number">0</span>&lt;=a&lt;n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span>&lt;=b&lt;m <span class="hljs-keyword">and</span> M[a][b]==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> vis[a][b]==<span class="hljs-number">0</span>:<br>            vis[a][b]=<span class="hljs-number">1</span><br>            q.append((a,b))<br>            go[a][b]=go[x][y]+k<br></code></pre></td></tr></table></figure><h2 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h2><p>BFS 是广度优先搜索，是将某节点所有的“枝蔓”加入搜索队列，然后去除队列的首部的节点，重复进行该动作，这样就能由开始状态“一圈一圈的查找”。 BFS 拥有一个性质，那么就是先找到的节点，所经过的步骤一定最短。它一般用于寻找在近的状态，也是一个非常基础的算法，希望大家认真学习。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>搜索算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>递推法与递归法</title>
    <link href="/2024/03/10/%E9%80%92%E6%8E%A8%E6%B3%95%E4%B8%8E%E9%80%92%E5%BD%92%E6%B3%95/"/>
    <url>/2024/03/10/%E9%80%92%E6%8E%A8%E6%B3%95%E4%B8%8E%E9%80%92%E5%BD%92%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>[TOC]8a143f69d05e2054793e049e53e43fd4</p><h2 id="递推法与递归法"><a href="#递推法与递归法" class="headerlink" title="递推法与递归法"></a>递推法与递归法</h2><p><strong>递推法：</strong></p><p>递推法是一种在数学和其他领域广泛应用的重要方法，它在计算机科学中被用作一种关键的数值求解算法。</p><p><strong>知识点：</strong></p><ul><li>递推算法</li><li>递归算法</li></ul><h2 id="递推算法的特点"><a href="#递推算法的特点" class="headerlink" title="递推算法的特点"></a>递推算法的特点</h2><p>递推法的核心在于找到递推关系式。这种方法可以将复杂的计算过程转化为简单的重复步骤，充分利用计算机在运行程序时的时间局部性和空间局部性。</p><p><strong>递推算法的思想：</strong></p><ol><li>首先找到各个相邻数据项之间的递推关系；</li><li>递推关系避开了求通项公式的麻烦，尤其是对于那些难以或无法求解通项公式的题目；</li><li>将复杂问题分解为若干步骤的简单运算；</li><li>一般来说，递推算法可以视为一种特殊的迭代算法。</li></ol><p><strong>递推算法解题的基本思路：</strong></p><ol><li>将复杂计算转换为简单重复运算；</li><li>通过找到递推关系式进行简化运算；</li><li>利用计算机的特性，减少运行时间。</li></ol><p><strong>递推算法的一般步骤：</strong></p><ol><li>根据题目确定数据项，并找到符合要求的递推关系式；</li><li>根据递推关系式设计递推程序；</li><li>根据题目找到递推的终点；</li><li>单次查询可以不进行存储，多次查询都要进行存储；</li><li>按要求输出答案即可。</li></ol><p><strong>递归算法：</strong></p><p>递归算法是一种自顶向下的算法，它通过不断地直接或间接调用自身的函数，通过每次改变变量完成多个过程的重复计算，直到到达边界之后，结束调用。</p><p>与递推法相似的是，递归与递推都是将一个复杂过程分解为几个简单重复步骤进行计算。</p><p>递归算法的实现的核心是分治策略，即分而治之，将复杂过程分解为规模较小的同类问题，通过解决若干个小问题，进而解决整个复杂问题。</p><p><strong>递归算法的思想：</strong></p><ol><li>将复杂计算过程转换为简单重复子过程；</li><li>找到递归公式，即能够将大问题转化为小问题的公式；</li><li>自上而下计算，在返回完成递归过程。</li></ol><p><strong>递归算法设计的一般步骤：</strong></p><ol><li>根据题目设计递归函数中的运算部分；</li><li>根据题目找到递归公式，题目可能会隐含给出，也可能需要自己进行推导；</li><li>找到递归出口，即递归的终止条件。</li></ol><p>递归法和递推法的思路已经给大家讲解得差不多了，接下来我们将结合真实的大赛题目进行讲解。这将有助于我们更好地理解和应用这两种方法。</p><h3 id="斐波纳契数列-fibonacci-问题"><a href="#斐波纳契数列-fibonacci-问题" class="headerlink" title="斐波纳契数列 fibonacci 问题"></a>斐波纳契数列 fibonacci 问题</h3><p>在一定情况下，同一个问题可以使用用递归也可以使用递推解答。一般一个问题的递推关系和递归关系都好求的话就都可以解题。</p><p>当然如果题目只有一个关系好求，那就最好采用关系好求的办法。</p><p><strong>题目描述:</strong></p><p>斐波那契数列（Fibonacci sequence），又称黄金分割数列，因数学家莱昂纳多·斐波那契（Leonardoda Fibonacci）以兔子繁殖为例子而引入，故又称为“兔子数列”。</p><p>指的是这样一个数列：$0、1、1、2、3、5、8、13、21、34、…$</p><p>在数学上，斐波那契数列以如下被以递推的方法定义：$F(0)&#x3D;0$，$F(1)&#x3D;1$，$F(n)&#x3D;F(n - 1)+F(n - 2)$（$n ≥ 2，n ∈ N^*$）</p><p>请求出该数列中第 $n$ 个数字（$n$ 从$1$开始计数）是多少。</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入样例<br><br>样例1输入<br>6<br><br>样例2输入<br>4<br><br>输出样例<br><br>样例1输出<br>8<br><br>样例2输出<br>3<br></code></pre></td></tr></table></figure><p>对于上面的样例我们进行了如下计算；</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs txt">[0]=0<br><br>[1]=1<br><br>[2]=0+1<br><br>[3]=1+1=2<br><br>[4]=1+2=3<br><br>[5]=2+3=5<br><br>[6]=5+3=8 <br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s<br>2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><ul><li>这个题给出递推式 $F(n) &#x3D; F(n-1) + F(n-2)$</li><li>转化为可用的递推关系，即$F(n) + F(n+1) &#x3D; F(n+2)$</li></ul><p>这一通过从 $n&#x3D;1$ 开始循环即可完成递推，当然也可以使用递归法。</p><p>首先我们写找出递归式，$F(n)&#x3D; F(n-1) + F(n-2)$。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">F(n)= F(n<span class="hljs-number">-1</span>) + F(n<span class="hljs-number">-2</span>)<br>    = F(n<span class="hljs-number">-2</span>)+F(n<span class="hljs-number">-3</span>)+F(n<span class="hljs-number">-3</span>)+F(n<span class="hljs-number">-4</span>)<br><span class="hljs-comment">//重复调用</span><br></code></pre></td></tr></table></figure><p>这样我们找到了递归式，然后我们应该找到递归出口。</p><p>我们可以知道 $F(n)&#x3D;0 n&#x3D;0 ,F(n)&#x3D;1 n&#x3D;1$ 这就是递归出口，能让递归停止的条件。</p><p>递归算法的通用框架如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">do</span>(a,b,c...)<br>&#123;<br>    <span class="hljs-comment">//递归终止条件，即出口</span><br>    <span class="hljs-keyword">if</span>(a==? ,b==? ,....) <span class="hljs-keyword">return</span><br><br>    <span class="hljs-comment">//递归条件</span><br>    <span class="hljs-keyword">if</span>(条件<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">do</span>(参数<span class="hljs-number">1</span>)<br><br>    <span class="hljs-built_in">else</span>(条件<span class="hljs-number">2</span>)<br>        <span class="hljs-built_in">do</span>(参数<span class="hljs-number">2</span>)<br><br>&#125;<br><br>如本题，各子式间存在计算关系，可以化为：<br><br><span class="hljs-built_in">do</span>(a)<br>&#123;<br>    <span class="hljs-keyword">if</span>(a==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span>(a==<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">do</span>(a<span class="hljs-number">-1</span>)+<span class="hljs-built_in">do</span>(a<span class="hljs-number">-2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>这道题不是多次询问问题，不需要存储直接计算的复杂度是最低的。</p><h4 id="答案解析"><a href="#答案解析" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><ul><li>递推算法代码</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br>    <span class="hljs-type">int</span> x=<span class="hljs-number">0</span>; <span class="hljs-comment">//F(n)</span><br>    <span class="hljs-type">int</span> y=<span class="hljs-number">1</span>; <span class="hljs-comment">//F(n+1)</span><br>    <span class="hljs-type">int</span> ans; <span class="hljs-comment">//F(n+2）</span><br><br>    cin&gt;&gt;n;<br><br>    <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>) ans=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n==<span class="hljs-number">1</span>) ans=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>        &#123;<br>            ans=x+y;<br>            x=y;<br>            y=ans;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;ans&lt;&lt;endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>递归算法代码</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//递归出口1</span><br>    <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">//递归出口2</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n==<span class="hljs-number">1</span> )<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">fn</span>(n<span class="hljs-number">-1</span>)+<span class="hljs-built_in">fn</span>(n<span class="hljs-number">-2</span>); <span class="hljs-comment">//递归关系式</span><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br>    <span class="hljs-type">int</span> ans;<br>    cin&gt;&gt;n;<br>    ans=<span class="hljs-built_in">fn</span>(n);<br>    cout&lt;&lt;ans&lt;&lt;endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><ul><li>递推算法代码：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n =<span class="hljs-built_in">int</span>( <span class="hljs-built_in">input</span>())<br><br>    x=<span class="hljs-number">0</span> <span class="hljs-comment"># F(n)</span><br>    y=<span class="hljs-number">1</span> <span class="hljs-comment">#F(n+1)</span><br>    ans=<span class="hljs-number">0</span> <span class="hljs-comment">#F(n+2）</span><br><br>    <span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span> :<br>        ans=<span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">elif</span> n==<span class="hljs-number">1</span>:<br>        ans=<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (n-<span class="hljs-number">1</span>):<br><br>            ans=x+y<br>            x=y<br>            y=ans<br><br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><ul><li>递归算法代码：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-comment"># 递归出口1</span><br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>    <span class="hljs-comment"># 递归出口2</span><br>    <span class="hljs-keyword">elif</span> n == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> f(n - <span class="hljs-number">1</span>) + f(n - <span class="hljs-number">2</span>)  <span class="hljs-comment"># 递归关系式</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    ans = f(n)<br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><p>递推算法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br>        <span class="hljs-type">int</span> x=<span class="hljs-number">0</span>; <span class="hljs-comment">//F(n)</span><br>        <span class="hljs-type">int</span> y=<span class="hljs-number">1</span>; <span class="hljs-comment">//F(n+1)</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//F(n+2）</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n = in.nextInt();<br><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>) ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n==<span class="hljs-number">1</span>) ans=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>            &#123;<br>                ans=x+y;<br>                x=y;<br>                y=ans;<br>            &#125;<br>        &#125;<br><br>        System.out.println(ans);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>递归算法代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span>  <span class="hljs-type">int</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>            <span class="hljs-comment">//递归出口2</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n==<span class="hljs-number">1</span> )<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">return</span> fn(n-<span class="hljs-number">1</span>)+fn(n-<span class="hljs-number">2</span>); <span class="hljs-comment">//递归关系式</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><br>        n = in.nextInt();<br><br>        ans=fn(n);<br><br>        System.out.println(ans);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="存储型的递推与递归"><a href="#存储型的递推与递归" class="headerlink" title="存储型的递推与递归"></a>存储型的递推与递归</h3><p>我们在开始就讲过题目十分存储和非存储的，上面那个题目就是此询问，如果改为多次询问我们该怎么办，我们会采用存储的方式，存储的方式适用于大部分的的多次查询问题。</p><p>我们看一下修改后的题目。</p><p><strong>题目描述：</strong></p><p>斐波那契数列（Fibonacci sequence），又称黄金分割数列，因数学家莱昂纳多·斐波那契（Leonardoda Fibonacci）以兔子繁殖为例子而引入，故又称为“兔子数列”。</p><p>指的是这样一个数列：$0、1、1、2、3、5、8、13、21、34、…$</p><p>在数学上，斐波那契数列以如下被以递推的方法定义：$F(0)&#x3D;0$，$F(1)&#x3D;1$，$F(n)&#x3D;F(n - 1)+F(n - 2)$（$n ≥ 2，n ∈ N^*$）</p><p>我们将进行M次查询，每次输入一个$N$，其中$n$小于$30$。</p><p>请求出该数列中第$n$个数字（$n$从$1$开始计数）是多少?</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入样例<br><br>样例1输入：<br><br>6<br>4<br>2<br>7<br>8<br>8<br>10<br><br>样例2输入：<br><br>8<br>13<br>23<br>14<br>17<br>24<br>16<br>10<br>11<br><br>输出样例<br><br>样例1输出：<br><br>3<br>1<br>13<br>21<br>21<br>55<br><br>样例2输出：<br><br>233<br>28657<br>377<br>1597<br>46368<br>987<br>55<br>89<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s 2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目解析：</strong></p><p>这道题跟上面一道题的算法原理相同，只是增加了多次查询的复杂度，所以仅需修改这一点即可。</p><p>再有的是有的同学担心自己的输入输出是在一个屏幕上的，评测的时候会不会出现问题。</p><p><img src="/./../images/%E9%80%92%E6%8E%A8%E6%B3%95%E4%B8%8E%E9%80%92%E5%BD%92%E6%B3%95/40a8cde4be1c5946317ab844a61f697f-0.png" alt="图片描述"></p><p>类似这样的情况，这一点是不用担心的，只要不是交互题，评测机的输入与输出是分开的，只有你的输出会用来跟答案比较，所以我们只用关心我们的输出即可。</p><p>比如有一道题让你计算 $x+y$ 的值，如果你知道每答案，就可以直接输出，都不用进行读入。</p><p>然后我们来看一下需要多次询问的题目该怎么解决。</p><h4 id="答案解析-1"><a href="#答案解析-1" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><ul><li>递推算法代码</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> F[<span class="hljs-number">35</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    F[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br><br>    F[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=<span class="hljs-number">30</span>;i++)<br>    &#123;<br>        F[i]=F[i<span class="hljs-number">-1</span>]+F[i<span class="hljs-number">-2</span>];<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-type">int</span> m; <span class="hljs-comment">//m次查询</span><br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br>    <span class="hljs-built_in">init</span>();<br><br>    cin&gt;&gt;m;<br><br>    <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)&#123;<br>        m-=<span class="hljs-number">1</span>;<br>        cin&gt;&gt;n;<br>        cout&lt;&lt;F[n]&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>存储答案的递推法，才是最常使用的递推法。</p><ul><li>递归算法代码</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> F[<span class="hljs-number">35</span>];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//递归出口1</span><br>    <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)<br>    &#123;<br>        F[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//递归出口2</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n==<span class="hljs-number">1</span> )<br>    &#123;<br>        F[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        F[n]=<span class="hljs-built_in">fn</span>(n<span class="hljs-number">-1</span>)+<span class="hljs-built_in">fn</span>(n<span class="hljs-number">-2</span>);<br>        <span class="hljs-keyword">return</span> F[n]; <span class="hljs-comment">//递归关系式</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> m; <span class="hljs-comment">//m次查询</span><br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br><br>    <span class="hljs-built_in">fn</span>(<span class="hljs-number">30</span>);<br>    cin&gt;&gt;m;<br><br>    <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)&#123;<br>        m-=<span class="hljs-number">1</span>;<br>        cin&gt;&gt;n;<br>        cout&lt;&lt;F[n]&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><p>递推算法代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">F = [<span class="hljs-number">0</span>]*<span class="hljs-number">35</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br><br>    F[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>    F[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">30</span>):<br>        F[i] = F[i-<span class="hljs-number">1</span>]+F[i-<span class="hljs-number">2</span>]<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    init()<br>    <span class="hljs-keyword">while</span> m &gt; <span class="hljs-number">0</span>:<br>        m -= <span class="hljs-number">1</span><br>        n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>        <span class="hljs-built_in">print</span>(F[n])<br>    <span class="hljs-comment"># print(F)</span><br></code></pre></td></tr></table></figure><p>递归算法代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>F = [<span class="hljs-number">0</span>] * <span class="hljs-number">35</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-comment"># 递归出口1</span><br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:<br>        F[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-comment"># 递归出口2</span><br>    <span class="hljs-keyword">elif</span> n == <span class="hljs-number">1</span>:<br>        F[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        F[n] = f(n - <span class="hljs-number">1</span>) + f(n - <span class="hljs-number">2</span>) <span class="hljs-comment"># 递归关系式</span><br>        <span class="hljs-keyword">return</span> F[n]<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    f(<span class="hljs-number">30</span>)<br>    <span class="hljs-keyword">while</span> m &gt; <span class="hljs-number">0</span>:<br>        m -= <span class="hljs-number">1</span><br>        n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>        <span class="hljs-built_in">print</span>(F[n])<br>    <span class="hljs-comment"># print(F)</span><br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><p>递推算法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []F=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">35</span>];<br><br>    <span class="hljs-keyword">static</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span><br>    &#123;<br>        F[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>        F[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=<span class="hljs-number">30</span>;i++)<br>        &#123;<br>            F[i]=F[i-<span class="hljs-number">1</span>]+F[i-<span class="hljs-number">2</span>];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">int</span> m; <span class="hljs-comment">//m次查询</span><br>        <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br>        init();<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        m = in.nextInt();<br>        <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)&#123;<br><br>            m-=<span class="hljs-number">1</span>;<br><br>            n= in.nextInt();<br><br>            System.out.println(F[n]);<br>        &#125;<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>递归算法代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []F=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">35</span>];<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>    &#123;<br>        <span class="hljs-comment">//递归出口1</span><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)<br>        &#123;<br><br>            F[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//递归出口2</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n==<span class="hljs-number">1</span> )<br>        &#123;<br>            F[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            F[n]=fn(n-<span class="hljs-number">1</span>)+fn(n-<span class="hljs-number">2</span>);<br>            <span class="hljs-keyword">return</span> F[n]; <span class="hljs-comment">//递归关系式</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">int</span> m; <span class="hljs-comment">//m次查询</span><br>        <span class="hljs-type">int</span> n; <span class="hljs-comment">//第几个数</span><br>        fn(<span class="hljs-number">30</span>);<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        m = in.nextInt();<br>        <span class="hljs-keyword">while</span>(m&gt;<span class="hljs-number">0</span>)&#123;<br>            m-=<span class="hljs-number">1</span>;<br>            n= in.nextInt();<br>            System.out.println(F[n]);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="数字三角形问题"><a href="#数字三角形问题" class="headerlink" title="数字三角形问题"></a>数字三角形问题</h3><p><strong>题目描述:</strong></p><p>xxxxxxxxxx27 1import java.io.FileNotFoundException;2import java.util.Arrays;3import java.util.Scanner;4public class Main {5public static void main(String args[]) {6        int n;7        long S;8        double ans&#x3D;0,avg;9        Scanner input&#x3D;new Scanner(System.in);10        n&#x3D;input.nextInt();11        S&#x3D;input.nextLong();12        long a[]&#x3D;new long[n];13        for(int i&#x3D;0;i&lt;n;i++)        14            a[i]&#x3D;input.nextLong();15        Arrays.sort(a);16        avg&#x3D;(double)S&#x2F;n;17        for(int i&#x3D;0;i&lt;n;i++) {18            if(S&lt;&#x3D;(n-i)*a[i]) {19                ans +&#x3D; (n-i)*Math.pow((double)S&#x2F;(n-i)-avg,2);20                break;21            }22            ans +&#x3D; Math.pow(a[i]-avg,2);23            S -&#x3D; a[i];24        }25        System.out.printf(“%.4f\n”,Math.sqrt(ans&#x2F;n));26    }27}java</p><p>如图数字三角形。如下所示为一个数字三角形。请编一个程序计算从顶到底的某处的一条路径，使该路径所经过的数字总和最大。只要求输出总和。 　</p><ol><li>一步可沿左斜线向下或右斜线向下走；</li><li>三角形行数小于等于 $100$；</li><li>三角形中的数字为 $0，1，…，99$；</li></ol><p>测试数据通过键盘逐行输入。</p><p>如上例数据应以样例所示格式输入：</p><p><strong>样例:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">输入：<br><br>5<br>7<br>3 8<br>8 1 0<br>2 7 4 4<br>4 5 2 6 5<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">输出：<br><br>30<br></code></pre></td></tr></table></figure><p><strong>运行限制:</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">1. 最大运行时间：1s<br>2. 最大运行内存：128M<br></code></pre></td></tr></table></figure><p><strong>题目分析:</strong></p><p>解决该题目的方式有很多，包括动态规划， 枚举都可以解决这个问题。</p><p>我们从递推的思想出发，假设我们从顶层沿着某条路径已经走到了第 $i$ 层，正向着 $i+1$ 层前进， 两条可行路径中我们肯定会选择最大的方向前进，为此我们可以采用递推中的反向递推，即逆推的方式解决，设 $a[i][j]$ 存放从 $i,j$ 出发到达第 $n$ 层的最大值。</p><p>我们可以写出递推式：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">a[i][j] = max&#123;a[i][j]+a[i+1][j]，a[i][j]+a[i+1][j+1]&#125;<br></code></pre></td></tr></table></figure><p>则 逆推到出发点 $a[1][1]$ 为题目所求答案，即第一层到第 $N$ 层的最大值。</p><h4 id="答案解析-2"><a href="#答案解析-2" class="headerlink" title="答案解析"></a>答案解析</h4><p>C++ 代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">//n层</span><br>    <span class="hljs-type">int</span> a[<span class="hljs-number">101</span>][<span class="hljs-number">101</span>]; <span class="hljs-comment">//路径矩阵</span><br>    cin&gt;&gt;n;<br><br>    <span class="hljs-comment">//输入数字三角形的值</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>        &#123;<br><br>        cin&gt;&gt;a[i][j]; <span class="hljs-comment">//输入原始数据</span><br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//递推开始</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>; i&gt;=<span class="hljs-number">1</span>; i--)<span class="hljs-comment">//从最后一层逆推</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>        &#123;<br><br>            <span class="hljs-keyword">if</span> (a[i+<span class="hljs-number">1</span>][j]&gt;=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>])<br>                a[i][j]+=a[i+<span class="hljs-number">1</span>][j];     <span class="hljs-comment">//路径选择</span><br><br>            <span class="hljs-keyword">else</span><br>                a[i][j]+=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br><br>    cout&lt;&lt;a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python 解题代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [[<span class="hljs-number">0</span>] * <span class="hljs-number">101</span>] * <span class="hljs-number">101</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>  n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>  <span class="hljs-comment"># 输入数字三角形的值</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>      a[i] = <span class="hljs-built_in">input</span>().split()<br>      a[i] = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, a[i]))  <span class="hljs-comment"># split 分割后都是 字符 这里是转化成数字</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># for i in range(1, n + 1):</span><br>  <span class="hljs-comment">#     print(a[i])</span><br><br> <span class="hljs-comment"># a = list(map(int, a)) # split 分割后都是 字符 这里是转化成数字</span><br><br>  <span class="hljs-comment"># 递推开始</span><br><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>      <span class="hljs-comment"># 最后一层逆推</span><br>      <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, i):<br><br>          <span class="hljs-comment"># 路径选择</span><br>          <span class="hljs-keyword">if</span> a[i + <span class="hljs-number">1</span>][j] &gt;= a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]:<br>              a[i][j] += a[i + <span class="hljs-number">1</span>][j]<br><br>          <span class="hljs-keyword">else</span>:<br>              a[i][j] += a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>]<br><br>  <span class="hljs-comment"># for i in range(1, n + 1):</span><br>  <span class="hljs-comment">#     print(a[i])</span><br><br>  <span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p><strong>Java 解题代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> [][]a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">101</span>][<span class="hljs-number">101</span>];<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>      <span class="hljs-type">int</span> n;<br>      <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>      n = in.nextInt();<br><br>      <span class="hljs-comment">//输入数字三角形的值</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>      &#123;<br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>          &#123;<br>              a[i][j]=in.nextInt(); <span class="hljs-comment">//输入原始数据</span><br>          &#125;<br>      &#125;<br><br>      <span class="hljs-comment">//递推开始</span><br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=n-<span class="hljs-number">1</span>; i&gt;=<span class="hljs-number">1</span>; i--)<span class="hljs-comment">//从最后一层逆推</span><br>      &#123;<br><br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=i; j++)<br>          &#123;<br>              <span class="hljs-keyword">if</span> (a[i+<span class="hljs-number">1</span>][j]&gt;=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>])<br>                  a[i][j]+=a[i+<span class="hljs-number">1</span>][j];     <span class="hljs-comment">//路径选择</span><br><br>              <span class="hljs-keyword">else</span>  a[i][j]+=a[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>];<br>          &#125;<br>      &#125;<br>      System.out.println(a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>我们这节课讲了递推与递归的知识点，并且也讲了何时采用递归设计程序，何时采用递推设计程序。对于多次询问的题目，也为大家展示了一种解决方法。</p><p>对于递推算法，我们覆盖了正推和逆推两种方式。无论是递推和递归的关键在于找到关系式。</p><p>希望同学能够独立完成题目进行练习。并且在后面的学习中会多次用到递归与递推设计其他算法。</p>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>递推法和递归法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>手算与思维题</title>
    <link href="/2024/03/10/%E6%89%8B%E7%AE%97%E4%B8%8E%E6%80%9D%E7%BB%B4%E9%A2%98/"/>
    <url>/2024/03/10/%E6%89%8B%E7%AE%97%E4%B8%8E%E6%80%9D%E7%BB%B4%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="手算与思维题"><a href="#手算与思维题" class="headerlink" title="手算与思维题"></a>手算与思维题</h2><p>课程伊始，我们先要讲一下蓝桥杯相关的注意事项。</p><h2 id="比赛流程"><a href="#比赛流程" class="headerlink" title="比赛流程"></a>比赛流程</h2><h3 id="赛程："><a href="#赛程：" class="headerlink" title="赛程："></a>赛程：</h3><ul><li>省赛</li><li>决赛</li></ul><p>省赛一等奖参加决赛</p><p>比赛时长 $4$ 小时</p><h3 id="竞赛形式："><a href="#竞赛形式：" class="headerlink" title="竞赛形式："></a>竞赛形式：</h3><ul><li>个人赛，一人一机，全程机考</li><li>答题过程中无法访问互联网</li><li>不允许携带任何电子、纸质资料</li></ul><h3 id="参赛选手机器环境"><a href="#参赛选手机器环境" class="headerlink" title="参赛选手机器环境"></a>参赛选手机器环境</h3><ul><li>X86 兼容机器，内存不小于 1G，硬盘不小于 60G 操作系统：Windows7、Windows8 或 Windows10。</li><li>C&#x2F;C++ 开发环境：Dev-cpp 5.4.0 C&#x2F;C++ API 帮助文档</li><li>Java 开发环境：JDK 1.8 Eclipse-java-2020-06 API 帮助文档</li><li>Python 环境：Python 3.8.6 IDLE（Python 自带编辑器）</li></ul><h3 id="题型"><a href="#题型" class="headerlink" title="题型"></a>题型</h3><ul><li><p>结果填空 把答案直接通过网页提交，不要书写多余的内容。填空题每题 $5$ 分。</p></li><li><p>程序设计 每道题目多个测试数据，$20% \sim 40%$ 是弱测试数据，其他是强测试数据。 题量大、时间紧张，难题往往不会做或来不及用高效算法编码，此时可以用暴力方法编程得 $20% \sim 40%$ 的分数。 程序设计题每题 $10% ~25%$ 分。</p></li></ul><h3 id="评分方式"><a href="#评分方式" class="headerlink" title="评分方式"></a>评分方式</h3><p>评分：全部使用机器自动评分</p><p><strong>对于结果填空题，题目保证只有唯一解，选手的结果只有和解完全相同才得分，出现格式错误或有多余内容时不得分。</strong></p><p>对于编程大题，评测系统将使用多个评测数据来测试程序。每个评测数据有对应的分数。选手所提交的程序将分别用每个评测数据作为输入来运行。对于某个评测数据，如果选手程序的输出与正确答案是匹配的，则选手获得该评测数据的分数。</p><h2 id="知识点梳理"><a href="#知识点梳理" class="headerlink" title="知识点梳理"></a>知识点梳理</h2><p>（1）思维题（杂题）：不需要算法和数据结构，只需要逻辑、推理的题目，难度可难可易。考察思维能力和编码能力，只能通过大量做题来提高。</p><p>（2）BFS 搜索和 DFS 搜索：也就是暴力搜索。这是非常基本的算法，是基础中的基础。</p><p>（3）动态规划：线性 DP，以及一些 DP 应用，例如状态压缩 DP、树形 DP 等。</p><p>（4）简单数学和简单数论。</p><p>（5）简单的字符串处理、输入输出，简单图论。</p><p>（6）基本算法：例如排序、排列、二分、倍增、差分、贪心。</p><p>（7）基本数据结构：队列、栈、链表、二叉树等。</p><h2 id="技巧：手算"><a href="#技巧：手算" class="headerlink" title="技巧：手算"></a>技巧：手算</h2><ul><li>应用场合：填空题</li><li>手算的目的：减少做题时间，省下时间做编程题。</li></ul><p>手段：</p><ul><li>不编码，或者只做部分编码</li><li>用推理获得答案</li><li>用软件工具帮助计算</li></ul><p>方法：</p><ul><li>巧用编辑器</li><li>心算手数</li><li>巧用 Excel</li><li>巧用 Python</li></ul><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><h4 id="1-门牌制作-2020-年第十一届蓝桥杯省赛，填空题"><a href="#1-门牌制作-2020-年第十一届蓝桥杯省赛，填空题" class="headerlink" title="1. 门牌制作 2020 年第十一届蓝桥杯省赛，填空题"></a><a href="https://www.lanqiao.cn/problems/592/learning/">1. 门牌制作 2020 年第十一届蓝桥杯省赛，填空题</a></h4><p><strong>问题描述：</strong> 从 $1$ 到 $2020$ 的所有数字中，共有多少个 $2$？</p><ul><li>先编码连续打印出 $1$ $\sim$ $2020$ 这 $2020$ 个数字</li><li>然后粘贴到任何一个编辑器中</li><li>选查询或替换功能，查找或替换字符 “$2$”，共 $624$ 次，就是答案。</li></ul><p><strong>简单直接，不用思考</strong></p><h4 id="2-迷宫-2017-年第八届蓝桥杯省赛，填空题"><a href="#2-迷宫-2017-年第八届蓝桥杯省赛，填空题" class="headerlink" title="2. 迷宫 2017 年第八届蓝桥杯省赛，填空题"></a><a href="https://www.lanqiao.cn/problems/641/learning/">2. 迷宫 2017 年第八届蓝桥杯省赛，填空题</a></h4><p><strong>问题描述：</strong> 给出一个迷宫，问迷宫内的人有多少能走出来。迷宫如右图所示：每个位置上有一个人，共 $100$ 人。每个位置有指示牌，$L$ 表示向左走，$R$ 表示向右走，$U$ 表示向上走，$D$ 表示向下走。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c">UDDLUULRUL<br>   UURLLLRRRU <br>   RRUURLDLRD <br>   RUDDDDUUUU <br>   URUDLLRRUU <br>   DURLRLDLRL <br>   ULLURLLRDU <br>   RDLULLRDDD <br>   UUDDUDUDLL <br>   ULRDLUURRR<br></code></pre></td></tr></table></figure><ul><li>正解：DFS 搜索，编码 10 分钟。</li><li>技巧：直接用手画图标记 3-5 分钟。</li></ul><h4 id="3-星期一-2017-年第八届蓝桥杯省赛，填空题"><a href="#3-星期一-2017-年第八届蓝桥杯省赛，填空题" class="headerlink" title="3. 星期一 2017 年第八届蓝桥杯省赛，填空题"></a><a href="https://www.lanqiao.cn/problems/611/learning/">3. 星期一 2017 年第八届蓝桥杯省赛，填空题</a></h4><p><strong>问题描述：</strong> 整个 20 世纪（$1901$ 年 $1$ 月 $1$ 日至 $2000$ 年 $12$ 月 $31$ 日之间），一共有多少个星期一？</p><p><strong>思路：</strong> 用 Excel，在一个格子里输入日期 $1901$ 年 $1$ 月 $1$ 日，另一个格子输入 $2000$ 年 $12$ 月 $31$ 日，然后两个格子相减得 $36524$ 天，除以 $7$ 得 $5217.7$ 周。</p><p>再看 $1901$ 年 $1$ 月 $1$ 日是星期几。</p><p>用 Excel 点 $1901$ 年 $1$ 月 $1$ 日这一格的“设置单元格式-数字-日期-星期三”，点击“确定”，得“星期二”，即 $1901$ 年 $1$ 月 $1$ 日是星期二，$36524$ 是 $5217$ 周多几天，最后几天没有星期一，说明答案就是 $5217$。</p><p>也可以直接利用 Excel“单元格格式”对话框得出 $2000$ 年 $12$ 月 $31$ 日刚好是星期天，从星期二至星期天之间没有星期一。</p><h3 id="巧用-Python"><a href="#巧用-Python" class="headerlink" title="巧用 Python"></a>巧用 Python</h3><p><strong>填空题遇到字符、大数字、日期问题，Python 是首选。</strong></p><p>•即使参加 C&#x2F;C++、Java 组比赛，也要学一些 Python，以方便手算，或用来做对比测试。</p><p>•这几种语言的编译器，在比赛机器上都有。</p><p>•写 Python 代码既简单又快，代码长度一般比 C&#x2F;C++、Java 短很多。例如 30 行的 C++代码，用 Python 写只需要 20 行。</p><p><a href="https://www.lanqiao.cn/problems/611/learning/">3. 星期一 2017 年第八届蓝桥杯省赛，填空题</a></p><p><strong>问题描述：</strong> 整个 20 世纪(1901 年 1 月 1 日至 2000 年 12 月 31 日之间)，一共有多少个星期一？</p><p><strong>直接用 Python datetime 库求解，第 4 行可以输出某个日期是星期几。</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span>* <br>dt1=datetime(<span class="hljs-number">1901</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <br>dt2=datetime(<span class="hljs-number">2000</span>,<span class="hljs-number">12</span>,<span class="hljs-number">31</span>) <br><span class="hljs-built_in">print</span>(dt1.weekday()) <span class="hljs-comment"># 周一为0，周二为1... </span><br>td=dt2-dt1 <br><span class="hljs-built_in">print</span>(td.days//<span class="hljs-number">7</span>)<br></code></pre></td></tr></table></figure><p>相对应的使用 C++同样可以完成，但是编码复杂：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> </span><br>using namespace <span class="hljs-built_in">std</span>; <br><span class="hljs-type">int</span> res; <span class="hljs-comment">//先判断润年 </span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">is_r</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span>&#123; <br>    <span class="hljs-keyword">if</span>((n % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; n % <span class="hljs-number">100</span> != <span class="hljs-number">0</span>) || n % <span class="hljs-number">400</span> == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <br>&#125; <br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123; <br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1901</span>;i &lt;= <span class="hljs-number">2000</span>;i ++) <br>        <span class="hljs-keyword">if</span>(is_r(i)) res += <span class="hljs-number">366</span>; <br>    <span class="hljs-keyword">else</span> res += <span class="hljs-number">365</span>; <br>    <span class="hljs-type">int</span> x = res / <span class="hljs-number">7</span>; <br>    <span class="hljs-built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125;<br></code></pre></td></tr></table></figure><p><a href="https://www.lanqiao.cn/problems/612/learning/">4. 乘积尾零 2018 年第九届蓝桥杯省赛</a></p><p>【问题描述】 给出 $100$ 个整数（这里省略题目给的 $100$ 个数），问它们乘积的末尾有多少个零。</p><p>最简单题解：</p><ul><li>直接连乘：几千位的大数</li><li>然后统计末尾的 $0$</li></ul><p><img src="/./../images/%E6%89%8B%E7%AE%97%E4%B8%8E%E6%80%9D%E7%BB%B4%E9%A2%98/236f300ccb9673d4fc3b0c7790de774a-0.png" alt="图片描述"></p><p>但是 C++ 装不下这么大的数字，所以要进行处理：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> cnt2=<span class="hljs-number">0</span>,cnt5=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">10</span>;i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-number">10</span>;j++) &#123; <br>            <span class="hljs-type">int</span> x; <br>            cin&gt;&gt;x;<br>            <span class="hljs-keyword">while</span> (x%<span class="hljs-number">2</span>==<span class="hljs-number">0</span>) cnt2++,x/=<span class="hljs-number">2</span>; <br>            <span class="hljs-keyword">while</span> (x%<span class="hljs-number">5</span>==<span class="hljs-number">0</span>) cnt5++,x/=<span class="hljs-number">5</span>; <br>        &#125; <br>    &#125; <br>    cout&lt;&lt;<span class="hljs-built_in">min</span>(cnt2,cnt5)&lt;&lt;<span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125;<br></code></pre></td></tr></table></figure><p>发现编码时间变长了，如果填空题且 Java 学的好一点的，可以直接 Python 编程出结果。</p><h2 id="思维题"><a href="#思维题" class="headerlink" title="思维题"></a>思维题</h2><ul><li>不需要涉及某种算法的题目。</li><li>只要学过编程语言，就能够解答。</li><li>主要考核学生的思维、逻辑和编码能力，强调脑筋急转弯的解决方式。</li><li>这类题目包括模拟题、构造题、思维题以及找规律题，统称为“思维题（杂题）”。</li><li>每年蓝桥杯都会设置这类题目，而且可能有多道，是考试中的重要得分点。</li><li>杂题涵盖了各种难度，有些可能相对简单，而另一些可能相对较难。</li></ul><p><a href="https://www.lanqiao.cn/problems/174/learning/">5. 付账问题 2018 年第九届蓝桥杯省赛，lanqiaoOJ 题号 174</a></p><p>【题目描述】</p><p>现在有 $n$ 个人出去吃饭，他们总共消费了 $S$ 元。其中第 $i$ 个人带了 $a_i$元。幸运的是，所有人带的钱的总数是足够付账的，但现在问题来了：每个人分别要出多少钱呢？</p><p>为了公平起见，我们希望在总付钱量恰好为 $S$ 的前提下，最后每个人付的钱的标准差最小。这里我们约定，每个人支付的钱数可以是任意非负实数，即可以不是 1 分钱的整数倍。你需要输出最小的标准差是多少。</p><p>标准差的介绍：标准差是多个数与它们平均数差值的平方平均数，一般用于刻画这些数之间的”偏差有多大”。形式化地说，设第 $i$ 个人付的钱为 $b_i$ 元，那么标准差为 :</p><p>$\sqrt{\frac{1}{n}\Sigma_{i&#x3D;1}^{n}(b_{i}-\frac{1}{n}\Sigma_{i&#x3D;1}^{n}b_{i})^{2}}$</p><p><strong>解决思路：</strong></p><p>如果每个人携带的钱足够多，每个人平均支付相同的金额，即 $b_i &#x3D; \frac{S}{n} &#x3D; \text{avg}$，那么标准差 $X$ 为 $0$。</p><p>然而，总会有人的钱不够，这时我们考虑两种情况：</p><p>（1）第 $i$ 个人携带的钱不足以达到平均数 $\text{avg}$，那么他只能支付他所携带的全部钱 $a_i$。</p><p>（2）第 $i$ 个人携带的钱超过平均数 $\text{avg}$，那么他可以支付多一些。</p><p><strong>解决步骤：</strong></p><p>（1）对 $a_i$ 进行从小到大的排序；</p><p>（2）前一部分人的钱不足以支付平均数，因此他们每个人支付所有携带的钱；</p><p>（3）从总支付数中减去前一部分人支付的钱，得到剩余金额 $S’$，以及后一部分人的平均支付数 $\text{avg}’$。</p><p>（4）后一部分人携带的钱较多，他们可以支付多一些。这部分人又可以分为两类：</p><ul><li>（i）相对富裕但仍然不足以支付 $\text{avg}’$ 的人，他们需要支付所有携带的钱；</li><li>（ii）非常富裕的人，无论如何摊分，他们都有余额。</li></ul><p>由于前面一部分人不足以支付 $\text{avg}$，因此后面足够支付 $\text{avg}’$ 的人不能只支付 $\text{avg}$。相反，他们应该尽可能地每个人支付相同的金额。</p><p>因为有人支付不足，总有人支付过多，由于是标准差（方差的平方根），因此每个人支付的金额差距越小越好。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M = <span class="hljs-number">5e5</span>;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> a[M];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> n;  <span class="hljs-type">long</span> <span class="hljs-type">long</span> s;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %lld&quot;</span>,&amp;n,&amp;s);<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)  <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,&amp;a[i]);<br><br>    <span class="hljs-built_in">sort</span>(a+<span class="hljs-number">1</span>,a+n+<span class="hljs-number">1</span>);       <span class="hljs-comment">//排序，从小到大</span><br><br>    <span class="hljs-type">double</span> avg = <span class="hljs-number">1.0</span>*s/n;  <span class="hljs-comment">//平均值</span><br>    <span class="hljs-type">double</span> sum = <span class="hljs-number">0.0</span>;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-keyword">if</span>(a[i]*(n+<span class="hljs-number">1</span>-i) &lt; s)&#123;<br><span class="hljs-comment">//需要把钱全拿出的人：</span><br><span class="hljs-comment">//（1）钱不够平均数的，（2）钱够平均数，但也不是很多的</span><br>            sum += (a[i]-avg)*(a[i]-avg);<br>            s -= a[i];            <span class="hljs-comment">//更新剩余钱数</span><br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123;      <br><span class="hljs-comment">//不用把钱全拿出的人：非常有钱，不管怎么平均都够</span><br>            <span class="hljs-type">double</span> cur_avg = <span class="hljs-number">1.0</span>*s/(n+<span class="hljs-number">1</span>-i);    <br><span class="hljs-comment">//更新平均出钱数</span><br>            sum += (cur_avg-avg)*(cur_avg-avg)*(n+<span class="hljs-number">1</span>-i);<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4lf&quot;</span>,<span class="hljs-built_in">sqrt</span>(sum/n));<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> *<br>n, s = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>a.sort()<br>avg = s/n<br><span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>     <span class="hljs-keyword">if</span> a[i]*(n-i) &lt; s:<br>          <span class="hljs-built_in">sum</span> += <span class="hljs-built_in">pow</span>(a[i]-avg,<span class="hljs-number">2</span>)<br>          s -= a[i]<br>     <span class="hljs-keyword">else</span>:<br>          cur_avg = s/(n-i);      <span class="hljs-comment">#更新平均出钱数</span><br>          <span class="hljs-built_in">sum</span> += <span class="hljs-built_in">pow</span>(cur_avg-avg,<span class="hljs-number">2</span>)*(n-i)<br>          <span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:.4f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(sqrt(<span class="hljs-built_in">sum</span>/(n))))<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span> &#123;<br>        <span class="hljs-type">int</span> n;<br>        <span class="hljs-type">long</span> S;<br>        <span class="hljs-type">double</span> ans=<span class="hljs-number">0</span>,avg;<br>        Scanner input=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n=input.nextInt();<br>        S=input.nextLong();<br>        <span class="hljs-type">long</span> a[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[n];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)        <br>            a[i]=input.nextLong();<br>        Arrays.sort(a);<br>        avg=(<span class="hljs-type">double</span>)S/n;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) &#123;<br>            <span class="hljs-keyword">if</span>(S&lt;=(n-i)*a[i]) &#123;<br>                ans += (n-i)*Math.pow((<span class="hljs-type">double</span>)S/(n-i)-avg,<span class="hljs-number">2</span>);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            ans += Math.pow(a[i]-avg,<span class="hljs-number">2</span>);<br>            S -= a[i];<br>        &#125;<br>        System.out.printf(<span class="hljs-string">&quot;%.4f\n&quot;</span>,Math.sqrt(ans/n));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯备赛</tag>
      
      <tag>手算与思维题</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo存在问题解决方案</title>
    <link href="/2024/03/10/hexo%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <url>/2024/03/10/hexo%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>在使用pandoc本地导出文件后，hexo-renderer-marked存在bug，需要在清除导出使用pandoc路径后执行npm命令二次安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-renderer-marked --save<br></code></pre></td></tr></table></figure><p>否则图片，公式在生成的静态网站上显示失败，且排错难以找到原因（大概率命名冲突，覆盖重写了一些文件）</p><h1 id="HEXO插件问题"><a href="#HEXO插件问题" class="headerlink" title="HEXO插件问题"></a>HEXO插件问题</h1><p>添加一行数据</p><p>$$123456$$延迟还能接受​</p><h2 id="如果图片，公式显示错误"><a href="#如果图片，公式显示错误" class="headerlink" title="如果图片，公式显示错误"></a>如果图片，公式显示错误</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-renderer-marked --save<br></code></pre></td></tr></table></figure><h2 id="图片显示关联插件"><a href="#图片显示关联插件" class="headerlink" title="图片显示关联插件"></a>图片显示关联插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-renderer-marked --save<br></code></pre></td></tr></table></figure><p>该插件在卸载情况会出现图片不显示</p><h2 id="HEXO插件问题-1"><a href="#HEXO插件问题-1" class="headerlink" title="HEXO插件问题"></a>HEXO插件问题</h2><h3 id="Hexo更改主题后启动服务器，界面显如下字符"><a href="#Hexo更改主题后启动服务器，界面显如下字符" class="headerlink" title="Hexo更改主题后启动服务器，界面显如下字符:"></a>Hexo更改主题后启动服务器，界面显如下字符:</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">extends</span> <span class="hljs-keyword">includes</span><span class="hljs-regexp">/layout.pug block content include includes/</span>recent-posts.pug <span class="hljs-keyword">include</span> <span class="hljs-keyword">includes</span>/partial<br></code></pre></td></tr></table></figure><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h3><h3 id="执行如下命令"><a href="#执行如下命令" class="headerlink" title="执行如下命令"></a>执行如下命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">下载对应的插件驱动</span><br>npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive<br><span class="hljs-meta prompt_">#</span><span class="language-bash">清除缓存</span><br>hexo clean<br><span class="hljs-meta prompt_">#</span><span class="language-bash">生成静态文件即可</span><br>hexo g<br></code></pre></td></tr></table></figure><h2 id="HEXO公式无法正常显示"><a href="#HEXO公式无法正常显示" class="headerlink" title="HEXO公式无法正常显示"></a>HEXO公式无法正常显示</h2><h4 id="更换Hexo的markdown渲染引擎"><a href="#更换Hexo的markdown渲染引擎" class="headerlink" title="更换Hexo的markdown渲染引擎"></a>更换Hexo的markdown渲染引擎</h4><p>先后执行下面的两条命令，第一条表示将默认的渲染引擎hexo-renderer-marked卸载，第二条命令是安装hexo-renderer-kramed渲染引擎，此渲染引擎修改了hexo-renderer-marked渲染引擎的一些bug。</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">npm uninstall hexo-renderer-marked <span class="hljs-comment">--save</span><br>npm install hexo-renderer-kramed <span class="hljs-comment">--save</span><br>npm install hexo-<span class="hljs-built_in">math</span> <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><h4 id="修改node-modules-kramed-lib-rules-inline-js文件"><a href="#修改node-modules-kramed-lib-rules-inline-js文件" class="headerlink" title="修改node_modules\kramed\lib\rules\inline.js文件"></a>修改node_modules\kramed\lib\rules\inline.js文件</h4><p>hexo-renderer-marked渲染引擎仍然存在一些语义冲突问题，到博客的根目录下，找到node_modules\kramed\lib\rules\inline.js，把第11行的escape变量的值做相应的修改：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//  escape: /^\\([\\`*&#123;&#125;\[\]()#$+\-.!_&gt;])/,</span><br>  <span class="hljs-attr">escape</span>: <span class="hljs-regexp">/^\\([`*\[\]()#$+\-.!_&gt;])/</span>,<br></code></pre></td></tr></table></figure><p>这一步是在原基础上取消了对,{,}的转义(escape)。</p><p>同时把第20行的em变量也要做相应的修改。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//  em: /^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,</span><br>  <span class="hljs-attr">em</span>: <span class="hljs-regexp">/^\*((?:\*\*|[\s\S])+?)\*(?!\*)/</span>,<br></code></pre></td></tr></table></figure><h4 id="在主题中开启mathjax开关"><a href="#在主题中开启mathjax开关" class="headerlink" title="在主题中开启mathjax开关"></a>在主题中开启mathjax开关</h4><p>到博客根目录下，找到themes&#x2F;next&#x2F;_config.yml，把math默认的flase修改为true，具体如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Math Equations Render Support</span><br><span class="hljs-attr">math:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">per_page:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">engine:</span> <span class="hljs-string">mathjax</span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 数学公式显示问题</span><br><span class="hljs-attr">mathjax:</span><br>  <span class="hljs-attr">tags:</span> <span class="hljs-string">none</span> <span class="hljs-comment"># 或 &#x27;ams&#x27; 或 &#x27;all&#x27;</span><br>  <span class="hljs-attr">single_dollars:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 启用单个美元符号作为内联（行内）数学公式定界符</span><br>  <span class="hljs-attr">cjk_width:</span> <span class="hljs-number">0.9</span> <span class="hljs-comment"># 相对 CJK 字符宽度</span><br>  <span class="hljs-attr">normal_width:</span> <span class="hljs-number">0.6</span> <span class="hljs-comment"># 相对正常（等宽）宽度</span><br>  <span class="hljs-attr">append_css:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 将 CSS 添加到每个页面</span><br>  <span class="hljs-attr">every_page:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 如果为 true，那么无论每篇文章的前题中的 `mathjax` 设置如何，每页都将由 mathjax 呈现</span><br>  <span class="hljs-attr">per_page:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">cdn:</span> <span class="hljs-string">//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML</span><br></code></pre></td></tr></table></figure><h4 id="在文章的Front-matter里打开mathjax开关"><a href="#在文章的Front-matter里打开mathjax开关" class="headerlink" title="在文章的Front-matter里打开mathjax开关"></a>在文章的Front-matter里打开mathjax开关</h4><p>如果你写的文章里面用到了数学公式，需要在文章Front-matter里打开mathjax开关。如果用不到数学公式，则不需要管它。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs md">---<br>title: index.html<br>date: 2018-12-5 01:30:30<br>tags:<br><span class="hljs-section">mathjax: true</span><br><span class="hljs-section">--</span><br></code></pre></td></tr></table></figure><h4 id="重启hexo"><a href="#重启hexo" class="headerlink" title="重启hexo"></a>重启hexo</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean <span class="hljs-comment">#清除缓存文件</span><br>hexo g -d  <span class="hljs-comment">#生成并部署hexo</span><br></code></pre></td></tr></table></figure><p>到这里，hexo中无法显示数学公式的问题就得到解决了！</p><p>如果还不行</p><p><a href="https://blog.csdn.net/wangqingchuan92/article/details/114265007?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_utm_term~default-0-114265007-blog-120452165.235%5Ev43%5Epc_blog_bottom_relevance_base2&spm=1001.2101.3001.4242.1&utm_relevant_index=3">【个人网站搭建】hexo框架下支持显示MathJax数学公式_hexo使用mathjax显示公式-CSDN博客</a></p><p><a href="https://monkey0105.github.io/2017/09/21/hexo-mathjax/">Hexo博客数学公式显示 | Dreamland (monkey0105.github.io)</a></p><h4 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a>参考文献：</h4><p>[成功解决在hexo中无法显示数学公式的问题 | 初心 (runninggump.github.io)](<a href="https://runninggump.github.io/2018/12/05/%E6%88%90%E5%8A%9F%E8%A7%A3%E5%86%B3%E5%9C%A8hexo%E4%B8%AD%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E7%9A%84%E9%97%AE%E9%A2%98/#:~:text=%E5%89%8D%E8%A8%80%E5%9F%BA%E4%BA%8EHexo%E6%90%AD%E5%BB%BA%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%8C%E5%9C%A8%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%E6%B8%B2%E6%9F%93%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E7%9A%84%E6%97%B6%E5%80%99%E6%98%AF%E4%BC%9A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E7%9A%84%E3%80%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%88%AA%E5%9B%BE%E6%98%AF%E6%88%91%E7%9A%84%E5%85%88%E5%89%8D%E7%9A%84%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%87%BA%E7%8E%B0%E7%9A%84%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93%E9%94%99%E8%AF%AF%EF%BC%9A">https://runninggump.github.io/2018/12/05/成功解决在hexo中无法显示数学公式的问题/#:~:text=前言基于Hexo搭建的个人博客，在默认情况下渲染数学公式的时候是会出现问题的。下面的截图是我的先前的博客中出现的公式渲染错误：</a> 经过了一波百度操作后，成功将问题解决，下面是解决后的截图：,下面我将我的操作写在下面，供需要的人参考。 解决步骤更换Hexo的markdown渲染引擎先后执行下面的两条命令，第一条表示将默认的渲染引擎hexo-renderer-marked卸载，第二条命令是安装hex)</p><p><a href="https://www.jianshu.com/p/7ab21c7f0674">在Hexo中渲染MathJax数学公式</a></p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo使用</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/03/09/hello-world/"/>
    <url>/2024/03/09/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo使用</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo——安装部署使用</title>
    <link href="/2024/03/09/hexo%E2%80%94%E2%80%94%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/"/>
    <url>/2024/03/09/hexo%E2%80%94%E2%80%94%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexo安装"><a href="#Hexo安装" class="headerlink" title="Hexo安装"></a>Hexo安装</h1><p>可以参照hexo官网给出的文档，官网文档：<a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p><p>安装前需要先安装git工具和nodejs</p><ul><li>git工具 官网： <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></li><li>nodejs 下载地址：<a href="https://registry.npmmirror.com/binary.html?path=node/%EF%BC%88%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F-%E5%9B%BD%E5%86%85%E5%AE%98%E7%BD%91%E8%AE%BF%E9%97%AE%E6%85%A2%EF%BC%89">https://registry.npmmirror.com/binary.html?path=node/（淘宝镜像-国内官网访问慢）</a></li></ul><p>安装hexo（全局）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">$ npm install -g hexo-cli<br></code></pre></td></tr></table></figure><p>安装hexo（在当前文件夹）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">$ npm install hexo<br></code></pre></td></tr></table></figure><h1 id="Hexo网站搭建"><a href="#Hexo网站搭建" class="headerlink" title="Hexo网站搭建"></a>Hexo网站搭建</h1><p>使用以下命令进行建站</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmd">$ hexo init &lt;folder&gt;<br>$ <span class="hljs-built_in">cd</span> &lt;folder&gt;<br>$ npm install<br></code></pre></td></tr></table></figure><p>完成以上命令后，修改folder目录下的_config.yml文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># Hexo Configuration</span><br><span class="hljs-comment">## Docs: https://hexo.io/docs/configuration.html</span><br><span class="hljs-comment">## Source: https://github.com/hexojs/hexo/</span><br><br><span class="hljs-comment"># Site 站点信息</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">zdx-1</span><br><span class="hljs-attr">subtitle:</span> <span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-attr">description:</span> <span class="hljs-string">个人学习的一些笔记记录，只用于学习交流</span><br><span class="hljs-attr">keywords:</span> <span class="hljs-string">zdx-1</span><br><span class="hljs-attr">author:</span> <span class="hljs-string">Dexin</span> <span class="hljs-string">Zhang</span><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span><br><span class="hljs-attr">timezone:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-comment"># URL 你的网站地址源</span><br><span class="hljs-comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="hljs-attr">url:</span> <span class="hljs-string">http://zdx-1.github.io</span><br><span class="hljs-attr">permalink:</span> <span class="hljs-string">:year/:month/:day/:title/</span><br><span class="hljs-attr">permalink_defaults:</span><br><span class="hljs-attr">pretty_urls:</span><br>  <span class="hljs-attr">trailing_index:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br>  <span class="hljs-attr">trailing_html:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br><br><span class="hljs-comment"># Directory</span><br><span class="hljs-attr">source_dir:</span> <span class="hljs-string">source</span><br><span class="hljs-attr">public_dir:</span> <span class="hljs-string">public</span><br><span class="hljs-attr">tag_dir:</span> <span class="hljs-string">tags</span><br><span class="hljs-attr">archive_dir:</span> <span class="hljs-string">archives</span><br><span class="hljs-attr">category_dir:</span> <span class="hljs-string">categories</span><br><span class="hljs-attr">code_dir:</span> <span class="hljs-string">downloads/code</span><br><span class="hljs-attr">i18n_dir:</span> <span class="hljs-string">:lang</span><br><span class="hljs-attr">skip_render:</span><br><br><span class="hljs-comment"># Writing</span><br><span class="hljs-attr">new_post_name:</span> <span class="hljs-string">:title.md</span> <span class="hljs-comment"># File name of new posts</span><br><span class="hljs-attr">default_layout:</span> <span class="hljs-string">post</span><br><span class="hljs-attr">titlecase:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># Transform title into titlecase</span><br><span class="hljs-attr">external_link:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Open external links in new tab</span><br>  <span class="hljs-attr">field:</span> <span class="hljs-string">site</span> <span class="hljs-comment"># Apply to the whole site</span><br>  <span class="hljs-attr">exclude:</span> <span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-attr">filename_case:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">render_drafts:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">post_asset_folder:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">relative_link:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">future:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">syntax_highlighter:</span> <br><span class="hljs-attr">highlight:</span><br>  <span class="hljs-attr">line_number:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">auto_detect:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">tab_replace:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">wrap:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">hljs:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">prismjs:</span><br>  <span class="hljs-attr">preprocess:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">line_number:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">tab_replace:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-comment"># Home page setting</span><br><span class="hljs-comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span><br><span class="hljs-comment"># per_page: Posts displayed per page. (0 = disable pagination)</span><br><span class="hljs-comment"># order_by: Posts order. (Order by date descending by default)</span><br><span class="hljs-attr">index_generator:</span><br>  <span class="hljs-attr">path:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">per_page:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">order_by:</span> <span class="hljs-string">-date</span><br><br><span class="hljs-comment"># Category &amp; Tag</span><br><span class="hljs-attr">default_category:</span> <span class="hljs-string">uncategorized</span><br><span class="hljs-attr">category_map:</span><br><span class="hljs-attr">tag_map:</span><br><br><span class="hljs-comment"># Metadata elements</span><br><span class="hljs-comment">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span><br><span class="hljs-attr">meta_generator:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># Date / Time format</span><br><span class="hljs-comment">## Hexo uses Moment.js to parse and display date</span><br><span class="hljs-comment">## You can customize the date format as defined in</span><br><span class="hljs-comment">## http://momentjs.com/docs/#/displaying/format/</span><br><span class="hljs-attr">date_format:</span> <span class="hljs-string">YYYY-MM-DD</span><br><span class="hljs-attr">time_format:</span> <span class="hljs-string">HH:mm:ss</span><br><span class="hljs-comment">## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;</span><br><span class="hljs-attr">updated_option:</span> <span class="hljs-string">&#x27;mtime&#x27;</span><br><br><span class="hljs-comment"># Pagination</span><br><span class="hljs-comment">## Set per_page to 0 to disable pagination</span><br><span class="hljs-attr">per_page:</span> <span class="hljs-number">10</span><br><span class="hljs-attr">pagination_dir:</span> <span class="hljs-string">page</span><br><br><span class="hljs-comment"># Include / Exclude file(s)</span><br><span class="hljs-comment">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span><br><span class="hljs-attr">include:</span><br><span class="hljs-attr">exclude:</span><br><span class="hljs-attr">ignore:</span><br><br><span class="hljs-comment"># Extensions 设置使用的主题</span><br><span class="hljs-comment">## Plugins: https://hexo.io/plugins/</span><br><span class="hljs-comment">## Themes: https://hexo.io/themes/</span><br><span class="hljs-attr">theme:</span> <span class="hljs-number">3</span><span class="hljs-string">-hexo</span><br><br><span class="hljs-comment"># Deployment 上传到github的方式，上传到哪个分支</span><br><span class="hljs-comment">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:zdx-1/zdx-1.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br><br></code></pre></td></tr></table></figure><h1 id="Hexo配置git上传插件"><a href="#Hexo配置git上传插件" class="headerlink" title="Hexo配置git上传插件"></a>Hexo配置git上传插件</h1><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">$ npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><h1 id="Hexo上传github"><a href="#Hexo上传github" class="headerlink" title="Hexo上传github"></a>Hexo上传github</h1><p>清理缓存，生成文件，上传文件</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">$ hexo cl &amp;&amp; hexo g &amp;&amp; hexo d<br></code></pre></td></tr></table></figure><p>清理缓存，生成文件，本地预览</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">$ hexo cl &amp;&amp; hexo g &amp;&amp; hexo s<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo使用</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
