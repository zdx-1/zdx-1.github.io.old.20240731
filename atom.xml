<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Zdx-1</title>
  
  
  <link href="http://zdx-1.github.io/atom.xml" rel="self"/>
  
  <link href="http://zdx-1.github.io/"/>
  <updated>2024-07-30T16:54:51.567Z</updated>
  <id>http://zdx-1.github.io/</id>
  
  <author>
    <name>zdx</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>typora配置图片上传（gitee仓库版）</title>
    <link href="http://zdx-1.github.io/2024/07/31/typora%E9%85%8D%E7%BD%AE%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%EF%BC%88gitee%E4%BB%93%E5%BA%93%E7%89%88%EF%BC%89/"/>
    <id>http://zdx-1.github.io/2024/07/31/typora%E9%85%8D%E7%BD%AE%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%EF%BC%88gitee%E4%BB%93%E5%BA%93%E7%89%88%EF%BC%89/</id>
    <published>2024-07-30T16:54:51.000Z</published>
    <updated>2024-07-30T16:54:51.567Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>一篇文章学完接口测试</title>
    <link href="http://zdx-1.github.io/2024/07/29/%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%AD%A6%E5%AE%8C%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/"/>
    <id>http://zdx-1.github.io/2024/07/29/%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%AD%A6%E5%AE%8C%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/</id>
    <published>2024-07-29T03:49:47.000Z</published>
    <updated>2024-07-29T03:50:37.400Z</updated>
    
    
    
    
    <category term="接口测试" scheme="http://zdx-1.github.io/categories/%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="接口测试" scheme="http://zdx-1.github.io/tags/%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>一篇文章学完自动化测试</title>
    <link href="http://zdx-1.github.io/2024/07/29/%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%AD%A6%E5%AE%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    <id>http://zdx-1.github.io/2024/07/29/%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%AD%A6%E5%AE%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/</id>
    <published>2024-07-29T03:49:11.000Z</published>
    <updated>2024-07-29T03:50:47.985Z</updated>
    
    
    
    
    <category term="自动化测试" scheme="http://zdx-1.github.io/categories/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="自动化测试" scheme="http://zdx-1.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>刷爆蓝桥云课</title>
    <link href="http://zdx-1.github.io/2024/07/29/%E5%88%B7%E7%88%86%E8%93%9D%E6%A1%A5%E4%BA%91%E8%AF%BE/"/>
    <id>http://zdx-1.github.io/2024/07/29/%E5%88%B7%E7%88%86%E8%93%9D%E6%A1%A5%E4%BA%91%E8%AF%BE/</id>
    <published>2024-07-29T03:46:59.000Z</published>
    <updated>2024-07-29T04:13:09.055Z</updated>
    
    <content type="html"><![CDATA[<h1 id="算法模板题"><a href="#算法模板题" class="headerlink" title="算法模板题"></a>算法模板题</h1><blockquote><p>2024&#x2F;7&#x2F;29</p></blockquote><h2 id="蓝桥公园"><a href="#蓝桥公园" class="headerlink" title="蓝桥公园"></a>蓝桥公园</h2><p>链接：<a href="https://www.lanqiao.cn/problems/1121/learning/?page=1&first_category_id=1&second_category_id=8">1121蓝桥公园</a></p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明喜欢观景，于是今天他来到了蓝桥公园。</p><p>已知公园有 $N$ 个景点，景点和景点之间一共有 $M$ 条道路。小明有 $Q$ 个观景计划，每个计划包含一个起点 $st$ 和一个终点 $ed$，表示他想从 $st$ 去到 $ed$。但是小明的体力有限，对于每个计划他想走最少的路完成，你可以帮帮他吗？</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入第一行包含三个正整数 $N,M,Q$</p><p>第 $2$ 到 $M + 1$ 行每行包含三个正整数 $u,v,w$，表示 $u\leftrightarrow v$ 之间存在一条距离为 $w$ 的路。</p><p>第 $M+2$ 到 $M + Q-1$ 行每行包含两个正整数 $st,ed$，其含义如题所述。</p><p>$1\leq N\leq 400$，$1\leq M \leq \dfrac{N\times(N - 1)}{2}$，$Q\leq 10^3$，$1\leq u,v,st,ed \leq n$，$1\leq w \leq 10^9$</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出共 $Q$ 行，对应输入数据中的查询。</p><p>若无法从 $st$ 到达 $ed$ 则输出 $-1$。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 3 3<br>1 2 1<br>1 3 5<br>2 3 2<br>1 2<br>1 3<br>2 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">1<br>3<br>2<br></code></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>128M</td></tr><tr><td>C</td><td>1s</td><td>128M</td></tr><tr><td>Python3</td><td>3s</td><td>128M</td></tr><tr><td>Java</td><td>2s</td><td>128M</td></tr><tr><td>PyPy3</td><td>3s</td><td>128M</td></tr><tr><td>Go</td><td>3s</td><td>128M</td></tr><tr><td>JavaScript</td><td>3s</td><td>128M</td></tr></tbody></table><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>Floyd算法模板题</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;limits&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF 0x3f3f3f3f3f3f3f3f</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    ll N, M, Q;<br>    cin &gt;&gt; N &gt;&gt; M &gt;&gt; Q;<br>    vector&lt;vector&lt;ll&gt;&gt; <span class="hljs-built_in">G</span>(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;ll&gt;(N + <span class="hljs-number">1</span>, INF));<br>    <span class="hljs-type">int</span> i,j,k;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= N; i++) G[i][i] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= M; i++) &#123;<br>        ll u, v, w;<br>        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;<br>        G[u][v] = <span class="hljs-built_in">min</span>(G[u][v], w);<br>        G[v][u] = <span class="hljs-built_in">min</span>(G[v][u], w);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (k = <span class="hljs-number">1</span>; k &lt;= N; k++)<br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= N; i++)<br>            <span class="hljs-keyword">for</span> (j = <span class="hljs-number">1</span>; j &lt;= N; j++)<br>                G[i][j] = <span class="hljs-built_in">min</span>(G[i][j], G[i][k] + G[k][j]);<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= Q; i++) &#123;<br>        ll u, v;<br>        cin &gt;&gt; u &gt;&gt; v;<br>        <span class="hljs-keyword">if</span> (G[u][v] == INF)<br>            cout &lt;&lt; <span class="hljs-string">&quot;-1&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">else</span><br>            cout &lt;&lt; G[u][v] &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;算法模板题&quot;&gt;&lt;a href=&quot;#算法模板题&quot; class=&quot;headerlink&quot; title=&quot;算法模板题&quot;&gt;&lt;/a&gt;算法模板题&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;2024&amp;#x2F;7&amp;#x2F;29&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=</summary>
      
    
    
    
    <category term="蓝桥云课" scheme="http://zdx-1.github.io/categories/%E8%93%9D%E6%A1%A5%E4%BA%91%E8%AF%BE/"/>
    
    
    <category term="蓝桥云课" scheme="http://zdx-1.github.io/tags/%E8%93%9D%E6%A1%A5%E4%BA%91%E8%AF%BE/"/>
    
  </entry>
  
  <entry>
    <title>刷爆LeetCode</title>
    <link href="http://zdx-1.github.io/2024/07/29/%E5%88%B7%E7%88%86LeetCode/"/>
    <id>http://zdx-1.github.io/2024/07/29/%E5%88%B7%E7%88%86LeetCode/</id>
    <published>2024-07-29T03:46:40.000Z</published>
    <updated>2024-07-30T16:05:16.199Z</updated>
    
    <content type="html"><![CDATA[<h1 id="LeetCode-热题-100"><a href="#LeetCode-热题-100" class="headerlink" title="LeetCode 热题 100"></a>LeetCode 热题 100</h1><blockquote><p>2024&#x2F;7&#x2F;29</p></blockquote><blockquote alt="info"><p>哈希</p></blockquote><h2 id="1-两数之和"><a href="#1-两数之和" class="headerlink" title="1.两数之和"></a>1.两数之和</h2><p><a href="https://leetcode.cn/problems/two-sum/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/hash-table/">哈希表</a></p><h4 id="暴力写法"><a href="#暴力写法" class="headerlink" title="暴力写法"></a>暴力写法</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            res=target-nums[i]<br>            <span class="hljs-keyword">if</span> res <span class="hljs-keyword">in</span> nums[i+<span class="hljs-number">1</span>:]:<br>                <span class="hljs-keyword">return</span> [i,nums[i+<span class="hljs-number">1</span>:].index(res)+i+<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">twoSum</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> target)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;;i++)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>;j&lt;nums.<span class="hljs-built_in">size</span>();j++)&#123;<br>                <span class="hljs-keyword">if</span>(nums[i]+nums[j]==target)&#123;<br>                    <span class="hljs-keyword">return</span> &#123;i,j&#125;;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="哈希表写法"><a href="#哈希表写法" class="headerlink" title="哈希表写法"></a>哈希表写法</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        idx = &#123;&#125; <br>        <span class="hljs-keyword">for</span> j, x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(nums): <br>            <span class="hljs-keyword">if</span> target - x <span class="hljs-keyword">in</span> idx:  <br>                <span class="hljs-keyword">return</span> [idx[target - x], j]  <br>            idx[x] = j <br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">twoSum</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> target)</span> </span>&#123;<br>        unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; idx;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;;j++)&#123;<br>            <span class="hljs-keyword">auto</span> it =idx.<span class="hljs-built_in">find</span>(target-nums[j]);<br>            <span class="hljs-keyword">if</span>(it!=idx.<span class="hljs-built_in">end</span>())&#123;<br>                <span class="hljs-keyword">return</span> &#123;it-&gt;second,j&#125;;<br>            &#125;<br>            idx[nums[j]]=j;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="49-字母异位词分组"><a href="#49-字母异位词分组" class="headerlink" title="49. 字母异位词分组"></a>49. 字母异位词分组</h2><p><a href="https://leetcode.cn/problems/group-anagrams/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/hash-table/">哈希表</a><a href="https://leetcode.cn/tag/string/">字符串</a><a href="https://leetcode.cn/tag/sorting/">排序</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">groupAnagrams</span>(<span class="hljs-params">self, strs: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]]:<br>        hashT=defaultdict(<span class="hljs-built_in">list</span>)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> strs:<br>            hashT[<span class="hljs-string">&quot;&quot;</span>.join(<span class="hljs-built_in">sorted</span>(i))].append(i)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(hashT.values())<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    vector&lt;vector&lt;string&gt;&gt; <span class="hljs-built_in">groupAnagrams</span>(vector&lt;string&gt;&amp; strs) &#123;<br>        unordered_map&lt;string,vector&lt;string&gt;&gt; m;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;s:strs)&#123;<br>            string sorted_s=s;<br>            ranges::<span class="hljs-built_in">sort</span>(sorted_s);<br>            m[sorted_s].<span class="hljs-built_in">push_back</span>(s);<br>        &#125;<br>        vector&lt;vector&lt;string&gt;&gt; ans;<br>        ans.<span class="hljs-built_in">reserve</span>(m.<span class="hljs-built_in">size</span>());<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;[_,value]:m)&#123;<br>            ans.<span class="hljs-built_in">push_back</span>(value);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="128-最长连续序列"><a href="#128-最长连续序列" class="headerlink" title="128. 最长连续序列"></a>128. 最长连续序列</h2><p><a href="https://leetcode.cn/problems/longest-consecutive-sequence/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/union-find/">并查集</a><a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/hash-table/">哈希表</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestConsecutive</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        res = <span class="hljs-number">0</span>     <span class="hljs-comment"># 记录最长连续序列的长度</span><br>        num_set = <span class="hljs-built_in">set</span>(nums)     <span class="hljs-comment"># 记录nums中的所有数值</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> num_set:<br>            <span class="hljs-comment"># 如果当前的数是一个连续序列的起点，统计这个连续序列的长度</span><br>            <span class="hljs-keyword">if</span> (num - <span class="hljs-number">1</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> num_set:<br>                seq_len = <span class="hljs-number">1</span>     <span class="hljs-comment"># 连续序列的长度，初始为1</span><br>                <span class="hljs-keyword">while</span> (num + <span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> num_set:<br>                    seq_len += <span class="hljs-number">1</span><br>                    num += <span class="hljs-number">1</span>    <span class="hljs-comment"># 不断查找连续序列，直到num的下一个数不存在于数组中</span><br>                res = <span class="hljs-built_in">max</span>(res, seq_len)     <span class="hljs-comment"># 更新最长连续序列长度</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><blockquote alt="info"><p>双指针</p></blockquote><h2 id="283-移动零"><a href="#283-移动零" class="headerlink" title="283. 移动零"></a>283. 移动零</h2><p><a href="https://leetcode.cn/problems/move-zeroes/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/two-pointers/">双指针</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">moveZeroes</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-literal">None</span>:<br>        offset = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[i] == <span class="hljs-number">0</span>:<br>                offset += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> offset != <span class="hljs-number">0</span>:<br>                nums[i - offset] = nums[i]<br>                nums[i] = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h2 id="11-盛最多水的容器"><a href="#11-盛最多水的容器" class="headerlink" title="11. 盛最多水的容器"></a>11. 盛最多水的容器</h2><p><a href="https://leetcode.cn/problems/container-with-most-water/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/greedy/">贪心</a><a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/two-pointers/">双指针</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxArea</span>(<span class="hljs-params">self, height: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        i, j, res = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(height) - <span class="hljs-number">1</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            <span class="hljs-keyword">if</span> height[i] &lt; height[j]:<br>                res = <span class="hljs-built_in">max</span>(res, height[i] * (j - i))<br>                i += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                res = <span class="hljs-built_in">max</span>(res, height[j] * (j - i))<br>                j -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><blockquote><p>2024&#x2F;7&#x2F;30</p></blockquote><h2 id="15-三数之和"><a href="#15-三数之和" class="headerlink" title="15. 三数之和"></a>15. 三数之和</h2><p><a href="https://leetcode.cn/problems/3sum/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/two-pointers/">双指针</a><a href="https://leetcode.cn/tag/sorting/">排序</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">threeSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        <br>        n=<span class="hljs-built_in">len</span>(nums)<br>        res=[]<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> nums <span class="hljs-keyword">or</span> n&lt;<span class="hljs-number">3</span>):<br>            <span class="hljs-keyword">return</span> []<br>        nums.sort()<br>        res=[]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span>(nums[i]&gt;<span class="hljs-number">0</span>):<br>                <span class="hljs-keyword">return</span> res<br>            <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nums[i]==nums[i-<span class="hljs-number">1</span>]):<br>                <span class="hljs-keyword">continue</span><br>            L=i+<span class="hljs-number">1</span><br>            R=n-<span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span>(L&lt;R):<br>                <span class="hljs-keyword">if</span>(nums[i]+nums[L]+nums[R]==<span class="hljs-number">0</span>):<br>                    res.append([nums[i],nums[L],nums[R]])<br>                    <span class="hljs-keyword">while</span>(L&lt;R <span class="hljs-keyword">and</span> nums[L]==nums[L+<span class="hljs-number">1</span>]):<br>                        L=L+<span class="hljs-number">1</span><br>                    <span class="hljs-keyword">while</span>(L&lt;R <span class="hljs-keyword">and</span> nums[R]==nums[R-<span class="hljs-number">1</span>]):<br>                        R=R-<span class="hljs-number">1</span><br>                    L=L+<span class="hljs-number">1</span><br>                    R=R-<span class="hljs-number">1</span><br>                <span class="hljs-keyword">elif</span>(nums[i]+nums[L]+nums[R]&gt;<span class="hljs-number">0</span>):<br>                    R=R-<span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    L=L+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h2 id="42-接雨水"><a href="#42-接雨水" class="headerlink" title="42. 接雨水"></a>42. 接雨水</h2><p><a href="https://leetcode.cn/problems/trapping-rain-water/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/stack/">栈</a><a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/two-pointers/">双指针</a><a href="https://leetcode.cn/tag/dynamic-programming/">动态规划</a><a href="https://leetcode.cn/tag/monotonic-stack/">单调栈</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">trap</span>(<span class="hljs-params">self, height: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        n = <span class="hljs-built_in">len</span>(height)<br>        pre_max = [<span class="hljs-number">0</span>] * n  <span class="hljs-comment"># pre_max[i] 表示从 height[0] 到 height[i] 的最大值</span><br>        pre_max[<span class="hljs-number">0</span>] = height[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>            pre_max[i] = <span class="hljs-built_in">max</span>(pre_max[i - <span class="hljs-number">1</span>], height[i])<br><br>        suf_max = [<span class="hljs-number">0</span>] * n  <span class="hljs-comment"># suf_max[i] 表示从 height[i] 到 height[n-1] 的最大值</span><br>        suf_max[-<span class="hljs-number">1</span>] = height[-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">2</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>            suf_max[i] = <span class="hljs-built_in">max</span>(suf_max[i + <span class="hljs-number">1</span>], height[i])<br><br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> h, pre, suf <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(height, pre_max, suf_max):<br>            ans += <span class="hljs-built_in">min</span>(pre, suf) - h  <span class="hljs-comment"># 累加每个水桶能接多少水</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><blockquote alt="info"><p>滑动窗口</p></blockquote><h2 id="3-无重复字符的最长子串"><a href="#3-无重复字符的最长子串" class="headerlink" title="3. 无重复字符的最长子串"></a>3. 无重复字符的最长子串</h2><p><a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/hash-table/">哈希表</a><a href="https://leetcode.cn/tag/string/">字符串</a><a href="https://leetcode.cn/tag/sliding-window/">滑动窗口</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        dic, res, i = &#123;&#125;, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> s[j] <span class="hljs-keyword">in</span> dic:<br>                i = <span class="hljs-built_in">max</span>(dic[s[j]], i) <span class="hljs-comment"># 更新左指针 i</span><br>            dic[s[j]] = j <span class="hljs-comment"># 哈希表记录</span><br>            res = <span class="hljs-built_in">max</span>(res, j - i) <span class="hljs-comment"># 更新结果</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h2 id="438-找到字符串中所有字母异位词"><a href="#438-找到字符串中所有字母异位词" class="headerlink" title="438. 找到字符串中所有字母异位词"></a>438. 找到字符串中所有字母异位词</h2><p><a href="https://leetcode.cn/problems/find-all-anagrams-in-a-string/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/hash-table/">哈希表</a><a href="https://leetcode.cn/tag/string/">字符串</a><a href="https://leetcode.cn/tag/sliding-window/">滑动窗口</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findAnagrams</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, p: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        ans = []<br>        lp = <span class="hljs-built_in">len</span>(p)<br>        cnt_p = Counter(p)<br>        cnt_s = Counter()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            cnt_s[s[i]] += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> i &gt;= lp:<br>                cnt_s[s[i-lp]] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> cnt_s == cnt_p:<br>                ans.append(i-lp+<span class="hljs-number">1</span>)<br><br>            <span class="hljs-comment"># print(cnt_s, cnt_p)</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><blockquote alt="info"><p>子串</p></blockquote><h2 id="560-和为-K-的子数组"><a href="#560-和为-K-的子数组" class="headerlink" title="560. 和为 K 的子数组"></a>560. 和为 K 的子数组</h2><p><a href="https://leetcode.cn/problems/subarray-sum-equals-k/">链接</a></p><p>知识点：<a href="https://leetcode.cn/tag/array/">数组</a><a href="https://leetcode.cn/tag/hash-table/">哈希表</a><a href="https://leetcode.cn/tag/prefix-sum/">前缀和</a></p><p>参考题解：<a href="https://leetcode.cn/problems/subarray-sum-equals-k/solutions/2781031/qian-zhui-he-ha-xi-biao-cong-liang-ci-bi-4mwr/?envType=study-plan-v2&envId=top-100-liked">560. 和为 K 的子数组 - 力扣（LeetCode）</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">subarraySum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        s = [<span class="hljs-number">0</span>] * (<span class="hljs-built_in">len</span>(nums) + <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">for</span> i, x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(nums):<br>            s[i + <span class="hljs-number">1</span>] = s[i] + x<br><br>        ans = <span class="hljs-number">0</span><br>        cnt = defaultdict(<span class="hljs-built_in">int</span>)<br>        <span class="hljs-keyword">for</span> sj <span class="hljs-keyword">in</span> s:<br>            ans += cnt[sj - k]<br>            cnt[sj] += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;LeetCode-热题-100&quot;&gt;&lt;a href=&quot;#LeetCode-热题-100&quot; class=&quot;headerlink&quot; title=&quot;LeetCode 热题 100&quot;&gt;&lt;/a&gt;LeetCode 热题 100&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;2024&amp;</summary>
      
    
    
    
    <category term="LeetCode" scheme="http://zdx-1.github.io/categories/LeetCode/"/>
    
    
    <category term="LeetCode" scheme="http://zdx-1.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>刷爆码蹄集</title>
    <link href="http://zdx-1.github.io/2024/07/29/%E5%88%B7%E7%88%86%E7%A0%81%E8%B9%84%E9%9B%86/"/>
    <id>http://zdx-1.github.io/2024/07/29/%E5%88%B7%E7%88%86%E7%A0%81%E8%B9%84%E9%9B%86/</id>
    <published>2024-07-29T03:46:28.000Z</published>
    <updated>2024-07-29T03:59:59.293Z</updated>
    
    <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;&lt;/h1&gt;</summary>
      
    
    
    
    <category term="码蹄集" scheme="http://zdx-1.github.io/categories/%E7%A0%81%E8%B9%84%E9%9B%86/"/>
    
    
    <category term="码蹄集" scheme="http://zdx-1.github.io/tags/%E7%A0%81%E8%B9%84%E9%9B%86/"/>
    
  </entry>
  
  <entry>
    <title>Django开发</title>
    <link href="http://zdx-1.github.io/2024/07/28/Django%E5%BC%80%E5%8F%91/"/>
    <id>http://zdx-1.github.io/2024/07/28/Django%E5%BC%80%E5%8F%91/</id>
    <published>2024-07-28T11:01:53.000Z</published>
    <updated>2024-07-28T11:37:38.962Z</updated>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>Django 是一个高级的 Python 网络框架，可以快速开发安全和可维护的网站。由经验丰富的开发者构建，Django 负责处理网站开发中麻烦的部分，因此你可以专注于编写应用程序，而无需重新开发。 它是免费和开源的，有活跃繁荣的社区，丰富的文档，以及很多免费和付费的解决方案。</p><p>Django 可以使你的应用具有以下优点：</p><ul><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Introduction#%E5%AE%8C%E5%A4%87%E6%80%A7">完备性</a></p><p>Django 遵循“功能完备”的理念，提供开发人员可能想要“开箱即用”的几乎所有功能。因为你需要的一切都是一个”产品“的一部分，它们都可以无缝结合在一起，遵循一致性设计原则，并且具有广泛和<a href="https://docs.djangoproject.com/en/1.10/">最新的文档</a>.</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Introduction#%E9%80%9A%E7%94%A8%E6%80%A7">通用性</a></p><p>Django 可以（并已经）用于构建几乎任何类型的网站—从内容管理系统和维基，到社交网络和新闻网站。它可以与任何客户端框架一起工作，并且可以提供几乎任何格式（包括 HTML，Rss 源，JSON，XML 等）的内容。你正在阅读的网站就是基于 Django。在内部，尽管它为几乎所有可能需要的功能（例如几个流行的数据库，模版引擎等）提供了选择，但是如果需要，它也可以扩展到使用其他组件。</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Introduction#%E5%AE%89%E5%85%A8%E6%80%A7">安全性</a></p><p>Django 帮助开发人员通过提供一个被设计为“做正确的事情”来自动保护网站的框架来避免许多常见的安全错误。例如，Django 提供了一种安全的方式来管理用户账户和密码，避免了常见的错误，比如将 session 放在 cookie 中这种易受攻击的做法（取而代之的是 cookies 只包含一个密钥，实际数据存储在数据库中）或直接存储密码而不是密码哈希。<em>密码哈希是通过<a href="https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A2%BC%E9%9B%9C%E6%B9%8A%E5%87%BD%E6%95%B8">密码散列函数</a>发送密码而创建的固定长度值。Django 能通过运行哈希函数并将输出的哈希值与存储的哈希值进行比较来检查输入的密码是否正确。然而由于功能的“单向”性质，即使存储的哈希值被泄漏，攻击者也难以破解原始密码。</em>默认情况下，Django 可以防范许多漏洞，包括 SQL 注入，跨站点脚本，跨站点请求伪造和点击劫持 (请参阅 <a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/First_steps/Website_security">网站安全</a> 相关信息，如有兴趣).</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Introduction#%E5%8F%AF%E6%89%A9%E5%B1%95">可扩展</a></p><p>Django 使用基于组件的“<a href="https://en.wikipedia.org/wiki/Shared_nothing_architecture">无共享</a>”架构 (架构的每一部分独立于其他架构，因此可以根据需要进行替换或更改). 在不用部分之间有明确的分隔意味着它可以通过在任何级别添加硬件来扩展服务：缓存服务器，数据库服务器或应用程序服务器。一些最繁忙的网站已经成功地缩放了 Django，以满足他们的需求（例如 Instagram 和 Disqus，仅举两个例子，可自行添加）。</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Introduction#%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7">可维护性</a></p><p>Django 代码编写是遵照设计原则和模式，鼓励创建可维护和可重复使用的代码。特别是它使用了不要重复自己（DRY）原则，所以没有不必要的重复，减少了代码的数量。Django 还将相关功能分组到可重用的“应用程序”中，并且在较低级别将相关代码分组或模块（ <a href="https://developer.mozilla.org/zh-CN/docs/Web/Apps/Fundamentals/Modern_web_app_architecture/MVC_architecture">模型视图控制器 (MVC)</a> 模式).</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Introduction#%E7%81%B5%E6%B4%BB%E6%80%A7">灵活性</a></p><p>Django 是用 Python 编写的，它在许多平台上运行。这意味着你不受任务特定的服务器平台的限制，并且可以在许多种类的 Linux，Windows 和 Mac OsX 上运行应用程序。此外，Django 得到许多网络托管提供商的好评，他们经常提供特定的基础设施和托管 Django 网站的文档。</p></li></ul><h1 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h1><h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><blockquote><p>Django web 应用程序能运行在几乎任何可以运行 Python3 的计算机上：Windows，Mac OSX，Linux&#x2F;Unix，Solaris，仅举几例。几乎任何计算机都具备在开发期间运行 Django 所需的性能。</p></blockquote><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><blockquote><p>Django 支持四个主要数据库（PostgreSQL，MySQL，Oracle 和 SQLite），还有一些社区库可以为其他流行的 SQL 和 NOSQL 数据库提供不同级别的支持。</p></blockquote><h1 id="安装Django"><a href="#安装Django" class="headerlink" title="安装Django"></a>安装Django</h1><h1 id="初级使用"><a href="#初级使用" class="headerlink" title="初级使用"></a>初级使用</h1><p><a href="https://cloud.tencent.com/developer/article/2396500">Django框架完全指南：从入门到高级应用-腾讯云开发者社区-腾讯云 (tencent.com)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;Django 是一个高级的 Python 网络框架，可以快速开发安全和可维护的网站。由经验丰富的开发者构建，Django 负责处理网站开发中</summary>
      
    
    
    
    <category term="python Django" scheme="http://zdx-1.github.io/categories/python-Django/"/>
    
    
    <category term="python Django" scheme="http://zdx-1.github.io/tags/python-Django/"/>
    
  </entry>
  
  <entry>
    <title>PyQt应用开发</title>
    <link href="http://zdx-1.github.io/2024/07/17/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/"/>
    <id>http://zdx-1.github.io/2024/07/17/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/</id>
    <published>2024-07-16T16:04:11.000Z</published>
    <updated>2024-07-16T16:46:47.647Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1、GUI开发框架简介"><a href="#1、GUI开发框架简介" class="headerlink" title="1、GUI开发框架简介"></a>1、GUI开发框架简介</h1><h2 id="1-1-通用开发框架"><a href="#1-1-通用开发框架" class="headerlink" title="1.1 通用开发框架"></a>1.1 通用开发框架</h2><ul><li><input checked="" disabled="" type="checkbox"> winform：基于C#语言，用于开发桌面应用程序，可以使用NanUI之类的UI库，开发选择多，运行占用内存大</li><li><input checked="" disabled="" type="checkbox"> javafx：基于java，主要用于跨平台桌面程序开发</li><li><input disabled="" type="checkbox"> electorn：基于node-js，跨平台，开发成本低，运行效率低</li><li><input disabled="" type="checkbox"> qt：基于C++，跨平台，效率高，开发成本高</li><li><input disabled="" type="checkbox"> flutter：基于dart语言，谷歌开源移动UI框架，可以快速在iOS和Android上构建高质量的原生用户界面</li></ul><h2 id="1-2-Python方案"><a href="#1-2-Python方案" class="headerlink" title="1.2 Python方案"></a>1.2 Python方案</h2><ul><li>PyQT：PyQt5是Qt v5的Python版本，功能强大复杂，提供QT Designer设计UI （GPL V3协议，开源，商用收费）</li><li>Pyside: PySide2是来自QT for Python项目的官方Python模块 （LGPL协议，闭源商用）</li><li>Tkinter：Python标准库，Tk GUI 工具包的接口 ，布局通过代码实现，简单易用，但开发效率低</li><li>WxPython：开源免费，提供wxFormbuilder，压缩版PyQT</li></ul><p>本文主要详细介绍下PyQt5完整入门教程，包含环境配置，使用Qt Designer设计UI，最终完成一个天气预报的GUI实例开发。</p><p>参考文献：<a href="https://www.cnblogs.com/lovesoo/p/12491361.html">PyQt完整入门教程</a></p><h1 id="2-PyQt环境配置"><a href="#2-PyQt环境配置" class="headerlink" title="2.PyQt环境配置"></a>2.PyQt环境配置</h1><h2 id="2-1-PyQt5-及-pyqt5-tools-安装"><a href="#2-1-PyQt5-及-pyqt5-tools-安装" class="headerlink" title="2.1 PyQt5 及 pyqt5-tools 安装"></a>2.1 PyQt5 及 pyqt5-tools 安装</h2><p>直接pip安装即可：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">pip <span class="hljs-keyword">install </span>PyQt5<br>pip <span class="hljs-keyword">install </span>pyqt5-tools<br></code></pre></td></tr></table></figure><p>建议使用国内源，进行快速安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pyqt5<br>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pyqt5-tools<br></code></pre></td></tr></table></figure><h2 id="2-2-PyCharm配置环境"><a href="#2-2-PyCharm配置环境" class="headerlink" title="2.2 PyCharm配置环境"></a>2.2 PyCharm配置环境</h2><p>启动PyCharm后，新建一个PyQt5空项目后，需要配置Qt Designer、pyuic、pyrcc工具，相关配置方法如下：</p><h3 id="2-2-1-Qt-Designer"><a href="#2-2-1-Qt-Designer" class="headerlink" title="2.2.1 Qt Designer"></a>2.2.1 Qt Designer</h3><p>Qt Designer 是通过拖拽的方式放置控件，并实时查看控件效果进行快速UI设计。</p><p>最终生成.ui文件（实质上是XML格式的文件），可以通过pyuic5工具转换成.py文件。</p><p>在Pycharm中，依次打开 File - Settings - Tools - External Tools，点击 + Create Tool，配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">QtDisigner</span><br><span class="hljs-attr">Program :</span> <span class="hljs-string">E:\pyqy\venv\Lib\site-packages\qt5_applications\Qt\bin\designer.exe</span> <span class="hljs-comment"># 当前designer目录，请根据实际修改</span><br><span class="hljs-attr">Working directory:</span> <span class="hljs-string">$FileDir$</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002351613.png'><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002351613.png" alt="image-20240717002351613"></p><h3 id="2-2-2-Qt-Designer-汉化"><a href="#2-2-2-Qt-Designer-汉化" class="headerlink" title="2.2.2 Qt Designer 汉化"></a><span alt="delete">2.2.2 Qt Designer 汉化</span></h3><p><font title="red">在这里说明一下，新版本的QT Designer不需要汉化，打开默认是中文版本</font></p><p><span alt="delete">默认Qt Designer是英文版的，可以使用翻译文件进行汉化，下载地址：<a href="https://pan.baidu.com/s/1tJ3P2UQEv7OF5ArfKCOsjA">百度网盘</a>，提取码：kxvx</span></p><p><span alt="delete">下载文件 designer_zh_CN.qm后， 拷贝至本地pyqt5_tools的translations文件夹下即可，示例目录：</span></span></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">E:</span>\pyqy\venv\<span class="hljs-keyword">Lib</span>\site-packages\qt5_applications\Qt\bin\translations<br></code></pre></td></tr></table></figure><p>在PyCharm主界面，依次点击 Tools - External Tools - QtDisigner，即可启动中文界面的Qt Disigner</p><p class='item-img' data-src='/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002330263.png'><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002330263.png" alt="image-20240717002330263"></p><h3 id="2-2-3-PyUIC配置"><a href="#2-2-3-PyUIC配置" class="headerlink" title="2.2.3 PyUIC配置"></a>2.2.3 PyUIC配置</h3><p>PyUIC主要是把Qt Designer生成的.ui文件换成.py文件。</p><p>在Pycharm中，依次打开 File - Settings - Tools - External Tools，点击 + Create Tool，配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">PyUIC</span><br><span class="hljs-attr">Program :</span> <span class="hljs-string">C:\Python38\python.exe</span> <span class="hljs-comment"># 当前Python目录，请根据实际修改</span><br><span class="hljs-attr">Arguments:</span> <span class="hljs-string">-m</span> <span class="hljs-string">PyQt5.uic.pyuic</span> <span class="hljs-string">$FileName$</span> <span class="hljs-string">-o</span> <span class="hljs-string">$FileNameWithoutExtension$.py</span><br><span class="hljs-attr">Working directory:</span> <span class="hljs-string">$FileDir$</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002706346.png'><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002706346.png" alt="image-20240717002706346"></p><h3 id="2-2-4-PyRCC配置"><a href="#2-2-4-PyRCC配置" class="headerlink" title="2.2.4 PyRCC配置"></a>2.2.4 PyRCC配置</h3><p>PyRCC主要是把编写的.qrc资源文件换成.py文件。</p><p>在Pycharm中，依次打开 File - Settings - Tools - External Tools，点击 + Create Tool，配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">PyRCC</span><br><span class="hljs-attr">Program :</span> <span class="hljs-string">C:\Python38\Scripts\pyrcc5.exe</span> <span class="hljs-comment"># 当前rcc工具目录，请根据实际修改</span><br><span class="hljs-attr">Arguments:</span> <span class="hljs-string">$FileName$</span> <span class="hljs-string">-o</span> <span class="hljs-string">$FileNameWithoutExtension$_rc.py</span><br><span class="hljs-attr">Working directory:</span> <span class="hljs-string">$FileDir$</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002938184.png'><img src="/./../images/PyQt%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/image-20240717002938184.png" alt="image-20240717002938184"></p><h1 id="3、实例开发"><a href="#3、实例开发" class="headerlink" title="3、实例开发"></a>3、实例开发</h1><p>下面我们以一个简单的城市天气预报为例，演示使用PyQt5开发一个GUI程序的基本流程。</p><h2 id="3-1-获取天气数据"><a href="#3-1-获取天气数据" class="headerlink" title="3.1 获取天气数据"></a>3.1 获取天气数据</h2><p>主要逻辑是通过Http接口调用免费的API接口获取相关城市天气数据，详见<a href="https://www.sojson.com/api/weather.html">天气API说明</a></p><p>如测试一下请求天津的天气，链接为：<a href="http://t.weather.sojson.com/api/weather/city/101030100">http://t.weather.sojson.com/api/weather/city/101030100</a></p><p>返回成功状态（status）为：200 ，失败为非200，返回数据为json数据，直接解析获取即可。</p><h2 id="3-1-设计界面UI"><a href="#3-1-设计界面UI" class="headerlink" title="3.1 设计界面UI"></a>3.1 设计界面UI</h2><p>打开Qt Designer，可参考下图设计Weather.ui:</p><h3 id="3-1-获取天气数据-1"><a href="#3-1-获取天气数据-1" class="headerlink" title="3.1 获取天气数据"></a>3.1 获取天气数据</h3><p>主要逻辑是通过Http接口调用免费的API接口获取相关城市天气数据，详见<a href="https://www.sojson.com/api/weather.html">天气API说明</a></p><p>如测试一下请求天津的天气，链接为：<a href="http://t.weather.sojson.com/api/weather/city/101030100">http://t.weather.sojson.com/api/weather/city/101030100</a></p><p>返回成功状态（status）为：200 ，失败为非200，返回数据为json数据，直接解析获取即可。</p><h3 id="3-1-设计界面UI-1"><a href="#3-1-设计界面UI-1" class="headerlink" title="3.1 设计界面UI"></a>3.1 设计界面UI</h3><p>打开Qt Designer，可参考下图设计Weather.ui:</p><p class='item-img' data-src='https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115431903-1503834053.jpg'><img src="https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115431903-1503834053.jpg" alt="img"></p><p>我们主要用到的控件有Button, GroupBox, Label,ComboBox,TextEdit，同时定义了两个按钮queryBtn及clearBtn，分别用来查询及清空天气数据。我们需要绑定槽函数，方法如下：</p><ol><li>在Qt Designer右下角选择 信号&#x2F;槽编辑器，点击+号新增</li><li>分别选择queryBtn及clearBtn，选择信号 clicked(), 接收者 Dialog 及槽 accept() （我没找到绑定自定义槽函数的方法…）</li></ol><p class='item-img' data-src='https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115403954-1640742746.jpg'><img src="https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115403954-1640742746.jpg" alt="img"></p><p>最后选择保存为 Weather.ui文件。</p><h3 id="3-2-转换-ui文件为-py文件"><a href="#3-2-转换-ui文件为-py文件" class="headerlink" title="3.2 转换.ui文件为.py文件"></a>3.2 转换.ui文件为.py文件</h3><p>在PyCharm中选中Weather.ui文件后，右键选择 External Tools - PyUIC，即可生成Weather.py，实际运行命令如下：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">C:\Python38\python.exe -m PyQt5.uic.pyuic Weather.ui -o Weather.py</span><br></code></pre></td></tr></table></figure><p>其中，我们需要把两个按钮绑定的槽函数：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">self</span>.queryBtn.clicked.connect(Dialog.accept)<br><span class="hljs-built_in">self</span>.clearBtn.clicked.connect(Dialog.accept)<br></code></pre></td></tr></table></figure><p>修改为自定义函数：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">self</span>.queryBtn.clicked.connect(Dialog.queryWeather)<br><span class="hljs-built_in">self</span>.clearBtn.clicked.connect(Dialog.clearText)<br></code></pre></td></tr></table></figure><h3 id="3-3-调用MainDialog"><a href="#3-3-调用MainDialog" class="headerlink" title="3.3 调用MainDialog"></a>3.3 调用MainDialog</h3><p>在MainDialog中调用界面类Ui_Dialog，然后在其中中添加查询天气的业务逻辑代码，这样就做到了界面显示和业务逻辑的分离。</p><p>新增demo.py文件， 在MainDialog类中定义了两个槽函数queryWeather()和clearText(),以便在界面文件Weather.ui中定义的两个按钮(queryBtn 和clearBtn) 触发clicked 信号与这两个槽函数进行绑定。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># coding:utf-8</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> Weather<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QApplication, QDialog<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainDialog</span>(<span class="hljs-title class_ inherited__">QDialog</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, parent=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-built_in">super</span>(QDialog, self).__init__(parent)<br>        self.ui = Weather.Ui_Dialog()<br>        self.ui.setupUi(self)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">queryWeather</span>(<span class="hljs-params">self</span>):<br>        cityName = self.ui.comboBox.currentText()<br>        cityCode = self.getCode(cityName)<br>        <br>        r = requests.get(<span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(cityCode))<br>        <br>        <span class="hljs-built_in">print</span>(r.json())<br>        <br>        <span class="hljs-keyword">if</span> r.json().get(<span class="hljs-string">&#x27;status&#x27;</span>) == <span class="hljs-number">200</span>:<br>            weatherMsg = <span class="hljs-string">&#x27;城市：&#123;&#125;\n日期：&#123;&#125;\n天气：&#123;&#125;\nPM 2.5：&#123;&#125; &#123;&#125;\n温度：&#123;&#125;\n湿度：&#123;&#125;\n风力：&#123;&#125;\n\n&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>                r.json()[<span class="hljs-string">&#x27;cityInfo&#x27;</span>][<span class="hljs-string">&#x27;city&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;ymd&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;type&#x27;</span>],<br>                <span class="hljs-built_in">int</span>(r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;pm25&#x27;</span>]),<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;quality&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;wendu&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;shidu&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;fl&#x27;</span>],<br>                r.json()[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;forecast&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;notice&#x27;</span>],<br>            )<br>        <span class="hljs-keyword">else</span>:<br>            weatherMsg = <span class="hljs-string">&#x27;天气查询失败，请稍后再试！&#x27;</span><br>        <br>        self.ui.textEdit.setText(weatherMsg)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">getCode</span>(<span class="hljs-params">self, cityName</span>):<br>        cityDict = &#123;<span class="hljs-string">&quot;北京&quot;</span>: <span class="hljs-string">&quot;101010100&quot;</span>,<br>                    <span class="hljs-string">&quot;上海&quot;</span>: <span class="hljs-string">&quot;101020100&quot;</span>,<br>                    <span class="hljs-string">&quot;天津&quot;</span>: <span class="hljs-string">&quot;101030100&quot;</span>&#125;<br>        <br>        <span class="hljs-keyword">return</span> cityDict.get(cityName, <span class="hljs-string">&#x27;101010100&#x27;</span>)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">clearText</span>(<span class="hljs-params">self</span>):<br>        self.ui.textEdit.clear()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    myapp = QApplication(sys.argv)<br>    myDlg = MainDialog()<br>    myDlg.show()<br>    sys.exit(myapp.exec_())<br><br></code></pre></td></tr></table></figure><p>最终运行显示效果如下：</p><p class='item-img' data-src='https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115449906-304390105.jpg'><img src="https://img2020.cnblogs.com/blog/445074/202003/445074-20200314115449906-304390105.jpg" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1、GUI开发框架简介&quot;&gt;&lt;a href=&quot;#1、GUI开发框架简介&quot; class=&quot;headerlink&quot; title=&quot;1、GUI开发框架简介&quot;&gt;&lt;/a&gt;1、GUI开发框架简介&lt;/h1&gt;&lt;h2 id=&quot;1-1-通用开发框架&quot;&gt;&lt;a href=&quot;#1-1-通用开</summary>
      
    
    
    
    <category term="python PyQT" scheme="http://zdx-1.github.io/categories/python-PyQT/"/>
    
    
    <category term="python PyQT" scheme="http://zdx-1.github.io/tags/python-PyQT/"/>
    
  </entry>
  
  <entry>
    <title>Flask开发入门</title>
    <link href="http://zdx-1.github.io/2024/07/16/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/"/>
    <id>http://zdx-1.github.io/2024/07/16/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/</id>
    <published>2024-07-16T10:43:18.000Z</published>
    <updated>2024-07-16T15:57:04.023Z</updated>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>对于springboot+vue、asp.net还是其他一些技术，我们实现网页都需要较长的学习时间，因此，为了快速开发，满足需求，我参考Python的Flask编写了这篇文章。</p><p>我使用的是flask+mysql的web网页集成开发。</p><p>参考文献如下：</p><p> Flask<a href="https://flask.palletsprojects.com/en/3.0.x/">官方文档</a></p><p><a href="https://tutorial.helloflask.com/">Flask 入门教程</a></p><p><kbd>既然介绍说完了，那就开始吧。</kbd></p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><blockquote alt="danger"><p>    在学习Flask之前，你需要具备Python和Html的基本知识，如果没有这方面的知识，可以先去学习一下再回到本文章    </p></blockquote><blockquote alt='info'>    <p>        Python的本地环境建议3.9.0以上版本，对于IDE工具，你可以使用PyCharm、VsCode、VisualStudio    </p></blockquote><h3 id="安装Flask"><a href="#安装Flask" class="headerlink" title="安装Flask"></a>安装Flask</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install flask<br></code></pre></td></tr></table></figure><p><font>安装成功后就可以正式写代码了</font></p><h1 id="一、你的第一个Flask应用"><a href="#一、你的第一个Flask应用" class="headerlink" title="一、你的第一个Flask应用"></a>一、你的第一个Flask应用</h1><h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><p><font>我使用的是PyCharm，当然你也可以选择其他IDE工具</font></p><blockquote><p>新建一个项目，然后创建一个基于本地python解释器的虚拟环境（防止污染本地环境）</p></blockquote><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716190809782.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716190809782.png" alt="配置完成的结构"></p><h2 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h2><p><font title="green">在main.py中编写以下代码，这样你就成功拥有了第一个Flask应用</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Welcome to My Watchlist!&#x27;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716195136906.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716195136906.png" alt="运行截图"></p><h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2><p>如上面所见，我们成功初始化了一个flask项目，那么我们都做了什么呢？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br>app = Flask(__name__)<br></code></pre></td></tr></table></figure><blockquote alt='info'>    <p>        我们导入了flask库，实例化了这个类    </p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Welcome !!!&#x27;</span><br></code></pre></td></tr></table></figure><blockquote alt='info'>    <p>        我们创建了一个函数，在这个函数前面，我们使用了@app.route('/')装饰器，它将我们导向了对应的url        我们可以在这里做一些数据的处理，然后你就可以启动服务后访问到它        对于函数名，我们可以自由定义    </p></blockquote><p><font title="red">此处函数的return值可以被html解析成html，也可以是其他数据。</font></p><h3 id="装饰器的一些使用原则"><a href="#装饰器的一些使用原则" class="headerlink" title="装饰器的一些使用原则"></a>装饰器的一些使用原则</h3><blockquote><p>  关于@app.route(‘&#x2F;‘)<span alt="blink">URL规则</span></p></blockquote><h3 id="1-route内部的url都可以运行在部署的端口上，其编写规则是以斜线-作为开头。"><a href="#1-route内部的url都可以运行在部署的端口上，其编写规则是以斜线-作为开头。" class="headerlink" title="1.route内部的url都可以运行在部署的端口上，其编写规则是以斜线 &#x2F;作为开头。"></a>1.route内部的url都可以运行在部署的端口上，其<font title="red">编写规则是以斜线 &#x2F;作为开头</font>。</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Welcome !!!&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="2-对于一个函数，可以附加多个装饰器-app-route-‘-‘-。"><a href="#2-对于一个函数，可以附加多个装饰器-app-route-‘-‘-。" class="headerlink" title="2.对于一个函数，可以附加多个装饰器@app.route(‘&#x2F;‘)。"></a>2.对于一个函数，可以附加多个装饰器@app.route(‘&#x2F;‘)。</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span></span>)</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/admin&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">open</span>(html_path+<span class="hljs-string">&quot;login.html&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>).read()<br></code></pre></td></tr></table></figure><h3 id="3-对于-app-route-‘-‘-，我们还可以定义变量。"><a href="#3-对于-app-route-‘-‘-，我们还可以定义变量。" class="headerlink" title="3.对于@app.route(‘&#x2F;‘)，我们还可以定义变量。"></a>3.对于@app.route(‘&#x2F;‘)，我们还可以定义变量。</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_page</span>(<span class="hljs-params">username</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;欢迎你&#x27;</span> + username<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716203426816.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716203426816.png" alt="运行截图"></p><blockquote><p>用户输入的数据会包含恶意代码，所以不能直接作为响应返回，需要使用 MarkupSafe（Flask 的依赖之一）提供的 <code>escape()</code> 函数对 <code>name</code> 变量进行转义处理，比如把 <code>&lt;</code> 转换成 <code>&lt;</code>。这样在返回响应时浏览器就不会把它们当做代码执行。</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> markupsafe <span class="hljs-keyword">import</span> escape<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_page</span>(<span class="hljs-params">username</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;User: <span class="hljs-subst">&#123;escape(username)&#125;</span>&#x27;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716204946382.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716204946382.png" alt="运行截图"></p><h3 id="视图函数的一些技巧"><a href="#视图函数的一些技巧" class="headerlink" title="视图函数的一些技巧"></a>视图函数的一些技巧</h3><p><kbd>我们可以通过url查看使用哪个函数</kbd></p><p>作为代表某个路由的端点（endpoint），同时用来生成视图函数对应的 URL。</p><p>对于程序内的 URL,Flask 提供了一个 <code>url_for</code> 函数来生成 URL，它接受的第一个参数就是端点值，默认为视图函数的名称</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> url_for<br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/test&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_url_for</span>():<br>    <span class="hljs-comment"># 下面是一些调用示例（请访问 http://localhost:5000/test 后在命令行窗口查看输出的 URL）：</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;login&#x27;</span>))  <span class="hljs-comment"># 生成 login 视图函数对应的 URL，将会输出：/admin</span><br>    <span class="hljs-comment"># 注意下面两个调用是如何生成包含 URL 变量的 URL 的</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;user_page&#x27;</span>, username=<span class="hljs-string">&#x27;greyli&#x27;</span>))  <span class="hljs-comment"># 输出：/user/greyli</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;user_page&#x27;</span>, username=<span class="hljs-string">&#x27;peter&#x27;</span>))  <span class="hljs-comment"># 输出：/user/peter</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;test_url_for&#x27;</span>))  <span class="hljs-comment"># 输出：/test</span><br>    <span class="hljs-comment"># 下面这个调用传入了多余的关键字参数，它们会被作为查询字符串附加到 URL 后面。</span><br>    <span class="hljs-built_in">print</span>(url_for(<span class="hljs-string">&#x27;test_url_for&#x27;</span>, num=<span class="hljs-number">2</span>))  <span class="hljs-comment"># 输出：/test?num=2</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Test page&#x27;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716205528576.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716205528576.png" alt="运行截图"></p><h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><p>我导入一个html文件，然后返回这个html页面</p><blockquote><p>main.py</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os.path<br><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br>html_path = os.path.dirname(__file__) + <span class="hljs-string">&quot;\\views\\&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">open</span>(html_path+<span class="hljs-string">&quot;login.html&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>).read()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><blockquote><p>login.html</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- https://codepen.io/danielkvist/pen/LYNVyPL --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-pseudo">:root</span> &#123;</span><br><span class="language-css">      <span class="hljs-comment">/* COLORS */</span></span><br><span class="language-css">      <span class="hljs-attr">--white</span>: <span class="hljs-number">#e9e9e9</span>;</span><br><span class="language-css">      <span class="hljs-attr">--gray</span>: <span class="hljs-number">#333</span>;</span><br><span class="language-css">      <span class="hljs-attr">--blue</span>: <span class="hljs-number">#0367a6</span>;</span><br><span class="language-css">      <span class="hljs-attr">--lightblue</span>: <span class="hljs-number">#008997</span>;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-comment">/* RADII */</span></span><br><span class="language-css">      <span class="hljs-attr">--button-radius</span>: <span class="hljs-number">0.7rem</span>;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-comment">/* SIZES */</span></span><br><span class="language-css">      <span class="hljs-attr">--max-width</span>: <span class="hljs-number">758px</span>;</span><br><span class="language-css">      <span class="hljs-attr">--max-height</span>: <span class="hljs-number">420px</span>;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&quot;Segoe UI&quot;</span>, Roboto, Oxygen,</span><br><span class="language-css">        Ubuntu, Cantarell, <span class="hljs-string">&quot;Open Sans&quot;</span>, <span class="hljs-string">&quot;Helvetica Neue&quot;</span>, sans-serif;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        <span class="hljs-comment">/* 决定背景图像的位置是在视口内固定，或者随着包含它的区块滚动。 */</span></span><br><span class="language-css">      <span class="hljs-comment">/* https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-attachment */</span></span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--white) <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;https://res.cloudinary.com/dbhnlktrv/image/upload/v1599997626/background_oeuhe7.jpg&quot;</span>) no-repeat fixed center;</span><br><span class="language-css">        <span class="hljs-attribute">background-size</span>: cover;</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: grid;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span><br><span class="language-css">      place-items: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.form__title</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">300</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1.25rem</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.link</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--gray);</span><br><span class="language-css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">1.5rem</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">text-decoration</span>: none;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--white);</span><br><span class="language-css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--button-radius);</span><br><span class="language-css">      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.9rem</span> <span class="hljs-number">1.7rem</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.25</span>),</span><br><span class="language-css">        <span class="hljs-number">0</span> <span class="hljs-number">0.7rem</span> <span class="hljs-number">0.7rem</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.22</span>);</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--max-height);</span><br><span class="language-css">      <span class="hljs-attribute">max-width</span>: <span class="hljs-built_in">var</span>(--max-width);</span><br><span class="language-css">      <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container__form</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container--signin</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.container--signin</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container--signup</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.container--signup</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">animation</span>: show <span class="hljs-number">0.6s</span>;</span><br><span class="language-css">      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100%</span>);</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">5</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container__overlay</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.container__overlay</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">100%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--lightblue) <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;https://cdn.pixabay.com/photo/2018/08/14/13/23/ocean-3605547_1280.jpg&quot;</span>) no-repeat fixed center;</span><br><span class="language-css">        <span class="hljs-attribute">background-size</span>: cover;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">left</span>: -<span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">200%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.overlay</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">50%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay__panel</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">flex-direction</span>: column;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">      <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span> ease-in-out;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay--left</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">20%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.overlay--left</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.overlay--right</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span><span class="hljs-selector-class">.right-panel-active</span> <span class="hljs-selector-class">.overlay--right</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">20%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--blue);</span><br><span class="language-css">      <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-built_in">var</span>(--blue) <span class="hljs-number">0%</span>, <span class="hljs-built_in">var</span>(--lightblue) <span class="hljs-number">74%</span>);</span><br><span class="language-css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--blue);</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--white);</span><br><span class="language-css">      <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">font-weight</span>: bold;</span><br><span class="language-css">      <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.1rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.9rem</span> <span class="hljs-number">4rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">text-transform</span>: uppercase;</span><br><span class="language-css">      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">80ms</span> ease-in;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.form</span>&gt;<span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1.5rem</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:active</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.95</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">outline</span>: none;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.form</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--white);</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">flex-direction</span>: column;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">3rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">      <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.input</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">      <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.9rem</span> <span class="hljs-number">0.9rem</span>;</span><br><span class="language-css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0.5rem</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-keyword">@keyframes</span> show &#123;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-number">0%</span>,</span><br><span class="language-css">      <span class="hljs-number">49.99%</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css"></span><br><span class="language-css">      <span class="hljs-number">50%</span>,</span><br><span class="language-css">      <span class="hljs-number">100%</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">5</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container right-panel-active&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Sign Up --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container__form container--signup&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;form1&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form__title&quot;</span>&gt;</span>Sign Up<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Email&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Sign Up<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- Sign In --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container__form container--signin&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;form2&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form__title&quot;</span>&gt;</span>Sign In<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Email&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;link&quot;</span>&gt;</span>Forgot your password?<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Sign In<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- Overlay --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container__overlay&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;overlay&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;overlay__panel overlay--left&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;signIn&quot;</span>&gt;</span>Sign In<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;overlay__panel overlay--right&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;signUp&quot;</span>&gt;</span>Sign Up<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> signInBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;signIn&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> signUpBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;signUp&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> fistForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;form1&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> secondForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;form2&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.container&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    signInBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      container.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">&quot;right-panel-active&quot;</span>);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    signUpBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      container.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;right-panel-active&quot;</span>);</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    fistForm.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;submit&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-title function_">preventDefault</span>());</span><br><span class="language-javascript">    secondForm.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;submit&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-title function_">preventDefault</span>());</span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>运行截图</p></blockquote><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716210315287.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716210315287.png" alt="初始化的登录页面"></p><h1 id="二、HTML模板"><a href="#二、HTML模板" class="headerlink" title="二、HTML模板"></a>二、HTML模板</h1><p>在一般的 Web 程序里，访问一个地址通常会返回一个包含各类信息的 HTML 页面。</p><p>因为我们的程序是动态的，页面中的某些信息需要根据不同的情况来进行调整，比如对登录和未登录用户显示不同的信息，所以页面需要在用户访问时根据程序逻辑动态生成。</p><p>我们把包含变量和运算逻辑的 HTML 或其他格式的文本叫做<strong>模板</strong>，执行这些变量替换和逻辑计算工作的过程被称为<strong>渲染</strong>，这个工作我们使用模板渲染引擎——Jinja2 来完成。</p><p>通常来讲，会新建一个templates目录来存放模板，static目录存放静态文件。</p><h2 id="模板基本语法"><a href="#模板基本语法" class="headerlink" title="模板基本语法"></a>模板基本语法</h2><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; username &#125;&#125;</span><span class="language-xml">的个人主页<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> bio %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; bio &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>  </span><span class="hljs-comment">&#123;# 这里的缩进只是为了可读性，不是必须的 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">else</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>自我介绍为空。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml">  </span><span class="hljs-comment">&#123;# 大部分 Jinja 语句都需要声明关闭 #&#125;</span><br></code></pre></td></tr></table></figure><p>Jinja2 的语法和 Python 大致相同，你在后面会陆续接触到一些常见的用法。在模板里，你需要添加特定的定界符将 Jinja2 语句和变量标记出来，下面是三种常用的定界符：</p><ul><li><code>&#123;&#123; ... &#125;&#125;</code> 用来标记变量。</li><li><code>&#123;% ... %&#125;</code> 用来标记语句，比如 if 语句，for 语句等。</li><li>&#96;&#96; 用来写注释。</li></ul><h2 id="编写主页模板"><a href="#编写主页模板" class="headerlink" title="编写主页模板"></a>编写主页模板</h2><p>我们先在 templates 目录下创建一个 index.html 文件，作为主页模板。主页需要显示电影条目列表和个人信息，代码如下所示：</p><p><em>templates&#x2F;index.html：主页模板</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>&#123;&#123; name &#125;&#125;&#x27;s Watchlist<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123; name &#125;&#125;&#x27;s Watchlist<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    &#123;# 使用 length 过滤器获取 movies 变量的长度 #&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; movies|length &#125;&#125; Titles<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>        &#123;% for movie in movies %&#125;  &#123;# 迭代 movies 变量 #&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>&#123;&#123; movie.title &#125;&#125; - &#123;&#123; movie.year &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>  &#123;# 等同于 movie[&#x27;title&#x27;] #&#125;<br>        &#123;% endfor %&#125;  &#123;# 使用 endfor 标签结束 for 语句 #&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span><span class="hljs-symbol">&amp;copy;</span> 2018 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://helloflask.com/book/3&quot;</span>&gt;</span>HelloFlask<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>为了方便对变量进行处理，Jinja2 提供了一些过滤器，语法形式如下：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">变量</span>|过滤器 &#125;&#125;</span><br></code></pre></td></tr></table></figure><p>左侧是变量，右侧是过滤器名。比如，上面的模板里使用 <code>length</code> 过滤器来获取 <code>movies</code> 的长度，类似 Python 里的 <code>len()</code> 函数。</p><blockquote><p><strong>提示</strong> 访问 <a href="https://jinja.palletsprojects.com/en/3.0.x/templates/#builtin-filters">https://jinja.palletsprojects.com/en/3.0.x/templates/#builtin-filters</a> 查看所有可用的过滤器。</p></blockquote><h2 id="准备虚拟数据"><a href="#准备虚拟数据" class="headerlink" title="准备虚拟数据"></a>准备虚拟数据</h2><p>为了模拟页面渲染，我们需要先创建一些虚拟数据，用来填充页面内容：</p><p><em>app.py：定义虚拟数据</em></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py">name = <span class="hljs-string">&#x27;Grey Li&#x27;</span><br>movies = [<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;My Neighbor Totoro&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1988&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Dead Poets Society&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1989&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;A Perfect World&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1993&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Leon&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1994&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Mahjong&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1996&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Swallowtail Butterfly&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1996&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;King of Comedy&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1999&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Devils on the Doorstep&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;1999&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;WALL-E&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;2008&#x27;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;The Pork of Music&#x27;</span>, <span class="hljs-string">&#x27;year&#x27;</span>: <span class="hljs-string">&#x27;2012&#x27;</span>&#125;,<br>]<br></code></pre></td></tr></table></figure><h2 id="渲染主页模板"><a href="#渲染主页模板" class="headerlink" title="渲染主页模板"></a>渲染主页模板</h2><p>使用 <code>render_template()</code> 函数可以把模板渲染出来，必须传入的参数为模板文件名（相对于 templates 根目录的文件路径），这里即 <code>&#39;index.html&#39;</code>。为了让模板正确渲染，我们还要把模板内部使用的变量通过关键字参数传入这个函数，如下所示：</p><p><em>app.py：返回渲染好的模板作为响应</em></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><br><span class="hljs-comment"># ...</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>, name=name, movies=movies)<br></code></pre></td></tr></table></figure><p>为了更好的表示这个视图函数的作用，我们把原来的函数名 <code>login</code> 改为 <code>index</code>，意思是“索引”，即主页。</p><p>在传入 <code>render_template()</code> 函数的关键字参数中，左边的 <code>movies</code> 是模板中使用的变量名称，右边的 <code>movies</code> 则是该变量指向的实际对象。这里传入模板的 <code>name</code> 是字符串，<code>movies</code> 是列表，但能够在模板里使用的不只这两种 Python 数据结构，你也可以传入元组、字典、函数等。</p><p><code>render_template()</code> 函数在调用时会识别并执行 index.html 里所有的 Jinja2 语句，返回渲染好的模板内容。在返回的页面中，变量会被替换为实际的值（包括定界符），语句（及定界符）则会在执行后被移除（注释也会一并移除）。</p><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716214913074.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716214913074.png" alt="运行截图"></p><h1 id="三、静态文件"><a href="#三、静态文件" class="headerlink" title="三、静态文件"></a>三、静态文件</h1><p>静态文件（static files）和我们的模板概念相反，指的是内容不需要动态生成的文件。比如图片、CSS 文件和 JavaScript 脚本等。</p><p>在 Flask 中，我们需要创建一个 static 文件夹来保存静态文件，它应该和程序模块、templates 文件夹在同一目录层级。</p><h2 id="生成静态文件-URL"><a href="#生成静态文件-URL" class="headerlink" title="生成静态文件 URL"></a>生成静态文件 URL</h2><p>在 HTML 文件里，引入这些静态文件需要给出资源所在的 URL。为了更加灵活，这些文件的 URL 可以通过 Flask 提供的 <code>url_for()</code> 函数来生成。</p><p>举例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;foo.jpg&#x27;) &#125;&#125;&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p><font title="yellow">在 Python 脚本里，<code>url_for()</code> 函数需要从 <code>flask</code> 包中导入，而在模板中则可以直接使用，因为 Flask 把一些常用的函数和对象添加到了模板上下文（环境）里。</font></p><h2 id="添加-Favicon"><a href="#添加-Favicon" class="headerlink" title="添加 Favicon"></a>添加 Favicon</h2><p>Favicon（favourite icon） 是显示在标签页和书签栏的网站头像。你需要准备一个 ICO、PNG 或 GIF 格式的图片，大小一般为 16×16、32×32、48×48 或 64×64 像素。把这个图片放到 static 目录下，然后像下面这样在 HTML 模板里引入它：</p><p><em>templates&#x2F;index.html：引入 Favicon</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;favicon.ico&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>保存后刷新页面，即可在浏览器标签页上看到这个图片。</p><h2 id="添加图片"><a href="#添加图片" class="headerlink" title="添加图片"></a>添加图片</h2><p>为了让页面不那么单调，我们来添加两个图片：一个是显示在页面标题旁边的头像，另一个是显示在页面底部的龙猫动图。我们在 static 目录下面创建一个子文件夹 images，把这两个图片都放到这个文件夹里：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">cd</span> <span class="hljs-keyword">static</span><br><span class="hljs-variable">$</span> mkdir images<br></code></pre></td></tr></table></figure><p>创建子文件夹并不是必须的，这里只是为了更好的组织同类文件。同样的，如果你有多个 CSS 文件，也可以创建一个 css 文件夹来组织他们。下面我们在页面模板中添加这两个图片，注意填写正确的文件路径：</p><p><em>templates&#x2F;index.html：添加图片</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/avatar.png&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">name</span> &#125;&#125;</span><span class="language-xml">&#x27;s Watchlist</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Walking Totoro&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/totoro.gif&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p><strong>提示</strong> 这两张图片你可以自己替换为任意的图片（注意更新文件名），也可以在示例程序的 <a href="https://github.com/helloflask/watchlist/tree/master/watchlist/static/images">GitHub 仓库</a>下载。</p></blockquote><h2 id="添加-CSS"><a href="#添加-CSS" class="headerlink" title="添加 CSS"></a>添加 CSS</h2><p>虽然添加了图片，但页面还是非常简陋，因为我们还没有添加 CSS 定义。下面在 static 目录下创建一个 CSS 文件 style.css，内容如下：</p><p><em>static&#x2F;style.css：定义页面样式</em></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 页面整体 */</span><br><span class="hljs-selector-tag">body</span> &#123;<br>    <span class="hljs-attribute">margin</span>: auto;<br>    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">580px</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>    <span class="hljs-attribute">font-family</span>: Helvetica, Arial, sans-serif;<br>&#125;<br><br><span class="hljs-comment">/* 页脚 */</span><br><span class="hljs-selector-tag">footer</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#888</span>;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">15px</span>;<br>    <span class="hljs-attribute">text-align</span>: center;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><br><span class="hljs-comment">/* 头像 */</span><br><span class="hljs-selector-class">.avatar</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;<br>&#125;<br><br><span class="hljs-comment">/* 电影列表 */</span><br><span class="hljs-selector-class">.movie-list</span> &#123;<br>    <span class="hljs-attribute">list-style-type</span>: none;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">5px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.16</span>), <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.12</span>);<br>&#125;<br><br><span class="hljs-selector-class">.movie-list</span> <span class="hljs-selector-tag">li</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">24px</span>;<br>    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<br>&#125;<br><br><span class="hljs-selector-class">.movie-list</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:last-child</span> &#123;<br>    <span class="hljs-attribute">border-bottom</span>:none;<br>&#125;<br><br><span class="hljs-selector-class">.movie-list</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;<br>&#125;<br><br><span class="hljs-comment">/* 龙猫图片 */</span><br><span class="hljs-selector-class">.totoro</span> &#123;<br>    <span class="hljs-attribute">display</span>: block;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>接着在页面的 <code>&lt;head&gt;</code> 标签内引入这个 CSS 文件：</p><p><em>templates&#x2F;index.html：引入 CSS 文件</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;style.css&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p><strong>提示</strong> 当你把 CSS 写到单独的文件后，浏览器获取到这个文件后会对其进行缓存（其他静态文件同理，比如 JavaScript 文件）。Flask 从 2.0 版本开始支持自动重载静态文件的变化，如果你使用的仍然是旧版本的 Flask，那么每当你对 CSS 文件的内容进行更新后，都需要使用下面的快捷键清除缓存：</p><ul><li>Google Chrome（Mac）：Command + Shift + R</li><li>Google Chrome（Windows &amp; Linux）：Ctrl + F5</li><li>Firefox（Mac）：Command + Shift + R</li><li>Firefox（Windows &amp; Linux）：Ctrl + F5</li><li>Safari：Command + Option + R</li></ul></blockquote><p>最后要为对应的元素设置 <code>class</code> 属性值，以便和对应的 CSS 定义关联起来：</p><p><em>templates&#x2F;index.html：添加 class 属性</em></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Avatar&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/avatar.png&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">name</span> &#125;&#125;</span><span class="language-xml">&#x27;s Watchlist</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;movie-list&quot;</span>&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Walking Totoro&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;totoro&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">url_for</span>(<span class="hljs-name">&#x27;static&#x27;</span>, <span class="hljs-attr">filename</span>=<span class="hljs-string">&#x27;images/totoro.gif&#x27;</span>) &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716222523545.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716222523545.png" alt="运行截图"></p><table><thead><tr><th class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/totoro.gif'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/totoro.gif" alt="totoro"></th><th class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/avatar.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/avatar.png" alt="avatar"></th></tr></thead></table><h1 id="四、数据库"><a href="#四、数据库" class="headerlink" title="四、数据库"></a>四、数据库</h1><h2 id="使用-SQLAlchemy-操作数据库"><a href="#使用-SQLAlchemy-操作数据库" class="headerlink" title="使用 SQLAlchemy 操作数据库"></a>使用 SQLAlchemy 操作数据库</h2><p>为了简化数据库操作，我们将使用 <a href="https://www.sqlalchemy.org/">SQLAlchemy</a>——一个 Python 数据库工具（ORM，即对象关系映射）。借助 SQLAlchemy，你可以通过定义 Python 类来表示数据库里的一张表（类属性表示表中的字段 &#x2F; 列），通过对这个类进行各种操作来代替写 SQL 语句。这个类我们称之为<strong>模型类</strong>，类中的属性我们将称之为<strong>字段</strong>。</p><p>Flask 有大量的第三方扩展，这些扩展可以简化和第三方库的集成工作。我们下面将使用一个叫做 <a href="https://flask-sqlalchemy.palletsprojects.com/en/2.x">Flask-SQLAlchemy</a> 的扩展来集成 SQLAlchemy。</p><p>但是我的开发更喜欢用MySQL数据库或者SqlServer，这里不对这个数据库进行过多介绍。</p><h2 id="使用MySQL数据库"><a href="#使用MySQL数据库" class="headerlink" title="使用MySQL数据库"></a>使用MySQL数据库</h2><p><kbd>在python中，可以使用pymysql库进行数据库操作</kbd></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 安装pymysql</span><br>pip install pymysql<br></code></pre></td></tr></table></figure><p>在mysql数据库中新建</p><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716235643515.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716235643515.png" alt="image-20240716235643515"></p><p>编写一个mysql配置类</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> pymysql<br><span class="hljs-keyword">from</span> pymysql <span class="hljs-keyword">import</span> cursors<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DbConfig</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.conn = pymysql.connect(<br>            host=<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,  <span class="hljs-comment"># 主机名（或IP地址）</span><br>            port=<span class="hljs-number">3306</span>,  <span class="hljs-comment"># 端口号，默认为3306</span><br>            user=<span class="hljs-string">&#x27;root&#x27;</span>,  <span class="hljs-comment"># 用户名</span><br>            password=<span class="hljs-string">&#x27;123456&#x27;</span>,  <span class="hljs-comment"># 密码</span><br>            charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>,  <span class="hljs-comment"># 设置字符编码</span><br>            autocommit=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># 自动提交更改</span><br>            database=<span class="hljs-string">&#x27;flask_study&#x27;</span>,  <span class="hljs-comment"># 数据库名称</span><br>            cursorclass=cursors.DictCursor  <span class="hljs-comment"># 转换成字典格式输出</span><br>        )<br>        self.cursor = self.conn.cursor()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findUser</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from user where id=1&#x27;</span>)<br>        users = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> users<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findMovies</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from movies&#x27;</span>)<br>        movies = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> movies<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__del__</span>(<span class="hljs-params">self</span>):<br>        self.cursor.close()<br>        self.conn.close()<br></code></pre></td></tr></table></figure><p>在使用数据的时候可以像下面这样写</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">name = DbConfig().findUser()[<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;username&#x27;</span>]<br>movies = DbConfig().findMovies()<br></code></pre></td></tr></table></figure><p>完整的代码：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> pymysql<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><span class="hljs-keyword">from</span> pymysql <span class="hljs-keyword">import</span> cursors<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DbConfig</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.conn = pymysql.connect(<br>            host=<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,  <span class="hljs-comment"># 主机名（或IP地址）</span><br>            port=<span class="hljs-number">3306</span>,  <span class="hljs-comment"># 端口号，默认为3306</span><br>            user=<span class="hljs-string">&#x27;root&#x27;</span>,  <span class="hljs-comment"># 用户名</span><br>            password=<span class="hljs-string">&#x27;123456&#x27;</span>,  <span class="hljs-comment"># 密码</span><br>            charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>,  <span class="hljs-comment"># 设置字符编码</span><br>            autocommit=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># 自动提交更改</span><br>            database=<span class="hljs-string">&#x27;flask_study&#x27;</span>,  <span class="hljs-comment"># 数据库名称</span><br>            cursorclass=cursors.DictCursor  <span class="hljs-comment"># 转换成字典格式输出</span><br>        )<br>        self.cursor = self.conn.cursor()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findUser</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from user where id=1&#x27;</span>)<br>        users = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> users<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findMovies</span>(<span class="hljs-params">self</span>):<br>        self.cursor.execute(<span class="hljs-string">&#x27;select * from movies&#x27;</span>)<br>        movies = self.cursor.fetchall()<br>        <span class="hljs-keyword">return</span> movies<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__del__</span>(<span class="hljs-params">self</span>):<br>        self.cursor.close()<br>        self.conn.close()<br><br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    name = DbConfig().findUser()[<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;username&#x27;</span>]<br>    movies = DbConfig().findMovies()<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>, name=name, movies=movies)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716235252644.png'><img src="/./../images/Flask%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/image-20240716235252644.png" alt="运行截图"></p><p>大体上就是这个样子了</p><p>这种开发满足了基本需求，开发周期短，但是想要好看的页面，可以使用json数据做一个前后端分离或者整合的项目。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;对于springboot+vue、asp.net还是其他一些技术，我们实现网页都需要较长的学习时间，因此，为了快速开发，满足需求，我参考Py</summary>
      
    
    
    
    <category term="python Flask" scheme="http://zdx-1.github.io/categories/python-Flask/"/>
    
    
    <category term="python Flask" scheme="http://zdx-1.github.io/tags/python-Flask/"/>
    
  </entry>
  
  <entry>
    <title>python网络爬虫</title>
    <link href="http://zdx-1.github.io/2024/07/16/python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"/>
    <id>http://zdx-1.github.io/2024/07/16/python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/</id>
    <published>2024-07-16T07:44:56.000Z</published>
    <updated>2024-07-16T10:16:57.584Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第1章-爬虫介绍"><a href="#第1章-爬虫介绍" class="headerlink" title="第1章 爬虫介绍"></a>第1章 爬虫介绍</h1><h2 id="爬虫用途"><a href="#爬虫用途" class="headerlink" title="爬虫用途"></a>爬虫用途</h2><p class='item-img' data-src='/./../images/python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/image-20240716154602815.png'><img src="/./../images/python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/image-20240716154602815.png" alt="image-20240716154602815"></p><h2 id="爬虫分类"><a href="#爬虫分类" class="headerlink" title="爬虫分类"></a>爬虫分类</h2><h3 id="按照使用场景："><a href="#按照使用场景：" class="headerlink" title="按照使用场景："></a>按照使用场景：</h3><h4 id="通用爬虫"><a href="#通用爬虫" class="headerlink" title="通用爬虫"></a>通用爬虫</h4><h5 id="全网爬虫"><a href="#全网爬虫" class="headerlink" title="全网爬虫"></a>全网爬虫</h5><p>从一些种子url扩展到整个WEB爬虫，是搜索引擎的重要组成部分</p><h5 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h5><ul><li>爬取范围广</li><li>对硬件要求高（CPU,存储空间）</li><li>更新频率低</li></ul><h4 id="聚焦爬虫"><a href="#聚焦爬虫" class="headerlink" title="聚焦爬虫"></a>聚焦爬虫</h4><h5 id="主题爬虫"><a href="#主题爬虫" class="headerlink" title="主题爬虫"></a>主题爬虫</h5><p>只爬取相关主题页面</p><h5 id="特点：-1"><a href="#特点：-1" class="headerlink" title="特点："></a>特点：</h5><ul><li>爬虫范围窄</li><li>对硬件要求低</li><li>更新频率快</li></ul><h3 id="按爬取方式："><a href="#按爬取方式：" class="headerlink" title="按爬取方式："></a>按爬取方式：</h3><h4 id="累积式爬虫"><a href="#累积式爬虫" class="headerlink" title="累积式爬虫"></a>累积式爬虫</h4><p>从某个时间开始，遍历所有的能够爬取的URL，爬取相关数据，只要硬件和时间允许就可以累计大量数据</p><p>特点</p><ul><li>爬取页面比较多</li><li>对硬件要求高</li><li>数据更新慢</li></ul><h4 id="增量式爬虫"><a href="#增量式爬虫" class="headerlink" title="增量式爬虫"></a>增量式爬虫</h4><p>在有客观数据基础上，只能爬取没有的数据或者更新的数据，而对于没有变化的数据就不在爬取了</p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul><li>爬取页面比较少</li><li>对硬件要求不高</li><li>数据更新比较快</li></ul><h3 id="按爬取页面存在的方式："><a href="#按爬取页面存在的方式：" class="headerlink" title="按爬取页面存在的方式："></a>按爬取页面存在的方式：</h3><h4 id="表层网络爬虫"><a href="#表层网络爬虫" class="headerlink" title="表层网络爬虫"></a>表层网络爬虫</h4><h5 id="表层页面"><a href="#表层页面" class="headerlink" title="表层页面"></a>表层页面</h5><ul><li>通过url就能直接获取的HTML页面</li></ul><h5 id="爬取表层页面的爬虫"><a href="#爬取表层页面的爬虫" class="headerlink" title="爬取表层页面的爬虫"></a>爬取表层页面的爬虫</h5><h4 id="深层网络爬虫"><a href="#深层网络爬虫" class="headerlink" title="深层网络爬虫"></a>深层网络爬虫</h4><h5 id="深层网页"><a href="#深层网页" class="headerlink" title="深层网页"></a>深层网页</h5><ul><li>通过AJAX请求才能获取数据，动态生成的数据</li><li>登录之后才能访问的数据</li></ul><h5 id="爬取深层网页的爬虫"><a href="#爬取深层网页的爬虫" class="headerlink" title="爬取深层网页的爬虫"></a>爬取深层网页的爬虫</h5><h1 id="第2章-爬虫的实现原理和技术"><a href="#第2章-爬虫的实现原理和技术" class="headerlink" title="第2章 爬虫的实现原理和技术"></a>第2章 爬虫的实现原理和技术</h1><h1 id="第3章-网页请求原理"><a href="#第3章-网页请求原理" class="headerlink" title="第3章 网页请求原理"></a>第3章 网页请求原理</h1><h1 id="第4章-抓取网页数据"><a href="#第4章-抓取网页数据" class="headerlink" title="第4章 抓取网页数据"></a>第4章 抓取网页数据</h1><h1 id="第5章-数据解析"><a href="#第5章-数据解析" class="headerlink" title="第5章 数据解析"></a>第5章 数据解析</h1><h1 id="第6章-并发下载"><a href="#第6章-并发下载" class="headerlink" title="第6章 并发下载"></a>第6章 并发下载</h1><h1 id="第7章-抓取动态内容"><a href="#第7章-抓取动态内容" class="headerlink" title="第7章 抓取动态内容"></a>第7章 抓取动态内容</h1><h1 id="第8章-图像识别与文字处理"><a href="#第8章-图像识别与文字处理" class="headerlink" title="第8章 图像识别与文字处理"></a>第8章 图像识别与文字处理</h1><h1 id="第9章-存储爬虫数据"><a href="#第9章-存储爬虫数据" class="headerlink" title="第9章 存储爬虫数据"></a>第9章 存储爬虫数据</h1><h1 id="第10章-初识爬虫框架Scrapy"><a href="#第10章-初识爬虫框架Scrapy" class="headerlink" title="第10章 初识爬虫框架Scrapy"></a>第10章 初识爬虫框架Scrapy</h1><h1 id="第11章-Scrapy终端与核心组件"><a href="#第11章-Scrapy终端与核心组件" class="headerlink" title="第11章 Scrapy终端与核心组件"></a>第11章 Scrapy终端与核心组件</h1><h1 id="第12章-自动抓取网页的爬虫CrawlSpider"><a href="#第12章-自动抓取网页的爬虫CrawlSpider" class="headerlink" title="第12章 自动抓取网页的爬虫CrawlSpider"></a>第12章 自动抓取网页的爬虫CrawlSpider</h1><h1 id="第13章-Scrapy-Redis分布式爬虫"><a href="#第13章-Scrapy-Redis分布式爬虫" class="headerlink" title="第13章 Scrapy-Redis分布式爬虫"></a>第13章 Scrapy-Redis分布式爬虫</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第1章-爬虫介绍&quot;&gt;&lt;a href=&quot;#第1章-爬虫介绍&quot; class=&quot;headerlink&quot; title=&quot;第1章 爬虫介绍&quot;&gt;&lt;/a&gt;第1章 爬虫介绍&lt;/h1&gt;&lt;h2 id=&quot;爬虫用途&quot;&gt;&lt;a href=&quot;#爬虫用途&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="python爬虫" scheme="http://zdx-1.github.io/categories/python%E7%88%AC%E8%99%AB/"/>
    
    
    <category term="python爬虫" scheme="http://zdx-1.github.io/tags/python%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>NanUI使用文档</title>
    <link href="http://zdx-1.github.io/2024/07/11/NanUI%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/"/>
    <id>http://zdx-1.github.io/2024/07/11/NanUI%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/</id>
    <published>2024-07-11T09:43:37.000Z</published>
    <updated>2024-07-11T10:12:59.721Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NanUI简介"><a href="#NanUI简介" class="headerlink" title="NanUI简介"></a>NanUI简介</h1><p>NanUI是WinForm UI库的一种，它可以让应用程序里面内嵌html+css写的页面，可以样式更加多样化。</p><p>项目库地址：<a href="https://gitee.com/dotnetchina/NanUI.git">https://gitee.com/dotnetchina/NanUI.git</a></p><h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><ul><li><a href="https://gitee.com/dotnetchina/NanUI/blob/master/examples/MinimalWinFormiumApp">Minimal WinFormium App</a> - 介绍 WinFormium 的基本用法。</li></ul><h2 id="🔗-第三方库引用和工具集"><a href="#🔗-第三方库引用和工具集" class="headerlink" title="🔗 第三方库引用和工具集"></a>🔗 第三方库引用和工具集</h2><ul><li>CEF - <a href="https://gitee.com/dotnetchina/NanUI">https://bitbucket.org/chromiumembedded/cef</a></li><li>Xilium.CefGlue - <a href="https://gitee.com/dotnetchina/NanUI">https://gitlab.com/xiliumhq/chromiumembedded/cefglue</a></li><li>Vanara.Library - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/dahall/Vanara/</a></li><li>Vortice.Windows - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/amerkoleci/Vortice.Windows</a></li><li>SkiaSharp - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/mono/SkiaSharp</a></li><li>React - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/facebook/react</a></li><li>React-Router - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/remix-run/react-router</a></li><li>Vite - <a href="https://gitee.com/dotnetchina/NanUI">https://github.com/vitejs/vite</a></li></ul><h2 id="🖥️-环境要求"><a href="#🖥️-环境要求" class="headerlink" title="🖥️ 环境要求"></a>🖥️ 环境要求</h2><p><strong>开发环境</strong></p><ul><li>.NET Framework 4.6.2 或更高版本 &#x2F; .NET 6.0 或更高版本</li><li>Visual Studio 2019 或更高版本（强烈建议使用 VS2022）</li></ul><p><strong>部署环境</strong></p><ul><li>Microsoft Windows 7 Service Pack 1 或更高版本</li><li>.Net Framework 4.6.2 或更高版本</li><li>.NET 6.0 需要 Windows 7 Service Pack 1 或更高版本</li><li>.NET 7.0&#x2F;8.0 需要 Windows 10 或 Windows 11</li></ul><p>这是一个 <strong>仅限 Windows</strong> 的框架，所以它目前不能在 Linux 或者 MacOS 环境运行。</p><p>支持的最低 Windows 版本是 Windows 7 Service Pack 1，并且 Windows 7 不支持某些功能（例如 DirectComposition 离屏渲染）。</p><h2 id="🧰-入门"><a href="#🧰-入门" class="headerlink" title="🧰 入门"></a>🧰 入门</h2><p>按照以下步骤即可创建一个简单的 WinFormium 应用程序：</p><p><strong>1. 通过默认模板创建一个 WinForm 应用程序。</strong></p><p><strong>2. 安装 WinFormium NuGet 包</strong></p><p>打开 NuGet 包管理器来安装或使用 NuGet 包管理器控制台，然后运行以下命令来安装 WinFormium nuget 包：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">PM&gt; Install-<span class="hljs-keyword">Package</span> <span class="hljs-title">NetDimension.NanUI</span><br></code></pre></td></tr></table></figure><p>安装 WinFormium 所依赖的 Chromium Embedded Framework 依赖项：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">PM&gt; Install-<span class="hljs-keyword">Package</span> <span class="hljs-title">NetDimension.NanUI.Runtime</span><br></code></pre></td></tr></table></figure><p>CEF 运行库巨大，再加上众所周知的原因，中国内地玩家请自行设置 NuGet 使用国内镜像。</p><ul><li><strong>Azure CDN</strong> - <a href="https://gitee.com/link?target=https://nuget.cdn.azure.cn/v3/index.json">https://nuget.cdn.azure.cn/v3/index.json</a></li><li><strong>华为云</strong> - <a href="https://gitee.com/link?target=https://repo.huaweicloud.com/repository/nuget/v3/index.json">https://repo.huaweicloud.com/repository/nuget/v3/index.json</a></li></ul><p><strong>3. 一个基本的 WinFormium 应用程序需要以下代码：</strong></p><p>按如下示例修改 <strong>Program.cs</strong> 文件中的代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> WinFormium;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    [<span class="hljs-meta">STAThread</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> builder = WinFormiumApp.CreateBuilder();<br><br>        builder.UseWinFormiumApp&lt;MyApp&gt;();<br><br>        <span class="hljs-keyword">var</span> app = builder.Build();<br><br>        app.Run();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>创建一个类继承 <strong>WinFormiumStartup</strong> 来配置应用程序：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> WinFormium;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title">MyAPP</span> : <span class="hljs-title">WinFormiumStartup</span><br>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> MainWindowCreationAction? UseMainWindow(MainWindowOptions opts)<br>    &#123;<br>        <span class="hljs-comment">// 设置应用程序的主窗体</span><br>        <span class="hljs-keyword">return</span> opts.UseMainFormium&lt;MyWindow&gt;();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WinFormiumMain</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// Main函数中的代码应该在这里，该函数只在主进程中运行。这样可以防止子进程运行一些不正确的初始化代码。</span><br>        ApplicationConfiguration.Initialize();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigurationChromiumEmbedded</span>(<span class="hljs-params">ChromiumEnvironmentBuiler cef</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// 在此处配置 Chromium Embedded Framwork</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// 在这里配置该应用程序的服务</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>创建一个类实现 <strong>Formium</strong>，用于配置应用程序的主窗口：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> WinFormium;<br><span class="hljs-keyword">using</span> WinFormium.Forms;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title">MyWindow</span> : <span class="hljs-title">Formium</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyWindow</span>()</span><br>    &#123;<br>        Url = <span class="hljs-string">&quot;https://www.google.com&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> FormStyle <span class="hljs-title">ConfigureWindowStyle</span>(<span class="hljs-params">WindowStyleBuilder builder</span>)</span><br>    &#123;<br>        <span class="hljs-comment">// 此处配置窗口的样式和属性，或留空以使用默认样式</span><br><br>        <span class="hljs-keyword">var</span> style = builder.UseSystemForm();<br><br>        style.TitleBar = <span class="hljs-literal">false</span>;<br><br>        style.DefaultAppTitle = <span class="hljs-string">&quot;My first WinFomrim app&quot;</span>;<br><br>        <span class="hljs-keyword">return</span> style;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. 生成并运行你的第一个 WinFormium 应用程序</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;NanUI简介&quot;&gt;&lt;a href=&quot;#NanUI简介&quot; class=&quot;headerlink&quot; title=&quot;NanUI简介&quot;&gt;&lt;/a&gt;NanUI简介&lt;/h1&gt;&lt;p&gt;NanUI是WinForm UI库的一种，它可以让应用程序里面内嵌html+css写的页面，可以样式</summary>
      
    
    
    
    <category term="WinForm" scheme="http://zdx-1.github.io/categories/WinForm/"/>
    
    
    <category term="WinForm" scheme="http://zdx-1.github.io/tags/WinForm/"/>
    
  </entry>
  
  <entry>
    <title>Kivy中文说明文档v1.0</title>
    <link href="http://zdx-1.github.io/2024/07/09/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/"/>
    <id>http://zdx-1.github.io/2024/07/09/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/</id>
    <published>2024-07-09T13:45:29.000Z</published>
    <updated>2024-07-09T14:34:02.822Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kivy简介"><a href="#Kivy简介" class="headerlink" title="Kivy简介"></a>Kivy简介</h1><p>Kivy是Python的Gui的一种。</p><p>网上关于使用python进行ui设计的文档很少，因此为了自己方便，也为了这个领域的发展，于是编写初稿。</p><p><strong>注</strong>：本版本是在windows环境下使用的，后期其他系统可能会添加。</p><p><a href="https://cycleuser.gitbooks.io/kivy-guide-chinese/content/00-Kivy-CN.html">参考文献</a></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><strong>官网原文档链接</strong></p><p><a href="https://kivy.org/docs/installation/installation-windows.html">Installation on Windows</a></p><p><a href="https://kivy.org/docs/installation/installation-linux.html">Installation on Linux</a></p><p><a href="https://kivy.org/docs/installation/installation-osx.html">Installation on Mac OS</a></p><h2 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h2><p>首先你得有一个合适的python环境</p><p>官方文档里面提及的是3.9的版本</p><p>国内安装比较慢，可以采用国内的开源镜像站</p><p><a href="https://mirrors.aliyun.com/python-release/">阿里云开源镜像站</a></p><p>之后最好设置下载镜像源为国内的，国外的比较慢</p><h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><p>安装了Python之后，打开命令行工具cmd，然后按照下面的命令来进行Kivy的安装。</p><ol><li>首先要保证已经安装了最新的pip和wheel：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">python -m pip install --upgrade pip wheel setuptools<br></code></pre></td></tr></table></figure><ol start="2"><li>然后安装必要的依赖包(其中gstreamer大小接近139MB，如果不需要用，就可以跳过不安装这个包:</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python">python -m pip install docutils pygments pypiwin32 kivy.deps.sdl2 kivy.deps.glew<br>python -m pip install kivy.deps.gstreamer --extra-index-url https://kivy.org/downloads/packages/simple/<br></code></pre></td></tr></table></figure><ol start="3"><li>如果上一步都成功了没什么报错，就可以安装Kivy了:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">python -m pip install kivy<br></code></pre></td></tr></table></figure><ol start="4"><li>在环境变量中添加一些路径到PATH来避免遇到<a href="https://github.com/kivy/kivy/issues/3957">各种issues</a> (在你的python.exe所在的路径下运行下面的命令):</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-built_in">set</span> PATH=%PATH%;%<span class="hljs-built_in">cd</span>%\share\sdl2\bin;%<span class="hljs-built_in">cd</span>%\share\glew\bin<br></code></pre></td></tr></table></figure><h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><p><a href="https://kivy.org/docs/guide/basic.html">原文地址</a></p><h2 id="Kivy环境安装搭建"><a href="#Kivy环境安装搭建" class="headerlink" title="Kivy环境安装搭建"></a>Kivy环境安装搭建</h2><p>Kivy要依赖很多Python包，比如 pygame, gstreamer, PIL, Cairo 等等还有好多。这些包并非都是必需的，要根据你的运行平台来看具体情况，有时候缺那么一两个包就可能导致安装失败，或者运行过程中出错等等，这就挺痛苦的。所以Kivy官方针对Windows和MacOS X提供了集成好关键部件的压缩包，解压缩之后直接就能用。具体的安装过程可以参考下面链接中的中文安装指南：</p><ul><li><a href="http://blog.cycleuser.org/kivy-installment-tutorial.html">Kivy中文安装指南</a></li></ul><p>如果你非要自己从零开始安装，那最起码要确保安装有<a href="http://cython.org/">Cython</a>和<a href="http://pygame.org/">Pygame</a>。这两个包可以通过pip来安装，如下所示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Bash">pip install cython<br>pip install pygame<br>pip install kivy<br></code></pre></td></tr></table></figure><p><a href="https://github.com/kivy/kivy">Kivy的开发版本</a>也可以通过git来安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Bash">git <span class="hljs-built_in">clone</span> https://github.com/kivy/kivy<br>make<br></code></pre></td></tr></table></figure><h2 id="创建一个应用"><a href="#创建一个应用" class="headerlink" title="创建一个应用"></a>创建一个应用</h2><p>创建一个Kivy应用大概步骤如下：</p><ul><li>基于App类创建一个子类；</li><li>把build()方法实现为返回一个控件实例(这个控件的实例也就是你整个应用的根控件)。</li><li>创建一个这个类的实例，然后调用run()方法。</li></ul><p>下面的代码就是上述思路的最小化实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> kivy<br>kivy.require(<span class="hljs-string">&#x27;1.0.6&#x27;</span>) <span class="hljs-comment"># 注意要把这个版本号改变成你现有的Kivy版本号!</span><br><br><span class="hljs-keyword">from</span> kivy.app <span class="hljs-keyword">import</span> App <span class="hljs-comment"># 译者注：这里就是从kivy.app包里面导入App类</span><br><span class="hljs-keyword">from</span> kivy.uix.label <span class="hljs-keyword">import</span> Label <span class="hljs-comment"># 译者注：这里是从kivy.uix.label包中导入Label控件，这里都注意开头字母要大写</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span>(<span class="hljs-title class_ inherited__">App</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self</span>): <span class="hljs-comment"># 译者注：这里是实现build()方法</span><br>        <span class="hljs-keyword">return</span> Label(text=<span class="hljs-string">&#x27;Hello world&#x27;</span>) <span class="hljs-comment"># 译者注：在这个方法里面使用了Label控件</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    MyApp().run() <span class="hljs-comment"># 译者注：这里就是运行了。</span><br></code></pre></td></tr></table></figure><p>把上面的代码以文本形式复制到一个文本文件中，保存成py文件，例如main.py，然后运行，就行了。</p><p class='item-img' data-src='/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/image-20240709221042996.png'><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/image-20240709221042996.png" alt="运行截图"></p><h2 id="Kivy应用的生命周期"><a href="#Kivy应用的生命周期" class="headerlink" title="Kivy应用的生命周期"></a>Kivy应用的生命周期</h2><p>如上图所示，不论什么用途和目的，咱们应用的入口都是这个run()方法，在本文的样例代码中，就是“MyApp().run()”。</p><p>下面就一行一行开始详细解释了：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.app <span class="hljs-keyword">import</span> App<br></code></pre></td></tr></table></figure><p>为什么要导入这个App类呢？因为咱们自定义的这个App要继承这个类。这个类的位置在kivy安装目录下的kivy目录下的app.py文件中。</p><p>如果你想要深入挖掘一下，去了解这个Kivy的App类到底是怎么个内容，你可以打开这个app.py文件，亲自来看看。Kivy作者特别鼓励大家去阅读源码。Kivy基于Python，用Sphinx编写的文档，所以每个类的文档都在对应的文件内。</p><p>然后咱们回过头来，继续看本文这次的代码的第二行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.uix.label <span class="hljs-keyword">import</span> Label<br></code></pre></td></tr></table></figure><p>这里一定要特别注意各种包和类的导入。”kivy.uix”这个包的作用是容纳用户界面元素，比如各种输出布局和控件。</p><p>接下来看到这一行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span>(<span class="hljs-title class_ inherited__">App</span>):<br></code></pre></td></tr></table></figure><p>这一行定义了咱们这次的Kivy应用的基类。如果你要做修改的话，把MyApp改成你要设定的应用名字就可以了。</p><p>接着往下看：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self</span>):<br></code></pre></td></tr></table></figure><p>在上面的生命周期图中加粗强调的部分表明，build函数所处的是要进行初始化和返回根控件的位置。根控件返回的操作在下面这一行中实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">return</span> Label(text=<span class="hljs-string">&#x27;Hello world&#x27;</span>)<br></code></pre></td></tr></table></figure><p>这里我们用文本‘Hello World’对Label这一控件进行了初始化，并且返回了其实例。这个Label就是咱们这个应用的根控件了。</p><p>Python是用缩进来区别代码块的，所以一定要注意上面代码的缩进和层次，尤其是函数定义那部分。</p><p>然后咱们继续，到了真正让应用开始运行的这部分了：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    MyApp().run()<br></code></pre></td></tr></table></figure><p>这里对MyApp这个类进行了初始化，然后调用了这个类的run()方法。这样就初始化并启动了我们的Kivy应用了。</p><h2 id="运行应用"><a href="#运行应用" class="headerlink" title="运行应用"></a>运行应用</h2><p>接下来就是要在不同操作系统平台上来运行咱们刚刚写好的应用了：</p><p>To run the application, follow the instructions for your operating system:</p><ul><li>Windows 可以在CMD中以如下方式运行：</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs CMD">$ python main.py #用系统Python运行<br><span class="hljs-function">C:\<span class="hljs-title">appdir</span>&gt;<span class="hljs-title">kivy.bat</span> <span class="hljs-title">main.py</span> #用<span class="hljs-title">kivy.bat</span>来运行，注意这里要设定好正确的路径</span><br></code></pre></td></tr></table></figure><ul><li>Android 下面要运行还需要一些复杂的文件，所以等以后深入了之后再给讲解这部分了。</li></ul><p>这个应用运行之后的具体效果就是下面图片所示这样，会打开一个窗口，然后展示出一个Label，上面写着文本‘Hello World’，这个Label会覆盖该窗口的全部区域。就这样了。</p><p class='item-img' data-src='/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/quickstart.png'><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/quickstart.png" alt="img"></p><h2 id="修改定制这个应用"><a href="#修改定制这个应用" class="headerlink" title="修改定制这个应用"></a>修改定制这个应用</h2><p>增加一个用户名&#x2F;密码输入的页面</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.app <span class="hljs-keyword">import</span> App<br><span class="hljs-keyword">from</span> kivy.uix.gridlayout <span class="hljs-keyword">import</span> GridLayout<br><span class="hljs-keyword">from</span> kivy.uix.label <span class="hljs-keyword">import</span> Label<br><span class="hljs-keyword">from</span> kivy.uix.textinput <span class="hljs-keyword">import</span> TextInput<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginScreen</span>(<span class="hljs-title class_ inherited__">GridLayout</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(LoginScreen, self).__init__(**kwargs)<br>        self.cols = <span class="hljs-number">2</span><br>        self.add_widget(Label(text=<span class="hljs-string">&#x27;User Name&#x27;</span>))<br>        self.username = TextInput(multiline=<span class="hljs-literal">False</span>)<br>        self.add_widget(self.username)<br>        self.add_widget(Label(text=<span class="hljs-string">&#x27;password&#x27;</span>))<br>        self.password = TextInput(password=<span class="hljs-literal">True</span>, multiline=<span class="hljs-literal">False</span>)<br>        self.add_widget(self.password)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span>(<span class="hljs-title class_ inherited__">App</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> LoginScreen()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    MyApp().run()<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/image-20240709221537055.png'><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/image-20240709221537055.png" alt="运行截图"></p><p>在下面这行代码中，我们导入了一种名为Gridlayout的布局：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.uix.gridlayout <span class="hljs-keyword">import</span> GridLayout<br></code></pre></td></tr></table></figure><p>这个类被我们用作基类来制作根控件LoginScreen，在如下代码中进行了定义：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginScreen</span>(<span class="hljs-title class_ inherited__">GridLayout</span>):<br></code></pre></td></tr></table></figure><p>如下代码中，我们在LoginScreen类中重新定义了初始化方法<strong>init</strong>()，这样来增加一些控件，并且定义了这些控件的行为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>    <span class="hljs-built_in">super</span>(LoginScreen, self).__init__(**kwargs)<br></code></pre></td></tr></table></figure><p>一定要注意这里要加super，才能把现有的新初始化方法覆盖掉继承来的旧初始化方法。另外也要注意，这里调用super的时候没有省略掉**kwargs，这是一种好习惯。</p><p>然后继续往下看：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Python">self.cols = <span class="hljs-number">2</span><br>self.add_widget(Label(text=<span class="hljs-string">&#x27;User Name&#x27;</span>))<br>self.username = TextInput(multiline=<span class="hljs-literal">False</span>)<br>self.add_widget(self.username)<br>self.add_widget(Label(text=<span class="hljs-string">&#x27;password&#x27;</span>))<br>self.password = TextInput(password=<span class="hljs-literal">True</span>, multiline=<span class="hljs-literal">False</span>)<br>self.add_widget(self.password)<br></code></pre></td></tr></table></figure><p>上面的代码中，我们让GridLayout来管理子控件，把子控件设置为两栏，然后加上用户名和密码的Label字符显示控件和TextInput字符输入控件。</p><p>运行上面的代码，得到的窗口效果大概如下图：</p><p class='item-img' data-src='/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/guide_customize_step1.png'><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/guide_customize_step1.png" alt="img"></p><p>尝试着重新缩放一下窗口大小，你会发现上面的控件会相对整个窗口的尺寸而自行调整大小，并不需要人为去操作了。这是因为这些控件都使用了默认的尺寸。</p><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p><a href="https://kivy.org/docs/guide/environment.html">英文原文</a></p><p>Kivy的初始化和很多行为都可以通过各种环境变量来控制。</p><p>例如，若要严格设定用PIL进行文本渲染，可以通过如下方式来实现：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">$ KIVY_TEXT=pil python main.py<br></code></pre></td></tr></table></figure><p>(译者注：PIL，Python Imaging Library, Python 下常用的绘图库)</p><p>所有的这些环境变量的修改设定都需要在导入Kivy之前进行，具体如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br>os.environ[<span class="hljs-string">&#x27;KIVY_TEXT&#x27;</span>] = <span class="hljs-string">&#x27;pil&#x27;</span><br><span class="hljs-keyword">import</span> kivy<br></code></pre></td></tr></table></figure><h2 id="路径控制"><a href="#路径控制" class="headerlink" title="路径控制"></a>路径控制</h2><ul><li>从Kivy1.0.7版本开始提供</li></ul><p>You can control the default directories where config files, modules and kivy data are located.</p><p>Kivy的配置文件、模块以及数据存储的默认目录，都可手动设定所在位置。</p><blockquote><p>KIVY_DATA_DIR</p></blockquote><p>这个是Kivy的数据目录，默认值为&#x2F;data 。</p><blockquote><p>KIVY_MODULES_DIR</p></blockquote><p>这个是Kivy的模块目录，默认值为&#x2F;modules 。</p><blockquote><p>KIVY_HOME</p></blockquote><p>这个是Kivy的HOME目录，该目录是用来存放本地配置文件的，必须是一个可以写入的位置。对应不同系统也有不同位置：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">* </span>Desktop: /.kivy<br><span class="hljs-bullet">* </span>Android: /.kivy<br><span class="hljs-bullet">* </span>iOS: /Documents/.kivy<br></code></pre></td></tr></table></figure><ul><li>从Kivy1.9.0版本开始提供</li></ul><blockquote><p>KIVY_SDL2_PATH</p></blockquote><p>这个变量若设定了，编译Kivy的时候就会使用该位置的SDL2库文件，而不再使用系统的库文件。在环境变量PATH的开头部位就要设定好这个变量，这样在运行一个Kivy应用的时候才能也使用相同的SDL2库文件。</p><ul><li>从Kivy1.9.0版本开始提供</li></ul><h4 id="特别注意"><a href="#特别注意" class="headerlink" title="特别注意"></a>特别注意</h4><p>刚刚这个SDL2路径是用来编译Kivy的。运行程序的话就用不着了。</p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><blockquote><p>KIVY_USE_DEFAULTCONFIG</p></blockquote><p>若设定了此环境变量，Kivy会读取制定的配置文件。</p><blockquote><p>KIVY_NO_CONFIG</p></blockquote><p>若设定了此环境变量，Kivy将不会读取也不会写入任何配置文件。也适用于用户配置文件夹的位置。（译者注：这句话我还没弄明白，因为没有这样尝试。）</p><blockquote><p>KIVY_NO_FILELOG</p></blockquote><p>若设定了此环境变量，日志将不再输出到文件内。</p><blockquote><p>KIVY_NO_CONSOLELOG</p></blockquote><p>若设定了此环境变量，日志将不再输出到控制台。</p><blockquote><p>KIVY_NO_ARGS</p></blockquote><p>若设定了此环境变量，命令行传递的参数将不会被Kivy解析和使用。也就是说，可以不用 – 定义符，就能随便创建一个使用自己参数的脚本或者应用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br>os.environ[<span class="hljs-string">&quot;KIVY_NO_ARGS&quot;</span>] = <span class="hljs-string">&quot;1&quot;</span><br><span class="hljs-keyword">import</span> kivy<br></code></pre></td></tr></table></figure><ul><li>从Kivy1.9.0版本开始提供</li></ul><h2 id="限定Kivy-core核心，使用特定版本"><a href="#限定Kivy-core核心，使用特定版本" class="headerlink" title="限定Kivy.core核心，使用特定版本"></a>限定Kivy.core核心，使用特定版本</h2><p>Kivy.core会尝试使用所在平台的最优实现。如果要测试或者定制安装，你可能要把选择器设定为某个特定版本的kivy.core。</p><blockquote><p>KIVY_WINDOW</p></blockquote><p>这一变量是用来设定如何创建窗口，可用值：sdl2, pygame, x11, egl_rpi</p><blockquote><p>KIVY_TEXT</p></blockquote><p>这一变量是用来设定如何渲染文本，可用值：sdl2, pil, pygame, sdlttf</p><blockquote><p>KIVY_VIDEO</p></blockquote><p>这一变量是用来设定如何渲染视频，可用值：pygst, gstplayer, pyglet, ffpyplayer, ffmpeg, gi, null</p><blockquote><p>KIVY_AUDIO</p></blockquote><p>这一变量是用来设定如何播放声音，可用值：sdl2, gstplayer, pygst, ffpyplayer, pygame, gi, avplayer</p><blockquote><p>KIVY_IMAGE</p></blockquote><p>这一变量是用来设定如何读取图像，可用值：sdl2, pil, pygame, imageio, tex, dds, gif</p><blockquote><p>KIVY_CAMERA</p></blockquote><p>这一变量是用来设定如何读取摄像头，可用值：videocapture, avfoundation, pygst, opencv</p><blockquote><p>KIVY_SPELLING</p></blockquote><p>这一变量是用来设定拼写，可用值： enchant, osxappkit</p><blockquote><p>KIVY_CLIPBOARD</p></blockquote><p>这一变量是用来设定剪切板管理组件，可用值：sdl2, pygame, dummy, android</p><h2 id="设置单位"><a href="#设置单位" class="headerlink" title="设置单位"></a>设置单位</h2><blockquote><p>KIVY_DPI</p></blockquote><p>这个是用来设定Metrics.dpi的dpi值的。</p><ul><li>从Kivy1.4.0版本开始提供</li></ul><blockquote><p>KIVY_METRICS_DENSITY</p></blockquote><p>这个是用来设定Metrics.density，像素密度。</p><ul><li>从Kivy1.5.0版本开始提供</li></ul><blockquote><p>KIVY_METRICS_FONTSCALE</p></blockquote><p>这个是用来设定Metrics.fontscale，字体大小。</p><ul><li>从Kivy1.5.0版本开始提供</li></ul><h2 id="图形输出"><a href="#图形输出" class="headerlink" title="图形输出"></a>图形输出</h2><blockquote><p>KIVY_GL_BACKEND</p></blockquote><p>此变量用于设定使用的OpenGL后端，更多细节参考<a href="http://kivy.org/docs/api-kivy.graphics.cgl.html#module-kivy.graphics.cgl">cgl</a>.</p><blockquote><p>KIVY_GL_DEBUG</p></blockquote><p>此变量用于设定是否对OpenGL调用进行日志记录，更多细节参考<a href="http://kivy.org/docs/api-kivy.graphics.cgl.html#module-kivy.graphics.cgl">cgl</a>.</p><blockquote><p>KIVY_GRAPHICS</p></blockquote><p>此变量用于设定是否使用OpenGL ES2，更多细节参考<a href="http://kivy.org/docs/api-kivy.graphics.cgl.html#module-kivy.graphics.cgl">cgl</a>.</p><blockquote><p>KIVY_GLES_LIMITS</p></blockquote><p>此变量用于设定是否强制设定GLES2（默认值为启用，设置为1）。如果设定为false，Kivy将不再兼容GLES2。（译者注：这部分我不懂，就直接生硬翻译了原文，建议大家参考一下原文去理解。）如果设置为true，可能有下表中所示的潜在的不兼容情况：</p><table><thead><tr><th>Mesh indices</th><th align="center">If true, the number of indices in a mesh is limited to 65535</th></tr></thead><tbody><tr><td>Texture blit</td><td align="center">When blitting to a texture, the data (color and buffer) format must be the same format as the one used at the texture creation. On desktop, the conversion of different color is correctly handled by the driver, while on Android, most of devices fail to do it. Ref: <a href="https://github.com/kivy/kivy/issues/1600">https://github.com/kivy/kivy/issues/1600</a></td></tr></tbody></table><ul><li>从Kivy1.8.1版本开始提供</li></ul><blockquote><p>KIVY_BCM_DISPMANX_ID</p></blockquote><p>此变量是针对Raspberry Pi树莓派平台的，用于设定所选择的视频输出端口。默认值为0，下面列表中是在vc_dispmanx_types.h这个头文件中存储的可供选择的变量值：</p><ul><li>0: DISPMANX_ID_MAIN_LCD</li><li>1: DISPMANX_ID_AUX_LCD</li><li>2: DISPMANX_ID_HDMI</li><li>3: DISPMANX_ID_SDTV</li><li>4: DISPMANX_ID_FORCE_LCD</li><li>5: DISPMANX_ID_FORCE_TV</li><li>6: DISPMANX_ID_FORCE_OTHER</li></ul><p>（译者注：上面0-6分别是不同的显示输出端口，相信很容易看懂，大家探索一下吧。）</p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><a href="https://kivy.org/docs/guide/config.html">英文原文</a></p><p>Kivy的配置文件是一个名为config.ini的文本，符合<a href="http://en.wikipedia.org/wiki/INI_file">标准INI格式</a>。</p><h2 id="找到配置文件位置"><a href="#找到配置文件位置" class="headerlink" title="找到配置文件位置"></a>找到配置文件位置</h2><p>Kivy的配置文件存放在环境变量KIVY_HOME所制定的位置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">KIVY_HOME&gt;/config.ini<br></code></pre></td></tr></table></figure><p>在桌面平台上，默认的位置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">HOME_DIRECTORY&gt;/.kivy/config.ini<br></code></pre></td></tr></table></figure><p>所以，假设你的用户名是“tito”，在各个操作系统下的配置文件位置则如下所示：</p><ul><li>Windows: <code>C:\Users\tito\.kivy\config.ini</code></li><li>OS X: <code>/Users/tito/.kivy/config.ini</code></li><li>Linux: <code>/home/tito/.kivy/config.ini</code></li></ul><p>（译者注：这里要注意，tito只是原文的一个示范，相当于张三李四这样，新手可别照着复制找不到，要用自己操作系统中具体的用户名。）</p><p>在Android系统中位置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">ANDROID_APP_PATH&gt;/.kivy/config.ini<br></code></pre></td></tr></table></figure><p>假如你的Kivy应用的包名称为“org.kivy.launcher”,那么该Kivy应用的配置文件位于:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">/data/data/org.kivy.launcher/files/.kivy/config.ini<br></code></pre></td></tr></table></figure><p>在iOS上Kivy的默认配置文件位于：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">HOME_DIRECTORY&gt;/Documents/.kivy/config.ini<br></code></pre></td></tr></table></figure><h2 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h2><p>有时候用户或者开发者可能需要针对特定的应用来修改配置，或者对Kivy的某个组件进行测试，比如输入模块之类的。这时候就可以用如下命令创建一份新的配置文件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> kivy.config <span class="hljs-keyword">import</span> Config<br>Config.read(file&gt;)<br><span class="hljs-comment"># set config</span><br>Config.write()<br></code></pre></td></tr></table></figure><p>有时候本地配置只有一个.ini文件还不够用，比如说可能你要单独使用某个garden、Kivy日志或者其他什么模块，这时候就要把KIVY_HOME这个环境变量进行修改了，指定到目标位置就行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br>os.environ[<span class="hljs-string">&#x27;KIVY_HOME&#x27;</span>] = folder&gt;<br></code></pre></td></tr></table></figure><p>还有一种思路，就是在运行Kivy应用之前，在终端中手动修改一下这个环境变量：</p><ol><li>Windows: <code>set KIVY_HOME=folder&gt;</code></li><li>Linux &amp; OSX: <code>export KIVY_HOME=folder&gt;</code></li></ol><p>在设置了KIVY_HOME之后，所指定的这个文件夹就会被当做默认的.kivy文件夹来用。</p><h2 id="详细理解配置项"><a href="#详细理解配置项" class="headerlink" title="详细理解配置项"></a>详细理解配置项</h2><p>在<a href="http://kivy.org/docs/api-kivy.config.html#module-kivy.config">kivy.config</a> 模块中可以看到全部的配置项的解释。</p><h1 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h1><p><a href="https://kivy.org/docs/guide/architecture.html">英文原文</a></p><p>本章我们将从软件工程的角度，来简单介绍一下Kivy的设计。这对于理解各个部分如何配合工作会有帮助。如果你只关注代码，可能有时候会遇到这样一种情况，就是你已经有了一个初步的想法了，但具体怎么去实现可能还是一头雾水，所以本章就针对这种情况，来更深入地讲解一下Kivy的一些基本思想。你也可以先跳过这一章，等以后再翻回来看，不过我们建议开发者还是先看一下这些内容比较好，起码可以快速略读一下有个印象。</p><p>Kivy包含的若干个模块，我们将对这些模块一一进行简要说明。下面这幅图是Kivy整个架构的概括图示：</p><p class='item-img' data-src='/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/architecture.png'><img src="/./../images/Kivy%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3v1-0/architecture.png" alt="../_images/architecture.png"></p><h2 id="核心模块和输入模块"><a href="#核心模块和输入模块" class="headerlink" title="核心模块和输入模块"></a>核心模块和输入模块</h2><p>对理解Kivy的设计内涵，模块化和抽象化的思想是至关重要的。我们试图把各种基本的任务进行抽象，比如打开窗口、显示图像和文本、播放音频、从摄像头获取图像、拼写校正等等。我们将这些部分称为<strong>核心</strong>任务。这样也使得API接口用起来比较简单，扩展起来也容易。更重要的是，这种思路可以让Kivy应用在运行的时候，使用各个运行平台所提供的对应功能的API接口。例如，在苹果的MacOS操作系统、Linux操作系统和Windows操作系统中，就都有各自不同的原生API接口提供各种核心功能。所以就有一部分代码，调用这些不同接口中的某一个，一方面与操作系统进行通信，另一方面与Kivy进行交互，起到中间人的角色，我们称之为<strong>核心模块</strong>。针对不同的操作系统平台要使用各自对应的核心模块，这样的好处是达到一种均衡状态，既能够充分利用操作系统提供的功能，又能尽量提高开发效率。（译者注：我的理解是这样大家平时不用针对不同操作系统去学习和使用各自的API，而只要专心使用Kivy的核心模块进行调用就行了。）这也允许用户来自由选择，使用Kivy提供的核心模块，或者直接使用各个操作系统的API接口。此外，由于使用了各个平台所提供的链接库文件，我们大大减小了Kivy发型版本的体积，也使得打包发布更加容易。这有助于将Kivy应用移植到其他平台。比如Android平台上的Kivy应用就体现了这一特性的好处了。</p><p>在输入模块这部分，我们也遵循了同样的思路。<strong>输入模块</strong>，是一段代码，用于针对各种输入设备提供支持，比如苹果公司的Trackpad触摸板，TUIO多点触摸设备，或者是鼠标模拟器等等。如果你需要对某一种新的输入设备添加支持，只需要提供一个新的类，用这个类来读取输入设备的数据，然后传递给Kivy基本事件，就可以了。</p><h2 id="图形接口"><a href="#图形接口" class="headerlink" title="图形接口"></a>图形接口</h2><p>Kivy的图形接口是对OpenGL的抽象。在最底层，Kivy使用OpenGL的命令来进行硬件加速的图形绘制。不过写OpenGL的代码可还是挺复杂的，新手就更难以迅速掌握了。所以我们就提供了一系列的图形接口，利用这些接口可以很简单地进行图形绘制，这些接口中用到了例如画布Canvas、矩形Rectangle等几何概念，比OpenGL里面简单不少。</p><p>Kivy自带的所有控件，都使用了这个图形接口；出于性能的考虑，此图形接口是用C语言来实现的。</p><p>这个图形接口的另一个好处是可以对你代码中的绘图指令进行自动优化。这个很有用，尤其是在你对OpenGL的优化不太熟悉的情况下。这能让你的绘图代码更高效。</p><p>当然了，你也可以坚持使用原生的OpenGL命令。目前Kivy在所有操作系统平台上用的都是是OpenGL 2.0 ES (GLES2)，所以如果你希望保持跨平台的兼容性，我们建议你只是用GLES2兼容的函数。</p><h2 id="核心模块"><a href="#核心模块" class="headerlink" title="核心模块"></a>核心模块</h2><p>核心模块也就是kivy.core，这个包里面提供了常用的各种功能，比如：</p><ul><li><p>Clock</p><p>时钟类，可以用于安排计时器事件。同时支持一次性计时和周期性计时。</p></li><li><p>Cache</p><p>If you need to cache something that you use often, you can use our class for that instead of writing your own.</p><p>缓存类，如果有一些经常用到的数据需要缓存，就可以用这个类，而不用自己写了。</p></li><li><p>Gesture Detection</p><p>手势识别，这个可以用来识别各种划动行为，比如画个圆圈或者方块之类的。可以训练来识别你自己设计的图形。</p></li><li><p>Kivy Language</p><p>Kivy语言，这个是用来简洁高效地描述Kivy应用的用户界面的。</p></li><li><p>Properties</p><p>这里这些属性和Python语言中的属性不同。这里是我们专门写的一些类，通过用户界面描述来连接控件代码。</p></li></ul><h2 id="UIX（控件和布局）"><a href="#UIX（控件和布局）" class="headerlink" title="UIX（控件和布局）"></a>UIX（控件和布局）</h2><p>UIX用户界面模块，包含了常用的各种控件和布局，可以通过复用来快速构建用户界面。</p><ul><li><p>Widgets 控件</p><p>控件是各种用户界面元素，可以添加到程序中来提供各种功能。有的可见，有的不可见。文件浏览器，按钮、滑动页、列表等等，这都属于控件。控件接收动作事件。</p></li><li><p>Layouts 布局</p><p>布局是控件的排列方式。当然，你也可以自己自定义控件的位置，不过从我们提供的预设布局中选择一个来使用，会更方便很多。网格布局、箱式布局等等，都是布局了。你还可以试试复杂的多层网状布局。</p></li></ul><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><p>如果你用某一种现代的网络浏览器，并且通过一些附加组件对其进行定制，那么你应该就理解了我们提供的各种模块类的基本思想了。各种模块可以用来向Kivy程序中添加功能，即便原作者没有提供的功能也可以加进去了。</p><p>例如，有一个模块就能显示当前应用的FPS（Frame Per Second，每秒帧数，即帧率），然后还能统计一段时间的FPS变化。</p><p>你可以自己写各种模块添加到应用中。</p><h2 id="输入事件（Touches）"><a href="#输入事件（Touches）" class="headerlink" title="输入事件（Touches）"></a>输入事件（Touches）</h2><p>Kivy抽象了各种输入类型和输入设备，比如触控，鼠标按键，多点触摸等等。这些输入类型有一个共同点，就是都可以把各种输入事件映射成屏幕上对应的一种2D形态。（当然了，还有的输入设备就没法用2D形态来表示，比如通过加速度传感器来衡量设备倾斜角度等。这种情况就得另外考虑了。下面我们讨论的只是那些能用2D形态表示的输入事件，复杂的类型以后再说。）</p><p>这些输入类型，在Kivy中都用Touch()类的实例来表示。（请注意，这里可不仅仅是针对手指去触摸的那种touch，而是所有可以这样抽象表示的输入事件。这里用<strong>Touch</strong>只是为了方便而这么简称一下。就想象一下，这些<strong>Touches</strong>就是在用户界面或者显示屏上面的那些个<strong>点击行为</strong>。 ）Touch的实例或者对象，有三种状态。当这个Touch进入了其中的某一个状态，你的程序就会被告知此事件的发生。Touch的三种状态如下：</p><ul><li><p>Down 落下</p><p>处于落下状态，只能有一次，就是在发生Touch事件的初始时刻。</p></li><li><p>Move 移动</p><p>这个状态的时间无上限。在一个Touch的生命周期中可以没有这个状态。移动状态只发生在Touch的2D平面位置发生变化的情况下。</p></li><li><p>Up 抬起</p><p>A touch goes up at most once, or never. In practice you will almost always receive an up event because nobody is going to hold a finger on the screen for all eternity, but it is not guaranteed. If you know the input sources your users will be using, you will know whether or not you can rely on this state being entered.</p><p>一个Touch要么只能抬起一次，要么就不发生。而实际应用中你会经常遇到Up时间，因为没有人会一直把手指按到屏幕上，不过也有未必就绝对不会有这种情况。若事先知道用户用的输入设备，就可以确定能否完全依靠用户的输入状态。</p><p>（译者注：以手指触摸屏幕为例，只有开始接触的时候是Down手指落下这个状态，之后移动就是接下来的Move移动状态，手指抬起来的时候就是Up即抬起状态了；如果以鼠标左键点击为例，按下去左键的时候是Down，按住左键不放进行拖动就是Move，松开左键就是Up了。这段我特别解释一下，因为自己翻译的太生硬了。）</p></li></ul><h2 id="控件和事件调度"><a href="#控件和事件调度" class="headerlink" title="控件和事件调度"></a>控件和事件调度</h2><p>在图形化的软件开发语境下，<strong>控件</strong>这个词经常出现，一般是来描述程序中用于和用户进行交互的组件。在Kivy中，控件是用来接收各种输入事件的。所以并不一定非要在屏幕上能看得到。Kivy当中所有控件都以<strong>控件树</strong>的形式来管理，学过计算机科学中数据结构相关知识的话，就会意识到这是一种树形结构：一个控件可以有任意多个子控件，也可以没有子控件。<strong>根控件</strong>就只能有一个，处于树形结构的顶端，根控件不具有父控件，并且所有其他控件都是根控件的直接或者间接子控件（就像树根一样，所以叫根控件）。</p><p>当新的输入数据可用的时候，Kivy会针对每一个Touch发出一个事件。控件树种的根控件首先接收到这个事件。Touch的不同状态，on_touch_down, on_touch_move和on_touch_up （Down落下、Move移动和Up），会作为Touch的参数，提供给根控件，根控件会调用对应的事件Handler来作出反应。</p><p>包括根控件在内，控件树种的每个控件都可以有两种选择，处理该事件，或者将该事件传递下去。如果一个事件的Handler返回True，就意味着这个事件已经被接收并妥善处理。这个事件就也到此为止了。如果不是这样，事件的Handler会跳过此处的空间，调用父类中的对应事件的Handler实现，传递给该控件的子控件。这样的过程可以一路走到最基础的控件类Widget，在它的Touch事件Handler中，只是把Touch传递给子控件，而不进行其他的操作。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># This is analogous for move/up:</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_touch_down</span>(<span class="hljs-params">self, touch</span>):<br>    <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> self.children[:]:<br>        <span class="hljs-keyword">if</span> child.dispatch(<span class="hljs-string">&#x27;on_touch_down&#x27;</span>, touch):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p>说起来挺麻烦，看上去挺复杂，实际上要简单得多。下一章就会讲解如何使用这种特性来快速创建应用了。</p><p>经常有一种情况，就是你可能要让一个控件只在屏幕上某个特定的<strong>区域</strong>来监听Touch事件。这时候就可以使用控件的collide_point()方法来实现此目的。只需要把Touch的位置发给该方法，然后如果此位置位于<strong>监听区域</strong>则返回True，反之返回False。默认情况下，这个方法会监听屏幕上的一个矩形区域，根据控件的中心坐标（x &amp; y坐标系），以及空间尺寸（宽度和高度），不过你也可以用自己的类覆盖掉这一行为。</p><p>Title: Kivy Widgets Date: 2017-02-26 Category: Kivy Tags: Python,Kivy</p><h1 id="控件"><a href="#控件" class="headerlink" title="控件"></a>控件</h1><p><a href="https://kivy.org/docs/guide/widgets.html">英文原文</a></p><h2 id="控件简介"><a href="#控件简介" class="headerlink" title="控件简介"></a>控件简介</h2><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件<code>Widget</code></a>是 Kivy 图形界面中的基本元素。控件提供了一个<a href="https://kivy.org/docs/api-kivy.graphics.html#kivy.graphics.Canvas" title="kivy.graphics.Canvas">画布<code>Canvas</code></a>，这是用来在屏幕上进行绘制的。控件接收事件，并且对事件作出反应。想要对 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件<code>Widget</code></a>进行更深入的了解，可以去看看这个模块的文档。</p><h2 id="操作控件树"><a href="#操作控件树" class="headerlink" title="操作控件树"></a>操作控件树</h2><p>Kivy 以树的形式来组织控件。你的应用程序会有一个根控件，通常会含有若干的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>，这些子控件还可以有自己的子控件。一个控件的子控件会以 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children"><code>children</code></a>属性的形式表述，这个属性是 Kivy 中的一个<a href="https://kivy.org/docs/api-kivy.properties.html#kivy.properties.ListProperty" title="kivy.properties.ListProperty">列表属性 <code>ListProperty</code></a></p><p>可以用一下方法来操作控件树：</p><ul><li><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.add_widget" title="kivy.uix.widget.Widget.add_widget"><code>add_widget()</code></a>: 添加一个控件作为子控件；</li><li><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.remove_widget" title="kivy.uix.widget.Widget.remove_widget"><code>remove_widget()</code></a>: 从子控件列表中去掉一个控件；</li><li><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.clear_widgets" title="kivy.uix.widget.Widget.clear_widgets"><code>clear_widgets()</code></a>: 清空一个控件的所有子控件。</li></ul><p>例如下面的代码，就是在一个盒式布局 BoxLayout 中添加一个按钮：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">layout = <span class="hljs-built_in">BoxLayout</span>(<span class="hljs-attribute">padding</span>=&lt;span&gt;<span class="hljs-number">10</span>&lt;/span&gt;)<br><span class="hljs-selector-tag">button</span> = <span class="hljs-built_in">Button</span>(text=&lt;span&gt;<span class="hljs-string">&#x27;My first button&#x27;</span>&lt;/span&gt;)<br>layout<span class="hljs-selector-class">.add_widget</span>(button)<br></code></pre></td></tr></table></figure><p>这个按钮就添加到布局当中去了：按钮的 parent 属性会被设置为这个布局；这个按钮也会被添加到布局中的子控件列表。要把这个按钮从这个布局中删掉也很简单：</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">layout</span>.remove_widget(<span class="hljs-keyword">button</span>)<br></code></pre></td></tr></table></figure><p>移除了之后，这个按钮的 parent 属性就会被设置为 None，也会被从布局的子控件列表中移除。</p><p>要是想清空一个控件中的所有自科技，那就用 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.clear_widgets" title="kivy.uix.widget.Widget.clear_widgets"><code>clear_widgets()</code></a>方法就可以了：</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">layout.clear_widgets<span class="hljs-comment">()</span><br></code></pre></td></tr></table></figure><h4 id="特别注意-1"><a href="#特别注意-1" class="headerlink" title="特别注意"></a>特别注意</h4><p>千万别自己手动去操作子控件列表，除非你确定自己掌控得非常深入透彻。因为控件树是和绘图树联系在一起的。例如，如果你添加了一个控件到子控件列表，但没有添加这个新子控件的画布到绘图树上，那么就会出现这种情况：这个控件确实成了一个子控件，但是屏幕上不会显示出来。此外，如果你后续使用添加、移除、清空控件这些操作，可能还会遇到问题。</p><h2 id="遍历控件树"><a href="#遍历控件树" class="headerlink" title="遍历控件树"></a>遍历控件树</h2><p>控件类实例的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件<code>children</code></a>列表属性中包含了所有的子控件。所以可以用如下的方式来进行遍历：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">root = BoxLayout()<br><span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># ... add widgets to root ...&lt;/span&gt;</span><br><span class="hljs-variable">&lt;span&gt;</span>for<span class="hljs-variable">&lt;/span&gt;</span> child <span class="hljs-variable">&lt;span&gt;</span>in<span class="hljs-variable">&lt;/span&gt;</span> root.children:<br>    print(child)<br></code></pre></td></tr></table></figure><p>然而，这样的操作可得谨慎使用。如果你要用之前一节中提到的方法来修改这个子控件列表电话，请一定用下面这种方法来做一下备份：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-variable">&lt;span&gt;</span>for<span class="hljs-variable">&lt;/span&gt;</span> child <span class="hljs-variable">&lt;span&gt;</span>in<span class="hljs-variable">&lt;/span&gt;</span> root.children[:]:<br>    <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># manipulate the tree. For example here, remove all widgets that have a&lt;/span&gt;</span><br>    <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># width&lt;/span&gt;</span><br>    <span class="hljs-variable">&lt;span&gt;</span>if<span class="hljs-variable">&lt;/span&gt;</span> child.width  <span class="hljs-variable">&lt;span&gt;</span>100<span class="hljs-variable">&lt;/span&gt;</span>:<br>        root.remove_widget(child)<br></code></pre></td></tr></table></figure><p>默认情况下，控件是不会对子控件的尺寸&#x2F;位置进行改变的。<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置属性 <code>pos</code></a>是屏幕坐标系上的绝对值（除非你使用<a href="https://kivy.org/docs/api-kivy.uix.relativelayout.html#module-kivy.uix.relativelayout" title="kivy.uix.relativelayout">相对布局<code>relativelayout</code></a>，这个以后再说），而<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸属性 <code>size</code></a>就是一个绝对的尺寸大小。</p><h2 id="控件索引Z"><a href="#控件索引Z" class="headerlink" title="控件索引Z"></a>控件索引Z</h2><p>控件绘制的顺序，是基于各个控件在控件树中的位置。<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.add_widget" title="kivy.uix.widget.Widget.add_widget">添加控件方法 <code>add_widget</code></a> 可以接收一个索引参数，这样就能指定该新增控件在控件树中的位置。</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">root.add_widget(widget, <span class="hljs-keyword">index</span>)<br></code></pre></td></tr></table></figure><p>索引值小的控件会被绘制在索引值大的控件之上。一定要记住，默认值是 0 ，所以后添加的控件总会在所有控件的最顶层，除非指定了索引值。</p><h2 id="整理布局"><a href="#整理布局" class="headerlink" title="整理布局"></a>整理布局</h2><p><a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a>是一种特别的控件，它会控制自己子控件的尺寸和位置。有各种不同的布局，这些布局分别为子控件提供拜托你个的自动组织整理。这些布局使用<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint">尺寸推测 <code>size_hint</code></a>和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint">位置推测 <code>pos_hint</code></a>这两个属性来决定<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件<code>children</code></a>的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a> 和 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置<code>pos</code></a>。</p><p><strong>盒式布局 BoxLayout</strong>: 所有控件充满整个空间，以互相挨着的方块的方式来分布，横着或者竖着排列都可以。子控件的 size_hint 属性可以用来改变每个子控件的比例，也可以设置为固定尺寸。</p><p class='item-img' data-src='https://kivy.org/docs/_images/boxlayout1.gif'><img src="https://kivy.org/docs/_images/boxlayout1.gif" alt="../_images/boxlayout1.gif"> <img src="https://kivy.org/docs/_images/gridlayout1.gif" alt="../_images/gridlayout1.gif" class='item-img' data-src='https://kivy.org/docs/_images/gridlayout1.gif'><img src="https://kivy.org/docs/_images/gridlayout1.gif" alt="../_images/gridlayout1.gif"> <img src="https://kivy.org/docs/_images/anchorlayout1.gif" alt="../_images/anchorlayout1.gif" class='item-img' data-src='https://kivy.org/docs/_images/anchorlayout1.gif'><img src="https://kivy.org/docs/_images/anchorlayout1.gif" alt="../_images/anchorlayout1.gif"></p><p><strong>网格布局 GridLayout</strong>: 以一张网格的方式来安排控件。你必须指定好网格的维度，确定好分成多少格，这样 Kivy 才能计算出每个元素的尺寸并且确定如何安排这些元素的位置。</p><p><strong>栈状布局 StackLayout</strong>: 挨着放一个个控件，彼此邻近，在某一个维度上有固定大小，而使它们填充整个空间。 这适合用来显示相同预定义大小的子控件。</p><p><strong>锚式布局 AnchorLayout</strong>: 一种非常简单的布局，只关注子控件的位置。 将子控件放在布局的边界位置。 不支持size_hint。</p><p><strong>浮动布局 FloatLayout</strong>: 允许放置具任意位置和尺寸的子控件，可以是绝对尺寸，也可以是相对布局的相对尺寸。 默认的 size_hint（1，1）会让每个子控件都与整个布局一样大，所以如果你多个子控件就要修改这个值。可以把 size_hint 设置成 (None, None)，这样就可以使用 size 这个绝对尺寸属性。控件也支持 pos_hint，这个属性是一个 dict 词典，用来设置相对布局的位置。</p><p><strong>相对布局 RelativeLayout</strong>: 和浮动布局 FloatLayout 差不多，不同之处在于子控件的位置是相对于布局空间的，而不是相对于屏幕。</p><p>想要深入理解各种布局的话，可以仔细阅读各种文档。</p><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 和 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>:</p><ul><li><a href="https://kivy.org/docs/api-kivy.uix.floatlayout.html#module-kivy.uix.floatlayout" title="kivy.uix.floatlayout"><code>floatlayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout"><code>boxlayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.gridlayout.html#module-kivy.uix.gridlayout" title="kivy.uix.gridlayout"><code>gridlayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.stacklayout.html#module-kivy.uix.stacklayout" title="kivy.uix.stacklayout"><code>stacklayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.relativelayout.html#module-kivy.uix.relativelayout" title="kivy.uix.relativelayout"><code>relativelayout</code></a></li><li><a href="https://kivy.org/docs/api-kivy.uix.anchorlayout.html#module-kivy.uix.anchorlayout" title="kivy.uix.anchorlayout"><code>anchorlayout</code></a></li></ul><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 是一个 <a href="https://kivy.org/docs/api-kivy.properties.html#kivy.properties.ReferenceListProperty" title="kivy.properties.ReferenceListProperty">引用列表属性 <code>ReferenceListProperty</code></a> ，包括 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 两个变量。接收的变量值是从0到1的各种数值，或者 None， 默认值为 (1, 1)。这表示如果控件处在布局之内，布局将会在两个方向分配全部尺寸（相对于布局大小）给该控件。</p><p>举个例子，设置<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 为 (0.5, 0.8)，就会给该<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件<code>Widget</code></a> 分配<a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a> 内50% 宽，80% 高的尺寸。</p><p>例如下面这个例子：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">BoxLayout:<br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span>&#x27;Button 1&#x27;<span class="hljs-variable">&lt;/span&gt;</span><br>        <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># default size_hint is 1, 1, we don&#x27;t need to specify it explicitly&lt;/span&gt;</span><br>        <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># however it&#x27;s provided here to make things clear&lt;/span&gt;</span><br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span><br></code></pre></td></tr></table></figure><p>加载 Kivy 目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">$KIVYDIR</span>/examples/demo/kivycatalog<br>python main.py<br></code></pre></td></tr></table></figure><p>把上面代码中的 $KIVYDIR 替换成你的 Kivy 安装位置。在左边点击标注有 Box Layout 的按钮。 然后将上面的代码粘贴到窗口右侧的编辑器内。</p><p class='item-img' data-src='https://kivy.org/docs/_images/size_hint[B].jpg'><img src="https://kivy.org/docs/_images/size_hint[B].jpg" alt="../_images/size_hint[B].jpg"></p><p>然后你就可以看到上图这样的界面了，这个按钮 Button 会占据整个布局<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a>的 100%。</p><p>修改<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a>&#x2F;<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 为 .5 这就会把<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a> 调整为<a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a> 的50% <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a>&#x2F;<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.height" title="kivy.uix.widget.Widget.height">高度 <code>height</code></a>。</p><p class='item-img' data-src='https://kivy.org/docs/_images/size_hint[b_].jpg'><img src="https://kivy.org/docs/_images/size_hint[b_].jpg" alt="../_images/size_hint[b_].jpg"></p><p>这时候效果如上图所示，虽然我们已经同时指定了 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 和 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 为 .5，但似乎只有对 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 的修改起作用了。这是因为在<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout">盒式布局 <code>boxlayout</code></a>中，当<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#kivy.uix.boxlayout.BoxLayout.orientation" title="kivy.uix.boxlayout.BoxLayout.orientation"><code>orientation</code></a>被设置为竖直方向（vertical） 的时候，<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 由布局来控制，而如果<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#kivy.uix.boxlayout.BoxLayout.orientation" title="kivy.uix.boxlayout.BoxLayout.orientation"><code>orientation</code></a> 被设置为水平方向（horizontal）的时候， <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a> 由布局来控制，所以这些情况手动设定就无效了。 这些受控维度的尺寸，是根据<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a> 在 <a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout"><code>盒式布局 boxlayout</code></a>中的总编号来计算的。在上面的例子中，这个子控件的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a> 是受控的(.5&#x2F;.5 &#x3D; 1)。所以，这里控件就占据了上层布局的整个高度。</p><p>接下来咱们再添加一个<a href="https://kivy.org/docs/api-kivy.uix.button.html#kivy.uix.button.Button" title="kivy.uix.button.Button">按钮 <code>Button</code></a>到这个 <a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a>看看有什么效果。</p><p class='item-img' data-src='https://kivy.org/docs/_images/size_hint[bb].jpg'><img src="https://kivy.org/docs/_images/size_hint[bb].jpg" alt="../_images/size_hint[bb].jpg"></p><p><a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout">盒式布局 <code>boxlayout</code></a> 默认对其所有的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>分配了等大的空间。在咱们这个例子里面，比例是50-50，因为有两个<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>。那么接下来咱们就对其中的一个子控件设置一下 size_hint，然后看看效果怎么样。</p><p class='item-img' data-src='https://kivy.org/docs/_images/size_hint[oB].jpg'><img src="https://kivy.org/docs/_images/size_hint[oB].jpg" alt="../_images/size_hint[oB].jpg"></p><p>从上图可以看出，如果一个子控件有了一个指定的 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a>，这就会决定该<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a>使用<a href="https://kivy.org/docs/api-kivy.uix.boxlayout.html#module-kivy.uix.boxlayout" title="kivy.uix.boxlayout">盒式布局 <code>boxlayout</code></a>提供的空间中的多大比例，来作为自己的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a> 。在我们这个例子中，第一个<a href="https://kivy.org/docs/api-kivy.uix.button.html#kivy.uix.button.Button" title="kivy.uix.button.Button">按钮 <code>Button</code></a> 的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a>设置为了 .5。那么这个控件分配到的空间计算方法如下：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">first</span> child&#x27;s size_hint divided <span class="hljs-keyword">by</span><br><span class="hljs-keyword">first</span> child&#x27;s size_hint + <span class="hljs-keyword">second</span> child&#x27;s size_hint + ...n(no <span class="hljs-keyword">of</span> children)<br><br><span class="hljs-number">.5</span>/(<span class="hljs-number">.5</span>+<span class="hljs-number">1</span>) = <span class="hljs-number">.333</span>...<br></code></pre></td></tr></table></figure><p>盒式布局 BoxLayout 的剩余<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a>会分配给另外的一个<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.children" title="kivy.uix.widget.Widget.children">子控件 <code>children</code></a>。在我们这个例子中，这就意味着第二个<a href="https://kivy.org/docs/api-kivy.uix.button.html#kivy.uix.button.Button" title="kivy.uix.button.Button">按钮 <code>Button</code></a> 会占据整个<a href="https://kivy.org/docs/api-kivy.uix.layout.html#module-kivy.uix.layout" title="kivy.uix.layout">布局 <code>layout</code></a>的 66.66% <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a> 。</p><p>修改 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a> 探索一下来多适应一下吧。</p><p>如果你想要控制一个<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a>的绝对<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a> ，可以把<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_x" title="kivy.uix.widget.Widget.size_hint_x"><code>size_hint_x</code></a>&#x2F;<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint_y" title="kivy.uix.widget.Widget.size_hint_y"><code>size_hint_y</code></a>当中的一个或者两个都设置成 None，这样的话该控件的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.width" title="kivy.uix.widget.Widget.width">宽度 <code>width</code></a> 和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.height" title="kivy.uix.widget.Widget.height">高度 <code>height</code></a>的属性值就会生效了。</p><p><a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a> 是一个词典 dict，默认值是空。相比于<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a>，布局对<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>的处理方式有些不同，不过大体上你还是可以对<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos"><code>pos</code></a> 的各种属性设定某个值来设定<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget" title="kivy.uix.widget.Widget">控件 <code>Widget</code></a>在<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.parent" title="kivy.uix.widget.Widget.parent">父控件 <code>parent</code></a>中的相对位置（可以设定的属性包括：<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.x" title="kivy.uix.widget.Widget.x"><code>x</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.y" title="kivy.uix.widget.Widget.y"><code>y</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.right" title="kivy.uix.widget.Widget.right"><code>right</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.top" title="kivy.uix.widget.Widget.top"><code>top</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.center_x" title="kivy.uix.widget.Widget.center_x"><code>center_x</code></a>, <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.center_y" title="kivy.uix.widget.Widget.center_y"><code>center_y</code></a>）。</p><p>咱们用下面 kivycatalog 中的代码来可视化地理解一下<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">FloatLayout:<br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-string">&quot;We Will&quot;</span><span class="hljs-variable">&lt;/span&gt;</span><br>        pos: <span class="hljs-variable">&lt;span&gt;</span>100<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>100<span class="hljs-variable">&lt;/span&gt;</span><br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>.2<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>.4<span class="hljs-variable">&lt;/span&gt;</span><br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-string">&quot;Wee Wiill&quot;</span><span class="hljs-variable">&lt;/span&gt;</span><br>        pos: <span class="hljs-variable">&lt;span&gt;</span>200<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>200<span class="hljs-variable">&lt;/span&gt;</span><br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>.4<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>.2<span class="hljs-variable">&lt;/span&gt;</span><br><br>    Button:<br>        text: <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-string">&quot;ROCK YOU!!&quot;</span><span class="hljs-variable">&lt;/span&gt;</span><br>        pos_hint: &#123;<span class="hljs-variable">&lt;span&gt;</span>&#x27;x&#x27;<span class="hljs-variable">&lt;/span&gt;</span>: <span class="hljs-variable">&lt;span&gt;</span>.3<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>&#x27;y&#x27;<span class="hljs-variable">&lt;/span&gt;</span>: <span class="hljs-variable">&lt;span&gt;</span>.6<span class="hljs-variable">&lt;/span&gt;</span>&#125;<br>        size_hint: <span class="hljs-variable">&lt;span&gt;</span>.5<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>.2<span class="hljs-variable">&lt;/span&gt;</span><br></code></pre></td></tr></table></figure><p>这份代码的输出效果如下图所示：</p><p class='item-img' data-src='https://kivy.org/docs/_images/pos_hint.jpg'><img src="https://kivy.org/docs/_images/pos_hint.jpg" alt="../_images/pos_hint.jpg"></p><p>说了半天<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size_hint" title="kivy.uix.widget.Widget.size_hint"><code>size_hint</code></a>，你不妨自己试试探索一下 <a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos_hint" title="kivy.uix.widget.Widget.pos_hint"><code>pos_hint</code></a>，来理解一下这个属性对控件位置的效果。</p><h2 id="给布局添加背景"><a href="#给布局添加背景" class="headerlink" title="给布局添加背景"></a>给布局添加背景</h2><p>关于布局，有一个问题经常被问道：</p><p>“怎么给一个布局添加背景图片&#x2F;颜色&#x2F;视频&#x2F;等等……”</p><p>本来默认的各种布局都是没有视觉呈现的：因为布局不像控件，布局是默认不含有绘图指令的。不过呢，还是你可以给一个布局实例添上绘图指令，也就可以添加一个彩色背景了：</p><p>在 Python 中的实现方法：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-variable">&lt;span&gt;</span>from<span class="hljs-variable">&lt;/span&gt;</span> kivy.graphics <span class="hljs-variable">&lt;span&gt;</span>import<span class="hljs-variable">&lt;/span&gt;</span> Color, Rectangle<br><br><span class="hljs-variable">&lt;span&gt;</span>with<span class="hljs-variable">&lt;/span&gt;</span> layout_instance.canvas.before:<br>    Color(<span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>) <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># green; colors range from 0-1 instead of 0-255&lt;/span&gt;</span><br>    self.rect = Rectangle(size=layout_instance.size,<br>                           pos=layout_instance.pos)<br></code></pre></td></tr></table></figure><p>然而很不幸，这样只能在布局的初始化位置以布局的初始尺寸绘制一个矩形。所以还要对布局的尺寸和位置变化进行监听，然后对矩形的尺寸位置进行更新，这样才能保证这个矩形一直绘制在布局的内部。可以用如下方式实现：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>with<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> layout_instance.canvas.before:<br>    Color(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>) <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># green; colors range from 0-1 instead of 0-255<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    self.rect = Rectangle(size=layout_instance.size,<br>                           pos=layout_instance.pos)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>update_rect<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(instance, value)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="hljs-keyword">instance</span>.rect.pos = <span class="hljs-keyword">instance</span>.pos<br>    <span class="hljs-keyword">instance</span>.rect.size = <span class="hljs-keyword">instance</span>.size<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># listen to size and position changes<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>layout_instance.bind(pos=update_rect, size=update_rect)<br></code></pre></td></tr></table></figure><p>在 kv 文件中：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">FloatLayout:<br>    canvas.before:<br>        Color:<br>            rgba: <span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>0<span class="hljs-variable">&lt;/span&gt;</span>, <span class="hljs-variable">&lt;span&gt;</span>1<span class="hljs-variable">&lt;/span&gt;</span><br>        Rectangle:<br>            <span class="hljs-variable">&lt;span&gt;</span><span class="hljs-comment"># self here refers to the widget i.e BoxLayout&lt;/span&gt;</span><br>            pos: self.pos<br>            size: self.size<br></code></pre></td></tr></table></figure><p>上面的 Kv 文件中的生命，就建立了一个隐含的绑定：上面 Kv 代码中的最后两行保证了矩形的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置 <code>pos</code></a>和<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.size" title="kivy.uix.widget.Widget.size">尺寸 <code>size</code></a>会在<a href="https://kivy.org/docs/api-kivy.uix.floatlayout.html#module-kivy.uix.floatlayout" title="kivy.uix.floatlayout">浮动布局 <code>floatlayout</code></a>的<a href="https://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos" title="kivy.uix.widget.Widget.pos">位置 <code>pos</code></a>发生变化的时候进行更新。</p><p>接下来咱们把上面的代码片段放进 Kivy 应用里面。</p><p>纯 Python 方法：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.graphics <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Color, Rectangle<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.button <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Button<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>__init__<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, **kwargs)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># make sure we aren&#x27;t overriding any important functionality<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        super(RootWidget, self).__init_<span class="hljs-number">_</span>(**kwargs)<br><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># let&#x27;s add a Widget to this layout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self.add_widget(<br>            Button(<br>                <span class="hljs-type">text</span>=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&quot;Hello World&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>                size_hint=(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>),<br>                pos_hint=&#123;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_x&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_y&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>&#125;))<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self<span class="hljs-built_in">.root</span> =<span class="hljs-built_in"> root</span> = RootWidget()<br>       <span class="hljs-built_in"> root</span>.bind(size=self._update_rect, pos=self._update_rect)<br><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>with<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span>.canvas.before:<br>            Color(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># green; colors range from 0-1 not 0-255<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>            self.rect = Rectangle(size<span class="hljs-built_in">=root</span>.size, pos<span class="hljs-built_in">=root</span>.pos)<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>_update_rect<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, instance, value)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self.rect.pos = <span class="hljs-keyword">instance</span>.pos<br>        self.rect.size = <span class="hljs-keyword">instance</span>.size<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>使用 Kv 语言：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><span class="hljs-built_in"></span><br><span class="hljs-built_in">root</span> = Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml">FloatLayout:</span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        Color:</span><br><span class="language-xml">            rgba: 0, 1, 0, 1</span><br><span class="language-xml">        Rectangle:</span><br><span class="language-xml">            # self here refers to the widget i.e FloatLayout</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml">    Button:</span><br><span class="language-xml">        text: &#x27;Hello World!!&#x27;</span><br><span class="language-xml">        size_hint: .5, .5</span><br><span class="language-xml">        pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>:.<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>上面这两个应用的效果都如下图所示： <img src="https://kivy.org/docs/_images/layout_background.png" alt="../_images/layout_background.png"></p><h3 id="给自定义布局规则-类增加背景色"><a href="#给自定义布局规则-类增加背景色" class="headerlink" title="给自定义布局规则&#x2F;类增加背景色"></a>给<strong>自定义布局规则&#x2F;类</strong>增加背景色</h3><p>上面那一段中咱们对布局实例增加背景的方法，如果用到很多歌布局里面，那就很快变得特别麻烦了。要解决这种需求，就可以基于布局类 Layout 创建一个自定义的布局子类，给自定义的这个类增加一个背景。</p><p>使用 Python：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.graphics <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Color, Rectangle<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.boxlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> BoxLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.image <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> AsyncImage<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(BoxLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>CustomLayout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>__init__<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, **kwargs)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># make sure we aren&#x27;t overriding any important functionality<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        super(CustomLayout, self).__init_<span class="hljs-number">_</span>(**kwargs)<br><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>with<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> self.canvas.before:<br>            Color(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span># green; colors range from 0-1 instead of 0-255<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>            self.rect = Rectangle(size=self.size, pos=self.pos)<br><br>        self.bind(size=self._update_rect, pos=self._update_rect)<br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>_update_rect<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self, instance, value)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        self.rect.pos = <span class="hljs-keyword">instance</span>.pos<br>        self.rect.size = <span class="hljs-keyword">instance</span>.size<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>       <span class="hljs-built_in"> root</span> = RootWidget()<br>        c = CustomLayout()<br>       <span class="hljs-built_in"> root</span>.add_widget(c)<br>        c.add_widget(<br>            AsyncImage(<br>                source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&quot;http://www.everythingzoomer.com/wp-content/uploads/2013/01/Monday-joke-289x277.jpg&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>                size_hint= (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>),<br>                pos_hint=&#123;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_x&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_y&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>&#125;))<br>       <span class="hljs-built_in"> root</span>.add_widget(AsyncImage(source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;http://www.stuffistumbledupon.com/wp-content/uploads/2012/05/Have-you-seen-this-dog-because-its-awesome-meme-puppy-doggy.jpg&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>))<br>        c = CustomLayout()<br>        c.add_widget(<br>            AsyncImage(<br>                source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&quot;http://www.stuffistumbledupon.com/wp-content/uploads/2012/04/Get-a-Girlfriend-Meme-empty-wallet.jpg&quot;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>                size_hint= (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>),<br>                pos_hint=&#123;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_x&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>, <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;center_y&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>&#125;))<br>       <span class="hljs-built_in"> root</span>.add_widget(c)<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-built_in"> root</span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>使用 Kv 语言：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.boxlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> BoxLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><br>Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>CustomLayout<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        Color:</span><br><span class="language-xml">            rgba: 0, 1, 0, 1</span><br><span class="language-xml">        Rectangle:</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>RootWidget<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    CustomLayout:</span><br><span class="language-xml">        AsyncImage:</span><br><span class="language-xml">            source: &#x27;http://www.everythingzoomer.com/wp-content/uploads/2013/01/Monday-joke-289x277.jpg&#x27;</span><br><span class="language-xml">            size_hint: 1, .5</span><br><span class="language-xml">            pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>:.<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">    AsyncImage:</span><br><span class="language-xml">        source: &#x27;http://www.stuffistumbledupon.com/wp-content/uploads/2012/05/Have-you-seen-this-dog-because-its-awesome-meme-puppy-doggy.jpg&#x27;</span><br><span class="language-xml">    CustomLayout</span><br><span class="language-xml">        AsyncImage:</span><br><span class="language-xml">            source: &#x27;http://www.stuffistumbledupon.com/wp-content/uploads/2012/04/Get-a-Girlfriend-Meme-empty-wallet.jpg&#x27;</span><br><span class="language-xml">            size_hint: 1, .5</span><br><span class="language-xml">            pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>:.<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(BoxLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>CustomLayout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> RootWidget()<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>上面这两个应用的效果都如下图所示：</p><p class='item-img' data-src='https://kivy.org/docs/_images/custom_layout_background.png'><img src="https://kivy.org/docs/_images/custom_layout_background.png" alt="../_images/custom_layout_background.png"></p><p>在自定义布局类中定义了背景之后，就是要确保在自定义布局的各个实例中使用到这个新特性。</p><p>首先，要在<strong>全局上</strong>增加一个图形或者颜色给内置的 Kivy 布局的背景，这就需要将所用布局的默认 Kv 规则进行覆盖。</p><p>就拿网格布局 GridLayout 举例吧：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>GridLayout<span class="hljs-symbol">&amp;gt;</span><br>    canvas.before:<br>        Color:<br>            rgba: <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        BorderImage:<br>            source: <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;../examples/widgets/sequenced_images/data/images/button_white.png&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            pos: self.pos<br>            size: self.size<br></code></pre></td></tr></table></figure><p>接下来把这段代码放到一个 Kivy 应用里面：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><br>Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>GridLayout<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        BorderImage:</span><br><span class="language-xml">            # BorderImage behaves like the CSS BorderImage</span><br><span class="language-xml">            border: 10, 10, 10, 10</span><br><span class="language-xml">            source: &#x27;../examples/widgets/sequenced_images/data/images/button_white.png&#x27;</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>RootWidget<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    GridLayout:</span><br><span class="language-xml">        size_hint: .9, .9</span><br><span class="language-xml">        pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>: .<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">        rows:1</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;I don&#x27;t suffer from insanity, I enjoy every minute of it&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;top&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;When I was born I was so surprised; I didn&#x27;t speak for a year and a half.&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;middle&#x27;</span><br><span class="language-xml">            halign: &#x27;center&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;A consultant is someone who takes a subject you understand and makes it sound confusing&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;bottom&#x27;</span><br><span class="language-xml">            halign: &#x27;justify&#x27;</span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> RootWidget()<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>效果大概如下图所示：</p><p class='item-img' data-src='https://kivy.org/docs/_images/global_background.png'><img src="https://kivy.org/docs/_images/global_background.png" alt="../_images/global_background.png"></p><p>我们已经对网格布局 GridLayout 类的规则进行了覆盖，所以接下来在应用中使用这个类就都会显示那幅图片了。</p><p><strong>动画背景</strong>怎么弄呢？</p><p>就像在矩形Rectangle&#x2F; 边界图像BorderImage &#x2F;椭圆Ellipse&#x2F;等里面添加设置绘图指令一样，可以用一个特定的纹理属性 texture ：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Rectangle:<br>    texture: <span class="hljs-keyword">reference</span> <span class="hljs-keyword">to</span> a texture<br></code></pre></td></tr></table></figure><p>可以用下面的代码实现一个动画背景：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.app <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> App<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.floatlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> FloatLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.gridlayout <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> GridLayout<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.uix.image <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Image<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy.properties <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> ObjectProperty<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>from<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> kivy<span class="hljs-built_in">.lang</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> Builder<br><br><br>Builder.load_string(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;&#x27;&#x27;</span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>CustomLayout<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    canvas.before:</span><br><span class="language-xml">        BorderImage:</span><br><span class="language-xml">            # BorderImage behaves like the CSS BorderImage</span><br><span class="language-xml">            border: 10, 10, 10, 10</span><br><span class="language-xml">            texture: self.background_image.texture</span><br><span class="language-xml">            pos: self.pos</span><br><span class="language-xml">            size: self.size</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-symbol">&amp;lt;</span>RootWidget<span class="hljs-symbol">&amp;gt;</span></span><br><span class="language-xml">    CustomLayout:</span><br><span class="language-xml">        size_hint: .9, .9</span><br><span class="language-xml">        pos_hint: </span><span class="language-xquery">&#123;<span class="hljs-string">&#x27;center_x&#x27;</span>: .<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;center_y&#x27;</span>: .<span class="hljs-number">5</span>&#125;</span><span class="language-xml"></span><br><span class="language-xml">        rows:1</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;I don&#x27;t suffer from insanity, I enjoy every minute of it&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;top&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;When I was born I was so surprised; I didn&#x27;t speak for a year and a half.&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;middle&#x27;</span><br><span class="language-xml">            halign: &#x27;center&#x27;</span><br><span class="language-xml">        Label:</span><br><span class="language-xml">            text: &quot;A consultant is someone who takes a subject you understand and makes it sound confusing&quot;</span><br><span class="language-xml">            text_size: self.width-20, self.height-20</span><br><span class="language-xml">            valign: &#x27;bottom&#x27;</span><br><span class="language-xml">            halign: &#x27;justify&#x27;</span><br><span class="language-xml">&#x27;&#x27;&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>)<br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>CustomLayout<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(GridLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    background_image = ObjectProperty(<br>        Image(<br>            source=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;../examples/widgets/sequenced_images/data/images/button_white_animated.zip&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>,<br>            anim_delay=<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>.1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>))<br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>RootWidget<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(FloatLayout)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>pass<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>MainApp<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(App)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>def<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"> </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>(self)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="language-xml">:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> RootWidget()<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span> __name_<span class="hljs-number">_</span> == <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#x27;__main__&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>:<br>    MainApp().run()<br></code></pre></td></tr></table></figure><p>要理解这里到底发生了什么，得从第 13 行开始看：</p><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs glsl"><span class="hljs-built_in">texture</span>: self.background_image.<span class="hljs-built_in">texture</span><br></code></pre></td></tr></table></figure><p>这里是指定让边界图像 BorderImage 的纹理属性在背景图像 background_image 的纹理属性发生更新的时候进行同步更新。背景图像 background_image 属性的定义是在第 40 行：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">background_image</span> = ObjectProperty(...<br></code></pre></td></tr></table></figure><p>这一句代码是将背景图像 background_image 设置成一个<a href="https://kivy.org/docs/api-kivy.properties.html#kivy.properties.ObjectProperty" title="kivy.properties.ObjectProperty">对象属性 <code>ObjectProperty</code></a>，这样就可以在其中添加一个<a href="https://kivy.org/docs/api-kivy.uix.image.html#kivy.uix.image.Image" title="kivy.uix.image.Image">图形控件 <code>Image</code></a>。图像控件有一个纹理属性（texture property）；在前面的 self.background_image.texture 这句代码中，就是建立了一个名为 texture 的到这个属性的引用。<a href="https://kivy.org/docs/api-kivy.uix.image.html#kivy.uix.image.Image" title="kivy.uix.image.Image">图形控件 <code>Image</code></a> 支持动画（animation）：随着动画的改变，图像的纹理会同步更新，在这个过程中，边界图像 BorderImage 指令的 texture 纹理属性也会同步更新。</p><p>（译者注：texture of BorderImage instruction，这里我对 instruction 的翻译应该是不太对的，不过我还没理清楚该怎么表述。）</p><p>也可以直接传递自定义数据到纹理属性 texture。更多细节可以参考<a href="https://kivy.org/docs/api-kivy.graphics.texture.html#kivy.graphics.texture.Texture" title="kivy.graphics.texture.Texture">纹理 <code>Texture</code> 的文档</a>。</p><h2 id="网状布局"><a href="#网状布局" class="headerlink" title="网状布局"></a>网状布局</h2><p>嗯，看看这个过程如何扩展是很有趣的。</p><h2 id="尺寸和位置度量"><a href="#尺寸和位置度量" class="headerlink" title="尺寸和位置度量"></a>尺寸和位置度量</h2><p>Kivy 的默认长度单位是像素 pixel，所有的尺寸和位置都用这个单位来表达。你也可以用其他单位来衡量，在跨平台多种设备的时候，这有助于实现更好的连续性体验（这些设备会把尺寸自动转换到像素）。</p><p>可用单位包括 <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.pt" title="kivy.metrics.pt"><code>pt</code></a>， <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.mm" title="kivy.metrics.mm"><code>mm</code></a>，<a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.cm" title="kivy.metrics.cm"><code>cm</code></a>, <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.inch" title="kivy.metrics.inch"><code>inch</code></a>， <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.dp" title="kivy.metrics.dp"><code>dp</code></a> and <a href="https://kivy.org/docs/api-kivy.metrics.html#kivy.metrics.sp" title="kivy.metrics.sp"><code>sp</code></a>。可以在<a href="https://kivy.org/docs/api-kivy.metrics.html#module-kivy.metrics" title="kivy.metrics">度量文档 <code>metrics</code></a> 中了解更多相关内容。</p><p>你还可以探索一下<a href="https://kivy.org/docs/api-kivy.modules.screen.html#module-kivy.modules.screen" title="kivy.modules.screen">屏幕模块 <code>screen</code></a>的用法，这个可以模拟出不同设备的屏幕，供测试应用。</p><h2 id="使用屏幕管理器进行屏幕分割"><a href="#使用屏幕管理器进行屏幕分割" class="headerlink" title="使用屏幕管理器进行屏幕分割"></a>使用屏幕管理器进行屏幕分割</h2><p>如果你的应用程序要包含多个程序，那可能就需要从一个<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.Screen" title="kivy.uix.screenmanager.Screen">屏幕 <code>Screen</code></a>到另一个<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.Screen" title="kivy.uix.screenmanager.Screen">屏幕 <code>Screen</code></a>提供一个导航的通道。幸运的是，正好有一个<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.ScreenManager" title="kivy.uix.screenmanager.ScreenManager">屏幕管理器类<code>ScreenManager</code></a>，这个类允许你来定义分开的各个屏幕，设置屏幕管理器的<a href="https://kivy.org/docs/api-kivy.uix.screenmanager.html#kivy.uix.screenmanager.TransitionBase" title="kivy.uix.screenmanager.TransitionBase"><code>TransitionBase</code></a>就可以实现从一个屏幕到另一个屏幕的跳转导航。</p><h1 id="图形"><a href="#图形" class="headerlink" title="图形"></a>图形</h1><p><a href="https://kivy.org/docs/guide/graphics.html">英文原文</a></p><h2 id="译者前言"><a href="#译者前言" class="headerlink" title="译者前言"></a>译者前言</h2><p>这一章节比前两章节简单很多，翻译的也比较顺了。</p><h2 id="简介Canvas"><a href="#简介Canvas" class="headerlink" title="简介Canvas"></a>简介Canvas</h2><p>Kivy中控件图形呈现是使用Canvas完成的，可以将其看作一个无限的绘图板，也是一组绘图指令。有很多种绘图指令都可以应用或者添加到你的Canvas伤，不过总体上分为两类：</p><ul><li><a href="https://kivy.org/docs/api-kivy.graphics.context_instructions.html#module-kivy.graphics.context_instructions"><code>context instructions</code>环境指令</a></li><li><a href="https://kivy.org/docs/api-kivy.graphics.vertex_instructions.html#module-kivy.graphics.vertex_instructions"><code>vertex instructions</code>顶点指令</a></li></ul><p><a href="https://kivy.org/docs/api-kivy.graphics.context_instructions.html#module-kivy.graphics.context_instructions"><code>context instructions</code>环境指令</a>不绘制任何图形，但会改变<a href="https://kivy.org/docs/api-kivy.graphics.vertex_instructions.html#module-kivy.graphics.vertex_instructions"><code>vertex instructions</code>顶点指令</a>的绘制结果。</p><p>Canvas都包含两个指令分支。分别是<a href="https://kivy.org/docs/api-kivy.graphics.html#kivy.graphics.Canvas.before"><code>canvas.before</code></a>和<a href="https://kivy.org/docs/api-kivy.graphics.html#kivy.graphics.Canvas.after"><code>canvas.after</code></a> 这两种指令群。这两组指令分别在<code>Canvas</code>图形绘制前后执行。 绘制前的会被绘制的图形覆盖掉，绘制后的会覆盖在图形上层。这些指令都在用户对它们读取之后才会被创建。</p><p>要对一个控件添加Canvas绘图指令，需要使用Canvas环境指令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWidget</span>(<span class="hljs-title class_ inherited__">Widget</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(MyWidget, self).__init__(**kwargs)<br>        <span class="hljs-keyword">with</span> self.canvas:<br>            <span class="hljs-comment"># add your instruction for main canvas here</span><br>            <span class="hljs-comment"># 这里是增加一个座位主绘图的指令</span><br><br>        <span class="hljs-keyword">with</span> self.canvas.before:<br>            <span class="hljs-comment"># you can use this to add instructions rendered before</span><br>            <span class="hljs-comment"># 这里可以在绘图之前添加指令</span><br><br>        <span class="hljs-keyword">with</span> self.canvas.after:<br>            <span class="hljs-comment"># you can use this to add instructions rendered after</span><br>            <span class="hljs-comment"># 这里可以在绘图之后添加指令</span><br></code></pre></td></tr></table></figure><h2 id="环境指令"><a href="#环境指令" class="headerlink" title="环境指令"></a>环境指令</h2><p>环境指令是用于操作opengl环境。 可以旋转，翻译和缩放画布。还可以附加纹理或更改绘图颜色。下面这段代码里面的是最常用到的更改颜色的指令，其他的环境指令也都很有用处：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">with</span> self.canvas.before:<br>    Color(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">.4</span>, mode=<span class="hljs-string">&#x27;rgb&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="绘图指令"><a href="#绘图指令" class="headerlink" title="绘图指令"></a>绘图指令</h2><p>绘图指令可简可繁，最简单的比如画一个多边形，更复杂的比如绘制网格或者贝塞尔曲线都可以：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">with</span> self.canvas:<br>   <span class="hljs-comment"># draw a line using the default color</span><br>   <span class="hljs-comment"># 用默认颜色画一条线</span><br>   Line(points=(x1, y1, x2, y2, x3, y3))<br><br>   <span class="hljs-comment"># lets draw a semi-transparent red square</span><br>   <span class="hljs-comment"># 接下来画一个半透明的红方块</span><br>   Color(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">.5</span>, mode=<span class="hljs-string">&#x27;rgba&#x27;</span>)<br>   Rectangle(pos=self.pos, size=self.size)<br></code></pre></td></tr></table></figure><h2 id="操作指令"><a href="#操作指令" class="headerlink" title="操作指令"></a>操作指令</h2><p>有时候可能需要把之前添加到Canvas绘图上的指令进行更改或者删除，这可以有很多种办法，要根据具体需求来选择：</p><p>可以给指令创建一个引用然后对其进行更新：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWidget</span>(<span class="hljs-title class_ inherited__">Widget</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(MyWidget, self).__init__(**kwargs)<br>        <span class="hljs-keyword">with</span> self.canvas:<br>            self.rect = Rectangle(pos=self.pos, size=self.size)<br><br>        self.bind(pos=self.update_rect)<br>        self.bind(size=self.update_rect)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_rect</span>(<span class="hljs-params">self, *args</span>):<br>        self.rect.pos = self.pos<br>        self.rect.size = self.size<br></code></pre></td></tr></table></figure><p>或者也可以清空Canvas画布然后重新画：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWidget</span>(<span class="hljs-title class_ inherited__">Widget</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(MyWidget, self).__init__(**kwargs)<br>        self.draw_my_stuff()<br><br>        self.bind(pos=self.draw_my_stuff)<br>        self.bind(size=self.draw_my_stuff)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_my_stuff</span>(<span class="hljs-params">self</span>):<br>        self.canvas.clear()<br><br>        <span class="hljs-keyword">with</span> self.canvas:<br>            self.rect = Rectangle(pos=self.pos, size=self.size)<br></code></pre></td></tr></table></figure><p>要注意更新指令的方法是更好的选择，因为这样减少了开销，并且避免了创建新指令。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Kivy简介&quot;&gt;&lt;a href=&quot;#Kivy简介&quot; class=&quot;headerlink&quot; title=&quot;Kivy简介&quot;&gt;&lt;/a&gt;Kivy简介&lt;/h1&gt;&lt;p&gt;Kivy是Python的Gui的一种。&lt;/p&gt;
&lt;p&gt;网上关于使用python进行ui设计的文档很少，因此为</summary>
      
    
    
    
    
    <category term="Python" scheme="http://zdx-1.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu部署记录</title>
    <link href="http://zdx-1.github.io/2024/07/09/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/"/>
    <id>http://zdx-1.github.io/2024/07/09/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/</id>
    <published>2024-07-09T11:08:01.000Z</published>
    <updated>2024-07-09T13:29:37.733Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ubuntu-20-04-6-live-server-amd64"><a href="#ubuntu-20-04-6-live-server-amd64" class="headerlink" title="ubuntu-20.04.6-live-server-amd64"></a>ubuntu-20.04.6-live-server-amd64</h1><h2 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h2><h3 id="1-制作一个U盘启动盘"><a href="#1-制作一个U盘启动盘" class="headerlink" title="1. 制作一个U盘启动盘"></a>1. 制作一个U盘启动盘</h3><p><strong>Ubuntu</strong> iso<strong>下载地址</strong></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/">清华大学开源软件镜像站</a></p><p><a href="https://cn.ubuntu.com/download">官网下载</a></p><p><strong>制作工具下载</strong></p><p><del>推荐使用rufus，因为免费</del></p><p><a href="https://rufus.org.cn/">安装地址</a></p><p>准备一个U盘，插上U盘，打开rufus，选择镜像文件，具体配置如下：</p><p class='item-img' data-src='/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/image-20240709200710588.png'><img src="/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/image-20240709200710588.png" alt="image-20240709200710588"></p><p>然后点击开始就行了</p><p>等U盘制作完成就可以开始下一步了</p><h3 id="2-设置开机启动项"><a href="#2-设置开机启动项" class="headerlink" title="2. 设置开机启动项"></a>2. 设置开机启动项</h3><h4 id="对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下："><a href="#对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下：" class="headerlink" title="对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下："></a>对于不同的电脑，开机boot方法不同，根据主板品牌，大致如下：</h4><p class='item-img' data-src='/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/SouthEast.png'><img src="/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/SouthEast.png" alt="img"></p><p>笔记本电脑<br>主要按键：Delete, ESC, F1, F2, F10</p><p>品牌笔记本电脑<br>ibm&#x2F;thinkpad（冷开机按f1，部分新型号可以在重新启动时启动按f1，少数机型是Fn+F1或F2）</p><p>惠普hp（启动和重新启动时按f2或者F10，或者先按ESC再按F10）</p><p>索尼sony（启动和重新启动时按f2或者ASSIST键）</p><p>戴尔dell（启动和重新启动时按f2）</p><p>宏碁acer（启动和重新启动时按f2）</p><p>东芝toshiba（冷开机时按esc然后按f1，或者F2）</p><p>惠普康柏hp compaq（开机到右上角出现闪动光标时按f10，或者开机时按f10）</p><p>富士通fujitsu（启动和重新启动时按f2）</p><p>三星Samsung（启动和重新时按f2）</p><p>联想Lenovo(启动时按F2或Fn+F2，部分机型需关机时按Novo恢复键)</p><p>华硕Asus（启动时按F2）</p><p>微星msi（启动时按Delete）</p><p>神舟Hasee（启动时按F2）</p><p>小米、海尔、明基、技嘉、方正、清华同方、雷神、未来人类、外星人、七喜等品牌笔记本也是F2</p><p>台式电脑<br>主要按键：DEL, ESC, F1, F2, F8, F9, F10, F12</p><p>组装机不同主板台式机<br>Award BIOS：按“Del”键</p><p>AMI BIOS：按“Del”或“ESC”键</p><p>Phoenix BIOS：按“F2”键</p><p>品牌台式机<br>ibm&#x2F;thinkpad（冷开机按f1，部分新型号可以在重新启动时启动按f1）</p><p>惠普hp（启动和重新启动时按f2或者F10）</p><p>索尼sony（启动和重新启动时按f2）</p><p>戴尔dell（启动和重新启动时按f2）</p><p>宏碁acer（启动和重新启动时按f2）</p><p>东芝toshiba（冷开机时按esc然后按f1）</p><p>惠普康柏hp compaq（开机到右上角出现闪动光标时按f10，或者开机时按f10）</p><p>富士通fujitsu（启动和重新启动时按f2）</p><p>三星Samsung（启动和重新时按f2）</p><p>联想Lenovo(启动时按F2或Fn+F2，部分机型需关机时按Novo恢复键)</p><p>华硕Asus（启动时按F2）</p><p>大多数中国大陆国产和台湾品牌（启动和重新启动时按f2）</p><h4 id="进入BIOS之后，设置启动方式为移动盘启动"><a href="#进入BIOS之后，设置启动方式为移动盘启动" class="headerlink" title="进入BIOS之后，设置启动方式为移动盘启动"></a>进入BIOS之后，设置启动方式为移动盘启动</h4><p><a href="http://www.kqidong.com/bios/2718.html">用u盘装系统bios怎么设置u盘启动_快启动官网 (kqidong.com)</a></p><p>我测试的时候使用的电脑不支持UEFI,所以选择的是下面这个：（Remouable Dev.移动盘启动)</p><p class='item-img' data-src='/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/1495707536719160_w3m.png'><img src="/./../images/Ubuntu%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/1495707536719160_w3m.png" alt="1st Boot Device"></p><p>设置好之后，按F10进行保存重启，进入下一步</p><h3 id="3-系统安装"><a href="#3-系统安装" class="headerlink" title="3. 系统安装"></a>3. 系统安装</h3><p><a href="https://www.cnblogs.com/huizhipeng/p/18089881">参考文章</a></p><h3 id="4-设置允许ssh使用22端口连接"><a href="#4-设置允许ssh使用22端口连接" class="headerlink" title="4. 设置允许ssh使用22端口连接"></a>4. 设置允许ssh使用22端口连接</h3><p><a href="https://blog.csdn.net/ychgyyn/article/details/90215522#:~:text=%E8%BE%93%E5%85%A5%20passwd%20%EF%BC%8C%E8%BE%93%E5%85%A5%E4%BD%A0%E6%83%B3%E8%A6%81%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E5%AF%86%E7%A0%81%20%E8%BE%93%E5%85%A5%20su,yyn%20%E5%88%87%E6%8D%A2%E5%9B%9E%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%84%B6%E5%90%8E%E5%9C%A8%E8%BE%93%E5%85%A5%20su%20root%20%E5%90%8E%E8%BE%93%E5%85%A5%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E5%AF%86%E7%A0%81%E5%88%87%E6%8D%A2%E5%9B%9EROOT%E7%94%A8%E6%88%B7%E7%9C%8B%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F">参考文章</a></p><h1 id="ubuntu-20-04-6-desktop-amd64-iso"><a href="#ubuntu-20-04-6-desktop-amd64-iso" class="headerlink" title="ubuntu-20.04.6-desktop-amd64.iso"></a>ubuntu-20.04.6-desktop-amd64.iso</h1><p><a href="https://blog.csdn.net/weixin_44023658/article/details/105197092">参考文章</a></p><p>桌面版安装比较简单，制作U盘启动盘前面有样例，故不在记录</p><h1 id="使用宝塔面板进行管理"><a href="#使用宝塔面板进行管理" class="headerlink" title="使用宝塔面板进行管理"></a>使用宝塔面板进行管理</h1><p><a href="https://www.bt.cn/">宝塔面板官网</a></p><p>安装脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec<br></code></pre></td></tr></table></figure><p>在ubuntu命令行中运行即可安装</p><h1 id="使用1panel面板进行管理"><a href="#使用1panel面板进行管理" class="headerlink" title="使用1panel面板进行管理"></a>使用1panel面板进行管理</h1><p><a href="https://1panel.cn/">1panel官网链接</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh &amp;&amp; sudo bash quick_start.sh<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ubuntu-20-04-6-live-server-amd64&quot;&gt;&lt;a href=&quot;#ubuntu-20-04-6-live-server-amd64&quot; class=&quot;headerlink&quot; title=&quot;ubuntu-20.04.6-live-server-a</summary>
      
    
    
    
    
    <category term="系统部署" scheme="http://zdx-1.github.io/tags/%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>vue</title>
    <link href="http://zdx-1.github.io/2024/07/01/vue/"/>
    <id>http://zdx-1.github.io/2024/07/01/vue/</id>
    <published>2024-07-01T05:06:38.000Z</published>
    <updated>2024-07-16T06:45:50.521Z</updated>
    
    <content type="html"><![CDATA[<h1 id="01-Vue简介"><a href="#01-Vue简介" class="headerlink" title="01.Vue简介"></a>01.Vue简介</h1><p class='item-img' data-src='/./../images/vue/image-20240701130838024.png'><img src="/./../images/vue/image-20240701130838024.png" alt="image-20240701130838024"></p><h1 id="02-第一个Vue程序"><a href="#02-第一个Vue程序" class="headerlink" title="02.第一个Vue程序"></a>02.第一个Vue程序</h1><p><a href="http://cn.vuejs.org/">官方文档</a></p><p class='item-img' data-src='/./../images/vue/image-20240715184346174.png'><img src="/./../images/vue/image-20240715184346174.png" alt="image-20240715184346174"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            &#123;&#123;message&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715184937553.png'><img src="/./../images/vue/image-20240715184937553.png" alt="image-20240715184937553"></p><h1 id="03-el挂载点"><a href="#03-el挂载点" class="headerlink" title="03.el挂载点"></a>03.el挂载点</h1><p>el挂载可以使用各种选择器，但是建议使用id选择器，还有就是el不能挂载在body和html标签上。</p><p class='item-img' data-src='/./../images/vue/image-20240715185558945.png'><img src="/./../images/vue/image-20240715185558945.png" alt="image-20240715185558945"></p><p class='item-img' data-src='/./../images/vue/image-20240715185613823.png'><img src="/./../images/vue/image-20240715185613823.png" alt="image-20240715185613823"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>el: 挂载点<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            &#123;&#123;message&#125;&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715185704406.png'><img src="/./../images/vue/image-20240715185704406.png" alt="image-20240715185704406"></p><h1 id="04-data数据对象"><a href="#04-data数据对象" class="headerlink" title="04.data数据对象"></a>04.data数据对象</h1><p class='item-img' data-src='/./../images/vue/image-20240715190222498.png'><img src="/./../images/vue/image-20240715190222498.png" alt="image-20240715190222498"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>data数据对象<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            &#123;&#123;message&#125;&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;school&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            字典获取类型：<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;school.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;campus&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            数组获取类型：<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;campus[0]&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">school</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">campus</span>:[</span><br><span class="language-javascript">                    <span class="hljs-string">&#x27;北京校区&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-string">&#x27;上海校区&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-string">&#x27;广州校区&#x27;</span></span><br><span class="language-javascript">                ]</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715190406665.png'><img src="/./../images/vue/image-20240715190406665.png" alt="image-20240715190406665"></p><h1 id="05-本地应用v-text"><a href="#05-本地应用v-text" class="headerlink" title="05.本地应用v-text"></a>05.本地应用v-text</h1><p class='item-img' data-src='/./../images/vue/image-20240715190544976.png'><img src="/./../images/vue/image-20240715190544976.png" alt="image-20240715190544976"></p><p class='item-img' data-src='/./../images/vue/image-20240715190556655.png'><img src="/./../images/vue/image-20240715190556655.png" alt="image-20240715190556655"></p><p class='item-img' data-src='/./../images/vue/image-20240715190649614.png'><img src="/./../images/vue/image-20240715190649614.png" alt="image-20240715190649614"></p><p class='item-img' data-src='/./../images/vue/image-20240715191018001.png'><img src="/./../images/vue/image-20240715191018001.png" alt="image-20240715191018001"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-test<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;school.name+&#x27;!&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>支持字符串拼接<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">school</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span></span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">               &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715191212239.png'><img src="/./../images/vue/image-20240715191212239.png" alt="image-20240715191212239"></p><h1 id="06-v-html"><a href="#06-v-html" class="headerlink" title="06.v-html"></a>06.v-html</h1><p class='item-img' data-src='/./../images/vue/image-20240715191712002.png'><img src="/./../images/vue/image-20240715191712002.png" alt="image-20240715191712002"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-html<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>       <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>&quot;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;百度&lt;/a&gt;&#x27;</span>,</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715191644260.png'><img src="/./../images/vue/image-20240715191644260.png" alt="image-20240715191644260"></p><h1 id="07-v-on"><a href="#07-v-on" class="headerlink" title="07.v-on"></a>07.v-on</h1><p>元素绑定事件</p><p class='item-img' data-src='/./../images/vue/image-20240715191926946.png'><img src="/./../images/vue/image-20240715191926946.png" alt="image-20240715191926946"></p><p class='item-img' data-src='/./../images/vue/image-20240715192648491.png'><img src="/./../images/vue/image-20240715192648491.png" alt="image-20240715192648491"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-on<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;v-on指令&quot;</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;v-on简写&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;双击事件&quot;</span> @<span class="hljs-attr">dblclick</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;change事件&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeFood&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;food&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">food</span>:<span class="hljs-string">&#x27;苹果&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;show&#x27;</span>)</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">changeFood</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>=<span class="hljs-string">&#x27;香蕉&#x27;</span></span><br><span class="language-javascript">                    &#125;            </span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715192716988.png'><img src="/./../images/vue/image-20240715192716988.png" alt="image-20240715192716988"></p><h1 id="08-计数器"><a href="#08-计数器" class="headerlink" title="08.计数器"></a>08.计数器</h1><p class='item-img' data-src='/./../images/vue/image-20240715193302690.png'><img src="/./../images/vue/image-20240715193302690.png" alt="image-20240715193302690"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>计数器<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            点击直接加减<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count++&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count--&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count=0&quot;</span>&gt;</span>reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                点击调用事件<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sub&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;reset&quot;</span>&gt;</span>reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">count</span>:<span class="hljs-number">0</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">add</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">sub</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">reset</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>=<span class="hljs-number">0</span></span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715193245175.png'><img src="/./../images/vue/image-20240715193245175.png" alt="image-20240715193245175"></p><h1 id="09-v-show"><a href="#09-v-show" class="headerlink" title="09.v-show"></a>09.v-show</h1><p class='item-img' data-src='/./../images/vue/image-20240715193410742.png'><img src="/./../images/vue/image-20240715193410742.png" alt="image-20240715193410742"></p><p class='item-img' data-src='/./../images/vue/image-20240715193804592.png'><img src="/./../images/vue/image-20240715193804592.png" alt="image-20240715193804592"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-show<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show=!show&quot;</span>&gt;</span>显示/隐藏<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;show&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;显示/隐藏&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeShow&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-literal">true</span></span><br><span class="language-javascript">               &#125;,</span><br><span class="language-javascript">               <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                   <span class="hljs-title function_">changeShow</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                       <span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span>=!<span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span></span><br><span class="language-javascript">                   &#125;</span><br><span class="language-javascript">               &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715193723837.png'><img src="/./../images/vue/image-20240715193723837.png" alt="image-20240715193723837"></p><h1 id="10-v-if"><a href="#10-v-if" class="headerlink" title="10.v-if"></a>10.v-if</h1><p class='item-img' data-src='/./../images/vue/image-20240715194327034.png'><img src="/./../images/vue/image-20240715194327034.png" alt="image-20240715194327034"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-if<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>       <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show=!show&quot;</span>&gt;</span>切换<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;times&gt;10&quot;</span>&gt;</span>Hello Vue!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">times</span>:<span class="hljs-number">20</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">show</span>:<span class="hljs-literal">true</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715194335025.png'><img src="/./../images/vue/image-20240715194335025.png" alt="image-20240715194335025"></p><h1 id="11-v-bind"><a href="#11-v-bind" class="headerlink" title="11.v-bind"></a>11.v-bind</h1><p>设置元素的属性</p><p class='item-img' data-src='/./../images/vue/image-20240715195008293.png'><img src="/./../images/vue/image-20240715195008293.png" alt="image-20240715195008293"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-bind<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.active</span>&#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>:red;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">            <span class="hljs-selector-class">.disabled</span>&#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>:gray;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        v-bind<br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive&#125;&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive,disabled:isDisabled&#125;&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classObject&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive,disabled:isDisabled&#125;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeActive&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">url</span>:<span class="hljs-string">&#x27;https://www.baidu.com&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;百度&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">isActive</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">isDisabled</span>:<span class="hljs-literal">false</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">classObject</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">active</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">disabled</span>:<span class="hljs-literal">false</span></span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">changeActive</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span>=!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span>;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715195342158.png'><img src="/./../images/vue/image-20240715195342158.png" alt="image-20240715195342158"></p><h1 id="12-图片切换"><a href="#12-图片切换" class="headerlink" title="12.图片切换"></a>12.图片切换</h1><p class='item-img' data-src='/./../images/vue/image-20240715202051250.png'><img src="/./../images/vue/image-20240715202051250.png" alt="image-20240715202051250"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>切换图片<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            切换图片<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imgUrls[index]&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;index=0&quot;</span>&gt;</span>切换到百度<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;index=1&quot;</span>&gt;</span>切换到QQ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;index=2&quot;</span>&gt;</span>切换到新浪<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span><br>            <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">index</span>:<span class="hljs-number">0</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">imgUrls</span>: [</span><br><span class="language-javascript">                        <span class="hljs-string">&#x27;https://www.baidu.com/img/bd_logo1.png&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-string">&#x27;https://www.qq.com/favicon.ico&#x27;</span>,</span><br><span class="language-javascript">                        <span class="hljs-string">&#x27;https://www.sina.com.cn/favicon.ico&#x27;</span></span><br><span class="language-javascript">                    ],</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715202122889.png'><img src="/./../images/vue/image-20240715202122889.png" alt="image-20240715202122889"></p><h1 id="13-v-for"><a href="#13-v-for" class="headerlink" title="13.v-for"></a>13.v-for</h1><p class='item-img' data-src='/./../images/vue/image-20240715203851376.png'><img src="/./../images/vue/image-20240715203851376.png" alt="image-20240715203851376"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-for<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;school,index in schools&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;index&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;school.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;school.address&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;food in food&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;food.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;food.price&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        添加食物<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;food.name&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;food.price&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addFood&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>删除食物<br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;food.name&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;removeFood&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">schools</span>:[</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;清华大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span>&#125;, </span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;北京大学&#x27;</span>,<span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;北京市海淀区&#x27;</span> &#125;,</span><br><span class="language-javascript">                ],</span><br><span class="language-javascript">                <span class="hljs-attr">food</span>:[</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;苹果&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">10</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;香蕉&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">20</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;西瓜&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">30</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;葡萄&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">40</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;草莓&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">50</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;火龙果&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">60</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;苹果&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">10</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;香蕉&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">20</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;西瓜&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">30</span>&#125;,</span><br><span class="language-javascript">                ]</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addFood</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">name</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">name</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">price</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">price</span></span><br><span class="language-javascript">                    &#125;)</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">removeFood</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">length</span>;i++)&#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>[i].<span class="hljs-property">name</span>==<span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-property">name</span>)&#123;</span><br><span class="language-javascript">                            <span class="hljs-variable language_">this</span>.<span class="hljs-property">food</span>.<span class="hljs-title function_">splice</span>(i,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715203915876.png'><img src="/./../images/vue/image-20240715203915876.png" alt="image-20240715203915876"></p><h1 id="14-v-on补充"><a href="#14-v-on补充" class="headerlink" title="14.v-on补充"></a>14.v-on补充</h1><p class='item-img' data-src='/./../images/vue/image-20240715204348181.png'><img src="/./../images/vue/image-20240715204348181.png" alt="image-20240715204348181"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-on补充<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>点我<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">show</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;show&#x27;</span>)</span><br><span class="language-javascript">                   </span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715204431422.png'><img src="/./../images/vue/image-20240715204431422.png" alt="image-20240715204431422"></p><h1 id="15-v-model"><a href="#15-v-model" class="headerlink" title="15.v-model"></a>15.v-model</h1><p>双向数据绑定</p><p class='item-img' data-src='/./../images/vue/image-20240715204817624.png'><img src="/./../images/vue/image-20240715204817624.png" alt="image-20240715204817624"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-model<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>       <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;message=&#x27;Hello World!&#x27;&quot;</span>&gt;</span>点我<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715204827443.png'><img src="/./../images/vue/image-20240715204827443.png" alt="image-20240715204827443"></p><h1 id="16-记事本-add"><a href="#16-记事本-add" class="headerlink" title="16.记事本-add"></a>16.记事本-add</h1><p class='item-img' data-src='/./../images/vue/image-20240715205108039.png'><img src="/./../images/vue/image-20240715205108039.png" alt="image-20240715205108039"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715205814207.png'><img src="/./../images/vue/image-20240715205814207.png" alt="image-20240715205814207"></p><h1 id="17-记事本-remove"><a href="#17-记事本-remove" class="headerlink" title="17.记事本-remove"></a>17.记事本-remove</h1><p class='item-img' data-src='/./../images/vue/image-20240715211147417.png'><img src="/./../images/vue/image-20240715211147417.png" alt="image-20240715211147417"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715211212882.png'><img src="/./../images/vue/image-20240715211212882.png" alt="image-20240715211212882"></p><h1 id="18-记事本-count"><a href="#18-记事本-count" class="headerlink" title="18.记事本-count"></a>18.记事本-count</h1><p class='item-img' data-src='/./../images/vue/image-20240715211430417.png'><img src="/./../images/vue/image-20240715211430417.png" alt="image-20240715211430417"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记数量<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>&#123;&#123;list.length&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715211459971.png'><img src="/./../images/vue/image-20240715211459971.png" alt="image-20240715211459971"></p><h1 id="19-记事本-clear"><a href="#19-记事本-clear" class="headerlink" title="19.记事本-clear"></a>19.记事本-clear</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记数量<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>&#123;&#123;list.length&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715211640171.png'><img src="/./../images/vue/image-20240715211640171.png" alt="image-20240715211640171"></p><h1 id="20-记事本-hidden"><a href="#20-记事本-hidden" class="headerlink" title="20.记事本-hidden"></a>20.记事本-hidden</h1><p>没有数据时，隐藏元素（v-show,v-for）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>记事本<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>添加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span>清空<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>笔记数量<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>&#123;&#123;list.length&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;list.length&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: aqua;&quot;</span>&gt;</span>笔记列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: aquamarine;&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove(index)&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">list</span>:[</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题1&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容1&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题2&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容2&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题3&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容3&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题4&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容4&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题5&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容5&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题6&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容6&#x27;</span>&#125;,</span><br><span class="language-javascript">                        &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题7&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容7&#x27;</span>&#125;,</span><br><span class="language-javascript">                       &#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;标题8&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;内容8&#x27;</span>&#125;,</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">content</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span></span><br><span class="language-javascript">                        &#125;)</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = []</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">remove</span>(<span class="hljs-params">index</span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">splice</span>(index,<span class="hljs-number">1</span>)</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715212313904.png'><img src="/./../images/vue/image-20240715212313904.png" alt="image-20240715212313904"></p><h1 id="21-axios基本使用"><a href="#21-axios基本使用" class="headerlink" title="21.axios基本使用"></a>21.axios基本使用</h1><p class='item-img' data-src='/./../images/vue/image-20240715212441104.png'><img src="/./../images/vue/image-20240715212441104.png" alt="image-20240715212441104"></p><p class='item-img' data-src='/./../images/vue/image-20240715213219569.png'><img src="/./../images/vue/image-20240715213219569.png" alt="image-20240715213219569"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>axios基本使用<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span>get<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>post<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://api.github.com/users/zhongyuanzhi&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">post</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;Http://example.com/login?username=admin&amp;password=12345&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715213704367.png'><img src="/./../images/vue/image-20240715213704367.png" alt="image-20240715213704367"></p><h1 id="22-axios-vue"><a href="#22-axios-vue" class="headerlink" title="22.axios+vue"></a>22.axios+vue</h1><p class='item-img' data-src='/./../images/vue/image-20240715214835633.png'><img src="/./../images/vue/image-20240715214835633.png" alt="image-20240715214835633"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>axios基本使用<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span>get<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>post<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;message&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;20&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;59&quot;</span>&gt;</span>&#123;&#123;tmp&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">tmp</span>:<span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> that =<span class="hljs-variable language_">this</span>;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://api.github.com/users/zhongyuanzhi&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response;</span><br><span class="language-javascript">                        that.<span class="hljs-property">tmp</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response);</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-title function_">post</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                        axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;Http://example.com/login?username=admin&amp;password=12345&#x27;</span>)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">var</span> response = response.<span class="hljs-property">data</span>;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">url</span>)</span><br><span class="language-javascript">                       &#125;)</span><br><span class="language-javascript">                       .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(error)</span><br><span class="language-javascript">                       &#125;);</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/vue/image-20240715214909054.png'><img src="/./../images/vue/image-20240715214909054.png" alt="image-20240715214909054"></p><h1 id="23-example-weather"><a href="#23-example-weather" class="headerlink" title="23.example-weather"></a>23.example-weather</h1><h2 id="回车查询"><a href="#回车查询" class="headerlink" title="回车查询"></a>回车查询</h2><p class='item-img' data-src='/./../images/vue/image-20240715215204013.png'><img src="/./../images/vue/image-20240715215204013.png" alt="image-20240715215204013"></p><h4 id="墨迹天气API"><a href="#墨迹天气API" class="headerlink" title="墨迹天气API"></a><a href="http://autodev.openspeech.cn/csp/api/v2.1/weather?openId=aiuicus&clientType=android&sign=android&city=%E4%B8%8A%E6%B5%B7&latitude=39.902895&longitude=116.427915&needMoreData=true&pageNo=1&pageSize=7">墨迹天气API</a></h4><h2 id="点击查询"><a href="#点击查询" class="headerlink" title="点击查询"></a>点击查询</h2><p class='item-img' data-src='/./../images/vue/image-20240716140812920.png'><img src="/./../images/vue/image-20240716140812920.png" alt="image-20240716140812920"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Weather App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>  <br>    <span class="hljs-comment">&lt;!-- 引入Vue --&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br>    <span class="hljs-comment">&lt;!-- 引入Axios --&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">  </span><br><span class="language-css">        <span class="hljs-comment">/* 简单的样式 */</span>  </span><br><span class="language-css">        <span class="hljs-selector-id">#app</span> &#123;  </span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span>;  </span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;  </span><br><span class="language-css">        &#125;  </span><br><span class="language-css">        <span class="hljs-selector-tag">input</span>, <span class="hljs-selector-tag">button</span> &#123;  </span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;  </span><br><span class="language-css">        &#125;  </span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>  <br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;city&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter city name&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;getWeather&quot;</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getWeather&quot;</span>&gt;</span>Get Weather<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    &#123;&#123;weather.location[0].fxLink&#125;&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;weather.location[0].fxLink&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">  </span><br><span class="language-javascript">    <span class="hljs-comment">// Vue实例  </span></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;  </span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,  </span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;  </span><br><span class="language-javascript">            <span class="hljs-attr">city</span>: <span class="hljs-string">&#x27;&#x27;</span>,  </span><br><span class="language-javascript">            <span class="hljs-attr">weather</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">code</span>:<span class="hljs-number">200</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">location</span>:[</span><br><span class="language-javascript">                        &#123;</span><br><span class="language-javascript">                           <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;海淀&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;101010200&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">lat</span>: <span class="hljs-string">&quot;39.95607&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">lon</span>: <span class="hljs-string">&quot;116.31032&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">adm2</span>: <span class="hljs-string">&quot;北京&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">adm1</span>: <span class="hljs-string">&quot;北京市&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">country</span>: <span class="hljs-string">&quot;中国&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">tz</span>: <span class="hljs-string">&quot;Asia/Shanghai&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">utcOffset</span>: <span class="hljs-string">&quot;+08:00&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">isDst</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;city&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">rank</span>: <span class="hljs-string">&quot;15&quot;</span>,</span><br><span class="language-javascript">                            <span class="hljs-attr">fxLink</span>: <span class="hljs-string">&quot;https://www.qweather.com/weather/haidian-101010200.html&quot;</span></span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    ],</span><br><span class="language-javascript">                </span><br><span class="language-javascript">            &#125;  </span><br><span class="language-javascript">        &#125;,  </span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;  </span><br><span class="language-javascript">            <span class="hljs-attr">getWeather</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;  </span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">city</span>) &#123;  </span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Please enter a city name!&#x27;</span>);  </span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span>;  </span><br><span class="language-javascript">                &#125;  </span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> vm = <span class="hljs-variable language_">this</span>;  </span><br><span class="language-javascript">                axios.<span class="hljs-title function_">get</span>(</span><br><span class="language-javascript">                    <span class="hljs-string">&quot;https://geoapi.qweather.com/v2/city/lookup?location=&quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">city</span> + <span class="hljs-string">&quot;&amp;key=50a831558a6e47efaf68994e101b0e42&quot;</span>)  </span><br><span class="language-javascript">                    .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) &#123;  </span><br><span class="language-javascript">                        vm.<span class="hljs-property">weather</span> = response.<span class="hljs-property">data</span>;  </span><br><span class="language-javascript">                    &#125;)  </span><br><span class="language-javascript">                    .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) &#123;  </span><br><span class="language-javascript">                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Error fetching weather:&#x27;</span>, error);  </span><br><span class="language-javascript">                        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Failed to fetch weather.&#x27;</span>);  </span><br><span class="language-javascript">                    &#125;);  </span><br><span class="language-javascript">            &#125;  </span><br><span class="language-javascript">        &#125;  </span><br><span class="language-javascript">    &#125;);  </span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;01-Vue简介&quot;&gt;&lt;a href=&quot;#01-Vue简介&quot; class=&quot;headerlink&quot; title=&quot;01.Vue简介&quot;&gt;&lt;/a&gt;01.Vue简介&lt;/h1&gt;&lt;p class=&#39;item-img&#39; data-src=&#39;/./../images/vue/im</summary>
      
    
    
    
    <category term="vue" scheme="http://zdx-1.github.io/categories/vue/"/>
    
    
    <category term="vue" scheme="http://zdx-1.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>专升本英语</title>
    <link href="http://zdx-1.github.io/2024/06/22/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/"/>
    <id>http://zdx-1.github.io/2024/06/22/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/</id>
    <published>2024-06-22T01:46:29.000Z</published>
    <updated>2024-06-24T13:16:17.746Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2024-6-18"><a href="#2024-6-18" class="headerlink" title="2024-6-18"></a>2024-6-18</h1><h2 id="1-中英文句子的对比"><a href="#1-中英文句子的对比" class="headerlink" title="1. 中英文句子的对比"></a>1. 中英文句子的对比</h2><h2 id="1-英语学习的最小单位是句子（而不是单词）"><a href="#1-英语学习的最小单位是句子（而不是单词）" class="headerlink" title="1.英语学习的最小单位是句子（而不是单词）"></a>1.英语学习的最小单位是句子（而不是单词）</h2><h2 id="2-什么是英语的句子？"><a href="#2-什么是英语的句子？" class="headerlink" title="2.什么是英语的句子？"></a>2.什么是英语的句子？</h2><h3 id="（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“建决要命”（建议）（决定）（要求）（命令）时才可以用。"><a href="#（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“建决要命”（建议）（决定）（要求）（命令）时才可以用。" class="headerlink" title="（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“建决要命”（建议）（决定）（要求）（命令）时才可以用。"></a>（1）英语的句子可以没有主语，那就是动词原形开头，成为祈使句，在表示“<font color="red">建决要命”（建议）（决定）（要求）（命令）</font>时才可以用。</h3><ol><li><p>放松。</p><p>Relax.v.</p></li><li><p>请进来。 </p><p>Please come in.||Come in,please.     please既可以在句首也可以句末。</p></li><li><p>走吧。</p><p> Let’s go.      let  就是动原（动词原形），“使，让”   let us go.</p></li><li><p>别笑。</p><p>Don’t laugh.<br/>否定句——要加否定词 not<br/>肯定句</p></li></ol><h4 id="祈使句小结"><a href="#祈使句小结" class="headerlink" title="祈使句小结"></a>祈使句小结</h4><p>除了动词原形直接开头，还可以：</p><ul><li><p>please&lt;&#x3D;&#x3D;&gt;请</p></li><li><p>如果是否定，需要加don’t,或者Never (laugh)</p></li><li><p>有种特别常用的祈使句是let’s do</p></li></ul><h3 id="2-英语句子可以没有宾语，即动作后面没有承受者"><a href="#2-英语句子可以没有宾语，即动作后面没有承受者" class="headerlink" title="(2)英语句子可以没有宾语，即动作后面没有承受者"></a>(2)英语句子可以没有宾语，即动作后面没有承受者</h3><p>补充：主语是句中动作的发出者；宾语是句中动作的承受者</p><ol start="5"><li><p>她笑了    She laughs.</p><p>&#x3D;&gt;<font color="red">句中的动作要用动词表示，而英语中的动词是有变化的。(痛点)P26</font></p></li></ol><p>动词变化的五种形式：(<a href="#vi">跳转链接</a>)</p><ul><li>原形</li><li>三单（第三人称单数）——变形条件：</li></ul><p>​<font color="RoyalBlue">a.主语是第三人称单数（人称分为第一人称，“我，我们”；第二人称“你，你们；第三人称”除了一二人称，都是第三&#x3D;&#x3D;&gt;也就是说名词都是第三人称。</font></p><p>​<font color="RoyalBlue">b.时态是一般现在时</font></p><ul><li>现在分词&#x3D;&#x3D;&gt;动词后面+ing</li><li>过去式——变形条件：1时态是一般过去时2主语一般没有要求  &#x3D;&#x3D;&gt;一般动词后面+ed</li></ul><ol start="6"><li><p>他失败了。</p><p> 汉译英，很重要的一点是要判断时态</p><p>&#x3D;&#x3D;&gt;He failed. 汉语中的“了，过”，对应英语“-ed”</p></li></ol><h4 id="主谓结构小结"><a href="#主谓结构小结" class="headerlink" title="主谓结构小结"></a>主谓结构小结</h4><p>   动词后面没有宾语，称为“主谓”，这是完整句，此时的动词，在英语中称为“不及物动词vi”</p><h4 id="宾语小结"><a href="#宾语小结" class="headerlink" title="宾语小结"></a>宾语小结</h4><p>宾语一般跟在动词和介词后，分别称为动宾和介宾</p><p>look at me&#x2F;us&#x2F;you&#x2F;him&#x2F;her&#x2F;it&#x2F;them</p><h3 id="3-英语句子中必须有谓语，而且只能有一个（有且仅有）"><a href="#3-英语句子中必须有谓语，而且只能有一个（有且仅有）" class="headerlink" title="(3)英语句子中必须有谓语，而且只能有一个（有且仅有）"></a>(3)英语句子中必须有谓语，而且只能有一个（有且仅有）</h3><p>​谓语是由动词来充当的，动词分为两种，一种表示动作，一种表示“非动作”</p><ol start="7"><li><p>阿珍爱阿强</p><p>Azhen loves Aqiang.</p><p>只有一般现在时，才需要考虑“动词的三单”形式</p></li><li><p>中国人不骗中国人</p><p>动词是“骗”，“不”是否定词</p><p>先想时态——一般现在时</p><p>Chinese don’t cheat&#x2F;pian Chinese.</p></li><li><p>你很漂亮</p><p>找动词——没有——是说明这句话中没有表示“动作”的词</p><p>You are very&#x2F;so beautiful.</p><p>are——是怎么来的</p><p>are 是be的变形；be的意思是“是”</p><p>你是很漂亮。</p><p>补充：如果在汉译英过程中，汉语句中不体现动作，那么英语句子就要用以be为代表的一类动词——联系动词——不代表主语发出对宾语的动作，而是主语自己的状态、性质、变化……</p><p>补充2：动词分为表示动作的“实义动词”和不表示动作的“联系动词-be”</p></li><li><p>英语很重要</p><p>无论用什么动词，都要先想时态</p><p>一般现在时</p><p>English is exceedingly&#x2F;extraordinarily important.</p><p><font color="Turquoise">很 very&#x3D;&#x3D;&gt;exceedingly、extraordinarily</font></p></li></ol><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>​表示动作的实义&#x2F;意动词（英语中还有一种动词是“使役动词”，后面单独讲），动作如果能直接跟宾语，就是及物动词vt；如果不能直接跟宾语，就是不及物动词vi——P22</p><ol start="11"><li>遥墙机场就要到了</li></ol><p>补充：汉译英的步骤</p><ul><li><p>找汉语句中的动词</p></li><li><p>判断动词表示的动作的发出者——主语</p></li><li><p>然后判断发出者和动作的关系（主被动关系）</p></li><li><p>然后确定句子的时态</p></li></ul><p>We are arriving at Yaoqiang Airport.</p><p>Our flight is arriving at Yaoqiang Airport.</p><p>be——变形am,is,are</p><ol start="12"><li><p>我要去剪头</p><p>主语是能够发出动作的人，句中主要的动作是“剪”</p><p>cut hair</p><p>Tony will cut my hair.</p></li></ol><h4 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h4><p>​    找句子的主语，一定要先判断句子的动词——主语就是能够发出这个动作的人或事（主语就是句中动作的发出者）</p><h1 id="2024-6-23"><a href="#2024-6-23" class="headerlink" title="2024-6-23"></a>2024-6-23</h1><ol start="13"><li><p>飞机上有很多饮料</p><p>-&gt;”汉语没有语法性？”,汉语省略了很多东西</p><ol><li><p>动词 –有</p></li><li><p>动词发出者—不明确，甚至可以说没有</p><p>there be “有”</p><p>还有一个表示“有”——have</p><p>–&gt;举例：</p><p>​我有女朋友。</p><p>​I have a girlfriend.</p><p>很多的表达————&gt;</p><p>​普通的：many&#x2F;a lot of&#x2F;a lots of </p><p>There are  <font color="red">various&#x2F;a variety of</font>drinks on the plane.</p><p><font color="blue">地点的前面要加介词。</font></p></li></ol></li></ol><h4 id="小结-there-be-句型的使用条件"><a href="#小结-there-be-句型的使用条件" class="headerlink" title="小结:there be 句型的使用条件"></a>小结:there be 句型的使用条件</h4><ol><li><p>句中的动作是“有”</p></li><li><p>“有”的发出者不明确</p></li><li><p>从前有座山</p><p>There was a mountain long long ago.</p><p>Long long ago,there was a mountain.</p><p>时间状语可以在句首或句尾</p></li><li><p>有朋自远方来，不亦乐乎<br>​有个朋友从远方来，我非常开心。</p><ol><li><p>先找动词</p></li><li><p>有——动作发出者不明确</p></li></ol></li><li><p>一个句子中</p></li></ol><pre><code>方案一：试试三个句子There is a friend.Come from a far place.I am very happy.  祈使句：Come from a place.(&quot;从远方来&quot;)方案二：如果一个句中，有多余一个的谓动，可以保留一个做谓动，另外一个变成非谓语动词（由动词变化而来，不做谓语的形式——doing 主动/done 被动/to do 目的，将来）There is a friend coming from a far place.Iam exceedingly delighted.​补充例子：你爱我，我爱你，蜜雪冰城甜蜜蜜。​方案一：You love me,I love you,MXBC  is sweet.​英语中不存在叠词。​方案二：You loving me,I loving you,MXBC is sweet.​&lt;font color=&quot;red&quot;&gt;独立主格结构&lt;/font&gt;​    </code></pre><h2 id="2-英语句子的标志"><a href="#2-英语句子的标志" class="headerlink" title="2.英语句子的标志"></a>2.英语句子的标志</h2><h3 id="专升本英语考试的最小单位是句子。"><a href="#专升本英语考试的最小单位是句子。" class="headerlink" title="专升本英语考试的最小单位是句子。"></a>专升本英语考试的最小单位是句子。</h3><h3 id="英语句子的标志"><a href="#英语句子的标志" class="headerlink" title="英语句子的标志"></a>英语句子的标志</h3><ol><li>句首单词首字母大写</li><li>句尾是三个标点（句号，问号，感叹号）英语的句号是.</li><li>句中带有时态，语态，情态，主谓一致的谓语动词（3态1致）</li></ol><h3 id="3-英语简单句的类型"><a href="#3-英语简单句的类型" class="headerlink" title="3.英语简单句的类型"></a>3.英语简单句的类型</h3><ol><li>祈使句</li><li>there be</li><li>主谓</li><li>主谓宾</li><li>主系表</li><li>主谓双宾</li><li>主谓宾宾补</li></ol><h2 id="3-句子完整的概念"><a href="#3-句子完整的概念" class="headerlink" title="3.句子完整的概念"></a>3.句子完整的概念</h2><p>1.简单句：有且仅有一个谓动的句子</p><ul><li>主干部分：主谓宾表补</li><li>附属部分（修饰成分）：定语，状语，同位语</li></ul><p>2.并列句：由“并列连词”连接的两个或多个简单句</p><p>3.主从复合句</p><p><strong>补充</strong>：</p><p>not是最常用的否定副词，但是有很多单词可以来代替它</p><p>hardly 几乎不&#x2F;never 绝不&#x2F;rarely 几乎不&#x2F;little 几乎不</p><p>not…but… 可以变成hardly…but…;never…but…;rarely…but rather…不是…而是</p><p><a id="bllc">常考并列连词</a></p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>表示并列关系的并列连词</td><td>and<br />和</td><td>both……and……<br />两者都</td></tr><tr><td></td><td></td><td>not only(just,merely,solely)……but(also)(too)(as well)<br />不仅……而且……</td></tr><tr><td></td><td></td><td>not…but…&#x2F;not…but only…&#x2F;not…but rather…&#x2F;hardly…but just…<br />不是…而是…</td></tr><tr><td></td><td></td><td>neither…nor…&#x2F;not…nor… 既不…也不…</td></tr><tr><td>表示选择关系的并列连词</td><td>or<br />或者</td><td>either…or..或者…或者…,or else 或者</td></tr><tr><td>表示对比关系的并列连词</td><td>while&#x2F;whereas<br />而</td><td>*作为并列连词，不放在句首</td></tr><tr><td>表示转折关系的并列连词</td><td>but 但是&#x2F;yet 然而，但是&#x2F;only（但是，可是）</td><td>and yet 然而，但是</td></tr><tr><td>表示原因关系的并列连词</td><td>for</td><td>*只能在句中，且在逗号后</td></tr><tr><td>表示结果关系的并列连词</td><td>so</td><td></td></tr></tbody></table><p><a>常考从句引导词</a></p><table><thead><tr><th>最强搭配</th><th>that <span />引导词的从句类型最多，而且用法最多，使用频率最高<br />看到that想从句</th></tr></thead><tbody><tr><td>wh-代词类</td><td>what（表示名词），who（表示人），which（表示物，有时候会是“介词+which”），whose+n（表示谁的什么）</td></tr><tr><td>wh-副词类</td><td>when（和时间有关），where（和地点有关），why（和原因有关），how（和“怎样””多么“有关）</td></tr><tr><td>wh-连词类</td><td>whether（一般和or not搭配使用，表示”是否“）</td></tr><tr><td>其他常考引导词</td><td>1. while&#x2F;as 意思和用法都非常多<br />2.although（虽然，尽管），though（尽管）（也可以做副词用）<br />3.because（因为）<br />4.before（和”前“有关），after（和”后“有关）<br />5.since（意思很多，主要是”自从“）<br />6.until（主要考点是not……until……直到……才……）<br />7.if（如果）<br />8.once（一旦）<br />9.unless（除非）<br />10.than（比）</td></tr></tbody></table><p><a id="vi">动词的五种形式</a></p><table><thead><tr><th>类型</th><th>原形</th><th>三单</th><th>现在分词</th><th>过去式</th><th>过去分词</th></tr></thead><tbody><tr><td>中规中矩型</td><td>ask</td><td>asks</td><td>asking</td><td>asked</td><td>asked</td></tr><tr><td></td><td>look</td><td>looks</td><td>looking</td><td>looked</td><td>looked</td></tr><tr><td>y结尾变化型</td><td>try</td><td>tries</td><td>trying</td><td>tried</td><td>tried</td></tr><tr><td>y结尾不变型</td><td>play</td><td>plays</td><td>playing</td><td>played</td><td>played</td></tr><tr><td>双写型</td><td>stop</td><td>stops</td><td>stopping</td><td>stopped</td><td>stopped</td></tr><tr><td></td><td>begin</td><td>begins</td><td>beginning</td><td>began</td><td>begun</td></tr><tr><td></td><td>control</td><td>controls</td><td>controlling</td><td>controlled</td><td>controlled</td></tr><tr><td>不双写型</td><td>open</td><td>opens</td><td>opening</td><td>opened</td><td>opened</td></tr><tr><td></td><td>ifx</td><td>fixes</td><td>fixing</td><td>fixed</td><td>dixed</td></tr><tr><td>可双可不双型</td><td>travel</td><td>travels</td><td>travelling</td><td>travelled</td><td>travelled</td></tr><tr><td>+es型</td><td>watch</td><td>watches</td><td>watching</td><td>watched</td><td>watched</td></tr><tr><td></td><td>go</td><td>goes</td><td>going</td><td>went</td><td>gone</td></tr><tr><td>去e型</td><td>live</td><td>lives</td><td>living</td><td>lived</td><td>lived</td></tr><tr><td>-c结尾型</td><td>picnic</td><td>picnics</td><td>picnicking</td><td>picnicked</td><td>picnicked</td></tr><tr><td>一身反骨型</td><td>have</td><td>has</td><td>having</td><td>had</td><td>had</td></tr><tr><td></td><td>be</td><td>(am)is are</td><td>being</td><td>was&#x2F;were</td><td>been</td></tr></tbody></table><h2 id="选词填空的做题步骤："><a href="#选词填空的做题步骤：" class="headerlink" title="选词填空的做题步骤："></a>选词填空的做题步骤：</h2><ol><li><p>先看选项（15&#x2F;12&#x2F;10），重点看词尾</p></li><li><p>看横线所在句，先标点（分区），再谓动，看是几个谓语动词，如果只有一个，那就是简单句，如果有多个，那就要考虑并列句（并列连词）或主从复合句（引导词）</p><p>考点练习：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">A.helpful B.than C.attraction D.that E.who F.in<br>G.respected H.win I.because J.giving K.without L.equally<br></code></pre></td></tr></table></figure><p>Why are we not treated sometimes as expected?<font color="red">It’s  <u>   空</u> we do</font> the same to others who have expectations from us.</p></li></ol><p>​需要引导词或并列连词，看给出单词，没有并列连词，因此是引导词，than&#x2F;that&#x2F;who&#x2F;because,此时一定先找考点”心中有丘壑，眼中有考点“——前why，后because</p><h1 id="2024-6-24"><a href="#2024-6-24" class="headerlink" title="2024-6-24"></a>2024-6-24</h1><h2 id="P19-谓动的标志"><a href="#P19-谓动的标志" class="headerlink" title="P19 谓动的标志"></a>P19 谓动的标志</h2><ol><li><p>必要性：在词汇量不够大的情况下，能够识别最典型的谓动</p><ol><li><p>am is are was were</p></li><li><p>do does did</p></li><li><p>has have had</p></li><li><p>情态动词（+动词原形）</p></li><li><p>动词过去式</p></li></ol></li></ol><p>Precious metals gradually <strong>took</strong> over <strong>because</strong> they <strong>were</strong> portable,durable,recognizable,and divisible into larger and smaller of value.</p><p>补充：从句从什么开始，到什么结束</p><p>​从引导词开始到标点结束或者引导词后面第二个谓动之前结束。</p><p>补充：当多个逗号同时出现在附近的位置，且后面不远处就有并列连词，尤其是and，这些逗号，都是代替and</p><h3 id="谓语动词的要素3态1一致"><a href="#谓语动词的要素3态1一致" class="headerlink" title="谓语动词的要素3态1一致"></a>谓语动词的要素3态1一致</h3><h3 id=""><a href="#" class="headerlink" title=""></a class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624174621887.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624174621887.png" alt="image-20240624174621887"></h3><p>​forecast 预测，预告cancer 癌症 rate 率ans：C indicates</p><h3 id="做题步骤："><a href="#做题步骤：" class="headerlink" title="做题步骤："></a>做题步骤：</h3><ol><li><p>先看标点，找到逗号前后看，but是并列连词，说明前后是并列，而横线在后面，所以but前面的部分可以先不看。</p></li><li><p>把but后面的内容当成一个整体，再切分，看到两个挨得很近的逗号，中间为插入语，<br><font color="red">,but the newest finding,</font>先不看</p></li><li><p>看到that想从句，看到have谓动标志，因此that…have…是从句，横线不在从句中</p></li><li><p>看主句缺什么？缺谓动4要素：时态，语态，情态，主谓一致，在选词填空中，一般判断出来缺谓动，只需要考虑时态和主谓一致</p></li><li><p>补充：英语的时态有16种，一般可以简单的分为2种（过去和现在）过去就是所有名称中带着过去的；其他都归于现在</p><p>has&#x2F;have&#x2F;done都是现在完成时，他们对应的就应该是现在的时态：一般现在时，现在进行时</p><p>过去完成时 had done，对应过去的时态——一般过去时，过去进行时</p><h3 id="考点：4大金刚"><a href="#考点：4大金刚" class="headerlink" title="考点：4大金刚"></a>考点：4大金刚</h3><p><strong>study是研究，study&#x2F;research</strong></p><p><strong>调查survey（investigation）</strong><br><strong>实验   experiment(trial)</strong></p><p><strong>finding 发现（conclusion）</strong></p><p>indicate 表明</p><p>hit…level 达到…水平&#x2F;程度</p></li></ol><p class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624181648187.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624181648187.png" alt="image-20240624181648187"></p><p>补充：句首的并列连词，作用是连接本句和上一句，因此，对本句后面的内容，就没有影响了。</p><p>补充：like如果在逗号前或后，尤其是在插入语中，like是介词，“像…,比如说…”;多个逗号同时出现在附近，后面有and</p><p>考点：并列考点</p><p>看到and找并列，从前往后，一一对应，前面有什么，后面也要在词性，词形，<br class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624183502979.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624183502979.png" alt="image-20240624183502979"></p><p>​fufillment满足感achievement成就感</p><p>看到and找并列从后往前</p><p>beside 除此之外however 然而，前后是转折</p><p class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624184003758.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624184003758.png" alt="image-20240624184003758"></p><p>​逗号后面有两个谓动，说明至少需要一个并列连词或引导词（并&#x2F;引）</p><p>broad 宽广的</p><p>in the briadest sense 从最广义来说</p><p>in…sense 从…意义上来说</p><p class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624184629562.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624184629562.png" alt="image-20240624184629562"></p><p>moderate adj.适中的</p><p>assure sb 让某人放心</p><p class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624185804644.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624185804644.png" alt="image-20240624185804644"></p><p class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624190608921.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624190608921.png" alt="image-20240624190608921"><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624200105726.png" alt="image-20240624200105726"></p><p class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624195933726-1719230375233-1.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624195933726-1719230375233-1.png" alt="image-20240624195933726"></p><p>还要注意：有很多副词是由其形容词+ly变化而来，但是意思发生了改变</p><p class='item-img' data-src='/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624200527992.png'><img src="/./../images/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/image-20240624200527992.png" alt="image-20240624200527992"></p><h2 id="P160各种词性后缀"><a href="#P160各种词性后缀" class="headerlink" title="P160各种词性后缀"></a>P160各种词性后缀</h2><h3 id="常考不带ly的副词"><a href="#常考不带ly的副词" class="headerlink" title="常考不带ly的副词"></a>常考不带ly的副词</h3><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>very 非常</td><td>much 非常</td><td>well 非常</td><td>quite 非常</td><td>pretty 非常，特别</td><td>rather 非常</td></tr><tr><td>often 经常</td><td>hard 勤奋地</td><td>already 已经</td><td>almost 几乎</td><td>still 仍然；但，不过</td><td>then 接着，另一个</td></tr><tr><td>fast 快地</td><td>perhaps 可能</td><td>enough 足够的</td><td>just 仅仅</td><td>once 一次</td><td>little 很少的</td></tr><tr><td>even 甚至</td><td>alone 独自</td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="带ly但实际是形容词"><a href="#带ly但实际是形容词" class="headerlink" title="带ly但实际是形容词"></a>带ly但实际是形容词</h3><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>Friendly 友好的</td><td>lovely 可爱的</td><td>Lively 活泼的</td><td>likely 可能的</td><td>lonely 孤独的</td><td>elderly 年纪较大的</td></tr><tr><td>costly 贵的</td><td>Weekly 每周的</td><td>Monthly 每月的</td><td>quarterly 季度的</td><td>daily 每天的</td><td>deadly 致命的</td></tr><tr><td>silly 傻的</td><td>fatherly 父亲般的</td><td>motherly 母亲般的</td><td>brotherly 兄弟般的</td><td>orderly 有秩序的</td><td>ugly 丑的</td></tr><tr><td>kindly 善良的</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;2024-6-18&quot;&gt;&lt;a href=&quot;#2024-6-18&quot; class=&quot;headerlink&quot; title=&quot;2024-6-18&quot;&gt;&lt;/a&gt;2024-6-18&lt;/h1&gt;&lt;h2 id=&quot;1-中英文句子的对比&quot;&gt;&lt;a href=&quot;#1-中英文句子的对比&quot; cla</summary>
      
    
    
    
    <category term="专升本" scheme="http://zdx-1.github.io/categories/%E4%B8%93%E5%8D%87%E6%9C%AC/"/>
    
    
    <category term="专升本英语" scheme="http://zdx-1.github.io/tags/%E4%B8%93%E5%8D%87%E6%9C%AC%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>四级英语备考</title>
    <link href="http://zdx-1.github.io/2024/06/11/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/"/>
    <id>http://zdx-1.github.io/2024/06/11/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/</id>
    <published>2024-06-11T07:55:05.000Z</published>
    <updated>2024-06-14T12:14:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、听力部分（248-5-249分）"><a href="#一、听力部分（248-5-249分）" class="headerlink" title="一、听力部分（248.5~&#x3D;249分）"></a>一、听力部分（248.5~&#x3D;249分）</h1><h2 id="题型构成"><a href="#题型构成" class="headerlink" title="题型构成"></a>题型构成</h2><p>听力最低得分142</p><p>四六级是加权分</p><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611155738950.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611155738950.png" alt="image-20240611155738950"></p><h2 id="听力应对策略"><a href="#听力应对策略" class="headerlink" title="听力应对策略"></a>听力应对策略</h2><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611155954749.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611155954749.png" alt="image-20240611155954749"></p><h3 id="听之前Pre-listening"><a href="#听之前Pre-listening" class="headerlink" title="听之前Pre-listening"></a>听之前Pre-listening</h3><p><strong>看选项</strong></p><h4 id="听力选项中，大写的专有名词不是定位词（听力中一定会出现）"><a href="#听力选项中，大写的专有名词不是定位词（听力中一定会出现）" class="headerlink" title="听力选项中，大写的专有名词不是定位词（听力中一定会出现）"></a>听力选项中，<font color="red">大写的专有名词不是定位词</font>（听力中一定会出现）</h4><p>听力定位词指的是：我听到就可以选的单词，也就是区别于其他选项</p><p>通常定位词是：名词，较长的单词，动词，形容词</p><p>如果不认识，如何识别名词：</p><ul><li><p>of前后</p></li><li><p>连字符的后面（前面是两个用连字符连起来单词，后面那个）</p></li><li><p>‘s所有格后面</p></li><li><p>形容词性物主代词（代词所有格 my our your）</p></li><li><p>冠词 a&#x2F;an&#x2F;the</p></li><li><p>介词后</p></li></ul>  <font color="blue">  关于数字的补充：数字不能作为主要的定位词，但是可以作为选项完整信息来辅助选择</font><p>  <font color="blue">关于定位词的补充：定位词通常是作为一个整体（短语）而不是单独的某个单词，尤其是他们之间有修饰关系的时候<br>  </font></p><h3 id="比对选项，找出共同点和不同点：通过选项，判断可能的问题"><a href="#比对选项，找出共同点和不同点：通过选项，判断可能的问题" class="headerlink" title="比对选项，找出共同点和不同点：通过选项，判断可能的问题"></a>比对选项，找出共同点和不同点：通过选项，判断可能的问题</h3><p>没有时间 可以省略 适合听力150分往上的使用</p><h3 id="听中During-listening"><a href="#听中During-listening" class="headerlink" title="听中During-listening"></a>听中During-listening</h3><h3 id="听后After-listening"><a href="#听后After-listening" class="headerlink" title="听后After-listening"></a>听后After-listening</h3><h2 id="听力原则详解"><a href="#听力原则详解" class="headerlink" title="听力原则详解"></a>听力原则详解</h2><h2 id="1、位置原则——命题原则：做题原则"><a href="#1、位置原则——命题原则：做题原则" class="headerlink" title="1、位置原则——命题原则：做题原则"></a>1、位置原则——命题原则：做题原则</h2><h3 id="首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）"><a href="#首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）" class="headerlink" title="首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）"></a>首题——答案在开篇前3句中（要练习听力中句子停顿的感觉）</h3><p><strong>出现的越早越是答案</strong></p><p>例外非常少</p><h3 id="中间题——（很多时候不是听不懂，而是跟不上）一定要利用信号词"><a href="#中间题——（很多时候不是听不懂，而是跟不上）一定要利用信号词" class="headerlink" title="中间题——（很多时候不是听不懂，而是跟不上）一定要利用信号词"></a>中间题——（很多时候不是听不懂，而是跟不上）一定要利用<strong>信号词</strong></h3><p><strong>信号词</strong></p><p><strong>听力不能翻译</strong>，一旦翻译时间一定跟不上</p><h3 id="尾题——通常出现在快要结束的地方（关键词：questions）"><a href="#尾题——通常出现在快要结束的地方（关键词：questions）" class="headerlink" title="尾题——通常出现在快要结束的地方（关键词：questions）"></a>尾题——通常出现在快要结束的地方（关键词：questions）</h3><ul><li>explosion</li><li>汉语拼音就是根据国际音标而来<ul><li>韵母aoeiu</li><li>元音aeiou</li><li>生母b &#x2F;b&#x2F;</li></ul></li></ul><h2 id="2、信号词原则（10种听力信号词）"><a href="#2、信号词原则（10种听力信号词）" class="headerlink" title="2、信号词原则（10种听力信号词）"></a>2、信号词原则（10种听力信号词）</h2><h3 id="转折词："><a href="#转折词：" class="headerlink" title="转折词："></a>转折词：</h3><ol><li>but,yet （失去爆破——读的快t的音消失了）</li><li>however,while,although,though 虽然，尽管 srds</li><li>now,unexpectedly 出人意料的是 unfortunately 不幸的是</li></ol><h3 id="并列词"><a href="#并列词" class="headerlink" title="并列词"></a>并列词</h3><p>and,or,also,while而not only…but also…,not…but…,either..or…，likewise，similarly同样的</p><p>重点：如果选项中出现并列（and，or），一定会听到并列前后的内容（也就是说，并列前后是重点）</p><h3 id="递进词"><a href="#递进词" class="headerlink" title="递进词"></a>递进词</h3><p>then 另外，接着，another 另一个，in addition，furthermore，besides 另外</p><h3 id="顺序词"><a href="#顺序词" class="headerlink" title="顺序词"></a>顺序词</h3><p>on one hand,on the other hand,first of all,to start,……finally</p><h3 id="强调词"><a href="#强调词" class="headerlink" title="强调词"></a>强调词</h3><p>do,does,did 强调句——重读，<strong>marjor，marjority，main，chief，key，primary</strong> 主要的（the major reason 主要原因）only，in fact ，the first</p><h3 id="最高级-听力不要翻译"><a href="#最高级-听力不要翻译" class="headerlink" title="最高级(听力不要翻译)"></a>最高级(<strong>听力不要翻译</strong>)</h3><p>the most,the best,the …est</p><h3 id="因果词"><a href="#因果词" class="headerlink" title="因果词"></a>因果词</h3><p>because,so,so that therefore ,reason,casuse,explain,explanation,due to,because of ,as a result of</p><h4 id="注意会表示因果关系的词"><a href="#注意会表示因果关系的词" class="headerlink" title="注意会表示因果关系的词"></a>注意会表示因果关系的词</h4><ol><li><p>lead to,result in,account for,contribute to,bring about</p></li><li><p>givr birth to,derive from,result from,generate from,originate from</p></li></ol><h3 id="观点结论词"><a href="#观点结论词" class="headerlink" title="观点结论词"></a>观点结论词</h3><p>think,believe,hold,suggest,claim,argue,note,add,conclude,turn out</p><h3 id="举例处"><a href="#举例处" class="headerlink" title="举例处"></a>举例处</h3><p>for example,for instance,like,such as,include</p><h3 id="特殊句型"><a href="#特殊句型" class="headerlink" title="特殊句型"></a>特殊句型</h3><p>带it的句型 it is……that强调句，it做形式主语或形式宾语；带wh-的从句</p><h2 id="重读停顿原则"><a href="#重读停顿原则" class="headerlink" title="重读停顿原则"></a>重读停顿原则</h2><h2 id="重合度高原则"><a href="#重合度高原则" class="headerlink" title="重合度高原则"></a>重合度高原则</h2><h2 id="信号词练习"><a href="#信号词练习" class="headerlink" title="信号词练习"></a>信号词练习</h2><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611173713616.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611173713616.png" alt="image-20240611173713616"></p><p>19.位置原则+信号词原则+原词重合度+重读停顿</p><ul><li>a.<strong>Everything</strong> was <strong>natural</strong> and <strong>fenuine</strong> then.</li><li>b.<strong>People</strong> had <strong>plenty of land</strong> to cultivate then.</li><li>c.It markedd <strong>the beginning of something</strong> new.</li><li>d.It was when <strong>her ancertors</strong> came to America.</li></ul><p>20.信号词+重合度+重读停顿</p><p>a.They were konwn to be <strong>creative</strong>.</p><p>b.They had <strong>all kinds of entertainment</strong>.</p><p>c.They enjoyed living <strong>a life of ease</strong>.</p><p>d.They believed in <strong>working</strong> for <strong>goals</strong>.</p><p>21.位置原则+信号词原则+原词重合度+重读停顿</p><p>a.Chatting with <strong>her ancestors.</strong></p><p>b.Furnishing <strong>her country house</strong>.</p><p>c.Doing <strong>needlework</strong> by <strong>the fire</strong>.</p><p>d.Polishing all <strong>the silver work</strong>.</p><h2 id="短文和长对话练习"><a href="#短文和长对话练习" class="headerlink" title="短文和长对话练习"></a>短文和长对话练习</h2><h2 id="长对话练习"><a href="#长对话练习" class="headerlink" title="长对话练习"></a>长对话练习</h2><p><strong>位置原则：第一题 对话的前三个回合（注意对话前面常出现的寒暄）</strong></p><p><strong>性别特征：通过选项，判断可能和男性和女性相关的话题</strong></p><p>对话中有很多语气词，要特别注意：</p><ul><li>well</li><li>you know</li><li>oh</li><li>now</li><li>I’d like to</li><li>how about to&#x2F;what about donig sth&#x2F;sth;做某事怎么样 提建议</li><li>let me see 让我想一想</li><li>why not do sth 为什么不？提建议</li><li>don’t you你难道不……</li><li>why don’t you 你为什么不……？</li><li>would you like to…提要求……您能不能?</li><li>sorry,I’d love to but…</li><li>listen</li><li>look 引起别人注意</li></ul><h1 id="二、阅读部分"><a href="#二、阅读部分" class="headerlink" title="二、阅读部分"></a>二、阅读部分</h1><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611181859741.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611181859741.png" alt="image-20240611181859741"></p><p><strong>目标1</strong>425&#x2F;426 710*60%（100——60）</p><p><strong>听力</strong>前15个对10个&#x3D;71 后10个对5个&#x3D;71 &#x3D;&gt;142&#x3D;150</p><p><strong>阅读</strong> A0.5——3.55分<font color="red">分值小 特别难</font></p><p>​B1——7.1分分值适中——先做（10——15mins）</p><p>​C2——14.2分 分值较高 难度较高——第二（20——25mins）</p><h2 id="阅读做题顺序-BCA（可以挪用翻译的5-10分钟）"><a href="#阅读做题顺序-BCA（可以挪用翻译的5-10分钟）" class="headerlink" title="阅读做题顺序 BCA（可以挪用翻译的5~10分钟）"></a>阅读做题顺序 <strong>BCA</strong>（可以挪用翻译的5~10分钟）</h2><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611184817885.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611184817885.png" alt="image-20240611184817885"></p><p><strong>最后得分在460分左右——还有30分钟剩余</strong></p><h1 id="翻译写作"><a href="#翻译写作" class="headerlink" title="翻译写作"></a>翻译写作</h1><h2 id="答题顺序"><a href="#答题顺序" class="headerlink" title="答题顺序"></a>答题顺序</h2><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611200030569.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240611200030569.png" alt="image-20240611200030569"></p><p><font color="red">审题：题目读三遍、否则不动笔</font></p><h1 id="审题三要素"><a href="#审题三要素" class="headerlink" title="审题三要素"></a>审题三要素</h1><ol><li><p>体裁<font color="red">essay&#x2F;letter&#x2F;news report&#x2F;proposal&#x2F;report&#x2F;advertisement</font></p></li><li><p>话题+内容要求</p></li><li><p>字数<font color="red">四级150左右；六级180左右</font></p><p><font color="red">数一行多少词*行数</font></p></li></ol><h3 id="范例：23年6月"><a href="#范例：23年6月" class="headerlink" title="范例：23年6月"></a>范例：23年6月</h3><p><strong>Drirctions</strong>:Suppose the student union of your university is originzing an online discussion on college students doing community service.Your are to write an essay on its benfits and the service you can provide to the community.You will have 30 minutes for this task and should write at least 120 words but no more than 180 words. </p><p>   <font color="red">体裁：essay话题：college students doing community service内容要求：benfuts+the service you can provide</font></p><h3 id="范例2：23年12月"><a href="#范例2：23年12月" class="headerlink" title="范例2：23年12月"></a>范例2：23年12月</h3><p><strong>Driections</strong>:Suppose your university is inviting submissions from students for its xoming edition on a campus event that has impressed them most.You will have 30 minutes for this task and should write at least 120 words but no more than 180 words.</p><p><font color="red">体裁：essay&#x2F;letter都可以话题：acampus event内容要求：impressed……most……</font></p><h3 id="范例3：22年6月"><a href="#范例3：22年6月" class="headerlink" title="范例3：22年6月"></a>范例3：22年6月</h3><p><strong>Driections</strong>：Suppose you are writing a proposal to your schoole library for improving its services.You are to write about its current problems and possible solutions to these problems.You will 30 minutes to write the proposal.You should write at least 120 words but no more than 180 words.</p><p><font color="red">体裁：letter&#x2F;essay话题：library service内容要求：current problems+solutions</font></p><p><strong>四六级作文不需要写题目</strong></p><p><font color="red">写对了不扣分，写错了扣分，不写也不扣分</font></p><h3 id="救命作文"><a href="#救命作文" class="headerlink" title="救命作文"></a>救命作文</h3><h4 id="内容层面的灵活：一例多用"><a href="#内容层面的灵活：一例多用" class="headerlink" title="内容层面的灵活：一例多用"></a>内容层面的灵活：一例多用</h4><ul><li><p>以TOEFL写作为例：（环境）</p></li><li><p>在你家周围建一个工厂，你是否同意？</p></li><li><p>你认为科学家对人类的贡献大还是艺术家对人类的贡献大？</p></li><li><p>你的职业梦想是什么？</p></li><li><p>如果让你发明一样机器，你会选择什么？</p></li><li><p>如果你有一笔钱，你会用它来做什么？</p></li></ul><h4 id="English-Learning"><a href="#English-Learning" class="headerlink" title="English Learning"></a>English Learning</h4><p>In the <a href="adj,%E5%BD%93%E4%BB%8A=current=present-day">contemporary</a> world,[it is of great significance for](it is very important for …to…) yougsters to learn English well.English learning,thus, has <a href="%E5%BE%97%E5%88%B0">gained</a> great popularity.[Based on a survey](According to an investigation,),a majority of international organizations or firms <a href="say/admit">acknowledge</a> that they <a href="v.%E5%81%8F%E7%88%B1">prefer</a> <a href="v.%E6%8B%9B%E5%8B%9F">recruting</a> <a href="n.,%E5%91%98%E5%B7%A5">employees</a> who can speak English fluently.</p><p>However,[a host of](many&#x3D;a great many&#x3D;a sea of&#x3D;a large number of……various&#x3D;diverse&#x3D;all kinds of&#x3D;&#x3D;A case in point is that) English learners may have a variety difficulties or troubles in learning.For instance,a large number of students find it difficult to <a href="v.%E8%AE%B0">memorize</a> new words.<a href="Often">Frequently</a>,<a href="%E5%B0%BD%E7%AE%A1">it is also difficult for</a> them to understand rules of English grammar.In addtiion,though some are good at reading or writing,they fail to <a href="%E8%87%AA%E6%88%91%E8%A1%A8%E8%BE%BE">express themselves</a> freely in oral English.</p><p>[巧妇难为无米之炊。](Without rice,even a smart wife will find it difficult tocook)find it+adj.+to do表感受</p><p> Then,how to [get a good command](学好&#x3D;master v.) if this language?[I deem that](I suppose&#x2F;reckon&#x2F;hold that认为) practice makes perfect.Only pratice can help me master grammatical knowledge and remember new words.Of course,it is also through practice that I can speak and write fluently,and there is no other way.If I try my utmost to practive English every day,the future of my English learning will be promising and hopeful.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apl">In the contemporary world,it is of great significance for yougsters to learn English well.English  learning,thus,has gaind great popularity.Baserd on a survey,a majority of international organizations of firms acknowledge that they prefer recruting employees who can speak English fluently.<br>However,a host of English learners may have a variety difficulties or troules in learning.For instance,a large number of students find it difficult to memorize new words.Frequently,it is also difficult for them to understand rules of English grammar.In addition,though some age good at reading or writing,they fail to express themselves freely in oral English.<br>Then,how to get a good command if this language?I deem that practice makes perfect.Only practice can help me master grammatical knowledge and remember new words.Of course,it is also through practice that I can speak and write fluently,and there is no other way.If I try my utmost to practive English every day,the future of my English learning will be promising and hopeful.<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614193203008.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614193203008.png" alt="image-20240614193203008"></p><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614193222574.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614193222574.png" alt="image-20240614193222574"></p><h1 id="翻译预测"><a href="#翻译预测" class="headerlink" title="翻译预测"></a>翻译预测</h1><p>现代建设成就 中国传统文化</p><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195251551.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195251551.png" alt="image-20240614195251551"></p><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195531788.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195531788.png" alt="image-20240614195531788"></p><h1 id="写作"><a href="#写作" class="headerlink" title="写作"></a class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195551015.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195551015.png" alt="image-20240614195551015">写作</h1><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195904749.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614195904749.png" alt="image-20240614195904749"></p><p>浪费</p><p>Addition to online games will waste hours,lavish days and even squander years.</p><p>帮助</p><p>We should help others.</p><p>We should offer material support,financial aid,mental comfort and spirtual backup to those in the need of help.</p><p>成功</p><p>The confidence will help us accumlate wealth,establish career,fit into society and even attain social status.</p><p class='item-img' data-src='/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614201020725.png'><img src="/./../images/%E5%9B%9B%E7%BA%A7%E8%8B%B1%E8%AF%AD%E5%A4%87%E8%80%83/image-20240614201020725.png" alt="image-20240614201020725"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一、听力部分（248-5-249分）&quot;&gt;&lt;a href=&quot;#一、听力部分（248-5-249分）&quot; class=&quot;headerlink&quot; title=&quot;一、听力部分（248.5~&amp;#x3D;249分）&quot;&gt;&lt;/a&gt;一、听力部分（248.5~&amp;#x3D;249分）&lt;/</summary>
      
    
    
    
    
    <category term="英语四级" scheme="http://zdx-1.github.io/tags/%E8%8B%B1%E8%AF%AD%E5%9B%9B%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>蓝桥常规考点总结</title>
    <link href="http://zdx-1.github.io/2024/05/30/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/"/>
    <id>http://zdx-1.github.io/2024/05/30/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/</id>
    <published>2024-05-30T05:35:00.000Z</published>
    <updated>2024-05-31T10:01:32.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h2 id="基础DP"><a href="#基础DP" class="headerlink" title="基础DP"></a>基础DP</h2><h3 id="线性DP"><a href="#线性DP" class="headerlink" title="线性DP"></a>线性DP</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132127462.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132127462.png" alt="image-20240526132127462"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132140926.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132140926.png" alt="image-20240526132140926"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132149001.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132149001.png" alt="image-20240526132149001"></p><h4 id="动态规划分析步骤"><a href="#动态规划分析步骤" class="headerlink" title="动态规划分析步骤"></a>动态规划分析步骤</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132222766.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132222766.png" alt="image-20240526132222766"></p><h4 id="模板题——破损的楼梯"><a href="#模板题——破损的楼梯" class="headerlink" title="模板题——破损的楼梯"></a>模板题——<a href="https://www.lanqiao.cn/problems/3367/learning">破损的楼梯</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">3367 破损的楼梯</span><br><span class="hljs-string">https://www.lanqiao.cn/problems/3367/learning</span><br><span class="hljs-string"></span><br><span class="hljs-string">这是一个典型的线性DP问题，dp[i]表示到达第i阶楼梯的方法数</span><br><span class="hljs-string">状态转移方程：dp[i]=dp[i-1]+dp[i-2]</span><br><span class="hljs-string">状态压缩：dp[i]只与dp[i-1]和dp[i-2]有关，所以可以压缩</span><br><span class="hljs-string">时间复杂度：O(n)</span><br><span class="hljs-string">空间复杂度：O(n)</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>)<br>mod = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>)<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>vis = [<span class="hljs-number">0</span>] * N<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a: vis[i] = <span class="hljs-number">1</span><br>dp = [<span class="hljs-number">0</span>] * N<br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span> - vis[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> vis[i]:<br>        <span class="hljs-keyword">continue</span><br>    dp[i] = (dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]) % mod<br><span class="hljs-built_in">print</span>(dp[n])<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br>tp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a:<br>  tp[i]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>-tp[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">if</span> tp[i]==<span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">continue</span><br>  dp[i]=dp[i-<span class="hljs-number">1</span>]+dp[i-<span class="hljs-number">2</span>]<br>mod=<span class="hljs-number">10</span>**<span class="hljs-number">9</span>+<span class="hljs-number">7</span><br><span class="hljs-built_in">print</span>(dp[i]%mod)<br></code></pre></td></tr></table></figure><h3 id="二维DP"><a href="#二维DP" class="headerlink" title="二维DP"></a>二维DP</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132351934.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132351934.png" alt="image-20240526132351934"></p><h4 id="分析步骤"><a href="#分析步骤" class="headerlink" title="分析步骤"></a>分析步骤</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132407561.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132407561.png" alt="image-20240526132407561"></p><h4 id="模板题——数字三角形"><a href="#模板题——数字三角形" class="headerlink" title="模板题——数字三角形"></a>模板题——<a href="https://www.lanqiao.cn/problems/1536/learning">数字三角形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>dp = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j == <span class="hljs-number">0</span>:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">elif</span> j == i:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j] += <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>], dp[i - <span class="hljs-number">1</span>][j])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp[N - <span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132533080.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132533080.png" alt="image-20240526132533080"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132546231.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132546231.png" alt="image-20240526132546231"></p><h4 id="模板题——摆花"><a href="#模板题——摆花" class="headerlink" title="模板题——摆花"></a>模板题——<a href="https://www.lanqiao.cn/problems/389/learning">摆花</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">n种花凑 m盆 每种&lt;a[i]</span><br><span class="hljs-string">1.分解子问题</span><br><span class="hljs-string">前i种花，一共j盆，答案是dp[n][m]</span><br><span class="hljs-string">2.状态转移</span><br><span class="hljs-string">前i种花有j盆方案数  如何由前i-1种有j盆得出.</span><br><span class="hljs-string">以下每一种选择是一种方案</span><br><span class="hljs-string">第i种花可以选0盆,前i-1种花有j盆：dp[i][j] = dp[i-1][j]</span><br><span class="hljs-string">第i种花可以选1盆,前i-1种花有j-1盆：：dp[i][j] = dp[i-1][j-1]</span><br><span class="hljs-string">...</span><br><span class="hljs-string">第i种花可以选a[i]盆,前i-1种花有j-a[i]盆：：dp[i][j] = dp[i-1][j-a[i]]</span><br><span class="hljs-string">3.边界条件，每种花都不选</span><br><span class="hljs-string">前i种花 0盆 是 一种方案 dp[i][0] = 1</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>MOD = <span class="hljs-number">10</span> ** <span class="hljs-number">6</span> + <span class="hljs-number">7</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>):<br>    dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><span class="hljs-comment"># 状态转移,当下做出的选择，利用之前dp,求dp[i][j]</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(a[i],j)+<span class="hljs-number">1</span>):<br>            dp[i][j]+=dp[i-<span class="hljs-number">1</span>][j-k]<br>            dp[i][j]%=MOD<br><span class="hljs-built_in">print</span>(dp[n][m])<br></code></pre></td></tr></table></figure><h4 id="模板题——选数异或"><a href="#模板题——选数异或" class="headerlink" title="模板题——选数异或"></a>模板题——<a href="https://www.lanqiao.cn/problems/3711/learning">选数异或</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py">n,x = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>Mod = <span class="hljs-number">998244353</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"> dp[i][j]前i个正整数有j个子序列异或成 j 的方案；答案dp[n][x]</span><br><span class="hljs-string"> dp[i][j] = 选第i个数字 + 不选第i个数字</span><br><span class="hljs-string">          = dp[i - 1][j ^ a[i]] + dp[i - 1][j]   </span><br><span class="hljs-string">          (因为如果选了第i个数字，那么a[i] ^ 前数 = j, 所以：前数 = j ^ a[i])</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>dp = [[<span class="hljs-number">0</span>] * (<span class="hljs-number">64</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-comment"># 初始化为 0</span><br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">64</span>):<br>        dp[i][j] = (dp[i-<span class="hljs-number">1</span>][j] + dp[i-<span class="hljs-number">1</span>][j ^ a[i]]) % Mod<br><span class="hljs-built_in">print</span>(dp[n][x])<br></code></pre></td></tr></table></figure><h3 id="LIS"><a href="#LIS" class="headerlink" title="LIS"></a>LIS</h3><h4 id="最长上升子序列"><a href="#最长上升子序列" class="headerlink" title="最长上升子序列"></a>最长上升子序列</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132915221.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132915221.png" alt="image-20240526132915221"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132923043.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132923043.png" alt="image-20240526132923043"></p><h4 id="模板题——蓝桥勇士"><a href="#模板题——蓝桥勇士" class="headerlink" title="模板题——蓝桥勇士"></a>模板题——<a href="https://www.lanqiao.cn/problems/2049/learning">蓝桥勇士</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=[<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">1</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> a[i]&lt;a[j]:<br>      dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[i]+<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h4 id="模板题——合唱队形"><a href="#模板题——合唱队形" class="headerlink" title="模板题——合唱队形"></a>模板题——<a href="https://www.lanqiao.cn/problems/742/learning">合唱队形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp1 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp1[i]表示以i结尾的最长上升子序列长度</span><br>dp2 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp2[i]表示以i出发的最长下降子序列长度</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    dp1[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, i):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp1[i] = <span class="hljs-built_in">max</span>(dp1[i], dp1[j] + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    dp2[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp2[i] = <span class="hljs-built_in">max</span>(dp2[i], dp2[j] + <span class="hljs-number">1</span>)<br><br>ans = <span class="hljs-built_in">max</span>((dp1[i] + dp2[i] - <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(n-ans)<br></code></pre></td></tr></table></figure><h3 id="LCS"><a href="#LCS" class="headerlink" title="LCS"></a>LCS</h3><h4 id="最长公共子序列"><a href="#最长公共子序列" class="headerlink" title="最长公共子序列"></a>最长公共子序列</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133212404.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133212404.png" alt="image-20240526133212404"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133222560.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133222560.png" alt="image-20240526133222560"></p><h4 id="模板题——最长公共子序列"><a href="#模板题——最长公共子序列" class="headerlink" title="模板题——最长公共子序列"></a>模板题——<a href="https://www.lanqiao.cn/problems/1189/learning">最长公共子序列</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 这段代码实现的是计算两个序列（a 和 b）的最长公共子序列（Longest Common Subsequence, LCS）的长度。LCS 是一种在计算两个序列相似度时常用的度量方法。这个问题通常通过动态规划来解决。现在，我将逐步解释这段代码的各个部分：</span><br><br><span class="hljs-comment"># 输入处理</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>b = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment"># 首先，通过 input().split() 获取两个整数 n 和 m，分别表示序列 a 和 b 的长度。</span><br><span class="hljs-comment"># 接着，读取这两个序列，并在序列前面各自加上一个 0 作为哨兵值。这样做是为了让序列的索引从 1 开始，方便后续操作。</span><br><span class="hljs-comment"># 初始化动态规划数组</span><br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>)]  <span class="hljs-comment"># 注意这里是 m，不是 n</span><br>now = <span class="hljs-number">0</span>; old = <span class="hljs-number">1</span><br><span class="hljs-comment"># 初始化一个二维动态规划数组 dp，但这里只用到了两行（range(2)），目的是节省空间。因为在计算当前状态时，只需要用到前一行（即上一状态）的数据。m + 1 是因为考虑到从 0 开始到 m 的所有可能位置。</span><br><span class="hljs-comment"># now 和 old 变量用来在这两行之间切换，表示当前行和上一行。</span><br><span class="hljs-comment"># 动态规划过程</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    now, old = old, now<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j - <span class="hljs-number">1</span>], dp[old][j])<br>        <span class="hljs-keyword">if</span> a[i] == b[j]: <br>            dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j], dp[old][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>)<br><span class="hljs-comment"># 这部分是动态规划的核心。</span><br><span class="hljs-comment"># 外层循环遍历序列 a，内层循环遍历序列 b。</span><br><span class="hljs-comment"># dp[now][j] = max(dp[now][j - 1], dp[old][j])：当前状态是基于之前状态的最大值，这表示如果当前字符不匹配，LCS 长度不变。</span><br><span class="hljs-comment"># 如果当前位置的字符相等（a[i] == b[j]），则检查上一个状态的值并加一，即 dp[now][j] = max(dp[now][j], dp[old][j - 1] + 1)。这反映了找到了一个公共元素，因此当前的最长公共子序列长度增加了 1。</span><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-built_in">print</span>(dp[now][m])<br><span class="hljs-comment"># 最后，打印出最长公共子序列的长度，即在遍历完两个序列后，dp 数组最后一个元素（dp[now][m]）的值。</span><br><span class="hljs-comment"># 通过这种方式，代码高效地计算了两个序列的最长公共子序列的长度，同时通过只使用两行的动态规划数组大大减少了空间复杂度。</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133424736.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133424736.png" alt="image-20240526133424736"></p><h2 id="背包DP"><a href="#背包DP" class="headerlink" title="背包DP"></a>背包DP</h2><h3 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133609206.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133609206.png" alt="image-20240526133609206"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133623292.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133623292.png" alt="image-20240526133623292"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133631379.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133631379.png" alt="image-20240526133631379"></p><h4 id="模板题——小明的背包1"><a href="#模板题——小明的背包1" class="headerlink" title="模板题——小明的背包1"></a>模板题——<a href="https://www.lanqiao.cn/problems/1174/learning">小明的背包1</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j]    前i件物品，总体积不超过j 的最大价值</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j&gt;=wi:<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i-<span class="hljs-number">1</span>][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br>            <br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化"><a href="#滚动数组优化" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133913024.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133913024.png" alt="image-20240526133913024"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133922038.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133922038.png" alt="image-20240526133922038"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133928502.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526133928502.png" alt="image-20240526133928502"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">n,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[<span class="hljs-number">0</span>]*(V+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  w,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,w-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-w]+v)<br><span class="hljs-built_in">print</span>(dp[V])<br></code></pre></td></tr></table></figure><h3 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134436937.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134436937.png" alt="image-20240526134436937"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134445527.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134445527.png" alt="image-20240526134445527"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134453737.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134453737.png" alt="image-20240526134453737"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134501798.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134501798.png" alt="image-20240526134501798"></p><h4 id="模板题——小明的背包2"><a href="#模板题——小明的背包2" class="headerlink" title="模板题——小明的背包2"></a>模板题——<a href="https://www.lanqiao.cn/problems/1175/learning">小明的背包2</a></h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134640485.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134640485.png" alt="image-20240526134640485"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># dp[i][j]=max(dp[i-1][j],dp[i][j-wi]+vi)  不取或在先前基础上取第i种（所以可以取多次）</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span>  i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> (j&gt;=wi):<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-1"><a href="#滚动数组优化-1" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N, V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>items = []<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    w, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    items.append((w, v))<br>dp = [<span class="hljs-number">0</span>] * (V + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, V + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> w, v <span class="hljs-keyword">in</span> items:<br>        <span class="hljs-keyword">if</span> i &gt;= w:<br>            dp[i] = <span class="hljs-built_in">max</span>(dp[i], dp[i - w] + v)<br><span class="hljs-built_in">print</span>(dp[V])<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">读取输入的商场物品数量N和小明的背包容量V，以及每种物品的体积和价值。</span><br><span class="hljs-string">初始化一个长度为V+1的动态规划数组dp，dp[i]表示背包容量为i时所能获得的最大价值。</span><br><span class="hljs-string">使用动态规划求解，外层循环遍历背包容量从1到V，内层循环遍历每种物品，更新dp[i]的值为dp[i-w]+v和当前dp[i]的较大值。</span><br><span class="hljs-string">输出dp[V]即为小明所能获得的最大价值。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134702358.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134702358.png" alt="image-20240526134702358"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134710379.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134710379.png" alt="image-20240526134710379"></p><h4 id="模板题——小明的背包3"><a href="#模板题——小明的背包3" class="headerlink" title="模板题——小明的背包3"></a>模板题——<a href="https://www.lanqiao.cn/problems/1176/learning">小明的背包3</a></h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134904431.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134904431.png" alt="image-20240526134904431"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134915203.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134915203.png" alt="image-20240526134915203"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134922223.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134922223.png" alt="image-20240526134922223"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134930677.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526134930677.png" alt="image-20240526134930677"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j] =max(dp[i][j],dp[i-1][j-k*wi]+k*vi)  k属于(0，si)</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi,si=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">min</span>(si,j//wi)+<span class="hljs-number">1</span>):<br><br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-k*wi]+k*vi)<br><br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-2"><a href="#滚动数组优化-2" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py">N,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>w,v,s=[[<span class="hljs-number">0</span>]*(N+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)]<br>dp=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  w[i],v[i],s[i]=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]):<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> w[i]&lt;=k:<br>        dp[k]=<span class="hljs-built_in">max</span>(dp[k-w[i]]+v[i],dp[k])<br><span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="二维费用背包-分组背包"><a href="#二维费用背包-分组背包" class="headerlink" title="二维费用背包&amp;分组背包"></a>二维费用背包&amp;分组背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526135531593.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526135531593.png" alt="image-20240526135531593"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526135538566.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526135538566.png" alt="image-20240526135538566"></p><h4 id="模板题——小蓝的神秘行囊"><a href="#模板题——小蓝的神秘行囊" class="headerlink" title="模板题——小蓝的神秘行囊"></a>模板题——<a href="https://www.lanqiao.cn/problems/3937/learning">小蓝的神秘行囊</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><br>n, v, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>dp = [[<span class="hljs-number">0</span>]*(v + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    volume, mass, value = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i &gt;= mass <span class="hljs-keyword">and</span> j &gt;= volume:<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i-mass][j-volume] + value)<br><span class="hljs-built_in">print</span>(dp[m][v])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py">n,v,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    vi,mi,wi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v,vi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m,mi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            dp[j][k] =<span class="hljs-built_in">max</span>(dp[j][k],dp[j-vi][k-mi]+wi)<br>           <br><span class="hljs-built_in">print</span>(dp[v][m])<br></code></pre></td></tr></table></figure><h2 id="树形DP"><a href="#树形DP" class="headerlink" title="树形DP"></a>树形DP</h2><h2 id="状压DP"><a href="#状压DP" class="headerlink" title="状压DP"></a>状压DP</h2><h2 id="数位DP"><a href="#数位DP" class="headerlink" title="数位DP"></a>数位DP</h2><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100046139.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100046139.png" alt="image-20240526100046139"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100057701.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100057701.png" alt="image-20240526100057701"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100110562.png" alt="image-20240526100110562"></p><h3 id="KMP算法"><a href="#KMP算法" class="headerlink" title="KMP算法"></a>KMP算法</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100136410.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100136410.png" alt="image-20240526100136410"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100148837.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100148837.png" alt="image-20240526100148837"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100157890.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100157890.png" alt="image-20240526100157890"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100211778.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100211778.png" alt="image-20240526100211778"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100221657.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100221657.png" alt="image-20240526100221657"></p><h4 id="模板题——斤斤计较的小Z"><a href="#模板题——斤斤计较的小Z" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py">Next = [<span class="hljs-number">0</span>] * <span class="hljs-number">1000010</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_next</span>(<span class="hljs-params">T</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(T)):<br>        j = Next[i]<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> T[i] != T[j]:<br>            j = Next[j]<br>        <span class="hljs-keyword">if</span> T[i] == T[j]:<br>            Next[i + <span class="hljs-number">1</span>] = j + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            Next[i + <span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">KMP</span>(<span class="hljs-params">s,t</span>):<br>    get_next(t)<br>    ans = <span class="hljs-number">0</span><br>    j = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> s[i] != t[j]:<br>            j =  Next[j]<br>        <span class="hljs-keyword">if</span> s[i] == t[j]:<br>            j += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> j == <span class="hljs-built_in">len</span>(t):<br>            ans += <span class="hljs-number">1</span><br>            j =  Next[j]<br>    <span class="hljs-keyword">return</span> ans<br>t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br><span class="hljs-built_in">print</span>(KMP(s,t))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-built_in">print</span>((<span class="hljs-keyword">lambda</span> s: <span class="hljs-built_in">input</span>().count(s))(<span class="hljs-built_in">input</span>()))<br></code></pre></td></tr></table></figure><h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><h3 id="字符串哈希"><a href="#字符串哈希" class="headerlink" title="字符串哈希"></a>字符串哈希</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100452881.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100452881.png" alt="image-20240526100452881"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100509262.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526100509262.png" alt="image-20240526100509262"></p><h4 id="模板题——斤斤计较的小Z-1"><a href="#模板题——斤斤计较的小Z-1" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py">t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br>m,n = <span class="hljs-built_in">len</span>(t), <span class="hljs-built_in">len</span>(s)<br>B = <span class="hljs-number">26</span><br>mod = <span class="hljs-number">1000000007</span><br><span class="hljs-built_in">hash</span> = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">hash</span>[i] = <span class="hljs-built_in">hash</span>[i - <span class="hljs-number">1</span>] * B + <span class="hljs-built_in">ord</span>(s[i - <span class="hljs-number">1</span>]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    <span class="hljs-built_in">hash</span>[i] %= mod<br><br>numT = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> t:<br>    numT = numT * B + <span class="hljs-built_in">ord</span>(c) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    numT %= mod<br>    <br>p = (B ** m) % mod<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n +<span class="hljs-number">1</span>):<br>    r = l + m - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> r &gt; n:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">hash</span>[r] - <span class="hljs-built_in">hash</span>[l - <span class="hljs-number">1</span>] * p % mod + mod) % mod == numT:<br>        ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><h1 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h1><h2 id="二项式定理"><a href="#二项式定理" class="headerlink" title="二项式定理"></a>二项式定理</h2><h2 id="容斥原理"><a href="#容斥原理" class="headerlink" title="容斥原理"></a>容斥原理</h2><h2 id="排列组合"><a href="#排列组合" class="headerlink" title="排列组合"></a>排列组合</h2><h2 id="模意义下的逆元"><a href="#模意义下的逆元" class="headerlink" title="模意义下的逆元"></a>模意义下的逆元</h2><h2 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h2><h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><h5 id="RMQ问题"><a href="#RMQ问题" class="headerlink" title="RMQ问题"></a>RMQ问题</h5><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183506581.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183506581.png" alt="image-20240524183506581"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183726055.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183726055.png" alt="image-20240524183726055"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183742068.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183742068.png" alt="image-20240524183742068"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183753258.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183753258.png" alt="image-20240524183753258"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183803151.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524183803151.png" alt="image-20240524183803151"></p><h2 id="平衡树"><a href="#平衡树" class="headerlink" title="平衡树"></a>平衡树</h2><h3 id="平衡树-Splay"><a href="#平衡树-Splay" class="headerlink" title="平衡树-Splay"></a>平衡树-Splay</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122034271.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122034271.png" alt="image-20240526122034271"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122046309.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122046309.png" alt="image-20240526122046309"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122055269.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122055269.png" alt="image-20240526122055269"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122104347.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122104347.png" alt="image-20240526122104347"></p><h3 id="平衡树-FHQ-Treap"><a href="#平衡树-FHQ-Treap" class="headerlink" title="平衡树-FHQ_Treap"></a>平衡树-FHQ_Treap</h3><h4 id="无旋Treap"><a href="#无旋Treap" class="headerlink" title="无旋Treap"></a>无旋Treap</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115339167.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115339167.png" alt="image-20240526115339167"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115350766.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115350766.png" alt="image-20240526115350766"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115359404.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115359404.png" alt="image-20240526115359404"></p><h4 id="无旋Treap的结构"><a href="#无旋Treap的结构" class="headerlink" title="无旋Treap的结构"></a>无旋Treap的结构</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115559180.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115559180.png" alt="image-20240526115559180"></p><h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115614042.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115614042.png" alt="image-20240526115614042"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115623744.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115623744.png" alt="image-20240526115623744"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115634558.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115634558.png" alt="image-20240526115634558"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115644061.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115644061.png" alt="image-20240526115644061"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115650541.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115650541.png" alt="image-20240526115650541"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115656903.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115656903.png" alt="image-20240526115656903"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115703005.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115703005.png" alt="image-20240526115703005"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115710056.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115710056.png" alt="image-20240526115710056"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115715945.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115715945.png" alt="image-20240526115715945"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115721051.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115721051.png" alt="image-20240526115721051"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115727235.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115727235.png" alt="image-20240526115727235"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115734944.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115734944.png" alt="image-20240526115734944"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115740418.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115740418.png" alt="image-20240526115740418"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115746149.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115746149.png" alt="image-20240526115746149"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115751158.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115751158.png" alt="image-20240526115751158"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115755059.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115755059.png" alt="image-20240526115755059"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115800730.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115800730.png" alt="image-20240526115800730"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115804490.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115804490.png" alt="image-20240526115804490"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115808715.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115808715.png" alt="image-20240526115808715"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115813454.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115813454.png" alt="image-20240526115813454"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115817884.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115817884.png" alt="image-20240526115817884"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115823342.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115823342.png" alt="image-20240526115823342"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115830400.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115830400.png" alt="image-20240526115830400"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115835300.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115835300.png" alt="image-20240526115835300"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115839426.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115839426.png" alt="image-20240526115839426"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115847061.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115847061.png" alt="image-20240526115847061"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115851600.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115851600.png" alt="image-20240526115851600"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115858903.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115858903.png" alt="image-20240526115858903"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115904405.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115904405.png" alt="image-20240526115904405"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115910595.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115910595.png" alt="image-20240526115910595"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115916421.png" alt="image-20240526115916421" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115916421.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115916421.png" alt="image-20240526115916421"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115926736.png" alt="image-20240526115926736" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115926736.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115926736.png" alt="image-20240526115926736"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115936852.png" alt="image-20240526115936852" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115936852.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115936852.png" alt="image-20240526115936852"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115948947.png" alt="image-20240526115948947" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115948947.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115948947.png" alt="image-20240526115948947"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115959511.png" alt="image-20240526115959511" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115959511.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526115959511.png" alt="image-20240526115959511"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120022163.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120022163.png" alt="image-20240526120022163"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120026713.png" alt="image-20240526120026713" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120026713.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120026713.png" alt="image-20240526120026713"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120036416.png" alt="image-20240526120036416" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120036416.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120036416.png" alt="image-20240526120036416"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120053497.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120053497.png" alt="image-20240526120053497"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120100194.png" alt="image-20240526120100194" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120100194.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120100194.png" alt="image-20240526120100194"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526120109696.png" alt="image-20240526120109696"></p><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> val;<br>    <span class="hljs-type">int</span> cnt;<br>    <span class="hljs-type">int</span> rev;<br>    <span class="hljs-type">int</span> prio;<br>    <span class="hljs-type">int</span> size;<br>    <span class="hljs-type">int</span> ch[<span class="hljs-number">2</span>];<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FHQTREAP</span> &#123;</span><br>    <span class="hljs-type">int</span> root;<br>    <span class="hljs-type">int</span> size;<br>    NODE node[MAXN];<br>&#125;<br><br><span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_val</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-keyword">if</span> (node[t].val &lt;= val) &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">1</span>], val);<br>        node[t].ch[<span class="hljs-number">1</span>] = tmp.first;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, tmp.second&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">0</span>], val);<br>        node[t].ch[<span class="hljs-number">0</span>] = tmp.second;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;tmp.first, t&#125;;<br>    &#125;<br>&#125;<br><br>tuple&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_rank</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    <span class="hljs-keyword">if</span> (k &lt;= node[node[t].ch[<span class="hljs-number">0</span>]].size()) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">0</span>], k);<br>        node[t].ch[<span class="hljs-number">0</span>] = rt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, mt, t&#125;;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k &gt; node[node[t]].ch[<span class="hljs-number">0</span>].size() + node[t].cnt) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">1</span>], k - node[node[t].ch[<span class="hljs-number">0</span>]].size() - node[t].cnt);<br>        node[t].ch[<span class="hljs-number">1</span>] = lt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, mt, rt&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = node[t].ch[<span class="hljs-number">0</span>];<br>        rt = node[t].ch[<span class="hljs-number">1</span>];<br>        check_rev(lt);<br>        check_rev(rt);<br>        node[t].ch[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        upda[t].ch[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, t, rt&#125;;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> lt, <span class="hljs-type">int</span> rt)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!lt) &#123;<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!rt) &#123;<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125;<br>    check_rev(lt);<br>    check_rev(rt);<br>    <span class="hljs-keyword">if</span> (node[lt].prio &lt; node[rt].prio) &#123;<br>        node[lt].ch[<span class="hljs-number">1</span>] = merge(node[lt].ch[<span class="hljs-number">1</span>], rt);<br>        update_size(lt);<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[rt].ch[<span class="hljs-number">0</span>] = merge(lt, node[rt].ch[<span class="hljs-number">0</span>]);<br>        update_size(rt);<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (!mt) &#123;<br>        mt = new_node(val);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[mt].cnt ++;<br>        update_size(mt);<br>    &#125;<br>    root = merge(merge(lt, mt), rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">del</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    unode[mt].cnt --;<br>    update_size(mt);<br>    <span class="hljs-keyword">if</span> (node[mt].cnt == <span class="hljs-number">0</span>) &#123;<br>        clear(mt);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = merge(lt, mt);<br>    &#125;<br>    root = merge(lt, rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-type">int</span> t1, t2, t3, t4, t5;<br>    tie(t1, t2, t3) = split_by_rank(root, l - <span class="hljs-number">1</span>);<br>    tie(t3, t4, t5) = split_by_ranl(t3, r - l + <span class="hljs-number">2</span>);<br>    node[t3].rev = <span class="hljs-number">1</span>;<br>    root = merge(merge(merge(merge(t1, t2), t3), t4), t5);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">check_rev</span><span class="hljs-params">(<span class="hljs-type">int</span> t)</span> &#123;<br>    <span class="hljs-keyword">if</span> (node[t].rev) &#123;<br>        swap(node[t].ch[<span class="hljs-number">0</span>], node[t].ch[<span class="hljs-number">1</span>]);<br>        node[node[t].ch[<span class="hljs-number">0</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[node[t].ch[<span class="hljs-number">1</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[t].rev = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">rank</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = node[tmp.first].size + <span class="hljs-number">1</span>;<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">kth</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, mt, rt) = split_by_rank(t, k);<br>    <span class="hljs-type">int</span> val = node[mt].val;<br>    t = merge(merge(lt, mt), rt);<br>    <span class="hljs-keyword">return</span> val;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">pre</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_cal(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = kth(tmp.first, node[tmp.first].size);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">nxt</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val);<br>    <span class="hljs-type">int</span> k = kth(tmp.second, <span class="hljs-number">1</span>);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><h3 id="基础并查集"><a href="#基础并查集" class="headerlink" title="基础并查集"></a>基础并查集</h3><h4 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194242229.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194242229.png" alt="image-20240524194242229"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194253527.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194253527.png" alt="image-20240524194253527"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194301781.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194301781.png" alt="image-20240524194301781"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194309669.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194309669.png" alt="image-20240524194309669"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194317881.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524194317881.png" alt="image-20240524194317881"></p><h5 id="模板题——蓝桥幼儿园"><a href="#模板题——蓝桥幼儿园" class="headerlink" title="模板题——蓝桥幼儿园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1135/learning">蓝桥幼儿园</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def Findroot(x):</span><br><span class="hljs-comment">#     while x!=p[x]:</span><br><span class="hljs-comment">#         x=p[x]</span><br><span class="hljs-comment">#     return x</span><br><span class="hljs-string">&#x27;&#x27;&#x27;使用路径压缩&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Findroot</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>    <span class="hljs-comment">#路径压缩</span><br>    p[x]=Findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Merge</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    p[rootx]=rooty<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Query</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    <span class="hljs-keyword">return</span> rootx==rooty<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    op,x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> op ==<span class="hljs-number">1</span>:<br>        Merge(x,y)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> Query(x,y):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="路径压缩"><a href="#路径压缩" class="headerlink" title="路径压缩"></a>路径压缩</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524195007281.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524195007281.png" alt="image-20240524195007281"></p><h5 id="模板题——星球大战"><a href="#模板题——星球大战" class="headerlink" title="模板题——星球大战"></a>模板题——<a href="https://www.lanqiao.cn/problems/828/learning/">星球大战</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>M = <span class="hljs-number">200010</span>; N = <span class="hljs-number">2</span> * M<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>father = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                 <span class="hljs-comment">#并查集板块</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">10</span>):<br>        father[i] = i<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_father</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x != father[x]: father[x] = find_father(father[x])<br>    <span class="hljs-keyword">return</span> father[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">unite</span>(<span class="hljs-params">x, y</span>):<br>    father[find_father(x)] = find_father(y)<br>come = [<span class="hljs-number">0</span>] * N; to = [<span class="hljs-number">0</span>] * N;   <span class="hljs-comment">#存储每个边</span><br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]      <span class="hljs-comment">#邻接表</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[a].append(b); g[b].append(a)<br>    come[i] = a; to[i] = b <br>broken = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                     <span class="hljs-comment">#记录每个点是否被修坏</span><br>destroy = []<br>k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    b = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    broken[b] = <span class="hljs-number">1</span><br>    destroy.append(b)<br>init()<br>res = n - k             <span class="hljs-comment">#先计算所有剩下星球的连通块数，(最后一轮的结果)</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    l = come[i]; r = to[i]<br>    fl, fr = find_father(l), find_father(r)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[l] <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> broken[r] <span class="hljs-keyword">and</span> fl != fr:<br>        res -= <span class="hljs-number">1</span><br>        <span class="hljs-comment">#unite(l, r)</span><br>        father[fl] = fr<br>ans = [res]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(destroy) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):       <span class="hljs-comment">#顺序破坏，相当于倒序修建</span><br>    c = destroy[i]<br>    broken[c] = <span class="hljs-number">0</span><br>    res += <span class="hljs-number">1</span>                                    <span class="hljs-comment">#修好一个星球，连通块会多一个</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> g[c]:<br>        fc, fp = find_father(c), find_father(j)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[j] <span class="hljs-keyword">and</span> fc != fp:<br>            res -= <span class="hljs-number">1</span><br>            father[fc] = fp<br>    ans.append(res)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ans) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):           <span class="hljs-comment">#倒序输出结果</span><br>    <span class="hljs-built_in">print</span>(ans[i])<br></code></pre></td></tr></table></figure><h3 id="可撤销并查集"><a href="#可撤销并查集" class="headerlink" title="可撤销并查集"></a>可撤销并查集</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203431727.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203431727.png" alt="image-20240524203431727"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203449967.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203449967.png" alt="image-20240524203449967"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203621861.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203621861.png" alt="image-20240524203621861"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203634004.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203634004.png" alt="image-20240524203634004"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203643547.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203643547.png" alt="image-20240524203643547"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203712193.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203712193.png" alt="image-20240524203712193"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203728659.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203728659.png" alt="image-20240524203728659"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203741431.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203741431.png" alt="image-20240524203741431"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203752845.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203752845.png" alt="image-20240524203752845"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203808480.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203808480.png" alt="image-20240524203808480"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203837465.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203837465.png" alt="image-20240524203837465"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203855506.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203855506.png" alt="image-20240524203855506"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203906020.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203906020.png" alt="image-20240524203906020"></p><h4 id="可撤销并查集定义"><a href="#可撤销并查集定义" class="headerlink" title="可撤销并查集定义"></a>可撤销并查集定义</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203916807.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203916807.png" alt="image-20240524203916807"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203959912.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524203959912.png" alt="image-20240524203959912"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204009818.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204009818.png" alt="image-20240524204009818"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204018333.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204018333.png" alt="image-20240524204018333"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204035190.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204035190.png" alt="image-20240524204035190"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204043804.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204043804.png" alt="image-20240524204043804"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204055615.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204055615.png" alt="image-20240524204055615"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204106056.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204106056.png" alt="image-20240524204106056"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204120154.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204120154.png" alt="image-20240524204120154"></p><h4 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204147436.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204147436.png" alt="image-20240524204147436"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204158246.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240524204158246.png" alt="image-20240524204158246"></p><h3 id="带权并查集"><a href="#带权并查集" class="headerlink" title="带权并查集"></a>带权并查集</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102401075.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102401075.png" alt="image-20240526102401075"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102412755.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102412755.png" alt="image-20240526102412755"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102423880.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102423880.png" alt="image-20240526102423880"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102443080.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102443080.png" alt="image-20240526102443080"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102451528.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526102451528.png" alt="image-20240526102451528"></p><h2 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h2><h4 id="lowbit操作"><a href="#lowbit操作" class="headerlink" title="lowbit操作"></a>lowbit操作</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113101030.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113101030.png" alt="image-20240526113101030"></p><h4 id="树状数组-1"><a href="#树状数组-1" class="headerlink" title="树状数组"></a>树状数组</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113114986.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113114986.png" alt="image-20240526113114986"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113123838.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113123838.png" alt="image-20240526113123838"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113132131.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113132131.png" alt="image-20240526113132131"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113141135.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113141135.png" alt="image-20240526113141135"></p><h4 id="模板题——单点修改，区间查询"><a href="#模板题——单点修改，区间查询" class="headerlink" title="模板题——单点修改，区间查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/2340/learning/">单点修改，区间查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs py">N = <span class="hljs-number">100100</span><br><span class="hljs-comment">#初始化树状数组 为0</span><br>f = [<span class="hljs-number">0</span>] * N<br><br><span class="hljs-comment">#求下标为x的最小区间长度</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; (-x)<br><br><span class="hljs-comment">#树状数组更新函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">upd</span>(<span class="hljs-params">pos,v</span>):<span class="hljs-comment">#pos：下标 v：值</span><br>    <span class="hljs-comment">#在下标为pos的区间加上v 并且在每个有包含pos的大区间加上v</span><br>    <span class="hljs-comment">#包含当前区间的大区间：在pos的位置上加lowbit(pos)便能得到大区间</span><br>    <span class="hljs-keyword">while</span> pos &lt;= n:<br>        f[pos] += v<br>        pos += lowbit(pos)<br><br><span class="hljs-comment">#得到1-pos位置的前缀和</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<span class="hljs-comment">#加上组成pos每一个区间的和</span><br>        res += f[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>data = <span class="hljs-built_in">input</span>().split()<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n):<br>    x = <span class="hljs-built_in">int</span>(data[i])<br>    <span class="hljs-comment">#树状数组初始化都为0，需要将原数组每个值通过upd方法将每个值加入树状数组</span><br>    upd(i+<span class="hljs-number">1</span>,x)<br><br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    opt,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-number">1</span>:<br>        upd(a,b)<span class="hljs-comment">#更新</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment">#区间[a,b] = [1,b] - [1,a-1]</span><br>        <span class="hljs-built_in">print</span>(get(b) - get(a-<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>n = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  s,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">1</span>:<br>    n[a-<span class="hljs-number">1</span>] += b<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">2</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(n[a-<span class="hljs-number">1</span>:b]))<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113358856.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113358856.png" alt="image-20240526113358856"></p><h4 id="树状数组-2"><a href="#树状数组-2" class="headerlink" title="树状数组"></a>树状数组</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113430755.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113430755.png" alt="image-20240526113430755"></p><h4 id="模板题——殷老师排队"><a href="#模板题——殷老师排队" class="headerlink" title="模板题——殷老师排队"></a>模板题——<a href="https://www.lanqiao.cn/problems/3620/learning/">殷老师排队</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">return</span> x &amp; (-x)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>  ans = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">while</span> x:<br>    ans += tree[x]<br>    x -= lowbit(x)<br>  <span class="hljs-keyword">return</span> ans <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-keyword">while</span> x &lt;= n:<br>    tree[x] += y<br>    x += lowbit(x)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a =[<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>tree = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  add(i,a[i])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  lt = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>  <span class="hljs-keyword">if</span> lt[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:<br>    x, y = lt[<span class="hljs-number">1</span>], lt[<span class="hljs-number">2</span>]<br>    add(x,y - a[x])<br>    a[x] = y<br>  <span class="hljs-keyword">else</span>:<br>    x = lt[<span class="hljs-number">1</span>]<br>    ans = (<span class="hljs-number">2</span> * x - n - <span class="hljs-number">2</span>) * a[x] + query(n) - <span class="hljs-number">2</span>*query(x-<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h3 id="二维树状数组"><a href="#二维树状数组" class="headerlink" title="二维树状数组"></a>二维树状数组</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113722203.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113722203.png" alt="image-20240526113722203"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113730769.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113730769.png" alt="image-20240526113730769"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113742110.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113742110.png" alt="image-20240526113742110"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113748208.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113748208.png" alt="image-20240526113748208"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113754750.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113754750.png" alt="image-20240526113754750"></p><h4 id="模板题——"><a href="#模板题——" class="headerlink" title="模板题——"></a>模板题——</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113904670.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113904670.png" alt="image-20240526113904670"></p><h3 id="树状数组上二分"><a href="#树状数组上二分" class="headerlink" title="树状数组上二分"></a>树状数组上二分</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113950824.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113950824.png" alt="image-20240526113950824"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113958446.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526113958446.png" alt="image-20240526113958446"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114007562.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114007562.png" alt="image-20240526114007562"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114020291.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114020291.png" alt="image-20240526114020291"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114102890.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114102890.png" alt="image-20240526114102890"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114113384.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114113384.png" alt="image-20240526114113384"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114124229.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114124229.png" alt="image-20240526114124229"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114131782.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526114131782.png" alt="image-20240526114131782"></p><h4 id="模板题——-1"><a href="#模板题——-1" class="headerlink" title="模板题——"></a>模板题——</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python">maxn = <span class="hljs-number">110000</span><br>ans = [<span class="hljs-number">0</span>] * maxn<br>tree = [<span class="hljs-number">0</span>] * maxn<br>a = [<span class="hljs-number">0</span>] * maxn<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; -x<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">pos, x</span>):<br>    <span class="hljs-keyword">while</span> pos &lt; maxn:<br>        tree[pos] += x<br>        pos += lowbit(pos)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<br>        res += tree[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split()))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    a[i] = nums[i - <span class="hljs-number">1</span>]<br>    add(i, <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    l, r = <span class="hljs-number">1</span>, n<br>    <span class="hljs-keyword">while</span> l &lt;= r:<br>        mid = (l + r) // <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> query(mid) &lt; a[i] + <span class="hljs-number">1</span>:<br>            l = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            r = mid - <span class="hljs-number">1</span><br>    ans[i] = r<br>    add(r, -<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(ans[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="线段树"><a href="#线段树" class="headerlink" title="线段树"></a>线段树</h2><h3 id="线段树-动态开点"><a href="#线段树-动态开点" class="headerlink" title="线段树-动态开点"></a>线段树-动态开点</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121216936.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121216936.png" alt="image-20240526121216936"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121240169.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121240169.png" alt="image-20240526121240169"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121250475.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121250475.png" alt="image-20240526121250475"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121357462.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121357462.png" alt="image-20240526121357462"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121408234.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121408234.png" alt="image-20240526121408234"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121446955.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121446955.png" alt="image-20240526121446955"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121517887.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121517887.png" alt="image-20240526121517887"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121505465.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121505465.png" alt="image-20240526121505465"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121533131.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121533131.png" alt="image-20240526121533131"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121542078.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121542078.png" alt="image-20240526121542078"></p><h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121653108.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121653108.png" alt="image-20240526121653108"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Tree</span> &#123;</span><br>    <span class="hljs-type">int</span> l, r, n, ls, rs;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++ cnt;<br>        tree[t].l = l;<br>        tree[t].r = r;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        tree[t].n = n;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        update(tree[t].ls, l, mid, pos, n);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(tree[t].rs, mid + <span class="hljs-number">1</span>, r, pos, n);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getnum</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (tree[t].l == l &amp;&amp; tree[t].r == r) &#123;<br>        <span class="hljs-keyword">return</span> tree[t].n;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (tree[t].l + tree[t].r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].rs, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, mid) + getnum(tree[t].rs, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树-标记永久化"><a href="#线段树-标记永久化" class="headerlink" title="线段树-标记永久化"></a>线段树-标记永久化</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121717724.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121717724.png" alt="image-20240526121717724"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121729855.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121729855.png" alt="image-20240526121729855"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121746997.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121746997.png" alt="image-20240526121746997"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121821681.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121821681.png" alt="image-20240526121821681"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121831175.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121831175.png" alt="image-20240526121831175"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121847400.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121847400.png" alt="image-20240526121847400"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121855524.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121855524.png" alt="image-20240526121855524"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121904894.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121904894.png" alt="image-20240526121904894"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121912575.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526121912575.png" alt="image-20240526121912575"></p><h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> *v)</span> &#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        _v[t] = v[l];<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    build(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, v);<br>    build(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, v);<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] + _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> k)</span> &#123;<br>    _v[t] += k * (r - l + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        _laz[t] += k;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, k);<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, k);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> sum)</span> &#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t] + sum * (_r[t] - _l[t] + <span class="hljs-number">1</span>);;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, sum + _laz[t])<br>            + getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, sum + _laz[t]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护矩阵"><a href="#线段树维护矩阵" class="headerlink" title="线段树维护矩阵"></a>线段树维护矩阵</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124453903.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124453903.png" alt="image-20240526124453903"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124459467.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124459467.png" alt="image-20240526124459467"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124505523.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124505523.png" alt="image-20240526124505523"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124509905.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124509905.png" alt="image-20240526124509905"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124524019.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124524019.png" alt="image-20240526124524019"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124529840.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124529840.png" alt="image-20240526124529840"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124537171.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124537171.png" alt="image-20240526124537171"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124545230.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124545230.png" alt="image-20240526124545230"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    _v[t] = _E;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> pos, MATRIX &amp;v)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] = _r[t]) &#123;<br>        _v[t] = v;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span>, pos, v);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, pos, v);<br>    &#125;<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] * _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-function">MATRIX <span class="hljs-title">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t];<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid) * <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护哈希"><a href="#线段树维护哈希" class="headerlink" title="线段树维护哈希"></a>线段树维护哈希</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124653609.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124653609.png" alt="image-20240526124653609"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124700848.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124700848.png" alt="image-20240526124700848"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124710439.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124710439.png" alt="image-20240526124710439"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124717847.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124717847.png" alt="image-20240526124717847"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124726230.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124726230.png" alt="image-20240526124726230"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124754241.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526124754241.png" alt="image-20240526124754241"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs py">bs1= []<br>bs2= []<br>mod1 = <span class="hljs-number">998244353</span><br>mod2 = <span class="hljs-number">19260817</span><br>bas = <span class="hljs-number">233</span><br>s = []<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">asdf</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, h1, h2, length</span>):<br>        self.h1 = h1<br>        self.h2 = h2<br>        self.length = length<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> asdf((self.h1 * bs1[c.length] + c.h1) % mod1, (self.h2 * bs2[c.length] + c.h2) % mod2, self.length + c.length)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> self.h1 == c.h1 <span class="hljs-keyword">and</span> self.h2 == c.h2 <span class="hljs-keyword">and</span> self.length == c.length<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">l, r, rt</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    s[rt] = build(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>) + build((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">l, r, rt, x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt;= l <span class="hljs-keyword">and</span> r &lt;= y:<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> y &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y)<br>    <span class="hljs-keyword">if</span> x &gt; (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br>    <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y) + query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">l, r, rt, ad, ch</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(ch), <span class="hljs-built_in">ord</span>(ch), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> ad &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        s[rt] = modify(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, ad, ch) + s[rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        s[rt] = s[rt * <span class="hljs-number">2</span>] + modify((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, ad, ch)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = <span class="hljs-built_in">input</span>()<br>a = <span class="hljs-string">&quot;!&quot;</span> + a<br>bs1.append(<span class="hljs-number">1</span>)<br>bs2.append(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    bs1.append(bs1[i]*bas%mod1)<br>    bs2.append(bs2[i]*bas%mod2)<br>s = [<span class="hljs-literal">None</span>] * (<span class="hljs-number">4</span> * (n+<span class="hljs-number">5</span>))<br>build(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>)<br><br>q = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    ls=<span class="hljs-built_in">input</span>().split()<br>    opt = ls[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        ad = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        ch = ls[<span class="hljs-number">2</span>]<br>        modify(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, <span class="hljs-built_in">int</span>(ad), ch)<br>    <span class="hljs-keyword">else</span>:<br>        l1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        r1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">2</span>])<br>        l2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">3</span>])<br>        r2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">4</span>])<br>        x = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l1, r1)<br>        y = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l2, r2)<br>        <span class="hljs-keyword">if</span> x == y:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="可持久化线段树"><a href="#可持久化线段树" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122146448.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122146448.png" alt="image-20240526122146448"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122158524.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122158524.png" alt="image-20240526122158524"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122211004.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122211004.png" alt="image-20240526122211004"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122219620.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122219620.png" alt="image-20240526122219620"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122228761.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122228761.png" alt="image-20240526122228761"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122248198.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122248198.png" alt="image-20240526122248198"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122258158.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122258158.png" alt="image-20240526122258158"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122329330.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122329330.png" alt="image-20240526122329330"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122339224.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122339224.png" alt="image-20240526122339224"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122353739.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526122353739.png" alt="image-20240526122353739"></p><h4 id="可持久化线段树-1"><a href="#可持久化线段树-1" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> v, ls, rs;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SEGTREE</span> &#123;</span><br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> root[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>    NODE node[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">SEGTREE::update</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-type">_t</span>, <span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++cnt;<br>        node[t].v = node[<span class="hljs-type">_t</span>].v;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        node[t].v += k;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        node[t].rs = node[<span class="hljs-type">_t</span>].rs;<br>        update(node[<span class="hljs-type">_t</span>].ls, node[t].ls, l, mid, pos, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[t].ls = node[<span class="hljs-type">_t</span>].ls;<br>        update(node[<span class="hljs-type">_t</span>]).rs, node[t].rs, mid + <span class="hljs-number">1</span>, r, pos, k);<br>    &#125;<br>    node[t].v = node[node[t].ls].v + node[node[t].rs].v;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">SEGTREE::getV</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> _l, <span class="hljs-type">int</span> _r, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == _l &amp;&amp; r == _r) &#123;<br>        <span class="hljs-keyword">return</span> node[t].v;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l + _r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, mid)<br>            + getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="模板题——区间第k小"><a href="#模板题——区间第k小" class="headerlink" title="模板题——区间第k小"></a>模板题——<a href="https://www.lanqiao.cn/problems/1132/learning/">区间第k小</a></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> lc(x) tr[x].l</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rc(x) tr[x].r</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">6</span>;<br><span class="hljs-type">int</span> n,m,a[N],b[N];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br> <span class="hljs-type">int</span> l,r,s;<span class="hljs-comment">//左右儿子，该节点在值域中的个数</span><br>&#125;tr[N*<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> idx,root[N];<br><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;x,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span><br>&#123;<br>    x=++idx;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> ;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    build(lc(x),l,mid);<br>    build(rc(x),mid+<span class="hljs-number">1</span>,r);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> &amp;y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> v)</span><br>&#123;<br>    y=++idx;<br>    tr[y]=tr[x];<br>    tr[y].s++;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(v&lt;=mid)<br>        update(lc(x),lc(y),l,mid,v);<br>    <span class="hljs-keyword">else</span><br>        update(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,v);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> k)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> l;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> s=tr[lc(y)].s-tr[lc(x)].s;<br>    <span class="hljs-keyword">if</span>(k&lt;=s)<br>        <span class="hljs-keyword">return</span> query(lc(x),lc(y),l,mid,k);<br>    <span class="hljs-keyword">else</span> <br>        <span class="hljs-keyword">return</span> query(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,k-s);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    ios::sync_with_stdio(<span class="hljs-number">0</span>),<span class="hljs-built_in">cin</span>.tie(<span class="hljs-number">0</span>),<span class="hljs-built_in">cout</span>.tie(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;a[i];<br>        b[i]=a[i];<br>    &#125;<br>    sort(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n);<br>    <span class="hljs-type">int</span> bn=unique(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n)-b<span class="hljs-number">-1</span>;<br>    build(root[<span class="hljs-number">0</span>],<span class="hljs-number">1</span>,bn);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> id=lower_bound(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+bn,a[i])-b;<br>        update(root[i<span class="hljs-number">-1</span>],root[i],<span class="hljs-number">1</span>,bn,id);<br>    &#125;<br>    <span class="hljs-keyword">while</span>(m--)<br>    &#123;<br>        <span class="hljs-type">int</span> l,r,k;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;l&gt;&gt;r&gt;&gt;k;<br>        <span class="hljs-type">int</span> id=query(root[l<span class="hljs-number">-1</span>],root[r],<span class="hljs-number">1</span>,bn,k);<br>        <span class="hljs-built_in">cout</span>&lt;&lt;b[id]&lt;&lt;<span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><h2 id="单源最短路"><a href="#单源最短路" class="headerlink" title="单源最短路"></a>单源最短路</h2><h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526130244161.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526130244161.png" alt="image-20240526130244161"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526130253653.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526130253653.png" alt="image-20240526130253653"></p><h4 id="模板题——-蓝桥公园"><a href="#模板题——-蓝桥公园" class="headerlink" title="模板题—— 蓝桥公园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1121/learning"> 蓝桥公园</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span>=sys.stdin.readline<br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e18</span>)<br>dp=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  dp[i][i]=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br><span class="hljs-comment">#Floyd 模板</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> dp[i][j]==inf:<br>        dp[i][j]=-<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  s,e=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-built_in">print</span>(dp[s][e])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># Floyd 算法  多个起点--多个终点  多源最短路算法（多对多）</span><br><span class="hljs-comment"># 最简单的最短路径算法</span><br><span class="hljs-comment"># 存图:最简单的矩阵存图</span><br><span class="hljs-comment"># 效率不高，不能用于大图</span><br><br><span class="hljs-comment"># 动态规划：求图上两点i,j之间的最短距离，按‘从小图到全图’的步骤，在逐步扩大图的过程中计算和更新最短路</span><br><span class="hljs-comment"># 定义状态：dp[k][i][j]: i,j,k是点的编号，范围1--n</span><br><span class="hljs-comment"># 状态dp[k][i][j]表示在包含1--k点的子图上，点对i,j之间的最短路</span><br><span class="hljs-comment"># 状态转移方程 从子图1-k-1 扩展到子图 1-k</span><br><span class="hljs-comment"># dp[k][i][j]=min(dp[k-1][i][j],dp[k-1][i][k]+dp[k-1][k][j])</span><br><span class="hljs-comment"># 初始值：i,j直连 就是他们的边长； 若不直连，赋值为无穷大 / 0x3f3f3f3f3f3f3f3f</span><br><span class="hljs-comment"># 滚动数组优化：dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment">#                           不经过k     经过k</span><br><span class="hljs-comment"># for k in range(1,n+1):</span><br><span class="hljs-comment"># for i in range(1,n+1):</span><br><span class="hljs-comment"># for j in range(1,n+1):</span><br><span class="hljs-comment"># dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment"># 只能用于n&lt;300 的小规模图</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">floyd</span>():<br>    <span class="hljs-keyword">global</span> dp<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><span class="hljs-comment"># 蓝桥公园</span><br><span class="hljs-comment"># n个点 m条边 q次查询</span><br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span><br>dp=[[INF <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)]<br><span class="hljs-comment"># 记录路径</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>    u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br>floyd()<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    start,end=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-comment"># 无法到达</span><br>    <span class="hljs-keyword">if</span> dp[start][end]==INF:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 起点终点相同</span><br>    <span class="hljs-keyword">elif</span> start==end:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(dp[start][end])<br><br><span class="hljs-comment"># 1-12</span><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N, M, Q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>weight = [[<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> i == j <span class="hljs-keyword">else</span> sys.maxsize <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>) ] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 领接矩阵</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(M):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    weight[u][v] = <span class="hljs-built_in">min</span>(weight[u][v], w)<br>    weight[v][u] = weight[u][v]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># N次递推</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># 更新最小值</span><br>                weight[i][j] = <span class="hljs-built_in">min</span>(weight[i][j], weight[i][k] + weight[k][j])<br>                weight[j][i] = weight[i][j]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Q):<br>    st, ed = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    t = weight[st][ed]<br>    <span class="hljs-keyword">if</span> t == sys.maxsize:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(t)<br></code></pre></td></tr></table></figure><h4 id="模板题——城市间的交易"><a href="#模板题——城市间的交易" class="headerlink" title="模板题——城市间的交易"></a>模板题——<a href="https://www.lanqiao.cn/problems/8336/learning/">城市间的交易</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 8336 城市间的交易</span><br>INF =<span class="hljs-number">1e18</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 产量、成本和售价</span><br>a, p, s = [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>)<br>f = [[INF] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>g = [[<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    a[i], p[i], s[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 邻接矩阵初始化</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    f[u][v] = f[v][u] = <span class="hljs-built_in">min</span>(f[u][v], w)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    f[i][i] = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># Floyd</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k]+f[k][j])<br><span class="hljs-comment"># g[i][j]表示城市i的物品运输到城市j可得到的利润 = 城市j的售价 - 城市i的成本 - 从i到j的运输成本</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-comment"># 求每个城市的利润</span><br>    cnt = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        g[i][j] = s[j] - p[i] - f[i][j]<br>        cnt = <span class="hljs-built_in">max</span>(cnt, g[i][j])<br>    ans += a[i] * cnt<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>res=[]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  a,p,s=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  res.append((a,p,s))<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e10</span>)<br>path=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  path[u][v]=path[v][u]=<span class="hljs-built_in">min</span>(w,path[u][v])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+n):<br>  path[i][i]=<span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      path[i][j]=<span class="hljs-built_in">min</span>(path[i][j],path[i][k]+path[k][j])<br>re=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  result=<span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> path[i][j]!=inf:<br>       result=<span class="hljs-built_in">max</span>(result,res[j-<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]-res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]-path[i][j]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br>  re+=result<br><span class="hljs-built_in">print</span>(re)<br></code></pre></td></tr></table></figure><h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131011122.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131011122.png" alt="image-20240526131011122"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131022596.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131022596.png" alt="image-20240526131022596"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131034522.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131034522.png" alt="image-20240526131034522"></p><h4 id="模板题——蓝桥王国"><a href="#模板题——蓝桥王国" class="headerlink" title="模板题——蓝桥王国"></a>模板题——<a href="https://www.lanqiao.cn/problems/1122/learning">蓝桥王国</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 1122_蓝桥王国_Dijkstra算法</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue  <span class="hljs-comment"># 导入优先队列</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>INF = <span class="hljs-number">1e18</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-comment"># 返回从s出发到所有点的最短路</span><br>    <span class="hljs-comment"># d[i]表示从s到i的最短路</span><br>    d = [INF] * (n + <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># vis[i]表示是否出队列（注：与传统BFS不同）</span><br>    vis = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    q = PriorityQueue()<br><br>    <span class="hljs-comment"># 1.将起点入队列，更新距离</span><br>    d[s] = <span class="hljs-number">0</span><br>    <span class="hljs-comment"># 将距离放在前面，才能对距离使用优先队列</span><br>    q.put((d[s], s))  <span class="hljs-comment"># 入队用put()</span><br>    <span class="hljs-comment"># 当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():  <span class="hljs-comment"># 或者写为： while len(q.queue) != 0:</span><br>        dis, u = q.get()<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[u]: <span class="hljs-keyword">continue</span><br>        vis[u] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-comment"># 对于从u出发，到达v，权重为w的边</span><br>        <span class="hljs-keyword">for</span> v, w <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-keyword">if</span> d[v] &gt; d[u] + w:<br>                d[v] = d[u] + w<br>                q.put((d[v], v))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> d[i] == INF:<br>            d[i] = -<span class="hljs-number">1</span><br>    <span class="hljs-comment"># d.pop(0)</span><br>    <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>::] <span class="hljs-comment"># 从1到最后</span><br><br><br><span class="hljs-comment"># 皇宫编号为1</span><br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 图的存储：邻接表。此题N为10^5，不能用邻接矩阵存图</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append((v, w))<br><span class="hljs-built_in">print</span>(*dijkstra(<span class="hljs-number">1</span>)) <span class="hljs-comment"># 列表前面加星号作用是将列表解开（unpacke）成多个独立的参数，传入函数。</span><br></code></pre></td></tr></table></figure><h4 id="模板题——混境之地3"><a href="#模板题——混境之地3" class="headerlink" title="模板题——混境之地3"></a>模板题——<a href="https://www.lanqiao.cn/problems/3818/learning">混境之地3</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 3818 混境之地  Dijkstra</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><span class="hljs-comment"># 数据较大时可以进行如下优化</span><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span> = sys.stdin.readline<br>INF = <span class="hljs-number">1e18</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">c</span>):<br>    <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;.&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        s = <span class="hljs-string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> c == s[i]:<br>                <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span><br>        <span class="hljs-comment"># return ord(c) - ord(&#x27;A&#x27;) + 1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>():<br>    d = [[INF] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    vis = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    q = PriorityQueue()  <span class="hljs-comment"># 创建优先队列</span><br>    <span class="hljs-comment"># 1.将起点塞入队列</span><br>    d[x1][y1] = <span class="hljs-number">0</span><br>    q.put((d[x1][y1], x1, y1))<br>    <span class="hljs-comment"># 2.当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():<br>        dis, x, y = q.get()<br>        <span class="hljs-keyword">if</span> x == x2 <span class="hljs-keyword">and</span> y == y2:<br>            <span class="hljs-keyword">return</span> dis<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[x][y]:<br>            <span class="hljs-keyword">continue</span><br>        vis[x][y] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-keyword">for</span> d elta_x, delta_y <span class="hljs-keyword">in</span> [[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]]:<br>            xx, yy = x + delta_x, y + delta_y<br>            <span class="hljs-comment"># 判断未越界、未标记、非障碍物</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= xx &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= yy &lt; m <span class="hljs-keyword">and</span> vis[xx][yy] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Map[xx][yy] != <span class="hljs-string">&quot;#&quot;</span>:<br>                <span class="hljs-keyword">if</span> d[xx][yy] &gt; d[x][y] + get(Map[xx][yy]):  <span class="hljs-comment"># 写一个get函数获取权重</span><br>                    d[xx][yy] = d[x][y] + get(Map[xx][yy])<br>                    q.put((d[xx][yy], xx, yy))<br>    <span class="hljs-keyword">return</span> INF<br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 地图大小</span><br>x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 起始点坐标</span><br>x1, y1, x2, y2 = x1 - <span class="hljs-number">1</span>, y1 - <span class="hljs-number">1</span>, x2 - <span class="hljs-number">1</span>, y2 - <span class="hljs-number">1</span><br><span class="hljs-comment"># 地图</span><br>Map = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>e = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <span class="hljs-comment"># 剩余能量</span><br><span class="hljs-comment"># 如果能量支撑到达终点，返回Yes，否则，返回No.</span><br><span class="hljs-keyword">if</span> e &gt;= dijkstra():  <span class="hljs-comment"># 不传参，使用全局变量</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Yes&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><h3 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131621641.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131621641.png" alt="image-20240526131621641"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131631028.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131631028.png" alt="image-20240526131631028"></p><h4 id="模板题——繁忙的都市"><a href="#模板题——繁忙的都市" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kruskal</span>():<br>    <span class="hljs-comment"># 初始化</span><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = []<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        Map.append([w, u, v])  <span class="hljs-comment"># 注意第一个参数是边权</span><br>    Map.sort()<br><br>    <span class="hljs-comment"># 并查集</span><br>    p = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">if</span> x != p[x]:<br>            p[x] = root(p[x])<br>        <span class="hljs-keyword">return</span> p[x]<br><br>    <span class="hljs-comment"># 非连环时更新</span><br>    _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span> = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> w, u, v <span class="hljs-keyword">in</span> Map:<br>        root_u = root(u)<br>        root_v = root(v)<br>        <span class="hljs-keyword">if</span> root_u != root_v:<br>            p[root_u] = root_v<br>            _<span class="hljs-built_in">sum</span> += <span class="hljs-number">1</span><br>            _<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span>(_<span class="hljs-built_in">max</span>, w)<br>    <span class="hljs-keyword">return</span> _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span><br><span class="hljs-built_in">print</span>(*kruskal())<br></code></pre></td></tr></table></figure><h3 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131818064.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131818064.png" alt="image-20240526131818064"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131825567.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131825567.png" alt="image-20240526131825567"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131840546.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131840546.png" alt="image-20240526131840546"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131848626.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526131848626.png" alt="image-20240526131848626"></p><h4 id="模板题——繁忙的都市-1"><a href="#模板题——繁忙的都市-1" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>e=[]<br><span class="hljs-keyword">for</span>  _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  e.append((w,u,v))<br><span class="hljs-comment">#边按照权重进行排序</span><br>e.sort()<br><span class="hljs-comment">#需要一个并查集</span><br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">findroot</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>  <span class="hljs-keyword">else</span>:<br>    p[x]=findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br>ans=<span class="hljs-number">0</span><br><span class="hljs-comment">#进行遍历所有的边，进行合并：</span><br><span class="hljs-keyword">for</span> w,u,v <span class="hljs-keyword">in</span> e:<br>  <span class="hljs-comment">#只要u和v不在同一集合内就可以进行合并：</span><br>  rootu=findroot(u)<br>  rootv=findroot(v)<br>  <span class="hljs-keyword">if</span> rootu!=rootv:<br>    p[rootu]=rootv<br>    ans=<span class="hljs-built_in">max</span>(ans,w)<br><span class="hljs-built_in">print</span>(n-<span class="hljs-number">1</span>,ans)<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132045604.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526132045604.png" alt="image-20240526132045604"></p><h2 id="最近共同祖先"><a href="#最近共同祖先" class="headerlink" title="最近共同祖先"></a>最近共同祖先</h2><h4 id="最近公共祖先"><a href="#最近公共祖先" class="headerlink" title="最近公共祖先"></a>最近公共祖先</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526105959804.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526105959804.png" alt="image-20240526105959804"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110010233.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110010233.png" alt="image-20240526110010233"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110018355.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110018355.png" alt="image-20240526110018355"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110031858.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110031858.png" alt="image-20240526110031858"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110040710.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110040710.png" alt="image-20240526110040710"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110052606.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%B8%B8%E8%A7%84%E8%80%83%E7%82%B9%E6%80%BB%E7%BB%93/image-20240526110052606.png" alt="image-20240526110052606"></p><h4 id="模板题——最近公共祖先LCA查询"><a href="#模板题——最近公共祖先LCA查询" class="headerlink" title="模板题——最近公共祖先LCA查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/4385/learning">最近公共祖先LCA查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment">#设置deep数组表示深度。</span><br><span class="hljs-comment">#front数组，表示节点u,前2**i层的爹是谁？？？</span><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>tree=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>fornt=[[<span class="hljs-number">0</span>]*(<span class="hljs-number">21</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<span class="hljs-comment">#如果你是0你就是孤儿。</span><br>deep=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<span class="hljs-comment">#0节点没有层数。</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>  u,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  tree[u].append(v)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">er,die</span>):<br>  <span class="hljs-keyword">if</span> die==<span class="hljs-number">0</span>:<br>    deep[er]=<span class="hljs-number">1</span><span class="hljs-comment">#这是第一层,同时，第一层也没有爹啊，也不需要更新如何层数相关节点。</span><br><br>  <span class="hljs-keyword">else</span>:<br>    deep[er]=deep[die]+<span class="hljs-number">1</span><span class="hljs-comment">#更新层数。</span><br>    fornt[er][<span class="hljs-number">0</span>]=die<span class="hljs-comment">#上一层的点，就是die。</span><br>    <span class="hljs-keyword">for</span> cc <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>):<br>      <span class="hljs-keyword">if</span> fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br><br>        fornt[er][cc]=fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]<br>        <span class="hljs-comment">#倍增法。2**i层之上的点=</span><br>        <span class="hljs-comment">#2**(cc-1)上面的点的上面2**(cc-1)的点。就，无限套娃。</span><br>  <br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tree[er]:<br>    dfs(i,er)<span class="hljs-comment">#儿子变成新的爹。</span><br>dfs(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<span class="hljs-comment">#儿子是根，爹不存在。</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-comment">#第一步，拉升。将x拉到和y一个水平。一开始走2**20步，太大，就走2**19步，然后走一半，再走一半</span><br>  <span class="hljs-comment">#就像那个乌龟与跑步哥一样。二进制原理使得这个步数遍历后一定是一个高度。</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> deep[fornt[x][i]]&gt;=deep[y] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span>:<br>      x=fornt[x][i]<span class="hljs-comment">#自动判断能走不能走，能走则走一大步。x提升到别的节点。</span><br><br>  <span class="hljs-comment">#此时提升必定一样了。</span><br>  <span class="hljs-keyword">if</span> x==y:<br>    <span class="hljs-keyword">return</span> x<span class="hljs-comment">#原来你就是我爹！</span><br>  <br>  <span class="hljs-keyword">else</span>:<span class="hljs-comment">#不是？我们再度提升吧！神明！</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> fornt[x][i]!=fornt[y][i] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> fornt[y][i]!=<span class="hljs-number">0</span>:<span class="hljs-comment">#相等反而不能决定什么，因为可能不是最近的公共祖先</span><br>        x=fornt[x][i]<br>        y=fornt[y][i]<br>    <span class="hljs-keyword">return</span> fornt[y][<span class="hljs-number">0</span>]<span class="hljs-comment">#最后，y上面的就是自己的公共祖先。</span><br>q=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> deep[x]&lt;deep[y]:<span class="hljs-comment">#我们设x是深节点。</span><br>    x,y=y,x<br>  <span class="hljs-built_in">print</span>(find(x,y))<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;动态规划&quot;&gt;&lt;a href=&quot;#动态规划&quot; class=&quot;headerlink&quot; title=&quot;动态规划&quot;&gt;&lt;/a&gt;动态规划&lt;/h1&gt;&lt;h2 id=&quot;基础DP&quot;&gt;&lt;a href=&quot;#基础DP&quot; class=&quot;headerlink&quot; title=&quot;基础DP&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="刷题" scheme="http://zdx-1.github.io/categories/%E5%88%B7%E9%A2%98/"/>
    
    <category term="蓝桥国赛" scheme="http://zdx-1.github.io/categories/%E5%88%B7%E9%A2%98/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B/"/>
    
    
    <category term="蓝桥杯" scheme="http://zdx-1.github.io/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
  </entry>
  
  <entry>
    <title>蓝桥杯国赛试题解析</title>
    <link href="http://zdx-1.github.io/2024/05/26/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/"/>
    <id>http://zdx-1.github.io/2024/05/26/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/</id>
    <published>2024-05-26T11:02:40.000Z</published>
    <updated>2024-05-30T04:21:26.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第十四届Python大学C组"><a href="#第十四届Python大学C组" class="headerlink" title="第十四届Python大学C组"></a>第十四届Python大学C组</h1><h2 id="跑步计划"><a href="#跑步计划" class="headerlink" title="跑步计划"></a><a href="https://www.lanqiao.cn/problems/17113/learning">跑步计划</a></h2><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝计划在某天的日期中出现 $1$ 时跑 $5$ 千米，否则只跑 $1$ 千米。注意日期中出现 $1$ 不仅指年月日也指星期。</p><p>请问按照小蓝的计划，$2023$ 年小蓝总共会跑步锻炼多少千米?例如，$5$ 月 $1$ 日、$1$ 月 $13$ 日、$11$ 月 $5$ 日、$4$ 月 $3$ 日 (星期一) 小蓝会跑 $5$ 千米，而 $5$ 月 $23$ 日小蓝会跑 $1$ 千米 (示例日期均为 $2023$ 年)</p><h3 id="答案提交"><a href="#答案提交" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 714  |  总提交次数: 778  |  通过率: 91.8%</p><p>难度: 中等   标签: 2023, 国赛, 日期问题</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br>bt = datetime.date(<span class="hljs-number">2023</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>c = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">366</span>):<br>    bt += datetime.timedelta(days=<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">in</span> bt.isoformat() <span class="hljs-keyword">or</span> bt.isoweekday() == <span class="hljs-number">1</span>:<br>        c += <span class="hljs-number">5</span><br>    <span class="hljs-keyword">else</span>:<br>        c += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(c)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">sun = <span class="hljs-number">0</span><br><span class="hljs-keyword">import</span> datetime<br>a = datetime.date(<span class="hljs-number">2023</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">366</span>):<br>  <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">in</span> a.strftime(<span class="hljs-string">&quot;%m%d%w&quot;</span>) :sun+=<span class="hljs-number">4</span><br>  sun+=<span class="hljs-number">1</span><br>  a += datetime.timedelta(days = <span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(sun)<br></code></pre></td></tr></table></figure><h2 id="混乘数字"><a href="#混乘数字" class="headerlink" title="混乘数字"></a><a href="https://www.lanqiao.cn/problems/17121/learning">混乘数字</a></h2><h3 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h3><p>混乘数字的定义如下: 对于一个正整数 $n$，如果存在正整数 $a, b$，使得 $n &#x3D; a \times b$，而且 $a$ 和 $b$ 的十进制数位中每个数字出现的次数之和与 $n$ 中对应数字出现次数相同，则称 $n$ 为混乘数字。</p><p>例如，对于正整数 $n &#x3D; 126$，存在 $a &#x3D; 6$, $b &#x3D; 21$ 满足条件，因此 $126$ 是一个混乘数字。</p><p>又如，对于正整数 $n &#x3D; 180225$，存在 $a &#x3D; 225$, $b &#x3D; 801$ 满足条件，因此 $180225$ 是一个混乘数字。</p><p>请你帮助计算出，$1 \sim 1000000$ (含)之间一共有多少个数字是混乘数字。</p><h3 id="答案提交-1"><a href="#答案提交-1" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>PyPy3</td><td>5s</td><td>256M</td></tr><tr><td>Go</td><td>5s</td><td>256M</td></tr><tr><td>JavaScript</td><td>5s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><span class="hljs-comment"># 混乘数字：</span><br><span class="hljs-comment"># 条件1：a * b == n</span><br><span class="hljs-comment"># 条件2：a、b一定是n的因子</span><br><span class="hljs-comment"># 条件3：且a、b中各个数字出现次数 == n中各个数字出现次数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">isHunc</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;返回True代表是混乘数字&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># 1. 求n中每个数字出现次数</span><br>    nums = defaultdict(<span class="hljs-built_in">int</span>)<br>    <span class="hljs-keyword">for</span> kwd <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">str</span>(n)):<br>        nums[kwd] += <span class="hljs-number">1</span><br>    <span class="hljs-comment"># 2. 开启暴力美学</span><br>    <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">int</span>(math.sqrt(n)) + <span class="hljs-number">1</span>):    <span class="hljs-comment"># 两个因子相乘，绝对有一个因子&lt;= 开平方后的值</span><br>        <span class="hljs-comment"># 判断是否符合条件1、2</span><br>        <span class="hljs-keyword">if</span> n % a == <span class="hljs-number">0</span>:<br>            b = n // a<br>            <span class="hljs-comment"># 判断是否符合条件3</span><br>            <span class="hljs-keyword">if</span> cnt_dy(a, b, nums):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">cnt_dy</span>(<span class="hljs-params">a, b, nums</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;符合条件3 返回 True&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># nums是可变对象，形参改变实参也会改变，我们需要将他的值复制，这样才不对原始数据造成更改</span><br>    now = nums.copy()<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(a):<br>        now[k] -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> now[k] &lt; <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(b):<br>        now[k] -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> now[k] &lt; <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-comment"># 判断字典中是否还有值</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>(now.values()) != <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">125</span>, <span class="hljs-number">1000001</span>):<br>     <span class="hljs-keyword">if</span> isHunc(i):<br>         ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> math<br>count=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1000001</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,<span class="hljs-built_in">int</span>(math.sqrt(i))+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> i % j == <span class="hljs-number">0</span>:<br>      <span class="hljs-keyword">if</span> <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">str</span>(i)) == <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">str</span>(j)+<span class="hljs-built_in">str</span>(i//j)):<br>        count += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">break</span><br>  <span class="hljs-keyword">if</span> i % <span class="hljs-number">100000</span> == <span class="hljs-number">0</span>:<br>    <span class="hljs-built_in">print</span>(i,count)<br><span class="hljs-built_in">print</span>(count)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">590</span>)<br></code></pre></td></tr></table></figure><h2 id="整数变换"><a href="#整数变换" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning">整数变换</a></h2><h3 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝有一个整数 $n$。每分钟，小蓝的数都会发生变化，变为上一分钟的数减去上一分钟的数的各个数位和。</p><p>例如，如果小蓝开始时的数为 $23$，则下一分钟变为 $23 − (2 + 3) &#x3D; 18$，再下一分钟变为 $18 − (1 + 8) &#x3D; 9$，再下一分钟变为 $9 − 9 &#x3D; 0$，共经过了 $3$ 分钟变为 $0$。</p><p>给定一个正整数，请问这个数多少分钟后变为 $0$。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含一个整数 $n$。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数，表示答案。</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">23<br></code></pre></td></tr></table></figure><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定"><a href="#评测用例规模与约定" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30%$ 的评测用例，$1 ≤ n ≤ 1000$;</p><p>对于 $60%$ 的评测用例，$1 ≤ n ≤ 10^6$;</p><p>对于所有评测用例，$1 ≤ n ≤ 10^9$。</p><h3 id="运行限制-2"><a href="#运行限制-2" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h3><p>这道题目需要使用pypy3，否则会超时</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">input</span>()<br>int_n = <span class="hljs-built_in">int</span>(n)<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> int_n &gt; <span class="hljs-number">0</span>:<br>    s = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">list</span>(<span class="hljs-built_in">str</span>(int_n))))<br>    int_n -= s<br>    ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a><a href="https://www.lanqiao.cn/problems/17115/learning">定时任务</a></h2><h3 id="问题描述-3"><a href="#问题描述-3" class="headerlink" title="问题描述"></a>问题描述</h3><p>Cron 表达式在定时任务中经常被使用，在这里我们用了一种简化后的版本 SimpleCron 表达式：SimpleCron 表达式是一个具有时间含义的字符串，字符串以 $4$ 个空格隔开，分为 $5$ 个域，格式为 $X X X X X$，其中 $X$ 是一个域的占位符。$5$ 个域从左至右依次为秒 $(0 - 59)$、分钟 $(0 - 59)$、小时 $(0 - 23)$、日期 $(1 - 31)$、月份 $(1 - 12)$，其中括号内为他们各自的取值范围。同时域内取值也可以使用一些特殊字符（每个域内只能使用一种特殊字符）:</p><ol><li>特殊字符 $*$ （ASCII 码为 $42$）表示所有可能的值。例如：在分钟域内表示每一分钟；在日期域内表示月内的每一天。</li><li>特殊字符 $,$ （ASCII 码为 $44$）表示列出枚举值。例如：在秒域内，$3,20$ 表示分别在 $3$ 秒和 $20$ 秒执行一次任务。</li><li>特殊字符 $-$ （ASCII 码为 $45$）表示范围，可以视为连续的若干个枚举值。例如：$1-5$ 等价于 $1,2,3,4,5$。</li></ol><p>例如，$4 2 1,3,15 1-31 *$ 表示的含义是每个月份中的每一天中的 $01:02:04$、$03:02:04$、$15:02:04$ 这三个时刻各执行一次，在 $2023$ 年一共会执行 $1095$ 次。</p><p>现在给出你一个合法的 SimpleCron 表达式，其中用到的所有数字均没有前导零。请问在 $2023$ 一整年当中，使用了这个表达式的定时任务总计会执行多少次?</p><h3 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行，包含一个 SimpleCron 字符串。</p><h3 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行，包含一个整数表示答案。</p><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>4 </span><span>2</span> <span>1</span>,<span>3</span>,<span>15</span> <span>1</span>-<span>31</span> *</p><h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h3><p><span>1095</span></p><h3 id="评测用例规模与约定-1"><a href="#评测用例规模与约定-1" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于所有评测用例，$0 ≤$ 秒域的取值 $≤ 59$，$0 ≤$ 分钟域的取值 $≤ 59$，$0 ≤$ 小时域的取值 $≤ 23$，$1 ≤$ 日期域的取值 $≤ 31$，$1 ≤$ 月份域的取值 $≤ 12$。</p><h3 id="运行限制-3"><a href="#运行限制-3" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 181  |  总提交次数: 251  |  通过率: 72.1%</p><p>难度: 中等   标签: 2023, 国赛, 日期问题</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> datetime<br><br>time = <span class="hljs-built_in">input</span>().split()<br>a = [[<span class="hljs-number">0</span>, <span class="hljs-number">59</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">59</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">23</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">31</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">12</span>]]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>): <span class="hljs-comment"># 先得到对应时间点，哪些时间有任务</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;*&#x27;</span> <span class="hljs-keyword">in</span> time[i]:<br>        time[i] = <span class="hljs-built_in">range</span>(a[i][<span class="hljs-number">0</span>], a[i][<span class="hljs-number">1</span>] + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;-&#x27;</span> <span class="hljs-keyword">in</span> time[i]:<br>        l, r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, time[i].split(<span class="hljs-string">&#x27;-&#x27;</span>))<br>        time[i] = <span class="hljs-built_in">range</span>(l, r + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;,&#x27;</span> <span class="hljs-keyword">in</span> time[i]:<br>        time[i] = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, time[i].split(<span class="hljs-string">&#x27;,&#x27;</span>)))<br>    <span class="hljs-keyword">else</span>:<br>        time[i] = [<span class="hljs-built_in">int</span>(time[i])]<br><br>s, f, h, d, m = time<br><br>days = <span class="hljs-built_in">len</span>(s) * <span class="hljs-built_in">len</span>(f) * <span class="hljs-built_in">len</span>(h) <span class="hljs-comment">#一天的任务次数可以直接求得</span><br><br>start = datetime.date(<span class="hljs-number">2023</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>end = datetime.date(<span class="hljs-number">2024</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>t = datetime.timedelta(days=<span class="hljs-number">1</span>)<br><br>cnt = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> start &lt; end: <span class="hljs-comment">#按天遍历</span><br>    _, M, D = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>(start).split(<span class="hljs-string">&#x27;-&#x27;</span>))<br><br>    <span class="hljs-keyword">if</span> M <span class="hljs-keyword">in</span> m <span class="hljs-keyword">and</span> D <span class="hljs-keyword">in</span> d:<span class="hljs-comment">#满足累加每天的任务</span><br>        cnt += days<br>    start += t<br><br><span class="hljs-built_in">print</span>(cnt)<br></code></pre></td></tr></table></figure><h2 id="2023"><a href="#2023" class="headerlink" title="2023"></a><a href="https://www.lanqiao.cn/problems/17116/learning">2023</a></h2><h3 id="问题描述-4"><a href="#问题描述-4" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定 $n$, $m$，请求出所有 $n$ 位十进制整数中有多少个数中恰好出现了 $m$ 个 $2023$。</p><p>例如 $00202312023$ 是一个 $11$ 位的出现了 $2$ 个 $2023$ 的十进制整数。由于结果可能很大，请输出答案对 $998244353$ 取模的结果。</p><h3 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含两个整数 $n$, $m$，用一个空格分隔。</p><h3 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>5 </span><span>1</span></p><h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">20<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-2"><a href="#评测用例规模与约定-2" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40%$ 的评测用例，$n ≤ 10^5$，$m ≤ 10$；</p><p>对于所有评测用例，$4 ≤ n ≤ 10^5$，$0 ≤ 4m ≤ n$。</p><h3 id="运行限制-4"><a href="#运行限制-4" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 34  |  总提交次数: 232  |  通过率: 14.7%</p><p>难度: 中等   标签: 2023, 国赛, 排列组合, 二项式定理</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-4"><a href="#解题思路-4" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quickpow</span>(<span class="hljs-params">a, n, mod</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    快速幂算法，计算 a 的 n 次幂对 mod 取模的结果</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    ans = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> n:<br>        <span class="hljs-keyword">if</span> n &amp; <span class="hljs-number">1</span>:<br>            ans = ans * a % mod<br>        a = a * a % mod<br>        n &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> ans<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">C</span>(<span class="hljs-params">m, n, fact, inv, mod</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    计算组合数 C(m, n) % mod 的值</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> fact[n] * inv[m] % mod * inv[n - m] % mod<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fact_init</span>(<span class="hljs-params">mod</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    初始化阶乘数组和逆元数组</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    fact = [<span class="hljs-number">0</span>] * (<span class="hljs-number">100001</span>)<br>    inv = [<span class="hljs-number">0</span>] * (<span class="hljs-number">100001</span>)<br>    fact[<span class="hljs-number">0</span>] = inv[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">100001</span>):<br>        fact[i] = fact[i - <span class="hljs-number">1</span>] * i % mod<br>        inv[i] = inv[i - <span class="hljs-number">1</span>] * quickpow(i, mod - <span class="hljs-number">2</span>, mod) % mod<br>    <span class="hljs-keyword">return</span> fact, inv<br><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>k = n // <span class="hljs-number">4</span><br>ans = <span class="hljs-number">0</span><br>mod = <span class="hljs-number">998244353</span><br>fact, inv = fact_init(mod)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m, k + <span class="hljs-number">1</span>):<br>    ans += (-<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> (i - m) % <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>) * C(m, i, fact, inv, mod) * C(i, n - <span class="hljs-number">3</span> * i, fact, inv, mod) * quickpow(<span class="hljs-number">10</span>, n - <span class="hljs-number">4</span> * i, mod)<br>    ans %= mod<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid2479109-20240516-1715843529436.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid2479109-20240516-1715843529436.png" alt="二项式反演"></p><h2 id="最大算式"><a href="#最大算式" class="headerlink" title="最大算式"></a><a href="https://www.lanqiao.cn/problems/17129/learning">最大算式</a></h2><h3 id="问题描述-5"><a href="#问题描述-5" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定 $n$ 个非负整数 $A_i$ ，你可以在不改变这些数顺序的前提下任意在他们之间插入 $+,*,(,)$ 四种符号 。</p><p>请问在得到的算式合法的前提下，算式的结果最大可以是多少?</p><p>由于结果很大，你只需要输出答案对 $10^9+7$ 取模的结果即可。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $n$ 。</p><p>第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \cdots, A_n$ ，相邻两个整数之间使用一个空格分隔。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-3"><a href="#样例输入-3" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">7 1 2 1 1 1 2 1<br></code></pre></td></tr></table></figure><h3 id="样例输出-3"><a href="#样例输出-3" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">27<br></code></pre></td></tr></table></figure><h3 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h3><p>$(1+2)\times(1+1+1)\times(2+1)&#x3D;27$ .</p><h3 id="评测用例规模"><a href="#评测用例规模" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $40%$ 的评测用例， $n \leq 5000$ ；</p><p>对于所有评测用例， $1 \leq n \leq 10^5$ ， $0 \leq A_i \leq 10^9$ 。</p><h3 id="运行限制-5"><a href="#运行限制-5" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 22  |  总提交次数: 38  |  通过率: 57.9%</p><p>难度: 中等   标签: 2023, 贪心, 国赛, 数学</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-5"><a href="#解题思路-5" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> m[i]==<span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">if</span> s[-<span class="hljs-number">1</span>]==<span class="hljs-number">2</span>:<br>            s[-<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> s[-<span class="hljs-number">1</span>]&gt;m[i+<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> m[i+<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br>            m[i+<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            s[-<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        s.append(m[i])<br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>m=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>s=[]<br><span class="hljs-keyword">if</span> m[<span class="hljs-number">0</span>]==<span class="hljs-number">1</span>:<br>    m[<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br><span class="hljs-keyword">else</span>:<br>    s.append(m[<span class="hljs-number">0</span>])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> m[i]!=<span class="hljs-number">0</span>:<br>        find(i)<br><span class="hljs-keyword">if</span> m[-<span class="hljs-number">1</span>]==<span class="hljs-number">1</span>:<br>    s[-<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br><span class="hljs-keyword">elif</span> m[-<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br>    s.append(m[-<span class="hljs-number">1</span>])<br>k=<span class="hljs-number">1</span><br>num=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> s:<br>    k=k*j<br>num+=k<br><span class="hljs-built_in">print</span>(num%<span class="hljs-number">1000000007</span>)<br></code></pre></td></tr></table></figure><h2 id="躲炮弹"><a href="#躲炮弹" class="headerlink" title="躲炮弹"></a><a href="https://www.lanqiao.cn/problems/17123/learning/">躲炮弹</a></h2><h3 id="问题描述-6"><a href="#问题描述-6" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝正在玩一个躲炮弹的游戏。游戏中有一个人物和一个炮塔，它们的初始距离为 $n$。</p><p>炮塔可能选择在区间 $[L, R]$ 上的任意一个整数 $x$，然后发射的炮弹会飞向小蓝操控的人物。但炮弹只会在飞出 $x$ 的倍数的距离($x, 2x, 3x, \ldots$)时落地，然后弹回到空中。如果小蓝操控的人物恰好站在了炮弹落地的位置，那么游戏就会结束。</p><p>小蓝只能在炮弹发射前移动他的人物，每移动一步，可以使得人物和炮塔的距离增加 $1$ 或者减少 $1$。他想知道最少要移动多少步才能保证自己的人物一定能躲过炮弹。</p><h3 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入一行包含三个整数 $n, L, R$，相邻的整数之间使用一个空格分隔。</p><h3 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行包含一个整数，表示小蓝操纵的人物最少需要移动的步数。</p><h3 id="样例输入-4"><a href="#样例输入-4" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>10 </span><span>2</span> <span>13</span></p><h3 id="样例输出-4"><a href="#样例输出-4" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">7<br></code></pre></td></tr></table></figure><h3 id="评测用例规模与约定-3"><a href="#评测用例规模与约定-3" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $40%$ 的评测用例，$n, L, R \leq 10^6$；</p><p>对于所有评测用例，$1 \leq n, L, R \leq 10^9$，$2 \leq L \leq R$。</p><h3 id="运行限制-6"><a href="#运行限制-6" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 38  |  总提交次数: 94  |  通过率: 40.4%</p><p>难度: 中等   标签: 2023, 国赛, 质因子分解</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-6"><a href="#解题思路-6" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs python">n, L, R = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">case 1: ans在n的右边 或者就是n</span><br><span class="hljs-string">case 2: n大于R ans在n-1到R+1之间</span><br><span class="hljs-string">case 3: ans在l-1这个位置</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment"># 找出当前数的所有质因数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pr_</span>(<span class="hljs-params">xx</span>):<br>    pr = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(xx ** <span class="hljs-number">0.5</span>) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">while</span> xx % i == <span class="hljs-number">0</span>:<br>            pr.append(i)<br>            xx //= i<br>    <span class="hljs-keyword">if</span> xx &gt; <span class="hljs-number">1</span>: pr.append(xx)<br>    <span class="hljs-keyword">return</span> pr<br><span class="hljs-comment"># 如果当前x是质数或者x除以x的质因子的值小于low 则当前位置是安全位置</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">judge</span>(<span class="hljs-params">x, low</span>):<br>    nums = pr_(x)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> x<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-comment"># 安全位置一定满足这一个条件 但是满足条件的不一定是安全位置</span><br>            <span class="hljs-comment"># 但我们可以保证最近的一个安全位置的前面一定不存在错误位置</span><br>            <span class="hljs-keyword">if</span> x // j &lt; low:<br>                <span class="hljs-keyword">return</span> x<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-comment"># case 1</span><br>res = <span class="hljs-built_in">max</span>(R + <span class="hljs-number">1</span>, n)<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    new_seat = judge(res, L)<br>    <span class="hljs-keyword">if</span> new_seat != -<span class="hljs-number">1</span>:<br>        ans = res - n<br>        <span class="hljs-keyword">break</span><br>    res += <span class="hljs-number">1</span><br><span class="hljs-comment"># case 2</span><br>res = n - <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> res &gt; R:<br>    new_seat = judge(res, L)<br>    <span class="hljs-keyword">if</span> new_seat != -<span class="hljs-number">1</span>:<br>        ans = <span class="hljs-built_in">min</span>(n - res, ans)<br>        <span class="hljs-keyword">break</span><br>    res -= <span class="hljs-number">1</span><br><span class="hljs-comment"># case 3 and 1, 2</span><br><span class="hljs-comment"># 如果n在L的特别左边是会返回负数的 所以要特判</span><br><span class="hljs-keyword">if</span> n &lt; L:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;0&#x27;</span>)<br><span class="hljs-keyword">elif</span> n == L:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1&#x27;</span>)<br><span class="hljs-keyword">else</span>:  <br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">min</span>(n - L + <span class="hljs-number">1</span>, ans))<br></code></pre></td></tr></table></figure><h2 id="走方格"><a href="#走方格" class="headerlink" title="走方格"></a><a href="https://www.lanqiao.cn/problems/17118/learning/">走方格</a></h2><h3 id="问题描述-7"><a href="#问题描述-7" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个 $N$ 行 $N$ 列的方格，第 $i$ 行第 $j$ 列的方格坐标为 $(i, j)$，高度为 $H_{i, j}$。小蓝从左上角坐标 $(0, 0)$ 出发，目的地是右下角坐标 $(N - 1, N - 1)$。</p><p>当小蓝位于第 $r$ 行第 $c$ 列时，他有如下的移动方式:</p><ol><li>若 $r + 1 &lt; N$，可以移动到 $(r + 1, c)$，花费 $1$ 秒;</li><li>若 $c + 1 &lt; N$，可以移动到 $(r, c + 1)$，花费 $1$ 秒;</li><li>对于任意整数 $L$，若 $H_{r,c} &gt; H_{r,c+1} &gt; \dots &gt; H_{r,c+L}$，可以移动到 $(r, c + L)$，花费 $1$ 秒;</li><li>对于任意整数 $L$，若 $H_{r,c} &gt; H_{r,c-1} &gt; \dots &gt; H_{r,c-L}$，可以移动到 $(r, c - L)$，花费 $1$ 秒。</li></ol><p>现在给出方格，请问小蓝从 $(0, 0)$ 移动到 $(N - 1, N - 1)$ 最少需要多少秒?</p><h3 id="输入格式-4"><a href="#输入格式-4" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含一个整数 $N$ 表示方格大小。</p><p>接下来 $N$ 行，每行包含 $N$ 个整数，表示每个方格上的数字。</p><h3 id="输出格式-4"><a href="#输出格式-4" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数表示答案。</p><h3 id="样例输入-5"><a href="#样例输入-5" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>4</span><br><span>0 </span><span>1</span> <span>9</span> <span>3</span><br><span>2 </span><span>9</span> <span>3</span> <span>7</span><br><span>8 </span><span>4</span> <span>8</span> <span>9</span><br><span>9 </span><span>8</span> <span>0</span> <span>7</span></p><h3 id="样例输出-5"><a href="#样例输出-5" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><h3 id="样例说明-1"><a href="#样例说明-1" class="headerlink" title="样例说明"></a>样例说明</h3><p>移动顺序为: $(0,0) \rightarrow (1,0) \rightarrow (2,0) \rightarrow (3,0) \rightarrow (3,2) \rightarrow (3,3)$，其中坐标 $(3,0)$、$(3,1)$、$(3,2)$ 处的数字分别为 $9 &gt; 8 &gt; 0$，所以可以花费 $1$ 秒从 $(3,0)$ 移动到 $(3, 2)$。</p><h3 id="评测用例规模与约定-4"><a href="#评测用例规模与约定-4" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $20%$ 的评测用例，$1 \leq N \leq 10$；</p><p>对于 $50%$ 的评测用例，$1 \leq N \leq 100$；</p><p>对于所有评测用例，$1 \leq N \leq 1000$，$0 \leq H_{i,j} \leq 100$。</p><h3 id="运行限制-7"><a href="#运行限制-7" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>3s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>PyPy3</td><td>5s</td><td>256M</td></tr><tr><td>Go</td><td>5s</td><td>256M</td></tr><tr><td>JavaScript</td><td>5s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-7"><a href="#解题思路-7" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> *<br><span class="hljs-comment"># 请在此输入您的代码</span><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) ]<br>f = [[inf <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  nums[i] = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment">#可以倒着走</span><br>f[n-<span class="hljs-number">1</span>][n] = -<span class="hljs-number">1</span><br>f[n][n-<span class="hljs-number">1</span>] = -<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-comment">#先更新自己</span><br>    f[i][j] = <span class="hljs-built_in">min</span>(f[i][j],f[i+<span class="hljs-number">1</span>][j]+<span class="hljs-number">1</span>,f[i][j+<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment">#然后更新捷径，要连续大于两个的才算捷径</span><br>    <span class="hljs-comment">#看横向有无捷径,跳过你左边的,i不变</span><br>    <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(j,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> l-<span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nums[i][l-<span class="hljs-number">1</span>] &gt; nums[i][l]:<br>        f[i][l-<span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(f[i][l-<span class="hljs-number">1</span>],f[i][j] +<span class="hljs-number">1</span>)<br>      <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-comment">#看纵向有无捷径，j不变</span><br>    <span class="hljs-comment"># for r in range(i,-1,-1):</span><br>    <span class="hljs-comment">#   if r-1 &gt;= 0 and nums[r-1][j] &gt; nums[r][j]:</span><br>    <span class="hljs-comment">#     f[r-1][j] = min(f[r-1][j],f[i][j] +1)</span><br>    <span class="hljs-comment">#   else:</span><br>    <span class="hljs-comment">#     break</span><br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>mp=[<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>inf=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>dp=[[<span class="hljs-number">0</span>]*n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-comment">#到x,y花费的最少步数</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    dp[i][<span class="hljs-number">0</span>]=i <span class="hljs-comment">#第i行第一个数为i</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>        dp[i][j]=inf<br>        <span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span>:<br>            dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j]+<span class="hljs-number">1</span>) <span class="hljs-comment">#从上往下走一格</span><br>            <br>        k=j<br>        <span class="hljs-keyword">while</span> mp[i][k]&lt;mp[i][k-<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> k&gt;=<span class="hljs-number">1</span>:<br>            dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k-<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>) <span class="hljs-comment">#从左往右走，且判断是否满足题目第三个条件</span><br>            k-=<span class="hljs-number">1</span><br>            <br>        dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][j-<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>) <span class="hljs-comment">#从左往右走一格</span><br><br><span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>])<br><br><span class="hljs-comment">#题目第四个条件会增加步数，不能减少，会多走一步</span><br></code></pre></td></tr></table></figure><h2 id="等腰三角形"><a href="#等腰三角形" class="headerlink" title="等腰三角形"></a><a href="https://www.lanqiao.cn/problems/17131/learning/">等腰三角形</a></h2><h3 id="问题描述-8"><a href="#问题描述-8" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定一个包含 $n$ 个数的序列 $A_i$ ，每次操作可以选择其中任意一个数将其 $+1$ 或 $-1$ 。</p><p>我们要让这个序列满足能够从中任选三个数，这三个数对应长度的三条边总能组成一个等腰三角形。问最少需要多少次操作才能让序列满足条件。</p><h3 id="输入描述-1"><a href="#输入描述-1" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $n$ 。</p><p>第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \cdots, A_n$ ，相邻两个整数之间使用一个空格分隔。</p><h3 id="输出描述-1"><a href="#输出描述-1" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行包含一个整数，表示最少的操作次数。</p><h3 id="样例输入-6"><a href="#样例输入-6" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5 3 3 5 7 7<br></code></pre></td></tr></table></figure><h3 id="样例输出-6"><a href="#样例输出-6" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3<br></code></pre></td></tr></table></figure><h3 id="样例说明-2"><a href="#样例说明-2" class="headerlink" title="样例说明"></a>样例说明</h3><p>将原序列修改为 $4,4,4,7,7$ 即可。</p><h3 id="评测用例规模-1"><a href="#评测用例规模-1" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $40%$ 的评测用例， $n \leq 5000$ ， $A_i \leq 5000$ ；</p><p>对于 $70%$ 的评测用例， $n \leq 2\times 10^5$ ， $A_i \leq 10^6$ ；</p><p>对于所有评测用例， $1 \leq n \leq 2\times 10^5$ ， $1 \leq A_i \leq 10^9$ 。w</p><h3 id="运行限制-8"><a href="#运行限制-8" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 7  |  总提交次数: 69  |  通过率: 10.1%</p><p>难度: 中等   标签: 2023, 国赛, 数学, 分类讨论</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h2 id="单词分类"><a href="#单词分类" class="headerlink" title="单词分类"></a><a href="https://www.lanqiao.cn/problems/17126/learning/">单词分类</a></h2><h3 id="问题描述-9"><a href="#问题描述-9" class="headerlink" title="问题描述"></a>问题描述</h3><p>在遥远的 $\text{LQ}$ 国，只存在三种字符：$\text{l、q }$和 $\text{b}$ (ASCII 码分别为 $108、113、98$)，所有的单词都由这三种字符组合而来。小蓝为了更加快速的记忆单词，决定将词典上所有的单词按照单词前缀将其分为 $K$ 类，具体的要求是:</p><ol><li>选出 $K$ 个不同的单词前缀作为 $K$ 类；</li><li>对于字典上的每个单词，只能属于 $K$ 类中的某一个类，不能同时属于多个类；</li><li>对于 $K$ 类中的每个类，至少包含有一个单词。</li></ol><p>现在已知字典上一共有 $N$ 个单词，小蓝想要知道将这 $N$ 个单词按照上述要求分为 $K$ 类，一共有多少种不同的方案。两个方案不同指的是两个方案各自选出的 $K$ 个单词前缀不完全相同。答案可能过大，所以你需要将答案对 $1000000007$ (即 $10^9 + 7$)取模后输出。</p><h3 id="输入格式-5"><a href="#输入格式-5" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行包含两个整数 $N$ 和 $K$；</p><p>接下来 $N$ 行，每行包含一个单词，由 $\text{l、q、b}$ 三种字符组成。</p><h3 id="输出格式-5"><a href="#输出格式-5" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数表示答案。答案可能很大，请输出答案对 $1000000007$ 取模的值。</p><h3 id="样例输入-7"><a href="#样例输入-7" class="headerlink" title="样例输入"></a>样例输入</h3><p><span>4</span> <span>2</span><br><span>lqb</span><br><span>lql</span><br><span>qqq</span><br><span>qql</span></p><h3 id="样例输出-7"><a href="#样例输出-7" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">4<br></code></pre></td></tr></table></figure><h3 id="样例说明-3"><a href="#样例说明-3" class="headerlink" title="样例说明"></a>样例说明</h3><p>方案 1：$\text{l&#x3D;lqb,lql、q&#x3D;qqq,qql}$; 方案 2：$\text{lq&#x3D;lqb,lql、q&#x3D;qqq,qql}$; 方案 3：$\text{l&#x3D;lqb,lql、qq&#x3D;qqq,qql}$; 方案 4：$\text{lq&#x3D;lqb,lql、qq&#x3D;qqq,qql}$。</p><p>以方案 1 为例，他表示选出的两类对应的前缀分别是 $\text{l}$ 和 $text{q}$，属于前缀 $\text{l}$ 的单词有 $\text{lqb、lql}$，属于前缀 $\text{q}$ 的单词有 $\text{qqq、qql}$，方案 1 将四个单词按照前缀分成了两类，且每类至少包含一个单词，每个单词仅属于一类，所以方案 1 满足题意。</p><h3 id="评测用例规模与约定-5"><a href="#评测用例规模与约定-5" class="headerlink" title="评测用例规模与约定"></a>评测用例规模与约定</h3><p>对于 $30%$ 的评测用例，$1 \leq N \leq 10$，$1 \leq K \leq 5$；</p><p>对于 $50%$ 的评测用例，$1 \leq N \leq 50$，$1 \leq K \leq 10$；</p><p>对于所有评测用例，$1 \leq N \leq 200$，$1 \leq K \leq 100$，$1 \leq$ 单词长度 $\leq 10$。</p><h3 id="运行限制-9"><a href="#运行限制-9" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 9  |  总提交次数: 28  |  通过率: 32.1%</p><p>难度: 中等   标签: 2023, 字典树, 国赛, 动态规划</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h1 id="第十四届Python大学B组"><a href="#第十四届Python大学B组" class="headerlink" title="第十四届Python大学B组"></a>第十四届Python大学B组</h1><h2 id="弹珠堆放"><a href="#弹珠堆放" class="headerlink" title="弹珠堆放"></a><a href="https://www.lanqiao.cn/problems/17142/learning/">弹珠堆放</a></h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/icon-menu-official.a857849-1716821316470-29.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/icon-menu-official.a857849-1716821316470-29.png"></p><p>题解</p><p>(89)</p><h3 id="问题描述-10"><a href="#问题描述-10" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝有 20230610 颗磁力弹珠，他对金字塔形状尤其感兴趣，如下图所示：</p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049339195.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049339195.png" alt="图片描述"></p><p>高度为 $1$ 的金字塔需要 $1$ 颗弹珠；</p><p>高度为 $2$ 的金字塔需要 $4$ 颗弹珠；</p><p>高度为 $3$ 的金字塔需要 $10$ 颗弹珠；</p><p>高度为 $4$ 的金字塔需要 $20$ 颗弹珠。</p><p>小蓝想要知道用他手里的弹珠可以摆出的最高的金字塔的高度是多少？</p><h3 id="答案提交-2"><a href="#答案提交-2" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-10"><a href="#运行限制-10" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 723  |  总提交次数: 767  |  通过率: 94.3%</p><p>难度: 中等   标签: 2023, 前缀和, 国赛</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-8"><a href="#解题思路-8" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n=<span class="hljs-number">20230610</span><br>dp=[<span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,<span class="hljs-number">500</span>):<br>    num=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,i+<span class="hljs-number">1</span>):<br>      num+=j<br>    dp.append(num+dp[i-<span class="hljs-number">2</span>])<br><br><span class="hljs-keyword">for</span> i,j <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(dp):<br>  <span class="hljs-keyword">if</span> n&gt;dp[i]:<br>    <span class="hljs-keyword">continue</span><br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(i)<br>    <span class="hljs-keyword">break</span><br> <span class="hljs-built_in">print</span>(<span class="hljs-number">494</span>)<br></code></pre></td></tr></table></figure><h2 id="划分"><a href="#划分" class="headerlink" title="划分"></a><a href="https://www.lanqiao.cn/problems/17143/learning/">划分</a></h2><h3 id="问题描述-11"><a href="#问题描述-11" class="headerlink" title="问题描述"></a>问题描述</h3><p>给定 $40$ 个数，请将其任意划分成两组，每组至少一个元素。每组的权值为组内所有元素的和。划分的权值为两组权值的乘积。请问对于以下 $40$ 个数，划分的权值最大为多少。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5160 9191 6410 4657 7492 1531 8854 1253 4520 9231 1266 4801 3484 4323 5070 1789 2744 5959 9426 4433 4404 5291 2470 8533 7608 2935 8922 5273 8364 8819 7374 8077 5336 8495 5602 6553 3548 5267 9150 3309<br></code></pre></td></tr></table></figure><p>在试题包中有一个名为 \verb|nums.txt| 的文本文件，文件中的数与题面上的数相同。</p><h3 id="答案提交-3"><a href="#答案提交-3" class="headerlink" title="答案提交"></a>答案提交</h3><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="运行限制-11"><a href="#运行限制-11" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 186  |  总提交次数: 248  |  通过率: 75%</p><p>难度: 中等   标签: 2023, 国赛, 动态规划, 背包问题</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-9"><a href="#解题思路-9" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#根据题意可知分成两个集合的权值差要最小</span><br><span class="hljs-comment">#可以看成背包问题，背包大小为所有元素和的一半，最后看背包装了多少</span><br>ss = <span class="hljs-string">&quot;&quot;&quot;5160 9191 6410 4657 7492 1531 8854 1253 4520 9231 1266 4801 3484 4323 5070 1789 2744 5959 9426 4433 4404 5291 2470 8533 7608 2935 8922 5273 8364 8819 7374 8077 5336 8495 5602 6553 3548 5267 9150 3309&quot;&quot;&quot;</span><br>nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, ss.split(<span class="hljs-string">&quot; &quot;</span>)))<br>bag = <span class="hljs-built_in">sum</span>(nums) // <span class="hljs-number">2</span><br>n = <span class="hljs-number">40</span><br>dp = [[<span class="hljs-number">0</span>] * (bag + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    cur = nums[i - <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, bag + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j - cur &gt;= <span class="hljs-number">0</span>:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j - cur] + cur, dp[i - <span class="hljs-number">1</span>][j])<br><br>a = <span class="hljs-built_in">max</span>(dp[<span class="hljs-number">40</span>])<br>b = <span class="hljs-built_in">sum</span>(nums) - a<br><span class="hljs-built_in">print</span>(a * b)<br></code></pre></td></tr></table></figure><h2 id="偶串"><a href="#偶串" class="headerlink" title="偶串"></a><a href="https://www.lanqiao.cn/problems/17144/learning/">偶串</a></h2><h3 id="问题描述-12"><a href="#问题描述-12" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝特别喜欢偶数，当他看到字符串时，他总数要检查一下是不是每种字符都是出现偶数次。给定一个字符串，请帮助小蓝检查一下该字符串是否满足要求。</p><h3 id="输入描述-2"><a href="#输入描述-2" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行包含一个字符串，由小写英文字母组成。</p><h3 id="输出描述-2"><a href="#输出描述-2" class="headerlink" title="输出描述"></a>输出描述</h3><p>如果字符串中的每种字符都是出现偶数次，输出大写英文单词 $\verb|YES|$ ，否则输出大写英文单词 $\verb|NO|$ 。</p><h3 id="样例输入-8"><a href="#样例输入-8" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">banana<br></code></pre></td></tr></table></figure><h3 id="样例输出-8"><a href="#样例输出-8" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">NO<br></code></pre></td></tr></table></figure><h3 id="样例输入-9"><a href="#样例输入-9" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">bbnana<br></code></pre></td></tr></table></figure><h3 id="样例输出-9"><a href="#样例输出-9" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">YES<br></code></pre></td></tr></table></figure><h3 id="评测用例规模-2"><a href="#评测用例规模-2" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $50%$ 的评测用例， $1\le$ 字符串长度 $\le 1000$；</p><p>对于所有评测用例，$1\le$ 字符串长度 $\le 10^6$ 。</p><h3 id="运行限制-12"><a href="#运行限制-12" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 386  |  总提交次数: 429  |  通过率: 90%</p><p>难度: 中等   标签: 2023, 国赛, 语法</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-10"><a href="#解题思路-10" class="headerlink" title="解题思路"></a>解题思路</h3><h4 id="常规思路"><a href="#常规思路" class="headerlink" title="常规思路"></a>常规思路</h4><p>直接模拟直接求</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br><br>s = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">input</span>())<br>d = Counter(s)<br>mark = <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> d.items():<br>    <span class="hljs-keyword">if</span> v % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>:<br>        mark = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span> <span class="hljs-keyword">if</span> mark == <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="使用异或"><a href="#使用异或" class="headerlink" title="使用异或"></a>使用异或</h4><p>根据异或的性质我们可以知道：任意两个相同的数异或的值为0，故偶数个相同的数异或的值也是0</p><p>所以最后我们走一遍循环，最后异或值只要为0那说明所有数字出现的次数为偶数次，反之则存在一个数字出现了奇数次</p><p>最后由于异或只能在数字之间，所以我们用字符的ascii码(ord)来代表这个字符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>():<br>    ans ^= <span class="hljs-built_in">ord</span>(i)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span> <span class="hljs-keyword">if</span> ans <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;YES&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="交易账本"><a href="#交易账本" class="headerlink" title="交易账本"></a><a href="https://www.lanqiao.cn/problems/17145/learning/">交易账本</a></h2><h3 id="问题描述-13"><a href="#问题描述-13" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝最近研发了一种新的记账方式，并邀请了一些用户参加测试。交易账本可以看作是交易记录的集合，每条交易记录都有着一个独一无二的交易编号 $txId$ （编号大小反映了交易记录产生的时间顺序， $txId$ 小的交易记录先发生于 $txId$ 大的交易记录），每条交易记录包含一个或多个输入信息以及一个或多个输出信息。</p><p>其中输入来自于已经发生过的某比交易的某个输出，可以理解为这笔钱从某比交易输出后继续输入到了当前这比交易中，输入信息主要包含以下数据：$fromTxId$、$fromTxOutNumber$ ，这表示当前输入来自于交易编号为 $fromTxId$ 的第 $fromTxOutNumber$ $(fromTxOutNumber&#x3D;0,1,2,\cdots )$ 个输出；输出信息主要包含以下数据：$account$、$val$ ，表示将 $val$ 数目的钱转移到了账户编号为 $account$ 的账户上。注意，当 $fromTxId$ 和 $fromTxOutNumber$ 都为 $-1$ 时，表明这是一笔特殊交易，由系统账户直接产生输出，特殊交易只含有一个输入和一个输出，可以认为系统账户拥有无限多数目的钱，特殊交易一定可以成功。</p><p>一个合法的账本应满足以下条件：1）对于每笔交易记录，所有的输入中涉及到的钱的总数目应和所有输出中钱的总数目相等；2）交易中的一个输出要么不使用，要使用的话输出中的钱应该全部分配给下一个输入，而不能分配给多个输入（特殊交易除外）；3）交易按照顺序进行，不可以在某比交易中引用还未发生的交易。</p><p>现在已知一共有 $N$ 个不同的账户，初始时所有账户钱数目都为 $0$ ，账本上总计有 $M$ 条交易记录（按照交易完成的顺序进行记录），请你来判断下账本上的记录是否是合法的。</p><h3 id="输入描述-3"><a href="#输入描述-3" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $T$ ，表示有 $T$ 组输入数据。</p><p>对于每组输入数据：</p><p>第一行包含两个整数 $N,M$ ，用一个空格分隔，分别表示账户的数目和账本的交易记录数目，其中账户编号为 $0,1,2,\cdots,N-1$ ，交易记录编号为 $0,1,2,\cdots ,M-1$ 。</p><p>接下来 $M$ 行，每行包含一条交易记录的信息，交易记录编号依次为 $0, 1, 2, \cdots, M-1$ 。第一个整数 $inCount$ 表示输入的个数，接下来包含 $inCount$ 个输入信息，每个输入信息包含 $fromTxId$ 和 $fromTxOutNumber$ 两个整数；接下来包含一个整数 $outCount$ 表示输出的个数，然后接着包含 $outCount$ 个输出信息，每个输出信息包含 $account$ 和 $val$ 两个整数。</p><h3 id="输出描述-3"><a href="#输出描述-3" class="headerlink" title="输出描述"></a>输出描述</h3><p>对于每组输入数据输出一行，如果账本记录合法则输出英文单词 $\verb|YES|$ ，否则输出英文单词 $\verb|NO|$。</p><h3 id="样例输入-10"><a href="#样例输入-10" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs text">4<br>3 3<br>1 -1 -1 1 0 100<br>1 0 0 2 1 50 2 50<br>2 1 0 1 1 1 2 100<br>3 3<br>1 -1 -1 1 0 100<br>1 0 0 2 1 50 2 50<br>2 1 0 1 1 1 2 150<br>3 3<br>1 -1 -1 1 0 100<br>1 0 0 2 1 50 2 50<br>3 0 0 1 0 1 1 1 2 200<br>3 3<br>1 -1 -1 1 0 100<br>2 0 0 2 0 2 1 100 2 100<br>1 -1 -1 1 2 100<br></code></pre></td></tr></table></figure><h3 id="样例输出-10"><a href="#样例输出-10" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">YES NO NO NO<br></code></pre></td></tr></table></figure><h3 id="样例说明-4"><a href="#样例说明-4" class="headerlink" title="样例说明"></a>样例说明</h3><p>对于第一个数据：第一条交易 $(txId&#x3D;0)$ 为特殊交易，给账户 $0$ 转入了 $100$；第二条交易 $(txId&#x3D;1)$ 将上一条交易的唯一一个输出作为当前交易的输入，有两个输出，分别给账户 $1$ 和 $2$ 转入了 $50$ ；最后一条交易 $(txId&#x3D;2)$ 将上一条交易的两个输出作为当前交易的输入，给账户 $2$ 转入了 $100$ 。</p><p>对于第二个数据，第三条交易中输入与输出总额不相等。</p><p>对于第三个数据，第一条交易中的输出被使用了超过一次。</p><p>对于第四个数据，第二条交易中引用了还未发生的交易的输出。</p><h3 id="评测用例规模-3"><a href="#评测用例规模-3" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于所有评测用例， $1\le T\le 10$ ， $1\le N\le 100$ ， $1\le M\le 1000$ ， $1\le inCount, outCount\le 100$ ， $1\le$ 交易中涉及到钱的数目$\le 10000$ ， $0\le account\le N-1$ ， $0\le fromTxId\le M-1$ 。</p><h3 id="运行限制-13"><a href="#运行限制-13" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-11"><a href="#解题思路-11" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> os<br>read=sys.stdin.readline<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">judge</span>():<br>    n,m=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment">#    print(f&#x27;n=&#123;n&#125;,&#123;m&#125;&#x27;)</span><br>    vis=[[<span class="hljs-number">0</span>]*m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)]<br>    flag=<span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        record=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,read().split()))<br>        money=<span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>*record[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>,<span class="hljs-number">2</span>):<br>            <span class="hljs-keyword">if</span> record[i]==-<span class="hljs-number">1</span>:<br>                money=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">if</span> vis[record[i]][record[i+<span class="hljs-number">1</span>]]==<span class="hljs-number">0</span>:<br>                    flag=<span class="hljs-literal">False</span><br>                <span class="hljs-keyword">else</span>:<br>                    money+=vis[record[i]][record[i+<span class="hljs-number">1</span>]]<br>                    vis[record[i]][record[i+<span class="hljs-number">1</span>]]=<span class="hljs-number">0</span><br>        out=<span class="hljs-number">2</span>*record[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(out+<span class="hljs-number">2</span>,<span class="hljs-built_in">len</span>(record),<span class="hljs-number">2</span>):<br>            j=(i-out)//<span class="hljs-number">2</span>-<span class="hljs-number">1</span><br><span class="hljs-comment">#            print(f&#x27;out=&#123;out&#125;,i=&#123;i&#125;,j=&#123;j&#125;&#x27;)</span><br>            vis[idx][j]=record[i]<br>            <span class="hljs-keyword">if</span> money!=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>):<br>                money-=record[i]<br>        <span class="hljs-keyword">if</span> money!=<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>) <span class="hljs-keyword">and</span> money!=<span class="hljs-number">0</span>:<br>            flag=<span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;YES&#x27;</span> <span class="hljs-keyword">if</span> flag==<span class="hljs-literal">True</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;NO&#x27;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    t=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t):<br>        <span class="hljs-built_in">print</span>(judge())<br>    <span class="hljs-keyword">return</span><br><br>main()<br></code></pre></td></tr></table></figure><h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a><a href="https://www.lanqiao.cn/problems/17146/learning/">背包问题</a></h2><h3 id="问题描述-14"><a href="#问题描述-14" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝是一位狂热的积木爱好者，家里堆满了自己用积木组装的建筑模型。最近，有两款新出的积木组件上市，小蓝自然不会错过，他带上了自己的三个背包来到了积木商城，打算将尽可能多的积木组件带回家，每个背包都有一个固定的空间大小。小蓝只会购买这两种新出的积木组件 $A$ 和 $B$ ， $A$ 和 $B$ 各自会占用背包的一部分空间，但对于同一种类型的积木占用的空间是相同的。小蓝想知道自己最多能带走多少数量的积木组件。</p><p>可以认为小蓝有足够的货币，只要背包可以装下的积木他都有能力购买。商场内的积木数量也是有限制的。</p><h3 id="输入描述-4"><a href="#输入描述-4" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $T$ ，表示有 $T$ 组独立的询问。</p><p>每一组询问由三行组成。</p><p>每组询问的第一行包含三个整数 $B_1, B_2, B_3$ ，相邻的整数之间使用一个空格分隔，表示三个背包的空间大小。</p><p>每组询问的第二行包含两个整数 $cnt_A, cnt_B$ ，用一个空格分隔，分别表示商场内积木组件 $A$ 和 $B$ 的总量。</p><p>每组询问的第三行包含两个整数 $V_A, V_B$ ，用一个空格分隔，分别表示每个积木组件 $A$ 和 $B$ 所占用的空间大小。</p><h3 id="输出描述-4"><a href="#输出描述-4" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出 $T$ 行，每行包含一个整数表示答案。</p><h3 id="样例输入-11"><a href="#样例输入-11" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 2 2 3 1 2 1 2 3 8 3 3 4 4 2 6 8 7 10 10 5 1<br></code></pre></td></tr></table></figure><h3 id="样例输出-11"><a href="#样例输出-11" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 5 12<br></code></pre></td></tr></table></figure><h3 id="样例说明-5"><a href="#样例说明-5" class="headerlink" title="样例说明"></a>样例说明</h3><p>对于第一组询问，第一个背包装一个 B 积木，无剩余空间；第二个背包装一个 B 积木，无剩余空间；第三个背包装一个 A 积木，剩余 2 空间，但积木已经没有了；最终答案是 $3$ ，可以带走所有的积木。</p><p>对于第二组询问，第一个背包和第三个背包各自装一个 B 组件，第二个背包装两个 B 组件和一个 A 组件，答案是 $5$ 。</p><p>对于第三组询问，第一个背包：1A+1B；第二个背包：8B；第三个背包：1A+1B。答案是 $12$ 。</p><h3 id="评测用例规模-4"><a href="#评测用例规模-4" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $30%$ 的评测用例， $1\le cnt_A,cnt_B\le 100$ ；</p><p>对于所有评测用例， $1\le T\le 100$ ， $1\le B_1,B_2,B_3\le 10^9$ ， $1\le V_A,V_B\le 10^9$ ， $1\le cnt_A,cnt_B\le 1,000$ 。</p><h3 id="运行限制-14"><a href="#运行限制-14" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><h3 id="解题思路-12"><a href="#解题思路-12" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">solve</span>():<br>    a = LII()  <span class="hljs-comment"># 3个背包</span><br>    A, B = MII()  <span class="hljs-comment"># 1e3</span><br>    va, vb = MII()<br>    <span class="hljs-keyword">if</span> va &gt; vb:<br>        va, vb = vb, va<br>        A, B = B, A<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(A, a[<span class="hljs-number">0</span>] // va) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(A - i, a[<span class="hljs-number">1</span>] // va) + <span class="hljs-number">1</span>):<br>            cnta, cntb = A, B<br>            mx1 = <span class="hljs-built_in">min</span>((a[<span class="hljs-number">0</span>] - i * va) // vb, cntb)  <span class="hljs-comment"># 更新B的剩余数量</span><br>            cntb -= mx1<br>            mx2 = <span class="hljs-built_in">min</span>((a[<span class="hljs-number">1</span>] - j * va) // vb, cntb)<br>            cntb -= mx2<br>            t = i + j + mx1 + mx2   <span class="hljs-comment"># B1和B2的数量和</span><br>            leftA = cnta - i - j<br>            mi = <span class="hljs-built_in">min</span>(leftA, a[<span class="hljs-number">2</span>] // va)  <span class="hljs-comment"># B3最多能装多少个A</span><br>            left_v = a[<span class="hljs-number">2</span>] - mi * va<br>            t += mi + <span class="hljs-built_in">min</span>(left_v // vb, cntb)  <span class="hljs-comment"># 剩下的装B</span><br>            res = <span class="hljs-built_in">max</span>(res, t)<br>    <span class="hljs-built_in">print</span>(res)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># 1多组数据，0单组数据</span><br>    t = <span class="hljs-number">1</span> <br>    <span class="hljs-keyword">if</span> t:<br>        t = II()<br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t):<br>            solve()<br>    <span class="hljs-keyword">else</span>:<br>        solve()<br></code></pre></td></tr></table></figure><h2 id="翻转"><a href="#翻转" class="headerlink" title="翻转"></a><a href="https://www.lanqiao.cn/problems/18427/learning/">翻转</a></h2><h3 id="问题描述-15"><a href="#问题描述-15" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝制作了 $n$ 个工件，每个工件用一个由小写英文字母组成的，长度为 $2$ 的字符串表示，第 $i$ 个工件表示为 $s_i$ 。小蓝想把 $n$ 个工件拼接到一起，方便转移到另一个地方完成下一道工序，而拼接后的工件用字符串 $S&#x3D;s_1+s_2+…+s_n$ 表示，其中 $+$ 表示一种奇特的拼接方式：对于 $c&#x3D;a+b$ 来说，如果 $a$ 的第二个字符和 $b$ 的第一个字符相同，则拼接后的结果 $c$ 长度为 $3$ 而不是 $4$ ，中间相同的字符可以省略一个，比如 $xy+yz&#x3D;xyz$ 而 $xy+zy&#x3D;xyzy$ 。小蓝为了让拼接后的字符串 $S$ 的长度尽量小，可以将若干个工件进行左右翻转之后再进行拼接，请问拼接后的字符串 $S$ 的最小长度是多少？</p><p>请注意所有工件必须按出现顺序依次拼接，可以翻转任意工件。</p><h3 id="输入描述-5"><a href="#输入描述-5" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个正整数 $n$ 。</p><p>接下来 $n$ 行，每行包含一个长度为 $2$ 字符串，依次表示 $s_1, s_2, \cdots, s_n$ 。</p><h3 id="输出描述-5"><a href="#输出描述-5" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行，包含一个整数表示答案。</p><h3 id="样例输入-12"><a href="#样例输入-12" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3 ab cb zz<br></code></pre></td></tr></table></figure><h3 id="样例输出-12"><a href="#样例输出-12" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5<br></code></pre></td></tr></table></figure><h3 id="样例说明-6"><a href="#样例说明-6" class="headerlink" title="样例说明"></a>样例说明</h3><p>将 $s_2$ 翻转后，拼接结果为 $abczz$ ，长度为 $5$ 。</p><h3 id="评测用例规模-5"><a href="#评测用例规模-5" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $20%$ 的评测用例， $n\le20$；</p><p>对于所有评测用例，$1\le n \le 10^5$ 。</p><h3 id="运行限制-15"><a href="#运行限制-15" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>2s</td><td>256M</td></tr><tr><td>Python3</td><td>3s</td><td>256M</td></tr><tr><td>PyPy3</td><td>3s</td><td>256M</td></tr><tr><td>Go</td><td>3s</td><td>256M</td></tr><tr><td>JavaScript</td><td>3s</td><td>256M</td></tr></tbody></table><p>总通过次数: 204  |  总提交次数: 253  |  通过率: 80.6%</p><p>难度: 中等   标签: 2023, 国赛, 动态规划</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-13"><a href="#解题思路-13" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>s = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>dp1 = [<span class="hljs-number">2</span>] * n <span class="hljs-comment"># dp1[i] 第i个字符串不翻转的最小长度</span><br>dp2 = [<span class="hljs-number">2</span>] * n <span class="hljs-comment"># dp2[i] 第i个字符串翻转的最小长度</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n): <span class="hljs-comment"># 枚举每一个字符串</span><br>    <span class="hljs-comment"># 1.dp1[i]从dp1[i-1]或dp2[i-1]转移</span><br>    k1 = dp1[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] == s[i][<span class="hljs-number">0</span>])<br>    k2 = dp2[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] == s[i][<span class="hljs-number">0</span>])<br>    dp1[i] = <span class="hljs-built_in">min</span>(k1, k2)<br>    <span class="hljs-comment"># 2.dp1[i]从dp1[i-1]或dp2[i-1]转移</span><br>    k3 = dp1[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] == s[i][<span class="hljs-number">1</span>])<br>    k4 = dp2[i-<span class="hljs-number">1</span>] + <span class="hljs-number">2</span> - (s[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] == s[i][<span class="hljs-number">1</span>])<br>    dp2[i] = <span class="hljs-built_in">min</span>(k3, k4)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">min</span>(dp1[n-<span class="hljs-number">1</span>], dp2[n-<span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><h2 id="最大阶梯"><a href="#最大阶梯" class="headerlink" title="最大阶梯"></a><a href="https://www.lanqiao.cn/problems/17147/learning/">最大阶梯</a></h2><h3 id="问题描述-16"><a href="#问题描述-16" class="headerlink" title="问题描述"></a>问题描述</h3><p>小蓝特别喜爱阶梯图案，阶梯图案可以看做是由若干个大小和颜色都相同的方格组成的，对于大小为 $N$ 的阶梯图案，包含了 $N$ 个连续的列，其中第 $i$ 列恰好有 $i$（$1\le i\le N$）个方格，将这 $N$ 列的底部对齐后便组成了一个阶梯图案，将其按照 $90$ 度旋转若干次后仍是阶梯图案，下图展示了几个不同大小的阶梯图案：</p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049869582.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049869582.png" alt="图片描述"></p><p>小蓝有一块大小为 $H\times H$ 的布匹，由 $H\times H$ 个大小相同的方格区域组成，每一个方格都有自己的颜色。小蓝可以沿着方格的边缘对布匹进行裁剪，他想要知道自己能得到的最大的同色阶梯图案的大小是多少？</p><h3 id="输入描述-6"><a href="#输入描述-6" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 $H$ 表示布匹大小。</p><p>接下来输入 $H$ 行，每行包含 $H$ 个整数，相邻的整数之间使用一个空格分隔，表示每个方格的颜色。</p><h3 id="输出描述-6"><a href="#输出描述-6" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行包含一个整数表示答案。</p><h3 id="样例输入-13"><a href="#样例输入-13" class="headerlink" title="样例输入"></a>样例输入</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">5 0 2 1 1 0 0 0 2 2 0 0 0 1 1 1 0 0 1 1 1 2 1 1 0 2<br></code></pre></td></tr></table></figure><h3 id="样例输出-13"><a href="#样例输出-13" class="headerlink" title="样例输出"></a>样例输出</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">3<br></code></pre></td></tr></table></figure><h3 id="样例说明-7"><a href="#样例说明-7" class="headerlink" title="样例说明"></a>样例说明</h3><p>如下图所示，最大的同色阶梯图案用红色边框标出。</p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049888211.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%9B%BD%E8%B5%9B%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90/uid1882407-20231023-1698049888211.png" alt="图片描述"></p><h3 id="评测用例规模-6"><a href="#评测用例规模-6" class="headerlink" title="评测用例规模"></a>评测用例规模</h3><p>对于 $30%$ 的评测用例， $1\le H\le 10$；</p><p>对于 $60%$ 的评测用例， $1\le H\le 100$；</p><p>对于所有评测用例， $1\le H\le 1000$ ， $0\le$ 方格颜色$\le 10$ 。</p><h3 id="运行限制-16"><a href="#运行限制-16" class="headerlink" title="运行限制"></a>运行限制</h3><table><thead><tr><th>语言</th><th>最大运行时间</th><th>最大运行内存</th></tr></thead><tbody><tr><td>C++</td><td>1s</td><td>256M</td></tr><tr><td>C</td><td>1s</td><td>256M</td></tr><tr><td>Java</td><td>5s</td><td>256M</td></tr><tr><td>Python3</td><td>5s</td><td>256M</td></tr><tr><td>PyPy3</td><td>5s</td><td>256M</td></tr><tr><td>Go</td><td>5s</td><td>256M</td></tr><tr><td>JavaScript</td><td>5s</td><td>256M</td></tr></tbody></table><p>总通过次数: 96  |  总提交次数: 158  |  通过率: 60.8%</p><p>难度: 中等   标签: 2023, 国赛, 动态规划</p><p>版权声明</p><p>部分题目由用户贡献，若您是著作权持有人，请与我们联系。</p><h3 id="解题思路-14"><a href="#解题思路-14" class="headerlink" title="解题思路"></a>解题思路</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><br><span class="hljs-comment"># 既然是动态规划，就要找转移来源，发现 dp[i][j] = min(dp[i-1][j], dp[i][j-1]) + 1</span><br><span class="hljs-comment"># 图形可以旋转 90 度，对应的图形就有 4 种</span><br><span class="hljs-comment"># 有两种解决思路: 1. 将原始图形进行旋转，用 同一个 方法 解决</span><br><span class="hljs-comment">#                2. 原始图不动，写 四 种寻找方法 解决</span><br><span class="hljs-comment"># 时间复杂度都是 O(n ^ 2)</span><br><br><br>h = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>matrix = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br>matrix_fan = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br>matrix_col = [[<span class="hljs-number">0</span>] * h <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br>matrix_col_fan = [[<span class="hljs-number">0</span>] * h <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h):<br>  l = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>  matrix[i].extend(l)<br>  matrix_fan[h-i-<span class="hljs-number">1</span>].extend(l[::-<span class="hljs-number">1</span>])<br>  <span class="hljs-keyword">for</span> j, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(l):<br>    matrix_col[h-j-<span class="hljs-number">1</span>][i] = v<br>    matrix_col_fan[j][h-i-<span class="hljs-number">1</span>] = v<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">l: <span class="hljs-built_in">list</span></span>):<br>  ans = <span class="hljs-number">1</span><br>  dp = [[<span class="hljs-number">1</span>] * h <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h)]<br><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, h):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, h):<br>      <span class="hljs-keyword">if</span> l[i][j] == l[i-<span class="hljs-number">1</span>][j] == l[i][j-<span class="hljs-number">1</span>]:<br>        dp[i][j] = <span class="hljs-built_in">min</span>(dp[i-<span class="hljs-number">1</span>][j], dp[i][j-<span class="hljs-number">1</span>]) + <span class="hljs-number">1</span><br>        ans = <span class="hljs-built_in">max</span>(ans, dp[i][j])<br>  <br>  <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(check(matrix), check(matrix_fan), check(matrix_col), check(matrix_col_fan)))<br></code></pre></td></tr></table></figure><h2 id="最长回文前后缀"><a href="#最长回文前后缀" class="headerlink" title="最长回文前后缀"></a><a href="https://www.lanqiao.cn/problems/17148/learning/">最长回文前后缀</a></h2><h2 id="贸易航线"><a href="#贸易航线" class="headerlink" title=" 贸易航线"></a><a href="https://www.lanqiao.cn/problems/17149/learning/"> 贸易航线</a></h2><h2 id="困局"><a href="#困局" class="headerlink" title="困局"></a><a href="https://www.lanqiao.cn/problems/17150/learning/">困局</a></h2><h1 id="第十四届Python大学A组"><a href="#第十四届Python大学A组" class="headerlink" title="第十四届Python大学A组"></a>第十四届Python大学A组</h1><h2 id="跑步计划-1"><a href="#跑步计划-1" class="headerlink" title="跑步计划"></a><a href="https://www.lanqiao.cn/problems/17113/learning/">跑步计划</a></h2><h2 id="残缺的数字"><a href="#残缺的数字" class="headerlink" title="残缺的数字"></a><a href="https://www.lanqiao.cn/problems/17114/learning/">残缺的数字</a></h2><h2 id="整数变换-1"><a href="#整数变换-1" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning/">整数变换</a></h2><h2 id="2023-1"><a href="#2023-1" class="headerlink" title="2023"></a><a href="https://www.lanqiao.cn/problems/17116/learning/">2023</a></h2><h2 id="火车运输"><a href="#火车运输" class="headerlink" title="火车运输"></a><a href="https://www.lanqiao.cn/problems/17117/learning/">火车运输</a></h2><h2 id="走方格-1"><a href="#走方格-1" class="headerlink" title="走方格"></a><a href="https://www.lanqiao.cn/problems/17118/learning/">走方格</a></h2><h2 id="等腰三角形-1"><a href="#等腰三角形-1" class="headerlink" title="等腰三角形"></a><a href="https://www.lanqiao.cn/problems/17131/learning/">等腰三角形</a></h2><h2 id="彩色二叉树"><a href="#彩色二叉树" class="headerlink" title="彩色二叉树"></a><a href="https://www.lanqiao.cn/problems/17124/learning/">彩色二叉树</a></h2><h2 id="选段排序"><a href="#选段排序" class="headerlink" title="选段排序"></a><a href="https://www.lanqiao.cn/problems/17120/learning/">选段排序</a></h2><h2 id="最长同类子串"><a href="#最长同类子串" class="headerlink" title="最长同类子串"></a><a href="https://www.lanqiao.cn/problems/17141/learning/">最长同类子串</a></h2><h1 id="第十四届Java大学C组"><a href="#第十四届Java大学C组" class="headerlink" title="第十四届Java大学C组"></a>第十四届Java大学C组</h1><h2 id="跑步计划-2"><a href="#跑步计划-2" class="headerlink" title="跑步计划"></a><a href="https://www.lanqiao.cn/problems/17113/learning/">跑步计划</a></h2><h2 id="混乘数字-1"><a href="#混乘数字-1" class="headerlink" title="混乘数字"></a><a href="https://www.lanqiao.cn/problems/17121/learning/">混乘数字</a></h2><h2 id="整数变换-2"><a href="#整数变换-2" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning/">整数变换</a></h2><h2 id="定时任务-1"><a href="#定时任务-1" class="headerlink" title="定时任务"></a><a href="https://www.lanqiao.cn/problems/17115/learning/">定时任务</a></h2><h2 id="2023-2"><a href="#2023-2" class="headerlink" title="2023"></a><a href="https://www.lanqiao.cn/problems/17116/learning/">2023</a></h2><h2 id="最大算式-1"><a href="#最大算式-1" class="headerlink" title="最大算式"></a><a href="https://www.lanqiao.cn/problems/17130/learning/">最大算式</a></h2><h2 id="火车运输-1"><a href="#火车运输-1" class="headerlink" title="火车运输"></a><a href="https://www.lanqiao.cn/problems/17117/learning/">火车运输</a></h2><h2 id="走方格-2"><a href="#走方格-2" class="headerlink" title="走方格"></a><a href="https://www.lanqiao.cn/problems/17118/learning/">走方格</a></h2><h2 id="彩色二叉树-1"><a href="#彩色二叉树-1" class="headerlink" title="彩色二叉树"></a><a href="https://www.lanqiao.cn/problems/17124/learning/">彩色二叉树</a></h2><h2 id="单词分类-1"><a href="#单词分类-1" class="headerlink" title="单词分类"></a><a href="https://www.lanqiao.cn/problems/17126/learning/">单词分类</a></h2><h1 id="第十四届Java大学B组"><a href="#第十四届Java大学B组" class="headerlink" title="第十四届Java大学B组"></a>第十四届Java大学B组</h1><h2 id="互质"><a href="#互质" class="headerlink" title="互质"></a><a href="https://www.lanqiao.cn/problems/17132/learning/">互质</a></h2><h2 id="逆元"><a href="#逆元" class="headerlink" title="逆元"></a><a href="https://www.lanqiao.cn/problems/17133/learning/">逆元</a></h2><h2 id="玩具"><a href="#玩具" class="headerlink" title="玩具"></a><a href="https://www.lanqiao.cn/problems/17134/learning/">玩具</a></h2><h2 id="不完整的算式"><a href="#不完整的算式" class="headerlink" title="不完整的算式"></a><a href="https://www.lanqiao.cn/problems/17135/learning/">不完整的算式</a></h2><h2 id="星球"><a href="#星球" class="headerlink" title="星球"></a><a href="https://www.lanqiao.cn/problems/17136/learning/">星球</a></h2><h2 id="序列"><a href="#序列" class="headerlink" title="序列"></a><a href="https://www.lanqiao.cn/problems/17137/learning/">序列</a></h2><h2 id="电动车"><a href="#电动车" class="headerlink" title="电动车"></a><a href="https://www.lanqiao.cn/problems/17138/learning/">电动车</a></h2><h2 id="游戏"><a href="#游戏" class="headerlink" title="游戏"></a><a href="https://www.lanqiao.cn/problems/6251/learning/">游戏</a></h2><h2 id="非对称二叉树"><a href="#非对称二叉树" class="headerlink" title="非对称二叉树"></a><a href="https://www.lanqiao.cn/problems/17139/learning/">非对称二叉树</a></h2><h2 id="数和游戏"><a href="#数和游戏" class="headerlink" title="数和游戏"></a><a href="https://www.lanqiao.cn/problems/17140/learning/">数和游戏</a></h2><h1 id="第十四届Java大学A组"><a href="#第十四届Java大学A组" class="headerlink" title="第十四届Java大学A组"></a>第十四届Java大学A组</h1><h2 id="X质数"><a href="#X质数" class="headerlink" title="X质数"></a><a href="https://www.lanqiao.cn/problems/17128/learning/">X质数</a></h2><h2 id="残缺的数字-1"><a href="#残缺的数字-1" class="headerlink" title="残缺的数字"></a><a href="https://www.lanqiao.cn/problems/17114/learning/">残缺的数字</a></h2><h2 id="整数变换-3"><a href="#整数变换-3" class="headerlink" title="整数变换"></a><a href="https://www.lanqiao.cn/problems/17151/learning/">整数变换</a></h2><h2 id="最大算式-2"><a href="#最大算式-2" class="headerlink" title="最大算式"></a><a href="https://www.lanqiao.cn/problems/17130/learning/">最大算式</a></h2><h2 id="躲炮弹-1"><a href="#躲炮弹-1" class="headerlink" title="躲炮弹"></a><a href="https://www.lanqiao.cn/problems/17123/learning/">躲炮弹</a></h2><h2 id="等腰三角形-2"><a href="#等腰三角形-2" class="headerlink" title="等腰三角形"></a><a href="https://www.lanqiao.cn/problems/17131/learning/">等腰三角形</a></h2><h2 id="连续数组"><a href="#连续数组" class="headerlink" title="连续数组"></a><a href="https://www.lanqiao.cn/problems/17125/learning/">连续数组</a></h2><h2 id="质数排序"><a href="#质数排序" class="headerlink" title="质数排序"></a><a href="https://www.lanqiao.cn/problems/17119/learning/">质数排序</a></h2><h2 id="单词分类-2"><a href="#单词分类-2" class="headerlink" title="单词分类"></a><a href="https://www.lanqiao.cn/problems/17126/learning/">单词分类</a></h2><h2 id="游戏的得分"><a href="#游戏的得分" class="headerlink" title="游戏的得分"></a><a href="https://www.lanqiao.cn/problems/17127/learning/">游戏的得分</a></h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第十四届Python大学C组&quot;&gt;&lt;a href=&quot;#第十四届Python大学C组&quot; class=&quot;headerlink&quot; title=&quot;第十四届Python大学C组&quot;&gt;&lt;/a&gt;第十四届Python大学C组&lt;/h1&gt;&lt;h2 id=&quot;跑步计划&quot;&gt;&lt;a href=&quot;#跑</summary>
      
    
    
    
    <category term="刷题" scheme="http://zdx-1.github.io/categories/%E5%88%B7%E9%A2%98/"/>
    
    <category term="蓝桥国赛" scheme="http://zdx-1.github.io/categories/%E5%88%B7%E9%A2%98/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B/"/>
    
    
    <category term="蓝桥杯" scheme="http://zdx-1.github.io/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
  </entry>
  
  <entry>
    <title>蓝桥国赛知识梳理</title>
    <link href="http://zdx-1.github.io/2024/05/24/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/"/>
    <id>http://zdx-1.github.io/2024/05/24/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/</id>
    <published>2024-05-24T03:25:08.000Z</published>
    <updated>2024-05-29T15:11:18.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="线性DP"><a href="#线性DP" class="headerlink" title="线性DP"></a>线性DP</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132127462.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132127462.png" alt="image-20240526132127462"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132140926.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132140926.png" alt="image-20240526132140926"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132149001.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132149001.png" alt="image-20240526132149001"></p><h4 id="动态规划分析步骤"><a href="#动态规划分析步骤" class="headerlink" title="动态规划分析步骤"></a>动态规划分析步骤</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132222766.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132222766.png" alt="image-20240526132222766"></p><h4 id="模板题——破损的楼梯"><a href="#模板题——破损的楼梯" class="headerlink" title="模板题——破损的楼梯"></a>模板题——<a href="https://www.lanqiao.cn/problems/3367/learning">破损的楼梯</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">3367 破损的楼梯</span><br><span class="hljs-string">https://www.lanqiao.cn/problems/3367/learning</span><br><span class="hljs-string"></span><br><span class="hljs-string">这是一个典型的线性DP问题，dp[i]表示到达第i阶楼梯的方法数</span><br><span class="hljs-string">状态转移方程：dp[i]=dp[i-1]+dp[i-2]</span><br><span class="hljs-string">状态压缩：dp[i]只与dp[i-1]和dp[i-2]有关，所以可以压缩</span><br><span class="hljs-string">时间复杂度：O(n)</span><br><span class="hljs-string">空间复杂度：O(n)</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>)<br>mod = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>)<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>vis = [<span class="hljs-number">0</span>] * N<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a: vis[i] = <span class="hljs-number">1</span><br>dp = [<span class="hljs-number">0</span>] * N<br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span> - vis[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> vis[i]:<br>        <span class="hljs-keyword">continue</span><br>    dp[i] = (dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]) % mod<br><span class="hljs-built_in">print</span>(dp[n])<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br>tp=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a:<br>  tp[i]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span><br>dp[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>-tp[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">if</span> tp[i]==<span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">continue</span><br>  dp[i]=dp[i-<span class="hljs-number">1</span>]+dp[i-<span class="hljs-number">2</span>]<br>mod=<span class="hljs-number">10</span>**<span class="hljs-number">9</span>+<span class="hljs-number">7</span><br><span class="hljs-built_in">print</span>(dp[i]%mod)<br></code></pre></td></tr></table></figure><h3 id="二维DP"><a href="#二维DP" class="headerlink" title="二维DP"></a>二维DP</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132351934.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132351934.png" alt="image-20240526132351934"></p><h4 id="分析步骤"><a href="#分析步骤" class="headerlink" title="分析步骤"></a>分析步骤</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132407561.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132407561.png" alt="image-20240526132407561"></p><h4 id="模板题——数字三角形"><a href="#模板题——数字三角形" class="headerlink" title="模板题——数字三角形"></a>模板题——<a href="https://www.lanqiao.cn/problems/1536/learning">数字三角形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>dp = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j == <span class="hljs-number">0</span>:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">elif</span> j == i:<br>            dp[i][j] += dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j] += <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>], dp[i - <span class="hljs-number">1</span>][j])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp[N - <span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132533080.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132533080.png" alt="image-20240526132533080"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132546231.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132546231.png" alt="image-20240526132546231"></p><h4 id="模板题——摆花"><a href="#模板题——摆花" class="headerlink" title="模板题——摆花"></a>模板题——<a href="https://www.lanqiao.cn/problems/389/learning">摆花</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">n种花凑 m盆 每种&lt;a[i]</span><br><span class="hljs-string">1.分解子问题</span><br><span class="hljs-string">前i种花，一共j盆，答案是dp[n][m]</span><br><span class="hljs-string">2.状态转移</span><br><span class="hljs-string">前i种花有j盆方案数  如何由前i-1种有j盆得出.</span><br><span class="hljs-string">以下每一种选择是一种方案</span><br><span class="hljs-string">第i种花可以选0盆,前i-1种花有j盆：dp[i][j] = dp[i-1][j]</span><br><span class="hljs-string">第i种花可以选1盆,前i-1种花有j-1盆：：dp[i][j] = dp[i-1][j-1]</span><br><span class="hljs-string">...</span><br><span class="hljs-string">第i种花可以选a[i]盆,前i-1种花有j-a[i]盆：：dp[i][j] = dp[i-1][j-a[i]]</span><br><span class="hljs-string">3.边界条件，每种花都不选</span><br><span class="hljs-string">前i种花 0盆 是 一种方案 dp[i][0] = 1</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>MOD = <span class="hljs-number">10</span> ** <span class="hljs-number">6</span> + <span class="hljs-number">7</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>):<br>    dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><span class="hljs-comment"># 状态转移,当下做出的选择，利用之前dp,求dp[i][j]</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">min</span>(a[i],j)+<span class="hljs-number">1</span>):<br>            dp[i][j]+=dp[i-<span class="hljs-number">1</span>][j-k]<br>            dp[i][j]%=MOD<br><span class="hljs-built_in">print</span>(dp[n][m])<br></code></pre></td></tr></table></figure><h4 id="模板题——选数异或"><a href="#模板题——选数异或" class="headerlink" title="模板题——选数异或"></a>模板题——<a href="https://www.lanqiao.cn/problems/3711/learning">选数异或</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py">n,x = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>Mod = <span class="hljs-number">998244353</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"> dp[i][j]前i个正整数有j个子序列异或成 j 的方案；答案dp[n][x]</span><br><span class="hljs-string"> dp[i][j] = 选第i个数字 + 不选第i个数字</span><br><span class="hljs-string">          = dp[i - 1][j ^ a[i]] + dp[i - 1][j]   </span><br><span class="hljs-string">          (因为如果选了第i个数字，那么a[i] ^ 前数 = j, 所以：前数 = j ^ a[i])</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>dp = [[<span class="hljs-number">0</span>] * (<span class="hljs-number">64</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-comment"># 初始化为 0</span><br>dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">64</span>):<br>        dp[i][j] = (dp[i-<span class="hljs-number">1</span>][j] + dp[i-<span class="hljs-number">1</span>][j ^ a[i]]) % Mod<br><span class="hljs-built_in">print</span>(dp[n][x])<br></code></pre></td></tr></table></figure><h3 id="LIS"><a href="#LIS" class="headerlink" title="LIS"></a>LIS</h3><h4 id="最长上升子序列"><a href="#最长上升子序列" class="headerlink" title="最长上升子序列"></a>最长上升子序列</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132915221.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132915221.png" alt="image-20240526132915221"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132923043.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132923043.png" alt="image-20240526132923043"></p><h4 id="模板题——蓝桥勇士"><a href="#模板题——蓝桥勇士" class="headerlink" title="模板题——蓝桥勇士"></a>模板题——<a href="https://www.lanqiao.cn/problems/2049/learning">蓝桥勇士</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=[<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>dp=[<span class="hljs-number">1</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> a[i]&lt;a[j]:<br>      dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[i]+<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h4 id="模板题——合唱队形"><a href="#模板题——合唱队形" class="headerlink" title="模板题——合唱队形"></a>模板题——<a href="https://www.lanqiao.cn/problems/742/learning">合唱队形</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>dp1 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp1[i]表示以i结尾的最长上升子序列长度</span><br>dp2 = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># dp2[i]表示以i出发的最长下降子序列长度</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    dp1[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, i):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp1[i] = <span class="hljs-built_in">max</span>(dp1[i], dp1[j] + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    dp2[i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[j]:<br>            dp2[i] = <span class="hljs-built_in">max</span>(dp2[i], dp2[j] + <span class="hljs-number">1</span>)<br><br>ans = <span class="hljs-built_in">max</span>((dp1[i] + dp2[i] - <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(n-ans)<br></code></pre></td></tr></table></figure><h3 id="LCS"><a href="#LCS" class="headerlink" title="LCS"></a>LCS</h3><h4 id="最长公共子序列"><a href="#最长公共子序列" class="headerlink" title="最长公共子序列"></a>最长公共子序列</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133212404.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133212404.png" alt="image-20240526133212404"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133222560.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133222560.png" alt="image-20240526133222560"></p><h4 id="模板题——最长公共子序列"><a href="#模板题——最长公共子序列" class="headerlink" title="模板题——最长公共子序列"></a>模板题——<a href="https://www.lanqiao.cn/problems/1189/learning">最长公共子序列</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 这段代码实现的是计算两个序列（a 和 b）的最长公共子序列（Longest Common Subsequence, LCS）的长度。LCS 是一种在计算两个序列相似度时常用的度量方法。这个问题通常通过动态规划来解决。现在，我将逐步解释这段代码的各个部分：</span><br><br><span class="hljs-comment"># 输入处理</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>b = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><span class="hljs-comment"># 首先，通过 input().split() 获取两个整数 n 和 m，分别表示序列 a 和 b 的长度。</span><br><span class="hljs-comment"># 接着，读取这两个序列，并在序列前面各自加上一个 0 作为哨兵值。这样做是为了让序列的索引从 1 开始，方便后续操作。</span><br><span class="hljs-comment"># 初始化动态规划数组</span><br>dp = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>)]  <span class="hljs-comment"># 注意这里是 m，不是 n</span><br>now = <span class="hljs-number">0</span>; old = <span class="hljs-number">1</span><br><span class="hljs-comment"># 初始化一个二维动态规划数组 dp，但这里只用到了两行（range(2)），目的是节省空间。因为在计算当前状态时，只需要用到前一行（即上一状态）的数据。m + 1 是因为考虑到从 0 开始到 m 的所有可能位置。</span><br><span class="hljs-comment"># now 和 old 变量用来在这两行之间切换，表示当前行和上一行。</span><br><span class="hljs-comment"># 动态规划过程</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    now, old = old, now<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j - <span class="hljs-number">1</span>], dp[old][j])<br>        <span class="hljs-keyword">if</span> a[i] == b[j]: <br>            dp[now][j] = <span class="hljs-built_in">max</span>(dp[now][j], dp[old][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>)<br><span class="hljs-comment"># 这部分是动态规划的核心。</span><br><span class="hljs-comment"># 外层循环遍历序列 a，内层循环遍历序列 b。</span><br><span class="hljs-comment"># dp[now][j] = max(dp[now][j - 1], dp[old][j])：当前状态是基于之前状态的最大值，这表示如果当前字符不匹配，LCS 长度不变。</span><br><span class="hljs-comment"># 如果当前位置的字符相等（a[i] == b[j]），则检查上一个状态的值并加一，即 dp[now][j] = max(dp[now][j], dp[old][j - 1] + 1)。这反映了找到了一个公共元素，因此当前的最长公共子序列长度增加了 1。</span><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-built_in">print</span>(dp[now][m])<br><span class="hljs-comment"># 最后，打印出最长公共子序列的长度，即在遍历完两个序列后，dp 数组最后一个元素（dp[now][m]）的值。</span><br><span class="hljs-comment"># 通过这种方式，代码高效地计算了两个序列的最长公共子序列的长度，同时通过只使用两行的动态规划数组大大减少了空间复杂度。</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133424736.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133424736.png" alt="image-20240526133424736"></p><h2 id="背包DP"><a href="#背包DP" class="headerlink" title="背包DP"></a>背包DP</h2><h3 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133609206.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133609206.png" alt="image-20240526133609206"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133623292.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133623292.png" alt="image-20240526133623292"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133631379.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133631379.png" alt="image-20240526133631379"></p><h4 id="模板题——小明的背包1"><a href="#模板题——小明的背包1" class="headerlink" title="模板题——小明的背包1"></a>模板题——<a href="https://www.lanqiao.cn/problems/1174/learning">小明的背包1</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j]    前i件物品，总体积不超过j 的最大价值</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> j&gt;=wi:<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i-<span class="hljs-number">1</span>][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br>            <br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化"><a href="#滚动数组优化" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133913024.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133913024.png" alt="image-20240526133913024"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133922038.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133922038.png" alt="image-20240526133922038"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133928502.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526133928502.png" alt="image-20240526133928502"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">n,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[<span class="hljs-number">0</span>]*(V+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  w,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,w-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-w]+v)<br><span class="hljs-built_in">print</span>(dp[V])<br></code></pre></td></tr></table></figure><h3 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134436937.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134436937.png" alt="image-20240526134436937"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134445527.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134445527.png" alt="image-20240526134445527"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134453737.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134453737.png" alt="image-20240526134453737"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134501798.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134501798.png" alt="image-20240526134501798"></p><h4 id="模板题——小明的背包2"><a href="#模板题——小明的背包2" class="headerlink" title="模板题——小明的背包2"></a>模板题——<a href="https://www.lanqiao.cn/problems/1175/learning">小明的背包2</a></h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134640485.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134640485.png" alt="image-20240526134640485"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># dp[i][j]=max(dp[i-1][j],dp[i][j-wi]+vi)  不取或在先前基础上取第i种（所以可以取多次）</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span>  i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> (j&gt;=wi):<br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j],dp[i][j-wi]+vi)<br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]<br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-1"><a href="#滚动数组优化-1" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N, V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>items = []<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    w, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    items.append((w, v))<br>dp = [<span class="hljs-number">0</span>] * (V + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, V + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> w, v <span class="hljs-keyword">in</span> items:<br>        <span class="hljs-keyword">if</span> i &gt;= w:<br>            dp[i] = <span class="hljs-built_in">max</span>(dp[i], dp[i - w] + v)<br><span class="hljs-built_in">print</span>(dp[V])<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">读取输入的商场物品数量N和小明的背包容量V，以及每种物品的体积和价值。</span><br><span class="hljs-string">初始化一个长度为V+1的动态规划数组dp，dp[i]表示背包容量为i时所能获得的最大价值。</span><br><span class="hljs-string">使用动态规划求解，外层循环遍历背包容量从1到V，内层循环遍历每种物品，更新dp[i]的值为dp[i-w]+v和当前dp[i]的较大值。</span><br><span class="hljs-string">输出dp[V]即为小明所能获得的最大价值。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134702358.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134702358.png" alt="image-20240526134702358"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134710379.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134710379.png" alt="image-20240526134710379"></p><h4 id="模板题——小明的背包3"><a href="#模板题——小明的背包3" class="headerlink" title="模板题——小明的背包3"></a>模板题——<a href="https://www.lanqiao.cn/problems/1176/learning">小明的背包3</a></h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134904431.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134904431.png" alt="image-20240526134904431"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134915203.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134915203.png" alt="image-20240526134915203"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134922223.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134922223.png" alt="image-20240526134922223"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134930677.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526134930677.png" alt="image-20240526134930677"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment">#dp[i][j] =max(dp[i][j],dp[i-1][j-k*wi]+k*vi)  k属于(0，si)</span><br><br>n,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(v+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    wi,vi,si=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,v+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">min</span>(si,j//wi)+<span class="hljs-number">1</span>):<br><br>            dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[i-<span class="hljs-number">1</span>][j-k*wi]+k*vi)<br><br><span class="hljs-built_in">print</span>(dp[n][v])<br></code></pre></td></tr></table></figure><h5 id="滚动数组优化-2"><a href="#滚动数组优化-2" class="headerlink" title="滚动数组优化"></a>滚动数组优化</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py">N,V=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>w,v,s=[[<span class="hljs-number">0</span>]*(N+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)]<br>dp=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  w[i],v[i],s[i]=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s[i]):<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(V,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> w[i]&lt;=k:<br>        dp[k]=<span class="hljs-built_in">max</span>(dp[k-w[i]]+v[i],dp[k])<br><span class="hljs-built_in">print</span>(dp[-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="二维费用背包-分组背包"><a href="#二维费用背包-分组背包" class="headerlink" title="二维费用背包&amp;分组背包"></a>二维费用背包&amp;分组背包</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526135531593.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526135531593.png" alt="image-20240526135531593"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526135538566.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526135538566.png" alt="image-20240526135538566"></p><h4 id="模板题——小蓝的神秘行囊"><a href="#模板题——小蓝的神秘行囊" class="headerlink" title="模板题——小蓝的神秘行囊"></a>模板题——<a href="https://www.lanqiao.cn/problems/3937/learning">小蓝的神秘行囊</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><br>n, v, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>dp = [[<span class="hljs-number">0</span>]*(v + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    volume, mass, value = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i &gt;= mass <span class="hljs-keyword">and</span> j &gt;= volume:<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i-mass][j-volume] + value)<br><span class="hljs-built_in">print</span>(dp[m][v])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py">n,v,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>dp=[[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    vi,mi,wi=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(v,vi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m,mi-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            dp[j][k] =<span class="hljs-built_in">max</span>(dp[j][k],dp[j-vi][k-mi]+wi)<br>           <br><span class="hljs-built_in">print</span>(dp[v][m])<br></code></pre></td></tr></table></figure><h2 id="树形DP"><a href="#树形DP" class="headerlink" title="树形DP"></a>树形DP</h2><h3 id="自上而下树形DP"><a href="#自上而下树形DP" class="headerlink" title="自上而下树形DP"></a>自上而下树形DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>val = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>edges = defaultdict(<span class="hljs-built_in">list</span>)<br>f = [[<span class="hljs-number">0</span>, val[i]] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">from_node, to_node</span>):<br>    edges[from_node].append(to_node)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, fa</span>):<br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> edges[u]:<br>        <span class="hljs-keyword">if</span> v == fa:<br>            <span class="hljs-keyword">continue</span><br>        dfs(v, u)<br>        f[u][<span class="hljs-number">0</span>] += <span class="hljs-built_in">max</span>(f[v][<span class="hljs-number">0</span>], f[v][<span class="hljs-number">1</span>])<br>        f[u][<span class="hljs-number">1</span>] += f[v][<span class="hljs-number">0</span>]<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    add_edge(u, v)<br>    add_edge(v, u)<br><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(f[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><h3 id="自下而上树形DP"><a href="#自下而上树形DP" class="headerlink" title="自下而上树形DP"></a>自下而上树形DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>N = <span class="hljs-number">100005</span><br>a = [<span class="hljs-number">0</span>]*N<br>dp = [[<span class="hljs-number">0</span>]*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>e = defaultdict(<span class="hljs-built_in">list</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        dfs(v)<br>        dp[u][<span class="hljs-number">1</span>] += dp[v][<span class="hljs-number">0</span>]<br>        dp[u][<span class="hljs-number">0</span>] += <span class="hljs-built_in">max</span>(dp[v])<br>    dp[u][<span class="hljs-number">1</span>] += a[u]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">global</span> N, a, dp, e<br>    n = <span class="hljs-built_in">int</span>(sys.stdin.readline())<br>    st = <span class="hljs-built_in">set</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        a[i] = <span class="hljs-built_in">int</span>(sys.stdin.readline())<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>        e[y].append(x)<br>        st.discard(x)<br>    rt = st.pop()<br>    dfs(rt)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp[rt]))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="路径相关树形DP"><a href="#路径相关树形DP" class="headerlink" title="路径相关树形DP"></a>路径相关树形DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs py">N = <span class="hljs-number">2005</span><br>e = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>w = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>dp = [<span class="hljs-number">0</span>]*N<br>n, m, k = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>dep = [<span class="hljs-number">0</span>]*N<br>f = [<span class="hljs-number">0</span>]*N<br>t = []<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">global</span> dp, e, w<br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        dfs(v)<br>        dp[u] += dp[v]<br>    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> w[u]:<br>        <span class="hljs-built_in">sum</span> = dp[u]<br>        <span class="hljs-keyword">for</span> nw <span class="hljs-keyword">in</span> t[<span class="hljs-string">&#x27;vec&#x27;</span>]:<br>            <span class="hljs-built_in">sum</span> -= dp[nw]<br>            <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[nw]:<br>                <span class="hljs-built_in">sum</span> += dp[v]<br>        dp[u] = <span class="hljs-built_in">max</span>(dp[u], <span class="hljs-built_in">sum</span> + t[<span class="hljs-string">&#x27;val&#x27;</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">global</span> n, m, f, e, dep, dp, w, t<br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>        f[i] = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>        e[f[i]].append(i)<br>        dep[i] = dep[f[i]] + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>        x, y, val = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        t.clear()<br>        <span class="hljs-keyword">while</span> x != y:<br>            <span class="hljs-keyword">if</span> dep[x] &gt; dep[y]:<br>                t.append(x)<br>                x = f[x]<br>            <span class="hljs-keyword">else</span>:<br>                t.append(y)<br>                y = f[y]<br>        t.append(x)<br>        w[x].append(&#123;<span class="hljs-string">&#x27;vec&#x27;</span>: <span class="hljs-built_in">list</span>(t), <span class="hljs-string">&#x27;val&#x27;</span>: val&#125;)<br>    dfs(<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(dp[<span class="hljs-number">1</span>])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h3 id="换根DP"><a href="#换根DP" class="headerlink" title="换根DP"></a>换根DP</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, dep, fa</span>):  <span class="hljs-comment"># 传入当前节点u,深度，父节点</span><br>    <span class="hljs-keyword">global</span> sum_depth<br>    sum_depth += dep  <span class="hljs-comment"># 加上当前节点u的深度</span><br>    <span class="hljs-comment"># 遍历u的所有子节点</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        <span class="hljs-keyword">if</span> v == fa:<br>            <span class="hljs-keyword">continue</span><br>        dfs(v, dep + <span class="hljs-number">1</span>, u)  <span class="hljs-comment"># 遍历到子节点</span><br>        siz[u] += siz[v]  <span class="hljs-comment"># 通过这一步，可以统计u所有子节点数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs2</span>(<span class="hljs-params">u, fa</span>):  <span class="hljs-comment"># 用来跟新其余节点为根的解</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> e[u]:<br>        <span class="hljs-keyword">if</span> v == fa:<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-comment"># dp[v] = dp[u] - siz[v] + (n - siz[v])</span><br>        dp[v] = dp[u] - <span class="hljs-number">2</span> * siz[v] + n  <span class="hljs-comment"># 当前节点v的解=左边变化值+右边变化值</span><br>        dfs2(v, u)<br><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>dp = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># 用来更新不同节点为根时的深度和</span><br>siz = [<span class="hljs-number">1</span>] * (n + <span class="hljs-number">1</span>)  <span class="hljs-comment"># 以i为根节点，其左子树的节点数，初始值为1表示仅包含该节点</span><br><span class="hljs-comment"># 建树</span><br>e = defaultdict(<span class="hljs-built_in">list</span>)<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    e[u].append(v)<br>    e[v].append(u)<br><span class="hljs-comment"># 第一遍dfs,找到以1为根节点的深度和</span><br>sum_depth = <span class="hljs-number">0</span>  <span class="hljs-comment"># 用来记录深度和</span><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br><span class="hljs-comment"># 第二遍dfs，求出其余点作为根的答案</span><br>dp[<span class="hljs-number">1</span>] = sum_depth  <span class="hljs-comment"># 6</span><br>dfs2(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)  <span class="hljs-comment"># dp=[0, 6, 5, 9, 8, 8]</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h2 id="区间DP"><a href="#区间DP" class="headerlink" title="区间DP"></a>区间DP</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526140152840.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526140152840.png" alt="image-20240526140152840"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526140205963.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526140205963.png" alt="image-20240526140205963"></p><h3 id="普通区间DP"><a href="#普通区间DP" class="headerlink" title="普通区间DP"></a>普通区间DP</h3><h4 id="模板题——石子合并"><a href="#模板题——石子合并" class="headerlink" title="模板题——石子合并"></a>模板题——<a href="https://www.lanqiao.cn/problems/1233/learning">石子合并</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>f = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    f[i][i] = <span class="hljs-number">0</span><br>    a[i] += a[i-<span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n-length+<span class="hljs-number">2</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, j):<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k] + f[k+<span class="hljs-number">1</span>][j] + a[j] - a[i-<span class="hljs-number">1</span>])<br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">1</span>][n])<br></code></pre></td></tr></table></figure><h4 id="模板题——涂色"><a href="#模板题——涂色" class="headerlink" title="模板题——涂色"></a>模板题——<a href="https://www.lanqiao.cn/problems/926/learning">涂色</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs py">s = <span class="hljs-built_in">input</span>()<br>n = <span class="hljs-built_in">len</span>(s)<br>f = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    f[i][i] = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - length + <span class="hljs-number">1</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> s[i] == s[j]:<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i + <span class="hljs-number">1</span>][j], f[i][j - <span class="hljs-number">1</span>])<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, i + length - <span class="hljs-number">1</span>):<br>                f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k] + f[k + <span class="hljs-number">1</span>][j])<br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">0</span>][n - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h4 id="模板题——制作回文串"><a href="#模板题——制作回文串" class="headerlink" title="模板题——制作回文串"></a>模板题——<a href="https://www.lanqiao.cn/problems/1547/learning">制作回文串</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py">m, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>s = <span class="hljs-built_in">input</span>()<br>w1 = [<span class="hljs-number">0</span>] * <span class="hljs-number">30</span><br>w2 = [<span class="hljs-number">0</span>] * <span class="hljs-number">30</span><br>f = [[<span class="hljs-number">0</span>] * n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    ch, weight1, weight2 = <span class="hljs-built_in">input</span>().split()<br>    w1[<span class="hljs-built_in">ord</span>(ch) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)] = <span class="hljs-built_in">int</span>(weight1)<br>    w2[<span class="hljs-built_in">ord</span>(ch) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)] = <span class="hljs-built_in">int</span>(weight2)<br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - length + <span class="hljs-number">1</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> s[i] == s[j]:<br>            <span class="hljs-keyword">if</span> length == <span class="hljs-number">2</span>:<br>                f[i][j] = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">else</span>:<br>                f[i][j] = f[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            f[i][j] = <span class="hljs-built_in">min</span>(<br>                f[i + <span class="hljs-number">1</span>][j] + <span class="hljs-built_in">min</span>(w1[<span class="hljs-built_in">ord</span>(s[i]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)], w2[<span class="hljs-built_in">ord</span>(s[i]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)]),<br>                f[i][j - <span class="hljs-number">1</span>] + <span class="hljs-built_in">min</span>(w1[<span class="hljs-built_in">ord</span>(s[j]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)], w2[<span class="hljs-built_in">ord</span>(s[j]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)])<br>            )<br><br><span class="hljs-built_in">print</span>(f[<span class="hljs-number">0</span>][n - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="环形区间DP"><a href="#环形区间DP" class="headerlink" title="环形区间DP"></a>环形区间DP</h3><h4 id="模板题——能量项链"><a href="#模板题——能量项链" class="headerlink" title="模板题——能量项链"></a>模板题——<a href="https://www.lanqiao.cn/problems/557/learning">能量项链</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs py">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>v = [<span class="hljs-number">0</span>] * (<span class="hljs-number">2</span> * n + <span class="hljs-number">2</span>)<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    v[i] = a[i]<br>    v[i + n] = v[i]<br><br>f = [[<span class="hljs-number">0</span>] * (<span class="hljs-number">2</span> * n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span> * n + <span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span> * n - length + <span class="hljs-number">2</span>):<br>        j = i + length - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, j):<br>            f[i][j] = <span class="hljs-built_in">max</span>(f[i][j], f[i][k] + f[k + <span class="hljs-number">1</span>][j] + v[i] * v[k + <span class="hljs-number">1</span>] * v[j + <span class="hljs-number">1</span>])<br><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    ans = <span class="hljs-built_in">max</span>(ans, f[i][i + n - <span class="hljs-number">1</span>])<br><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="状压DP"><a href="#状压DP" class="headerlink" title="状压DP"></a>状压DP</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141319988.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141319988.png" alt="image-20240526141319988"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141327177-1716704007699-3.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141327177-1716704007699-3.png" alt="image-20240526141327177"></p><h4 id="模板题——例1"><a href="#模板题——例1" class="headerlink" title="模板题——例1"></a>模板题——例1</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141355192.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141355192.png" alt="image-20240526141355192"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs py">MAXN = <span class="hljs-number">105</span><br>N, M, K = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] * MAXN<br>f = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">20</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()):<br>        a[i] |= <span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>)<br><br>f[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    <span class="hljs-keyword">for</span> S <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span> &lt;&lt; M):<br>        <span class="hljs-keyword">if</span> f[S] &gt; MAXN:<br>            <span class="hljs-keyword">continue</span><br>        f[S | a[i]] = <span class="hljs-built_in">min</span>(f[S | a[i]], f[S] + <span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">print</span>(f[(<span class="hljs-number">1</span> &lt;&lt; M) - <span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> f[(<span class="hljs-number">1</span> &lt;&lt; M) - <span class="hljs-number">1</span>] &lt; MAXN <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h4 id="模板题——例2"><a href="#模板题——例2" class="headerlink" title="模板题——例2"></a>模板题——例2</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141422932.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526141422932.png" alt="image-20240526141422932"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> math<br><br>maxn = <span class="hljs-number">2100000</span><br>f = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * maxn<br>lowbit = [<span class="hljs-number">0</span>] * maxn<br>line = [[<span class="hljs-number">0</span>] * <span class="hljs-number">20</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>)]<br>x = [<span class="hljs-number">0.0</span>] * maxn<br>y = [<span class="hljs-number">0.0</span>] * maxn<br>eps = <span class="hljs-number">1e-8</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">equ</span>(<span class="hljs-params">a1, b1, c1, a2, b2, c2</span>):<br>    y = (a1 * c2 - a2 * c1) / (a1 * b2 - a2 * b1)<br>    x = (c1 - b1 * y) / a1<br>    <span class="hljs-keyword">return</span> x, y<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">18</span>)):<br>    j = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> (i &amp; (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))):<br>        j += <span class="hljs-number">1</span><br>    lowbit[i] = j<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    x[i], y[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">float</span>, <span class="hljs-built_in">input</span>().split())<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> math.isclose(x[i], x[j], abs_tol=eps):<br>            <span class="hljs-keyword">continue</span><br>        a, b = equ(x[i] * x[i], x[i], y[i], x[j] * x[j], x[j], y[j])<br>        <span class="hljs-keyword">if</span> math.isclose(a, <span class="hljs-number">0</span>, abs_tol=eps):<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> math.isclose(a * x[k] * x[k] + b * x[k], y[k], abs_tol=eps):<br>                line[i][j] |= (<span class="hljs-number">1</span> &lt;&lt; (k - <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, (<span class="hljs-number">1</span> &lt;&lt; n)):<br>    j = lowbit[i]<br>    f[i | (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))] = <span class="hljs-built_in">min</span>(f[i | (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))], f[i] + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        f[i | line[j][k]] = <span class="hljs-built_in">min</span>(f[i | line[j][k]], f[i] + <span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">print</span>(f[(<span class="hljs-number">1</span> &lt;&lt; n) - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h2 id="数位DP"><a href="#数位DP" class="headerlink" title="数位DP"></a>数位DP</h2><h2 id="期望DP"><a href="#期望DP" class="headerlink" title="期望DP"></a>期望DP</h2><h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="链表，栈，队列"><a href="#链表，栈，队列" class="headerlink" title="链表，栈，队列"></a>链表，栈，队列</h2><h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154910861.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154910861.png" alt="image-20240524154910861"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154926348.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154926348.png" alt="image-20240524154926348"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154959997.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524154959997.png" alt="image-20240524154959997"></p><h4 id="模板题——约瑟夫环"><a href="#模板题——约瑟夫环" class="headerlink" title="模板题——约瑟夫环"></a>模板题——<a href="https://www.lanqiao.cn/problems/1111/learning">约瑟夫环</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">n,k,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>))<br>i=k-<span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> a:<br>    i=(i+(m-<span class="hljs-number">1</span>))%<span class="hljs-built_in">len</span>(a)<br>    <span class="hljs-built_in">print</span>(a.pop(i))<br></code></pre></td></tr></table></figure><h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524155117734.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524155117734.png" alt="image-20240524155117734"></p><h4 id="模板题——小蓝的括号串1"><a href="#模板题——小蓝的括号串1" class="headerlink" title="模板题——小蓝的括号串1"></a>模板题——<a href="https://www.lanqiao.cn/problems/2490/learning">小蓝的括号串1</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>s=<span class="hljs-built_in">input</span>()<br>a=[]<br>ok=<span class="hljs-literal">True</span><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>    <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;(&#x27;</span>:<br>        a.append(c)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(a) == <span class="hljs-number">0</span>:<br>            ok = <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">break</span><br>        a.pop()<br><span class="hljs-keyword">if</span> ok <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(a) == <span class="hljs-number">0</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Yes&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173345373.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173345373.png" alt="image-20240524173345373"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173355058.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173355058.png" alt="image-20240524173355058"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173423272.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524173423272.png" alt="image-20240524173423272"></p><h4 id="模板题——队列操作"><a href="#模板题——队列操作" class="headerlink" title="模板题——队列操作"></a>模板题——<a href="https://www.lanqiao.cn/problems/1519/learning/">队列操作</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">N=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    s=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> s[<span class="hljs-number">0</span>]==<span class="hljs-number">1</span>:<br>        a.append(s[<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">elif</span> s[<span class="hljs-number">0</span>]==<span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">if</span> a:<br>            <span class="hljs-built_in">print</span>(a.pop(<span class="hljs-number">0</span>))<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;no&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(a))<br></code></pre></td></tr></table></figure><h2 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524175734507.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524175734507.png" alt="image-20240524175734507"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524175709055.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524175709055.png" alt="image-20240524175709055"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524180001397.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524180001397.png" alt="image-20240524180001397"></p><h3 id="优先队列"><a href="#优先队列" class="headerlink" title="优先队列"></a>优先队列</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182115097.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182115097.png" alt="image-20240524182115097"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182127911.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182127911.png" alt="image-20240524182127911"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182141588.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524182141588.png" alt="image-20240524182141588"></p><h4 id="模板题——小蓝的神奇复印机"><a href="#模板题——小蓝的神奇复印机" class="headerlink" title="模板题——小蓝的神奇复印机"></a>模板题——<a href="https://www.lanqiao.cn/problems/3749/learning">小蓝的神奇复印机</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue,Queue<br>N,X=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>q=Queue()<br>pq=PriorityQueue()<br><span class="hljs-keyword">for</span> i,x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(a):<br>  q.put((i,x))<br>  pq.put(-x)<br>time=<span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>  i,x=q.get()<br>  <span class="hljs-keyword">if</span> -x==pq.queue[<span class="hljs-number">0</span>]:<br>    pq.get()<br>    time+=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> i==X:<br>      <span class="hljs-built_in">print</span>(time)<br>      <span class="hljs-keyword">break</span><br>  <span class="hljs-keyword">else</span>:<br>    q.put((i,x))<br></code></pre></td></tr></table></figure><h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><h5 id="RMQ问题"><a href="#RMQ问题" class="headerlink" title="RMQ问题"></a>RMQ问题</h5><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183506581.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183506581.png" alt="image-20240524183506581"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183726055.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183726055.png" alt="image-20240524183726055"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183742068.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183742068.png" alt="image-20240524183742068"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183753258.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183753258.png" alt="image-20240524183753258"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183803151.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524183803151.png" alt="image-20240524183803151"></p><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><h3 id="基础并查集"><a href="#基础并查集" class="headerlink" title="基础并查集"></a>基础并查集</h3><h4 id="基础-1"><a href="#基础-1" class="headerlink" title="基础"></a>基础</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194242229.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194242229.png" alt="image-20240524194242229"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194253527.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194253527.png" alt="image-20240524194253527"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194301781.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194301781.png" alt="image-20240524194301781"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194309669.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194309669.png" alt="image-20240524194309669"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194317881.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524194317881.png" alt="image-20240524194317881"></p><h5 id="模板题——蓝桥幼儿园"><a href="#模板题——蓝桥幼儿园" class="headerlink" title="模板题——蓝桥幼儿园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1135/learning">蓝桥幼儿园</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def Findroot(x):</span><br><span class="hljs-comment">#     while x!=p[x]:</span><br><span class="hljs-comment">#         x=p[x]</span><br><span class="hljs-comment">#     return x</span><br><span class="hljs-string">&#x27;&#x27;&#x27;使用路径压缩&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Findroot</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>    <span class="hljs-comment">#路径压缩</span><br>    p[x]=Findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Merge</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    p[rootx]=rooty<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Query</span>(<span class="hljs-params">x,y</span>):<br>    rootx,rooty=Findroot(x),Findroot(y)<br>    <span class="hljs-keyword">return</span> rootx==rooty<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    op,x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> op ==<span class="hljs-number">1</span>:<br>        Merge(x,y)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> Query(x,y):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="路径压缩"><a href="#路径压缩" class="headerlink" title="路径压缩"></a>路径压缩</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524195007281.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524195007281.png" alt="image-20240524195007281"></p><h5 id="模板题——星球大战"><a href="#模板题——星球大战" class="headerlink" title="模板题——星球大战"></a>模板题——<a href="https://www.lanqiao.cn/problems/828/learning/">星球大战</a></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>M = <span class="hljs-number">200010</span>; N = <span class="hljs-number">2</span> * M<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>father = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                 <span class="hljs-comment">#并查集板块</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">10</span>):<br>        father[i] = i<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_father</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x != father[x]: father[x] = find_father(father[x])<br>    <span class="hljs-keyword">return</span> father[x]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">unite</span>(<span class="hljs-params">x, y</span>):<br>    father[find_father(x)] = find_father(y)<br>come = [<span class="hljs-number">0</span>] * N; to = [<span class="hljs-number">0</span>] * N;   <span class="hljs-comment">#存储每个边</span><br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]      <span class="hljs-comment">#邻接表</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[a].append(b); g[b].append(a)<br>    come[i] = a; to[i] = b <br>broken = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">10</span>)                     <span class="hljs-comment">#记录每个点是否被修坏</span><br>destroy = []<br>k = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    b = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    broken[b] = <span class="hljs-number">1</span><br>    destroy.append(b)<br>init()<br>res = n - k             <span class="hljs-comment">#先计算所有剩下星球的连通块数，(最后一轮的结果)</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    l = come[i]; r = to[i]<br>    fl, fr = find_father(l), find_father(r)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[l] <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> broken[r] <span class="hljs-keyword">and</span> fl != fr:<br>        res -= <span class="hljs-number">1</span><br>        <span class="hljs-comment">#unite(l, r)</span><br>        father[fl] = fr<br>ans = [res]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(destroy) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):       <span class="hljs-comment">#顺序破坏，相当于倒序修建</span><br>    c = destroy[i]<br>    broken[c] = <span class="hljs-number">0</span><br>    res += <span class="hljs-number">1</span>                                    <span class="hljs-comment">#修好一个星球，连通块会多一个</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> g[c]:<br>        fc, fp = find_father(c), find_father(j)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> broken[j] <span class="hljs-keyword">and</span> fc != fp:<br>            res -= <span class="hljs-number">1</span><br>            father[fc] = fp<br>    ans.append(res)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ans) - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):           <span class="hljs-comment">#倒序输出结果</span><br>    <span class="hljs-built_in">print</span>(ans[i])<br></code></pre></td></tr></table></figure><h3 id="可撤销并查集"><a href="#可撤销并查集" class="headerlink" title="可撤销并查集"></a>可撤销并查集</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203431727.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203431727.png" alt="image-20240524203431727"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203449967.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203449967.png" alt="image-20240524203449967"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203621861.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203621861.png" alt="image-20240524203621861"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203634004.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203634004.png" alt="image-20240524203634004"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203643547.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203643547.png" alt="image-20240524203643547"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203712193.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203712193.png" alt="image-20240524203712193"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203728659.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203728659.png" alt="image-20240524203728659"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203741431.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203741431.png" alt="image-20240524203741431"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203752845.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203752845.png" alt="image-20240524203752845"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203808480.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203808480.png" alt="image-20240524203808480"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203837465.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203837465.png" alt="image-20240524203837465"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203855506.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203855506.png" alt="image-20240524203855506"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203906020.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203906020.png" alt="image-20240524203906020"></p><h4 id="可撤销并查集定义"><a href="#可撤销并查集定义" class="headerlink" title="可撤销并查集定义"></a>可撤销并查集定义</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203916807.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203916807.png" alt="image-20240524203916807"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203959912.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524203959912.png" alt="image-20240524203959912"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204009818.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204009818.png" alt="image-20240524204009818"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204018333.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204018333.png" alt="image-20240524204018333"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204035190.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204035190.png" alt="image-20240524204035190"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204043804.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204043804.png" alt="image-20240524204043804"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204055615.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204055615.png" alt="image-20240524204055615"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204106056.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204106056.png" alt="image-20240524204106056"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204120154.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204120154.png" alt="image-20240524204120154"></p><h4 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204147436.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204147436.png" alt="image-20240524204147436"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204158246.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240524204158246.png" alt="image-20240524204158246"></p><h3 id="带权并查集"><a href="#带权并查集" class="headerlink" title="带权并查集"></a>带权并查集</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102401075.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102401075.png" alt="image-20240526102401075"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102412755.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102412755.png" alt="image-20240526102412755"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102423880.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102423880.png" alt="image-20240526102423880"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102443080.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102443080.png" alt="image-20240526102443080"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102451528.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102451528.png" alt="image-20240526102451528"></p><h2 id="树上问题"><a href="#树上问题" class="headerlink" title="树上问题"></a>树上问题</h2><h3 id="树的基本概念"><a href="#树的基本概念" class="headerlink" title="树的基本概念"></a>树的基本概念</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102633616.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102633616.png" alt="image-20240526102633616"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102641495.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102641495.png" alt="image-20240526102641495"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102651200.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102651200.png" alt="image-20240526102651200"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102714548.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102714548.png" alt="image-20240526102714548"></p><h4 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102917869.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102917869.png" alt="image-20240526102917869"> <br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102815444.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102815444.png" alt="image-20240526102815444"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102945303.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102945303.png" alt="image-20240526102945303"></p><h4 id="模板题——完全二叉树的权值"><a href="#模板题——完全二叉树的权值" class="headerlink" title="模板题——完全二叉树的权值"></a>模板题——<a href="https://www.lanqiao.cn/problems/183/learning">完全二叉树的权值</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> math<br><br>s = []<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>x = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br>deep = <span class="hljs-built_in">int</span>(math.log(n, <span class="hljs-number">2</span>)) + <span class="hljs-number">1</span>  <span class="hljs-comment"># 完全二叉树求深度公式</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(deep):  <span class="hljs-comment"># 按层数来遍历</span><br>    s.append(<span class="hljs-built_in">sum</span>(x[<span class="hljs-number">2</span> ** i - <span class="hljs-number">1</span>:<span class="hljs-number">2</span> ** i + <span class="hljs-number">2</span> ** i - <span class="hljs-number">1</span>]))  <span class="hljs-comment"># 切片出每层的节点，并计算其权值</span><br><span class="hljs-built_in">print</span>(s.index(<span class="hljs-built_in">max</span>(s)) + <span class="hljs-number">1</span>)  <span class="hljs-comment"># 找出权值最大的层级，并返回其索引</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103231454.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103231454.png" alt="image-20240526103231454"></p><h3 id="树的遍历"><a href="#树的遍历" class="headerlink" title="树的遍历"></a>树的遍历</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103255622.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103255622.png" alt="image-20240526103255622"></p><h4 id="先序遍历"><a href="#先序遍历" class="headerlink" title="先序遍历"></a>先序遍历</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103305459.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103305459.png" alt="image-20240526103305459"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103325159.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103325159.png" alt="image-20240526103325159"></p><h4 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103335871.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103335871.png" alt="image-20240526103335871"></p><h4 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103352924.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103352924.png" alt="image-20240526103352924"></p><h4 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103409405.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103409405.png" alt="image-20240526103409405"></p><h4 id="树的遍历-1"><a href="#树的遍历-1" class="headerlink" title="树的遍历"></a>树的遍历</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103902993.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103902993.png" alt="image-20240526103902993"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103916051.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103916051.png" alt="image-20240526103916051"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103926976.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526103926976.png" alt="image-20240526103926976"></p><h4 id="模板题——欧涛爬树"><a href="#模板题——欧涛爬树" class="headerlink" title="模板题——欧涛爬树"></a>模板题——<a href="https://www.lanqiao.cn/problems/3039/learning/">欧涛爬树</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br>sys.setrecursionlimit(<span class="hljs-number">100000</span>)<br><span class="hljs-built_in">input</span>=sys.stdin.readline<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u,fa</span>):<span class="hljs-comment">#进行判断是否是叶子节点</span><br>    path.append(s[u])<br>    flag=<span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]:<br>        <span class="hljs-keyword">if</span> v==fa:<span class="hljs-keyword">continue</span><br>        dfs(v,u)<br>        flag=<span class="hljs-literal">False</span><br>    <span class="hljs-keyword">if</span> flag:<br>        S.add(<span class="hljs-string">&#x27;&#x27;</span>.join(path))<br>    path.pop()<br><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>        <span class="hljs-comment">#邻接表进行存放树</span><br>        G=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>        s=<span class="hljs-string">&#x27; &#x27;</span>+<span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>            u,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>            G[u].append(v)<br>            G[v].append(u)<br>        path=[]<br>        S=<span class="hljs-built_in">set</span>()<br>        dfs(<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(S))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read</span>():<br>    <span class="hljs-keyword">import</span> sys<br>    <span class="hljs-keyword">return</span> sys.stdin.readline().strip()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">root, fa</span>):<br>    path.append(s[root])<br>    flag = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> to <span class="hljs-keyword">in</span> vis[root]:<br>        <span class="hljs-keyword">if</span> to == fa:<br>            <span class="hljs-keyword">continue</span><br>        dfs(to, root)<br>        flag = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">if</span> flag:<br>        result.add(<span class="hljs-string">&quot;&quot;</span>.join(path))<br>    path.pop()<br><br><br><span class="hljs-comment"># 多次输入模板</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        n = <span class="hljs-built_in">int</span>(read())<br>        s = read()<br>        vis = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>            u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, read().split())<br>            u -= <span class="hljs-number">1</span><br>            v -= <span class="hljs-number">1</span><br>            vis[u].append(v)<br>            vis[v].append(u)<br>        result = <span class="hljs-built_in">set</span>()<br>        path = []<br>        dfs(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(result))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><h3 id="树的直径与重心"><a href="#树的直径与重心" class="headerlink" title="树的直径与重心"></a>树的直径与重心</h3><h4 id="树的直径"><a href="#树的直径" class="headerlink" title="树的直径"></a>树的直径</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104404857.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104404857.png" alt="image-20240526104404857"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104428203.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104428203.png" alt="image-20240526104428203"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104454203.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526104454203.png" alt="image-20240526104454203"></p><h4 id="模板题——直径"><a href="#模板题——直径" class="headerlink" title="模板题——直径"></a>模板题——<a href="https://www.lanqiao.cn/problems/1394/learning">直径</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-built_in">input</span> = sys.stdin.readline<br>sys.setrecursionlimit(<span class="hljs-number">100000</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u, fa, pre=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-keyword">global</span> S<br>    <span class="hljs-keyword">if</span> d[u] &gt; d[S]: S = u<br>    <span class="hljs-keyword">for</span> v, w <span class="hljs-keyword">in</span> G[u]:<br>        <span class="hljs-keyword">if</span> v == fa: <span class="hljs-keyword">continue</span><br>        d[v] = d[u] + w<br>        <span class="hljs-keyword">if</span> pre: pre[v] = u<br>        dfs(v, u, pre)<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br>d = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>pre = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append([v, w])<br>    G[v].append([u, w])<br>S = <span class="hljs-number">1</span><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>d[S] = <span class="hljs-number">0</span><br>dfs(S, <span class="hljs-number">0</span>, pre)<br>L = [S]<br>L_list = <span class="hljs-built_in">set</span>()<br><span class="hljs-keyword">while</span> S != <span class="hljs-number">0</span>:<br>    L_list.add(S)<br>    S = pre[S]<br><span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> L_list:<br>    <span class="hljs-keyword">for</span> i, (v, w) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(G[u]):<br>        <span class="hljs-keyword">if</span> v <span class="hljs-keyword">in</span> L_list:<br>            G[u][i] = [v, w - <span class="hljs-number">1</span>]<br>S = <span class="hljs-number">1</span><br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>d[S] = <span class="hljs-number">0</span><br>dfs(S, <span class="hljs-number">0</span>)<br>L2 = d[S]<br><span class="hljs-built_in">print</span>(L)<br><span class="hljs-built_in">print</span>(L - L2)<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526105912364.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526105912364.png" alt="image-20240526105912364"></p><h3 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h3><h4 id="最近公共祖先"><a href="#最近公共祖先" class="headerlink" title="最近公共祖先"></a>最近公共祖先</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526105959804.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526105959804.png" alt="image-20240526105959804"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110010233.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110010233.png" alt="image-20240526110010233"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110018355.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110018355.png" alt="image-20240526110018355"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110031858.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110031858.png" alt="image-20240526110031858"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110040710.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110040710.png" alt="image-20240526110040710"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110052606.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110052606.png" alt="image-20240526110052606"></p><h4 id="模板题——最近公共祖先LCA查询"><a href="#模板题——最近公共祖先LCA查询" class="headerlink" title="模板题——最近公共祖先LCA查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/4385/learning">最近公共祖先LCA查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment">#设置deep数组表示深度。</span><br><span class="hljs-comment">#front数组，表示节点u,前2**i层的爹是谁？？？</span><br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>tree=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>fornt=[[<span class="hljs-number">0</span>]*(<span class="hljs-number">21</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<span class="hljs-comment">#如果你是0你就是孤儿。</span><br>deep=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<span class="hljs-comment">#0节点没有层数。</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>  u,v=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  tree[u].append(v)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">er,die</span>):<br>  <span class="hljs-keyword">if</span> die==<span class="hljs-number">0</span>:<br>    deep[er]=<span class="hljs-number">1</span><span class="hljs-comment">#这是第一层,同时，第一层也没有爹啊，也不需要更新如何层数相关节点。</span><br><br>  <span class="hljs-keyword">else</span>:<br>    deep[er]=deep[die]+<span class="hljs-number">1</span><span class="hljs-comment">#更新层数。</span><br>    fornt[er][<span class="hljs-number">0</span>]=die<span class="hljs-comment">#上一层的点，就是die。</span><br>    <span class="hljs-keyword">for</span> cc <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>):<br>      <span class="hljs-keyword">if</span> fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]!=<span class="hljs-number">0</span>:<br><br>        fornt[er][cc]=fornt[fornt[er][cc-<span class="hljs-number">1</span>]][cc-<span class="hljs-number">1</span>]<br>        <span class="hljs-comment">#倍增法。2**i层之上的点=</span><br>        <span class="hljs-comment">#2**(cc-1)上面的点的上面2**(cc-1)的点。就，无限套娃。</span><br>  <br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tree[er]:<br>    dfs(i,er)<span class="hljs-comment">#儿子变成新的爹。</span><br>dfs(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<span class="hljs-comment">#儿子是根，爹不存在。</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-comment">#第一步，拉升。将x拉到和y一个水平。一开始走2**20步，太大，就走2**19步，然后走一半，再走一半</span><br>  <span class="hljs-comment">#就像那个乌龟与跑步哥一样。二进制原理使得这个步数遍历后一定是一个高度。</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> deep[fornt[x][i]]&gt;=deep[y] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span>:<br>      x=fornt[x][i]<span class="hljs-comment">#自动判断能走不能走，能走则走一大步。x提升到别的节点。</span><br><br>  <span class="hljs-comment">#此时提升必定一样了。</span><br>  <span class="hljs-keyword">if</span> x==y:<br>    <span class="hljs-keyword">return</span> x<span class="hljs-comment">#原来你就是我爹！</span><br>  <br>  <span class="hljs-keyword">else</span>:<span class="hljs-comment">#不是？我们再度提升吧！神明！</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> fornt[x][i]!=fornt[y][i] <span class="hljs-keyword">and</span> fornt[x][i]!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> fornt[y][i]!=<span class="hljs-number">0</span>:<span class="hljs-comment">#相等反而不能决定什么，因为可能不是最近的公共祖先</span><br>        x=fornt[x][i]<br>        y=fornt[y][i]<br>    <span class="hljs-keyword">return</span> fornt[y][<span class="hljs-number">0</span>]<span class="hljs-comment">#最后，y上面的就是自己的公共祖先。</span><br>q=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  x,y=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> deep[x]&lt;deep[y]:<span class="hljs-comment">#我们设x是深节点。</span><br>    x,y=y,x<br>  <span class="hljs-built_in">print</span>(find(x,y))<br></code></pre></td></tr></table></figure><h3 id="树上差分"><a href="#树上差分" class="headerlink" title="树上差分"></a>树上差分</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110829760.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110829760.png" alt="image-20240526110829760"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110840432.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110840432.png" alt="image-20240526110840432"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110850262.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110850262.png" alt="image-20240526110850262"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110859590.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110859590.png" alt="image-20240526110859590"></p><h4 id="问题引入"><a href="#问题引入" class="headerlink" title="问题引入"></a>问题引入</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110924343.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110924343.png" alt="image-20240526110924343"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110933963.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110933963.png" alt="image-20240526110933963"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110943437.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110943437.png" alt="image-20240526110943437"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110952759.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526110952759.png" alt="image-20240526110952759"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111012615.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111012615.png" alt="image-20240526111012615"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111135950.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111135950.png" alt="image-20240526111135950"></p><h4 id="模板题——"><a href="#模板题——" class="headerlink" title="模板题——"></a>模板题——</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br>maxn = <span class="hljs-number">110000</span><br>n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>maxx = <span class="hljs-built_in">int</span>(math.log2(n))<br>edge = defaultdict(<span class="hljs-built_in">list</span>)<br>head = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>dep = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>dlt = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>fa = [[<span class="hljs-number">0</span>] * <span class="hljs-number">20</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br>cnt = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">a, b, dis</span>):<br>    <span class="hljs-keyword">global</span> cnt<br>    cnt += <span class="hljs-number">1</span><br>    edge[cnt] = [head[a], b, dis]<br>    head[a] = cnt<br>    cnt += <span class="hljs-number">1</span><br>    edge[cnt] = [head[b], a, dis]<br>    head[b] = cnt<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    a, b, dis = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    add_edge(a, b, dis)<br><br>dfs(<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    a, b, x = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().split())<br>    dlt[a] += x<br>    dlt[b] += x<br>    c = lca(a, b)<br>    dlt[c] -= <span class="hljs-number">2</span> * x<br><br>dfs1(<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(dlt[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h3 id="DFS序"><a href="#DFS序" class="headerlink" title="DFS序"></a>DFS序</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111342883.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111342883.png" alt="image-20240526111342883"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111358571.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111358571.png" alt="image-20240526111358571"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111411449.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111411449.png" alt="image-20240526111411449"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111421595.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111421595.png" alt="image-20240526111421595"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111429485.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111429485.png" alt="image-20240526111429485"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111439242.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111439242.png" alt="image-20240526111439242"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111454557.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111454557.png" alt="image-20240526111454557"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111510842.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111510842.png" alt="image-20240526111510842"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111525573.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111525573.png" alt="image-20240526111525573"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111537764.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111537764.png" alt="image-20240526111537764"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111549957.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111549957.png" alt="image-20240526111549957"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111604828.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111604828.png" alt="image-20240526111604828"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111613985.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111613985.png" alt="image-20240526111613985"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111621233.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111621233.png" alt="image-20240526111621233"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111628644.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111628644.png" alt="image-20240526111628644"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111634702.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111634702.png" alt="image-20240526111634702"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111645145.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111645145.png" alt="image-20240526111645145"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111654060.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526111654060.png" alt="image-20240526111654060"></p><h4 id="模板题——异或和"><a href="#模板题——异或和" class="headerlink" title="模板题——异或和"></a>模板题——<a href="https://www.lanqiao.cn/problems/3549/learning">异或和</a></h4><h5 id="dfs序和树状数组"><a href="#dfs序和树状数组" class="headerlink" title="dfs序和树状数组"></a>dfs序和树状数组</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>g = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    u, va = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[u].append(va)<br>    g[va].append(u)<br><br>tree = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>a = [[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)] <span class="hljs-comment"># 存dfs序</span><br>cnt = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node, fa</span>):<br>    <span class="hljs-keyword">global</span> cnt<br>    cnt += <span class="hljs-number">1</span><br>    a[node][<span class="hljs-number">0</span>] = cnt<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[node]:<br>        <span class="hljs-keyword">if</span> i != fa:<br>            dfs(i, node)<br>    a[node][<span class="hljs-number">1</span>] = cnt<br>dfs(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; (-x)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">x, d</span>):<br>    <span class="hljs-keyword">while</span> x &lt;= n:<br>        tree[x] ^= d<br>        x += lowbit(x)<br>        <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> x:<br>        ans ^= tree[x]<br>        x -= lowbit(x)<br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    update(a[i][<span class="hljs-number">0</span>], v[i])<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    o = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> o[<span class="hljs-number">0</span>] == <span class="hljs-number">2</span>:<br>        <span class="hljs-built_in">print</span>(query(a[o[<span class="hljs-number">1</span>]][<span class="hljs-number">1</span>]) ^ query(a[o[<span class="hljs-number">1</span>]][<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">else</span>:<br>        x, y = o[<span class="hljs-number">1</span>], o[<span class="hljs-number">2</span>]<br>        update(a[x][<span class="hljs-number">0</span>], v[x] ^ y)<br>        v[x] = y<br></code></pre></td></tr></table></figure><h5 id="模拟暴力代码"><a href="#模拟暴力代码" class="headerlink" title="模拟暴力代码"></a>模拟暴力代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>a = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>g = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>    c, d =<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    g[c].append(d)<br>    g[d].append(c)<br><br>dep = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>dep[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">depth</span>(<span class="hljs-params">node, fa</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[node]:<br>        <span class="hljs-keyword">if</span> i != fa:<br>            dep[i] = dep[node] + <span class="hljs-number">1</span><br>            depth(i, node)<br>depth(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[node]:<br>        <span class="hljs-keyword">if</span> dep[i] &gt; dep[node]:<br>            li.append(a[i])<br>            dfs(i)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">global</span> li<br>    li = [a[n]]<br>    dfs(n)<br>    ans = li[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(li)):<br>        ans = ans ^ li[i]<br>    <span class="hljs-built_in">print</span>(ans)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">change</span>(<span class="hljs-params">x, y</span>):<br>    a[x] = y<br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    o = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> o[<span class="hljs-number">0</span>] == <span class="hljs-number">2</span>: query(o[<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">else</span>: change(o[<span class="hljs-number">1</span>], o[<span class="hljs-number">2</span>])<br></code></pre></td></tr></table></figure><p>利用邻接表打印树结构，然后根据子树根节点寻找打印子树的元素，存到列表中，最后对列表的所有元素（即子树的所有点）进行异或和运算</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 读取输入的 n 和 m</span><br>value = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))  <span class="hljs-comment"># 读取输入的值列表</span><br>value.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  <span class="hljs-comment"># 在值列表的最前面插入 0,根节点为1，索引从1开始</span><br>yihuo = []  <span class="hljs-comment"># 存储异或运算结果的列表</span><br>tree = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 初始化邻接表,表示树结构</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):  <span class="hljs-comment"># 读取 n-1 次输入</span><br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    a, b = <span class="hljs-built_in">min</span>(a, b), <span class="hljs-built_in">max</span>(a, b)<br>    tree[a].append(b)  <span class="hljs-comment"># 在 a 结点的邻接表中添加 b 结点，说明b为a的子节点</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):  <span class="hljs-comment"># 读取 m 次操作输入</span><br>    op = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">if</span> op[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:  <span class="hljs-comment"># 如果是操作 1</span><br>        value[op[<span class="hljs-number">1</span>]] = op[<span class="hljs-number">2</span>]  <span class="hljs-comment"># 更新点权</span><br>    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 如果是操作 2</span><br>        x = op[<span class="hljs-number">1</span>]<span class="hljs-comment">#子树根节点</span><br>        vis = [x]  <span class="hljs-comment"># 把子树存到该列表里</span><br>        qfront = <span class="hljs-number">0</span>  <span class="hljs-comment"># 队列的头指针</span><br>        qend = <span class="hljs-number">1</span>  <span class="hljs-comment"># 队列的尾指针</span><br>        <span class="hljs-keyword">while</span> qfront != qend:  <span class="hljs-comment"># 当队列不为空时</span><br>            <span class="hljs-keyword">if</span> tree[vis[qfront]] != []:  <span class="hljs-comment"># 该节点有子节点</span><br>                vis.extend(tree[vis[qfront]])  <span class="hljs-comment"># 将子节点存到子树中</span><br>                qend += <span class="hljs-built_in">len</span>(tree[vis[qfront]])  <span class="hljs-comment"># 更新队列的尾指针</span><br>            qfront += <span class="hljs-number">1</span>  <span class="hljs-comment"># 更新队列的头指针</span><br>        ans = value[vis[<span class="hljs-number">0</span>]]  <span class="hljs-comment"># 初始化异或运算的结果</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(vis)):  <span class="hljs-comment"># 遍历访问列表中的结点</span><br>            ans ^= value[vis[i]]  <span class="hljs-comment"># 对每个结点的值进行异或运算</span><br>        yihuo.append(ans)  <span class="hljs-comment"># 将异或运算的结果加入到结果列表中</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> yihuo:  <span class="hljs-comment"># 遍历结果列表</span><br>    <span class="hljs-built_in">print</span>(i)  <span class="hljs-comment"># 输出每个异或运算的结果</span><br></code></pre></td></tr></table></figure><h3 id="树链剖分"><a href="#树链剖分" class="headerlink" title="树链剖分"></a>树链剖分</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112353706.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112353706.png" alt="image-20240526112353706"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112401255.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112401255.png" alt="image-20240526112401255"></p><h4 id="重链部分"><a href="#重链部分" class="headerlink" title="重链部分"></a>重链部分</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112422998.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112422998.png" alt="image-20240526112422998"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112438353.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112438353.png" alt="image-20240526112438353"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112446340.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112446340.png" alt="image-20240526112446340"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112453669.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112453669.png" alt="image-20240526112453669"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112501407.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112501407.png" alt="image-20240526112501407"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112511133-1716693912043-1.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112511133-1716693912043-1.png" alt="image-20240526112511133"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112520973.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112520973.png" alt="image-20240526112520973"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112528251.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112528251.png" alt="image-20240526112528251"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112534620.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112534620.png" alt="image-20240526112534620"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112540265.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112540265.png" alt="image-20240526112540265"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112547668.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112547668.png" alt="image-20240526112547668"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112554018.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112554018.png" alt="image-20240526112554018"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112600918.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112600918.png" alt="image-20240526112600918"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112606842.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112606842.png" alt="image-20240526112606842"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112612323.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112612323.png" alt="image-20240526112612323"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112617087.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112617087.png" alt="image-20240526112617087"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112624067.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112624067.png" alt="image-20240526112624067"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112632456.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112632456.png" alt="image-20240526112632456"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112636784.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112636784.png" alt="image-20240526112636784"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112641641.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112641641.png" alt="image-20240526112641641"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112646496.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112646496.png" alt="image-20240526112646496"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112653107.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112653107.png" alt="image-20240526112653107"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112657735.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112657735.png" alt="image-20240526112657735"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112703078.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112703078.png" alt="image-20240526112703078"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112709755.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112709755.png" alt="image-20240526112709755"></p><h4 id="树链部分的性质"><a href="#树链部分的性质" class="headerlink" title="树链部分的性质"></a>树链部分的性质</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112730804.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112730804.png" alt="image-20240526112730804"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112737253.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112737253.png" alt="image-20240526112737253"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112746989.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112746989.png" alt="image-20240526112746989"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112753152.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112753152.png" alt="image-20240526112753152"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112759297.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112759297.png" alt="image-20240526112759297"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112805144.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112805144.png" alt="image-20240526112805144"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112810692.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112810692.png" alt="image-20240526112810692"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112816453.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112816453.png" alt="image-20240526112816453"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112839302.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112839302.png" alt="image-20240526112839302"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112846421.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112846421.png" alt="image-20240526112846421"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112851218.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112851218.png" alt="image-20240526112851218"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112856579.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112856579.png" alt="image-20240526112856579"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112901873.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112901873.png" alt="image-20240526112901873"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112907428.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112907428.png" alt="image-20240526112907428"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112913595.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112913595.png" alt="image-20240526112913595"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112918708.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112918708.png" alt="image-20240526112918708"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112923449.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526112923449.png" alt="image-20240526112923449"></p><h2 id="树形数据结构"><a href="#树形数据结构" class="headerlink" title="树形数据结构"></a>树形数据结构</h2><h3 id="树状数组基础"><a href="#树状数组基础" class="headerlink" title="树状数组基础"></a>树状数组基础</h3><h4 id="lowbit操作"><a href="#lowbit操作" class="headerlink" title="lowbit操作"></a>lowbit操作</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113101030.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113101030.png" alt="image-20240526113101030"></p><h4 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113114986.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113114986.png" alt="image-20240526113114986"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113123838.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113123838.png" alt="image-20240526113123838"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113132131.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113132131.png" alt="image-20240526113132131"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113141135.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113141135.png" alt="image-20240526113141135"></p><h4 id="模板题——单点修改，区间查询"><a href="#模板题——单点修改，区间查询" class="headerlink" title="模板题——单点修改，区间查询"></a>模板题——<a href="https://www.lanqiao.cn/problems/2340/learning/">单点修改，区间查询</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs py">N = <span class="hljs-number">100100</span><br><span class="hljs-comment">#初始化树状数组 为0</span><br>f = [<span class="hljs-number">0</span>] * N<br><br><span class="hljs-comment">#求下标为x的最小区间长度</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; (-x)<br><br><span class="hljs-comment">#树状数组更新函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">upd</span>(<span class="hljs-params">pos,v</span>):<span class="hljs-comment">#pos：下标 v：值</span><br>    <span class="hljs-comment">#在下标为pos的区间加上v 并且在每个有包含pos的大区间加上v</span><br>    <span class="hljs-comment">#包含当前区间的大区间：在pos的位置上加lowbit(pos)便能得到大区间</span><br>    <span class="hljs-keyword">while</span> pos &lt;= n:<br>        f[pos] += v<br>        pos += lowbit(pos)<br><br><span class="hljs-comment">#得到1-pos位置的前缀和</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<span class="hljs-comment">#加上组成pos每一个区间的和</span><br>        res += f[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>data = <span class="hljs-built_in">input</span>().split()<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n):<br>    x = <span class="hljs-built_in">int</span>(data[i])<br>    <span class="hljs-comment">#树状数组初始化都为0，需要将原数组每个值通过upd方法将每个值加入树状数组</span><br>    upd(i+<span class="hljs-number">1</span>,x)<br><br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    opt,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-number">1</span>:<br>        upd(a,b)<span class="hljs-comment">#更新</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment">#区间[a,b] = [1,b] - [1,a-1]</span><br>        <span class="hljs-built_in">print</span>(get(b) - get(a-<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>n = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  s,a,b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">1</span>:<br>    n[a-<span class="hljs-number">1</span>] += b<br>  <span class="hljs-keyword">if</span> s == <span class="hljs-number">2</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(n[a-<span class="hljs-number">1</span>:b]))<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113358856.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113358856.png" alt="image-20240526113358856"></p><h4 id="树状数组-1"><a href="#树状数组-1" class="headerlink" title="树状数组"></a>树状数组</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113430755.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113430755.png" alt="image-20240526113430755"></p><h4 id="模板题——殷老师排队"><a href="#模板题——殷老师排队" class="headerlink" title="模板题——殷老师排队"></a>模板题——<a href="https://www.lanqiao.cn/problems/3620/learning/">殷老师排队</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">return</span> x &amp; (-x)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>  ans = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">while</span> x:<br>    ans += tree[x]<br>    x -= lowbit(x)<br>  <span class="hljs-keyword">return</span> ans <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x,y</span>):<br>  <span class="hljs-keyword">while</span> x &lt;= n:<br>    tree[x] += y<br>    x += lowbit(x)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>a =[<span class="hljs-number">0</span>] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>tree = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  add(i,a[i])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  lt = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>  <span class="hljs-keyword">if</span> lt[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:<br>    x, y = lt[<span class="hljs-number">1</span>], lt[<span class="hljs-number">2</span>]<br>    add(x,y - a[x])<br>    a[x] = y<br>  <span class="hljs-keyword">else</span>:<br>    x = lt[<span class="hljs-number">1</span>]<br>    ans = (<span class="hljs-number">2</span> * x - n - <span class="hljs-number">2</span>) * a[x] + query(n) - <span class="hljs-number">2</span>*query(x-<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h3 id="二维树状数组"><a href="#二维树状数组" class="headerlink" title="二维树状数组"></a>二维树状数组</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113722203.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113722203.png" alt="image-20240526113722203"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113730769.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113730769.png" alt="image-20240526113730769"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113742110.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113742110.png" alt="image-20240526113742110"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113748208.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113748208.png" alt="image-20240526113748208"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113754750.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113754750.png" alt="image-20240526113754750"></p><h4 id="模板题——-1"><a href="#模板题——-1" class="headerlink" title="模板题——"></a>模板题——</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113904670.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113904670.png" alt="image-20240526113904670"></p><h3 id="树状数组上二分"><a href="#树状数组上二分" class="headerlink" title="树状数组上二分"></a>树状数组上二分</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113950824.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113950824.png" alt="image-20240526113950824"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113958446.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526113958446.png" alt="image-20240526113958446"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114007562.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114007562.png" alt="image-20240526114007562"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114020291.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114020291.png" alt="image-20240526114020291"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114102890.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114102890.png" alt="image-20240526114102890"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114113384.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114113384.png" alt="image-20240526114113384"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114124229.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114124229.png" alt="image-20240526114124229"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114131782.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114131782.png" alt="image-20240526114131782"></p><h4 id="模板题——-2"><a href="#模板题——-2" class="headerlink" title="模板题——"></a>模板题——</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python">maxn = <span class="hljs-number">110000</span><br>ans = [<span class="hljs-number">0</span>] * maxn<br>tree = [<span class="hljs-number">0</span>] * maxn<br>a = [<span class="hljs-number">0</span>] * maxn<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lowbit</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x &amp; -x<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">pos, x</span>):<br>    <span class="hljs-keyword">while</span> pos &lt; maxn:<br>        tree[pos] += x<br>        pos += lowbit(pos)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">pos</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> pos &gt; <span class="hljs-number">0</span>:<br>        res += tree[pos]<br>        pos -= lowbit(pos)<br>    <span class="hljs-keyword">return</span> res<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split()))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    a[i] = nums[i - <span class="hljs-number">1</span>]<br>    add(i, <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>    l, r = <span class="hljs-number">1</span>, n<br>    <span class="hljs-keyword">while</span> l &lt;= r:<br>        mid = (l + r) // <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> query(mid) &lt; a[i] + <span class="hljs-number">1</span>:<br>            l = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            r = mid - <span class="hljs-number">1</span><br>    ans[i] = r<br>    add(r, -<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(ans[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="线段树-动态开点"><a href="#线段树-动态开点" class="headerlink" title="线段树-动态开点"></a>线段树-动态开点</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121216936.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121216936.png" alt="image-20240526121216936"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121240169.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121240169.png" alt="image-20240526121240169"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121250475.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121250475.png" alt="image-20240526121250475"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121357462.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121357462.png" alt="image-20240526121357462"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121408234.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121408234.png" alt="image-20240526121408234"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121446955.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121446955.png" alt="image-20240526121446955"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121517887.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121517887.png" alt="image-20240526121517887"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121505465.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121505465.png" alt="image-20240526121505465"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121533131.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121533131.png" alt="image-20240526121533131"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121542078.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121542078.png" alt="image-20240526121542078"></p><h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121653108.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121653108.png" alt="image-20240526121653108"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Tree</span> &#123;</span><br>    <span class="hljs-type">int</span> l, r, n, ls, rs;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++ cnt;<br>        tree[t].l = l;<br>        tree[t].r = r;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        tree[t].n = n;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        update(tree[t].ls, l, mid, pos, n);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(tree[t].rs, mid + <span class="hljs-number">1</span>, r, pos, n);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getnum</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (tree[t].l == l &amp;&amp; tree[t].r == r) &#123;<br>        <span class="hljs-keyword">return</span> tree[t].n;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (tree[t].l + tree[t].r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].rs, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getnum(tree[t].ls, l, mid) + getnum(tree[t].rs, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树-标记永久化"><a href="#线段树-标记永久化" class="headerlink" title="线段树-标记永久化"></a>线段树-标记永久化</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121717724.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121717724.png" alt="image-20240526121717724"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121729855.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121729855.png" alt="image-20240526121729855"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121746997.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121746997.png" alt="image-20240526121746997"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121821681.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121821681.png" alt="image-20240526121821681"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121831175.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121831175.png" alt="image-20240526121831175"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121847400.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121847400.png" alt="image-20240526121847400"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121855524.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121855524.png" alt="image-20240526121855524"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121904894.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121904894.png" alt="image-20240526121904894"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121912575.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526121912575.png" alt="image-20240526121912575"></p><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> *v)</span> &#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        _v[t] = v[l];<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    build(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, v);<br>    build(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, v);<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] + _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> k)</span> &#123;<br>    _v[t] += k * (r - l + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        _laz[t] += k;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        update(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, k);<br>        update(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, k);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> sum)</span> &#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t] + sum * (_r[t] - _l[t] + <span class="hljs-number">1</span>);;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, sum + _laz[t]);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getv(t &lt;&lt; <span class="hljs-number">1</span>, l, mid, sum + _laz[t])<br>            + getv(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r, sum + _laz[t]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护矩阵"><a href="#线段树维护矩阵" class="headerlink" title="线段树维护矩阵"></a>线段树维护矩阵</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124453903.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124453903.png" alt="image-20240526124453903"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124459467.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124459467.png" alt="image-20240526124459467"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124505523.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124505523.png" alt="image-20240526124505523"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124509905.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124509905.png" alt="image-20240526124509905"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124524019.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124524019.png" alt="image-20240526124524019"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124529840.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124529840.png" alt="image-20240526124529840"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124537171.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124537171.png" alt="image-20240526124537171"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124545230.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124545230.png" alt="image-20240526124545230"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    _l[t] = l;<br>    _r[t] = r;<br>    _v[t] = _E;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    <span class="hljs-built_in">build</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> pos, MATRIX &amp;v)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] = _r[t]) &#123;<br>        _v[t] = v;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span>, pos, v);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">update</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, pos, v);<br>    &#125;<br>    _v[t] = _v[t &lt;&lt; <span class="hljs-number">1</span>] * _v[t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-function">MATRIX <span class="hljs-title">getv</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (_l[t] == l &amp;&amp; _r[t] == r) &#123;<br>        <span class="hljs-keyword">return</span> _v[t];<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l[t] + _r[t]) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span>, l, mid) * <span class="hljs-built_in">getv</span>(t &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="线段树维护哈希"><a href="#线段树维护哈希" class="headerlink" title="线段树维护哈希"></a>线段树维护哈希</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124653609.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124653609.png" alt="image-20240526124653609"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124700848.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124700848.png" alt="image-20240526124700848"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124710439.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124710439.png" alt="image-20240526124710439"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124717847.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124717847.png" alt="image-20240526124717847"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124726230.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124726230.png" alt="image-20240526124726230"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124754241.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124754241.png" alt="image-20240526124754241"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs py">bs1= []<br>bs2= []<br>mod1 = <span class="hljs-number">998244353</span><br>mod2 = <span class="hljs-number">19260817</span><br>bas = <span class="hljs-number">233</span><br>s = []<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">asdf</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, h1, h2, length</span>):<br>        self.h1 = h1<br>        self.h2 = h2<br>        self.length = length<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> asdf((self.h1 * bs1[c.length] + c.h1) % mod1, (self.h2 * bs2[c.length] + c.h2) % mod2, self.length + c.length)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, c</span>):<br>        <span class="hljs-keyword">return</span> self.h1 == c.h1 <span class="hljs-keyword">and</span> self.h2 == c.h2 <span class="hljs-keyword">and</span> self.length == c.length<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">l, r, rt</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-built_in">ord</span>(a[l]), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    s[rt] = build(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>) + build((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">l, r, rt, x, y</span>):<br>    <span class="hljs-keyword">if</span> x &lt;= l <span class="hljs-keyword">and</span> r &lt;= y:<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> y &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y)<br>    <span class="hljs-keyword">if</span> x &gt; (l + r) // <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br>    <span class="hljs-keyword">return</span> query(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, x, y) + query((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, x, y)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">l, r, rt, ad, ch</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[rt] = asdf(<span class="hljs-built_in">ord</span>(ch), <span class="hljs-built_in">ord</span>(ch), <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> s[rt]<br>    <span class="hljs-keyword">if</span> ad &lt;= (l + r) // <span class="hljs-number">2</span>:<br>        s[rt] = modify(l, (l + r) // <span class="hljs-number">2</span>, rt * <span class="hljs-number">2</span>, ad, ch) + s[rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        s[rt] = s[rt * <span class="hljs-number">2</span>] + modify((l + r) // <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, r, rt * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, ad, ch)<br>    <span class="hljs-keyword">return</span> s[rt]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = <span class="hljs-built_in">input</span>()<br>a = <span class="hljs-string">&quot;!&quot;</span> + a<br>bs1.append(<span class="hljs-number">1</span>)<br>bs2.append(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    bs1.append(bs1[i]*bas%mod1)<br>    bs2.append(bs2[i]*bas%mod2)<br>s = [<span class="hljs-literal">None</span>] * (<span class="hljs-number">4</span> * (n+<span class="hljs-number">5</span>))<br>build(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>)<br><br>q = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    ls=<span class="hljs-built_in">input</span>().split()<br>    opt = ls[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> opt == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        ad = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        ch = ls[<span class="hljs-number">2</span>]<br>        modify(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, <span class="hljs-built_in">int</span>(ad), ch)<br>    <span class="hljs-keyword">else</span>:<br>        l1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">1</span>])<br>        r1 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">2</span>])<br>        l2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">3</span>])<br>        r2 = <span class="hljs-built_in">int</span>(ls[<span class="hljs-number">4</span>])<br>        x = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l1, r1)<br>        y = query(<span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>, l2, r2)<br>        <span class="hljs-keyword">if</span> x == y:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="可持久化线段树"><a href="#可持久化线段树" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122146448.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122146448.png" alt="image-20240526122146448"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122158524.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122158524.png" alt="image-20240526122158524"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122211004.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122211004.png" alt="image-20240526122211004"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122219620.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122219620.png" alt="image-20240526122219620"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122228761.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122228761.png" alt="image-20240526122228761"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122248198.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122248198.png" alt="image-20240526122248198"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122258158.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122258158.png" alt="image-20240526122258158"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122329330.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122329330.png" alt="image-20240526122329330"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122339224.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122339224.png" alt="image-20240526122339224"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122353739.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122353739.png" alt="image-20240526122353739"></p><h4 id="可持久化线段树-1"><a href="#可持久化线段树-1" class="headerlink" title="可持久化线段树"></a>可持久化线段树</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> v, ls, rs;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SEGTREE</span> &#123;</span><br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> root[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>    NODE node[MAXN &lt;&lt; <span class="hljs-number">5</span>];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">SEGTREE::update</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-type">_t</span>, <span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        t = ++cnt;<br>        node[t].v = node[<span class="hljs-type">_t</span>].v;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == r) &#123;<br>        node[t].v += k;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (pos &lt;= mid) &#123;<br>        node[t].rs = node[<span class="hljs-type">_t</span>].rs;<br>        update(node[<span class="hljs-type">_t</span>].ls, node[t].ls, l, mid, pos, k);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[t].ls = node[<span class="hljs-type">_t</span>].ls;<br>        update(node[<span class="hljs-type">_t</span>]).rs, node[t].rs, mid + <span class="hljs-number">1</span>, r, pos, k);<br>    &#125;<br>    node[t].v = node[node[t].ls].v + node[node[t].rs].v;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">SEGTREE::getV</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> _l, <span class="hljs-type">int</span> _r, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l == _l &amp;&amp; r == _r) &#123;<br>        <span class="hljs-keyword">return</span> node[t].v;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (_l + _r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (r &lt;= mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, r);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l &gt; mid) &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, l, r);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> getV(node[t].ls, _l, mid, l, mid)<br>            + getV(node[t].rs, mid + <span class="hljs-number">1</span>, _r, mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="模板题——区间第k小"><a href="#模板题——区间第k小" class="headerlink" title="模板题——区间第k小"></a>模板题——<a href="https://www.lanqiao.cn/problems/1132/learning/">区间第k小</a></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> lc(x) tr[x].l</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rc(x) tr[x].r</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">6</span>;<br><span class="hljs-type">int</span> n,m,a[N],b[N];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br> <span class="hljs-type">int</span> l,r,s;<span class="hljs-comment">//左右儿子，该节点在值域中的个数</span><br>&#125;tr[N*<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> idx,root[N];<br><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;x,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span><br>&#123;<br>    x=++idx;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> ;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    build(lc(x),l,mid);<br>    build(rc(x),mid+<span class="hljs-number">1</span>,r);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> &amp;y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> v)</span><br>&#123;<br>    y=++idx;<br>    tr[y]=tr[x];<br>    tr[y].s++;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(v&lt;=mid)<br>        update(lc(x),lc(y),l,mid,v);<br>    <span class="hljs-keyword">else</span><br>        update(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,v);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> k)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> l;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> s=tr[lc(y)].s-tr[lc(x)].s;<br>    <span class="hljs-keyword">if</span>(k&lt;=s)<br>        <span class="hljs-keyword">return</span> query(lc(x),lc(y),l,mid,k);<br>    <span class="hljs-keyword">else</span> <br>        <span class="hljs-keyword">return</span> query(rc(x),rc(y),mid+<span class="hljs-number">1</span>,r,k-s);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    ios::sync_with_stdio(<span class="hljs-number">0</span>),<span class="hljs-built_in">cin</span>.tie(<span class="hljs-number">0</span>),<span class="hljs-built_in">cout</span>.tie(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;a[i];<br>        b[i]=a[i];<br>    &#125;<br>    sort(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n);<br>    <span class="hljs-type">int</span> bn=unique(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+n)-b<span class="hljs-number">-1</span>;<br>    build(root[<span class="hljs-number">0</span>],<span class="hljs-number">1</span>,bn);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> id=lower_bound(b+<span class="hljs-number">1</span>,b+<span class="hljs-number">1</span>+bn,a[i])-b;<br>        update(root[i<span class="hljs-number">-1</span>],root[i],<span class="hljs-number">1</span>,bn,id);<br>    &#125;<br>    <span class="hljs-keyword">while</span>(m--)<br>    &#123;<br>        <span class="hljs-type">int</span> l,r,k;<br>        <span class="hljs-built_in">cin</span>&gt;&gt;l&gt;&gt;r&gt;&gt;k;<br>        <span class="hljs-type">int</span> id=query(root[l<span class="hljs-number">-1</span>],root[r],<span class="hljs-number">1</span>,bn,k);<br>        <span class="hljs-built_in">cout</span>&lt;&lt;b[id]&lt;&lt;<span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="扫描线与二维数点"><a href="#扫描线与二维数点" class="headerlink" title="扫描线与二维数点"></a>扫描线与二维数点</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122721288.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122721288.png" alt="image-20240526122721288"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122730203.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122730203.png" alt="image-20240526122730203"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122740484.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122740484.png" alt="image-20240526122740484"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122748677.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122748677.png" alt="image-20240526122748677"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122757899.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122757899.png" alt="image-20240526122757899"></p><h4 id="二维数点"><a href="#二维数点" class="headerlink" title="二维数点"></a>二维数点</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122820094.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122820094.png" alt="image-20240526122820094"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122808099.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122808099.png" alt="image-20240526122808099"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122858486.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122858486.png" alt="image-20240526122858486"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> maxn 110000</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&#123;<br>    <span class="hljs-type">int</span> x,y;<br>&#125;point[maxn];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rect</span>&#123;<br>    <span class="hljs-type">int</span> p1,p2,q1,q2,id;<br>&#125;rect[maxn];<br><span class="hljs-type">int</span> n,m,ans[maxn];<br><span class="hljs-type">int</span> len[maxn],cnt;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(<span class="hljs-type">const</span> Point &amp;a,<span class="hljs-type">const</span> Point &amp;b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a.x &lt; b.x;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp1</span><span class="hljs-params">(<span class="hljs-type">const</span> Rect &amp;a,<span class="hljs-type">const</span> Rect &amp;b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a.p1&lt;b.p1;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp2</span><span class="hljs-params">(<span class="hljs-type">const</span> Rect &amp;a,<span class="hljs-type">const</span> Rect &amp;b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a.q1&lt;b.q1;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br>    <span class="hljs-type">int</span> sum;<br>&#125;tree[maxn&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pushup</span><span class="hljs-params">(<span class="hljs-type">int</span> rt)</span></span>&#123;<br>    tree[rt].sum=tree[rt&lt;&lt;<span class="hljs-number">1</span>].sum+tree[rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>].sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> x)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(l==r)&#123;<br>        <span class="hljs-keyword">if</span>(l==x)tree[rt].sum+=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(x&lt;=mid)<span class="hljs-built_in">add</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,x);<br>    <span class="hljs-keyword">if</span>(x&gt;mid)<span class="hljs-built_in">add</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,x);<br>    <span class="hljs-built_in">pushup</span>(rt);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y)&#123;<br>        <span class="hljs-keyword">return</span> tree[rt].sum;<br>    &#125;<br>    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span>(x&lt;=mid)ans+=<span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,x,y);<br>    <span class="hljs-keyword">if</span>(y&gt;mid)ans+=<span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,x,y);<br>    <span class="hljs-built_in">pushup</span>(rt);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;point[i].x,&amp;point[i].y);<br>        len[++cnt]=point[i].x,len[++cnt]=point[i].y;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        <span class="hljs-type">int</span> a,b,c,d;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c,&amp;d);<br>        rect[i]=&#123;a,b,c,d,i&#125;;<br>        len[++cnt]=a;len[++cnt]=b;len[++cnt]=c;len[++cnt]=d;<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> tot=<span class="hljs-built_in">unique</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>)-len<span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        point[i].x=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,point[i].x)-len;<br>        point[i].y=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,point[i].y)-len;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        rect[i].p1=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].p1)-len;<br>        rect[i].q1=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].q1)-len;<br>        rect[i].p2=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].p2)-len;<br>        rect[i].q1=<span class="hljs-built_in">lower_bound</span>(len+<span class="hljs-number">1</span>,len+cnt+<span class="hljs-number">1</span>,rect[i].q2)-len;<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(point+<span class="hljs-number">1</span>,point+n+<span class="hljs-number">1</span>,cmp);<br>    <span class="hljs-built_in">sort</span>(rect+<span class="hljs-number">1</span>,rect+m+<span class="hljs-number">1</span>,cmp1);<br>    <span class="hljs-type">int</span> pos=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        <span class="hljs-keyword">while</span>(rect[i].p1&gt;point[pos+<span class="hljs-number">1</span>].x&amp;&amp;pos&lt;=n)&#123;<br>            pos+=<span class="hljs-number">1</span>;<br>            <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,point[i].y);<br>        &#125;<br>        ans[rect[i].id]-=<span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,rect[i].p2,rect[i].q2);<br>    &#125;<br>    <span class="hljs-built_in">memset</span>(tree,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(tree));<br>    <span class="hljs-built_in">sort</span>(rect+<span class="hljs-number">1</span>,rect+m+<span class="hljs-number">1</span>,cmp);<br>    pos=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>        <span class="hljs-keyword">while</span>(rect[i].q1&gt;=point[pos+<span class="hljs-number">1</span>].x&amp;&amp;pos&lt;=n)&#123;<br>            pos+=<span class="hljs-number">1</span>;<br>            <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,pos[i].y);<br>        &#125;<br>        ans[rect[i].id]+=<span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,rect[i].p2,rect[i].q2);<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,ans[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="平衡树-Splay"><a href="#平衡树-Splay" class="headerlink" title="平衡树-Splay"></a>平衡树-Splay</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122034271.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122034271.png" alt="image-20240526122034271"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122046309.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122046309.png" alt="image-20240526122046309"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122055269.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122055269.png" alt="image-20240526122055269"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122104347.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526122104347.png" alt="image-20240526122104347"></p><h3 id="平衡树-FHQ-Treap"><a href="#平衡树-FHQ-Treap" class="headerlink" title="平衡树-FHQ_Treap"></a>平衡树-FHQ_Treap</h3><h4 id="无旋Treap"><a href="#无旋Treap" class="headerlink" title="无旋Treap"></a>无旋Treap</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115339167.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115339167.png" alt="image-20240526115339167"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115350766.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115350766.png" alt="image-20240526115350766"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115359404.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115359404.png" alt="image-20240526115359404"></p><h4 id="无旋Treap的结构"><a href="#无旋Treap的结构" class="headerlink" title="无旋Treap的结构"></a>无旋Treap的结构</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115559180.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115559180.png" alt="image-20240526115559180"></p><h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115614042.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115614042.png" alt="image-20240526115614042"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115623744.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115623744.png" alt="image-20240526115623744"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115634558.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115634558.png" alt="image-20240526115634558"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115644061.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115644061.png" alt="image-20240526115644061"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115650541.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115650541.png" alt="image-20240526115650541"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115656903.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115656903.png" alt="image-20240526115656903"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115703005.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115703005.png" alt="image-20240526115703005"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115710056.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115710056.png" alt="image-20240526115710056"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115715945.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115715945.png" alt="image-20240526115715945"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115721051.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115721051.png" alt="image-20240526115721051"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115727235.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115727235.png" alt="image-20240526115727235"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115734944.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115734944.png" alt="image-20240526115734944"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115740418.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115740418.png" alt="image-20240526115740418"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115746149.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115746149.png" alt="image-20240526115746149"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115751158.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115751158.png" alt="image-20240526115751158"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115755059.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115755059.png" alt="image-20240526115755059"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115800730.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115800730.png" alt="image-20240526115800730"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115804490.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115804490.png" alt="image-20240526115804490"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115808715.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115808715.png" alt="image-20240526115808715"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115813454.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115813454.png" alt="image-20240526115813454"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115817884.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115817884.png" alt="image-20240526115817884"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115823342.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115823342.png" alt="image-20240526115823342"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115830400.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115830400.png" alt="image-20240526115830400"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115835300.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115835300.png" alt="image-20240526115835300"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115839426.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115839426.png" alt="image-20240526115839426"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115847061.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115847061.png" alt="image-20240526115847061"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115851600.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115851600.png" alt="image-20240526115851600"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115858903.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115858903.png" alt="image-20240526115858903"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115904405.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115904405.png" alt="image-20240526115904405"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115910595.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115910595.png" alt="image-20240526115910595"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115916421.png" alt="image-20240526115916421" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115916421.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115916421.png" alt="image-20240526115916421"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115926736.png" alt="image-20240526115926736" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115926736.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115926736.png" alt="image-20240526115926736"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115936852.png" alt="image-20240526115936852" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115936852.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115936852.png" alt="image-20240526115936852"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115948947.png" alt="image-20240526115948947" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115948947.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115948947.png" alt="image-20240526115948947"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115959511.png" alt="image-20240526115959511" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115959511.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526115959511.png" alt="image-20240526115959511"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120022163.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120022163.png" alt="image-20240526120022163"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120026713.png" alt="image-20240526120026713" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120026713.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120026713.png" alt="image-20240526120026713"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120036416.png" alt="image-20240526120036416" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120036416.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120036416.png" alt="image-20240526120036416"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120053497.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120053497.png" alt="image-20240526120053497"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120100194.png" alt="image-20240526120100194" class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120100194.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120100194.png" alt="image-20240526120100194"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526120109696.png" alt="image-20240526120109696"></p><h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NODE</span> &#123;</span><br>    <span class="hljs-type">int</span> val;<br>    <span class="hljs-type">int</span> cnt;<br>    <span class="hljs-type">int</span> rev;<br>    <span class="hljs-type">int</span> prio;<br>    <span class="hljs-type">int</span> size;<br>    <span class="hljs-type">int</span> ch[<span class="hljs-number">2</span>];<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FHQTREAP</span> &#123;</span><br>    <span class="hljs-type">int</span> root;<br>    <span class="hljs-type">int</span> size;<br>    NODE node[MAXN];<br>&#125;<br><br><span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_val</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-keyword">if</span> (node[t].val &lt;= val) &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">1</span>], val);<br>        node[t].ch[<span class="hljs-number">1</span>] = tmp.first;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, tmp.second&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">auto</span> tmp = split_by_val(node[t].ch[<span class="hljs-number">0</span>], val);<br>        node[t].ch[<span class="hljs-number">0</span>] = tmp.second;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;tmp.first, t&#125;;<br>    &#125;<br>&#125;<br><br>tuple&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title function_">split_by_rank</span><span class="hljs-params">(<span class="hljs-type">int</span> t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!t) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br>    &#125;<br>    check_rev(t);<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    <span class="hljs-keyword">if</span> (k &lt;= node[node[t].ch[<span class="hljs-number">0</span>]].size()) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">0</span>], k);<br>        node[t].ch[<span class="hljs-number">0</span>] = rt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, mt, t&#125;;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k &gt; node[node[t]].ch[<span class="hljs-number">0</span>].size() + node[t].cnt) &#123;<br>        tie(lt, mt, rt) = split_by_rank(node[t].ch[<span class="hljs-number">1</span>], k - node[node[t].ch[<span class="hljs-number">0</span>]].size() - node[t].cnt);<br>        node[t].ch[<span class="hljs-number">1</span>] = lt;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;t, mt, rt&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = node[t].ch[<span class="hljs-number">0</span>];<br>        rt = node[t].ch[<span class="hljs-number">1</span>];<br>        check_rev(lt);<br>        check_rev(rt);<br>        node[t].ch[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        upda[t].ch[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>        update_size(t);<br>        <span class="hljs-keyword">return</span> &#123;lt, t, rt&#125;;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> lt, <span class="hljs-type">int</span> rt)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!lt) &#123;<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!rt) &#123;<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125;<br>    check_rev(lt);<br>    check_rev(rt);<br>    <span class="hljs-keyword">if</span> (node[lt].prio &lt; node[rt].prio) &#123;<br>        node[lt].ch[<span class="hljs-number">1</span>] = merge(node[lt].ch[<span class="hljs-number">1</span>], rt);<br>        update_size(lt);<br>        <span class="hljs-keyword">return</span> lt;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[rt].ch[<span class="hljs-number">0</span>] = merge(lt, node[rt].ch[<span class="hljs-number">0</span>]);<br>        update_size(rt);<br>        <span class="hljs-keyword">return</span> rt;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (!mt) &#123;<br>        mt = new_node(val);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        node[mt].cnt ++;<br>        update_size(mt);<br>    &#125;<br>    root = merge(merge(lt, mt), rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">del</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, rt) = split_by_val(root, val);<br>    tie(lt, mt) = split_by_val(lt, val - <span class="hljs-number">1</span>);<br>    unode[mt].cnt --;<br>    update_size(mt);<br>    <span class="hljs-keyword">if</span> (node[mt].cnt == <span class="hljs-number">0</span>) &#123;<br>        clear(mt);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lt = merge(lt, mt);<br>    &#125;<br>    root = merge(lt, rt);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-type">int</span> t1, t2, t3, t4, t5;<br>    tie(t1, t2, t3) = split_by_rank(root, l - <span class="hljs-number">1</span>);<br>    tie(t3, t4, t5) = split_by_ranl(t3, r - l + <span class="hljs-number">2</span>);<br>    node[t3].rev = <span class="hljs-number">1</span>;<br>    root = merge(merge(merge(merge(t1, t2), t3), t4), t5);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">check_rev</span><span class="hljs-params">(<span class="hljs-type">int</span> t)</span> &#123;<br>    <span class="hljs-keyword">if</span> (node[t].rev) &#123;<br>        swap(node[t].ch[<span class="hljs-number">0</span>], node[t].ch[<span class="hljs-number">1</span>]);<br>        node[node[t].ch[<span class="hljs-number">0</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[node[t].ch[<span class="hljs-number">1</span>]].rev ^= <span class="hljs-number">1</span>;<br>        node[t].rev = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">rank</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = node[tmp.first].size + <span class="hljs-number">1</span>;<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">kth</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;t, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-type">int</span> lt, mt, rt;<br>    tie(lt, mt, rt) = split_by_rank(t, k);<br>    <span class="hljs-type">int</span> val = node[mt].val;<br>    t = merge(merge(lt, mt), rt);<br>    <span class="hljs-keyword">return</span> val;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">pre</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_cal(root, val - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> k = kth(tmp.first, node[tmp.first].size);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">nxt</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">auto</span> tmp = split_by_val(root, val);<br>    <span class="hljs-type">int</span> k = kth(tmp.second, <span class="hljs-number">1</span>);<br>    root = merge(tmp.first, tmp.second);<br>    <span class="hljs-keyword">return</span> k;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="单调栈"><a href="#单调栈" class="headerlink" title="单调栈"></a>单调栈</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114259208.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114259208.png" alt="image-20240526114259208"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114322817.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526114322817.png" alt="image-20240526114322817"></p><h4 id="模板题——百亿富翁"><a href="#模板题——百亿富翁" class="headerlink" title="模板题——百亿富翁"></a>模板题——<a href="https://www.lanqiao.cn/problems/1142/learning/">百亿富翁</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">right_bigger</span>():<br>  ans=[-<span class="hljs-number">1</span>]*n<br>  stack=[]<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> h[stack[-<span class="hljs-number">1</span>]]&lt;h[i]:<br>      ans[stack[-<span class="hljs-number">1</span>]]=i+<span class="hljs-number">1</span><br>      stack.pop()<br>    stack.append(i)<br>  <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">left_bigger</span>():<br>  ans=[-<span class="hljs-number">1</span>]*n<br>  stack=[]<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> h[stack[-<span class="hljs-number">1</span>]]&lt;h[i]:<br>      ans[stack[-<span class="hljs-number">1</span>]]=i+<span class="hljs-number">1</span><br>      stack.pop()<br>    stack.append(i)<br>  <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">import</span> sys<br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>h=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><span class="hljs-built_in">print</span>(*left_bigger())<br><span class="hljs-built_in">print</span>(*right_bigger())<br></code></pre></td></tr></table></figure><h2 id="分块"><a href="#分块" class="headerlink" title="分块"></a>分块</h2><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="KMP-字符串哈希"><a href="#KMP-字符串哈希" class="headerlink" title="KMP&amp;字符串哈希"></a>KMP&amp;字符串哈希</h2><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100046139.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100046139.png" alt="image-20240526100046139"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100057701.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100057701.png" alt="image-20240526100057701"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100110562.png" alt="image-20240526100110562"></p><h3 id="KMP算法"><a href="#KMP算法" class="headerlink" title="KMP算法"></a>KMP算法</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100136410.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100136410.png" alt="image-20240526100136410"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100148837.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100148837.png" alt="image-20240526100148837"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100157890.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100157890.png" alt="image-20240526100157890"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100211778.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100211778.png" alt="image-20240526100211778"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100221657.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100221657.png" alt="image-20240526100221657"></p><h4 id="模板题——斤斤计较的小Z"><a href="#模板题——斤斤计较的小Z" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py">Next = [<span class="hljs-number">0</span>] * <span class="hljs-number">1000010</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_next</span>(<span class="hljs-params">T</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(T)):<br>        j = Next[i]<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> T[i] != T[j]:<br>            j = Next[j]<br>        <span class="hljs-keyword">if</span> T[i] == T[j]:<br>            Next[i + <span class="hljs-number">1</span>] = j + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            Next[i + <span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">KMP</span>(<span class="hljs-params">s,t</span>):<br>    get_next(t)<br>    ans = <span class="hljs-number">0</span><br>    j = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>        <span class="hljs-keyword">while</span> j &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> s[i] != t[j]:<br>            j =  Next[j]<br>        <span class="hljs-keyword">if</span> s[i] == t[j]:<br>            j += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> j == <span class="hljs-built_in">len</span>(t):<br>            ans += <span class="hljs-number">1</span><br>            j =  Next[j]<br>    <span class="hljs-keyword">return</span> ans<br>t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br><span class="hljs-built_in">print</span>(KMP(s,t))<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-built_in">print</span>((<span class="hljs-keyword">lambda</span> s: <span class="hljs-built_in">input</span>().count(s))(<span class="hljs-built_in">input</span>()))<br></code></pre></td></tr></table></figure><h3 id="字符串哈希"><a href="#字符串哈希" class="headerlink" title="字符串哈希"></a>字符串哈希</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100452881.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100452881.png" alt="image-20240526100452881"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100509262.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526100509262.png" alt="image-20240526100509262"></p><h4 id="模板题——斤斤计较的小Z-1"><a href="#模板题——斤斤计较的小Z-1" class="headerlink" title="模板题——斤斤计较的小Z"></a>模板题——<a href="https://www.lanqiao.cn/problems/2047/learning">斤斤计较的小Z</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py">t = <span class="hljs-built_in">input</span>()<br>s = <span class="hljs-built_in">input</span>()<br>m,n = <span class="hljs-built_in">len</span>(t), <span class="hljs-built_in">len</span>(s)<br>B = <span class="hljs-number">26</span><br>mod = <span class="hljs-number">1000000007</span><br><span class="hljs-built_in">hash</span> = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">hash</span>[i] = <span class="hljs-built_in">hash</span>[i - <span class="hljs-number">1</span>] * B + <span class="hljs-built_in">ord</span>(s[i - <span class="hljs-number">1</span>]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    <span class="hljs-built_in">hash</span>[i] %= mod<br><br>numT = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> t:<br>    numT = numT * B + <span class="hljs-built_in">ord</span>(c) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>)<br>    numT %= mod<br>    <br>p = (B ** m) % mod<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n +<span class="hljs-number">1</span>):<br>    r = l + m - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> r &gt; n:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">hash</span>[r] - <span class="hljs-built_in">hash</span>[l - <span class="hljs-number">1</span>] * p % mod + mod) % mod == numT:<br>        ans += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="Manacher"><a href="#Manacher" class="headerlink" title="Manacher"></a>Manacher</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101919972.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101919972.png" alt="image-20240526101919972"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101929004.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101929004.png" alt="image-20240526101929004"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101944468.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101944468.png" alt="image-20240526101944468"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101953533.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526101953533.png" alt="image-20240526101953533"></p><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102101694.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526102101694.png" alt="image-20240526102101694"></p><h2 id="字典树基础"><a href="#字典树基础" class="headerlink" title="字典树基础"></a>字典树基础</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123731966.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123731966.png" alt="image-20240526123731966"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123744464.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123744464.png" alt="image-20240526123744464"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123847593.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526123847593.png" alt="image-20240526123847593"></p><h4 id="模板题——前缀判定"><a href="#模板题——前缀判定" class="headerlink" title="模板题——前缀判定"></a>模板题——<a href="https://www.lanqiao.cn/problems/1204/learning">前缀判定</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>():<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    self.nodes = &#123;&#125;<br>  <br>  <span class="hljs-comment">#插入</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self,s</span>):<br>    curr = self<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s:<br>      <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> curr.nodes.keys():<br>        curr.nodes[i] = TreeNode()<br>      <span class="hljs-comment">#往下走</span><br>      curr = curr.nodes[i]<br>  <br>  <span class="hljs-comment">#检查是否为前缀</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">pre</span>(<span class="hljs-params">self,s</span>):<br>    curr = self<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s:<br>      <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> curr.nodes.keys():<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>      curr = curr.nodes[i]<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><br>n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>tree = TreeNode()<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  s = <span class="hljs-built_in">input</span>()<br>  tree.insert(s)<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  t = <span class="hljs-built_in">input</span>()<br>  <span class="hljs-keyword">if</span> tree.pre(t):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Y&#x27;</span>)<br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;N&#x27;</span>)<br></code></pre></td></tr></table></figure><h4 id="模板题——依依的瓶中信"><a href="#模板题——依依的瓶中信" class="headerlink" title="模板题——依依的瓶中信"></a>模板题——<a href="https://www.lanqiao.cn/problems/3751/learning">依依的瓶中信</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">多个字符串，求公共前缀长度问题，用字典树</span><br><span class="hljs-string">同一个字符串不可与自身比较：构建树的时候打标记，查找的时候清除标记，若标记为0，则说明当前在于自己比较，直接返回。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>():<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    self.nodes = &#123;&#125;          <span class="hljs-comment">#用于存放以当前点为根的子树</span><br>    self.value = <span class="hljs-number">1</span>           <span class="hljs-comment">#每可子树的权值，初始为1</span><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self,s</span>):<span class="hljs-comment">#建树</span><br>    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>      <span class="hljs-keyword">if</span> c <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.nodes.keys():     <span class="hljs-comment">#若不存在，则添加该子树</span><br>        self.nodes[c] = TreeNode()<br>      <span class="hljs-keyword">else</span>:<br>        self.nodes[c].value +=<span class="hljs-number">1</span>       <span class="hljs-comment">#若存在，则该子树的权值+1，</span><br>      self = self.nodes[c]          <span class="hljs-comment">#进入下一层</span><br><span class="hljs-comment">#&#123;1,a:&#123;2,b:&#123;2,c:&#123;1,&#125;&#125;&#125;,b:&#123;1,c:&#123;1&#125;&#125;&#125;</span><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">commen_pre</span>(<span class="hljs-params">self,t</span>):  <span class="hljs-comment">#查找</span><br>    cnt = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> t:           <span class="hljs-comment">#该题不用判断c是否存在，因为每个点都存在</span><br>      <span class="hljs-keyword">if</span> self.nodes[c].value -<span class="hljs-number">1</span> == <span class="hljs-number">0</span>:    <span class="hljs-comment">#如果走到自己独有的节点上时，就返回其与其它子串的公共前缀长</span><br>        <span class="hljs-keyword">return</span> cnt<br>      cnt += <span class="hljs-number">1</span><br>      self = self.nodes[c]   <span class="hljs-comment">#进入下一层</span><br>    <span class="hljs-keyword">return</span> cnt    <span class="hljs-comment">#若自己本身就是某个串的前缀，则返回自己的长度</span><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>S =[]<br>tree = TreeNode() <span class="hljs-comment">#实例化根节点</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):  <span class="hljs-comment">#建树</span><br>  s = <span class="hljs-built_in">input</span>()<br>  S.append(s)<br>  tree.insert(s)<br><br><span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> S:      <span class="hljs-comment">#查找、统计</span><br>  <span class="hljs-built_in">print</span>(tree.commen_pre(s))<br></code></pre></td></tr></table></figure><h2 id="01tire"><a href="#01tire" class="headerlink" title="01tire"></a>01tire</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124139861.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124139861.png" alt="image-20240526124139861"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124148215.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124148215.png" alt="image-20240526124148215"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124153033.png" alt="image-20240526124153033"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124201442.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124201442.png" alt="image-20240526124201442"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124207236.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124207236.png" alt="image-20240526124207236"><br class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124211551.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124211551.png" alt="image-20240526124211551"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs py">maxn = <span class="hljs-number">210000</span><br>ch = [[<span class="hljs-number">0</span>]*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(maxn)]<br>val = [<span class="hljs-number">0</span>]*maxn<br>n, ans, tot = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">global</span> tot<br>    now = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">31</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        pos = ((x &gt;&gt; j) &amp; <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> ch[now][pos] == <span class="hljs-number">0</span>:<br>            tot += <span class="hljs-number">1</span><br>            ch[now][pos] = tot<br>        now = ch[now][pos]<br>    val[now] = x<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>    now = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">31</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        pos = ((x &gt;&gt; j) &amp; <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> ch[now][pos ^ <span class="hljs-number">1</span>] != <span class="hljs-number">0</span>:<br>            now = ch[now][pos ^ <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            now = ch[now][pos]<br>    <span class="hljs-keyword">return</span> val[now]<br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    insert(x)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    ans = <span class="hljs-built_in">max</span>(ans, query(val[i]))<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><h2 id="基础-2"><a href="#基础-2" class="headerlink" title="基础"></a>基础</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124949289.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124949289.png" alt="image-20240526124949289"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124958064.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526124958064.png" alt="image-20240526124958064"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125006396.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125006396.png" alt="image-20240526125006396"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125013800.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125013800.png" alt="image-20240526125013800"></p><h3 id="DFS-BFS"><a href="#DFS-BFS" class="headerlink" title="DFS&amp;BFS"></a>DFS&amp;BFS</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125134400.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125134400.png" alt="image-20240526125134400"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125142643.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125142643.png" alt="image-20240526125142643"></p><h4 id="DFS模板题——帮派弟位"><a href="#DFS模板题——帮派弟位" class="headerlink" title="DFS模板题——帮派弟位"></a>DFS模板题——<a href="https://www.lanqiao.cn/problems/3891/learning">帮派弟位</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py">n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>G=[[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<span class="hljs-comment">#bfs和图的结合</span><br>rudu=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>) <span class="hljs-comment">#计数，根结点是没有rudu的</span><br>biaoji=[<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-built_in">sum</span>=[[<span class="hljs-number">0</span>,i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-comment">#注意是二元组，记录子数数量，是先按数量排，再按序号排.然后是包括他自己的，所以初始化为1</span><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>    l,r=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()) <span class="hljs-comment">#表示序号为l的人附属于r</span><br>    G[r].append(l) <span class="hljs-comment">#表示r下面有l 可以看出r和谁相邻</span><br>    rudu[l]+=<span class="hljs-number">1</span> <span class="hljs-comment">#表明l头上是有父亲的</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>): <span class="hljs-comment">#找出谁的rudu为0，即找出谁是根结点</span><br>    <span class="hljs-keyword">if</span> rudu[i]==<span class="hljs-number">0</span>:<br>        root=i<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u</span>):<br>    biaoji[u]=<span class="hljs-number">1</span> <span class="hljs-comment">#打上标记</span><br>    <span class="hljs-built_in">sum</span>[u][<span class="hljs-number">0</span>]=-<span class="hljs-number">1</span><span class="hljs-comment">#为什么这里设置成-1，而不是1呢，因为题目要求如果手下相同的，序号小的排在前面，设置成-1就可以这样了。！</span><br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]: <span class="hljs-comment">#遍历和u相邻的每个节点</span><br>        <span class="hljs-keyword">if</span> biaoji[v]==<span class="hljs-number">0</span>: <span class="hljs-comment">#如果没有打上标记</span><br>            dfs(v)<span class="hljs-comment">#遍历和u相邻的节点，就是遍历子节点</span><br>            <span class="hljs-built_in">sum</span>[u][<span class="hljs-number">0</span>]+=<span class="hljs-built_in">sum</span>[v][<span class="hljs-number">0</span>] <span class="hljs-comment">#遍历v子节点的同时，可以把v下的子节点也加上去</span><br><br>dfs(root)<br><span class="hljs-built_in">sum</span>.sort()<br><span class="hljs-keyword">for</span> i,(x,y) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">sum</span>,start=<span class="hljs-number">1</span>):<span class="hljs-comment">#输出小明的排列</span><br>    <span class="hljs-keyword">if</span> y==m:<br>        <span class="hljs-built_in">print</span>(i)<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125335820.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125335820.png" alt="image-20240526125335820"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125344854.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125344854.png" alt="image-20240526125344854"></p><h4 id="BFS模板题——最少操作数"><a href="#BFS模板题——最少操作数" class="headerlink" title="BFS模板题——最少操作数"></a>BFS模板题——<a href="https://www.lanqiao.cn/problems/1509/learning">最少操作数</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bfs</span>(<span class="hljs-params">s,t</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    :param s: 起点</span><br><span class="hljs-string">    :param t: 终点</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    dis = [-<span class="hljs-number">1</span>]*<span class="hljs-number">100001</span><br>    queue = deque()<br>    <span class="hljs-comment">#1、将起点塞入到队列中，打上标记</span><br>    queue.append(s)<br>    dis[s] = <span class="hljs-number">0</span><br>    <span class="hljs-comment">#2、当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(queue) != <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># 2.1 取出队首元素u</span><br>        u = queue.popleft()<br>        <span class="hljs-comment">#2.2 判断u是否为终点</span><br>        <span class="hljs-keyword">if</span> u == t:<br>            <span class="hljs-keyword">return</span> dis[u]<br>        <span class="hljs-comment">#2.3 将u相连的所有点v，只要v未标记，则入队列</span><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> [u-<span class="hljs-number">1</span>,u+<span class="hljs-number">1</span>,u*<span class="hljs-number">2</span>]:<br>            <span class="hljs-comment">#特判：未越界、未标记</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span>&lt;=v&lt;=<span class="hljs-number">100000</span> <span class="hljs-keyword">and</span> dis[v] == -<span class="hljs-number">1</span>:<br>                queue.append(v)<br>                dis[v] = dis[u] + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>n,k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br><span class="hljs-built_in">print</span>(bfs(n,k))<br></code></pre></td></tr></table></figure><h4 id="BFS模板题——混境之地4"><a href="#BFS模板题——混境之地4" class="headerlink" title="BFS模板题——混境之地4"></a>BFS模板题——<a href="https://www.lanqiao.cn/problems/3819/learning">混境之地4</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment">#  3819 混境之地</span><br><span class="hljs-comment"># BFS遍历  经典题目</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque  <span class="hljs-comment"># 使用队列</span><br>INF = <span class="hljs-number">0x3f3f3f3f</span>   <span class="hljs-comment"># 对应的十进制为：1061109567，一般的数据小于10^9，因此可将其作为一个边界</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">BFS</span>(<span class="hljs-params">x, y, dist</span>):<br>    <span class="hljs-comment"># 从(x, y)到每个点的最短时间</span><br>    queue = deque()<br>    vis = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    <span class="hljs-comment"># 1、将起点加入队列</span><br>    queue.append([x, y])<br>    dist[x][y] = <span class="hljs-number">0</span>  <span class="hljs-comment"># 更新距离</span><br>    vis[x][y] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 打标记</span><br>    <span class="hljs-comment"># 2、当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(queue) != <span class="hljs-number">0</span>:<br>        x, y = queue.popleft()<br>        <span class="hljs-comment"># 对于每个相邻的点，都进行一次判断</span><br>        <span class="hljs-keyword">for</span> deltax, deltay <span class="hljs-keyword">in</span> [(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)]:<br>            xx, yy = x + deltax, y + deltay<br>            <span class="hljs-comment"># 未越界、未标记、非障碍物</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= xx &lt; n  <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= yy &lt; m <span class="hljs-keyword">and</span> g[xx][yy] != <span class="hljs-string">&quot;#&quot;</span> <span class="hljs-keyword">and</span> vis[xx][yy] == <span class="hljs-number">0</span>:<br>                queue.append([xx, yy])<br>                dist[xx][yy] = dist[x][y] + <span class="hljs-number">1</span><br>                vis[xx][yy] = <span class="hljs-number">1</span><br><br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>A, B, C, D = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>A, B, C, D = A-<span class="hljs-number">1</span>, B-<span class="hljs-number">1</span>, C-<span class="hljs-number">1</span>, D-<span class="hljs-number">1</span><br><span class="hljs-comment"># 输入图</span><br>g = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>E = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-comment"># dist1[i][j]表示起点到(i, j)的最短时间</span><br>dist1 = [[INF] * m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]  <span class="hljs-comment"># INF无穷大</span><br><span class="hljs-comment"># dist2[i][j]表示终点到(i, j)的最短时间</span><br>dist2 = [[INF] * m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>BFS(A, B, dist1)  <span class="hljs-comment"># 起点做一遍</span><br>BFS(C, D, dist2)  <span class="hljs-comment"># 终点做一遍</span><br><span class="hljs-comment"># 判断能否直接走到终点</span><br>res = dist1[C][D]<br><span class="hljs-keyword">if</span> res &lt;= E:<br>    <span class="hljs-built_in">print</span>(res)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># 枚举所有的圣泉</span><br>    res = INF<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-comment"># 能量E不可小于0，可以等于0</span><br>            <span class="hljs-keyword">if</span> g[i][j] == <span class="hljs-string">&#x27;V&#x27;</span> <span class="hljs-keyword">and</span> dist1[i][j] &lt;= E:  <span class="hljs-comment"># 不需要经过多个圣泉</span><br>                res = <span class="hljs-built_in">min</span>(dist1[i][j] + dist2[i][j], res)<br>    <span class="hljs-comment"># 如果走不到圣泉</span><br>    <span class="hljs-keyword">if</span> res == INF:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># 初始能量为E，总共距离为res，相当于，后面的res-E需要花费两倍时间，因为需要等待能量恢复</span><br>        <span class="hljs-built_in">print</span>((res - E) * <span class="hljs-number">2</span> + E)<br></code></pre></td></tr></table></figure><h2 id="拓扑排序"><a href="#拓扑排序" class="headerlink" title="拓扑排序"></a>拓扑排序</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125845566.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125845566.png" alt="image-20240526125845566"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125853909.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125853909.png" alt="image-20240526125853909"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125908891.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125908891.png" alt="image-20240526125908891"><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526125916425.png" alt="image-20240526125916425"></p><h4 id="模板题——走多远"><a href="#模板题——走多远" class="headerlink" title="模板题——走多远"></a>模板题——<a href="https://www.lanqiao.cn/problems/1337/learning">走多远</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><span class="hljs-comment"># INF = 0x3f3f3f3f</span><br><span class="hljs-comment"># 针对有向无环图，在进行拓扑排序时，可以进行状态转移</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">topo</span>():<br>    q = deque()<br>    <span class="hljs-comment"># 1。将入度为0的点加入队列中</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> ru[i] == <span class="hljs-number">0</span>:<br>            q.append(i)<br>    <span class="hljs-comment"># 2. 当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(q) != <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># 2.1 取出队首元素</span><br>        u = q.popleft()<br>        <span class="hljs-comment"># 2.2 对于和u相连的每个点v</span><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-comment"># 从u走到v，说明dp[v]可以从dp[u]+1转移</span><br>            dp[v] = <span class="hljs-built_in">max</span>(dp[v], dp[u] + <span class="hljs-number">1</span>)<br>            <span class="hljs-comment"># 进行动态规划</span><br>            ru[v] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> ru[v] == <span class="hljs-number">0</span>:<br>                q.append(v)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 图的存储——邻接表</span><br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>ru = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append(v)<br>    ru[v] += <span class="hljs-number">1</span><br><span class="hljs-comment"># dp[i]表示走到i的最长路/最大值</span><br>dp = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>topo()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp))<br></code></pre></td></tr></table></figure><h4 id="模板题——最小字典序排列"><a href="#模板题——最小字典序排列" class="headerlink" title="模板题——最小字典序排列"></a>模板题——<a href="https://www.lanqiao.cn/problems/3351/learning">最小字典序排列</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 3351 最小字典序排列</span><br><span class="hljs-comment"># 拓扑排序+优先队列</span><br><span class="hljs-comment"># 需要字典序最小的拓扑序列，只需要将普通队列转换成优先队列即可</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">topo</span>():<br>    q = PriorityQueue()<br>    <span class="hljs-comment"># 1。将入度为0的点加入队列中</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> ru[i] == <span class="hljs-number">0</span>:<br>            q.put(i) <span class="hljs-comment"># append改为put</span><br>    <span class="hljs-comment"># 2. 当队列非空</span><br>    ans = []<br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty(): <span class="hljs-comment"># 判断优先队列q是否非空</span><br>    <span class="hljs-comment"># while len(q.queue) != 0:</span><br>        <span class="hljs-comment"># 2.1 取出队首元素</span><br>        u = q.get()  <span class="hljs-comment"># popleft改为put</span><br>        ans.append(u)<br>        <span class="hljs-comment"># 2.2 对于和u相连的每个点v</span><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-comment"># 进行动态规划</span><br>            ru[v] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> ru[v] == <span class="hljs-number">0</span>:<br>                q.put(v)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(ans) != n:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(*ans, sep = <span class="hljs-string">&#x27; &#x27;</span>)<br><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 图的存储——邻接表</span><br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>ru = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append(v)<br>    ru[v] += <span class="hljs-number">1</span><br>topo()<br></code></pre></td></tr></table></figure><h2 id="最短路"><a href="#最短路" class="headerlink" title="最短路"></a>最短路</h2><h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526130244161.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526130244161.png" alt="image-20240526130244161"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526130253653.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526130253653.png" alt="image-20240526130253653"></p><h4 id="模板题——-蓝桥公园"><a href="#模板题——-蓝桥公园" class="headerlink" title="模板题—— 蓝桥公园"></a>模板题——<a href="https://www.lanqiao.cn/problems/1121/learning"> 蓝桥公园</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span>=sys.stdin.readline<br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e18</span>)<br>dp=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  dp[i][i]=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br><span class="hljs-comment">#Floyd 模板</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> dp[i][j]==inf:<br>        dp[i][j]=-<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>  s,e=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-built_in">print</span>(dp[s][e])<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># Floyd 算法  多个起点--多个终点  多源最短路算法（多对多）</span><br><span class="hljs-comment"># 最简单的最短路径算法</span><br><span class="hljs-comment"># 存图:最简单的矩阵存图</span><br><span class="hljs-comment"># 效率不高，不能用于大图</span><br><br><span class="hljs-comment"># 动态规划：求图上两点i,j之间的最短距离，按‘从小图到全图’的步骤，在逐步扩大图的过程中计算和更新最短路</span><br><span class="hljs-comment"># 定义状态：dp[k][i][j]: i,j,k是点的编号，范围1--n</span><br><span class="hljs-comment"># 状态dp[k][i][j]表示在包含1--k点的子图上，点对i,j之间的最短路</span><br><span class="hljs-comment"># 状态转移方程 从子图1-k-1 扩展到子图 1-k</span><br><span class="hljs-comment"># dp[k][i][j]=min(dp[k-1][i][j],dp[k-1][i][k]+dp[k-1][k][j])</span><br><span class="hljs-comment"># 初始值：i,j直连 就是他们的边长； 若不直连，赋值为无穷大 / 0x3f3f3f3f3f3f3f3f</span><br><span class="hljs-comment"># 滚动数组优化：dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment">#                           不经过k     经过k</span><br><span class="hljs-comment"># for k in range(1,n+1):</span><br><span class="hljs-comment"># for i in range(1,n+1):</span><br><span class="hljs-comment"># for j in range(1,n+1):</span><br><span class="hljs-comment"># dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j])</span><br><span class="hljs-comment"># 只能用于n&lt;300 的小规模图</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">floyd</span>():<br>    <span class="hljs-keyword">global</span> dp<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                dp[i][j]=<span class="hljs-built_in">min</span>(dp[i][j],dp[i][k]+dp[k][j])<br><span class="hljs-comment"># 蓝桥公园</span><br><span class="hljs-comment"># n个点 m条边 q次查询</span><br>n,m,q=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>INF = <span class="hljs-number">0x3f3f3f3f3f3f3f3f</span><br>dp=[[INF <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">50</span>)]<br><span class="hljs-comment"># 记录路径</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>    u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    dp[u][v]=dp[v][u]=<span class="hljs-built_in">min</span>(dp[u][v],w)<br>floyd()<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    start,end=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-comment"># 无法到达</span><br>    <span class="hljs-keyword">if</span> dp[start][end]==INF:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 起点终点相同</span><br>    <span class="hljs-keyword">elif</span> start==end:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(dp[start][end])<br><br><span class="hljs-comment"># 1-12</span><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br>N, M, Q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>weight = [[<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> i == j <span class="hljs-keyword">else</span> sys.maxsize <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>) ] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 领接矩阵</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(M):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    weight[u][v] = <span class="hljs-built_in">min</span>(weight[u][v], w)<br>    weight[v][u] = weight[u][v]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># N次递推</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):  <span class="hljs-comment"># 更新最小值</span><br>                weight[i][j] = <span class="hljs-built_in">min</span>(weight[i][j], weight[i][k] + weight[k][j])<br>                weight[j][i] = weight[i][j]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Q):<br>    st, ed = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    t = weight[st][ed]<br>    <span class="hljs-keyword">if</span> t == sys.maxsize:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(t)<br></code></pre></td></tr></table></figure><h4 id="模板题——城市间的交易"><a href="#模板题——城市间的交易" class="headerlink" title="模板题——城市间的交易"></a>模板题——<a href="https://www.lanqiao.cn/problems/8336/learning/">城市间的交易</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 8336 城市间的交易</span><br>INF =<span class="hljs-number">1e18</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 产量、成本和售价</span><br>a, p, s = [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>)<br>f = [[INF] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>g = [[<span class="hljs-number">0</span>] * (n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    a[i], p[i], s[i] = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-comment"># 邻接矩阵初始化</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    f[u][v] = f[v][u] = <span class="hljs-built_in">min</span>(f[u][v], w)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    f[i][i] = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># Floyd</span><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>            f[i][j] = <span class="hljs-built_in">min</span>(f[i][j], f[i][k]+f[k][j])<br><span class="hljs-comment"># g[i][j]表示城市i的物品运输到城市j可得到的利润 = 城市j的售价 - 城市i的成本 - 从i到j的运输成本</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-comment"># 求每个城市的利润</span><br>    cnt = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        g[i][j] = s[j] - p[i] - f[i][j]<br>        cnt = <span class="hljs-built_in">max</span>(cnt, g[i][j])<br>    ans += a[i] * cnt<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>res=[]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>  a,p,s=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  res.append((a,p,s))<br>inf=<span class="hljs-built_in">int</span>(<span class="hljs-number">1e10</span>)<br>path=[[inf]*(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  path[u][v]=path[v][u]=<span class="hljs-built_in">min</span>(w,path[u][v])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+n):<br>  path[i][i]=<span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>      path[i][j]=<span class="hljs-built_in">min</span>(path[i][j],path[i][k]+path[k][j])<br>re=<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>  result=<span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> path[i][j]!=inf:<br>       result=<span class="hljs-built_in">max</span>(result,res[j-<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]-res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]-path[i][j]*res[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>])<br>  re+=result<br><span class="hljs-built_in">print</span>(re)<br></code></pre></td></tr></table></figure><h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131011122.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131011122.png" alt="image-20240526131011122"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131022596.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131022596.png" alt="image-20240526131022596"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131034522.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131034522.png" alt="image-20240526131034522"></p><h4 id="模板题——蓝桥王国"><a href="#模板题——蓝桥王国" class="headerlink" title="模板题——蓝桥王国"></a>模板题——<a href="https://www.lanqiao.cn/problems/1122/learning">蓝桥王国</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-comment"># 请在此输入您的代码</span><br><span class="hljs-comment"># 1122_蓝桥王国_Dijkstra算法</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue  <span class="hljs-comment"># 导入优先队列</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>INF = <span class="hljs-number">1e18</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-comment"># 返回从s出发到所有点的最短路</span><br>    <span class="hljs-comment"># d[i]表示从s到i的最短路</span><br>    d = [INF] * (n + <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># vis[i]表示是否出队列（注：与传统BFS不同）</span><br>    vis = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    q = PriorityQueue()<br><br>    <span class="hljs-comment"># 1.将起点入队列，更新距离</span><br>    d[s] = <span class="hljs-number">0</span><br>    <span class="hljs-comment"># 将距离放在前面，才能对距离使用优先队列</span><br>    q.put((d[s], s))  <span class="hljs-comment"># 入队用put()</span><br>    <span class="hljs-comment"># 当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():  <span class="hljs-comment"># 或者写为： while len(q.queue) != 0:</span><br>        dis, u = q.get()<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[u]: <span class="hljs-keyword">continue</span><br>        vis[u] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-comment"># 对于从u出发，到达v，权重为w的边</span><br>        <span class="hljs-keyword">for</span> v, w <span class="hljs-keyword">in</span> G[u]:<br>            <span class="hljs-keyword">if</span> d[v] &gt; d[u] + w:<br>                d[v] = d[u] + w<br>                q.put((d[v], v))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> d[i] == INF:<br>            d[i] = -<span class="hljs-number">1</span><br>    <span class="hljs-comment"># d.pop(0)</span><br>    <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>::] <span class="hljs-comment"># 从1到最后</span><br><br><br><span class="hljs-comment"># 皇宫编号为1</span><br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>G = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># 图的存储：邻接表。此题N为10^5，不能用邻接矩阵存图</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    G[u].append((v, w))<br><span class="hljs-built_in">print</span>(*dijkstra(<span class="hljs-number">1</span>)) <span class="hljs-comment"># 列表前面加星号作用是将列表解开（unpacke）成多个独立的参数，传入函数。</span><br></code></pre></td></tr></table></figure><h4 id="模板题——混境之地3"><a href="#模板题——混境之地3" class="headerlink" title="模板题——混境之地3"></a>模板题——<a href="https://www.lanqiao.cn/problems/3818/learning">混境之地3</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># 3818 混境之地  Dijkstra</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><span class="hljs-comment"># 数据较大时可以进行如下优化</span><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-built_in">input</span> = sys.stdin.readline<br>INF = <span class="hljs-number">1e18</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">c</span>):<br>    <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;.&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        s = <span class="hljs-string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> c == s[i]:<br>                <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span><br>        <span class="hljs-comment"># return ord(c) - ord(&#x27;A&#x27;) + 1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>():<br>    d = [[INF] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    vis = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    q = PriorityQueue()  <span class="hljs-comment"># 创建优先队列</span><br>    <span class="hljs-comment"># 1.将起点塞入队列</span><br>    d[x1][y1] = <span class="hljs-number">0</span><br>    q.put((d[x1][y1], x1, y1))<br>    <span class="hljs-comment"># 2.当队列非空</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():<br>        dis, x, y = q.get()<br>        <span class="hljs-keyword">if</span> x == x2 <span class="hljs-keyword">and</span> y == y2:<br>            <span class="hljs-keyword">return</span> dis<br>        <span class="hljs-comment"># 每个点只有第一次出队列是有用的</span><br>        <span class="hljs-keyword">if</span> vis[x][y]:<br>            <span class="hljs-keyword">continue</span><br>        vis[x][y] = <span class="hljs-number">1</span>  <span class="hljs-comment"># 出队列打标记</span><br>        <span class="hljs-keyword">for</span> d elta_x, delta_y <span class="hljs-keyword">in</span> [[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]]:<br>            xx, yy = x + delta_x, y + delta_y<br>            <span class="hljs-comment"># 判断未越界、未标记、非障碍物</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= xx &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= yy &lt; m <span class="hljs-keyword">and</span> vis[xx][yy] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> Map[xx][yy] != <span class="hljs-string">&quot;#&quot;</span>:<br>                <span class="hljs-keyword">if</span> d[xx][yy] &gt; d[x][y] + get(Map[xx][yy]):  <span class="hljs-comment"># 写一个get函数获取权重</span><br>                    d[xx][yy] = d[x][y] + get(Map[xx][yy])<br>                    q.put((d[xx][yy], xx, yy))<br>    <span class="hljs-keyword">return</span> INF<br><span class="hljs-comment"># 输入</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 地图大小</span><br>x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())  <span class="hljs-comment"># 起始点坐标</span><br>x1, y1, x2, y2 = x1 - <span class="hljs-number">1</span>, y1 - <span class="hljs-number">1</span>, x2 - <span class="hljs-number">1</span>, y2 - <span class="hljs-number">1</span><br><span class="hljs-comment"># 地图</span><br>Map = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>e = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())  <span class="hljs-comment"># 剩余能量</span><br><span class="hljs-comment"># 如果能量支撑到达终点，返回Yes，否则，返回No.</span><br><span class="hljs-keyword">if</span> e &gt;= dijkstra():  <span class="hljs-comment"># 不传参，使用全局变量</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Yes&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;No&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="生成树"><a href="#生成树" class="headerlink" title="生成树"></a>生成树</h2><h3 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131621641.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131621641.png" alt="image-20240526131621641"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131631028.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131631028.png" alt="image-20240526131631028"></p><h4 id="模板题——繁忙的都市"><a href="#模板题——繁忙的都市" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kruskal</span>():<br>    <span class="hljs-comment"># 初始化</span><br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    Map = []<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        Map.append([w, u, v])  <span class="hljs-comment"># 注意第一个参数是边权</span><br>    Map.sort()<br><br>    <span class="hljs-comment"># 并查集</span><br>    p = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">if</span> x != p[x]:<br>            p[x] = root(p[x])<br>        <span class="hljs-keyword">return</span> p[x]<br><br>    <span class="hljs-comment"># 非连环时更新</span><br>    _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span> = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> w, u, v <span class="hljs-keyword">in</span> Map:<br>        root_u = root(u)<br>        root_v = root(v)<br>        <span class="hljs-keyword">if</span> root_u != root_v:<br>            p[root_u] = root_v<br>            _<span class="hljs-built_in">sum</span> += <span class="hljs-number">1</span><br>            _<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span>(_<span class="hljs-built_in">max</span>, w)<br>    <span class="hljs-keyword">return</span> _<span class="hljs-built_in">sum</span>, _<span class="hljs-built_in">max</span><br><span class="hljs-built_in">print</span>(*kruskal())<br></code></pre></td></tr></table></figure><h3 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h3><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131818064.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131818064.png" alt="image-20240526131818064"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131825567.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131825567.png" alt="image-20240526131825567"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131840546.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131840546.png" alt="image-20240526131840546"></p><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131848626.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526131848626.png" alt="image-20240526131848626"></p><h4 id="模板题——繁忙的都市-1"><a href="#模板题——繁忙的都市-1" class="headerlink" title="模板题——繁忙的都市"></a>模板题——<a href="https://www.lanqiao.cn/problems/889/learning">繁忙的都市</a></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>e=[]<br><span class="hljs-keyword">for</span>  _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>  u,v,w=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>  e.append((w,u,v))<br><span class="hljs-comment">#边按照权重进行排序</span><br>e.sort()<br><span class="hljs-comment">#需要一个并查集</span><br>p=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">findroot</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">if</span> x==p[x]:<span class="hljs-keyword">return</span> x<br>  <span class="hljs-keyword">else</span>:<br>    p[x]=findroot(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br>ans=<span class="hljs-number">0</span><br><span class="hljs-comment">#进行遍历所有的边，进行合并：</span><br><span class="hljs-keyword">for</span> w,u,v <span class="hljs-keyword">in</span> e:<br>  <span class="hljs-comment">#只要u和v不在同一集合内就可以进行合并：</span><br>  rootu=findroot(u)<br>  rootv=findroot(v)<br>  <span class="hljs-keyword">if</span> rootu!=rootv:<br>    p[rootu]=rootv<br>    ans=<span class="hljs-built_in">max</span>(ans,w)<br><span class="hljs-built_in">print</span>(n-<span class="hljs-number">1</span>,ans)<br></code></pre></td></tr></table></figure><p class='item-img' data-src='/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132045604.png'><img src="/./../images/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B%E7%9F%A5%E8%AF%86%E6%A2%B3%E7%90%86/image-20240526132045604.png" alt="image-20240526132045604"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;动态规划&quot;&gt;&lt;a href=&quot;#动态规划&quot; class=&quot;headerlink&quot; title=&quot;动态规划&quot;&gt;&lt;/a&gt;动态规划&lt;/h1&gt;&lt;h2 id=&quot;基础&quot;&gt;&lt;a href=&quot;#基础&quot; class=&quot;headerlink&quot; title=&quot;基础&quot;&gt;&lt;/a&gt;基础&lt;/h</summary>
      
    
    
    
    <category term="刷题" scheme="http://zdx-1.github.io/categories/%E5%88%B7%E9%A2%98/"/>
    
    <category term="蓝桥国赛" scheme="http://zdx-1.github.io/categories/%E5%88%B7%E9%A2%98/%E8%93%9D%E6%A1%A5%E5%9B%BD%E8%B5%9B/"/>
    
    
    <category term="蓝桥杯" scheme="http://zdx-1.github.io/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
  </entry>
  
  <entry>
    <title>BookShop说明文档</title>
    <link href="http://zdx-1.github.io/2024/05/22/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/"/>
    <id>http://zdx-1.github.io/2024/05/22/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/</id>
    <published>2024-05-22T09:08:26.000Z</published>
    <updated>2024-05-22T09:31:20.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="zdx-BookShop"><a href="#zdx-BookShop" class="headerlink" title="zdx-BookShop"></a>zdx-BookShop</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>ASP.NET应用系统设计与开发实战项目BookShop，完整项目在BookShop目录下</p><h2 id="项目演示"><a href="#项目演示" class="headerlink" title="项目演示"></a>项目演示</h2><h3 id="当当网上书店首页"><a href="#当当网上书店首页" class="headerlink" title="当当网上书店首页"></a>当当网上书店首页</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522141242224-1716370269691-1.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522141242224-1716370269691-1.png" alt="image-20240522141242224"></p><h3 id="当当网图书分类显示"><a href="#当当网图书分类显示" class="headerlink" title="当当网图书分类显示"></a>当当网图书分类显示</h3><h4 id="按照图书分类"><a href="#按照图书分类" class="headerlink" title="按照图书分类"></a>按照图书分类</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145038514.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145038514.png" alt="image-20240522145038514"></p><h4 id="按照出版品牌商"><a href="#按照出版品牌商" class="headerlink" title="按照出版品牌商"></a>按照出版品牌商</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145159148.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145159148.png" alt="image-20240522145159148"></p><h3 id="当当网图书详情页"><a href="#当当网图书详情页" class="headerlink" title="当当网图书详情页"></a>当当网图书详情页</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174033577.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174033577.png" alt="image-20240517174033577"></p><h3 id="当当网新增订单演示"><a href="#当当网新增订单演示" class="headerlink" title="当当网新增订单演示"></a>当当网新增订单演示</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145321335.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145321335.png" alt="image-20240522145321335"><br class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145345736-1716370269692-2.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145345736-1716370269692-2.png" alt="image-20240522145345736"><br class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145651681-1716370269692-3.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145651681-1716370269692-3.png" alt="image-20240522145651681"><br class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145707070-1716370269692-4.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145707070-1716370269692-4.png" alt="image-20240522145707070"></p><h3 id="当当网用户登录"><a href="#当当网用户登录" class="headerlink" title="当当网用户登录"></a>当当网用户登录</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174110277-1716370269692-5.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174110277-1716370269692-5.png" alt="image-20240517174110277"></p><h3 id="当当网个人信息"><a href="#当当网个人信息" class="headerlink" title="当当网个人信息"></a>当当网个人信息</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174213598-1716370269692-6.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174213598-1716370269692-6.png" alt="image-20240517174213598"></p><h3 id="当当网购物车"><a href="#当当网购物车" class="headerlink" title="当当网购物车"></a>当当网购物车</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174250589-1716370269692-7.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174250589-1716370269692-7.png" alt="image-20240517174250589"></p><h3 id="搜索功能演示"><a href="#搜索功能演示" class="headerlink" title="搜索功能演示"></a>搜索功能演示</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174350714.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517174350714.png" alt="image-20240517174350714"></p><h3 id="后台管理系统用户登录"><a href="#后台管理系统用户登录" class="headerlink" title="后台管理系统用户登录"></a>后台管理系统用户登录</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173310694-1716370269692-21.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173310694-1716370269692-21.png" alt="image-20240517173310694"></p><h3 id="管理员用户管理"><a href="#管理员用户管理" class="headerlink" title="管理员用户管理"></a>管理员用户管理</h3><h4 id="用户信息查询"><a href="#用户信息查询" class="headerlink" title="用户信息查询"></a>用户信息查询</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173504064-1716370269692-8.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173504064-1716370269692-8.png" alt="image-20240517173504064"></p><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173549044-1716370269692-9.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173549044-1716370269692-9.png" alt="image-20240517173549044"></p><h4 id="后端新增用户"><a href="#后端新增用户" class="headerlink" title="后端新增用户"></a>后端新增用户</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150356339-1716370269692-10.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150356339-1716370269692-10.png" alt="image-20240522150356339"></p><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150526547-1716370269692-11.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150526547-1716370269692-11.png" alt="image-20240522150526547"></p><h3 id="管理员图书分类管理"><a href="#管理员图书分类管理" class="headerlink" title="管理员图书分类管理"></a>管理员图书分类管理</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173639044-1716370269692-12.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173639044-1716370269692-12.png" alt="image-20240517173639044"></p><h3 id="管理员出版社管理"><a href="#管理员出版社管理" class="headerlink" title="管理员出版社管理"></a>管理员出版社管理</h3><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173728364-1716370269692-13.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173728364-1716370269692-13.png" alt="image-20240517173728364"></p><h3 id="管理员图书管理"><a href="#管理员图书管理" class="headerlink" title="管理员图书管理"></a>管理员图书管理</h3><h4 id="图书分类查询"><a href="#图书分类查询" class="headerlink" title="图书分类查询"></a>图书分类查询</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173804161-1716370269692-14.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173804161-1716370269692-14.png" alt="image-20240517173804161"></p><h4 id="添加图书信息"><a href="#添加图书信息" class="headerlink" title="添加图书信息"></a>添加图书信息</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150125276-1716370269692-16.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150125276-1716370269692-16.png" alt="image-20240522150125276"></p><h4 id="修改图书信息"><a href="#修改图书信息" class="headerlink" title="修改图书信息"></a>修改图书信息</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145943193-1716370269692-15.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522145943193-1716370269692-15.png" alt="image-20240522145943193"></p><h3 id="管理员订单管理"><a href="#管理员订单管理" class="headerlink" title="管理员订单管理"></a>管理员订单管理</h3><h4 id="订单管理列表"><a href="#订单管理列表" class="headerlink" title="订单管理列表"></a>订单管理列表</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173834433-1716370269692-17.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240517173834433-1716370269692-17.png" alt="image-20240517173834433"></p><h4 id="订单详细信息"><a href="#订单详细信息" class="headerlink" title="订单详细信息"></a>订单详细信息</h4><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150240729-1716370269692-18.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522150240729-1716370269692-18.png" alt="image-20240522150240729"></p><h2 id="项目特点"><a href="#项目特点" class="headerlink" title="项目特点"></a>项目特点</h2><h4 id="使用Common类库统一管理DBHelper"><a href="#使用Common类库统一管理DBHelper" class="headerlink" title="使用Common类库统一管理DBHelper"></a>使用Common类库统一管理DBHelper</h4><p>具体内容请参考项目对应代码，此处举例</p><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160917117-1716370269692-19.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160917117-1716370269692-19.png" alt="image-20240522160917117"></p><h4 id="采用MD5加密用户密码信息"><a href="#采用MD5加密用户密码信息" class="headerlink" title="采用MD5加密用户密码信息"></a>采用MD5加密用户密码信息</h4><p>可以有效防止数据库泄露用户密码信息泄露的情况</p><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160655322-1716370269692-20.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160655322-1716370269692-20.png" alt="image-20240522160655322"></p><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160732222-1716370269692-22.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160732222-1716370269692-22.png" alt="image-20240522160732222"></p><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160615465-1716370269692-23.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160615465-1716370269692-23.png" alt="image-20240522160615465"></p><h2 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h2><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><ul><li><p>BookShop.WebUI：ASP.NET MVC Web应用程序项目，包含视图、控制器、路由等。</p></li><li><p>BookShop.Common：包含通用工具和辅助类的类库项目，用于数据访问层（DAL）和其他服务。</p></li><li><p>BookShop.DAL：数据访问层（DAL）类库项目，包含数据访问逻辑和接口。</p></li><li><p>BookShop.Model：包含数据模型（如书籍、作者、类别等）的类库项目。</p></li><li><p>BookShop.BLL：业务逻辑层（BLL）类库项目，包含业务规则和服务。</p></li></ul><p class='item-img' data-src='/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160151327-1716370269692-24.png'><img src="/./../images/BookShop%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/image-20240522160151327-1716370269692-24.png" alt="image-20240522160151327"></p><h3 id="Common类库"><a href="#Common类库" class="headerlink" title="Common类库"></a>Common类库</h3><ul><li>数据库连接字符串管理：在Common类库中，可以定义一个配置管理器类，用于从配置文件（如web.config或appsettings.json）中读取和解析数据库连接字符串。</li><li>数据库提供程序工厂：创建一个数据库提供程序工厂类，该类能够根据配置的连接字符串类型（如SQL Server、MySQL等）创建和返回相应的数据库上下文或连接对象。</li></ul><h3 id="数据访问层（DAL）"><a href="#数据访问层（DAL）" class="headerlink" title="数据访问层（DAL）"></a>数据访问层（DAL）</h3><ul><li>接口定义：在BookShop.Data项目中，为每种数据模型定义接口（如IBookRepository、IAuthorRepository等），这些接口包含CRUD（创建、读取、更新、删除）操作的方法。</li><li>实现类：为每个接口创建实现类（如SqlBookRepository、MySqlBookRepository等），这些类将使用Common类库中的数据库提供程序工厂来建立与数据库的连接并执行操作。</li></ul><h3 id="MySQL数据源处理"><a href="#MySQL数据源处理" class="headerlink" title="MySQL数据源处理"></a>MySQL数据源处理</h3><ul><li><p>在Common里面配置符合MySql的DBHelper</p></li><li><p>MySQL连接字符串：在web.config配置文件中添加MySQL数据库的连接字符串。</p></li><li><p>MySQL提供程序：在Common类库中实现或集成MySQL数据库提供程序（如使用MySQL Connector&#x2F;NET）。</p></li></ul><h3 id="业务逻辑层（BLL）"><a href="#业务逻辑层（BLL）" class="headerlink" title="业务逻辑层（BLL）"></a>业务逻辑层（BLL）</h3><ul><li>服务类：在BookShop.BLL项目中，创建服务类（如BookService、AuthorService等），这些类将调用数据访问层中的接口来执行业务逻辑。服务类应该是无状态的，并且只应包含与业务逻辑相关的代码。</li></ul><h3 id="控制器和视图"><a href="#控制器和视图" class="headerlink" title="控制器和视图"></a>控制器和视图</h3><ul><li>控制器：在BookShop.WebUI项目中，创建MVC控制器，这些控制器将调用业务逻辑层中的服务类来处理请求并返回数据。</li><li>视图：创建MVC视图来显示数据并允许用户与应用程序进行交互。视图应该只包含与显示相关的代码，并且应该通过控制器来与业务逻辑层进行通信。</li></ul><h2 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h2><ol><li>拉取项目</li><li>运行安装BookShop&#x2F;mysql-connection-net文件夹中的文件，并添加引用</li><li>添加mybookshop数据库，运行mysql脚本</li><li>清理并重新生成解决方案</li><li>运行项目</li></ol><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><ol><li><p>本项目使用.net4.5.2，可以向上兼容</p></li><li><p>在项目运行前请安装BookShop&#x2F;mysql-connection-net文件夹中的文件，并添加引用</p></li><li><p>测试账号信息如下：</p><table><thead><tr><th align="center">测试账号</th><th align="center">测试用户类型</th><th align="center">密码</th></tr></thead><tbody><tr><td align="center">admin</td><td align="center">管理员</td><td align="center">123456</td></tr><tr><td align="center">jingjing</td><td align="center">普通用户</td><td align="center">jingjing</td></tr><tr><td align="center">bobo</td><td align="center">VIP用户</td><td align="center">123456</td></tr></tbody></table></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;zdx-BookShop&quot;&gt;&lt;a href=&quot;#zdx-BookShop&quot; class=&quot;headerlink&quot; title=&quot;zdx-BookShop&quot;&gt;&lt;/a&gt;zdx-BookShop&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;</summary>
      
    
    
    
    <category term="ASP.NET学习" scheme="http://zdx-1.github.io/categories/ASP-NET%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="ASP.NET" scheme="http://zdx-1.github.io/tags/ASP-NET/"/>
    
  </entry>
  
</feed>
